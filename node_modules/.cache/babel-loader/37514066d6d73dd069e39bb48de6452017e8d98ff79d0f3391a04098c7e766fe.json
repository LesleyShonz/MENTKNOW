{"ast":null,"code":"import _classCallCheck from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _assertThisInitialized from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _inherits from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport _defineProperty from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport { jsx } from \"react/jsx-runtime\";\nimport { Box2d, Matrix2d } from \"@tldraw/primitives\";\nimport { SVGContainer } from \"../../../components/SVGContainer.mjs\";\nimport { ShapeUtil } from \"../ShapeUtil.mjs\";\nimport { DashedOutlineBox } from \"../shared/DashedOutlineBox.mjs\";\nvar GroupShapeUtil = /*#__PURE__*/function (_ShapeUtil) {\n  _inherits(GroupShapeUtil, _ShapeUtil);\n  var _super = _createSuper(GroupShapeUtil);\n  function GroupShapeUtil() {\n    var _this;\n    _classCallCheck(this, GroupShapeUtil);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _super.call.apply(_super, [this].concat(args));\n    _defineProperty(_assertThisInitialized(_this), \"type\", \"group\");\n    _defineProperty(_assertThisInitialized(_this), \"hideSelectionBoundsBg\", function () {\n      return false;\n    });\n    _defineProperty(_assertThisInitialized(_this), \"hideSelectionBoundsFg\", function () {\n      return true;\n    });\n    _defineProperty(_assertThisInitialized(_this), \"canBind\", function () {\n      return false;\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onChildrenChange\", function (group) {\n      var children = _this.editor.getSortedChildIds(group.id);\n      if (children.length === 0) {\n        if (_this.editor.pageState.focusLayerId === group.id) {\n          _this.editor.popFocusLayer();\n        }\n        _this.editor.deleteShapes([group.id]);\n        return;\n      } else if (children.length === 1) {\n        if (_this.editor.pageState.focusLayerId === group.id) {\n          _this.editor.popFocusLayer();\n        }\n        _this.editor.reparentShapesById(children, group.parentId);\n        _this.editor.deleteShapes([group.id]);\n        return;\n      }\n    });\n    return _this;\n  }\n  _createClass(GroupShapeUtil, [{\n    key: \"defaultProps\",\n    value: function defaultProps() {\n      return {};\n    }\n  }, {\n    key: \"getBounds\",\n    value: function getBounds(shape) {\n      var _this2 = this;\n      var children = this.editor.getSortedChildIds(shape.id);\n      if (children.length === 0) {\n        return new Box2d();\n      }\n      var allChildPoints = children.flatMap(function (childId) {\n        var shape2 = _this2.editor.getShapeById(childId);\n        return _this2.editor.getOutlineById(childId).map(function (point) {\n          return Matrix2d.applyToPoint(_this2.editor.getTransform(shape2), point);\n        });\n      });\n      return Box2d.FromPoints(allChildPoints);\n    }\n  }, {\n    key: \"getCenter\",\n    value: function getCenter(shape) {\n      return this.bounds(shape).center;\n    }\n  }, {\n    key: \"getOutline\",\n    value: function getOutline(shape) {\n      return this.bounds(shape).corners;\n    }\n  }, {\n    key: \"component\",\n    value: function component(shape) {\n      var _this3 = this;\n      var _this$editor = this.editor,\n        erasingIdsSet = _this$editor.erasingIdsSet,\n        _this$editor$pageStat = _this$editor.pageState,\n        hintingIds = _this$editor$pageStat.hintingIds,\n        focusLayerId = _this$editor$pageStat.focusLayerId,\n        zoomLevel = _this$editor.zoomLevel;\n      var isErasing = erasingIdsSet.has(shape.id);\n      var isHintingOtherGroup = hintingIds.length > 0 && hintingIds.some(function (id) {\n        return id !== shape.id && _this3.editor.isShapeOfType(_this3.editor.getShapeById(id), GroupShapeUtil);\n      });\n      if (\n      // always show the outline while we're erasing the group\n      !isErasing && (\n      // show the outline while the group is focused unless something outside of the group is being hinted\n      // this happens dropping shapes from a group onto some outside group\n      shape.id !== focusLayerId || isHintingOtherGroup)) {\n        return null;\n      }\n      var bounds = this.bounds(shape);\n      return /* @__PURE__ */jsx(SVGContainer, {\n        id: shape.id,\n        children: /* @__PURE__ */jsx(DashedOutlineBox, {\n          className: \"tl-group\",\n          bounds: bounds,\n          zoomLevel: zoomLevel\n        })\n      });\n    }\n  }, {\n    key: \"indicator\",\n    value: function indicator(shape) {\n      var zoomLevel = this.editor.camera.z;\n      var bounds = this.bounds(shape);\n      return /* @__PURE__ */jsx(DashedOutlineBox, {\n        className: \"\",\n        bounds: bounds,\n        zoomLevel: zoomLevel\n      });\n    }\n  }]);\n  return GroupShapeUtil;\n}(ShapeUtil);\n_defineProperty(GroupShapeUtil, \"type\", \"group\");\nexport { GroupShapeUtil };","map":{"version":3,"names":["jsx","Box2d","Matrix2d","SVGContainer","ShapeUtil","DashedOutlineBox","GroupShapeUtil","_ShapeUtil","_inherits","_super","_createSuper","_this","_classCallCheck","_len","arguments","length","args","Array","_key","call","apply","concat","_defineProperty","_assertThisInitialized","group","children","editor","getSortedChildIds","id","pageState","focusLayerId","popFocusLayer","deleteShapes","reparentShapesById","parentId","_createClass","key","value","defaultProps","getBounds","shape","_this2","allChildPoints","flatMap","childId","shape2","getShapeById","getOutlineById","map","point","applyToPoint","getTransform","FromPoints","getCenter","bounds","center","getOutline","corners","component","_this3","_this$editor","erasingIdsSet","_this$editor$pageStat","hintingIds","zoomLevel","isErasing","has","isHintingOtherGroup","some","isShapeOfType","className","indicator","camera","z"],"sources":["/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@tldraw/editor/src/lib/editor/shapes/group/GroupShapeUtil.tsx"],"sourcesContent":["import { Box2d, Matrix2d, Vec2d } from '@tldraw/primitives'\nimport { TLGroupShape } from '@tldraw/tlschema'\nimport { SVGContainer } from '../../../components/SVGContainer'\nimport { ShapeUtil, TLOnChildrenChangeHandler } from '../ShapeUtil'\nimport { DashedOutlineBox } from '../shared/DashedOutlineBox'\n\n/** @public */\nexport class GroupShapeUtil extends ShapeUtil<TLGroupShape> {\n\tstatic override type = 'group' as const\n\n\ttype = 'group' as const\n\n\thideSelectionBoundsBg = () => false\n\thideSelectionBoundsFg = () => true\n\n\tcanBind = () => false\n\n\tdefaultProps(): TLGroupShape['props'] {\n\t\treturn {}\n\t}\n\n\tgetBounds(shape: TLGroupShape): Box2d {\n\t\tconst children = this.editor.getSortedChildIds(shape.id)\n\t\tif (children.length === 0) {\n\t\t\treturn new Box2d()\n\t\t}\n\n\t\tconst allChildPoints = children.flatMap((childId) => {\n\t\t\tconst shape = this.editor.getShapeById(childId)!\n\t\t\treturn this.editor\n\t\t\t\t.getOutlineById(childId)\n\t\t\t\t.map((point) => Matrix2d.applyToPoint(this.editor.getTransform(shape), point))\n\t\t})\n\n\t\treturn Box2d.FromPoints(allChildPoints)\n\t}\n\n\tgetCenter(shape: TLGroupShape): Vec2d {\n\t\treturn this.bounds(shape).center\n\t}\n\n\tgetOutline(shape: TLGroupShape): Vec2d[] {\n\t\treturn this.bounds(shape).corners\n\t}\n\n\tcomponent(shape: TLGroupShape) {\n\t\t// Not a class component, but eslint can't tell that :(\n\t\tconst {\n\t\t\terasingIdsSet,\n\t\t\tpageState: { hintingIds, focusLayerId },\n\t\t\tzoomLevel,\n\t\t} = this.editor\n\n\t\tconst isErasing = erasingIdsSet.has(shape.id)\n\n\t\tconst isHintingOtherGroup =\n\t\t\thintingIds.length > 0 &&\n\t\t\thintingIds.some(\n\t\t\t\t(id) =>\n\t\t\t\t\tid !== shape.id &&\n\t\t\t\t\tthis.editor.isShapeOfType(this.editor.getShapeById(id)!, GroupShapeUtil)\n\t\t\t)\n\n\t\tif (\n\t\t\t// always show the outline while we're erasing the group\n\t\t\t!isErasing &&\n\t\t\t// show the outline while the group is focused unless something outside of the group is being hinted\n\t\t\t// this happens dropping shapes from a group onto some outside group\n\t\t\t(shape.id !== focusLayerId || isHintingOtherGroup)\n\t\t) {\n\t\t\treturn null\n\t\t}\n\n\t\tconst bounds = this.bounds(shape)\n\n\t\treturn (\n\t\t\t<SVGContainer id={shape.id}>\n\t\t\t\t<DashedOutlineBox className=\"tl-group\" bounds={bounds} zoomLevel={zoomLevel} />\n\t\t\t</SVGContainer>\n\t\t)\n\t}\n\n\tindicator(shape: TLGroupShape) {\n\t\t// Not a class component, but eslint can't tell that :(\n\t\tconst {\n\t\t\tcamera: { z: zoomLevel },\n\t\t} = this.editor\n\n\t\tconst bounds = this.bounds(shape)\n\n\t\treturn <DashedOutlineBox className=\"\" bounds={bounds} zoomLevel={zoomLevel} />\n\t}\n\n\tonChildrenChange: TLOnChildrenChangeHandler<TLGroupShape> = (group) => {\n\t\tconst children = this.editor.getSortedChildIds(group.id)\n\t\tif (children.length === 0) {\n\t\t\tif (this.editor.pageState.focusLayerId === group.id) {\n\t\t\t\tthis.editor.popFocusLayer()\n\t\t\t}\n\t\t\tthis.editor.deleteShapes([group.id])\n\t\t\treturn\n\t\t} else if (children.length === 1) {\n\t\t\tif (this.editor.pageState.focusLayerId === group.id) {\n\t\t\t\tthis.editor.popFocusLayer()\n\t\t\t}\n\t\t\tthis.editor.reparentShapesById(children, group.parentId)\n\t\t\tthis.editor.deleteShapes([group.id])\n\t\t\treturn\n\t\t}\n\t}\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}