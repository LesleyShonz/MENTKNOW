{"ast":null,"code":"import _objectSpread from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _createForOfIteratorHelper from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _classCallCheck from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _assertThisInitialized from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _inherits from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport _defineProperty from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport { Fragment, jsx, jsxs } from \"react/jsx-runtime\";\nimport { canolicalizeRotation, toDomPrecision } from \"@tldraw/primitives\";\nimport { last } from \"@tldraw/utils\";\nimport { SVGContainer } from \"../../../components/SVGContainer.mjs\";\nimport { defaultEmptyAs } from \"../../../utils/string.mjs\";\nimport { BaseBoxShapeUtil } from \"../BaseBoxShapeUtil.mjs\";\nimport { GroupShapeUtil } from \"../group/GroupShapeUtil.mjs\";\nimport { createTextSvgElementFromSpans } from \"../shared/createTextSvgElementFromSpans.mjs\";\nimport { FrameHeading } from \"./components/FrameHeading.mjs\";\nvar FrameShapeUtil = /*#__PURE__*/function (_BaseBoxShapeUtil) {\n  _inherits(FrameShapeUtil, _BaseBoxShapeUtil);\n  var _super = _createSuper(FrameShapeUtil);\n  function FrameShapeUtil() {\n    var _this;\n    _classCallCheck(this, FrameShapeUtil);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _super.call.apply(_super, [this].concat(args));\n    _defineProperty(_assertThisInitialized(_this), \"canBind\", function () {\n      return true;\n    });\n    _defineProperty(_assertThisInitialized(_this), \"canEdit\", function () {\n      return true;\n    });\n    _defineProperty(_assertThisInitialized(_this), \"canReceiveNewChildrenOfType\", function (shape, _type) {\n      return !shape.isLocked;\n    });\n    _defineProperty(_assertThisInitialized(_this), \"canDropShapes\", function (shape, _shapes) {\n      return !shape.isLocked;\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onDragShapesOver\", function (frame, shapes) {\n      if (!shapes.every(function (child) {\n        return child.parentId === frame.id;\n      })) {\n        _this.editor.reparentShapesById(shapes.map(function (shape) {\n          return shape.id;\n        }), frame.id);\n        return {\n          shouldHint: true\n        };\n      }\n      return {\n        shouldHint: false\n      };\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onDragShapesOut\", function (_shape, shapes) {\n      var parent = _this.editor.getShapeById(_shape.parentId);\n      var isInGroup = parent && _this.editor.isShapeOfType(parent, GroupShapeUtil);\n      if (isInGroup) {\n        _this.editor.reparentShapesById(shapes.map(function (shape) {\n          return shape.id;\n        }), parent.id);\n      } else {\n        _this.editor.reparentShapesById(shapes.map(function (shape) {\n          return shape.id;\n        }), _this.editor.currentPageId);\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onResizeEnd\", function (shape) {\n      var bounds = _this.editor.getPageBounds(shape);\n      var children = _this.editor.getSortedChildIds(shape.id);\n      var shapesToReparent = [];\n      var _iterator = _createForOfIteratorHelper(children),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var childId = _step.value;\n          var childBounds = _this.editor.getPageBoundsById(childId);\n          if (!bounds.includes(childBounds)) {\n            shapesToReparent.push(childId);\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n      if (shapesToReparent.length > 0) {\n        _this.editor.reparentShapesById(shapesToReparent, _this.editor.currentPageId);\n      }\n    });\n    return _this;\n  }\n  _createClass(FrameShapeUtil, [{\n    key: \"defaultProps\",\n    value: function defaultProps() {\n      return {\n        w: 160 * 2,\n        h: 90 * 2,\n        name: \"\"\n      };\n    }\n  }, {\n    key: \"component\",\n    value: function component(shape) {\n      var bounds = this.bounds(shape);\n      return /* @__PURE__ */jsxs(Fragment, {\n        children: [/* @__PURE__ */jsxs(SVGContainer, {\n          children: [/* @__PURE__ */jsx(\"rect\", {\n            className: \"tl-hitarea-stroke\",\n            width: bounds.width,\n            height: bounds.height\n          }), /* @__PURE__ */jsx(\"rect\", {\n            className: \"tl-frame__body\",\n            width: bounds.width,\n            height: bounds.height,\n            fill: \"none\"\n          })]\n        }), /* @__PURE__ */jsx(FrameHeading, {\n          id: shape.id,\n          name: shape.props.name,\n          width: bounds.width,\n          height: bounds.height\n        })]\n      });\n    }\n  }, {\n    key: \"toSvg\",\n    value: function toSvg(shape, font, colors) {\n      var g = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n      var rect = document.createElementNS(\"http://www.w3.org/2000/svg\", \"rect\");\n      rect.setAttribute(\"width\", shape.props.w.toString());\n      rect.setAttribute(\"height\", shape.props.h.toString());\n      rect.setAttribute(\"fill\", colors.solid);\n      rect.setAttribute(\"stroke\", colors.fill.black);\n      rect.setAttribute(\"stroke-width\", \"1\");\n      rect.setAttribute(\"rx\", \"1\");\n      rect.setAttribute(\"ry\", \"1\");\n      g.appendChild(rect);\n      var pageRotation = canolicalizeRotation(this.editor.getPageRotationById(shape.id));\n      var offsetRotation = pageRotation + Math.PI / 4;\n      var scaledRotation = (offsetRotation * (2 / Math.PI) + 4) % 4;\n      var labelSide = [\"top\", \"left\", \"bottom\", \"right\"][Math.floor(scaledRotation)];\n      var labelTranslate;\n      switch (labelSide) {\n        case \"top\":\n          labelTranslate = \"\";\n          break;\n        case \"right\":\n          labelTranslate = \"translate(\".concat(toDomPrecision(shape.props.w), \"px, 0px) rotate(90deg)\");\n          break;\n        case \"bottom\":\n          labelTranslate = \"translate(\".concat(toDomPrecision(shape.props.w), \"px, \").concat(toDomPrecision(shape.props.h), \"px) rotate(180deg)\");\n          break;\n        case \"left\":\n          labelTranslate = \"translate(0px, \".concat(toDomPrecision(shape.props.h), \"px) rotate(270deg)\");\n          break;\n        default:\n          labelTranslate = \"\";\n      }\n      var opts = {\n        fontSize: 12,\n        fontFamily: \"Inter, sans-serif\",\n        textAlign: \"start\",\n        width: shape.props.w,\n        height: 32,\n        padding: 0,\n        lineHeight: 1,\n        fontStyle: \"normal\",\n        fontWeight: \"normal\",\n        overflow: \"truncate-ellipsis\",\n        verticalTextAlign: \"middle\"\n      };\n      var spans = this.editor.textMeasure.measureTextSpans(defaultEmptyAs(shape.props.name, \"Frame\") + String.fromCharCode(8203), opts);\n      var firstSpan = spans[0];\n      var lastSpan = last(spans);\n      var labelTextWidth = lastSpan.box.w + lastSpan.box.x - firstSpan.box.x;\n      var text = createTextSvgElementFromSpans(this.editor, spans, _objectSpread({\n        offsetY: -opts.height - 2\n      }, opts));\n      text.style.setProperty(\"transform\", labelTranslate);\n      var textBg = document.createElementNS(\"http://www.w3.org/2000/svg\", \"rect\");\n      textBg.setAttribute(\"x\", \"-8px\");\n      textBg.setAttribute(\"y\", -opts.height - 4 + \"px\");\n      textBg.setAttribute(\"width\", labelTextWidth + 16 + \"px\");\n      textBg.setAttribute(\"height\", \"\".concat(opts.height, \"px\"));\n      textBg.setAttribute(\"rx\", \"4px\");\n      textBg.setAttribute(\"ry\", \"4px\");\n      textBg.setAttribute(\"fill\", colors.background);\n      g.appendChild(textBg);\n      g.appendChild(text);\n      return g;\n    }\n  }, {\n    key: \"indicator\",\n    value: function indicator(shape) {\n      var bounds = this.bounds(shape);\n      return /* @__PURE__ */jsx(\"rect\", {\n        width: toDomPrecision(bounds.width),\n        height: toDomPrecision(bounds.height),\n        className: \"tl-frame-indicator\"\n      });\n    }\n  }, {\n    key: \"providesBackgroundForChildren\",\n    value: function providesBackgroundForChildren() {\n      return true;\n    }\n  }]);\n  return FrameShapeUtil;\n}(BaseBoxShapeUtil);\n_defineProperty(FrameShapeUtil, \"type\", \"frame\");\nexport { FrameShapeUtil };","map":{"version":3,"names":["Fragment","jsx","jsxs","canolicalizeRotation","toDomPrecision","last","SVGContainer","defaultEmptyAs","BaseBoxShapeUtil","GroupShapeUtil","createTextSvgElementFromSpans","FrameHeading","FrameShapeUtil","_BaseBoxShapeUtil","_inherits","_super","_createSuper","_this","_classCallCheck","_len","arguments","length","args","Array","_key","call","apply","concat","_defineProperty","_assertThisInitialized","shape","_type","isLocked","_shapes","frame","shapes","every","child","parentId","id","editor","reparentShapesById","map","shouldHint","_shape","parent","getShapeById","isInGroup","isShapeOfType","currentPageId","bounds","getPageBounds","children","getSortedChildIds","shapesToReparent","_iterator","_createForOfIteratorHelper","_step","s","n","done","childId","value","childBounds","getPageBoundsById","includes","push","err","e","f","_createClass","key","defaultProps","w","h","name","component","className","width","height","fill","props","toSvg","font","colors","g","document","createElementNS","rect","setAttribute","toString","solid","black","appendChild","pageRotation","getPageRotationById","offsetRotation","Math","PI","scaledRotation","labelSide","floor","labelTranslate","opts","fontSize","fontFamily","textAlign","padding","lineHeight","fontStyle","fontWeight","overflow","verticalTextAlign","spans","textMeasure","measureTextSpans","String","fromCharCode","firstSpan","lastSpan","labelTextWidth","box","x","text","_objectSpread","offsetY","style","setProperty","textBg","background","indicator","providesBackgroundForChildren"],"sources":["/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@tldraw/editor/src/lib/editor/shapes/frame/FrameShapeUtil.tsx"],"sourcesContent":["import { canolicalizeRotation, SelectionEdge, toDomPrecision } from '@tldraw/primitives'\nimport { TLFrameShape, TLShape, TLShapeId } from '@tldraw/tlschema'\nimport { last } from '@tldraw/utils'\nimport { SVGContainer } from '../../../components/SVGContainer'\nimport { defaultEmptyAs } from '../../../utils/string'\nimport { BaseBoxShapeUtil } from '../BaseBoxShapeUtil'\nimport { GroupShapeUtil } from '../group/GroupShapeUtil'\nimport { TLOnResizeEndHandler } from '../ShapeUtil'\nimport { createTextSvgElementFromSpans } from '../shared/createTextSvgElementFromSpans'\nimport { TLExportColors } from '../shared/TLExportColors'\nimport { FrameHeading } from './components/FrameHeading'\n\n/** @public */\nexport class FrameShapeUtil extends BaseBoxShapeUtil<TLFrameShape> {\n\tstatic override type = 'frame' as const\n\n\toverride canBind = () => true\n\n\toverride canEdit = () => true\n\n\toverride defaultProps(): TLFrameShape['props'] {\n\t\treturn { w: 160 * 2, h: 90 * 2, name: '' }\n\t}\n\n\toverride component(shape: TLFrameShape) {\n\t\tconst bounds = this.bounds(shape)\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<SVGContainer>\n\t\t\t\t\t<rect className=\"tl-hitarea-stroke\" width={bounds.width} height={bounds.height} />\n\t\t\t\t\t<rect\n\t\t\t\t\t\tclassName=\"tl-frame__body\"\n\t\t\t\t\t\twidth={bounds.width}\n\t\t\t\t\t\theight={bounds.height}\n\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t/>\n\t\t\t\t</SVGContainer>\n\t\t\t\t<FrameHeading\n\t\t\t\t\tid={shape.id}\n\t\t\t\t\tname={shape.props.name}\n\t\t\t\t\twidth={bounds.width}\n\t\t\t\t\theight={bounds.height}\n\t\t\t\t/>\n\t\t\t</>\n\t\t)\n\t}\n\n\toverride toSvg(\n\t\tshape: TLFrameShape,\n\t\tfont: string,\n\t\tcolors: TLExportColors\n\t): SVGElement | Promise<SVGElement> {\n\t\tconst g = document.createElementNS('http://www.w3.org/2000/svg', 'g')\n\n\t\tconst rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect')\n\t\trect.setAttribute('width', shape.props.w.toString())\n\t\trect.setAttribute('height', shape.props.h.toString())\n\t\trect.setAttribute('fill', colors.solid)\n\t\trect.setAttribute('stroke', colors.fill.black)\n\t\trect.setAttribute('stroke-width', '1')\n\t\trect.setAttribute('rx', '1')\n\t\trect.setAttribute('ry', '1')\n\t\tg.appendChild(rect)\n\n\t\t// Text label\n\t\tconst pageRotation = canolicalizeRotation(this.editor.getPageRotationById(shape.id))\n\t\t// rotate right 45 deg\n\t\tconst offsetRotation = pageRotation + Math.PI / 4\n\t\tconst scaledRotation = (offsetRotation * (2 / Math.PI) + 4) % 4\n\t\tconst labelSide: SelectionEdge = (['top', 'left', 'bottom', 'right'] as const)[\n\t\t\tMath.floor(scaledRotation)\n\t\t]\n\n\t\tlet labelTranslate: string\n\t\tswitch (labelSide) {\n\t\t\tcase 'top':\n\t\t\t\tlabelTranslate = ``\n\t\t\t\tbreak\n\t\t\tcase 'right':\n\t\t\t\tlabelTranslate = `translate(${toDomPrecision(shape.props.w)}px, 0px) rotate(90deg)`\n\t\t\t\tbreak\n\t\t\tcase 'bottom':\n\t\t\t\tlabelTranslate = `translate(${toDomPrecision(shape.props.w)}px, ${toDomPrecision(\n\t\t\t\t\tshape.props.h\n\t\t\t\t)}px) rotate(180deg)`\n\t\t\t\tbreak\n\t\t\tcase 'left':\n\t\t\t\tlabelTranslate = `translate(0px, ${toDomPrecision(shape.props.h)}px) rotate(270deg)`\n\t\t\t\tbreak\n\t\t\tdefault:\n\t\t\t\tlabelTranslate = ``\n\t\t}\n\n\t\t// Truncate with ellipsis\n\t\tconst opts = {\n\t\t\tfontSize: 12,\n\t\t\tfontFamily: 'Inter, sans-serif',\n\t\t\ttextAlign: 'start' as const,\n\t\t\twidth: shape.props.w,\n\t\t\theight: 32,\n\t\t\tpadding: 0,\n\t\t\tlineHeight: 1,\n\t\t\tfontStyle: 'normal',\n\t\t\tfontWeight: 'normal',\n\t\t\toverflow: 'truncate-ellipsis' as const,\n\t\t\tverticalTextAlign: 'middle' as const,\n\t\t}\n\n\t\tconst spans = this.editor.textMeasure.measureTextSpans(\n\t\t\tdefaultEmptyAs(shape.props.name, 'Frame') + String.fromCharCode(8203),\n\t\t\topts\n\t\t)\n\n\t\tconst firstSpan = spans[0]\n\t\tconst lastSpan = last(spans)!\n\t\tconst labelTextWidth = lastSpan.box.w + lastSpan.box.x - firstSpan.box.x\n\t\tconst text = createTextSvgElementFromSpans(this.editor, spans, {\n\t\t\toffsetY: -opts.height - 2,\n\t\t\t...opts,\n\t\t})\n\t\ttext.style.setProperty('transform', labelTranslate)\n\n\t\tconst textBg = document.createElementNS('http://www.w3.org/2000/svg', 'rect')\n\t\ttextBg.setAttribute('x', '-8px')\n\t\ttextBg.setAttribute('y', -opts.height - 4 + 'px')\n\t\ttextBg.setAttribute('width', labelTextWidth + 16 + 'px')\n\t\ttextBg.setAttribute('height', `${opts.height}px`)\n\t\ttextBg.setAttribute('rx', 4 + 'px')\n\t\ttextBg.setAttribute('ry', 4 + 'px')\n\t\ttextBg.setAttribute('fill', colors.background)\n\n\t\tg.appendChild(textBg)\n\t\tg.appendChild(text)\n\n\t\treturn g\n\t}\n\n\tindicator(shape: TLFrameShape) {\n\t\tconst bounds = this.bounds(shape)\n\n\t\treturn (\n\t\t\t<rect\n\t\t\t\twidth={toDomPrecision(bounds.width)}\n\t\t\t\theight={toDomPrecision(bounds.height)}\n\t\t\t\tclassName={`tl-frame-indicator`}\n\t\t\t/>\n\t\t)\n\t}\n\n\toverride canReceiveNewChildrenOfType = (shape: TLShape, _type: TLShape['type']) => {\n\t\treturn !shape.isLocked\n\t}\n\n\toverride providesBackgroundForChildren(): boolean {\n\t\treturn true\n\t}\n\n\toverride canDropShapes = (shape: TLFrameShape, _shapes: TLShape[]): boolean => {\n\t\treturn !shape.isLocked\n\t}\n\n\toverride onDragShapesOver = (frame: TLFrameShape, shapes: TLShape[]): { shouldHint: boolean } => {\n\t\tif (!shapes.every((child) => child.parentId === frame.id)) {\n\t\t\tthis.editor.reparentShapesById(\n\t\t\t\tshapes.map((shape) => shape.id),\n\t\t\t\tframe.id\n\t\t\t)\n\t\t\treturn { shouldHint: true }\n\t\t}\n\t\treturn { shouldHint: false }\n\t}\n\n\tonDragShapesOut = (_shape: TLFrameShape, shapes: TLShape[]): void => {\n\t\tconst parent = this.editor.getShapeById(_shape.parentId)\n\t\tconst isInGroup = parent && this.editor.isShapeOfType(parent, GroupShapeUtil)\n\n\t\t// If frame is in a group, keep the shape\n\t\t// moved out in that group\n\t\tif (isInGroup) {\n\t\t\tthis.editor.reparentShapesById(\n\t\t\t\tshapes.map((shape) => shape.id),\n\t\t\t\tparent.id\n\t\t\t)\n\t\t} else {\n\t\t\tthis.editor.reparentShapesById(\n\t\t\t\tshapes.map((shape) => shape.id),\n\t\t\t\tthis.editor.currentPageId\n\t\t\t)\n\t\t}\n\t}\n\n\toverride onResizeEnd: TLOnResizeEndHandler<TLFrameShape> = (shape) => {\n\t\tconst bounds = this.editor.getPageBounds(shape)!\n\t\tconst children = this.editor.getSortedChildIds(shape.id)\n\n\t\tconst shapesToReparent: TLShapeId[] = []\n\n\t\tfor (const childId of children) {\n\t\t\tconst childBounds = this.editor.getPageBoundsById(childId)!\n\t\t\tif (!bounds.includes(childBounds)) {\n\t\t\t\tshapesToReparent.push(childId)\n\t\t\t}\n\t\t}\n\n\t\tif (shapesToReparent.length > 0) {\n\t\t\tthis.editor.reparentShapesById(shapesToReparent, this.editor.currentPageId)\n\t\t}\n\t}\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}