{"ast":null,"code":"import _regeneratorRuntime from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { ACCEPTED_ASSET_TYPE, useEditor } from \"@tldraw/editor\";\nimport { useCallback, useEffect, useRef } from \"react\";\nfunction useInsertMedia() {\n  var editor = useEditor();\n  var inputRef = useRef();\n  useEffect(function () {\n    var input = window.document.createElement(\"input\");\n    input.type = \"file\";\n    input.accept = ACCEPTED_ASSET_TYPE;\n    input.multiple = true;\n    inputRef.current = input;\n    function onchange(_x) {\n      return _onchange.apply(this, arguments);\n    }\n    function _onchange() {\n      _onchange = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(e) {\n        var fileList;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              fileList = e.target.files;\n              if (!(!fileList || fileList.length === 0)) {\n                _context.next = 3;\n                break;\n              }\n              return _context.abrupt(\"return\");\n            case 3:\n              _context.next = 5;\n              return editor.putExternalContent({\n                type: \"files\",\n                files: Array.from(fileList),\n                point: editor.viewportPageBounds.center,\n                ignoreParent: false\n              });\n            case 5:\n              input.value = \"\";\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }));\n      return _onchange.apply(this, arguments);\n    }\n    input.addEventListener(\"change\", onchange);\n    return function () {\n      inputRef.current = void 0;\n      input.removeEventListener(\"change\", onchange);\n    };\n  }, [editor]);\n  return useCallback(function () {\n    var _inputRef$current;\n    (_inputRef$current = inputRef.current) === null || _inputRef$current === void 0 || _inputRef$current.click();\n  }, [inputRef]);\n}\nexport { useInsertMedia };","map":{"version":3,"names":["ACCEPTED_ASSET_TYPE","useEditor","useCallback","useEffect","useRef","useInsertMedia","editor","inputRef","input","window","document","createElement","type","accept","multiple","current","onchange","_x","_onchange","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","fileList","wrap","_callee$","_context","prev","next","target","files","length","abrupt","putExternalContent","Array","from","point","viewportPageBounds","center","ignoreParent","value","stop","addEventListener","removeEventListener","_inputRef$current","click"],"sources":["/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@tldraw/ui/src/lib/hooks/useInsertMedia.ts"],"sourcesContent":["import { ACCEPTED_ASSET_TYPE, useEditor } from '@tldraw/editor'\nimport { useCallback, useEffect, useRef } from 'react'\n\nexport function useInsertMedia() {\n\tconst editor = useEditor()\n\tconst inputRef = useRef<HTMLInputElement>()\n\n\tuseEffect(() => {\n\t\tconst input = window.document.createElement('input')\n\t\tinput.type = 'file'\n\t\tinput.accept = ACCEPTED_ASSET_TYPE\n\t\tinput.multiple = true\n\t\tinputRef.current = input\n\t\tasync function onchange(e: Event) {\n\t\t\tconst fileList = (e.target as HTMLInputElement).files\n\t\t\tif (!fileList || fileList.length === 0) return\n\t\t\tawait editor.putExternalContent({\n\t\t\t\ttype: 'files',\n\t\t\t\tfiles: Array.from(fileList),\n\t\t\t\tpoint: editor.viewportPageBounds.center,\n\t\t\t\tignoreParent: false,\n\t\t\t})\n\t\t\tinput.value = ''\n\t\t}\n\t\tinput.addEventListener('change', onchange)\n\t\treturn () => {\n\t\t\tinputRef.current = undefined\n\t\t\tinput.removeEventListener('change', onchange)\n\t\t}\n\t}, [editor])\n\n\treturn useCallback(() => {\n\t\tinputRef.current?.click()\n\t}, [inputRef])\n}\n"],"mappings":";;AAAA,SAASA,mBAAA,EAAqBC,SAAA,QAAiB;AAC/C,SAASC,WAAA,EAAaC,SAAA,EAAWC,MAAA,QAAc;AAExC,SAASC,eAAA,EAAiB;EAChC,IAAMC,MAAA,GAASL,SAAA,CAAU;EACzB,IAAMM,QAAA,GAAWH,MAAA,CAAyB;EAE1CD,SAAA,CAAU,YAAM;IACf,IAAMK,KAAA,GAAQC,MAAA,CAAOC,QAAA,CAASC,aAAA,CAAc,OAAO;IACnDH,KAAA,CAAMI,IAAA,GAAO;IACbJ,KAAA,CAAMK,MAAA,GAASb,mBAAA;IACfQ,KAAA,CAAMM,QAAA,GAAW;IACjBP,QAAA,CAASQ,OAAA,GAAUP,KAAA;IAAA,SACJQ,SAAAC,EAAA;MAAA,OAAAC,SAAA,CAAAC,KAAA,OAAAC,SAAA;IAAA;IAAA,SAAAF,UAAA;MAAAA,SAAA,GAAAG,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,CAAf,SAAAC,QAAwBC,CAAA;QAAA,IAAAC,QAAA;QAAA,OAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cACjBL,QAAA,GAAYD,CAAA,CAAEO,MAAA,CAA4BC,KAAA;cAAA,MAC5C,CAACP,QAAA,IAAYA,QAAA,CAASQ,MAAA,KAAW;gBAAAL,QAAA,CAAAE,IAAA;gBAAA;cAAA;cAAA,OAAAF,QAAA,CAAAM,MAAA;YAAA;cAAAN,QAAA,CAAAE,IAAA;cAAA,OAC/BzB,MAAA,CAAO8B,kBAAA,CAAmB;gBAC/BxB,IAAA,EAAM;gBACNqB,KAAA,EAAOI,KAAA,CAAMC,IAAA,CAAKZ,QAAQ;gBAC1Ba,KAAA,EAAOjC,MAAA,CAAOkC,kBAAA,CAAmBC,MAAA;gBACjCC,YAAA,EAAc;cACf,CAAC;YAAA;cACDlC,KAAA,CAAMmC,KAAA,GAAQ;YAAA;YAAA;cAAA,OAAAd,QAAA,CAAAe,IAAA;UAAA;QAAA,GAAApB,OAAA;MAAA,CACf;MAAA,OAAAN,SAAA,CAAAC,KAAA,OAAAC,SAAA;IAAA;IACAZ,KAAA,CAAMqC,gBAAA,CAAiB,UAAU7B,QAAQ;IACzC,OAAO,YAAM;MACZT,QAAA,CAASQ,OAAA,GAAU;MACnBP,KAAA,CAAMsC,mBAAA,CAAoB,UAAU9B,QAAQ;IAC7C;EACD,GAAG,CAACV,MAAM,CAAC;EAEX,OAAOJ,WAAA,CAAY,YAAM;IAAA,IAAA6C,iBAAA;IACxB,CAAAA,iBAAA,GAAAxC,QAAA,CAASQ,OAAA,cAAAgC,iBAAA,eAATA,iBAAA,CAAkBC,KAAA,CAAM;EACzB,GAAG,CAACzC,QAAQ,CAAC;AACd"},"metadata":{},"sourceType":"module","externalDependencies":[]}