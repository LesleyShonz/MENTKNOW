{
  "version": 3,
  "sources": ["../../../src/lib/hooks/useMenuSchema.tsx"],
  "sourcesContent": ["import { Editor, useEditor } from '@tldraw/editor'\nimport { compact } from '@tldraw/utils'\nimport React, { useMemo } from 'react'\nimport { useValue } from 'signia-react'\nimport {\n\tTLUiMenuSchema,\n\tmenuCustom,\n\tmenuGroup,\n\tmenuItem,\n\tmenuSubmenu,\n\tshowMenuPaste,\n\tuseAllowGroup,\n\tuseAllowUngroup,\n} from './menuHelpers'\nimport { useActions } from './useActions'\nimport { useBreakpoint } from './useBreakpoint'\nimport { useCanRedo } from './useCanRedo'\nimport { useCanUndo } from './useCanUndo'\nimport { useHasLinkShapeSelected } from './useHasLinkShapeSelected'\nimport { useShowAutoSizeToggle } from './useShowAutoSizeToggle'\n\n/** @public */\nexport type TLUiMenuSchemaContextType = TLUiMenuSchema\n\n/** @internal */\nexport const TLUiMenuSchemaContext = React.createContext({} as TLUiMenuSchemaContextType)\n\n/** @public */\nexport type TLUiMenuSchemaProviderProps = {\n\toverrides?: (\n\t\teditor: Editor,\n\t\tschema: TLUiMenuSchemaContextType,\n\t\thelpers: {\n\t\t\tactions: ReturnType<typeof useActions>\n\t\t\tnoneSelected: boolean\n\t\t\toneSelected: boolean\n\t\t\ttwoSelected: boolean\n\t\t\tthreeSelected: boolean\n\t\t}\n\t) => TLUiMenuSchemaContextType\n\tchildren: any\n}\n\n/** @internal */\nexport function TLUiMenuSchemaProvider({ overrides, children }: TLUiMenuSchemaProviderProps) {\n\tconst editor = useEditor()\n\tconst actions = useActions()\n\n\tconst breakpoint = useBreakpoint()\n\tconst isMobile = breakpoint < 5\n\n\tconst isDarkMode = useValue('isDarkMode', () => editor.isDarkMode, [editor])\n\tconst animationSpeed = useValue('animationSpeed', () => editor.animationSpeed, [editor])\n\tconst isGridMode = useValue('isGridMode', () => editor.isGridMode, [editor])\n\tconst isSnapMode = useValue('isSnapMode', () => editor.isSnapMode, [editor])\n\tconst isToolLock = useValue('isToolLock', () => editor.instanceState.isToolLocked, [editor])\n\tconst isFocusMode = useValue('isFocusMode', () => editor.instanceState.isFocusMode, [editor])\n\tconst isDebugMode = useValue('isDebugMode', () => editor.instanceState.isDebugMode, [editor])\n\tconst exportBackground = useValue(\n\t\t'exportBackground',\n\t\t() => editor.instanceState.exportBackground,\n\t\t[editor]\n\t)\n\n\tconst emptyPage = useValue('emptyPage', () => editor.currentPageShapeIds.size === 0, [editor])\n\n\tconst selectedCount = useValue('selectedCount', () => editor.selectedIds.length, [editor])\n\tconst noneSelected = selectedCount === 0\n\tconst oneSelected = selectedCount > 0\n\tconst twoSelected = selectedCount > 1\n\tconst threeSelected = selectedCount > 2\n\n\tconst hasClipboardWrite = Boolean(window.navigator.clipboard?.write)\n\tconst showEditLink = useHasLinkShapeSelected()\n\tconst showAutoSizeToggle = useShowAutoSizeToggle()\n\tconst allowGroup = useAllowGroup()\n\tconst allowUngroup = useAllowUngroup()\n\tconst canUndo = useCanUndo()\n\tconst canRedo = useCanRedo()\n\tconst isZoomedTo100 = useValue('isZoomedTo100', () => editor.zoomLevel === 1, [editor])\n\n\tconst menuSchema = useMemo<TLUiMenuSchema>(() => {\n\t\tconst menuSchema = compact([\n\t\t\tmenuGroup(\n\t\t\t\t'menu',\n\t\t\t\tmenuSubmenu(\n\t\t\t\t\t'file',\n\t\t\t\t\t'menu.file',\n\t\t\t\t\tmenuGroup('print', menuItem(actions['print'], { disabled: emptyPage }))\n\t\t\t\t),\n\t\t\t\tmenuSubmenu(\n\t\t\t\t\t'edit',\n\t\t\t\t\t'menu.edit',\n\t\t\t\t\tmenuGroup(\n\t\t\t\t\t\t'undo-actions',\n\t\t\t\t\t\tmenuItem(actions['undo'], { disabled: !canUndo }),\n\t\t\t\t\t\tmenuItem(actions['redo'], { disabled: !canRedo })\n\t\t\t\t\t),\n\t\t\t\t\tmenuGroup(\n\t\t\t\t\t\t'clipboard-actions',\n\t\t\t\t\t\tmenuItem(actions['cut'], { disabled: noneSelected }),\n\t\t\t\t\t\tmenuItem(actions['copy'], { disabled: noneSelected }),\n\t\t\t\t\t\tmenuItem(actions['paste'], { disabled: !showMenuPaste })\n\t\t\t\t\t),\n\t\t\t\t\tmenuGroup(\n\t\t\t\t\t\t'conversions',\n\t\t\t\t\t\tmenuSubmenu(\n\t\t\t\t\t\t\t'copy-as',\n\t\t\t\t\t\t\t'menu.copy-as',\n\t\t\t\t\t\t\tmenuGroup(\n\t\t\t\t\t\t\t\t'copy-as-group',\n\t\t\t\t\t\t\t\tmenuItem(actions['copy-as-svg'], { disabled: emptyPage }),\n\t\t\t\t\t\t\t\tmenuItem(actions['copy-as-png'], { disabled: emptyPage || !hasClipboardWrite }),\n\t\t\t\t\t\t\t\tmenuItem(actions['copy-as-json'], { disabled: emptyPage })\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tmenuGroup(\n\t\t\t\t\t\t\t\t'export-bg',\n\t\t\t\t\t\t\t\tmenuItem(actions['toggle-transparent'], { checked: !exportBackground })\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t),\n\t\t\t\t\t\tmenuSubmenu(\n\t\t\t\t\t\t\t'export-as',\n\t\t\t\t\t\t\t'menu.export-as',\n\t\t\t\t\t\t\tmenuGroup(\n\t\t\t\t\t\t\t\t'export-as-group',\n\t\t\t\t\t\t\t\tmenuItem(actions['export-as-svg'], { disabled: emptyPage }),\n\t\t\t\t\t\t\t\tmenuItem(actions['export-as-png'], { disabled: emptyPage }),\n\t\t\t\t\t\t\t\tmenuItem(actions['export-as-json'], { disabled: emptyPage })\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tmenuGroup(\n\t\t\t\t\t\t\t\t'export-bg',\n\t\t\t\t\t\t\t\tmenuItem(actions['toggle-transparent'], { checked: !exportBackground })\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t),\n\t\t\t\t\tmenuGroup(\n\t\t\t\t\t\t'set-selection-group',\n\t\t\t\t\t\tmenuItem(actions['select-all'], { disabled: emptyPage }),\n\t\t\t\t\t\tmenuItem(actions['select-none'], { disabled: !oneSelected })\n\t\t\t\t\t),\n\t\t\t\t\tmenuGroup(\n\t\t\t\t\t\t'selection',\n\t\t\t\t\t\tshowAutoSizeToggle && menuItem(actions['toggle-auto-size']),\n\t\t\t\t\t\tshowEditLink && menuItem(actions['edit-link']),\n\t\t\t\t\t\tmenuItem(actions['duplicate'], { disabled: !oneSelected }),\n\t\t\t\t\t\tallowGroup && menuItem(actions['group']),\n\t\t\t\t\t\tallowUngroup && menuItem(actions['ungroup'])\n\t\t\t\t\t),\n\t\t\t\t\tmenuGroup('delete-group', menuItem(actions['delete'], { disabled: !oneSelected }))\n\t\t\t\t),\n\t\t\t\tmenuSubmenu(\n\t\t\t\t\t'view',\n\t\t\t\t\t'menu.view',\n\t\t\t\t\tmenuGroup(\n\t\t\t\t\t\t'view-actions',\n\t\t\t\t\t\tmenuItem(actions['zoom-in']),\n\t\t\t\t\t\tmenuItem(actions['zoom-out']),\n\t\t\t\t\t\tmenuItem(actions['zoom-to-100'], { disabled: isZoomedTo100 }),\n\t\t\t\t\t\tmenuItem(actions['zoom-to-fit'], { disabled: emptyPage }),\n\t\t\t\t\t\tmenuItem(actions['zoom-to-selection'], { disabled: emptyPage || !oneSelected })\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t),\n\t\t\tmenuGroup('extras', menuItem(actions['insert-embed']), menuItem(actions['insert-media'])),\n\t\t\tmenuGroup(\n\t\t\t\t'preferences',\n\t\t\t\tmenuSubmenu(\n\t\t\t\t\t'preferences',\n\t\t\t\t\t'menu.preferences',\n\t\t\t\t\tmenuGroup(\n\t\t\t\t\t\t'preferences-actions',\n\t\t\t\t\t\tmenuItem(actions['toggle-snap-mode'], { checked: isSnapMode }),\n\t\t\t\t\t\tmenuItem(actions['toggle-tool-lock'], { checked: isToolLock }),\n\t\t\t\t\t\tmenuItem(actions['toggle-grid'], { checked: isGridMode }),\n\t\t\t\t\t\tmenuItem(actions['toggle-dark-mode'], { checked: isDarkMode }),\n\t\t\t\t\t\tmenuItem(actions['toggle-focus-mode'], { checked: isFocusMode }),\n\t\t\t\t\t\tmenuItem(actions['toggle-reduce-motion'], { checked: animationSpeed === 0 }),\n\t\t\t\t\t\tmenuItem(actions['toggle-debug-mode'], { checked: isDebugMode })\n\t\t\t\t\t)\n\t\t\t\t),\n\t\t\t\tisMobile && menuCustom('LANGUAGE_MENU', { readonlyOk: true })\n\t\t\t),\n\t\t])\n\n\t\tif (overrides) {\n\t\t\treturn overrides(editor, menuSchema, {\n\t\t\t\tactions,\n\t\t\t\tnoneSelected,\n\t\t\t\toneSelected,\n\t\t\t\ttwoSelected,\n\t\t\t\tthreeSelected,\n\t\t\t})\n\t\t}\n\n\t\treturn menuSchema\n\t}, [\n\t\teditor,\n\t\toverrides,\n\t\tactions,\n\t\toneSelected,\n\t\ttwoSelected,\n\t\tthreeSelected,\n\t\temptyPage,\n\t\tisMobile,\n\t\tallowGroup,\n\t\tallowUngroup,\n\t\tshowEditLink,\n\t\thasClipboardWrite,\n\t\tshowAutoSizeToggle,\n\t\tnoneSelected,\n\t\tcanUndo,\n\t\tcanRedo,\n\t\tanimationSpeed,\n\t\tisDarkMode,\n\t\tisGridMode,\n\t\tisSnapMode,\n\t\tisToolLock,\n\t\tisFocusMode,\n\t\texportBackground,\n\t\tisDebugMode,\n\t\tisZoomedTo100,\n\t])\n\n\treturn (\n\t\t<TLUiMenuSchemaContext.Provider value={menuSchema}>{children}</TLUiMenuSchemaContext.Provider>\n\t)\n}\n\n/** @public */\nexport function useMenuSchema(): TLUiMenuSchema {\n\tconst ctx = React.useContext(TLUiMenuSchemaContext)\n\n\tif (!ctx) {\n\t\tthrow new Error('useMenuSchema must be used inside of a TLUiMenuSchemaProvider.')\n\t}\n\n\treturn ctx\n}\n"],
  "mappings": "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",
  "names": ["React", "menuSchema"]
}
