{
  "version": 3,
  "sources": ["../../../../../src/lib/editor/shapes/shared/TextLabel.tsx"],
  "sourcesContent": ["import {\n\tTLDefaultColorStyle,\n\tTLDefaultFillStyle,\n\tTLDefaultFontStyle,\n\tTLDefaultHorizontalAlignStyle,\n\tTLDefaultSizeStyle,\n\tTLDefaultVerticalAlignStyle,\n\tTLShape,\n} from '@tldraw/tlschema'\nimport React from 'react'\nimport { stopEventPropagation } from '../../../utils/dom'\nimport { isLegacyAlign } from '../../../utils/legacy'\nimport { TextHelpers } from '../text/TextHelpers'\nimport { LABEL_FONT_SIZES, TEXT_PROPS } from './default-shape-constants'\nimport { useEditableText } from './useEditableText'\n\nexport const TextLabel = React.memo(function TextLabel<\n\tT extends Extract<TLShape, { props: { text: string } }>\n>({\n\tid,\n\ttype,\n\ttext,\n\tsize,\n\tlabelColor,\n\tfont,\n\talign,\n\tverticalAlign,\n\twrap,\n}: {\n\tid: T['id']\n\ttype: T['type']\n\tsize: TLDefaultSizeStyle\n\tfont: TLDefaultFontStyle\n\tfill?: TLDefaultFillStyle\n\talign: TLDefaultHorizontalAlignStyle\n\tverticalAlign: TLDefaultVerticalAlignStyle\n\twrap?: boolean\n\ttext: string\n\tlabelColor: TLDefaultColorStyle\n}) {\n\tconst {\n\t\trInput,\n\t\tisEmpty,\n\t\tisEditing,\n\t\tisEditableFromHover,\n\t\thandleFocus,\n\t\thandleChange,\n\t\thandleKeyDown,\n\t\thandleBlur,\n\t} = useEditableText(id, type, text)\n\n\tconst isInteractive = isEditing || isEditableFromHover\n\tconst finalText = TextHelpers.normalizeTextForDom(text)\n\tconst hasText = finalText.trim().length > 0\n\tconst legacyAlign = isLegacyAlign(align)\n\n\treturn (\n\t\t<div\n\t\t\tclassName=\"tl-text-label\"\n\t\t\tdata-font={font}\n\t\t\tdata-align={align}\n\t\t\tdata-hastext={!isEmpty}\n\t\t\tdata-isediting={isEditing}\n\t\t\tdata-textwrap={!!wrap}\n\t\t\tstyle={\n\t\t\t\thasText || isInteractive\n\t\t\t\t\t? {\n\t\t\t\t\t\t\tjustifyContent: align === 'middle' || legacyAlign ? 'center' : align,\n\t\t\t\t\t\t\talignItems: verticalAlign === 'middle' ? 'center' : verticalAlign,\n\t\t\t\t\t  }\n\t\t\t\t\t: undefined\n\t\t\t}\n\t\t>\n\t\t\t<div\n\t\t\t\tclassName=\"tl-text-label__inner\"\n\t\t\t\tstyle={{\n\t\t\t\t\tfontSize: LABEL_FONT_SIZES[size],\n\t\t\t\t\tlineHeight: LABEL_FONT_SIZES[size] * TEXT_PROPS.lineHeight + 'px',\n\t\t\t\t\tminHeight: isEmpty ? LABEL_FONT_SIZES[size] * TEXT_PROPS.lineHeight + 32 : 0,\n\t\t\t\t\tminWidth: isEmpty ? 33 : 0,\n\t\t\t\t\tcolor: `var(--palette-${labelColor})`,\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<div className=\"tl-text tl-text-content\" dir=\"ltr\">\n\t\t\t\t\t{finalText}\n\t\t\t\t</div>\n\t\t\t\t{isInteractive ? (\n\t\t\t\t\t// Consider replacing with content-editable\n\t\t\t\t\t<textarea\n\t\t\t\t\t\tref={rInput}\n\t\t\t\t\t\tclassName=\"tl-text tl-text-input\"\n\t\t\t\t\t\tname=\"text\"\n\t\t\t\t\t\ttabIndex={-1}\n\t\t\t\t\t\tautoComplete=\"false\"\n\t\t\t\t\t\tautoCapitalize=\"false\"\n\t\t\t\t\t\tautoCorrect=\"false\"\n\t\t\t\t\t\tautoSave=\"false\"\n\t\t\t\t\t\tautoFocus={isEditing}\n\t\t\t\t\t\tplaceholder=\"\"\n\t\t\t\t\t\tspellCheck=\"true\"\n\t\t\t\t\t\twrap=\"off\"\n\t\t\t\t\t\tdir=\"auto\"\n\t\t\t\t\t\tdatatype=\"wysiwyg\"\n\t\t\t\t\t\tdefaultValue={text}\n\t\t\t\t\t\tonFocus={handleFocus}\n\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\tonKeyDown={handleKeyDown}\n\t\t\t\t\t\tonBlur={handleBlur}\n\t\t\t\t\t\tonContextMenu={stopEventPropagation}\n\t\t\t\t\t/>\n\t\t\t\t) : null}\n\t\t\t</div>\n\t\t</div>\n\t)\n})\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAyEG;AAhEH,mBAAkB;AAClB,iBAAqC;AACrC,oBAA8B;AAC9B,yBAA4B;AAC5B,qCAA6C;AAC7C,6BAAgC;AAEzB,MAAM,YAAY,aAAAA,QAAM,KAAK,SAASC,WAE3C;AAAA,EACD;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACD,GAWG;AACF,QAAM;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACD,QAAI,wCAAgB,IAAI,MAAM,IAAI;AAElC,QAAM,gBAAgB,aAAa;AACnC,QAAM,YAAY,+BAAY,oBAAoB,IAAI;AACtD,QAAM,UAAU,UAAU,KAAK,EAAE,SAAS;AAC1C,QAAM,kBAAc,6BAAc,KAAK;AAEvC,SACC;AAAA,IAAC;AAAA;AAAA,MACA,WAAU;AAAA,MACV,aAAW;AAAA,MACX,cAAY;AAAA,MACZ,gBAAc,CAAC;AAAA,MACf,kBAAgB;AAAA,MAChB,iBAAe,CAAC,CAAC;AAAA,MACjB,OACC,WAAW,gBACR;AAAA,QACA,gBAAgB,UAAU,YAAY,cAAc,WAAW;AAAA,QAC/D,YAAY,kBAAkB,WAAW,WAAW;AAAA,MACpD,IACA;AAAA,MAGJ;AAAA,QAAC;AAAA;AAAA,UACA,WAAU;AAAA,UACV,OAAO;AAAA,YACN,UAAU,gDAAiB,IAAI;AAAA,YAC/B,YAAY,gDAAiB,IAAI,IAAI,0CAAW,aAAa;AAAA,YAC7D,WAAW,UAAU,gDAAiB,IAAI,IAAI,0CAAW,aAAa,KAAK;AAAA,YAC3E,UAAU,UAAU,KAAK;AAAA,YACzB,OAAO,iBAAiB;AAAA,UACzB;AAAA,UAEA;AAAA,wDAAC,SAAI,WAAU,2BAA0B,KAAI,OAC3C,qBACF;AAAA,YACC;AAAA;AAAA,cAEA;AAAA,gBAAC;AAAA;AAAA,kBACA,KAAK;AAAA,kBACL,WAAU;AAAA,kBACV,MAAK;AAAA,kBACL,UAAU;AAAA,kBACV,cAAa;AAAA,kBACb,gBAAe;AAAA,kBACf,aAAY;AAAA,kBACZ,UAAS;AAAA,kBACT,WAAW;AAAA,kBACX,aAAY;AAAA,kBACZ,YAAW;AAAA,kBACX,MAAK;AAAA,kBACL,KAAI;AAAA,kBACJ,UAAS;AAAA,kBACT,cAAc;AAAA,kBACd,SAAS;AAAA,kBACT,UAAU;AAAA,kBACV,WAAW;AAAA,kBACX,QAAQ;AAAA,kBACR,eAAe;AAAA;AAAA,cAChB;AAAA,gBACG;AAAA;AAAA;AAAA,MACL;AAAA;AAAA,EACD;AAEF,CAAC;",
  "names": ["React", "TextLabel"]
}
