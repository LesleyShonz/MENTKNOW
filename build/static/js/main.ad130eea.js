/*! For license information please see main.ad130eea.js.LICENSE.txt */
!function(){var e={2009:function(e,t){"use strict";t.byteLength=function(e){var t=s(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,o=s(e),a=o[0],u=o[1],l=new i(function(e,t,n){return 3*(t+n)/4-n}(0,a,u)),c=0,d=u>0?a-4:a;for(n=0;n<d;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],l[c++]=t>>16&255,l[c++]=t>>8&255,l[c++]=255&t;2===u&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,l[c++]=255&t);1===u&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,l[c++]=t>>8&255,l[c++]=255&t);return l},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,o=[],a=16383,s=0,l=r-i;s<l;s+=a)o.push(u(e,s,s+a>l?l:s+a));1===i?(t=e[r-1],o.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return o.join("")};for(var n=[],r=[],i="undefined"!==typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)n[a]=o[a],r[o.charCodeAt(a)]=a;function s(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function u(e,t,r){for(var i,o,a=[],s=t;s<r;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return a.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},9778:function(e,t,n){"use strict";var r=n(6690).default,i=n(9728).default,o=n(6115).default,a=n(1655).default,s=n(6389).default,u=n(2009),l=n(4038),c="function"===typeof Symbol&&"function"===typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.lW=h,t.h2=50;var d=2147483647;function f(e){if(e>d)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,h.prototype),t}function h(e,t,n){if("number"===typeof e){if("string"===typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return g(e)}return p(e,t,n)}function p(e,t,n){if("string"===typeof e)return function(e,t){"string"===typeof t&&""!==t||(t="utf8");if(!h.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|w(e,t),r=f(n),i=r.write(e,t);i!==n&&(r=r.slice(0,i));return r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(ee(e,Uint8Array)){var t=new Uint8Array(e);return y(t.buffer,t.byteOffset,t.byteLength)}return m(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(ee(e,ArrayBuffer)||e&&ee(e.buffer,ArrayBuffer))return y(e,t,n);if("undefined"!==typeof SharedArrayBuffer&&(ee(e,SharedArrayBuffer)||e&&ee(e.buffer,SharedArrayBuffer)))return y(e,t,n);if("number"===typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return h.from(r,t,n);var i=function(e){if(h.isBuffer(e)){var t=0|b(e.length),n=f(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!==typeof e.length||te(e.length)?f(0):m(e);if("Buffer"===e.type&&Array.isArray(e.data))return m(e.data)}(e);if(i)return i;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof e[Symbol.toPrimitive])return h.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function v(e){if("number"!==typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function g(e){return v(e),f(e<0?0:0|b(e))}function m(e){for(var t=e.length<0?0:0|b(e.length),n=f(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function y(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,h.prototype),r}function b(e){if(e>=d)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+d.toString(16)+" bytes");return 0|e}function w(e,t){if(h.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||ee(e,ArrayBuffer))return e.byteLength;if("string"!==typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return Q(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return J(e).length;default:if(i)return r?-1:Q(e).length;t=(""+t).toLowerCase(),i=!0}}function x(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return L(this,t,n);case"utf8":case"utf-8":return A(this,t,n);case"ascii":return j(this,t,n);case"latin1":case"binary":return R(this,t,n);case"base64":return M(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function k(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function S(e,t,n,r,i){if(0===e.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),te(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"===typeof t&&(t=h.from(t,r)),h.isBuffer(t))return 0===t.length?-1:_(e,t,n,r,i);if("number"===typeof t)return t&=255,"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):_(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function _(e,t,n,r,i){var o,a=1,s=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,n/=2}function l(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var c=-1;for(o=n;o<s;o++)if(l(e,o)===l(t,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===u)return c*a}else-1!==c&&(o-=o-c),c=-1}else for(n+u>s&&(n=s-u),o=n;o>=0;o--){for(var d=!0,f=0;f<u;f++)if(l(e,o+f)!==l(t,f)){d=!1;break}if(d)return o}return-1}function E(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o,a=t.length;for(r>a/2&&(r=a/2),o=0;o<r;++o){var s=parseInt(t.substr(2*o,2),16);if(te(s))return o;e[n+o]=s}return o}function C(e,t,n,r){return Z(Q(t,e.length-n),e,n,r)}function P(e,t,n,r){return Z(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function I(e,t,n,r){return Z(J(t),e,n,r)}function T(e,t,n,r){return Z(function(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function M(e,t,n){return 0===t&&n===e.length?u.fromByteArray(e):u.fromByteArray(e.slice(t,n))}function A(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o=e[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s<=n){var u=void 0,l=void 0,c=void 0,d=void 0;switch(s){case 1:o<128&&(a=o);break;case 2:128===(192&(u=e[i+1]))&&(d=(31&o)<<6|63&u)>127&&(a=d);break;case 3:u=e[i+1],l=e[i+2],128===(192&u)&&128===(192&l)&&(d=(15&o)<<12|(63&u)<<6|63&l)>2047&&(d<55296||d>57343)&&(a=d);break;case 4:u=e[i+1],l=e[i+2],c=e[i+3],128===(192&u)&&128===(192&l)&&128===(192&c)&&(d=(15&o)<<18|(63&u)<<12|(63&l)<<6|63&c)>65535&&d<1114112&&(a=d)}}null===a?(a=65533,s=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),i+=s}return function(e){var t=e.length;if(t<=O)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=O));return n}(r)}h.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(n){return!1}}(),h.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}}),h.poolSize=8192,h.from=function(e,t,n){return p(e,t,n)},Object.setPrototypeOf(h.prototype,Uint8Array.prototype),Object.setPrototypeOf(h,Uint8Array),h.alloc=function(e,t,n){return function(e,t,n){return v(e),e<=0?f(e):void 0!==t?"string"===typeof n?f(e).fill(t,n):f(e).fill(t):f(e)}(e,t,n)},h.allocUnsafe=function(e){return g(e)},h.allocUnsafeSlow=function(e){return g(e)},h.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==h.prototype},h.compare=function(e,t){if(ee(e,Uint8Array)&&(e=h.from(e,e.offset,e.byteLength)),ee(t,Uint8Array)&&(t=h.from(t,t.offset,t.byteLength)),!h.isBuffer(e)||!h.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},h.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return h.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=h.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(ee(o,Uint8Array))i+o.length>r.length?(h.isBuffer(o)||(o=h.from(o)),o.copy(r,i)):Uint8Array.prototype.set.call(r,o,i);else{if(!h.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i)}i+=o.length}return r},h.byteLength=w,h.prototype._isBuffer=!0,h.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)k(this,t,t+1);return this},h.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)k(this,t,t+3),k(this,t+1,t+2);return this},h.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)k(this,t,t+7),k(this,t+1,t+6),k(this,t+2,t+5),k(this,t+3,t+4);return this},h.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?A(this,0,e):x.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(e){if(!h.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===h.compare(this,e)},h.prototype.inspect=function(){var e="",n=t.h2;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},c&&(h.prototype[c]=h.prototype.inspect),h.prototype.compare=function(e,t,n,r,i){if(ee(e,Uint8Array)&&(e=h.from(e,e.offset,e.byteLength)),!h.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(o,a),u=this.slice(r,i),l=e.slice(t,n),c=0;c<s;++c)if(u[c]!==l[c]){o=u[c],a=l[c];break}return o<a?-1:a<o?1:0},h.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},h.prototype.indexOf=function(e,t,n){return S(this,e,t,n,!0)},h.prototype.lastIndexOf=function(e,t,n){return S(this,e,t,n,!1)},h.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"===typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return E(this,e,t,n);case"utf8":case"utf-8":return C(this,e,t,n);case"ascii":case"latin1":case"binary":return P(this,e,t,n);case"base64":return I(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var O=4096;function j(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function R(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function L(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=ne[e[o]];return i}function D(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length-1;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function N(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function z(e,t,n,r,i,o){if(!h.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function B(e,t,n,r,i){X(t,r,i,e,n,7);var o=Number(t&BigInt(4294967295));e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o;var a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,n}function F(e,t,n,r,i){X(t,r,i,e,n,7);var o=Number(t&BigInt(4294967295));e[n+7]=o,o>>=8,e[n+6]=o,o>>=8,e[n+5]=o,o>>=8,e[n+4]=o;var a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=a,a>>=8,e[n+2]=a,a>>=8,e[n+1]=a,a>>=8,e[n]=a,n+8}function U(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function K(e,t,n,r,i){return t=+t,n>>>=0,i||U(e,0,n,4),l.write(e,t,n,r,23,4),n+4}function V(e,t,n,r,i){return t=+t,n>>>=0,i||U(e,0,n,8),l.write(e,t,n,r,52,8),n+8}h.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return Object.setPrototypeOf(r,h.prototype),r},h.prototype.readUintLE=h.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||N(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},h.prototype.readUintBE=h.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||N(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},h.prototype.readUint8=h.prototype.readUInt8=function(e,t){return e>>>=0,t||N(e,1,this.length),this[e]},h.prototype.readUint16LE=h.prototype.readUInt16LE=function(e,t){return e>>>=0,t||N(e,2,this.length),this[e]|this[e+1]<<8},h.prototype.readUint16BE=h.prototype.readUInt16BE=function(e,t){return e>>>=0,t||N(e,2,this.length),this[e]<<8|this[e+1]},h.prototype.readUint32LE=h.prototype.readUInt32LE=function(e,t){return e>>>=0,t||N(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},h.prototype.readUint32BE=h.prototype.readUInt32BE=function(e,t){return e>>>=0,t||N(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},h.prototype.readBigUInt64LE=re((function(e){q(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||$(e,this.length-8);var r=t+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,24),i=this[++e]+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+n*Math.pow(2,24);return BigInt(r)+(BigInt(i)<<BigInt(32))})),h.prototype.readBigUInt64BE=re((function(e){q(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||$(e,this.length-8);var r=t*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+this[++e],i=this[++e]*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+n;return(BigInt(r)<<BigInt(32))+BigInt(i)})),h.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||N(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},h.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||N(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},h.prototype.readInt8=function(e,t){return e>>>=0,t||N(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},h.prototype.readInt16LE=function(e,t){e>>>=0,t||N(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},h.prototype.readInt16BE=function(e,t){e>>>=0,t||N(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},h.prototype.readInt32LE=function(e,t){return e>>>=0,t||N(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},h.prototype.readInt32BE=function(e,t){return e>>>=0,t||N(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},h.prototype.readBigInt64LE=re((function(e){q(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||$(e,this.length-8);var r=this[e+4]+this[e+5]*Math.pow(2,8)+this[e+6]*Math.pow(2,16)+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,24))})),h.prototype.readBigInt64BE=re((function(e){q(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||$(e,this.length-8);var r=(t<<24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+n)})),h.prototype.readFloatLE=function(e,t){return e>>>=0,t||N(e,4,this.length),l.read(this,e,!0,23,4)},h.prototype.readFloatBE=function(e,t){return e>>>=0,t||N(e,4,this.length),l.read(this,e,!1,23,4)},h.prototype.readDoubleLE=function(e,t){return e>>>=0,t||N(e,8,this.length),l.read(this,e,!0,52,8)},h.prototype.readDoubleBE=function(e,t){return e>>>=0,t||N(e,8,this.length),l.read(this,e,!1,52,8)},h.prototype.writeUintLE=h.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||z(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},h.prototype.writeUintBE=h.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||z(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},h.prototype.writeUint8=h.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||z(this,e,t,1,255,0),this[t]=255&e,t+1},h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||z(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||z(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||z(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||z(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},h.prototype.writeBigUInt64LE=re((function(e){return B(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),h.prototype.writeBigUInt64BE=re((function(e){return F(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),h.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);z(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},h.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);z(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},h.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||z(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},h.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||z(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},h.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||z(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},h.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||z(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},h.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||z(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},h.prototype.writeBigInt64LE=re((function(e){return B(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),h.prototype.writeBigInt64BE=re((function(e){return F(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),h.prototype.writeFloatLE=function(e,t,n){return K(this,e,t,!0,n)},h.prototype.writeFloatBE=function(e,t,n){return K(this,e,t,!1,n)},h.prototype.writeDoubleLE=function(e,t,n){return V(this,e,t,!0,n)},h.prototype.writeDoubleBE=function(e,t,n){return V(this,e,t,!1,n)},h.prototype.copy=function(e,t,n,r){if(!h.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i=r-n;return this===e&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},h.prototype.fill=function(e,t,n,r){if("string"===typeof e){if("string"===typeof t?(r=t,t=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!h.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var i=e.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(e=i)}}else"number"===typeof e?e&=255:"boolean"===typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"===typeof e)for(o=t;o<n;++o)this[o]=e;else{var a=h.isBuffer(e)?e:h.from(e,r),s=a.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=a[o%s]}return this};var W={};function H(e,t,n){W[e]=function(n){a(l,n);var u=s(l);function l(){var n;return r(this,l),n=u.call(this),Object.defineProperty(o(n),"message",{value:t.apply(o(n),arguments),writable:!0,configurable:!0}),n.name="".concat(n.name," [").concat(e,"]"),n.stack,delete n.name,n}return i(l,[{key:"code",get:function(){return e},set:function(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(e,"]: ").concat(this.message)}}]),l}(n)}function Y(e){for(var t="",n=e.length,r="-"===e[0]?1:0;n>=r+4;n-=3)t="_".concat(e.slice(n-3,n)).concat(t);return"".concat(e.slice(0,n)).concat(t)}function X(e,t,n,r,i,o){if(e>n||e<t){var a,s="bigint"===typeof t?"n":"";throw a=o>3?0===t||t===BigInt(0)?">= 0".concat(s," and < 2").concat(s," ** ").concat(8*(o+1)).concat(s):">= -(2".concat(s," ** ").concat(8*(o+1)-1).concat(s,") and < 2 ** ")+"".concat(8*(o+1)-1).concat(s):">= ".concat(t).concat(s," and <= ").concat(n).concat(s),new W.ERR_OUT_OF_RANGE("value",a,e)}!function(e,t,n){q(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||$(t,e.length-(n+1))}(r,i,o)}function q(e,t){if("number"!==typeof e)throw new W.ERR_INVALID_ARG_TYPE(t,"number",e)}function $(e,t,n){if(Math.floor(e)!==e)throw q(e,n),new W.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new W.ERR_BUFFER_OUT_OF_BOUNDS;throw new W.ERR_OUT_OF_RANGE(n||"offset",">= ".concat(n?1:0," and <= ").concat(t),e)}H("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?"".concat(e," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"}),RangeError),H("ERR_INVALID_ARG_TYPE",(function(e,t){return'The "'.concat(e,'" argument must be of type number. Received type ').concat(typeof t)}),TypeError),H("ERR_OUT_OF_RANGE",(function(e,t,n){var r='The value of "'.concat(e,'" is out of range.'),i=n;return Number.isInteger(n)&&Math.abs(n)>Math.pow(2,32)?i=Y(String(n)):"bigint"===typeof n&&(i=String(n),(n>Math.pow(BigInt(2),BigInt(32))||n<-Math.pow(BigInt(2),BigInt(32)))&&(i=Y(i)),i+="n"),r+=" It must be ".concat(t,". Received ").concat(i)}),RangeError);var G=/[^+/0-9A-Za-z-_]/g;function Q(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function J(e){return u.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(G,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function Z(e,t,n,r){var i;for(i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function ee(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function te(e){return e!==e}var ne=function(){for(var e="0123456789abcdef",t=new Array(256),n=0;n<16;++n)for(var r=16*n,i=0;i<16;++i)t[r+i]=e[n]+e[i];return t}();function re(e){return"undefined"===typeof BigInt?ie:e}function ie(){throw new Error("BigInt not supported")}},1694:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var o=typeof n;if("string"===o||"number"===o)e.push(n);else if(Array.isArray(n)){if(n.length){var a=i.apply(null,n);a&&e.push(a)}}else if("object"===o){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var s in n)r.call(n,s)&&n[s]&&e.push(s)}}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},6724:function(e,t,n){"use strict";var r=n(9218),i=n(1772),o=TypeError;e.exports=function(e){if(r(e))return e;throw o(i(e)+" is not a function")}},5715:function(e,t,n){"use strict";var r=n(5028),i=n(4385),o=n(1592).f,a=r("unscopables"),s=Array.prototype;void 0===s[a]&&o(s,a,{configurable:!0,value:i(null)}),e.exports=function(e){s[a][e]=!0}},5466:function(e,t,n){"use strict";var r=n(8424).charAt;e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},5884:function(e,t,n){"use strict";var r=n(3931),i=String,o=TypeError;e.exports=function(e){if(r(e))return e;throw o(i(e)+" is not an object")}},488:function(e,t,n){"use strict";var r=n(5770),i=n(1823),o=n(3385),a=function(e){return function(t,n,a){var s,u=r(t),l=o(u),c=i(a,l);if(e&&n!==n){for(;l>c;)if((s=u[c++])!==s)return!0}else for(;l>c;c++)if((e||c in u)&&u[c]===n)return e||c||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},9026:function(e,t,n){"use strict";var r=n(1941),i=n(1219),o=n(3931),a=n(5028)("species"),s=Array;e.exports=function(e){var t;return r(e)&&(t=e.constructor,(i(t)&&(t===s||r(t.prototype))||o(t)&&null===(t=t[a]))&&(t=void 0)),void 0===t?s:t}},5491:function(e,t,n){"use strict";var r=n(9026);e.exports=function(e,t){return new(r(e))(0===t?0:t)}},2933:function(e,t,n){"use strict";var r=n(4932),i=r({}.toString),o=r("".slice);e.exports=function(e){return o(i(e),8,-1)}},7205:function(e,t,n){"use strict";var r=n(6042),i=n(9218),o=n(2933),a=n(5028)("toStringTag"),s=Object,u="Arguments"===o(function(){return arguments}());e.exports=r?o:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(n){}}(t=s(e),a))?n:u?o(t):"Object"===(r=o(t))&&i(t.callee)?"Arguments":r}},189:function(e,t,n){"use strict";var r=n(3013),i=n(7273),o=n(2573),a=n(1592);e.exports=function(e,t,n){for(var s=i(t),u=a.f,l=o.f,c=0;c<s.length;c++){var d=s[c];r(e,d)||n&&r(n,d)||u(e,d,l(t,d))}}},3873:function(e,t,n){"use strict";var r=n(1196),i=n(1592),o=n(2037);e.exports=r?function(e,t,n){return i.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},2037:function(e){"use strict";e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},7543:function(e,t,n){"use strict";var r=n(9218),i=n(1592),o=n(2557),a=n(9131);e.exports=function(e,t,n,s){s||(s={});var u=s.enumerable,l=void 0!==s.name?s.name:t;if(r(n)&&o(n,l,s),s.global)u?e[t]=n:a(t,n);else{try{s.unsafe?e[t]&&(u=!0):delete e[t]}catch(c){}u?e[t]=n:i.f(e,t,{value:n,enumerable:!1,configurable:!s.nonConfigurable,writable:!s.nonWritable})}return e}},9131:function(e,t,n){"use strict";var r=n(6840),i=Object.defineProperty;e.exports=function(e,t){try{i(r,e,{value:t,configurable:!0,writable:!0})}catch(n){r[e]=t}return t}},1196:function(e,t,n){"use strict";var r=n(2837);e.exports=!r((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},4363:function(e){"use strict";var t="object"==typeof document&&document.all,n="undefined"==typeof t&&void 0!==t;e.exports={all:t,IS_HTMLDDA:n}},937:function(e,t,n){"use strict";var r=n(6840),i=n(3931),o=r.document,a=i(o)&&i(o.createElement);e.exports=function(e){return a?o.createElement(e):{}}},6117:function(e){"use strict";var t=TypeError;e.exports=function(e){if(e>9007199254740991)throw t("Maximum allowed index exceeded");return e}},4839:function(e){"use strict";e.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},5372:function(e,t,n){"use strict";var r,i,o=n(6840),a=n(4839),s=o.process,u=o.Deno,l=s&&s.versions||u&&u.version,c=l&&l.v8;c&&(i=(r=c.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!i&&a&&(!(r=a.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/))&&(i=+r[1]),e.exports=i},2080:function(e){"use strict";e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},7768:function(e,t,n){"use strict";var r=n(6840),i=n(2573).f,o=n(3873),a=n(7543),s=n(9131),u=n(189),l=n(6673);e.exports=function(e,t){var n,c,d,f,h,p=e.target,v=e.global,g=e.stat;if(n=v?r:g?r[p]||s(p,{}):(r[p]||{}).prototype)for(c in t){if(f=t[c],d=e.dontCallGetSet?(h=i(n,c))&&h.value:n[c],!l(v?c:p+(g?".":"#")+c,e.forced)&&void 0!==d){if(typeof f==typeof d)continue;u(f,d)}(e.sham||d&&d.sham)&&o(f,"sham",!0),a(n,c,f,e)}}},2837:function(e){"use strict";e.exports=function(e){try{return!!e()}catch(t){return!0}}},8093:function(e,t,n){"use strict";n(447);var r=n(7926),i=n(7543),o=n(4087),a=n(2837),s=n(5028),u=n(3873),l=s("species"),c=RegExp.prototype;e.exports=function(e,t,n,d){var f=s(e),h=!a((function(){var t={};return t[f]=function(){return 7},7!==""[e](t)})),p=h&&!a((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[l]=function(){return n},n.flags="",n[f]=/./[f]),n.exec=function(){return t=!0,null},n[f](""),!t}));if(!h||!p||n){var v=r(/./[f]),g=t(f,""[e],(function(e,t,n,i,a){var s=r(e),u=t.exec;return u===o||u===c.exec?h&&!a?{done:!0,value:v(t,n,i)}:{done:!0,value:s(n,t,i)}:{done:!1}}));i(String.prototype,e,g[0]),i(c,f,g[1])}d&&u(c[f],"sham",!0)}},8264:function(e,t,n){"use strict";var r=n(1941),i=n(3385),o=n(6117),a=n(5851);e.exports=function e(t,n,s,u,l,c,d,f){for(var h,p=l,v=0,g=!!d&&a(d,f);v<u;)v in s&&(h=g?g(s[v],v,n):s[v],c>0&&r(h)?p=e(t,n,h,i(h),p,c-1)-1:(o(p+1),t[p]=h),p++),v++;return p}},6339:function(e,t,n){"use strict";var r=n(4138),i=Function.prototype,o=i.apply,a=i.call;e.exports="object"==typeof Reflect&&Reflect.apply||(r?a.bind(o):function(){return a.apply(o,arguments)})},5851:function(e,t,n){"use strict";var r=n(7926),i=n(6724),o=n(4138),a=r(r.bind);e.exports=function(e,t){return i(e),void 0===t?e:o?a(e,t):function(){return e.apply(t,arguments)}}},4138:function(e,t,n){"use strict";var r=n(2837);e.exports=!r((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},8513:function(e,t,n){"use strict";var r=n(4138),i=Function.prototype.call;e.exports=r?i.bind(i):function(){return i.apply(i,arguments)}},3211:function(e,t,n){"use strict";var r=n(1196),i=n(3013),o=Function.prototype,a=r&&Object.getOwnPropertyDescriptor,s=i(o,"name"),u=s&&"something"===function(){}.name,l=s&&(!r||r&&a(o,"name").configurable);e.exports={EXISTS:s,PROPER:u,CONFIGURABLE:l}},7926:function(e,t,n){"use strict";var r=n(2933),i=n(4932);e.exports=function(e){if("Function"===r(e))return i(e)}},4932:function(e,t,n){"use strict";var r=n(4138),i=Function.prototype,o=i.call,a=r&&i.bind.bind(o,o);e.exports=r?a:function(e){return function(){return o.apply(e,arguments)}}},1240:function(e,t,n){"use strict";var r=n(6840),i=n(9218);e.exports=function(e,t){return arguments.length<2?(n=r[e],i(n)?n:void 0):r[e]&&r[e][t];var n}},3863:function(e,t,n){"use strict";var r=n(6724),i=n(9055);e.exports=function(e,t){var n=e[t];return i(n)?void 0:r(n)}},7794:function(e,t,n){"use strict";var r=n(4932),i=n(8385),o=Math.floor,a=r("".charAt),s=r("".replace),u=r("".slice),l=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,c=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,r,d,f){var h=n+e.length,p=r.length,v=c;return void 0!==d&&(d=i(d),v=l),s(f,v,(function(i,s){var l;switch(a(s,0)){case"$":return"$";case"&":return e;case"`":return u(t,0,n);case"'":return u(t,h);case"<":l=d[u(s,1,-1)];break;default:var c=+s;if(0===c)return i;if(c>p){var f=o(c/10);return 0===f?i:f<=p?void 0===r[f-1]?a(s,1):r[f-1]+a(s,1):i}l=r[c-1]}return void 0===l?"":l}))}},6840:function(e,t,n){"use strict";var r=function(e){return e&&e.Math===Math&&e};e.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||function(){return this}()||this||Function("return this")()},3013:function(e,t,n){"use strict";var r=n(4932),i=n(8385),o=r({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return o(i(e),t)}},6196:function(e){"use strict";e.exports={}},2012:function(e,t,n){"use strict";var r=n(1240);e.exports=r("document","documentElement")},6707:function(e,t,n){"use strict";var r=n(1196),i=n(2837),o=n(937);e.exports=!r&&!i((function(){return 7!==Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},1036:function(e,t,n){"use strict";var r=n(4932),i=n(2837),o=n(2933),a=Object,s=r("".split);e.exports=i((function(){return!a("z").propertyIsEnumerable(0)}))?function(e){return"String"===o(e)?s(e,""):a(e)}:a},8589:function(e,t,n){"use strict";var r=n(4932),i=n(9218),o=n(4460),a=r(Function.toString);i(o.inspectSource)||(o.inspectSource=function(e){return a(e)}),e.exports=o.inspectSource},9671:function(e,t,n){"use strict";var r,i,o,a=n(1615),s=n(6840),u=n(3931),l=n(3873),c=n(3013),d=n(4460),f=n(9378),h=n(6196),p="Object already initialized",v=s.TypeError,g=s.WeakMap;if(a||d.state){var m=d.state||(d.state=new g);m.get=m.get,m.has=m.has,m.set=m.set,r=function(e,t){if(m.has(e))throw v(p);return t.facade=e,m.set(e,t),t},i=function(e){return m.get(e)||{}},o=function(e){return m.has(e)}}else{var y=f("state");h[y]=!0,r=function(e,t){if(c(e,y))throw v(p);return t.facade=e,l(e,y,t),t},i=function(e){return c(e,y)?e[y]:{}},o=function(e){return c(e,y)}}e.exports={set:r,get:i,has:o,enforce:function(e){return o(e)?i(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!u(t)||(n=i(t)).type!==e)throw v("Incompatible receiver, "+e+" required");return n}}}},1941:function(e,t,n){"use strict";var r=n(2933);e.exports=Array.isArray||function(e){return"Array"===r(e)}},9218:function(e,t,n){"use strict";var r=n(4363),i=r.all;e.exports=r.IS_HTMLDDA?function(e){return"function"==typeof e||e===i}:function(e){return"function"==typeof e}},1219:function(e,t,n){"use strict";var r=n(4932),i=n(2837),o=n(9218),a=n(7205),s=n(1240),u=n(8589),l=function(){},c=[],d=s("Reflect","construct"),f=/^\s*(?:class|function)\b/,h=r(f.exec),p=!f.exec(l),v=function(e){if(!o(e))return!1;try{return d(l,c,e),!0}catch(t){return!1}},g=function(e){if(!o(e))return!1;switch(a(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return p||!!h(f,u(e))}catch(t){return!0}};g.sham=!0,e.exports=!d||i((function(){var e;return v(v.call)||!v(Object)||!v((function(){e=!0}))||e}))?g:v},6673:function(e,t,n){"use strict";var r=n(2837),i=n(9218),o=/#|\.prototype\./,a=function(e,t){var n=u[s(e)];return n===c||n!==l&&(i(t)?r(t):!!t)},s=a.normalize=function(e){return String(e).replace(o,".").toLowerCase()},u=a.data={},l=a.NATIVE="N",c=a.POLYFILL="P";e.exports=a},9055:function(e){"use strict";e.exports=function(e){return null===e||void 0===e}},3931:function(e,t,n){"use strict";var r=n(9218),i=n(4363),o=i.all;e.exports=i.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:r(e)||e===o}:function(e){return"object"==typeof e?null!==e:r(e)}},3608:function(e){"use strict";e.exports=!1},8287:function(e,t,n){"use strict";var r=n(1240),i=n(9218),o=n(8946),a=n(7611),s=Object;e.exports=a?function(e){return"symbol"==typeof e}:function(e){var t=r("Symbol");return i(t)&&o(t.prototype,s(e))}},3385:function(e,t,n){"use strict";var r=n(2347);e.exports=function(e){return r(e.length)}},2557:function(e,t,n){"use strict";var r=n(4932),i=n(2837),o=n(9218),a=n(3013),s=n(1196),u=n(3211).CONFIGURABLE,l=n(8589),c=n(9671),d=c.enforce,f=c.get,h=String,p=Object.defineProperty,v=r("".slice),g=r("".replace),m=r([].join),y=s&&!i((function(){return 8!==p((function(){}),"length",{value:8}).length})),b=String(String).split("String"),w=e.exports=function(e,t,n){"Symbol("===v(h(t),0,7)&&(t="["+g(h(t),/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!a(e,"name")||u&&e.name!==t)&&(s?p(e,"name",{value:t,configurable:!0}):e.name=t),y&&n&&a(n,"arity")&&e.length!==n.arity&&p(e,"length",{value:n.arity});try{n&&a(n,"constructor")&&n.constructor?s&&p(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(i){}var r=d(e);return a(r,"source")||(r.source=m(b,"string"==typeof t?t:"")),e};Function.prototype.toString=w((function(){return o(this)&&f(this).source||l(this)}),"toString")},1246:function(e){"use strict";var t=Math.ceil,n=Math.floor;e.exports=Math.trunc||function(e){var r=+e;return(r>0?n:t)(r)}},4385:function(e,t,n){"use strict";var r,i=n(5884),o=n(1697),a=n(2080),s=n(6196),u=n(2012),l=n(937),c=n(9378),d="prototype",f="script",h=c("IE_PROTO"),p=function(){},v=function(e){return"<"+f+">"+e+"</"+f+">"},g=function(e){e.write(v("")),e.close();var t=e.parentWindow.Object;return e=null,t},m=function(){try{r=new ActiveXObject("htmlfile")}catch(t){}m="undefined"!=typeof document?document.domain&&r?g(r):function(){var e,t=l("iframe"),n="java"+f+":";return t.style.display="none",u.appendChild(t),t.src=String(n),(e=t.contentWindow.document).open(),e.write(v("document.F=Object")),e.close(),e.F}():g(r);for(var e=a.length;e--;)delete m[d][a[e]];return m()};s[h]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(p[d]=i(e),n=new p,p[d]=null,n[h]=e):n=m(),void 0===t?n:o.f(n,t)}},1697:function(e,t,n){"use strict";var r=n(1196),i=n(6056),o=n(1592),a=n(5884),s=n(5770),u=n(8084);t.f=r&&!i?Object.defineProperties:function(e,t){a(e);for(var n,r=s(t),i=u(t),l=i.length,c=0;l>c;)o.f(e,n=i[c++],r[n]);return e}},1592:function(e,t,n){"use strict";var r=n(1196),i=n(6707),o=n(6056),a=n(5884),s=n(4655),u=TypeError,l=Object.defineProperty,c=Object.getOwnPropertyDescriptor,d="enumerable",f="configurable",h="writable";t.f=r?o?function(e,t,n){if(a(e),t=s(t),a(n),"function"===typeof e&&"prototype"===t&&"value"in n&&h in n&&!n[h]){var r=c(e,t);r&&r[h]&&(e[t]=n.value,n={configurable:f in n?n[f]:r[f],enumerable:d in n?n[d]:r[d],writable:!1})}return l(e,t,n)}:l:function(e,t,n){if(a(e),t=s(t),a(n),i)try{return l(e,t,n)}catch(r){}if("get"in n||"set"in n)throw u("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},2573:function(e,t,n){"use strict";var r=n(1196),i=n(8513),o=n(8306),a=n(2037),s=n(5770),u=n(4655),l=n(3013),c=n(6707),d=Object.getOwnPropertyDescriptor;t.f=r?d:function(e,t){if(e=s(e),t=u(t),c)try{return d(e,t)}catch(n){}if(l(e,t))return a(!i(o.f,e,t),e[t])}},3772:function(e,t,n){"use strict";var r=n(3080),i=n(2080).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},400:function(e,t){"use strict";t.f=Object.getOwnPropertySymbols},8946:function(e,t,n){"use strict";var r=n(4932);e.exports=r({}.isPrototypeOf)},3080:function(e,t,n){"use strict";var r=n(4932),i=n(3013),o=n(5770),a=n(488).indexOf,s=n(6196),u=r([].push);e.exports=function(e,t){var n,r=o(e),l=0,c=[];for(n in r)!i(s,n)&&i(r,n)&&u(c,n);for(;t.length>l;)i(r,n=t[l++])&&(~a(c,n)||u(c,n));return c}},8084:function(e,t,n){"use strict";var r=n(3080),i=n(2080);e.exports=Object.keys||function(e){return r(e,i)}},8306:function(e,t){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,i=r&&!n.call({1:2},1);t.f=i?function(e){var t=r(this,e);return!!t&&t.enumerable}:n},7772:function(e,t,n){"use strict";var r=n(8513),i=n(9218),o=n(3931),a=TypeError;e.exports=function(e,t){var n,s;if("string"===t&&i(n=e.toString)&&!o(s=r(n,e)))return s;if(i(n=e.valueOf)&&!o(s=r(n,e)))return s;if("string"!==t&&i(n=e.toString)&&!o(s=r(n,e)))return s;throw a("Can't convert object to primitive value")}},7273:function(e,t,n){"use strict";var r=n(1240),i=n(4932),o=n(3772),a=n(400),s=n(5884),u=i([].concat);e.exports=r("Reflect","ownKeys")||function(e){var t=o.f(s(e)),n=a.f;return n?u(t,n(e)):t}},2781:function(e,t,n){"use strict";var r=n(8513),i=n(5884),o=n(9218),a=n(2933),s=n(4087),u=TypeError;e.exports=function(e,t){var n=e.exec;if(o(n)){var l=r(n,e,t);return null!==l&&i(l),l}if("RegExp"===a(e))return r(s,e,t);throw u("RegExp#exec called on incompatible receiver")}},4087:function(e,t,n){"use strict";var r=n(8513),i=n(4932),o=n(6124),a=n(7687),s=n(8596),u=n(1778),l=n(4385),c=n(9671).get,d=n(2047),f=n(2063),h=u("native-string-replace",String.prototype.replace),p=RegExp.prototype.exec,v=p,g=i("".charAt),m=i("".indexOf),y=i("".replace),b=i("".slice),w=function(){var e=/a/,t=/b*/g;return r(p,e,"a"),r(p,t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),x=s.BROKEN_CARET,k=void 0!==/()??/.exec("")[1];(w||k||x||d||f)&&(v=function(e){var t,n,i,s,u,d,f,S=this,_=c(S),E=o(e),C=_.raw;if(C)return C.lastIndex=S.lastIndex,t=r(v,C,E),S.lastIndex=C.lastIndex,t;var P=_.groups,I=x&&S.sticky,T=r(a,S),M=S.source,A=0,O=E;if(I&&(T=y(T,"y",""),-1===m(T,"g")&&(T+="g"),O=b(E,S.lastIndex),S.lastIndex>0&&(!S.multiline||S.multiline&&"\n"!==g(E,S.lastIndex-1))&&(M="(?: "+M+")",O=" "+O,A++),n=new RegExp("^(?:"+M+")",T)),k&&(n=new RegExp("^"+M+"$(?!\\s)",T)),w&&(i=S.lastIndex),s=r(p,I?n:S,O),I?s?(s.input=b(s.input,A),s[0]=b(s[0],A),s.index=S.lastIndex,S.lastIndex+=s[0].length):S.lastIndex=0:w&&s&&(S.lastIndex=S.global?s.index+s[0].length:i),k&&s&&s.length>1&&r(h,s[0],n,(function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(s[u]=void 0)})),s&&P)for(s.groups=d=l(null),u=0;u<P.length;u++)d[(f=P[u])[0]]=s[f[1]];return s}),e.exports=v},7687:function(e,t,n){"use strict";var r=n(5884);e.exports=function(){var e=r(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},8596:function(e,t,n){"use strict";var r=n(2837),i=n(6840).RegExp,o=r((function(){var e=i("a","y");return e.lastIndex=2,null!==e.exec("abcd")})),a=o||r((function(){return!i("a","y").sticky})),s=o||r((function(){var e=i("^r","gy");return e.lastIndex=2,null!==e.exec("str")}));e.exports={BROKEN_CARET:s,MISSED_STICKY:a,UNSUPPORTED_Y:o}},2047:function(e,t,n){"use strict";var r=n(2837),i=n(6840).RegExp;e.exports=r((function(){var e=i(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))},2063:function(e,t,n){"use strict";var r=n(2837),i=n(6840).RegExp;e.exports=r((function(){var e=i("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},2244:function(e,t,n){"use strict";var r=n(9055),i=TypeError;e.exports=function(e){if(r(e))throw i("Can't call method on "+e);return e}},9378:function(e,t,n){"use strict";var r=n(1778),i=n(6520),o=r("keys");e.exports=function(e){return o[e]||(o[e]=i(e))}},4460:function(e,t,n){"use strict";var r=n(6840),i=n(9131),o="__core-js_shared__",a=r[o]||i(o,{});e.exports=a},1778:function(e,t,n){"use strict";var r=n(3608),i=n(4460);(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.32.1",mode:r?"pure":"global",copyright:"\xa9 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.32.1/LICENSE",source:"https://github.com/zloirock/core-js"})},8424:function(e,t,n){"use strict";var r=n(4932),i=n(2128),o=n(6124),a=n(2244),s=r("".charAt),u=r("".charCodeAt),l=r("".slice),c=function(e){return function(t,n){var r,c,d=o(a(t)),f=i(n),h=d.length;return f<0||f>=h?e?"":void 0:(r=u(d,f))<55296||r>56319||f+1===h||(c=u(d,f+1))<56320||c>57343?e?s(d,f):r:e?l(d,f,f+2):c-56320+(r-55296<<10)+65536}};e.exports={codeAt:c(!1),charAt:c(!0)}},166:function(e,t,n){"use strict";var r=n(5372),i=n(2837),o=n(6840).String;e.exports=!!Object.getOwnPropertySymbols&&!i((function(){var e=Symbol("symbol detection");return!o(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},1823:function(e,t,n){"use strict";var r=n(2128),i=Math.max,o=Math.min;e.exports=function(e,t){var n=r(e);return n<0?i(n+t,0):o(n,t)}},5770:function(e,t,n){"use strict";var r=n(1036),i=n(2244);e.exports=function(e){return r(i(e))}},2128:function(e,t,n){"use strict";var r=n(1246);e.exports=function(e){var t=+e;return t!==t||0===t?0:r(t)}},2347:function(e,t,n){"use strict";var r=n(2128),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},8385:function(e,t,n){"use strict";var r=n(2244),i=Object;e.exports=function(e){return i(r(e))}},6740:function(e,t,n){"use strict";var r=n(8513),i=n(3931),o=n(8287),a=n(3863),s=n(7772),u=n(5028),l=TypeError,c=u("toPrimitive");e.exports=function(e,t){if(!i(e)||o(e))return e;var n,u=a(e,c);if(u){if(void 0===t&&(t="default"),n=r(u,e,t),!i(n)||o(n))return n;throw l("Can't convert object to primitive value")}return void 0===t&&(t="number"),s(e,t)}},4655:function(e,t,n){"use strict";var r=n(6740),i=n(8287);e.exports=function(e){var t=r(e,"string");return i(t)?t:t+""}},6042:function(e,t,n){"use strict";var r={};r[n(5028)("toStringTag")]="z",e.exports="[object z]"===String(r)},6124:function(e,t,n){"use strict";var r=n(7205),i=String;e.exports=function(e){if("Symbol"===r(e))throw TypeError("Cannot convert a Symbol value to a string");return i(e)}},1772:function(e){"use strict";var t=String;e.exports=function(e){try{return t(e)}catch(n){return"Object"}}},6520:function(e,t,n){"use strict";var r=n(4932),i=0,o=Math.random(),a=r(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+a(++i+o,36)}},7611:function(e,t,n){"use strict";var r=n(166);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},6056:function(e,t,n){"use strict";var r=n(1196),i=n(2837);e.exports=r&&i((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},1615:function(e,t,n){"use strict";var r=n(6840),i=n(9218),o=r.WeakMap;e.exports=i(o)&&/native code/.test(String(o))},5028:function(e,t,n){"use strict";var r=n(6840),i=n(1778),o=n(3013),a=n(6520),s=n(166),u=n(7611),l=r.Symbol,c=i("wks"),d=u?l.for||l:l&&l.withoutSetter||a;e.exports=function(e){return o(c,e)||(c[e]=s&&o(l,e)?l[e]:d("Symbol."+e)),c[e]}},5470:function(e,t,n){"use strict";var r=n(7768),i=n(8264),o=n(6724),a=n(8385),s=n(3385),u=n(5491);r({target:"Array",proto:!0},{flatMap:function(e){var t,n=a(this),r=s(n);return o(e),(t=u(n,0)).length=i(t,n,n,r,0,1,e,arguments.length>1?arguments[1]:void 0),t}})},8624:function(e,t,n){"use strict";var r=n(7768),i=n(8264),o=n(8385),a=n(3385),s=n(2128),u=n(5491);r({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=o(this),n=a(t),r=u(t,0);return r.length=i(r,t,t,n,0,void 0===e?1:s(e)),r}})},2330:function(e,t,n){"use strict";n(5715)("flatMap")},9743:function(e,t,n){"use strict";n(5715)("flat")},447:function(e,t,n){"use strict";var r=n(7768),i=n(4087);r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},4178:function(e,t,n){"use strict";var r=n(6339),i=n(8513),o=n(4932),a=n(8093),s=n(2837),u=n(5884),l=n(9218),c=n(9055),d=n(2128),f=n(2347),h=n(6124),p=n(2244),v=n(5466),g=n(3863),m=n(7794),y=n(2781),b=n(5028)("replace"),w=Math.max,x=Math.min,k=o([].concat),S=o([].push),_=o("".indexOf),E=o("".slice),C="$0"==="a".replace(/./,"$0"),P=!!/./[b]&&""===/./[b]("a","$0");a("replace",(function(e,t,n){var o=P?"$":"$0";return[function(e,n){var r=p(this),o=c(e)?void 0:g(e,b);return o?i(o,e,r,n):i(t,h(r),e,n)},function(e,i){var a=u(this),s=h(e);if("string"==typeof i&&-1===_(i,o)&&-1===_(i,"$<")){var c=n(t,a,s,i);if(c.done)return c.value}var p=l(i);p||(i=h(i));var g,b=a.global;b&&(g=a.unicode,a.lastIndex=0);for(var C,P=[];null!==(C=y(a,s))&&(S(P,C),b);){""===h(C[0])&&(a.lastIndex=v(s,f(a.lastIndex),g))}for(var I,T="",M=0,A=0;A<P.length;A++){for(var O,j=h((C=P[A])[0]),R=w(x(d(C.index),s.length),0),L=[],D=1;D<C.length;D++)S(L,void 0===(I=C[D])?I:String(I));var N=C.groups;if(p){var z=k([j],L,R,s);void 0!==N&&S(z,N),O=h(r(i,void 0,z))}else O=m(j,s,R,L,N,i);R>=M&&(T+=E(s,M,R)+O,M=R+j.length)}return T+E(s,M)}]}),!!s((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!C||P)},7143:function(e){"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,r,o,a){if("function"!==typeof r)throw new TypeError("The listener must be a function");var s=new i(r,o||e,a),u=n?n+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],s]:e._events[u].push(s):(e._events[u]=s,e._eventsCount++),e}function a(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=new Array(o);i<o;i++)a[i]=r[i].fn;return a},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,i,o,a){var s=n?n+e:e;if(!this._events[s])return!1;var u,l,c=this._events[s],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,r),!0;case 4:return c.fn.call(c.context,t,r,i),!0;case 5:return c.fn.call(c.context,t,r,i,o),!0;case 6:return c.fn.call(c.context,t,r,i,o,a),!0}for(l=1,u=new Array(d-1);l<d;l++)u[l-1]=arguments[l];c.fn.apply(c.context,u)}else{var f,h=c.length;for(l=0;l<h;l++)switch(c[l].once&&this.removeListener(e,c[l].fn,void 0,!0),d){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,t);break;case 3:c[l].fn.call(c[l].context,t,r);break;case 4:c[l].fn.call(c[l].context,t,r,i);break;default:if(!u)for(f=1,u=new Array(d-1);f<d;f++)u[f-1]=arguments[f];c[l].fn.apply(c[l].context,u)}}return!0},s.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,i){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==t||i&&!s.once||r&&s.context!==r||a(this,o);else{for(var u=0,l=[],c=s.length;u<c;u++)(s[u].fn!==t||i&&!s[u].once||r&&s[u].context!==r)&&l.push(s[u]);l.length?this._events[o]=1===l.length?l[0]:l:a(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s},4038:function(e,t){t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,d=n?i-1:0,f=n?-1:1,h=e[t+d];for(d+=f,o=h&(1<<-c)-1,h>>=-c,c+=s;c>0;o=256*o+e[t+d],d+=f,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+e[t+d],d+=f,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),o-=l}return(h?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,u,l=8*o-i-1,c=(1<<l)-1,d=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,p=r?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),(t+=a+d>=1?f/u:f*Math.pow(2,1-d))*u>=2&&(a++,u/=2),a+d>=c?(s=0,a=c):a+d>=1?(s=(t*u-1)*Math.pow(2,i),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;e[n+h]=255&s,h+=p,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;e[n+h]=255&a,h+=p,a/=256,l-=8);e[n+h-p]|=128*v}},2467:function(e,t,n){e=n.nmd(e);var r="__lodash_hash_undefined__",i=1,o=2,a=9007199254740991,s="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",c="[object Boolean]",d="[object Date]",f="[object Error]",h="[object Function]",p="[object GeneratorFunction]",v="[object Map]",g="[object Number]",m="[object Null]",y="[object Object]",b="[object Promise]",w="[object Proxy]",x="[object RegExp]",k="[object Set]",S="[object String]",_="[object Symbol]",E="[object Undefined]",C="[object WeakMap]",P="[object ArrayBuffer]",I="[object DataView]",T=/^\[object .+?Constructor\]$/,M=/^(?:0|[1-9]\d*)$/,A={};A["[object Float32Array]"]=A["[object Float64Array]"]=A["[object Int8Array]"]=A["[object Int16Array]"]=A["[object Int32Array]"]=A["[object Uint8Array]"]=A["[object Uint8ClampedArray]"]=A["[object Uint16Array]"]=A["[object Uint32Array]"]=!0,A[s]=A[u]=A[P]=A[c]=A[I]=A[d]=A[f]=A[h]=A[v]=A[g]=A[y]=A[x]=A[k]=A[S]=A[C]=!1;var O="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,j="object"==typeof self&&self&&self.Object===Object&&self,R=O||j||Function("return this")(),L=t&&!t.nodeType&&t,D=L&&e&&!e.nodeType&&e,N=D&&D.exports===L,z=N&&O.process,B=function(){try{return z&&z.binding&&z.binding("util")}catch(e){}}(),F=B&&B.isTypedArray;function U(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function K(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function V(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var W=Array.prototype,H=Function.prototype,Y=Object.prototype,X=R["__core-js_shared__"],q=H.toString,$=Y.hasOwnProperty,G=function(){var e=/[^.]+$/.exec(X&&X.keys&&X.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Q=Y.toString,J=RegExp("^"+q.call($).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Z=N?R.Buffer:void 0,ee=R.Symbol,te=R.Uint8Array,ne=Y.propertyIsEnumerable,re=W.splice,ie=ee?ee.toStringTag:void 0,oe=Object.getOwnPropertySymbols,ae=Z?Z.isBuffer:void 0,se=function(e,t){return function(n){return e(t(n))}}(Object.keys,Object),ue=De(R,"DataView"),le=De(R,"Map"),ce=De(R,"Promise"),de=De(R,"Set"),fe=De(R,"WeakMap"),he=De(Object,"create"),pe=Fe(ue),ve=Fe(le),ge=Fe(ce),me=Fe(de),ye=Fe(fe),be=ee?ee.prototype:void 0,we=be?be.valueOf:void 0;function xe(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ke(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Se(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function _e(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Se;++t<n;)this.add(e[t])}function Ee(e){var t=this.__data__=new ke(e);this.size=t.size}function Ce(e,t){var n=Ve(e),r=!n&&Ke(e),i=!n&&!r&&We(e),o=!n&&!r&&!i&&$e(e),a=n||r||i||o,s=a?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],u=s.length;for(var l in e)!t&&!$.call(e,l)||a&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Be(l,u))||s.push(l);return s}function Pe(e,t){for(var n=e.length;n--;)if(Ue(e[n][0],t))return n;return-1}function Ie(e){return null==e?void 0===e?E:m:ie&&ie in Object(e)?function(e){var t=$.call(e,ie),n=e[ie];try{e[ie]=void 0;var r=!0}catch(o){}var i=Q.call(e);r&&(t?e[ie]=n:delete e[ie]);return i}(e):function(e){return Q.call(e)}(e)}function Te(e){return qe(e)&&Ie(e)==s}function Me(e,t,n,r,a){return e===t||(null==e||null==t||!qe(e)&&!qe(t)?e!==e&&t!==t:function(e,t,n,r,a,l){var h=Ve(e),p=Ve(t),m=h?u:ze(e),b=p?u:ze(t),w=(m=m==s?y:m)==y,E=(b=b==s?y:b)==y,C=m==b;if(C&&We(e)){if(!We(t))return!1;h=!0,w=!1}if(C&&!w)return l||(l=new Ee),h||$e(e)?je(e,t,n,r,a,l):function(e,t,n,r,a,s,u){switch(n){case I:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case P:return!(e.byteLength!=t.byteLength||!s(new te(e),new te(t)));case c:case d:case g:return Ue(+e,+t);case f:return e.name==t.name&&e.message==t.message;case x:case S:return e==t+"";case v:var l=K;case k:var h=r&i;if(l||(l=V),e.size!=t.size&&!h)return!1;var p=u.get(e);if(p)return p==t;r|=o,u.set(e,t);var m=je(l(e),l(t),r,a,s,u);return u.delete(e),m;case _:if(we)return we.call(e)==we.call(t)}return!1}(e,t,m,n,r,a,l);if(!(n&i)){var T=w&&$.call(e,"__wrapped__"),M=E&&$.call(t,"__wrapped__");if(T||M){var A=T?e.value():e,O=M?t.value():t;return l||(l=new Ee),a(A,O,n,r,l)}}if(!C)return!1;return l||(l=new Ee),function(e,t,n,r,o,a){var s=n&i,u=Re(e),l=u.length,c=Re(t),d=c.length;if(l!=d&&!s)return!1;var f=l;for(;f--;){var h=u[f];if(!(s?h in t:$.call(t,h)))return!1}var p=a.get(e);if(p&&a.get(t))return p==t;var v=!0;a.set(e,t),a.set(t,e);var g=s;for(;++f<l;){var m=e[h=u[f]],y=t[h];if(r)var b=s?r(y,m,h,t,e,a):r(m,y,h,e,t,a);if(!(void 0===b?m===y||o(m,y,n,r,a):b)){v=!1;break}g||(g="constructor"==h)}if(v&&!g){var w=e.constructor,x=t.constructor;w==x||!("constructor"in e)||!("constructor"in t)||"function"==typeof w&&w instanceof w&&"function"==typeof x&&x instanceof x||(v=!1)}return a.delete(e),a.delete(t),v}(e,t,n,r,a,l)}(e,t,n,r,Me,a))}function Ae(e){return!(!Xe(e)||function(e){return!!G&&G in e}(e))&&(He(e)?J:T).test(Fe(e))}function Oe(e){if(!function(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||Y;return e===n}(e))return se(e);var t=[];for(var n in Object(e))$.call(e,n)&&"constructor"!=n&&t.push(n);return t}function je(e,t,n,r,a,s){var u=n&i,l=e.length,c=t.length;if(l!=c&&!(u&&c>l))return!1;var d=s.get(e);if(d&&s.get(t))return d==t;var f=-1,h=!0,p=n&o?new _e:void 0;for(s.set(e,t),s.set(t,e);++f<l;){var v=e[f],g=t[f];if(r)var m=u?r(g,v,f,t,e,s):r(v,g,f,e,t,s);if(void 0!==m){if(m)continue;h=!1;break}if(p){if(!U(t,(function(e,t){if(i=t,!p.has(i)&&(v===e||a(v,e,n,r,s)))return p.push(t);var i}))){h=!1;break}}else if(v!==g&&!a(v,g,n,r,s)){h=!1;break}}return s.delete(e),s.delete(t),h}function Re(e){return function(e,t,n){var r=t(e);return Ve(e)?r:function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}(r,n(e))}(e,Ge,Ne)}function Le(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function De(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return Ae(n)?n:void 0}xe.prototype.clear=function(){this.__data__=he?he(null):{},this.size=0},xe.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},xe.prototype.get=function(e){var t=this.__data__;if(he){var n=t[e];return n===r?void 0:n}return $.call(t,e)?t[e]:void 0},xe.prototype.has=function(e){var t=this.__data__;return he?void 0!==t[e]:$.call(t,e)},xe.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=he&&void 0===t?r:t,this},ke.prototype.clear=function(){this.__data__=[],this.size=0},ke.prototype.delete=function(e){var t=this.__data__,n=Pe(t,e);return!(n<0)&&(n==t.length-1?t.pop():re.call(t,n,1),--this.size,!0)},ke.prototype.get=function(e){var t=this.__data__,n=Pe(t,e);return n<0?void 0:t[n][1]},ke.prototype.has=function(e){return Pe(this.__data__,e)>-1},ke.prototype.set=function(e,t){var n=this.__data__,r=Pe(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Se.prototype.clear=function(){this.size=0,this.__data__={hash:new xe,map:new(le||ke),string:new xe}},Se.prototype.delete=function(e){var t=Le(this,e).delete(e);return this.size-=t?1:0,t},Se.prototype.get=function(e){return Le(this,e).get(e)},Se.prototype.has=function(e){return Le(this,e).has(e)},Se.prototype.set=function(e,t){var n=Le(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},_e.prototype.add=_e.prototype.push=function(e){return this.__data__.set(e,r),this},_e.prototype.has=function(e){return this.__data__.has(e)},Ee.prototype.clear=function(){this.__data__=new ke,this.size=0},Ee.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Ee.prototype.get=function(e){return this.__data__.get(e)},Ee.prototype.has=function(e){return this.__data__.has(e)},Ee.prototype.set=function(e,t){var n=this.__data__;if(n instanceof ke){var r=n.__data__;if(!le||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Se(r)}return n.set(e,t),this.size=n.size,this};var Ne=oe?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}(oe(e),(function(t){return ne.call(e,t)})))}:function(){return[]},ze=Ie;function Be(e,t){return!!(t=null==t?a:t)&&("number"==typeof e||M.test(e))&&e>-1&&e%1==0&&e<t}function Fe(e){if(null!=e){try{return q.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Ue(e,t){return e===t||e!==e&&t!==t}(ue&&ze(new ue(new ArrayBuffer(1)))!=I||le&&ze(new le)!=v||ce&&ze(ce.resolve())!=b||de&&ze(new de)!=k||fe&&ze(new fe)!=C)&&(ze=function(e){var t=Ie(e),n=t==y?e.constructor:void 0,r=n?Fe(n):"";if(r)switch(r){case pe:return I;case ve:return v;case ge:return b;case me:return k;case ye:return C}return t});var Ke=Te(function(){return arguments}())?Te:function(e){return qe(e)&&$.call(e,"callee")&&!ne.call(e,"callee")},Ve=Array.isArray;var We=ae||function(){return!1};function He(e){if(!Xe(e))return!1;var t=Ie(e);return t==h||t==p||t==l||t==w}function Ye(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=a}function Xe(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function qe(e){return null!=e&&"object"==typeof e}var $e=F?function(e){return function(t){return e(t)}}(F):function(e){return qe(e)&&Ye(e.length)&&!!A[Ie(e)]};function Ge(e){return null!=(t=e)&&Ye(t.length)&&!He(t)?Ce(e):Oe(e);var t}e.exports=function(e,t){return Me(e,t)}},3881:function(e,t,n){var r="Expected a function",i=NaN,o="[object Symbol]",a=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt,d="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,f="object"==typeof self&&self&&self.Object===Object&&self,h=d||f||Function("return this")(),p=Object.prototype.toString,v=Math.max,g=Math.min,m=function(){return h.Date.now()};function y(e,t,n){var i,o,a,s,u,l,c=0,d=!1,f=!1,h=!0;if("function"!=typeof e)throw new TypeError(r);function p(t){var n=i,r=o;return i=o=void 0,c=t,s=e.apply(r,n)}function y(e){var n=e-l;return void 0===l||n>=t||n<0||f&&e-c>=a}function x(){var e=m();if(y(e))return k(e);u=setTimeout(x,function(e){var n=t-(e-l);return f?g(n,a-(e-c)):n}(e))}function k(e){return u=void 0,h&&i?p(e):(i=o=void 0,s)}function S(){var e=m(),n=y(e);if(i=arguments,o=this,l=e,n){if(void 0===u)return function(e){return c=e,u=setTimeout(x,t),d?p(e):s}(l);if(f)return u=setTimeout(x,t),p(l)}return void 0===u&&(u=setTimeout(x,t)),s}return t=w(t)||0,b(n)&&(d=!!n.leading,a=(f="maxWait"in n)?v(w(n.maxWait)||0,t):a,h="trailing"in n?!!n.trailing:h),S.cancel=function(){void 0!==u&&clearTimeout(u),c=0,i=l=o=u=void 0},S.flush=function(){return void 0===u?s:k(m())},S}function b(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function w(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&p.call(e)==o}(e))return i;if(b(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=b(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(a,"");var n=u.test(e);return n||l.test(e)?c(e.slice(2),n?2:8):s.test(e)?i:+e}e.exports=function(e,t,n){var i=!0,o=!0;if("function"!=typeof e)throw new TypeError(r);return b(n)&&(i="leading"in n?!!n.leading:i,o="trailing"in n?!!n.trailing:o),y(e,t,{leading:i,maxWait:t,trailing:o})}},9409:function(e,t,n){var r=200,i="__lodash_hash_undefined__",o="[object Function]",a="[object GeneratorFunction]",s=/^\[object .+?Constructor\]$/,u="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,l="object"==typeof self&&self&&self.Object===Object&&self,c=u||l||Function("return this")();function d(e,t){return!!(e?e.length:0)&&function(e,t,n){if(t!==t)return function(e,t,n,r){var i=e.length,o=n+(r?1:-1);for(;r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}(e,h,n);var r=n-1,i=e.length;for(;++r<i;)if(e[r]===t)return r;return-1}(e,t,0)>-1}function f(e,t,n){for(var r=-1,i=e?e.length:0;++r<i;)if(n(t,e[r]))return!0;return!1}function h(e){return e!==e}function p(e,t){return e.has(t)}function v(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var g=Array.prototype,m=Function.prototype,y=Object.prototype,b=c["__core-js_shared__"],w=function(){var e=/[^.]+$/.exec(b&&b.keys&&b.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),x=m.toString,k=y.hasOwnProperty,S=y.toString,_=RegExp("^"+x.call(k).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),E=g.splice,C=N(c,"Map"),P=N(c,"Set"),I=N(Object,"create");function T(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function M(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function A(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function O(e){var t=-1,n=e?e.length:0;for(this.__data__=new A;++t<n;)this.add(e[t])}function j(e,t){for(var n,r,i=e.length;i--;)if((n=e[i][0])===(r=t)||n!==n&&r!==r)return i;return-1}function R(e){if(!z(e)||function(e){return!!w&&w in e}(e))return!1;var t=function(e){var t=z(e)?S.call(e):"";return t==o||t==a}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(n){}return t}(e)?_:s;return t.test(function(e){if(null!=e){try{return x.call(e)}catch(t){}try{return e+""}catch(t){}}return""}(e))}T.prototype.clear=function(){this.__data__=I?I(null):{}},T.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},T.prototype.get=function(e){var t=this.__data__;if(I){var n=t[e];return n===i?void 0:n}return k.call(t,e)?t[e]:void 0},T.prototype.has=function(e){var t=this.__data__;return I?void 0!==t[e]:k.call(t,e)},T.prototype.set=function(e,t){return this.__data__[e]=I&&void 0===t?i:t,this},M.prototype.clear=function(){this.__data__=[]},M.prototype.delete=function(e){var t=this.__data__,n=j(t,e);return!(n<0)&&(n==t.length-1?t.pop():E.call(t,n,1),!0)},M.prototype.get=function(e){var t=this.__data__,n=j(t,e);return n<0?void 0:t[n][1]},M.prototype.has=function(e){return j(this.__data__,e)>-1},M.prototype.set=function(e,t){var n=this.__data__,r=j(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},A.prototype.clear=function(){this.__data__={hash:new T,map:new(C||M),string:new T}},A.prototype.delete=function(e){return D(this,e).delete(e)},A.prototype.get=function(e){return D(this,e).get(e)},A.prototype.has=function(e){return D(this,e).has(e)},A.prototype.set=function(e,t){return D(this,e).set(e,t),this},O.prototype.add=O.prototype.push=function(e){return this.__data__.set(e,i),this},O.prototype.has=function(e){return this.__data__.has(e)};var L=P&&1/v(new P([,-0]))[1]==1/0?function(e){return new P(e)}:function(){};function D(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function N(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return R(n)?n:void 0}function z(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=function(e){return e&&e.length?function(e,t,n){var i=-1,o=d,a=e.length,s=!0,u=[],l=u;if(n)s=!1,o=f;else if(a>=r){var c=t?null:L(e);if(c)return v(c);s=!1,o=p,l=new O}else l=t?[]:u;e:for(;++i<a;){var h=e[i],g=t?t(h):h;if(h=n||0!==h?h:0,s&&g===g){for(var m=l.length;m--;)if(l[m]===g)continue e;t&&l.push(g),u.push(h)}else o(l,g,n)||(l!==u&&l.push(g),u.push(h))}return u}(e):[]}},4235:function(e,t,n){var r,i=function(){var e=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",r={};function i(e,t){if(!r[e]){r[e]={};for(var n=0;n<e.length;n++)r[e][e.charAt(n)]=n}return r[e][t]}var o={compressToBase64:function(e){if(null==e)return"";var n=o._compress(e,6,(function(e){return t.charAt(e)}));switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:o._decompress(e.length,32,(function(n){return i(t,e.charAt(n))}))},compressToUTF16:function(t){return null==t?"":o._compress(t,15,(function(t){return e(t+32)}))+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:o._decompress(e.length,16384,(function(t){return e.charCodeAt(t)-32}))},compressToUint8Array:function(e){for(var t=o.compress(e),n=new Uint8Array(2*t.length),r=0,i=t.length;r<i;r++){var a=t.charCodeAt(r);n[2*r]=a>>>8,n[2*r+1]=a%256}return n},decompressFromUint8Array:function(t){if(null===t||void 0===t)return o.decompress(t);for(var n=new Array(t.length/2),r=0,i=n.length;r<i;r++)n[r]=256*t[2*r]+t[2*r+1];var a=[];return n.forEach((function(t){a.push(e(t))})),o.decompress(a.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":o._compress(e,6,(function(e){return n.charAt(e)}))},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),o._decompress(e.length,32,(function(t){return i(n,e.charAt(t))})))},compress:function(t){return o._compress(t,16,(function(t){return e(t)}))},_compress:function(e,t,n){if(null==e)return"";var r,i,o,a={},s={},u="",l="",c="",d=2,f=3,h=2,p=[],v=0,g=0;for(o=0;o<e.length;o+=1)if(u=e.charAt(o),Object.prototype.hasOwnProperty.call(a,u)||(a[u]=f++,s[u]=!0),l=c+u,Object.prototype.hasOwnProperty.call(a,l))c=l;else{if(Object.prototype.hasOwnProperty.call(s,c)){if(c.charCodeAt(0)<256){for(r=0;r<h;r++)v<<=1,g==t-1?(g=0,p.push(n(v)),v=0):g++;for(i=c.charCodeAt(0),r=0;r<8;r++)v=v<<1|1&i,g==t-1?(g=0,p.push(n(v)),v=0):g++,i>>=1}else{for(i=1,r=0;r<h;r++)v=v<<1|i,g==t-1?(g=0,p.push(n(v)),v=0):g++,i=0;for(i=c.charCodeAt(0),r=0;r<16;r++)v=v<<1|1&i,g==t-1?(g=0,p.push(n(v)),v=0):g++,i>>=1}0==--d&&(d=Math.pow(2,h),h++),delete s[c]}else for(i=a[c],r=0;r<h;r++)v=v<<1|1&i,g==t-1?(g=0,p.push(n(v)),v=0):g++,i>>=1;0==--d&&(d=Math.pow(2,h),h++),a[l]=f++,c=String(u)}if(""!==c){if(Object.prototype.hasOwnProperty.call(s,c)){if(c.charCodeAt(0)<256){for(r=0;r<h;r++)v<<=1,g==t-1?(g=0,p.push(n(v)),v=0):g++;for(i=c.charCodeAt(0),r=0;r<8;r++)v=v<<1|1&i,g==t-1?(g=0,p.push(n(v)),v=0):g++,i>>=1}else{for(i=1,r=0;r<h;r++)v=v<<1|i,g==t-1?(g=0,p.push(n(v)),v=0):g++,i=0;for(i=c.charCodeAt(0),r=0;r<16;r++)v=v<<1|1&i,g==t-1?(g=0,p.push(n(v)),v=0):g++,i>>=1}0==--d&&(d=Math.pow(2,h),h++),delete s[c]}else for(i=a[c],r=0;r<h;r++)v=v<<1|1&i,g==t-1?(g=0,p.push(n(v)),v=0):g++,i>>=1;0==--d&&(d=Math.pow(2,h),h++)}for(i=2,r=0;r<h;r++)v=v<<1|1&i,g==t-1?(g=0,p.push(n(v)),v=0):g++,i>>=1;for(;;){if(v<<=1,g==t-1){p.push(n(v));break}g++}return p.join("")},decompress:function(e){return null==e?"":""==e?null:o._decompress(e.length,32768,(function(t){return e.charCodeAt(t)}))},_decompress:function(t,n,r){var i,o,a,s,u,l,c,d=[],f=4,h=4,p=3,v="",g=[],m={val:r(0),position:n,index:1};for(i=0;i<3;i+=1)d[i]=i;for(a=0,u=Math.pow(2,2),l=1;l!=u;)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=r(m.index++)),a|=(s>0?1:0)*l,l<<=1;switch(a){case 0:for(a=0,u=Math.pow(2,8),l=1;l!=u;)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=r(m.index++)),a|=(s>0?1:0)*l,l<<=1;c=e(a);break;case 1:for(a=0,u=Math.pow(2,16),l=1;l!=u;)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=r(m.index++)),a|=(s>0?1:0)*l,l<<=1;c=e(a);break;case 2:return""}for(d[3]=c,o=c,g.push(c);;){if(m.index>t)return"";for(a=0,u=Math.pow(2,p),l=1;l!=u;)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=r(m.index++)),a|=(s>0?1:0)*l,l<<=1;switch(c=a){case 0:for(a=0,u=Math.pow(2,8),l=1;l!=u;)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=r(m.index++)),a|=(s>0?1:0)*l,l<<=1;d[h++]=e(a),c=h-1,f--;break;case 1:for(a=0,u=Math.pow(2,16),l=1;l!=u;)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=r(m.index++)),a|=(s>0?1:0)*l,l<<=1;d[h++]=e(a),c=h-1,f--;break;case 2:return g.join("")}if(0==f&&(f=Math.pow(2,p),p++),d[c])v=d[c];else{if(c!==h)return null;v=o+o.charAt(0)}g.push(v),d[h++]=o+v.charAt(0),o=v,0==--f&&(f=Math.pow(2,p),p++)}}};return o}();void 0===(r=function(){return i}.call(t,n,t,e))||(e.exports=r)},1725:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,i){for(var o,a,s=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),u=1;u<arguments.length;u++){for(var l in o=Object(arguments[u]))n.call(o,l)&&(s[l]=o[l]);if(t){a=t(o);for(var c=0;c<a.length;c++)r.call(o,a[c])&&(s[a[c]]=o[a[c]])}}return s}},888:function(e,t,n){"use strict";var r=n(9047);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},2007:function(e,t,n){e.exports=n(888)()},9047:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},4463:function(e,t,n){"use strict";var r=n(2791),i=n(5296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function u(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(s[e]=t,e=0;e<t.length;e++)a.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},p={};function v(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(p,e)||!d.call(h,e)&&(f.test(e)?p[e]=!0:(h[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,y);g[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,y);g[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,y);g[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),k=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),P=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var j=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var D,N=Object.assign;function z(e){if(void 0===D)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);D=t&&t[1]||""}return"\n"+D+e}var B=!1;function F(e,t){if(!e||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var i=l.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s]){var u="\n"+i[a].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=a&&0<=s);break}}}finally{B=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function U(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=F(e.type,!1);case 11:return e=F(e.type.render,!1);case 1:return e=F(e.type,!0);default:return""}}function K(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case k:return"Portal";case E:return"Profiler";case _:return"StrictMode";case T:return"Suspense";case M:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case P:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:K(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return K(e(t))}catch(n){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return K(t);case 8:return t===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return N({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function G(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){Q(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return N({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function oe(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ce,de=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||he.hasOwnProperty(e)&&he[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(he).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),he[t]=he[e]}))}));var me=N({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,Se=null,_e=null;function Ee(e){if(e=bi(e)){if("function"!==typeof ke)throw Error(o(280));var t=e.stateNode;t&&(t=xi(t),ke(e.stateNode,e.type,t))}}function Ce(e){Se?_e?_e.push(e):_e=[e]:Se=e}function Pe(){if(Se){var e=Se,t=_e;if(_e=Se=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ie(e,t){return e(t)}function Te(){}var Me=!1;function Ae(e,t,n){if(Me)return e(t,n);Me=!0;try{return Ie(e,t,n)}finally{Me=!1,(null!==Se||null!==_e)&&(Te(),Pe())}}function Oe(e,t){var n=e.stateNode;if(null===n)return null;var r=xi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var je=!1;if(c)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){je=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(ce){je=!1}function Le(e,t,n,r,i,o,a,s,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var De=!1,Ne=null,ze=!1,Be=null,Fe={onError:function(e){De=!0,Ne=e}};function Ue(e,t,n,r,i,o,a,s,u){De=!1,Ne=null,Le.apply(Fe,arguments)}function Ke(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Ke(e)!==e)throw Error(o(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ke(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return We(i),e;if(a===r)return We(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=a;break}if(u===r){s=!0,r=i,n=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===n){s=!0,n=a,r=i;break}if(u===r){s=!0,r=a,n=i;break}u=u.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?Ye(e):null}function Ye(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ye(e);if(null!==t)return t;e=e.sibling}return null}var Xe=i.unstable_scheduleCallback,qe=i.unstable_cancelCallback,$e=i.unstable_shouldYield,Ge=i.unstable_requestPaint,Qe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,ot=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/ut|0)|0},st=Math.log,ut=Math.LN2;var lt=64,ct=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,a=268435455&n;if(0!==a){var s=a&~i;0!==s?r=dt(s):0!==(o&=a)&&(r=dt(o))}else 0!==(a=n&~i)?r=dt(a):0!==o&&(r=dt(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function ht(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,kt,St,_t,Et,Ct=!1,Pt=[],It=null,Tt=null,Mt=null,At=new Map,Ot=new Map,jt=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Tt=null;break;case"mouseover":case"mouseout":Mt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function Dt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&kt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Nt(e){var t=yi(e.target);if(null!==t){var n=Ke(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ve(n)))return e.blockedOn=t,void Et(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function zt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&kt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Bt(e,t,n){zt(e)&&n.delete(t)}function Ft(){Ct=!1,null!==It&&zt(It)&&(It=null),null!==Tt&&zt(Tt)&&(Tt=null),null!==Mt&&zt(Mt)&&(Mt=null),At.forEach(Bt),Ot.forEach(Bt)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ft)))}function Kt(e){function t(t){return Ut(t,e)}if(0<Pt.length){Ut(Pt[0],e);for(var n=1;n<Pt.length;n++){var r=Pt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&Ut(It,e),null!==Tt&&Ut(Tt,e),null!==Mt&&Ut(Mt,e),At.forEach(t),Ot.forEach(t),n=0;n<jt.length;n++)(r=jt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<jt.length&&null===(n=jt[0]).blockedOn;)Nt(n),null===n.blockedOn&&jt.shift()}var Vt=w.ReactCurrentBatchConfig,Wt=!0;function Ht(e,t,n,r){var i=bt,o=Vt.transition;Vt.transition=null;try{bt=1,Xt(e,t,n,r)}finally{bt=i,Vt.transition=o}}function Yt(e,t,n,r){var i=bt,o=Vt.transition;Vt.transition=null;try{bt=4,Xt(e,t,n,r)}finally{bt=i,Vt.transition=o}}function Xt(e,t,n,r){if(Wt){var i=$t(e,t,n,r);if(null===i)Wr(e,t,r,qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return It=Dt(It,e,t,n,r,i),!0;case"dragenter":return Tt=Dt(Tt,e,t,n,r,i),!0;case"mouseover":return Mt=Dt(Mt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return At.set(o,Dt(At.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Ot.set(o,Dt(Ot.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Rt.indexOf(e)){for(;null!==i;){var o=bi(i);if(null!==o&&xt(o),null===(o=$t(e,t,n,r))&&Wr(e,t,r,qt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var qt=null;function $t(e,t,n,r){if(qt=null,null!==(e=yi(e=xe(r))))if(null===(t=Ke(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return qt=e,null}function Gt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Qt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Qt?Qt.value:Qt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return N(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,sn,un,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=on(ln),dn=N({},ln,{view:0,detail:0}),fn=on(dn),hn=N({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(an=e.screenX-un.screenX,sn=e.screenY-un.screenY):sn=an=0,un=e),an)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=on(hn),vn=on(N({},hn,{dataTransfer:0})),gn=on(N({},dn,{relatedTarget:0})),mn=on(N({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=N({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=on(yn),wn=on(N({},ln,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _n(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function En(){return _n}var Cn=N({},dn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Pn=on(Cn),In=on(N({},hn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Tn=on(N({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Mn=on(N({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=N({},hn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=on(An),jn=[9,13,27,32],Rn=c&&"CompositionEvent"in window,Ln=null;c&&"documentMode"in document&&(Ln=document.documentMode);var Dn=c&&"TextEvent"in window&&!Ln,Nn=c&&(!Rn||Ln&&8<Ln&&11>=Ln),zn=String.fromCharCode(32),Bn=!1;function Fn(e,t){switch(e){case"keyup":return-1!==jn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Kn=!1;var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vn[e.type]:"textarea"===t}function Hn(e,t,n,r){Ce(r),0<(t=Yr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Yn=null,Xn=null;function qn(e){zr(e,0)}function $n(e){if(X(wi(e)))return e}function Gn(e,t){if("change"===e)return t}var Qn=!1;if(c){var Jn;if(c){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Qn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Yn&&(Yn.detachEvent("onpropertychange",nr),Xn=Yn=null)}function nr(e){if("value"===e.propertyName&&$n(Xn)){var t=[];Hn(t,Xn,e,xe(e)),Ae(qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Xn=n,(Yn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Xn)}function or(e,t){if("click"===e)return $n(t)}function ar(e,t){if("input"===e||"change"===e)return $n(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=q((e=t.contentWindow).document)}return t}function hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&hr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=cr(n,o);var a=cr(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=c&&"documentMode"in document&&11>=document.documentMode,gr=null,mr=null,yr=null,br=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==q(r)||("selectionStart"in(r=gr)&&hr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&ur(yr,r)||(yr=r,0<(r=Yr(mr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var kr={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},Sr={},_r={};function Er(e){if(Sr[e])return Sr[e];if(!kr[e])return e;var t,n=kr[e];for(t in n)if(n.hasOwnProperty(t)&&t in _r)return Sr[e]=n[t];return e}c&&(_r=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);var Cr=Er("animationend"),Pr=Er("animationiteration"),Ir=Er("animationstart"),Tr=Er("transitionend"),Mr=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){Mr.set(e,t),u(t,[e])}for(var jr=0;jr<Ar.length;jr++){var Rr=Ar[jr];Or(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Or(Cr,"onAnimationEnd"),Or(Pr,"onAnimationIteration"),Or(Ir,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Tr,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Nr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,s,u,l){if(Ue.apply(this,arguments),De){if(!De)throw Error(o(198));var c=Ne;De=!1,Ne=null,ze||(ze=!0,Be=c)}}(r,t,void 0,e),e.currentTarget=null}function zr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==o&&i.isPropagationStopped())break e;Nr(i,s,l),o=u}else for(a=0;a<r.length;a++){if(u=(s=r[a]).instance,l=s.currentTarget,s=s.listener,u!==o&&i.isPropagationStopped())break e;Nr(i,s,l),o=u}}}if(ze)throw e=Be,ze=!1,Be=null,e}function Br(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(Vr(t,e,2,!1),n.add(r))}function Fr(e,t,n){var r=0;t&&(r|=4),Vr(n,e,r,t)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function Kr(e){if(!e[Ur]){e[Ur]=!0,a.forEach((function(t){"selectionchange"!==t&&(Dr.has(t)||Fr(t,!1,e),Fr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ur]||(t[Ur]=!0,Fr("selectionchange",!1,t))}}function Vr(e,t,n,r){switch(Gt(t)){case 1:var i=Ht;break;case 4:i=Yt;break;default:i=Xt}n=i.bind(null,t,n,e),i=void 0,!je||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var u=a.tag;if((3===u||4===u)&&((u=a.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=yi(s)))return;if(5===(u=a.tag)||6===u){r=o=a;continue e}s=s.parentNode}}r=r.return}Ae((function(){var r=o,i=xe(n),a=[];e:{var s=Mr.get(e);if(void 0!==s){var u=cn,l=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=Pn;break;case"focusin":l="focus",u=gn;break;case"focusout":l="blur",u=gn;break;case"beforeblur":case"afterblur":u=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Tn;break;case Cr:case Pr:case Ir:u=mn;break;case Tr:u=Mn;break;case"scroll":u=fn;break;case"wheel":u=On;break;case"copy":case"cut":case"paste":u=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=In}var c=0!==(4&t),d=!c&&"scroll"===e,f=c?null!==s?s+"Capture":null:s;c=[];for(var h,p=r;null!==p;){var v=(h=p).stateNode;if(5===h.tag&&null!==v&&(h=v,null!==f&&(null!=(v=Oe(p,f))&&c.push(Hr(p,v,h)))),d)break;p=p.return}0<c.length&&(s=new u(s,l,null,n,i),a.push({event:s,listeners:c}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===we||!(l=n.relatedTarget||n.fromElement)||!yi(l)&&!l[pi])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(l=(l=n.relatedTarget||n.toElement)?yi(l):null)&&(l!==(d=Ke(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(u=null,l=r),u!==l)){if(c=pn,v="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=In,v="onPointerLeave",f="onPointerEnter",p="pointer"),d=null==u?s:wi(u),h=null==l?s:wi(l),(s=new c(v,p+"leave",u,n,i)).target=d,s.relatedTarget=h,v=null,yi(i)===r&&((c=new c(f,p+"enter",l,n,i)).target=h,c.relatedTarget=d,v=c),d=v,u&&l)e:{for(f=l,p=0,h=c=u;h;h=Xr(h))p++;for(h=0,v=f;v;v=Xr(v))h++;for(;0<p-h;)c=Xr(c),p--;for(;0<h-p;)f=Xr(f),h--;for(;p--;){if(c===f||null!==f&&c===f.alternate)break e;c=Xr(c),f=Xr(f)}c=null}else c=null;null!==u&&qr(a,s,u,c,!1),null!==l&&null!==d&&qr(a,d,l,c,!0)}if("select"===(u=(s=r?wi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var g=Gn;else if(Wn(s))if(Qn)g=ar;else{g=ir;var m=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=or);switch(g&&(g=g(e,r))?Hn(a,g,n,i):(m&&m(e,s,r),"focusout"===e&&(m=s._wrapperState)&&m.controlled&&"number"===s.type&&ee(s,"number",s.value)),m=r?wi(r):window,e){case"focusin":(Wn(m)||"true"===m.contentEditable)&&(gr=m,mr=r,yr=null);break;case"focusout":yr=mr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(a,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":wr(a,n,i)}var y;if(Rn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Kn?Fn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Nn&&"ko"!==n.locale&&(Kn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Kn&&(y=en()):(Jt="value"in(Qt=i)?Qt.value:Qt.textContent,Kn=!0)),0<(m=Yr(r,b)).length&&(b=new wn(b,e,null,n,i),a.push({event:b,listeners:m}),y?b.data=y:null!==(y=Un(n))&&(b.data=y))),(y=Dn?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(Bn=!0,zn);case"textInput":return(e=t.data)===zn&&Bn?null:e;default:return null}}(e,n):function(e,t){if(Kn)return"compositionend"===e||!Rn&&Fn(e,t)?(e=en(),Zt=Jt=Qt=null,Kn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Nn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Yr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=y))}zr(a,t)}))}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Yr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Oe(e,n))&&r.unshift(Hr(e,o,i)),null!=(o=Oe(e,t))&&r.push(Hr(e,o,i))),e=e.return}return r}function Xr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function qr(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,u=s.alternate,l=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==l&&(s=l,i?null!=(u=Oe(n,o))&&a.unshift(Hr(n,u,s)):i||null!=(u=Oe(n,o))&&a.push(Hr(n,u,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var $r=/\r\n?/g,Gr=/\u0000|\uFFFD/g;function Qr(e){return("string"===typeof e?e:""+e).replace($r,"\n").replace(Gr,"")}function Jr(e,t,n){if(t=Qr(t),Qr(e)!==t&&n)throw Error(o(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function ui(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Kt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Kt(t)}function li(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ci(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),fi="__reactFiber$"+di,hi="__reactProps$"+di,pi="__reactContainer$"+di,vi="__reactEvents$"+di,gi="__reactListeners$"+di,mi="__reactHandles$"+di;function yi(e){var t=e[fi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[fi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ci(e);null!==e;){if(n=e[fi])return n;e=ci(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[fi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function xi(e){return e[hi]||null}var ki=[],Si=-1;function _i(e){return{current:e}}function Ei(e){0>Si||(e.current=ki[Si],ki[Si]=null,Si--)}function Ci(e,t){Si++,ki[Si]=e.current,e.current=t}var Pi={},Ii=_i(Pi),Ti=_i(!1),Mi=Pi;function Ai(e,t){var n=e.type.contextTypes;if(!n)return Pi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Oi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function ji(){Ei(Ti),Ei(Ii)}function Ri(e,t,n){if(Ii.current!==Pi)throw Error(o(168));Ci(Ii,t),Ci(Ti,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,V(e)||"Unknown",i));return N({},n,r)}function Di(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Pi,Mi=Ii.current,Ci(Ii,e),Ci(Ti,Ti.current),!0}function Ni(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Li(e,t,Mi),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ti),Ei(Ii),Ci(Ii,e)):Ei(Ti),Ci(Ti,n)}var zi=null,Bi=!1,Fi=!1;function Ui(e){null===zi?zi=[e]:zi.push(e)}function Ki(){if(!Fi&&null!==zi){Fi=!0;var e=0,t=bt;try{var n=zi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}zi=null,Bi=!1}catch(i){throw null!==zi&&(zi=zi.slice(e+1)),Xe(Ze,Ki),i}finally{bt=t,Fi=!1}}return null}var Vi=[],Wi=0,Hi=null,Yi=0,Xi=[],qi=0,$i=null,Gi=1,Qi="";function Ji(e,t){Vi[Wi++]=Yi,Vi[Wi++]=Hi,Hi=e,Yi=t}function Zi(e,t,n){Xi[qi++]=Gi,Xi[qi++]=Qi,Xi[qi++]=$i,$i=e;var r=Gi;e=Qi;var i=32-at(r)-1;r&=~(1<<i),n+=1;var o=32-at(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Gi=1<<32-at(t)+i|n<<i|r,Qi=o+e}else Gi=1<<o|n<<i|r,Qi=e}function eo(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function to(e){for(;e===Hi;)Hi=Vi[--Wi],Vi[Wi]=null,Yi=Vi[--Wi],Vi[Wi]=null;for(;e===$i;)$i=Xi[--qi],Xi[qi]=null,Qi=Xi[--qi],Xi[qi]=null,Gi=Xi[--qi],Xi[qi]=null}var no=null,ro=null,io=!1,oo=null;function ao(e,t){var n=Ol(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function so(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=li(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==$i?{id:Gi,overflow:Qi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ol(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function uo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function lo(e){if(io){var t=ro;if(t){var n=t;if(!so(e,t)){if(uo(e))throw Error(o(418));t=li(n.nextSibling);var r=no;t&&so(e,t)?ao(r,n):(e.flags=-4097&e.flags|2,io=!1,no=e)}}else{if(uo(e))throw Error(o(418));e.flags=-4097&e.flags|2,io=!1,no=e}}}function co(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function fo(e){if(e!==no)return!1;if(!io)return co(e),io=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ro)){if(uo(e))throw ho(),Error(o(418));for(;t;)ao(e,t),t=li(t.nextSibling)}if(co(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=li(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?li(e.stateNode.nextSibling):null;return!0}function ho(){for(var e=ro;e;)e=li(e.nextSibling)}function po(){ro=no=null,io=!1}function vo(e){null===oo?oo=[e]:oo.push(e)}var go=w.ReactCurrentBatchConfig;function mo(e,t){if(e&&e.defaultProps){for(var n in t=N({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var yo=_i(null),bo=null,wo=null,xo=null;function ko(){xo=wo=bo=null}function So(e){var t=yo.current;Ei(yo),e._currentValue=t}function _o(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Eo(e,t){bo=e,xo=wo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ws=!0),e.firstContext=null)}function Co(e){var t=e._currentValue;if(xo!==e)if(e={context:e,memoizedValue:t,next:null},null===wo){if(null===bo)throw Error(o(308));wo=e,bo.dependencies={lanes:0,firstContext:e}}else wo=wo.next=e;return t}var Po=null;function Io(e){null===Po?Po=[e]:Po.push(e)}function To(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Io(t)):(n.next=i.next,i.next=n),t.interleaved=n,Mo(e,r)}function Mo(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ao=!1;function Oo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function jo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ro(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Lo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Tu)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Mo(e,n)}return null===(i=r.interleaved)?(t.next=t,Io(r)):(t.next=i.next,i.next=t),r.interleaved=t,Mo(e,n)}function Do(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function No(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function zo(e,t,n,r){var i=e.updateQueue;Ao=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var u=s,l=u.next;u.next=null,null===a?o=l:a.next=l,a=u;var c=e.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==a&&(null===s?c.firstBaseUpdate=l:s.next=l,c.lastBaseUpdate=u))}if(null!==o){var d=i.baseState;for(a=0,c=l=u=null,s=o;;){var f=s.lane,h=s.eventTime;if((r&f)===f){null!==c&&(c=c.next={eventTime:h,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,v=s;switch(f=t,h=n,v.tag){case 1:if("function"===typeof(p=v.payload)){d=p.call(h,d,f);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(f="function"===typeof(p=v.payload)?p.call(h,d,f):p)||void 0===f)break e;d=N({},d,f);break e;case 2:Ao=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(f=i.effects)?i.effects=[s]:f.push(s))}else h={eventTime:h,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(l=c=h,u=d):c=c.next=h,a|=f;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(f=s).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===c&&(u=d),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);Nu|=a,e.lanes=a,e.memoizedState=d}}function Bo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var Fo=(new r.Component).refs;function Uo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:N({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Ko={isMounted:function(e){return!!(e=e._reactInternals)&&Ke(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tl(),i=nl(e),o=Ro(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Lo(e,o,i))&&(rl(t,e,i,r),Do(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tl(),i=nl(e),o=Ro(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Lo(e,o,i))&&(rl(t,e,i,r),Do(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tl(),r=nl(e),i=Ro(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Lo(e,i,r))&&(rl(t,e,r,n),Do(t,e,r))}};function Vo(e,t,n,r,i,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(i,o))}function Wo(e,t,n){var r=!1,i=Pi,o=t.contextType;return"object"===typeof o&&null!==o?o=Co(o):(i=Oi(t)?Mi:Ii.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ai(e,i):Pi),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ko,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Ho(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ko.enqueueReplaceState(t,t.state,null)}function Yo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Fo,Oo(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=Co(o):(o=Oi(t)?Mi:Ii.current,i.context=Ai(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(Uo(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Ko.enqueueReplaceState(i,i.state,null),zo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Xo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;t===Fo&&(t=i.refs={}),null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function qo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function $o(e){return(0,e._init)(e._payload)}function Go(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Rl(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=zl(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){var o=n.type;return o===S?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===O&&$o(o)===t.type)?((r=i(t,n.props)).ref=Xo(e,t,n),r.return=e,r):((r=Ll(n.type,n.key,n.props,null,e.mode,r)).ref=Xo(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Bl(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=Dl(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=zl(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Ll(t.type,t.key,t.props,null,e.mode,n)).ref=Xo(e,null,t),n.return=e,n;case k:return(t=Bl(t,e.mode,n)).return=e,t;case O:return f(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Dl(t,e.mode,n,null)).return=e,t;qo(e,t)}return null}function h(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?l(e,t,n,r):null;case k:return n.key===i?c(e,t,n,r):null;case O:return h(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:d(e,t,n,r,null);qo(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case k:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case O:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return d(t,e=e.get(n)||null,r,i,null);qo(t,r)}return null}function v(i,o,s,u){for(var l=null,c=null,d=o,v=o=0,g=null;null!==d&&v<s.length;v++){d.index>v?(g=d,d=null):g=d.sibling;var m=h(i,d,s[v],u);if(null===m){null===d&&(d=g);break}e&&d&&null===m.alternate&&t(i,d),o=a(m,o,v),null===c?l=m:c.sibling=m,c=m,d=g}if(v===s.length)return n(i,d),io&&Ji(i,v),l;if(null===d){for(;v<s.length;v++)null!==(d=f(i,s[v],u))&&(o=a(d,o,v),null===c?l=d:c.sibling=d,c=d);return io&&Ji(i,v),l}for(d=r(i,d);v<s.length;v++)null!==(g=p(d,i,v,s[v],u))&&(e&&null!==g.alternate&&d.delete(null===g.key?v:g.key),o=a(g,o,v),null===c?l=g:c.sibling=g,c=g);return e&&d.forEach((function(e){return t(i,e)})),io&&Ji(i,v),l}function g(i,s,u,l){var c=L(u);if("function"!==typeof c)throw Error(o(150));if(null==(u=c.call(u)))throw Error(o(151));for(var d=c=null,v=s,g=s=0,m=null,y=u.next();null!==v&&!y.done;g++,y=u.next()){v.index>g?(m=v,v=null):m=v.sibling;var b=h(i,v,y.value,l);if(null===b){null===v&&(v=m);break}e&&v&&null===b.alternate&&t(i,v),s=a(b,s,g),null===d?c=b:d.sibling=b,d=b,v=m}if(y.done)return n(i,v),io&&Ji(i,g),c;if(null===v){for(;!y.done;g++,y=u.next())null!==(y=f(i,y.value,l))&&(s=a(y,s,g),null===d?c=y:d.sibling=y,d=y);return io&&Ji(i,g),c}for(v=r(i,v);!y.done;g++,y=u.next())null!==(y=p(v,i,g,y.value,l))&&(e&&null!==y.alternate&&v.delete(null===y.key?g:y.key),s=a(y,s,g),null===d?c=y:d.sibling=y,d=y);return e&&v.forEach((function(e){return t(i,e)})),io&&Ji(i,g),c}return function e(r,o,a,u){if("object"===typeof a&&null!==a&&a.type===S&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case x:e:{for(var l=a.key,c=o;null!==c;){if(c.key===l){if((l=a.type)===S){if(7===c.tag){n(r,c.sibling),(o=i(c,a.props.children)).return=r,r=o;break e}}else if(c.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===O&&$o(l)===c.type){n(r,c.sibling),(o=i(c,a.props)).ref=Xo(r,c,a),o.return=r,r=o;break e}n(r,c);break}t(r,c),c=c.sibling}a.type===S?((o=Dl(a.props.children,r.mode,u,a.key)).return=r,r=o):((u=Ll(a.type,a.key,a.props,null,r.mode,u)).ref=Xo(r,o,a),u.return=r,r=u)}return s(r);case k:e:{for(c=a.key;null!==o;){if(o.key===c){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){n(r,o.sibling),(o=i(o,a.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=Bl(a,r.mode,u)).return=r,r=o}return s(r);case O:return e(r,o,(c=a._init)(a._payload),u)}if(te(a))return v(r,o,a,u);if(L(a))return g(r,o,a,u);qo(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,a)).return=r,r=o):(n(r,o),(o=zl(a,r.mode,u)).return=r,r=o),s(r)):n(r,o)}}var Qo=Go(!0),Jo=Go(!1),Zo={},ea=_i(Zo),ta=_i(Zo),na=_i(Zo);function ra(e){if(e===Zo)throw Error(o(174));return e}function ia(e,t){switch(Ci(na,t),Ci(ta,e),Ci(ea,Zo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(ea),Ci(ea,t)}function oa(){Ei(ea),Ei(ta),Ei(na)}function aa(e){ra(na.current);var t=ra(ea.current),n=ue(t,e.type);t!==n&&(Ci(ta,e),Ci(ea,n))}function sa(e){ta.current===e&&(Ei(ea),Ei(ta))}var ua=_i(0);function la(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ca=[];function da(){for(var e=0;e<ca.length;e++)ca[e]._workInProgressVersionPrimary=null;ca.length=0}var fa=w.ReactCurrentDispatcher,ha=w.ReactCurrentBatchConfig,pa=0,va=null,ga=null,ma=null,ya=!1,ba=!1,wa=0,xa=0;function ka(){throw Error(o(321))}function Sa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function _a(e,t,n,r,i,a){if(pa=a,va=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fa.current=null===e||null===e.memoizedState?ss:us,e=n(r,i),ba){a=0;do{if(ba=!1,wa=0,25<=a)throw Error(o(301));a+=1,ma=ga=null,t.updateQueue=null,fa.current=ls,e=n(r,i)}while(ba)}if(fa.current=as,t=null!==ga&&null!==ga.next,pa=0,ma=ga=va=null,ya=!1,t)throw Error(o(300));return e}function Ea(){var e=0!==wa;return wa=0,e}function Ca(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ma?va.memoizedState=ma=e:ma=ma.next=e,ma}function Pa(){if(null===ga){var e=va.alternate;e=null!==e?e.memoizedState:null}else e=ga.next;var t=null===ma?va.memoizedState:ma.next;if(null!==t)ma=t,ga=e;else{if(null===e)throw Error(o(310));e={memoizedState:(ga=e).memoizedState,baseState:ga.baseState,baseQueue:ga.baseQueue,queue:ga.queue,next:null},null===ma?va.memoizedState=ma=e:ma=ma.next=e}return ma}function Ia(e,t){return"function"===typeof t?t(e):t}function Ta(e){var t=Pa(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=ga,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var u=s=null,l=null,c=a;do{var d=c.lane;if((pa&d)===d)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var f={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(u=l=f,s=r):l=l.next=f,va.lanes|=d,Nu|=d}c=c.next}while(null!==c&&c!==a);null===l?s=r:l.next=u,sr(r,t.memoizedState)||(ws=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,va.lanes|=a,Nu|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ma(e){var t=Pa(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);sr(a,t.memoizedState)||(ws=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Aa(){}function Oa(e,t){var n=va,r=Pa(),i=t(),a=!sr(r.memoizedState,i);if(a&&(r.memoizedState=i,ws=!0),r=r.queue,Wa(La.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==ma&&1&ma.memoizedState.tag){if(n.flags|=2048,Ba(9,Ra.bind(null,n,r,i,t),void 0,null),null===Mu)throw Error(o(349));0!==(30&pa)||ja(n,t,i)}return i}function ja(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=va.updateQueue)?(t={lastEffect:null,stores:null},va.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ra(e,t,n,r){t.value=n,t.getSnapshot=r,Da(t)&&Na(e)}function La(e,t,n){return n((function(){Da(t)&&Na(e)}))}function Da(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Na(e){var t=Mo(e,1);null!==t&&rl(t,e,1,-1)}function za(e){var t=Ca();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ia,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,va,e),[t.memoizedState,e]}function Ba(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=va.updateQueue)?(t={lastEffect:null,stores:null},va.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Fa(){return Pa().memoizedState}function Ua(e,t,n,r){var i=Ca();va.flags|=e,i.memoizedState=Ba(1|t,n,void 0,void 0===r?null:r)}function Ka(e,t,n,r){var i=Pa();r=void 0===r?null:r;var o=void 0;if(null!==ga){var a=ga.memoizedState;if(o=a.destroy,null!==r&&Sa(r,a.deps))return void(i.memoizedState=Ba(t,n,o,r))}va.flags|=e,i.memoizedState=Ba(1|t,n,o,r)}function Va(e,t){return Ua(8390656,8,e,t)}function Wa(e,t){return Ka(2048,8,e,t)}function Ha(e,t){return Ka(4,2,e,t)}function Ya(e,t){return Ka(4,4,e,t)}function Xa(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function qa(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ka(4,4,Xa.bind(null,t,e),n)}function $a(){}function Ga(e,t){var n=Pa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Sa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Qa(e,t){var n=Pa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Sa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ja(e,t,n){return 0===(21&pa)?(e.baseState&&(e.baseState=!1,ws=!0),e.memoizedState=n):(sr(n,t)||(n=vt(),va.lanes|=n,Nu|=n,e.baseState=!0),t)}function Za(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=ha.transition;ha.transition={};try{e(!1),t()}finally{bt=n,ha.transition=r}}function es(){return Pa().memoizedState}function ts(e,t,n){var r=nl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))is(t,n);else if(null!==(n=To(e,t,n,r))){rl(n,e,r,tl()),os(n,t,r)}}function ns(e,t,n){var r=nl(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))is(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,a)){var u=t.interleaved;return null===u?(i.next=i,Io(t)):(i.next=u.next,u.next=i),void(t.interleaved=i)}}catch(l){}null!==(n=To(e,t,i,r))&&(rl(n,e,r,i=tl()),os(n,t,r))}}function rs(e){var t=e.alternate;return e===va||null!==t&&t===va}function is(e,t){ba=ya=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function os(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var as={readContext:Co,useCallback:ka,useContext:ka,useEffect:ka,useImperativeHandle:ka,useInsertionEffect:ka,useLayoutEffect:ka,useMemo:ka,useReducer:ka,useRef:ka,useState:ka,useDebugValue:ka,useDeferredValue:ka,useTransition:ka,useMutableSource:ka,useSyncExternalStore:ka,useId:ka,unstable_isNewReconciler:!1},ss={readContext:Co,useCallback:function(e,t){return Ca().memoizedState=[e,void 0===t?null:t],e},useContext:Co,useEffect:Va,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ua(4194308,4,Xa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ua(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ua(4,2,e,t)},useMemo:function(e,t){var n=Ca();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ca();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,va,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Ca().memoizedState=e},useState:za,useDebugValue:$a,useDeferredValue:function(e){return Ca().memoizedState=e},useTransition:function(){var e=za(!1),t=e[0];return e=Za.bind(null,e[1]),Ca().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=va,i=Ca();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Mu)throw Error(o(349));0!==(30&pa)||ja(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Va(La.bind(null,r,a,e),[e]),r.flags|=2048,Ba(9,Ra.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=Ca(),t=Mu.identifierPrefix;if(io){var n=Qi;t=":"+t+"R"+(n=(Gi&~(1<<32-at(Gi)-1)).toString(32)+n),0<(n=wa++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=xa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},us={readContext:Co,useCallback:Ga,useContext:Co,useEffect:Wa,useImperativeHandle:qa,useInsertionEffect:Ha,useLayoutEffect:Ya,useMemo:Qa,useReducer:Ta,useRef:Fa,useState:function(){return Ta(Ia)},useDebugValue:$a,useDeferredValue:function(e){return Ja(Pa(),ga.memoizedState,e)},useTransition:function(){return[Ta(Ia)[0],Pa().memoizedState]},useMutableSource:Aa,useSyncExternalStore:Oa,useId:es,unstable_isNewReconciler:!1},ls={readContext:Co,useCallback:Ga,useContext:Co,useEffect:Wa,useImperativeHandle:qa,useInsertionEffect:Ha,useLayoutEffect:Ya,useMemo:Qa,useReducer:Ma,useRef:Fa,useState:function(){return Ma(Ia)},useDebugValue:$a,useDeferredValue:function(e){var t=Pa();return null===ga?t.memoizedState=e:Ja(t,ga.memoizedState,e)},useTransition:function(){return[Ma(Ia)[0],Pa().memoizedState]},useMutableSource:Aa,useSyncExternalStore:Oa,useId:es,unstable_isNewReconciler:!1};function cs(e,t){try{var n="",r=t;do{n+=U(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function ds(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var hs="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=Ro(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hu||(Hu=!0,Yu=r),fs(0,t)},n}function vs(e,t,n){(n=Ro(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){fs(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){fs(0,t),"function"!==typeof r&&(null===Xu?Xu=new Set([this]):Xu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function gs(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new hs;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Cl.bind(null,e,t,n),t.then(e,e))}function ms(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ys(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ro(-1,1)).tag=2,Lo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var bs=w.ReactCurrentOwner,ws=!1;function xs(e,t,n,r){t.child=null===e?Jo(t,null,n,r):Qo(t,e.child,n,r)}function ks(e,t,n,r,i){n=n.render;var o=t.ref;return Eo(t,i),r=_a(e,t,n,r,o,i),n=Ea(),null===e||ws?(io&&n&&eo(t),t.flags|=1,xs(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hs(e,t,i))}function Ss(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||jl(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ll(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,_s(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(a,r)&&e.ref===t.ref)return Hs(e,t,i)}return t.flags|=1,(e=Rl(o,r)).ref=t.ref,e.return=t,t.child=e}function _s(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(ur(o,r)&&e.ref===t.ref){if(ws=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,Hs(e,t,i);0!==(131072&e.flags)&&(ws=!0)}}return Ps(e,t,n,r,i)}function Es(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ci(Ru,ju),ju|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ci(Ru,ju),ju|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Ci(Ru,ju),ju|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ci(Ru,ju),ju|=r;return xs(e,t,i,n),t.child}function Cs(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ps(e,t,n,r,i){var o=Oi(n)?Mi:Ii.current;return o=Ai(t,o),Eo(t,i),n=_a(e,t,n,r,o,i),r=Ea(),null===e||ws?(io&&r&&eo(t),t.flags|=1,xs(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hs(e,t,i))}function Is(e,t,n,r,i){if(Oi(n)){var o=!0;Di(t)}else o=!1;if(Eo(t,i),null===t.stateNode)Ws(e,t),Wo(t,n,r),Yo(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var u=a.context,l=n.contextType;"object"===typeof l&&null!==l?l=Co(l):l=Ai(t,l=Oi(n)?Mi:Ii.current);var c=n.getDerivedStateFromProps,d="function"===typeof c||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||u!==l)&&Ho(t,a,r,l),Ao=!1;var f=t.memoizedState;a.state=f,zo(t,r,a,i),u=t.memoizedState,s!==r||f!==u||Ti.current||Ao?("function"===typeof c&&(Uo(t,n,c,r),u=t.memoizedState),(s=Ao||Vo(t,n,s,r,f,u,l))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=l,r=s):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,jo(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:mo(t.type,s),a.props=l,d=t.pendingProps,f=a.context,"object"===typeof(u=n.contextType)&&null!==u?u=Co(u):u=Ai(t,u=Oi(n)?Mi:Ii.current);var h=n.getDerivedStateFromProps;(c="function"===typeof h||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==d||f!==u)&&Ho(t,a,r,u),Ao=!1,f=t.memoizedState,a.state=f,zo(t,r,a,i);var p=t.memoizedState;s!==d||f!==p||Ti.current||Ao?("function"===typeof h&&(Uo(t,n,h,r),p=t.memoizedState),(l=Ao||Vo(t,n,l,r,f,p,u)||!1)?(c||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,u),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=u,r=l):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Ts(e,t,n,r,o,i)}function Ts(e,t,n,r,i,o){Cs(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&Ni(t,n,!1),Hs(e,t,o);r=t.stateNode,bs.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Qo(t,e.child,null,o),t.child=Qo(t,null,s,o)):xs(e,t,s,o),t.memoizedState=r.state,i&&Ni(t,n,!0),t.child}function Ms(e){var t=e.stateNode;t.pendingContext?Ri(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ri(0,t.context,!1),ia(e,t.containerInfo)}function As(e,t,n,r,i){return po(),vo(i),t.flags|=256,xs(e,t,n,r),t.child}var Os,js,Rs,Ls,Ds={dehydrated:null,treeContext:null,retryLane:0};function Ns(e){return{baseLanes:e,cachePool:null,transitions:null}}function zs(e,t,n){var r,i=t.pendingProps,a=ua.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Ci(ua,1&a),null===e)return lo(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=i.children,e=i.fallback,s?(i=t.mode,s=t.child,u={mode:"hidden",children:u},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=u):s=Nl(u,i,0,null),e=Dl(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ns(n),t.memoizedState=Ds,e):Bs(t,u));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,s){if(n)return 256&t.flags?(t.flags&=-257,Fs(e,t,s,r=ds(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Nl({mode:"visible",children:r.children},i,0,null),(a=Dl(a,i,s,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&Qo(t,e.child,null,s),t.child.memoizedState=Ns(s),t.memoizedState=Ds,a);if(0===(1&t.mode))return Fs(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var u=r.dgst;return r=u,Fs(e,t,s,r=ds(a=Error(o(419)),r,void 0))}if(u=0!==(s&e.childLanes),ws||u){if(null!==(r=Mu)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Mo(e,i),rl(r,e,i,-1))}return gl(),Fs(e,t,s,r=ds(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Il.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,ro=li(i.nextSibling),no=t,io=!0,oo=null,null!==e&&(Xi[qi++]=Gi,Xi[qi++]=Qi,Xi[qi++]=$i,Gi=e.id,Qi=e.overflow,$i=t),t=Bs(t,r.children),t.flags|=4096,t)}(e,t,u,i,r,a,n);if(s){s=i.fallback,u=t.mode,r=(a=e.child).sibling;var l={mode:"hidden",children:i.children};return 0===(1&u)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=l,t.deletions=null):(i=Rl(a,l)).subtreeFlags=14680064&a.subtreeFlags,null!==r?s=Rl(r,s):(s=Dl(s,u,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,u=null===(u=e.child.memoizedState)?Ns(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=e.childLanes&~n,t.memoizedState=Ds,i}return e=(s=e.child).sibling,i=Rl(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Bs(e,t){return(t=Nl({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Fs(e,t,n,r){return null!==r&&vo(r),Qo(t,e.child,null,n),(e=Bs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Us(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),_o(e.return,t,n)}function Ks(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Vs(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(xs(e,t,r.children,n),0!==(2&(r=ua.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Us(e,n,t);else if(19===e.tag)Us(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ci(ua,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===la(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ks(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===la(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ks(t,!0,n,null,o);break;case"together":Ks(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ws(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Nu|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Rl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Rl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ys(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Xs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function qs(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xs(t),null;case 1:case 17:return Oi(t.type)&&ji(),Xs(t),null;case 3:return r=t.stateNode,oa(),Ei(Ti),Ei(Ii),da(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fo(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(sl(oo),oo=null))),js(e,t),Xs(t),null;case 5:sa(t);var i=ra(na.current);if(n=t.type,null!==e&&null!=t.stateNode)Rs(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Xs(t),null}if(e=ra(ea.current),fo(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[fi]=t,r[hi]=a,e=0!==(1&t.mode),n){case"dialog":Br("cancel",r),Br("close",r);break;case"iframe":case"object":case"embed":Br("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Br(Lr[i],r);break;case"source":Br("error",r);break;case"img":case"image":case"link":Br("error",r),Br("load",r);break;case"details":Br("toggle",r);break;case"input":G(r,a),Br("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Br("invalid",r);break;case"textarea":ie(r,a),Br("invalid",r)}for(var u in ye(n,a),i=null,a)if(a.hasOwnProperty(u)){var l=a[u];"children"===u?"string"===typeof l?r.textContent!==l&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,l,e),i=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,l,e),i=["children",""+l]):s.hasOwnProperty(u)&&null!=l&&"onScroll"===u&&Br("scroll",r)}switch(n){case"input":Y(r),Z(r,a,!0);break;case"textarea":Y(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[fi]=t,e[hi]=r,Os(e,t,!1,!1),t.stateNode=e;e:{switch(u=be(n,r),n){case"dialog":Br("cancel",e),Br("close",e),i=r;break;case"iframe":case"object":case"embed":Br("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Br(Lr[i],e);i=r;break;case"source":Br("error",e),i=r;break;case"img":case"image":case"link":Br("error",e),Br("load",e),i=r;break;case"details":Br("toggle",e),i=r;break;case"input":G(e,r),i=$(e,r),Br("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=N({},r,{value:void 0}),Br("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Br("invalid",e)}for(a in ye(n,i),l=i)if(l.hasOwnProperty(a)){var c=l[a];"style"===a?ge(e,c):"dangerouslySetInnerHTML"===a?null!=(c=c?c.__html:void 0)&&de(e,c):"children"===a?"string"===typeof c?("textarea"!==n||""!==c)&&fe(e,c):"number"===typeof c&&fe(e,""+c):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=c&&"onScroll"===a&&Br("scroll",e):null!=c&&b(e,a,c,u))}switch(n){case"input":Y(e),Z(e,r,!1);break;case"textarea":Y(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Xs(t),null;case 6:if(e&&null!=t.stateNode)Ls(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=ra(na.current),ra(ea.current),fo(t)){if(r=t.stateNode,n=t.memoizedProps,r[fi]=t,(a=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fi]=t,t.stateNode=r}return Xs(t),null;case 13:if(Ei(ua),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))ho(),po(),t.flags|=98560,a=!1;else if(a=fo(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(o(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(o(317));a[fi]=t}else po(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Xs(t),a=!1}else null!==oo&&(sl(oo),oo=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ua.current)?0===Lu&&(Lu=3):gl())),null!==t.updateQueue&&(t.flags|=4),Xs(t),null);case 4:return oa(),js(e,t),null===e&&Kr(t.stateNode.containerInfo),Xs(t),null;case 10:return So(t.type._context),Xs(t),null;case 19:if(Ei(ua),null===(a=t.memoizedState))return Xs(t),null;if(r=0!==(128&t.flags),null===(u=a.rendering))if(r)Ys(a,!1);else{if(0!==Lu||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=la(e))){for(t.flags|=128,Ys(a,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(u=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=u.childLanes,a.lanes=u.lanes,a.child=u.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=u.memoizedProps,a.memoizedState=u.memoizedState,a.updateQueue=u.updateQueue,a.type=u.type,e=u.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ci(ua,1&ua.current|2),t.child}e=e.sibling}null!==a.tail&&Qe()>Vu&&(t.flags|=128,r=!0,Ys(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=la(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ys(a,!0),null===a.tail&&"hidden"===a.tailMode&&!u.alternate&&!io)return Xs(t),null}else 2*Qe()-a.renderingStartTime>Vu&&1073741824!==n&&(t.flags|=128,r=!0,Ys(a,!1),t.lanes=4194304);a.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=a.last)?n.sibling=u:t.child=u,a.last=u)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Qe(),t.sibling=null,n=ua.current,Ci(ua,r?1&n|2:1&n),t):(Xs(t),null);case 22:case 23:return fl(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&ju)&&(Xs(t),6&t.subtreeFlags&&(t.flags|=8192)):Xs(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function $s(e,t){switch(to(t),t.tag){case 1:return Oi(t.type)&&ji(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return oa(),Ei(Ti),Ei(Ii),da(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return sa(t),null;case 13:if(Ei(ua),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));po()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(ua),null;case 4:return oa(),null;case 10:return So(t.type._context),null;case 22:case 23:return fl(),null;default:return null}}Os=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},js=function(){},Rs=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,ra(ea.current);var o,a=null;switch(n){case"input":i=$(e,i),r=$(e,r),a=[];break;case"select":i=N({},i,{value:void 0}),r=N({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(c in ye(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var u=i[c];for(o in u)u.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in r){var l=r[c];if(u=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&l!==u&&(null!=l||null!=u))if("style"===c)if(u){for(o in u)!u.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&u[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(a||(a=[]),a.push(c,n)),n=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,u=u?u.__html:void 0,null!=l&&u!==l&&(a=a||[]).push(c,l)):"children"===c?"string"!==typeof l&&"number"!==typeof l||(a=a||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&Br("scroll",e),a||u===l||(a=[])):(a=a||[]).push(c,l))}n&&(a=a||[]).push("style",n);var c=a;(t.updateQueue=c)&&(t.flags|=4)}},Ls=function(e,t,n,r){n!==r&&(t.flags|=4)};var Gs=!1,Qs=!1,Js="function"===typeof WeakSet?WeakSet:Set,Zs=null;function eu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){El(e,t,r)}else n.current=null}function tu(e,t,n){try{n()}catch(r){El(e,t,r)}}var nu=!1;function ru(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&tu(t,n,o)}i=i.next}while(i!==r)}}function iu(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ou(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function au(e){var t=e.alternate;null!==t&&(e.alternate=null,au(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fi],delete t[hi],delete t[vi],delete t[gi],delete t[mi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function su(e){return 5===e.tag||3===e.tag||4===e.tag}function uu(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||su(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function lu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(lu(e,t,n),e=e.sibling;null!==e;)lu(e,t,n),e=e.sibling}function cu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cu(e,t,n),e=e.sibling;null!==e;)cu(e,t,n),e=e.sibling}var du=null,fu=!1;function hu(e,t,n){for(n=n.child;null!==n;)pu(e,t,n),n=n.sibling}function pu(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Qs||eu(n,t);case 6:var r=du,i=fu;du=null,hu(e,t,n),fu=i,null!==(du=r)&&(fu?(e=du,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):du.removeChild(n.stateNode));break;case 18:null!==du&&(fu?(e=du,n=n.stateNode,8===e.nodeType?ui(e.parentNode,n):1===e.nodeType&&ui(e,n),Kt(e)):ui(du,n.stateNode));break;case 4:r=du,i=fu,du=n.stateNode.containerInfo,fu=!0,hu(e,t,n),du=r,fu=i;break;case 0:case 11:case 14:case 15:if(!Qs&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,void 0!==a&&(0!==(2&o)||0!==(4&o))&&tu(n,t,a),i=i.next}while(i!==r)}hu(e,t,n);break;case 1:if(!Qs&&(eu(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){El(n,t,s)}hu(e,t,n);break;case 21:hu(e,t,n);break;case 22:1&n.mode?(Qs=(r=Qs)||null!==n.memoizedState,hu(e,t,n),Qs=r):hu(e,t,n);break;default:hu(e,t,n)}}function vu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Js),t.forEach((function(t){var r=Tl.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function gu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:du=u.stateNode,fu=!1;break e;case 3:case 4:du=u.stateNode.containerInfo,fu=!0;break e}u=u.return}if(null===du)throw Error(o(160));pu(a,s,i),du=null,fu=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(c){El(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)mu(t,e),t=t.sibling}function mu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gu(t,e),yu(e),4&r){try{ru(3,e,e.return),iu(3,e)}catch(g){El(e,e.return,g)}try{ru(5,e,e.return)}catch(g){El(e,e.return,g)}}break;case 1:gu(t,e),yu(e),512&r&&null!==n&&eu(n,n.return);break;case 5:if(gu(t,e),yu(e),512&r&&null!==n&&eu(n,n.return),32&e.flags){var i=e.stateNode;try{fe(i,"")}catch(g){El(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,s=null!==n?n.memoizedProps:a,u=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===u&&"radio"===a.type&&null!=a.name&&Q(i,a),be(u,s);var c=be(u,a);for(s=0;s<l.length;s+=2){var d=l[s],f=l[s+1];"style"===d?ge(i,f):"dangerouslySetInnerHTML"===d?de(i,f):"children"===d?fe(i,f):b(i,d,f,c)}switch(u){case"input":J(i,a);break;case"textarea":oe(i,a);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(i,!!a.multiple,p,!1):h!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[hi]=a}catch(g){El(e,e.return,g)}}break;case 6:if(gu(t,e),yu(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(g){El(e,e.return,g)}}break;case 3:if(gu(t,e),yu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Kt(t.containerInfo)}catch(g){El(e,e.return,g)}break;case 4:default:gu(t,e),yu(e);break;case 13:gu(t,e),yu(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(Ku=Qe())),4&r&&vu(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Qs=(c=Qs)||d,gu(t,e),Qs=c):gu(t,e),yu(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!d&&0!==(1&e.mode))for(Zs=e,d=e.child;null!==d;){for(f=Zs=d;null!==Zs;){switch(p=(h=Zs).child,h.tag){case 0:case 11:case 14:case 15:ru(4,h,h.return);break;case 1:eu(h,h.return);var v=h.stateNode;if("function"===typeof v.componentWillUnmount){r=h,n=h.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(g){El(r,n,g)}}break;case 5:eu(h,h.return);break;case 22:if(null!==h.memoizedState){ku(f);continue}}null!==p?(p.return=h,Zs=p):ku(f)}d=d.sibling}e:for(d=null,f=e;;){if(5===f.tag){if(null===d){d=f;try{i=f.stateNode,c?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(u=f.stateNode,s=void 0!==(l=f.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,u.style.display=ve("display",s))}catch(g){El(e,e.return,g)}}}else if(6===f.tag){if(null===d)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(g){El(e,e.return,g)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:gu(t,e),yu(e),4&r&&vu(e);case 21:}}function yu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(su(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(fe(i,""),r.flags&=-33),cu(e,uu(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;lu(e,uu(e),a);break;default:throw Error(o(161))}}catch(s){El(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bu(e,t,n){Zs=e,wu(e,t,n)}function wu(e,t,n){for(var r=0!==(1&e.mode);null!==Zs;){var i=Zs,o=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Gs;if(!a){var s=i.alternate,u=null!==s&&null!==s.memoizedState||Qs;s=Gs;var l=Qs;if(Gs=a,(Qs=u)&&!l)for(Zs=i;null!==Zs;)u=(a=Zs).child,22===a.tag&&null!==a.memoizedState?Su(i):null!==u?(u.return=a,Zs=u):Su(i);for(;null!==o;)Zs=o,wu(o,t,n),o=o.sibling;Zs=i,Gs=s,Qs=l}xu(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,Zs=o):xu(e)}}function xu(e){for(;null!==Zs;){var t=Zs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qs||iu(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Qs)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:mo(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Bo(t,a,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Bo(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var d=c.memoizedState;if(null!==d){var f=d.dehydrated;null!==f&&Kt(f)}}}break;default:throw Error(o(163))}Qs||512&t.flags&&ou(t)}catch(h){El(t,t.return,h)}}if(t===e){Zs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zs=n;break}Zs=t.return}}function ku(e){for(;null!==Zs;){var t=Zs;if(t===e){Zs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zs=n;break}Zs=t.return}}function Su(e){for(;null!==Zs;){var t=Zs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{iu(4,t)}catch(u){El(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(u){El(t,i,u)}}var o=t.return;try{ou(t)}catch(u){El(t,o,u)}break;case 5:var a=t.return;try{ou(t)}catch(u){El(t,a,u)}}}catch(u){El(t,t.return,u)}if(t===e){Zs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Zs=s;break}Zs=t.return}}var _u,Eu=Math.ceil,Cu=w.ReactCurrentDispatcher,Pu=w.ReactCurrentOwner,Iu=w.ReactCurrentBatchConfig,Tu=0,Mu=null,Au=null,Ou=0,ju=0,Ru=_i(0),Lu=0,Du=null,Nu=0,zu=0,Bu=0,Fu=null,Uu=null,Ku=0,Vu=1/0,Wu=null,Hu=!1,Yu=null,Xu=null,qu=!1,$u=null,Gu=0,Qu=0,Ju=null,Zu=-1,el=0;function tl(){return 0!==(6&Tu)?Qe():-1!==Zu?Zu:Zu=Qe()}function nl(e){return 0===(1&e.mode)?1:0!==(2&Tu)&&0!==Ou?Ou&-Ou:null!==go.transition?(0===el&&(el=vt()),el):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Gt(e.type)}function rl(e,t,n,r){if(50<Qu)throw Qu=0,Ju=null,Error(o(185));mt(e,n,r),0!==(2&Tu)&&e===Mu||(e===Mu&&(0===(2&Tu)&&(zu|=n),4===Lu&&ul(e,Ou)),il(e,r),1===n&&0===Tu&&0===(1&t.mode)&&(Vu=Qe()+500,Bi&&Ki()))}function il(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-at(o),s=1<<a,u=i[a];-1===u?0!==(s&n)&&0===(s&r)||(i[a]=ht(s,t)):u<=t&&(e.expiredLanes|=s),o&=~s}}(e,t);var r=ft(e,e===Mu?Ou:0);if(0===r)null!==n&&qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&qe(n),1===t)0===e.tag?function(e){Bi=!0,Ui(e)}(ll.bind(null,e)):Ui(ll.bind(null,e)),ai((function(){0===(6&Tu)&&Ki()})),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ml(n,ol.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ol(e,t){if(Zu=-1,el=0,0!==(6&Tu))throw Error(o(327));var n=e.callbackNode;if(Sl()&&e.callbackNode!==n)return null;var r=ft(e,e===Mu?Ou:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=ml(e,r);else{t=r;var i=Tu;Tu|=2;var a=vl();for(Mu===e&&Ou===t||(Wu=null,Vu=Qe()+500,hl(e,t));;)try{bl();break}catch(u){pl(e,u)}ko(),Cu.current=a,Tu=i,null!==Au?t=0:(Mu=null,Ou=0,t=Lu)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=al(e,i))),1===t)throw n=Du,hl(e,0),ul(e,r),il(e,Qe()),n;if(6===t)ul(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!sr(o(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=ml(e,r))&&(0!==(a=pt(e))&&(r=a,t=al(e,a))),1===t))throw n=Du,hl(e,0),ul(e,r),il(e,Qe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:kl(e,Uu,Wu);break;case 3:if(ul(e,r),(130023424&r)===r&&10<(t=Ku+500-Qe())){if(0!==ft(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(kl.bind(null,e,Uu,Wu),t);break}kl(e,Uu,Wu);break;case 4:if(ul(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-at(r);a=1<<s,(s=t[s])>i&&(i=s),r&=~a}if(r=i,10<(r=(120>(r=Qe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Eu(r/1960))-r)){e.timeoutHandle=ri(kl.bind(null,e,Uu,Wu),r);break}kl(e,Uu,Wu);break;default:throw Error(o(329))}}}return il(e,Qe()),e.callbackNode===n?ol.bind(null,e):null}function al(e,t){var n=Fu;return e.current.memoizedState.isDehydrated&&(hl(e,t).flags|=256),2!==(e=ml(e,t))&&(t=Uu,Uu=n,null!==t&&sl(t)),e}function sl(e){null===Uu?Uu=e:Uu.push.apply(Uu,e)}function ul(e,t){for(t&=~Bu,t&=~zu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function ll(e){if(0!==(6&Tu))throw Error(o(327));Sl();var t=ft(e,0);if(0===(1&t))return il(e,Qe()),null;var n=ml(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=al(e,r))}if(1===n)throw n=Du,hl(e,0),ul(e,t),il(e,Qe()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,kl(e,Uu,Wu),il(e,Qe()),null}function cl(e,t){var n=Tu;Tu|=1;try{return e(t)}finally{0===(Tu=n)&&(Vu=Qe()+500,Bi&&Ki())}}function dl(e){null!==$u&&0===$u.tag&&0===(6&Tu)&&Sl();var t=Tu;Tu|=1;var n=Iu.transition,r=bt;try{if(Iu.transition=null,bt=1,e)return e()}finally{bt=r,Iu.transition=n,0===(6&(Tu=t))&&Ki()}}function fl(){ju=Ru.current,Ei(Ru)}function hl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Au)for(n=Au.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&ji();break;case 3:oa(),Ei(Ti),Ei(Ii),da();break;case 5:sa(r);break;case 4:oa();break;case 13:case 19:Ei(ua);break;case 10:So(r.type._context);break;case 22:case 23:fl()}n=n.return}if(Mu=e,Au=e=Rl(e.current,null),Ou=ju=t,Lu=0,Du=null,Bu=zu=Nu=0,Uu=Fu=null,null!==Po){for(t=0;t<Po.length;t++)if(null!==(r=(n=Po[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var a=o.next;o.next=i,r.next=a}n.pending=r}Po=null}return e}function pl(e,t){for(;;){var n=Au;try{if(ko(),fa.current=as,ya){for(var r=va.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ya=!1}if(pa=0,ma=ga=va=null,ba=!1,wa=0,Pu.current=null,null===n||null===n.return){Lu=1,Du=t,Au=null;break}e:{var a=e,s=n.return,u=n,l=t;if(t=Ou,u.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var c=l,d=u,f=d.tag;if(0===(1&d.mode)&&(0===f||11===f||15===f)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=ms(s);if(null!==p){p.flags&=-257,ys(p,s,u,0,t),1&p.mode&&gs(a,c,t),l=c;var v=(t=p).updateQueue;if(null===v){var g=new Set;g.add(l),t.updateQueue=g}else v.add(l);break e}if(0===(1&t)){gs(a,c,t),gl();break e}l=Error(o(426))}else if(io&&1&u.mode){var m=ms(s);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),ys(m,s,u,0,t),vo(cs(l,u));break e}}a=l=cs(l,u),4!==Lu&&(Lu=2),null===Fu?Fu=[a]:Fu.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,No(a,ps(0,l,t));break e;case 1:u=l;var y=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Xu||!Xu.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,No(a,vs(a,u,t));break e}}a=a.return}while(null!==a)}xl(n)}catch(w){t=w,Au===n&&null!==n&&(Au=n=n.return);continue}break}}function vl(){var e=Cu.current;return Cu.current=as,null===e?as:e}function gl(){0!==Lu&&3!==Lu&&2!==Lu||(Lu=4),null===Mu||0===(268435455&Nu)&&0===(268435455&zu)||ul(Mu,Ou)}function ml(e,t){var n=Tu;Tu|=2;var r=vl();for(Mu===e&&Ou===t||(Wu=null,hl(e,t));;)try{yl();break}catch(i){pl(e,i)}if(ko(),Tu=n,Cu.current=r,null!==Au)throw Error(o(261));return Mu=null,Ou=0,Lu}function yl(){for(;null!==Au;)wl(Au)}function bl(){for(;null!==Au&&!$e();)wl(Au)}function wl(e){var t=_u(e.alternate,e,ju);e.memoizedProps=e.pendingProps,null===t?xl(e):Au=t,Pu.current=null}function xl(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=qs(n,t,ju)))return void(Au=n)}else{if(null!==(n=$s(n,t)))return n.flags&=32767,void(Au=n);if(null===e)return Lu=6,void(Au=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Au=t);Au=t=e}while(null!==t);0===Lu&&(Lu=5)}function kl(e,t,n){var r=bt,i=Iu.transition;try{Iu.transition=null,bt=1,function(e,t,n,r){do{Sl()}while(null!==$u);if(0!==(6&Tu))throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,a),e===Mu&&(Au=Mu=null,Ou=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||qu||(qu=!0,Ml(tt,(function(){return Sl(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Iu.transition,Iu.transition=null;var s=bt;bt=1;var u=Tu;Tu|=4,Pu.current=null,function(e,t){if(ei=Wt,hr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(x){n=null;break e}var s=0,u=-1,l=-1,c=0,d=0,f=e,h=null;t:for(;;){for(var p;f!==n||0!==i&&3!==f.nodeType||(u=s+i),f!==a||0!==r&&3!==f.nodeType||(l=s+r),3===f.nodeType&&(s+=f.nodeValue.length),null!==(p=f.firstChild);)h=f,f=p;for(;;){if(f===e)break t;if(h===n&&++c===i&&(u=s),h===a&&++d===r&&(l=s),null!==(p=f.nextSibling))break;h=(f=h).parentNode}f=p}n=-1===u||-1===l?null:{start:u,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Zs=t;null!==Zs;)if(e=(t=Zs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zs=e;else for(;null!==Zs;){t=Zs;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var g=v.memoizedProps,m=v.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:mo(t.type,g),m);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(o(163))}}catch(x){El(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Zs=e;break}Zs=t.return}v=nu,nu=!1}(e,n),mu(n,e),pr(ti),Wt=!!ei,ti=ei=null,e.current=n,bu(n,e,i),Ge(),Tu=u,bt=s,Iu.transition=a}else e.current=n;if(qu&&(qu=!1,$u=e,Gu=i),a=e.pendingLanes,0===a&&(Xu=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),il(e,Qe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hu)throw Hu=!1,e=Yu,Yu=null,e;0!==(1&Gu)&&0!==e.tag&&Sl(),a=e.pendingLanes,0!==(1&a)?e===Ju?Qu++:(Qu=0,Ju=e):Qu=0,Ki()}(e,t,n,r)}finally{Iu.transition=i,bt=r}return null}function Sl(){if(null!==$u){var e=wt(Gu),t=Iu.transition,n=bt;try{if(Iu.transition=null,bt=16>e?16:e,null===$u)var r=!1;else{if(e=$u,$u=null,Gu=0,0!==(6&Tu))throw Error(o(331));var i=Tu;for(Tu|=4,Zs=e.current;null!==Zs;){var a=Zs,s=a.child;if(0!==(16&Zs.flags)){var u=a.deletions;if(null!==u){for(var l=0;l<u.length;l++){var c=u[l];for(Zs=c;null!==Zs;){var d=Zs;switch(d.tag){case 0:case 11:case 15:ru(8,d,a)}var f=d.child;if(null!==f)f.return=d,Zs=f;else for(;null!==Zs;){var h=(d=Zs).sibling,p=d.return;if(au(d),d===c){Zs=null;break}if(null!==h){h.return=p,Zs=h;break}Zs=p}}}var v=a.alternate;if(null!==v){var g=v.child;if(null!==g){v.child=null;do{var m=g.sibling;g.sibling=null,g=m}while(null!==g)}}Zs=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,Zs=s;else e:for(;null!==Zs;){if(0!==(2048&(a=Zs).flags))switch(a.tag){case 0:case 11:case 15:ru(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,Zs=y;break e}Zs=a.return}}var b=e.current;for(Zs=b;null!==Zs;){var w=(s=Zs).child;if(0!==(2064&s.subtreeFlags)&&null!==w)w.return=s,Zs=w;else e:for(s=b;null!==Zs;){if(0!==(2048&(u=Zs).flags))try{switch(u.tag){case 0:case 11:case 15:iu(9,u)}}catch(k){El(u,u.return,k)}if(u===s){Zs=null;break e}var x=u.sibling;if(null!==x){x.return=u.return,Zs=x;break e}Zs=u.return}}if(Tu=i,Ki(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(k){}r=!0}return r}finally{bt=n,Iu.transition=t}}return!1}function _l(e,t,n){e=Lo(e,t=ps(0,t=cs(n,t),1),1),t=tl(),null!==e&&(mt(e,1,t),il(e,t))}function El(e,t,n){if(3===e.tag)_l(e,e,n);else for(;null!==t;){if(3===t.tag){_l(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Xu||!Xu.has(r))){t=Lo(t,e=vs(t,e=cs(n,e),1),1),e=tl(),null!==t&&(mt(t,1,e),il(t,e));break}}t=t.return}}function Cl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tl(),e.pingedLanes|=e.suspendedLanes&n,Mu===e&&(Ou&n)===n&&(4===Lu||3===Lu&&(130023424&Ou)===Ou&&500>Qe()-Ku?hl(e,0):Bu|=n),il(e,t)}function Pl(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=tl();null!==(e=Mo(e,t))&&(mt(e,t,n),il(e,n))}function Il(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Pl(e,n)}function Tl(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),Pl(e,n)}function Ml(e,t){return Xe(e,t)}function Al(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ol(e,t,n,r){return new Al(e,t,n,r)}function jl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rl(e,t){var n=e.alternate;return null===n?((n=Ol(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ll(e,t,n,r,i,a){var s=2;if(r=e,"function"===typeof e)jl(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case S:return Dl(n.children,i,a,t);case _:s=8,i|=8;break;case E:return(e=Ol(12,n,t,2|i)).elementType=E,e.lanes=a,e;case T:return(e=Ol(13,n,t,i)).elementType=T,e.lanes=a,e;case M:return(e=Ol(19,n,t,i)).elementType=M,e.lanes=a,e;case j:return Nl(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:s=10;break e;case P:s=9;break e;case I:s=11;break e;case A:s=14;break e;case O:s=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Ol(s,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Dl(e,t,n,r){return(e=Ol(7,e,r,t)).lanes=n,e}function Nl(e,t,n,r){return(e=Ol(22,e,r,t)).elementType=j,e.lanes=n,e.stateNode={isHidden:!1},e}function zl(e,t,n){return(e=Ol(6,e,null,t)).lanes=n,e}function Bl(e,t,n){return(t=Ol(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fl(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Ul(e,t,n,r,i,o,a,s,u){return e=new Fl(e,t,n,s,u),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Ol(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oo(o),e}function Kl(e){if(!e)return Pi;e:{if(Ke(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Oi(n))return Li(e,n,t)}return t}function Vl(e,t,n,r,i,o,a,s,u){return(e=Ul(n,r,!0,e,0,o,0,s,u)).context=Kl(null),n=e.current,(o=Ro(r=tl(),i=nl(n))).callback=void 0!==t&&null!==t?t:null,Lo(n,o,i),e.current.lanes=i,mt(e,i,r),il(e,r),e}function Wl(e,t,n,r){var i=t.current,o=tl(),a=nl(i);return n=Kl(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ro(o,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Lo(i,t,a))&&(rl(e,i,a,o),Do(e,i,a)),a}function Hl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Yl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Xl(e,t){Yl(e,t),(e=e.alternate)&&Yl(e,t)}_u=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ti.current)ws=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ws=!1,function(e,t,n){switch(t.tag){case 3:Ms(t),po();break;case 5:aa(t);break;case 1:Oi(t.type)&&Di(t);break;case 4:ia(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ci(yo,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ci(ua,1&ua.current),t.flags|=128,null):0!==(n&t.child.childLanes)?zs(e,t,n):(Ci(ua,1&ua.current),null!==(e=Hs(e,t,n))?e.sibling:null);Ci(ua,1&ua.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Vs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ci(ua,ua.current),r)break;return null;case 22:case 23:return t.lanes=0,Es(e,t,n)}return Hs(e,t,n)}(e,t,n);ws=0!==(131072&e.flags)}else ws=!1,io&&0!==(1048576&t.flags)&&Zi(t,Yi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ws(e,t),e=t.pendingProps;var i=Ai(t,Ii.current);Eo(t,n),i=_a(null,t,r,e,i,n);var a=Ea();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oi(r)?(a=!0,Di(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Oo(t),i.updater=Ko,t.stateNode=i,i._reactInternals=t,Yo(t,r,e,n),t=Ts(null,t,r,!0,a,n)):(t.tag=0,io&&a&&eo(t),xs(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ws(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return jl(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===A)return 14}return 2}(r),e=mo(r,e),i){case 0:t=Ps(null,t,r,e,n);break e;case 1:t=Is(null,t,r,e,n);break e;case 11:t=ks(null,t,r,e,n);break e;case 14:t=Ss(null,t,r,mo(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ps(e,t,r,i=t.elementType===r?i:mo(r,i),n);case 1:return r=t.type,i=t.pendingProps,Is(e,t,r,i=t.elementType===r?i:mo(r,i),n);case 3:e:{if(Ms(t),null===e)throw Error(o(387));r=t.pendingProps,i=(a=t.memoizedState).element,jo(e,t),zo(t,r,null,n);var s=t.memoizedState;if(r=s.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=As(e,t,r,n,i=cs(Error(o(423)),t));break e}if(r!==i){t=As(e,t,r,n,i=cs(Error(o(424)),t));break e}for(ro=li(t.stateNode.containerInfo.firstChild),no=t,io=!0,oo=null,n=Jo(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(po(),r===i){t=Hs(e,t,n);break e}xs(e,t,r,n)}t=t.child}return t;case 5:return aa(t),null===e&&lo(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==a&&ni(r,a)&&(t.flags|=32),Cs(e,t),xs(e,t,s,n),t.child;case 6:return null===e&&lo(t),null;case 13:return zs(e,t,n);case 4:return ia(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Qo(t,null,r,n):xs(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ks(e,t,r,i=t.elementType===r?i:mo(r,i),n);case 7:return xs(e,t,t.pendingProps,n),t.child;case 8:case 12:return xs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value,Ci(yo,r._currentValue),r._currentValue=s,null!==a)if(sr(a.value,s)){if(a.children===i.children&&!Ti.current){t=Hs(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var u=a.dependencies;if(null!==u){s=a.child;for(var l=u.firstContext;null!==l;){if(l.context===r){if(1===a.tag){(l=Ro(-1,n&-n)).tag=2;var c=a.updateQueue;if(null!==c){var d=(c=c.shared).pending;null===d?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),_o(a.return,n,t),u.lanes|=n;break}l=l.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),_o(s,n,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}xs(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Eo(t,n),r=r(i=Co(i)),t.flags|=1,xs(e,t,r,n),t.child;case 14:return i=mo(r=t.type,t.pendingProps),Ss(e,t,r,i=mo(r.type,i),n);case 15:return _s(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:mo(r,i),Ws(e,t),t.tag=1,Oi(r)?(e=!0,Di(t)):e=!1,Eo(t,n),Wo(t,r,i),Yo(t,r,i,n),Ts(null,t,r,!0,e,n);case 19:return Vs(e,t,n);case 22:return Es(e,t,n)}throw Error(o(156,t.tag))};var ql="function"===typeof reportError?reportError:function(e){console.error(e)};function $l(e){this._internalRoot=e}function Gl(e){this._internalRoot=e}function Ql(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zl(){}function ec(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if("function"===typeof i){var s=i;i=function(){var e=Hl(a);s.call(e)}}Wl(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=Hl(a);o.call(e)}}var a=Vl(t,r,e,0,null,!1,0,"",Zl);return e._reactRootContainer=a,e[pi]=a.current,Kr(8===e.nodeType?e.parentNode:e),dl(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Hl(u);s.call(e)}}var u=Ul(e,0,!1,null,0,!1,0,"",Zl);return e._reactRootContainer=u,e[pi]=u.current,Kr(8===e.nodeType?e.parentNode:e),dl((function(){Wl(t,u,n,r)})),u}(n,t,e,i,r);return Hl(a)}Gl.prototype.render=$l.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Wl(e,t,null,null)},Gl.prototype.unmount=$l.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dl((function(){Wl(null,e,null,null)})),t[pi]=null}},Gl.prototype.unstable_scheduleHydration=function(e){if(e){var t=_t();e={blockedOn:null,target:e,priority:t};for(var n=0;n<jt.length&&0!==t&&t<jt[n].priority;n++);jt.splice(n,0,e),0===n&&Nt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),il(t,Qe()),0===(6&Tu)&&(Vu=Qe()+500,Ki()))}break;case 13:dl((function(){var t=Mo(e,1);if(null!==t){var n=tl();rl(t,e,1,n)}})),Xl(e,1)}},kt=function(e){if(13===e.tag){var t=Mo(e,134217728);if(null!==t)rl(t,e,134217728,tl());Xl(e,134217728)}},St=function(e){if(13===e.tag){var t=nl(e),n=Mo(e,t);if(null!==n)rl(n,e,t,tl());Xl(e,t)}},_t=function(){return bt},Et=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},ke=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=xi(r);if(!i)throw Error(o(90));X(r),J(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=cl,Te=dl;var tc={usingClientEntryPoint:!1,Events:[bi,wi,xi,Ce,Pe,cl]},nc={findFiberByHostInstance:yi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rc={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{it=ic.inject(rc),ot=ic}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Ql(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Ql(e))throw Error(o(299));var n=!1,r="",i=ql;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Ul(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Kr(8===e.nodeType?e.parentNode:e),new $l(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return dl(e)},t.hydrate=function(e,t,n){if(!Jl(t))throw Error(o(200));return ec(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Ql(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",s=ql;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Vl(t,null,e,1,null!=n?n:null,i,0,a,s),e[pi]=t.current,Kr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Gl(t)},t.render=function(e,t,n){if(!Jl(t))throw Error(o(200));return ec(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jl(e))throw Error(o(40));return!!e._reactRootContainer&&(dl((function(){ec(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cl,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jl(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return ec(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},1250:function(e,t,n){"use strict";var r=n(4164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},4164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},5778:function(e,t,n){"use strict";var r,i=n(8810),o=(r=i)&&r.__esModule?r:{default:r};Number.isInteger=Number.isInteger||function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e},t.Z=o.default},8810:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=s(n(6600)),o=s(n(2007)),a=s(n(4683));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var l=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={highestStarHovered:-1/0},r.fillId="starGrad"+Math.random().toFixed(15).slice(2),r.hoverOverStar=function(e){return function(){r.setState({highestStarHovered:e})}},r.unHoverOverStar=function(){r.setState({highestStarHovered:-1/0})},u(r,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"stopColorStyle",value:function(e){var t={stopColor:e,stopOpacity:"1"};return this.props.ignoreInlineStyles?{}:t}},{key:"render",value:function(){var e=this.props,t=e.starRatedColor,n=e.starEmptyColor;return i.default.createElement("div",{className:"star-ratings",title:this.titleText,style:this.starRatingsStyle},i.default.createElement("svg",{className:"star-grad",style:this.starGradientStyle},i.default.createElement("defs",null,i.default.createElement("linearGradient",{id:this.fillId,x1:"0%",y1:"0%",x2:"100%",y2:"0%"},i.default.createElement("stop",{offset:"0%",className:"stop-color-first",style:this.stopColorStyle(t)}),i.default.createElement("stop",{offset:this.offsetValue,className:"stop-color-first",style:this.stopColorStyle(t)}),i.default.createElement("stop",{offset:this.offsetValue,className:"stop-color-final",style:this.stopColorStyle(n)}),i.default.createElement("stop",{offset:"100%",className:"stop-color-final",style:this.stopColorStyle(n)})))),this.renderStars)}},{key:"starRatingsStyle",get:function(){return this.props.ignoreInlineStyles?{}:{position:"relative",boxSizing:"border-box",display:"inline-block"}}},{key:"starGradientStyle",get:function(){return this.props.ignoreInlineStyles?{}:{position:"absolute",zIndex:"0",width:"0",height:"0",visibility:"hidden"}}},{key:"titleText",get:function(){var e=this.props,t=e.typeOfWidget,n=e.rating,r=this.state.highestStarHovered,i=r>0?r:n,o=parseFloat(i.toFixed(2)).toString();Number.isInteger(i)&&(o=String(i));var a=t+"s";return"1"===o&&(a=t),o+" "+a}},{key:"offsetValue",get:function(){var e=this.props.rating,t="0%";Number.isInteger(e)||(t=e.toFixed(2).split(".")[1].slice(0,2)+"%");return t}},{key:"renderStars",get:function(){var e=this,t=this.props,n=t.changeRating,r=t.rating,o=t.numberOfStars,s=t.starDimension,u=t.starSpacing,l=t.starRatedColor,c=t.starEmptyColor,d=t.starHoverColor,f=t.gradientPathName,h=t.ignoreInlineStyles,p=t.svgIconPath,v=t.svgIconViewBox,g=t.name,m=this.state.highestStarHovered;return Array.apply(null,Array(o)).map((function(t,y){var b=y+1,w=b<=r,x=m>0,k=b<=m,S=b===m,_=b>r&&b-1<r,E=1===b,C=b===o;return i.default.createElement(a.default,{key:b,fillId:e.fillId,changeRating:n?function(){return n(b,g)}:null,hoverOverStar:n?e.hoverOverStar(b):null,unHoverOverStar:n?e.unHoverOverStar:null,isStarred:w,isPartiallyFullStar:_,isHovered:k,hoverMode:x,isCurrentHoveredStar:S,isFirstStar:E,isLastStar:C,starDimension:s,starSpacing:u,starHoverColor:d,starRatedColor:l,starEmptyColor:c,gradientPathName:f,ignoreInlineStyles:h,svgIconPath:p,svgIconViewBox:v})}))}}]),t}(i.default.Component);l.propTypes={rating:o.default.number.isRequired,numberOfStars:o.default.number.isRequired,changeRating:o.default.func,starHoverColor:o.default.string.isRequired,starRatedColor:o.default.string.isRequired,starEmptyColor:o.default.string.isRequired,starDimension:o.default.string.isRequired,starSpacing:o.default.string.isRequired,gradientPathName:o.default.string.isRequired,ignoreInlineStyles:o.default.bool.isRequired,svgIconPath:o.default.string.isRequired,svgIconViewBox:o.default.string.isRequired,name:o.default.string},l.defaultProps={rating:0,typeOfWidget:"Star",numberOfStars:5,changeRating:null,starHoverColor:"rgb(230, 67, 47)",starRatedColor:"rgb(109, 122, 130)",starEmptyColor:"rgb(203, 211, 227)",starDimension:"50px",starSpacing:"7px",gradientPathName:"",ignoreInlineStyles:!1,svgIconPath:"m25,1 6,17h18l-14,11 5,17-15-10-15,10 5-17-14-11h18z",svgIconViewBox:"0 0 51 48"},t.default=l},4683:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=s(n(6600)),o=s(n(1694)),a=s(n(2007));function s(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"render",value:function(){var e=this.props,t=e.changeRating,n=e.hoverOverStar,r=e.unHoverOverStar,o=e.svgIconViewBox,a=e.svgIconPath;return i.default.createElement("div",{className:"star-container",style:this.starContainerStyle,onMouseEnter:n,onMouseLeave:r,onClick:t},i.default.createElement("svg",{viewBox:o,className:this.starClasses,style:this.starSvgStyle},i.default.createElement("path",{className:"star",style:this.pathStyle,d:a})))}},{key:"starContainerStyle",get:function(){var e=this.props,t=e.changeRating,n=e.starSpacing,r=e.isFirstStar,i=e.isLastStar;return e.ignoreInlineStyles?{}:{position:"relative",display:"inline-block",verticalAlign:"middle",paddingLeft:r?void 0:n,paddingRight:i?void 0:n,cursor:t?"pointer":void 0}}},{key:"starSvgStyle",get:function(){var e=this.props,t=e.ignoreInlineStyles,n=e.isCurrentHoveredStar,r=e.starDimension;return t?{}:{width:r,height:r,transition:"transform .2s ease-in-out",transform:n?"scale(1.1)":void 0}}},{key:"pathStyle",get:function(){var e=this.props,t=e.isStarred,n=e.isPartiallyFullStar,r=e.isHovered,i=e.hoverMode,o=e.starEmptyColor,a=e.starRatedColor,s=e.starHoverColor,u=e.gradientPathName,l=e.fillId,c=void 0;return c=i?r?s:o:n?"url('"+u+"#"+l+"')":t?a:o,e.ignoreInlineStyles?{}:{fill:c,transition:"fill .2s ease-in-out"}}},{key:"starClasses",get:function(){var e=this.props,t=e.isSelected,n=e.isPartiallyFullStar,r=e.isHovered,i=e.isCurrentHoveredStar,a=e.ignoreInlineStyles,s=(0,o.default)({"widget-svg":!0,"widget-selected":t,"multi-widget-selected":n,hovered:r,"current-hovered":i});return a?{}:s}}]),t}(i.default.Component);u.propTypes={fillId:a.default.string.isRequired,changeRating:a.default.func,hoverOverStar:a.default.func,unHoverOverStar:a.default.func,isStarred:a.default.bool.isRequired,isPartiallyFullStar:a.default.bool.isRequired,isHovered:a.default.bool.isRequired,hoverMode:a.default.bool.isRequired,isCurrentHoveredStar:a.default.bool.isRequired,isFirstStar:a.default.bool.isRequired,isLastStar:a.default.bool.isRequired,starDimension:a.default.string.isRequired,starSpacing:a.default.string.isRequired,starHoverColor:a.default.string.isRequired,starRatedColor:a.default.string.isRequired,starEmptyColor:a.default.string.isRequired,gradientPathName:a.default.string.isRequired,ignoreInlineStyles:a.default.bool.isRequired,svgIconPath:a.default.string.isRequired,svgIconViewBox:a.default.string.isRequired},t.default=u},7381:function(e,t,n){"use strict";var r=n(1725),i="function"===typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,a=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,u=i?Symbol.for("react.strict_mode"):60108,l=i?Symbol.for("react.profiler"):60114,c=i?Symbol.for("react.provider"):60109,d=i?Symbol.for("react.context"):60110,f=i?Symbol.for("react.forward_ref"):60112,h=i?Symbol.for("react.suspense"):60113,p=i?Symbol.for("react.memo"):60115,v=i?Symbol.for("react.lazy"):60116,g="function"===typeof Symbol&&Symbol.iterator;function m(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b={};function w(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||y}function x(){}function k(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||y}w.prototype.isReactComponent={},w.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(m(85));this.updater.enqueueSetState(this,e,t,"setState")},w.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},x.prototype=w.prototype;var S=k.prototype=new x;S.constructor=k,r(S,w.prototype),S.isPureReactComponent=!0;var _={current:null},E=Object.prototype.hasOwnProperty,C={key:!0,ref:!0,__self:!0,__source:!0};function P(e,t,n){var r,i={},a=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)E.call(t,r)&&!C.hasOwnProperty(r)&&(i[r]=t[r]);var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}if(e&&e.defaultProps)for(r in u=e.defaultProps)void 0===i[r]&&(i[r]=u[r]);return{$$typeof:o,type:e,key:a,ref:s,props:i,_owner:_.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===o}var T=/\/+/g,M=[];function A(e,t,n,r){if(M.length){var i=M.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function O(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>M.length&&M.push(e)}function j(e,t,n,r){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var s=!1;if(null===e)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case o:case a:s=!0}}if(s)return n(r,e,""===t?"."+L(e,0):t),1;if(s=0,t=""===t?".":t+":",Array.isArray(e))for(var u=0;u<e.length;u++){var l=t+L(i=e[u],u);s+=j(i,l,n,r)}else if(null===e||"object"!==typeof e?l=null:l="function"===typeof(l=g&&e[g]||e["@@iterator"])?l:null,"function"===typeof l)for(e=l.call(e),u=0;!(i=e.next()).done;)s+=j(i=i.value,l=t+L(i,u++),n,r);else if("object"===i)throw n=""+e,Error(m(31,"[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n,""));return s}function R(e,t,n){return null==e?0:j(e,"",t,n)}function L(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function D(e,t){e.func.call(e.context,t,e.count++)}function N(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?z(e,r,n,(function(e){return e})):null!=e&&(I(e)&&(e=function(e,t){return{$$typeof:o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(T,"$&/")+"/")+n)),r.push(e))}function z(e,t,n,r,i){var o="";null!=n&&(o=(""+n).replace(T,"$&/")+"/"),R(e,N,t=A(t,o,r,i)),O(t)}var B={current:null};function F(){var e=B.current;if(null===e)throw Error(m(321));return e}var U={ReactCurrentDispatcher:B,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:_,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:function(e,t,n){if(null==e)return e;var r=[];return z(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;R(e,D,t=A(null,null,t,n)),O(t)},count:function(e){return R(e,(function(){return null}),null)},toArray:function(e){var t=[];return z(e,t,null,(function(e){return e})),t},only:function(e){if(!I(e))throw Error(m(143));return e}},t.Component=w,t.Fragment=s,t.Profiler=l,t.PureComponent=k,t.StrictMode=u,t.Suspense=h,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(m(267,e));var i=r({},e.props),a=e.key,s=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,u=_.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)E.call(t,c)&&!C.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];i.children=l}return{$$typeof:o,type:e.type,key:a,ref:s,props:i,_owner:u}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:d,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:c,_context:e},e.Consumer=e},t.createElement=P,t.createFactory=function(e){var t=P.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:f,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:v,_ctor:e,_status:-1,_result:null}},t.memo=function(e,t){return{$$typeof:p,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return F().useCallback(e,t)},t.useContext=function(e,t){return F().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return F().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return F().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return F().useLayoutEffect(e,t)},t.useMemo=function(e,t){return F().useMemo(e,t)},t.useReducer=function(e,t,n){return F().useReducer(e,t,n)},t.useRef=function(e){return F().useRef(e)},t.useState=function(e){return F().useState(e)},t.version="16.14.0"},6600:function(e,t,n){"use strict";e.exports=n(7381)},6374:function(e,t,n){"use strict";var r=n(2791),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,o={},l=null,c=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(c=t.ref),t)a.call(t,r)&&!u.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:l,ref:c,props:o,_owner:s.current}}t.Fragment=o,t.jsx=l,t.jsxs=l},9117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,g={};function m(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=m.prototype;var w=b.prototype=new y;w.constructor=b,v(w,m.prototype),w.isPureReactComponent=!0;var x=Array.isArray,k=Object.prototype.hasOwnProperty,S={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,o={},a=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)k.call(t,i)&&!_.hasOwnProperty(i)&&(o[i]=t[i]);var u=arguments.length-2;if(1===u)o.children=r;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];o.children=l}if(e&&e.defaultProps)for(i in u=e.defaultProps)void 0===o[i]&&(o[i]=u[i]);return{$$typeof:n,type:e,key:a,ref:s,props:o,_owner:S.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var P=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function T(e,t,i,o,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return a=a(u=e),e=""===o?"."+I(u,0):o,x(a)?(i="",null!=e&&(i=e.replace(P,"$&/")+"/"),T(a,t,i,"",(function(e){return e}))):null!=a&&(C(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||u&&u.key===a.key?"":(""+a.key).replace(P,"$&/")+"/")+e)),t.push(a)),1;if(u=0,o=""===o?".":o+":",x(e))for(var l=0;l<e.length;l++){var c=o+I(s=e[l],l);u+=T(s,t,i,c,a)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),l=0;!(s=e.next()).done;)u+=T(s=s.value,t,i,c=o+I(s,l++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function M(e,t,n){if(null==e)return e;var r=[],i=0;return T(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},j={transition:null},R={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:j,ReactCurrentOwner:S};t.Children={map:M,forEach:function(e,t,n){M(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return M(e,(function(){t++})),t},toArray:function(e){return M(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=a,t.PureComponent=b,t.StrictMode=o,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),o=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=S.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(l in t)k.call(t,l)&&!_.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==u?u[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){u=Array(l);for(var c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}return{$$typeof:n,type:e.type,key:o,ref:a,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=j.transition;j.transition={};try{e()}finally{j.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,n){return O.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,n){return O.current.useReducer(e,t,n)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return O.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return O.current.useTransition()},t.version="18.2.0"},2791:function(e,t,n){"use strict";e.exports=n(9117)},184:function(e,t,n){"use strict";e.exports=n(6374)},6813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var s=2*(r+1)-1,u=e[s],l=s+1,c=e[l];if(0>o(u,n))l<i&&0>o(c,u)?(e[r]=c,e[l]=n,r=l):(e[r]=u,e[s]=n,r=s);else{if(!(l<i&&0>o(c,n)))break e;e[r]=c,e[l]=n,r=l}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var l=[],c=[],d=1,f=null,h=3,p=!1,v=!1,g=!1,m="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(l,t)}t=r(c)}}function x(e){if(g=!1,w(e),!v)if(null!==r(l))v=!0,j(k);else{var t=r(c);null!==t&&R(x,t.startTime-e)}}function k(e,n){v=!1,g&&(g=!1,y(C),C=-1),p=!0;var o=h;try{for(w(n),f=r(l);null!==f&&(!(f.expirationTime>n)||e&&!T());){var a=f.callback;if("function"===typeof a){f.callback=null,h=f.priorityLevel;var s=a(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?f.callback=s:f===r(l)&&i(l),w(n)}else i(l);f=r(l)}if(null!==f)var u=!0;else{var d=r(c);null!==d&&R(x,d.startTime-n),u=!1}return u}finally{f=null,h=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,_=!1,E=null,C=-1,P=5,I=-1;function T(){return!(t.unstable_now()-I<P)}function M(){if(null!==E){var e=t.unstable_now();I=e;var n=!0;try{n=E(!0,e)}finally{n?S():(_=!1,E=null)}}else _=!1}if("function"===typeof b)S=function(){b(M)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,O=A.port2;A.port1.onmessage=M,S=function(){O.postMessage(null)}}else S=function(){m(M,0)};function j(e){E=e,_||(_=!0,S())}function R(e,n){C=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,j(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},t.unstable_scheduleCallback=function(e,i,o){var a=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(e.sortIndex=o,n(c,e),null===r(l)&&e===r(c)&&(g?(y(C),C=-1):g=!0,R(x,o-a))):(e.sortIndex=s,n(l,e),v||p||(v=!0,j(k))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}},5296:function(e,t,n){"use strict";e.exports=n(6813)},6115:function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},6690:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},9728:function(e,t,n){var r=n(4062);function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,r(i.key),i)}}e.exports=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},6389:function(e,t,n){var r=n(3808),i=n(9617),o=n(4993);e.exports=function(e){var t=i();return function(){var n,i=r(e);if(t){var a=r(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return o(this,n)}},e.exports.__esModule=!0,e.exports.default=e.exports},3808:function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},1655:function(e,t,n){var r=n(6015);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},9617:function(e){e.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},e.exports.__esModule=!0,e.exports.default=e.exports},4993:function(e,t,n){var r=n(8698).default,i=n(6115);e.exports=function(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return i(e)},e.exports.__esModule=!0,e.exports.default=e.exports},6015:function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},5036:function(e,t,n){var r=n(8698).default;e.exports=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},4062:function(e,t,n){var r=n(8698).default,i=n(5036);e.exports=function(e){var t=i(e,"string");return"symbol"===r(t)?t:String(t)},e.exports.__esModule=!0,e.exports.default=e.exports},8698:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}!function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){a[e]=function(){return r[e]}}));return a.default=function(){return r},n.d(o,a),o}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},n.nc=void 0,function(){"use strict";var e={};n.r(e),n.d(e,{ArrayOfValidator:function(){return Te},DictValidator:function(){return Oe},ObjectValidator:function(){return Me},UnionValidator:function(){return Ae},ValidationError:function(){return Ee},Validator:function(){return Ie},any:function(){return Le},array:function(){return Ye},arrayOf:function(){return Xe},bigint:function(){return We},boolean:function(){return Ve},dict:function(){return Ge},integer:function(){return Fe},literal:function(){return He},literalEnum:function(){return nt},model:function(){return Je},nonZeroInteger:function(){return Ke},nonZeroNumber:function(){return Be},nullable:function(){return tt},number:function(){return Ne},object:function(){return $e},optional:function(){return et},positiveInteger:function(){return Ue},positiveNumber:function(){return ze},setEnum:function(){return Ze},string:function(){return De},union:function(){return Qe},unknown:function(){return Re},unknownObject:function(){return qe}});var t=n(2791),r=n.t(t,2),i=n(1250);n(8624),n(9743),n(5470),n(2330),n(447),n(4178);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function s(e,t){if(e){if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function u(e){return function(e){if(Array.isArray(e))return o(e)}(e)||a(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e){if(Array.isArray(e))return e}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(e){return l(e)||a(e)||s(e)||c()}var f="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",h="a0",p="A00000000000000000000000000";function v(e){if(e>="a"&&e<="z")return e.charCodeAt(0)-"a".charCodeAt(0)+2;if(e>="A"&&e<="Z")return"Z".charCodeAt(0)-e.charCodeAt(0)+2;throw new Error("Invalid index key head: "+e)}function g(e){if(e.length!==v(e.charAt(0)))throw new Error("invalid integer part of index key: "+e)}function m(e){if(void 0===e)throw Error("n is undefined")}function y(e){g(e);for(var t=d(e.split("")),n=t[0],r=t.slice(1),i=!0,o=r.length-1;i&&o>=0;o--){var a=f.indexOf(r[o])+1;a===f.length?r[o]="0":(r[o]=f.charAt(a),i=!1)}if(i){if("Z"===n)return"a0";if("z"===n)return;var s=String.fromCharCode(n.charCodeAt(0)+1);return s>"a"?r.push("0"):r.pop(),s+r.join("")}return n+r.join("")}function b(e,t){if(void 0!==t&&e>=t)throw new Error(e+" >= "+t);if("0"===e.slice(-1)||t&&"0"===t.slice(-1))throw new Error("trailing zero");if(t){for(var n=0;(e.charAt(n)||"0")===t.charAt(n);)n++;if(n>0)return t.slice(0,n)+b(e.slice(n),t.slice(n))}var r=e?f.indexOf(e.charAt(0)):0,i=void 0!==t?f.indexOf(t.charAt(0)):f.length;if(i-r>1){var o=Math.round(.5*(r+i));return f.charAt(o)}return t&&t.length>1?t.slice(0,1):f.charAt(r)+b(e.slice(1),void 0)}function w(e){var t=v(e.charAt(0));if(t>e.length)throw new Error("invalid index: "+e);return e.slice(0,t)}function x(e){if(e===p)throw new Error("invalid index: "+e);var t=w(e);if("0"===e.slice(t.length).slice(-1))throw new Error("invalid index: "+e)}function k(e,t){if(void 0!==e&&x(e),void 0!==t&&x(t),void 0!==e&&void 0!==t&&e>=t)throw new Error(e+" >= "+t);if(void 0===e&&void 0===t)return h;if(void 0===e){if(void 0===t)throw Error("b is undefined");var n=w(t),r=t.slice(n.length);if(n===p)return n+b("",r);if(n<t)return n;var i=function(e){g(e);for(var t=d(e.split("")),n=t[0],r=t.slice(1),i=!0,o=r.length-1;i&&o>=0;o--){var a=f.indexOf(r[o])-1;-1===a?r[o]=f.slice(-1):(r[o]=f.charAt(a),i=!1)}if(i){if("a"===n)return"Z"+f.slice(-1);if("A"===n)return;var s=String.fromCharCode(n.charCodeAt(0)-1);return s<"Z"?r.push(f.slice(-1)):r.pop(),s+r.join("")}return n+r.join("")}(n);return m(i),i}if(void 0===t){var o=w(e),a=e.slice(o.length),s=y(o);return void 0===s?o+b(a,void 0):s}var u=w(e),l=e.slice(u.length),c=w(t),v=t.slice(c.length);if(u===c)return u+b(l,v);var k=y(u);return m(k),k<t?k:u+b(l,void 0)}function S(e,t,n){if(0===n)return[];if(1===n)return[k(e,t)];if(void 0===t){for(var r=k(e,t),i=[r],o=0;o<n-1;o++)r=k(r,t),i.push(r);return i}if(void 0===e){for(var a=k(e,t),s=[a],l=0;l<n-1;l++)a=k(e,a),s.push(a);return s.reverse(),s}var c=Math.floor(n/2),d=k(e,t);return[].concat(u(S(e,d,c)),[d],u(S(d,t,n-c-1)))}function _(e,t,n){return S(e,t,n)}function E(e,t){return S(e,void 0,t)}function C(e,t){return S(e,t,1)[0]}function P(e){return S(e,void 0,1)[0]}function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"a1";return[t].concat(u(S(t,void 0,e)))}function T(e,t){return e.index<t.index?-1:e.index>t.index?1:0}function M(e){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(e)}function A(e){var t=function(e,t){if("object"!==M(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==M(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===M(t)?t:String(t)}function O(e,t,n){return(t=A(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function L(e,t){return l(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(e,t)||s(e,t)||c()}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,A(r.key),r)}}function N(e,t,n){return t&&D(e.prototype,t),n&&D(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F(e,t){return F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},F(e,t)}function U(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&F(e,t)}function K(e){return K=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},K(e)}function V(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(kM){return!1}}function W(e){var t=V();return function(){var n,r=K(e);if(t){var i=K(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===M(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return B(e)}(this,n)}}function H(e,t,n){return H=V()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&F(i,n.prototype),i},H.apply(null,arguments)}function Y(e){var t="function"===typeof Map?new Map:void 0;return Y=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return H(e,arguments,K(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),F(r,e)},Y(e)}function X(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function q(e,t){var n,r=[],i=X(e);try{e:for(i.s();!(n=i.n()).done;){var o,a=n.value,s=X(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;if(t?t(a,u):a===u)continue e}}catch(l){s.e(l)}finally{s.f()}r.push(a)}}catch(l){i.e(l)}finally{i.f()}return r}function $(e){return e.filter((function(e){return void 0!==e&&null!==e}))}function G(e){return e[e.length-1]}function Q(e,t){var n,r,i=1/0,o=X(e);try{for(o.s();!(r=o.n()).done;){var a=r.value,s=t(a);s<i&&(n=a,i=s)}}catch(u){o.e(u)}finally{o.f()}return n}function J(e){return function t(){try{return e.apply(void 0,arguments)}catch(n){throw n instanceof Error&&Error.captureStackTrace&&Error.captureStackTrace(n,t),n}}}function Z(e,t){var n=t&&e&&"object"===typeof e&&t in e?e[t]:e;throw new Error("Unknown switch case ".concat(n))}var ee=J((function(e,t){if(!e)throw new Error(t||"Assertion Error")})),te=J((function(e,t){if(null==e)throw new Error(null!==t&&void 0!==t?t:"value must be defined");return e}));function ne(e,t){var n=void 0,r=function(){n||((n={}).promise=new Promise((function(e,t){n.resolve=e,n.reject=t}))),clearTimeout(n.timeout);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n.latestArgs=i,n.timeout=setTimeout((function(){var t=n;n=void 0;try{t.resolve(e.apply(void 0,u(t.latestArgs)))}catch(kM){t.reject(kM)}}),t),n.promise};return r.cancel=function(){n&&clearTimeout(n.timeout)},r}var re=new WeakMap;function ie(e,t){if("object"===typeof e&&null!==e){var n=re.get(e);n||(n={tags:{},extras:{}},re.set(e,n)),t.tags&&(n.tags=R(R({},n.tags),t.tags)),t.extras&&(n.extras=R(R({},n.extras),t.extras))}}function oe(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return t+""}function ae(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=0,n=0,r=0,i=0;function o(){var e=t^t<<11;return t=n,n=r,r=i,(i^=(i>>>19^e^e>>>8)>>>0)/4294967296*2}for(var a=0;a<e.length+64;a++)t^=0|e.charCodeAt(a),o();return o}function se(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=L(t,2),o=i[0],a=i[1],s=L(n,2),u=s[0],l=s[1],c=u+(e-o)/(a-o)*(l-u);return r?u<l?Math.max(Math.min(c,l),u):Math.max(Math.min(c,u),l):c}function ue(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function le(e,t){if(ue(e,t))return e[t]}function ce(e){if(!e)return e;if(Array.isArray(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(ce(e[r]));return t}if("object"===typeof e){for(var i=Object.keys(e),o=i.length,a={},s=0;s<o;s++){var u=i[s];a[u]=ce(e[u])}return a}return e}function de(e){return Object.keys(e)}function fe(e){return Object.values(e)}function he(e){return Object.entries(e)}function pe(e){return Object.fromEntries(e)}function ve(e,t){var n,r={},i=!1,o=X(he(e));try{for(o.s();!(n=o.n()).done;){var a=L(n.value,2),s=a[0],u=a[1];t(s,u)?r[s]=u:i=!0}}catch(l){o.e(l)}finally{o.f()}return i?r:e}function ge(e,t){var n,r={},i=X(he(e));try{for(i.s();!(n=i.n()).done;){var o=L(n.value,2),a=o[0],s=t(a,o[1]);r[a]=s}}catch(u){i.e(u)}finally{i.f()}return r}var me,ye=function(){return"undefined"!==typeof process&&!1},be=[],we=function(){var e,t=X(be.splice(0,be.length));try{for(t.s();!(e=t.n()).done;){(0,e.value)()}}catch(n){t.e(n)}finally{t.f()}};function xe(){me||(me=requestAnimationFrame((function(){me=void 0,we()})))}function ke(e,t){return e.id>t.id?1:-1}function Se(e){return null!==e}var _e="undefined"!==typeof window&&window.structuredClone?window.structuredClone:function(e){return e?JSON.parse(JSON.stringify(e)):e};var Ee=function(e){U(n,e);var t=W(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];z(this,n);var o=function(e){if(!e.length)return null;var t,n="",r=X(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;"number"===typeof i?n+=".".concat(i):i.startsWith("(")?n.endsWith(")")?n="".concat(n.slice(0,-1),", ").concat(i.slice(1)):n+=i:n+=".".concat(i)}}catch(o){r.e(o)}finally{r.f()}return n.startsWith(".")?n.slice(1):n}(i),a=e.split("\n").map((function(e,t){return 0===t?e:"  ".concat(e)})).join("\n");return O(B(r=t.call(this,i?"At ".concat(o,": ").concat(a):a)),"name","ValidationError"),r.rawMessage=e,r.path=i,r}return N(n)}(Y(Error));function Ce(e,t){try{return t()}catch(n){if(n instanceof Ee)throw new Ee(n.rawMessage,[e].concat(u(n.path)));throw new Ee(n.toString(),[e])}}function Pe(e){if(null===e)return"null";if(Array.isArray(e))return"an array";var t=typeof e;switch(t){case"bigint":case"boolean":case"function":case"number":case"string":case"symbol":return"a ".concat(t);case"object":return"an ".concat(t);case"undefined":return"undefined";default:Z(t)}}var Ie=function(){function e(t){z(this,e),this.validationFn=t}return N(e,[{key:"validate",value:function(e){return this.validationFn(e)}},{key:"nullable",value:function(){return tt(this)}},{key:"optional",value:function(){return et(this)}},{key:"refine",value:function(t){var n=this;return new e((function(e){return t(n.validate(e))}))}},{key:"check",value:function(e,t){return"string"===typeof e?this.refine((function(n){return Ce("(check ".concat(e,")"),(function(){return t(n)})),n})):this.refine((function(t){return e(t),t}))}}]),e}(),Te=function(e){U(n,e);var t=W(n);function n(e){var r;return z(this,n),r=t.call(this,(function(t){for(var n=Ye.validate(t),r=function(t){Ce(t,(function(){return e.validate(n[t])}))},i=0;i<n.length;i++)r(i);return n})),r.itemValidator=e,r}return N(n,[{key:"nonEmpty",value:function(){return this.check((function(e){if(0===e.length)throw new Ee("Expected a non-empty array")}))}},{key:"lengthGreaterThan1",value:function(){return this.check((function(e){if(e.length<=1)throw new Ee("Expected an array with length greater than 1")}))}}]),n}(Ie),Me=function(e){U(n,e);var t=W(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return z(this,n),r=t.call(this,(function(t){if("object"!==typeof t||null===t)throw new Ee("Expected object, got ".concat(Pe(t)));for(var n=function(){var e=L(o[r],2),n=e[0],i=e[1];Ce(n,(function(){i.validate(le(t,n))}))},r=0,o=Object.entries(e);r<o.length;r++)n();if(!i)for(var a=0,s=Object.keys(t);a<s.length;a++){var u=s[a];if(!ue(e,u))throw new Ee("Unexpected property",[u])}return t})),r.config=e,r.shouldAllowUnknownProperties=i,r}return N(n,[{key:"allowUnknownProperties",value:function(){return new n(this.config,!0)}},{key:"extend",value:function(e){return new n(R(R({},this.config),e))}}]),n}(Ie),Ae=function(e){U(n,e);var t=W(n);function n(e,r,i){var o;return z(this,n),(o=t.call(this,(function(t){if("object"!==typeof t||null===t)throw new Ee("Expected an object, got ".concat(Pe(t)),[]);var n=le(t,e);if("string"!==typeof n)throw new Ee('Expected a string for key "'.concat(e,'", got ').concat(Pe(n)));var i=ue(r,n)?r[n]:void 0;return void 0===i?o.unknownValueValidation(t,n):Ce("(".concat(e," = ").concat(n,")"),(function(){return i.validate(t)}))}))).key=e,o.config=r,o.unknownValueValidation=i,o}return N(n,[{key:"validateUnknownVariants",value:function(e){return new n(this.key,this.config,e)}}]),n}(Ie),Oe=function(e){U(n,e);var t=W(n);function n(e,r){var i;return z(this,n),(i=t.call(this,(function(t){if("object"!==typeof t||null===t)throw new Ee("Expected object, got ".concat(Pe(t)));for(var n=function(){var t=L(o[i],2),n=t[0],a=t[1];Ce(n,(function(){e.validate(n),r.validate(a)}))},i=0,o=Object.entries(t);i<o.length;i++)n();return t}))).keyValidator=e,i.valueValidator=r,i}return N(n)}(Ie);function je(e){return new Ie((function(t){if(typeof t!==e)throw new Ee("Expected ".concat(e,", got ").concat(Pe(t)));return t}))}var Re=new Ie((function(e){return e})),Le=new Ie((function(e){return e})),De=je("string"),Ne=je("number").check((function(e){if(Number.isNaN(e))throw new Ee("Expected a number, got NaN");if(!Number.isFinite(e))throw new Ee("Expected a finite number, got ".concat(e))})),ze=Ne.check((function(e){if(e<0)throw new Ee("Expected a positive number, got ".concat(e))})),Be=Ne.check((function(e){if(e<=0)throw new Ee("Expected a non-zero positive number, got ".concat(e))})),Fe=Ne.check((function(e){if(!Number.isInteger(e))throw new Ee("Expected an integer, got ".concat(e))})),Ue=Fe.check((function(e){if(e<0)throw new Ee("Expected a positive integer, got ".concat(e))})),Ke=Fe.check((function(e){if(e<=0)throw new Ee("Expected a non-zero positive integer, got ".concat(e))})),Ve=je("boolean"),We=je("bigint");function He(e){return new Ie((function(t){if(t!==e)throw new Ee("Expected ".concat(e,", got ").concat(JSON.stringify(t)));return e}))}var Ye=new Ie((function(e){if(!Array.isArray(e))throw new Ee("Expected an array, got ".concat(Pe(e)));return e}));function Xe(e){return new Te(e)}var qe=new Ie((function(e){if("object"!==typeof e||null===e)throw new Ee("Expected object, got ".concat(Pe(e)));return e}));function $e(e){return new Me(e)}function Ge(e,t){return new Oe(e,t)}function Qe(e,t){return new Ae(e,t,(function(n,r){throw new Ee("Expected one of ".concat(Object.keys(t).map((function(e){return JSON.stringify(e)})).join(" or "),", got ").concat(JSON.stringify(r)),[e])}))}function Je(e,t){return new Ie((function(n){return Ce(n&&"object"===typeof n&&"id"in n&&"string"===typeof n.id?"".concat(e,"(id = ").concat(n.id,")"):e,(function(){return t.validate(n)}))}))}function Ze(e){return new Ie((function(t){if(!e.has(t)){var n=Array.from(e,(function(e){return JSON.stringify(e)})).join(" or ");throw new Ee("Expected ".concat(n,", got ").concat(t))}return t}))}function et(e){return new Ie((function(t){if(void 0!==t)return e.validate(t)}))}function tt(e){return new Ie((function(t){return null===t?null:e.validate(t)}))}function nt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ze(new Set(t))}function rt(e){return De.refine((function(t){if(!t.startsWith("".concat(e,":")))throw new Error("".concat(e,' ID must start with "').concat(e,':"'));return t}))}var it=rt("asset");function ot(e,t){return $e({id:it,typeName:He("asset"),type:He(e),props:t})}var at=function(){function e(){z(this,e),O(this,"arraySize",0),O(this,"array",Array(8)),O(this,"set",null)}return N(e,[{key:"isEmpty",get:function(){if(this.array)return 0===this.arraySize;if(this.set)return 0===this.set.size;throw new Error("no set or array")}},{key:"add",value:function(e){if(this.array)return-1===this.array.indexOf(e)&&(this.arraySize<8?(this.array[this.arraySize]=e,this.arraySize++,!0):(this.set=new Set(this.array),this.array=null,this.set.add(e),!0));if(this.set)return!this.set.has(e)&&(this.set.add(e),!0);throw new Error("no set or array")}},{key:"remove",value:function(e){if(this.array){var t=this.array.indexOf(e);return-1!==t&&(this.array[t]=void 0,this.arraySize--,t!==this.arraySize&&(this.array[t]=this.array[this.arraySize],this.array[this.arraySize]=void 0),!0)}if(this.set)return!!this.set.has(e)&&(this.set.delete(e),!0);throw new Error("no set or array")}},{key:"visit",value:function(e){if(this.array)for(var t=0;t<this.arraySize;t++){var n=this.array[t];"undefined"!==typeof n&&e(n)}else{if(!this.set)throw new Error("no set or array");this.set.forEach(e)}}}]),e}();function st(e){return e&&"object"===typeof e&&"parents"in e}function ut(e){for(var t=0,n=e.parents.length;t<n;t++)if(e.parents[t].__unsafe__getWithoutCapture(),e.parents[t].lastChangedEpoch!==e.parentEpochs[t])return!0;return!1}var lt=function e(t,n){if(t.children.remove(n)&&t.children.isEmpty&&st(t))for(var r=0,i=t.parents.length;r<i;r++)e(t.parents[r],t)},ct=function e(t,n){if(t.children.add(n)&&st(t))for(var r=0,i=t.parents.length;r<i;r++)e(t.parents[r],t)};function dt(e,t){return e===t||Object.is(e,t)||Boolean(e&&t&&"function"===typeof e.equals&&e.equals(t))}var ft=Object.freeze([]),ht=Symbol.for("__signia__"),pt=globalThis;pt[ht]?console.error('Multiple versions of signia detected. This will cause unexpected behavior. Please add "resolutions" (yarn/pnpm) or "overrides" (npm) in your package.json to ensure only one version of signia is loaded.'):pt[ht]=!0;var vt=N((function e(t,n){z(this,e),O(this,"offset",0),O(this,"numNewParents",0),O(this,"maybeRemoved",void 0),this.below=t,this.child=n})),gt=null;function mt(e){gt=new vt(gt,e)}function yt(){var e,t=gt;if(gt=t.below,t.numNewParents>0||t.offset!==t.child.parents.length){for(var n=t.offset;n<t.child.parents.length;n++){var r=t.child.parents[n];t.child.parents.indexOf(r)>=t.offset&&lt(r,t.child)}if(t.child.parents.length=t.offset,t.child.parentEpochs.length=t.offset,null!==(e=gt)&&void 0!==e&&e.maybeRemoved)for(var i=0;i<gt.maybeRemoved.length;i++){var o=gt.maybeRemoved[i];-1===t.child.parents.indexOf(o)&&lt(o,t.child)}}}function bt(e){if(gt){var t=gt.child.parents.indexOf(e);if(t<0&&(gt.numNewParents++,gt.child.isActivelyListening&&ct(e,gt.child)),t<0||t>=gt.offset){if(t!==gt.offset&&t>0){var n=gt.child.parents[gt.offset];gt.maybeRemoved?-1===gt.maybeRemoved.indexOf(n)&&gt.maybeRemoved.push(n):gt.maybeRemoved=[n]}gt.child.parents[gt.offset]=e,gt.child.parentEpochs[gt.offset]=e.lastChangedEpoch,gt.offset++}}}var wt=Symbol("RESET_VALUE"),xt=function(){function e(t){z(this,e),O(this,"index",0),O(this,"buffer",void 0),this.capacity=t,this.buffer=new Array(t)}return N(e,[{key:"pushEntry",value:function(e,t,n){void 0!==n&&(n!==wt?(this.buffer[this.index]=[e,t,n],this.index=(this.index+1)%this.capacity):this.clear())}},{key:"clear",value:function(){this.index=0,this.buffer.fill(void 0)}},{key:"getChangesSince",value:function(e){for(var t=this.index,n=this.capacity,r=this.buffer,i=0;i<n;i++){var o=(t-1+n-i)%n,a=r[o];if(!a)return wt;var s=L(a,2),u=s[0],l=s[1];if(0===i&&e>=l)return[];if(u<=e&&e<l){for(var c=i+1,d=new Array(c),f=0;f<c;f++)d[f]=r[(o+f)%n][2];return d}}return wt}}]),e}(),kt=-1,St=0,_t=!1;var Et=function(){function e(t){z(this,e),O(this,"initialAtomValues",new Map),this.parent=t}return N(e,[{key:"isRoot",get:function(){return null===this.parent}},{key:"commit",value:function(){var e=this;if(this.isRoot){var t=this.initialAtomValues;this.initialAtomValues=new Map,Ct(t.keys())}else this.initialAtomValues.forEach((function(t,n){e.parent.initialAtomValues.has(n)||e.parent.initialAtomValues.set(n,t)}))}},{key:"abort",value:function(){St++,this.initialAtomValues.forEach((function(e,t){var n;t.set(e),null===(n=t.historyBuffer)||void 0===n||n.clear()})),this.commit()}}]),e}();function Ct(e){if(_t)throw new Error("cannot change atoms during reaction cycle");try{_t=!0;var t,n=new Set,r=function e(t){t.lastTraversedEpoch!==St&&(t.lastTraversedEpoch=St,"maybeScheduleEffect"in t?n.add(t):t.children.visit(e))},i=X(e);try{for(i.s();!(t=i.n()).done;){t.value.children.visit(r)}}catch(s){i.e(s)}finally{i.f()}var o,a=X(n);try{for(a.s();!(o=a.n()).done;){o.value.maybeScheduleEffect()}}catch(s){a.e(s)}finally{a.f()}}finally{_t=!1}}var Pt=null;function It(e){return Pt?e():function(e){var t=new Et(Pt);Pt=t;try{var n=!1,r=e((function(){return n=!0}));return n?t.abort():t.commit(),r}catch(kM){throw t.abort(),kM}finally{Pt=Pt.parent}}(e)}var Tt=function(){function e(t,n,r){var i;z(this,e),O(this,"isEqual",void 0),O(this,"computeDiff",void 0),O(this,"lastChangedEpoch",St),O(this,"children",new at),O(this,"historyBuffer",void 0),this.name=t,this.current=n,this.isEqual=null!==(i=null===r||void 0===r?void 0:r.isEqual)&&void 0!==i?i:null,r&&(r.historyLength&&(this.historyBuffer=new xt(r.historyLength)),this.computeDiff=r.computeDiff)}return N(e,[{key:"__unsafe__getWithoutCapture",value:function(){return this.current}},{key:"value",get:function(){return bt(this),this.current}},{key:"set",value:function(e,t){var n,r,i,o;if(null!==(n=null===(r=this.isEqual)||void 0===r?void 0:r.call(this,this.current,e))&&void 0!==n?n:dt(this.current,e))return this.current;(St++,this.historyBuffer)&&this.historyBuffer.pushEntry(this.lastChangedEpoch,St,null!==(i=null!==t&&void 0!==t?t:null===(o=this.computeDiff)||void 0===o?void 0:o.call(this,this.current,e,this.lastChangedEpoch,St))&&void 0!==i?i:wt);this.lastChangedEpoch=St;var a=this.current;return this.current=e,function(e,t){Pt?Pt.initialAtomValues.has(e)||Pt.initialAtomValues.set(e,t):Ct([e])}(this,a),e}},{key:"update",value:function(e){return this.set(e(this.current))}},{key:"getDiffSince",value:function(e){var t,n;return bt(this),e>=this.lastChangedEpoch?ft:null!==(t=null===(n=this.historyBuffer)||void 0===n?void 0:n.getChangesSince(e))&&void 0!==t?t:wt}}]),e}();function Mt(e,t,n){return new Tt(e,t,n)}var At=Symbol("UNINITIALIZED"),Ot=function(e){return e===At},jt=N((function e(t,n){z(this,e),this.value=t,this.diff=n}));function Rt(e,t){return new jt(e,t)}var Lt=function(){function e(t,n,r){var i;z(this,e),O(this,"lastChangedEpoch",kt),O(this,"lastTraversedEpoch",kt),O(this,"lastCheckedEpoch",kt),O(this,"parents",[]),O(this,"parentEpochs",[]),O(this,"children",new at),O(this,"historyBuffer",void 0),O(this,"state",At),O(this,"computeDiff",void 0),O(this,"isEqual",void 0),this.name=t,this.derive=n,null!==r&&void 0!==r&&r.historyLength&&(this.historyBuffer=new xt(r.historyLength)),this.computeDiff=null===r||void 0===r?void 0:r.computeDiff,this.isEqual=null!==(i=null===r||void 0===r?void 0:r.isEqual)&&void 0!==i?i:null}return N(e,[{key:"isActivelyListening",get:function(){return!this.children.isEmpty}},{key:"__unsafe__getWithoutCapture",value:function(){var e=this.lastChangedEpoch===kt;if(!e&&(this.lastCheckedEpoch===St||!ut(this)))return this.lastCheckedEpoch=St,this.state;try{var t,n;mt(this);var r=this.derive(this.state,this.lastCheckedEpoch),i=r instanceof jt?r.value:r;if(!(null!==(t=null===(n=this.isEqual)||void 0===n?void 0:n.call(this,i,this.state))&&void 0!==t?t:dt(i,this.state))){if(this.historyBuffer&&!e){var o,a,s=r instanceof jt?r.diff:void 0;this.historyBuffer.pushEntry(this.lastChangedEpoch,St,null!==(o=null!==s&&void 0!==s?s:null===(a=this.computeDiff)||void 0===a?void 0:a.call(this,this.state,i,this.lastCheckedEpoch,St))&&void 0!==o?o:wt)}this.lastChangedEpoch=St,this.state=i}return this.lastCheckedEpoch=St,this.state}finally{yt()}}},{key:"value",get:function(){var e=this.__unsafe__getWithoutCapture();return bt(this),e}},{key:"getDiffSince",value:function(e){var t,n;return this.value,e>=this.lastChangedEpoch?ft:null!==(t=null===(n=this.historyBuffer)||void 0===n?void 0:n.getChangesSince(e))&&void 0!==t?t:wt}}]),e}();function Dt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,r=n.get,i=Symbol.for("__signia__computed__"+t);return n.get=function(){var n=this[i];return n||(n=new Lt(t,r.bind(this),e),Object.defineProperty(this,i,{enumerable:!1,configurable:!1,writable:!1,value:n})),n.value},n}function Nt(){if(1===arguments.length){var e=arguments[0];return function(t,n,r){return Dt(e,t,n,r)}}return"string"===typeof arguments[0]?new Lt(arguments[0],arguments[1],arguments[2]):Dt(void 0,arguments[0],arguments[1],arguments[2])}var zt=function(){function e(t,n,r){var i=this;z(this,e),O(this,"_isActivelyListening",!1),O(this,"lastTraversedEpoch",kt),O(this,"lastReactedEpoch",kt),O(this,"_scheduleCount",0),O(this,"parentEpochs",[]),O(this,"parents",[]),O(this,"_scheduleEffect",void 0),O(this,"maybeExecute",(function(){i._isActivelyListening&&i.execute()})),this.name=t,this.runEffect=n,this._scheduleEffect=null===r||void 0===r?void 0:r.scheduleEffect}return N(e,[{key:"isActivelyListening",get:function(){return this._isActivelyListening}},{key:"scheduleCount",get:function(){return this._scheduleCount}},{key:"maybeScheduleEffect",value:function(){this._isActivelyListening&&this.lastReactedEpoch!==St&&(!this.parents.length||ut(this)?this.scheduleEffect():this.lastReactedEpoch=St)}},{key:"scheduleEffect",value:function(){this._scheduleCount++,this._scheduleEffect?this._scheduleEffect(this.maybeExecute):this.execute()}},{key:"attach",value:function(){this._isActivelyListening=!0;for(var e=0,t=this.parents.length;e<t;e++)ct(this.parents[e],this)}},{key:"detach",value:function(){this._isActivelyListening=!1;for(var e=0,t=this.parents.length;e<t;e++)lt(this.parents[e],this)}},{key:"execute",value:function(){try{mt(this);var e=this.runEffect(this.lastReactedEpoch);return this.lastReactedEpoch=St,e}finally{yt()}}}]),e}();function Bt(e,t,n){var r=new zt(e,t,n);return r.attach(),r.scheduleEffect(),function(){r.detach()}}var Ft=function(){function e(t){z(this,e),O(this,"nextValue",void 0),O(this,"diff",void 0),this.previousValue=t}return N(e,[{key:"get",value:function(){var e,t,n,r,i=null!==(e=null===(t=this.diff)||void 0===t||null===(t=t.removed)||void 0===t?void 0:t.size)&&void 0!==e?e:0,o=null!==(n=null===(r=this.diff)||void 0===r||null===(r=r.added)||void 0===r?void 0:r.size)&&void 0!==n?n:0;if(0!==i||0!==o)return{value:this.nextValue,diff:this.diff}}},{key:"_add",value:function(e,t){var n,r,i,o,a;(null!==(n=this.nextValue)&&void 0!==n||(this.nextValue=new Set(this.previousValue)),this.nextValue.add(e),null!==(r=this.diff)&&void 0!==r||(this.diff={}),t)?null===(i=this.diff.removed)||void 0===i||i.delete(e):(null!==(a=(o=this.diff).added)&&void 0!==a||(o.added=new Set),this.diff.added.add(e))}},{key:"add",value:function(e){var t,n=this.previousValue.has(e);if(n){var r;if(!(null===(r=this.diff)||void 0===r||null===(r=r.removed)||void 0===r?void 0:r.has(e)))return;return this._add(e,n)}(null===(t=this.nextValue)||void 0===t?void 0:t.has(e))||this._add(e,n)}},{key:"_remove",value:function(e,t){var n,r,i,o,a;(null!==(n=this.nextValue)&&void 0!==n||(this.nextValue=new Set(this.previousValue)),this.nextValue.delete(e),null!==(r=this.diff)&&void 0!==r||(this.diff={}),t)?(null!==(o=(i=this.diff).removed)&&void 0!==o||(i.removed=new Set),this.diff.removed.add(e)):null===(a=this.diff.added)||void 0===a||a.delete(e)}},{key:"remove",value:function(e){var t,n=this.previousValue.has(e);if(!n){var r;if(!(null===(r=this.diff)||void 0===r||null===(r=r.added)||void 0===r?void 0:r.has(e)))return;return this._remove(e,n)}(null===(t=this.diff)||void 0===t||null===(t=t.removed)||void 0===t?void 0:t.has(e))||this._remove(e,n)}}]),e}(),Ut=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;return crypto.getRandomValues(new Uint8Array(e)).reduce((function(e,t){return e+=(t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_"}),"")},Kt=function(){function e(t,n){var r,i,o=this;z(this,e),O(this,"createDefaultProperties",void 0),O(this,"migrations",void 0),O(this,"validator",void 0),O(this,"scope",void 0),O(this,"isInstance",(function(e){return(null===e||void 0===e?void 0:e.typeName)===o.typeName})),this.typeName=t,this.createDefaultProperties=n.createDefaultProperties,this.migrations=n.migrations,this.validator=null!==(r=n.validator)&&void 0!==r?r:{validate:function(e){return e}},this.scope=null!==(i=n.scope)&&void 0!==i?i:"document"}return N(e,[{key:"create",value:function(e){for(var t=R(R({},this.createDefaultProperties()),{},{id:this.createId()}),n=0,r=Object.entries(e);n<r.length;n++){var i=L(r[n],2),o=i[0],a=i[1];void 0!==a&&(t[o]=a)}return t.typeName=this.typeName,t}},{key:"clone",value:function(e){return R(R({},_e(e)),{},{id:this.createId()})}},{key:"createId",value:function(e){return this.typeName+":"+(null!==e&&void 0!==e?e:Ut())}},{key:"createCustomId",value:function(e){return this.typeName+":"+e}},{key:"parseId",value:function(e){if(!this.isId(e))throw new Error('ID "'.concat(e,'" is not a valid ID for type "').concat(this.typeName,'"'));return e.slice(this.typeName.length+1)}},{key:"isId",value:function(e){if(!e)return!1;for(var t=0;t<this.typeName.length;t++)if(e[t]!==this.typeName[t])return!1;return":"===e[this.typeName.length]}},{key:"withDefaultProperties",value:function(t){return new e(this.typeName,{createDefaultProperties:t,migrations:this.migrations,validator:this.validator,scope:this.scope})}},{key:"validate",value:function(e){return this.validator.validate(e)}}]),e}();function Vt(e,t){var n;return new Kt(e,{createDefaultProperties:function(){return{}},migrations:null!==(n=t.migrations)&&void 0!==n?n:{currentVersion:0,firstVersion:0,migrators:{}},validator:t.validator,scope:t.scope})}var Wt=function(){function e(){z(this,e),O(this,"items",new WeakMap)}return N(e,[{key:"get",value:function(e,t){return this.items.has(e)||this.items.set(e,t(e)),this.items.get(e)}}]),e}(),Ht=n(2467);function Yt(e,t){for(var n=0,r=Object.entries(e);n<r.length;n++){var i=L(r[n],2),o=i[0],a=i[1],s=t[o];if("eq"in a&&s!==a.eq)return!1;if("neq"in a&&s===a.neq)return!1;if("gt"in a&&("number"!==typeof s||s<=a.gt))return!1}return!0}function Xt(e,t,n){for(var r=Object.fromEntries(Object.keys(n).map((function(e){return[e,new Set]}))),i=0,o=Object.entries(n);i<o.length;i++){var a=L(o[i],2),s=a[0],u=a[1];if("eq"in u){var l=e.index(t,s).value.get(u.eq);if(l){var c,d=X(l);try{for(d.s();!(c=d.n()).done;){var f=c.value;r[s].add(f)}}catch(T){d.e(T)}finally{d.f()}}}else if("neq"in u){var h,p=X(e.index(t,s).value);try{for(p.s();!(h=p.n()).done;){var v=L(h.value,2),g=v[0],m=v[1];if(g!==u.neq){var y,b=X(m);try{for(b.s();!(y=b.n()).done;){var w=y.value;r[s].add(w)}}catch(T){b.e(T)}finally{b.f()}}}}catch(T){p.e(T)}finally{p.f()}}else if("gt"in u){var x,k=X(e.index(t,s).value);try{for(k.s();!(x=k.n()).done;){var S=L(x.value,2),_=S[0],E=S[1];if(_>u.gt){var C,P=X(E);try{for(P.s();!(C=P.n()).done;){var I=C.value;r[s].add(I)}}catch(T){P.e(T)}finally{P.f()}}}}catch(T){k.e(T)}finally{k.f()}}}return function(e){if(0===e.length)return new Set;var t,n=e[0],r=e.slice(1),i=new Set,o=X(n);try{var a=function(){var e=t.value;r.every((function(t){return t.has(e)}))&&i.add(e)};for(o.s();!(t=o.n()).done;)a()}catch(T){o.e(T)}finally{o.f()}return i}(Object.values(r))}var qt=function(){function e(t,n){z(this,e),O(this,"indexCache",new Map),O(this,"historyCache",new Map),this.atoms=t,this.history=n}return N(e,[{key:"filterHistory",value:function(e){var t=this;if(this.historyCache.has(e))return this.historyCache.get(e);var n=Nt("filterHistory:"+e,(function(n,r){if(Ot(n))return t.history.value;var i=t.history.getDiffSince(r);if(i===wt)return t.history.value;var o,a={added:{},removed:{},updated:{}},s=0,u=0,l=0,c=X(i);try{for(c.s();!(o=c.n()).done;){var d,f=o.value,h=X(fe(f.added));try{for(h.s();!(d=h.n()).done;){var p=d.value;if(p.typeName===e)if(a.removed[p.id]){var v=a.removed[p.id];delete a.removed[p.id],u--,v!==p&&(a.updated[p.id]=[v,p],l++)}else a.added[p.id]=p,s++}}catch(_){h.e(_)}finally{h.f()}var g,m=X(fe(f.updated));try{for(m.s();!(g=m.n()).done;){var y=L(g.value,2),b=y[0],w=y[1];w.typeName===e&&(a.added[w.id]?a.added[w.id]=w:a.updated[w.id]?a.updated[w.id]=[a.updated[w.id][0],w]:(a.updated[w.id]=[b,w],l++))}}catch(_){m.e(_)}finally{m.f()}var x,k=X(fe(f.removed));try{for(k.s();!(x=k.n()).done;){var S=x.value;S.typeName===e&&(a.added[S.id]?(delete a.added[S.id],s--):a.updated[S.id]?(a.removed[S.id]=a.updated[S.id][0],delete a.updated[S.id],l--,u++):(a.removed[S.id]=S,u++))}}catch(_){k.e(_)}finally{k.f()}}}catch(_){c.e(_)}finally{c.f()}return s||u||l?Rt(t.history.value,a):n}),{historyLength:100});return this.historyCache.set(e,n),n}},{key:"index",value:function(e,t){var n=e+":"+t;if(this.indexCache.has(n))return this.indexCache.get(n);var r=this.__uncached_createIndex(e,t);return this.indexCache.set(n,r),r}},{key:"__uncached_createIndex",value:function(e,t){var n=this,r=this.filterHistory(e),i=function(){r.value;var i,o=new Map,a=X(fe(n.atoms.value));try{for(a.s();!(i=a.n()).done;){var s=i.value.value;if(s.typeName===e){var u=s[t];o.has(u)||o.set(u,new Set),o.get(u).add(s.id)}}}catch(l){a.e(l)}finally{a.f()}return o};return Nt("index:"+e+":"+t,(function(n,o){if(Ot(n))return i();var a=r.getDiffSince(o);if(a===wt)return i();var s,u=new Map,l=function(e,t){var r,i=u.get(e);i||(i=new Ft(null!==(r=n.get(e))&&void 0!==r?r:new Set)),i.add(t),u.set(e,i)},c=function(e,t){var r,i=u.get(e);i||(i=new Ft(null!==(r=n.get(e))&&void 0!==r?r:new Set)),i.remove(t),u.set(e,i)},d=X(a);try{for(d.s();!(s=d.n()).done;){var f,h=s.value,p=X(fe(h.added));try{for(p.s();!(f=p.n()).done;){var v=f.value;if(v.typeName===e)l(v[t],v.id)}}catch(j){p.e(j)}finally{p.f()}var g,m=X(fe(h.updated));try{for(m.s();!(g=m.n()).done;){var y=L(g.value,2),b=y[0],w=y[1];if(w.typeName===e){var x=b[t],k=w[t];x!==k&&(c(x,w.id),l(k,w.id))}}}catch(j){m.e(j)}finally{m.f()}var S,_=X(fe(h.removed));try{for(_.s();!(S=_.n()).done;){var E=S.value;if(E.typeName===e)c(E[t],E.id)}}catch(j){_.e(j)}finally{_.f()}}}catch(j){d.e(j)}finally{d.f()}var C,P=void 0,I=void 0,T=X(u);try{for(T.s();!(C=T.n()).done;){var M=L(C.value,2),A=M[0],O=M[1].get();O&&(P||(P=new Map(n)),I||(I=new Map),0===O.value.size?P.delete(A):P.set(A,O.value),I.set(A,O.diff))}}catch(j){T.e(j)}finally{T.f()}return P&&I?Rt(P,I):n}),{historyLength:100})}},{key:"record",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return{}},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"record:"+e+(n?":"+n.toString():""),i=this.ids(e,n,r);return Nt(r,(function(){var e,n=X(i.value);try{for(n.s();!(e=n.n()).done;){var r,o=e.value;return null===(r=t.atoms.value[o])||void 0===r?void 0:r.value}}catch(a){n.e(a)}finally{n.f()}}))}},{key:"records",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return{}},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"records:"+e+(n?":"+n.toString():""),i=this.ids(e,n,"ids:"+r);return Nt(r,(function(){return u(i.value).map((function(e){var n=t.atoms.value[e];if(!n)throw new Error("no atom found for record id: "+e);return n.value}))}))}},{key:"ids",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return{}},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ids:"+e+(n?":"+n.toString():""),i=this.filterHistory(e),o=function(){i.value;var r=n();return 0===Object.keys(r).length?new Set(fe(t.atoms.value).flatMap((function(t){var n=t.value;return n.typeName===e?n.id:[]}))):Xt(t,e,r)},a=function(e){var t=o(),n=function(e,t){var n,r={},i=X(t);try{for(i.s();!(n=i.n()).done;){var o,a=n.value;e.has(a)||(null!==(o=r.added)&&void 0!==o||(r.added=new Set),r.added.add(a))}}catch(d){i.e(d)}finally{i.f()}var s,u=X(e);try{for(u.s();!(s=u.n()).done;){var l,c=s.value;t.has(c)||(null!==(l=r.removed)&&void 0!==l||(r.removed=new Set),r.removed.add(c))}}catch(d){u.e(d)}finally{u.f()}return r.added||r.removed?r:void 0}(e,t);return n?Rt(t,n):e},s=Nt("ids_query:"+r,n,{isEqual:Ht});return Nt("query:"+r,(function(t,n){var r=s.value;if(Ot(t))return o();if(n<s.lastChangedEpoch)return a(t);var u=i.getDiffSince(n);if(u===wt)return a(t);var l,c=new Ft(t),d=X(u);try{for(d.s();!(l=d.n()).done;){var f,h=l.value,p=X(fe(h.added));try{for(p.s();!(f=p.n()).done;){var v=f.value;v.typeName===e&&Yt(r,v)&&c.add(v.id)}}catch(_){p.e(_)}finally{p.f()}var g,m=X(fe(h.updated));try{for(m.s();!(g=m.n()).done;){var y=L(g.value,2),b=(y[0],y[1]);b.typeName===e&&(Yt(r,b)?c.add(b.id):c.remove(b.id))}}catch(_){m.e(_)}finally{m.f()}var w,x=X(fe(h.removed));try{for(x.s();!(w=x.n()).done;){var k=w.value;k.typeName===e&&c.remove(k.id)}}catch(_){x.e(_)}finally{x.f()}}}catch(_){d.e(_)}finally{d.f()}var S=c.get();return S?Rt(S.value,S.diff):t}),{historyLength:50})}},{key:"exec",value:function(e,t){var n=Xt(this,e,t);if(0===n.size)return ft;var r=this.atoms.value;return u(n).map((function(e){return r[e].value}))}}]),e}();var $t=function(){function e(t){var n=this;z(this,e),O(this,"id",Ut()),O(this,"atoms",Mt("store_atoms",{})),O(this,"history",Mt("history",0,{historyLength:1e3})),O(this,"query",new qt(this.atoms,this.history)),O(this,"listeners",new Set),O(this,"historyAccumulator",new Qt),O(this,"historyReactor",void 0),O(this,"schema",void 0),O(this,"props",void 0),O(this,"scopedTypes",void 0),O(this,"onAfterCreate",void 0),O(this,"onAfterChange",void 0),O(this,"onBeforeDelete",void 0),O(this,"onAfterDelete",void 0),O(this,"_runCallbacks",!0),O(this,"put",(function(e,t){It((function(){for(var r,i={},o={},a=n.atoms.__unsafe__getWithoutCapture(),s=null,u=!1,l=0,c=e.length;l<c;l++){var d,f=(null!==(d=s)&&void 0!==d?d:a)[(r=e[l]).id];if(f){var h=f.__unsafe__getWithoutCapture();r=n.schema.validateRecord(n,r,null!==t&&void 0!==t?t:"updateRecord",h),f.set(r);var p=f.__unsafe__getWithoutCapture();h!==p&&(u=!0,i[r.id]=[h,p])}else u=!0,o[(r=n.schema.validateRecord(n,r,null!==t&&void 0!==t?t:"createRecord",null)).id]=r,s||(s=R({},a)),s[r.id]=Mt("atom:"+r.id,r)}if(s&&n.atoms.set(s),u){n.updateHistory({added:o,updated:i,removed:{}});var v=n.onAfterCreate,g=n.onAfterChange;v&&n._runCallbacks&&Object.values(o).forEach((function(e){v(e)})),g&&n._runCallbacks&&Object.values(i).forEach((function(e){var t=L(e,2),n=t[0],r=t[1];g(n,r)}))}}))})),O(this,"remove",(function(e){It((function(){if(n.onBeforeDelete&&n._runCallbacks){var t,r=X(e);try{for(r.s();!(t=r.n()).done;){var i=t.value,o=n.atoms.__unsafe__getWithoutCapture()[i];o&&n.onBeforeDelete(o.value)}}catch(l){r.e(l)}finally{r.f()}}var a=void 0;if(n.atoms.update((function(t){var n,r,i=void 0,o=X(e);try{for(o.s();!(r=o.n()).done;){var s=r.value;s in t&&(i||(i=R({},t)),a||(a={}),delete i[s],a[s]=t[s].value)}}catch(l){o.e(l)}finally{o.f()}return null!==(n=i)&&void 0!==n?n:t})),a&&(n.updateHistory({added:{},updated:{},removed:a}),n.onAfterDelete&&n._runCallbacks))for(var s=0,u=e.length;s<u;s++)n.onAfterDelete(a[e[s]])}))})),O(this,"get",(function(e){var t;return null===(t=n.atoms.value[e])||void 0===t?void 0:t.value})),O(this,"unsafeGetWithoutCapture",(function(e){var t;return null===(t=n.atoms.value[e])||void 0===t?void 0:t.__unsafe__getWithoutCapture()})),O(this,"serialize",(function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"document",r={},i=X(he(n.atoms.value));try{for(i.s();!(e=i.n()).done;){var o=L(e.value,2),a=o[0],s=o[1].value;("all"===t||n.scopedTypes[t].has(s.typeName))&&(r[a]=s)}}catch(u){i.e(u)}finally{i.f()}return r})),O(this,"allRecords",(function(){return fe(n.atoms.value).map((function(e){return e.value}))})),O(this,"clear",(function(){n.remove(de(n.atoms.value))})),O(this,"update",(function(e,t){var r=n.atoms.value[e];r?n.put([t(r.__unsafe__getWithoutCapture())]):console.error("Record ".concat(e," not found. This is probably an error"))})),O(this,"has",(function(e){return!!n.atoms.value[e]})),O(this,"listen",(function(e,t){var r,i;n._flushHistory();var o={onHistory:e,filters:{source:null!==(r=null===t||void 0===t?void 0:t.source)&&void 0!==r?r:"all",scope:null!==(i=null===t||void 0===t?void 0:t.scope)&&void 0!==i?i:"all"}};return n.listeners.add(o),n.historyReactor.scheduler.isActivelyListening||n.historyReactor.start(),function(){n.listeners.delete(o),0===n.listeners.size&&n.historyReactor.stop()}})),O(this,"isMergingRemoteChanges",!1),O(this,"mergeRemoteChanges",(function(e){if(n.isMergingRemoteChanges)return e();try{n.isMergingRemoteChanges=!0,It(e)}finally{n.isMergingRemoteChanges=!1}})),O(this,"createComputedCache",(function(e,t){var r=new Wt;return{get:function(i){var o=n.atoms.value[i];if(o)return r.get(o,(function(){return Nt(e+":"+i,(function(){return t(o.value)}))})).value}}})),O(this,"createSelectedComputedCache",(function(e,t,r){var i=new Wt;return{get:function(o){var a=n.atoms.value[o];if(a){var s=Nt(e+":"+o+":selector",(function(){return t(a.value)}));return i.get(a,(function(){return Nt(e+":"+o,(function(){return r(s.value)}))})).value}}}})),O(this,"_integrityChecker",void 0),O(this,"_isPossiblyCorrupted",!1);var r=t.initialData,i=t.schema;this.schema=i,this.props=t.props,r&&this.atoms.set(pe(he(r).map((function(e){var t=L(e,2),r=t[0],i=t[1];return[r,Mt("atom:"+r,n.schema.validateRecord(n,i,"initialize",null))]})))),this.historyReactor=function(e,t,n){var r=new zt(e,t,n);return{scheduler:r,start:function(e){var t,n=null!==(t=null===e||void 0===e?void 0:e.force)&&void 0!==t&&t;r.attach(),n?r.scheduleEffect():r.maybeScheduleEffect()},stop:function(){r.detach()}}}("Store.historyReactor",(function(){n.history.value,n._flushHistory()}),{scheduleEffect:function(e){return function(e){if(ye())return e();be.includes(e)||(be.push(e),xe())}(e)}}),this.scopedTypes={document:new Set(fe(this.schema.types).filter((function(e){return"document"===e.scope})).map((function(e){return e.typeName}))),session:new Set(fe(this.schema.types).filter((function(e){return"session"===e.scope})).map((function(e){return e.typeName}))),presence:new Set(fe(this.schema.types).filter((function(e){return"presence"===e.scope})).map((function(e){return e.typeName})))}}return N(e,[{key:"_flushHistory",value:function(){if(this.historyAccumulator.hasChanges()){var e,t=X(this.historyAccumulator.flush());try{for(t.s();!(e=t.n()).done;){var n,r=e.value,i=r.changes,o=r.source,a=null,s=null,u=null,l=X(this.listeners);try{for(l.s();!(n=l.n()).done;){var c=n.value,d=c.onHistory,f=c.filters;if("all"===f.source||f.source===o)if("all"!==f.scope)if("document"===f.scope){var h;if(null!==(h=s)&&void 0!==h||(s=this.filterChangesByScope(i,"document")),!s)continue;d({changes:s,source:o})}else if("session"===f.scope){var p;if(null!==(p=a)&&void 0!==p||(a=this.filterChangesByScope(i,"session")),!a)continue;d({changes:a,source:o})}else{var v;if(null!==(v=u)&&void 0!==v||(u=this.filterChangesByScope(i,"presence")),!u)continue;d({changes:u,source:o})}else d({changes:i,source:o})}}catch(g){l.e(g)}finally{l.f()}}}catch(g){t.e(g)}finally{t.f()}}}},{key:"filterChangesByScope",value:function(e,t){var n=this,r={added:ve(e.added,(function(e,r){return n.scopedTypes[t].has(r.typeName)})),updated:ve(e.updated,(function(e,r){return n.scopedTypes[t].has(r[1].typeName)})),removed:ve(e.removed,(function(e,r){return n.scopedTypes[t].has(r.typeName)}))};return 0===Object.keys(r.added).length&&0===Object.keys(r.updated).length&&0===Object.keys(r.removed).length?null:r}},{key:"updateHistory",value:function(e){this.historyAccumulator.add({changes:e,source:this.isMergingRemoteChanges?"remote":"user"}),0===this.listeners.size&&this.historyAccumulator.clear(),this.history.set(this.history.value+1,e)}},{key:"validate",value:function(e){var t=this;this.allRecords().forEach((function(n){return t.schema.validateRecord(t,n,e,null)}))}},{key:"getSnapshot",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"document";return{store:this.serialize(e),schema:this.schema.serialize()}}},{key:"loadSnapshot",value:function(e){var t=this,n=this.schema.migrateStoreSnapshot(e.store,e.schema);if("error"===n.type)throw new Error("Failed to migrate snapshot: ".concat(n.reason));It((function(){t.clear(),t.put(Object.values(n.value)),t.ensureStoreIsUsable()}))}},{key:"extractingChanges",value:function(e){var t=[],n=this.historyAccumulator.intercepting((function(e){return t.push(e.changes)}));try{return It(e),Gt(t)}finally{n()}}},{key:"applyDiff",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this._runCallbacks;try{this._runCallbacks=n,It((function(){var n=fe(e.added).concat(fe(e.updated).map((function(e){var t=L(e,2);t[0];return t[1]}))),r=de(e.removed);n.length&&t.put(n),r.length&&t.remove(r)}))}finally{this._runCallbacks=r}}},{key:"ensureStoreIsUsable",value:function(){var e,t;null!==(e=this._integrityChecker)&&void 0!==e||(this._integrityChecker=this.schema.createIntegrityChecker(this)),null===(t=this._integrityChecker)||void 0===t||t.call(this)}},{key:"markAsPossiblyCorrupted",value:function(){this._isPossiblyCorrupted=!0}},{key:"isPossiblyCorrupted",value:function(){return this._isPossiblyCorrupted}}]),e}();function Gt(e){var t,n={added:{},removed:{},updated:{}},r=X(e);try{for(r.s();!(t=r.n()).done;){var i,o=t.value,a=X(he(o.added));try{for(a.s();!(i=a.n()).done;){var s=L(i.value,2),u=s[0],l=s[1];if(n.removed[u]){var c=n.removed[u];delete n.removed[u],c!==l&&(n.updated[u]=[c,l])}else n.added[u]=l}}catch(k){a.e(k)}finally{a.f()}var d,f=X(he(o.updated));try{for(f.s();!(d=f.n()).done;){var h=L(d.value,2),p=h[0],v=L(h[1],2),g=(v[0],v[1]);n.added[p]?(n.added[p]=g,delete n.updated[p],delete n.removed[p]):n.updated[p]?(n.updated[p][1]=g,delete n.removed[p]):(n.updated[p]=o.updated[p],delete n.removed[p])}}catch(k){f.e(k)}finally{f.f()}var m,y=X(he(o.removed));try{for(y.s();!(m=y.n()).done;){var b=L(m.value,2),w=b[0],x=b[1];n.added[w]?delete n.added[w]:n.updated[w]?(n.removed[w]=n.updated[w][0],delete n.updated[w]):n.removed[w]=x}}catch(k){y.e(k)}finally{y.f()}}}catch(k){r.e(k)}finally{r.f()}return n}var Qt=function(){function e(){z(this,e),O(this,"_history",[]),O(this,"_interceptors",new Set)}return N(e,[{key:"intercepting",value:function(e){var t=this;return this._interceptors.add(e),function(){t._interceptors.delete(e)}}},{key:"add",value:function(e){this._history.push(e);var t,n=X(this._interceptors);try{for(n.s();!(t=n.n()).done;){(0,t.value)(e)}}catch(r){n.e(r)}finally{n.f()}}},{key:"flush",value:function(){var e=function(e){for(var t,n=[],r=e[0],i=1,o=e.length;i<o;i++)t=e[i],r.source!==t.source?(n.push(r),r=t):r={source:r.source,changes:Gt([r.changes,t.changes])};return n.push(r),n}(this._history);return this._history=[],e}},{key:"clear",value:function(){this._history=[]}},{key:"hasChanges",value:function(){return this._history.length>0}}]),e}();function Jt(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var Zt=["typeName","id"];function en(e){var t=e.currentVersion,n=e.firstVersion,r=e.migrators,i=void 0===r?{}:r,o=e.subTypeKey,a=e.subTypeMigrations;if("number"===typeof t&&"number"===typeof n){if(t===n)throw Error("Current version is equal to initial version.");if(t<n)throw Error("Current version is lower than initial version.")}return{firstVersion:null!==n&&void 0!==n?n:0,currentVersion:null!==t&&void 0!==t?t:0,migrators:i,subTypeKey:o,subTypeMigrations:a}}var tn=function(e){return e.IncompatibleSubtype="incompatible-subtype",e.UnknownType="unknown-type",e.TargetVersionTooNew="target-version-too-new",e.TargetVersionTooOld="target-version-too-old",e.MigrationError="migration-error",e.UnrecognizedSubtype="unrecognized-subtype",e}(tn||{});function nn(e){var t=e.record,n=e.migrations,r=e.fromVersion,i=e.toVersion,o=r;if(!function(e){return"object"===typeof e&&null!==e&&"id"in e&&"typeName"in e}(t))throw new Error("[migrateRecord] object is not a record");for(var a=t.typeName,s=t.id,u=Jt(t,Zt);o<i;){var l=o+1,c=n.migrators[l];if(!c)return{type:"error",reason:"target-version-too-new"};u=c.up(u),o=l}for(;o>i;){var d=o-1,f=n.migrators[o];if(!f)return{type:"error",reason:"target-version-too-old"};u=f.down(u),o=d}return{type:"success",value:R(R({},u),{},{id:s,typeName:a})}}function rn(e){for(var t=e.value,n=e.migrations,r=e.fromVersion,i=e.toVersion,o=r;o<i;){var a=o+1,s=n.migrators[a];if(!s)return{type:"error",reason:"target-version-too-new"};t=s.up(t),o=a}for(;o>i;){var u=o-1,l=n.migrators[o];if(!l)return{type:"error",reason:"target-version-too-old"};t=l.down(t),o=u}return{type:"success",value:t}}var on,an=function(){function e(t,n){z(this,e),this.types=t,this.options=n}return N(e,[{key:"currentStoreVersion",get:function(){var e,t;return null!==(e=null===(t=this.options.snapshotMigrations)||void 0===t?void 0:t.currentVersion)&&void 0!==e?e:0}},{key:"validateRecord",value:function(e,t,n,r){try{var i=le(this.types,t.typeName);if(!i)throw new Error("Missing definition for record type ".concat(t.typeName));return i.validate(t)}catch(o){if(this.options.onValidationFailure)return this.options.onValidationFailure({store:e,record:t,phase:n,recordBefore:r,error:o});throw o}}},{key:"migratePersistedRecord",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"up",i=le(this.types,e.typeName),o=t.recordVersions[e.typeName];if(!o||!i)return{type:"error",reason:tn.UnknownType};var a=i.migrations.currentVersion,s=o.version;if(a!==s){var u=nn("up"===r?{record:e,migrations:i.migrations,fromVersion:s,toVersion:a}:{record:e,migrations:i.migrations,fromVersion:a,toVersion:s});if("error"===u.type)return u;e=u.value}if(!i.migrations.subTypeKey)return{type:"success",value:e};var l=null===(n=i.migrations.subTypeMigrations)||void 0===n?void 0:n[e[i.migrations.subTypeKey]],c="subTypeVersions"in o?o.subTypeVersions[e[i.migrations.subTypeKey]]:void 0;if(void 0===l)return{type:"error",reason:tn.UnrecognizedSubtype};if(void 0===c)return{type:"error",reason:tn.IncompatibleSubtype};var d=nn("up"===r?{record:e,migrations:l,fromVersion:c,toVersion:l.currentVersion}:{record:e,migrations:l,fromVersion:l.currentVersion,toVersion:c});return"error"===d.type?d:{type:"success",value:d.value}}},{key:"migrateStoreSnapshot",value:function(e,t){var n,r=this.options.snapshotMigrations;if(!r)return{type:"success",value:e};var i=r.currentVersion,o=null!==(n=t.storeVersion)&&void 0!==n?n:0;if(i<o)return{type:"error",reason:tn.TargetVersionTooOld};if(i>o){var a=rn({value:e,migrations:r,fromVersion:o,toVersion:i});if("error"===a.type)return a;e=a.value}var s,u=[],l=X(fe(e));try{for(l.s();!(s=l.n()).done;){var c=s.value,d=this.migratePersistedRecord(c,t);if("error"===d.type)return d;d.value&&d.value!==c&&u.push(d.value)}}catch(v){l.e(v)}finally{l.f()}if(u.length){e=R({},e);var f,h=X(u);try{for(h.s();!(f=h.n()).done;){var p=f.value;e[p.id]=p}}catch(v){h.e(v)}finally{h.f()}}return{type:"success",value:e}}},{key:"createIntegrityChecker",value:function(e){var t,n,r;return null!==(t=null===(n=(r=this.options).createIntegrityChecker)||void 0===n?void 0:n.call(r,e))&&void 0!==t?t:void 0}},{key:"serialize",value:function(){var e,t;return{schemaVersion:1,storeVersion:null!==(e=null===(t=this.options.snapshotMigrations)||void 0===t?void 0:t.currentVersion)&&void 0!==e?e:0,recordVersions:Object.fromEntries(fe(this.types).map((function(e){return[e.typeName,e.migrations.subTypeKey&&e.migrations.subTypeMigrations?{version:e.migrations.currentVersion,subTypeKey:e.migrations.subTypeKey,subTypeVersions:e.migrations.subTypeMigrations?Object.fromEntries(Object.entries(e.migrations.subTypeMigrations).map((function(e){var t=L(e,2);return[t[0],t[1].currentVersion]}))):void 0}:{version:e.migrations.currentVersion}]})))}}},{key:"serializeEarliestVersion",value:function(){var e,t;return{schemaVersion:1,storeVersion:null!==(e=null===(t=this.options.snapshotMigrations)||void 0===t?void 0:t.firstVersion)&&void 0!==e?e:0,recordVersions:Object.fromEntries(fe(this.types).map((function(e){return[e.typeName,e.migrations.subTypeKey&&e.migrations.subTypeMigrations?{version:e.migrations.firstVersion,subTypeKey:e.migrations.subTypeKey,subTypeVersions:e.migrations.subTypeMigrations?Object.fromEntries(Object.entries(e.migrations.subTypeMigrations).map((function(e){var t=L(e,2);return[t[0],t[1].firstVersion]}))):void 0}:{version:e.migrations.firstVersion}]})))}}}],[{key:"create",value:function(t,n){return new e(t,null!==n&&void 0!==n?n:{})}}]),e}(),sn=function(e,t){if(e.schemaVersion>t.schemaVersion)return 1;if(e.schemaVersion<t.schemaVersion)return-1;if(e.storeVersion>t.storeVersion)return 1;if(e.storeVersion<t.storeVersion)return-1;for(var n=0,r=Object.keys(e.recordVersions);n<r.length;n++){var i=r[n],o=e.recordVersions[i],a=t.recordVersions[i];if(o.version>a.version)return 1;if(o.version<a.version)return-1;if("subTypeVersions"in o&&!("subTypeVersions"in a))return 1;if(!("subTypeVersions"in o)&&"subTypeVersions"in a)return-1;if("subTypeVersions"in o&&"subTypeVersions"in a)for(var s=0,u=Object.keys(o.subTypeVersions);s<u.length;s++){var l=u[s],c=o.subTypeVersions[l],d=a.subTypeVersions[l];if(c>d)return 1;if(c<d)return-1}}return 0},un=Vt("camera",{validator:Je("camera",$e({typeName:He("camera"),id:rt("camera"),x:Ne,y:Ne,z:Ne})),migrations:en({}),scope:"session"}).withDefaultProperties((function(){return{x:0,y:0,z:1}})),ln=$e({x:Ne,y:Ne,z:Ne.optional()}),cn=$e({x:Ne,y:Ne,w:Ne,h:Ne}),dn=Ze(new Set(["accent","white","black","selection-stroke","selection-fill","laser","muted-1"])),fn=Ze(new Set(["none","default","pointer","cross","grab","rotate","grabbing","resize-edge","resize-corner","text","move","ew-resize","ns-resize","nesw-resize","nwse-resize","nesw-rotate","nwse-rotate","swne-rotate","senw-rotate","zoom-in","zoom-out"])),hn=$e({color:dn,type:fn,rotation:Ne}),pn=Ne.check((function(e){if(e<0||e>1)throw new Ee("Opacity must be between 0 and 1")})),vn=new Set(["starting","paused","active","stopping"]),gn=$e({points:Xe(ln),size:ze,color:dn,opacity:Ne,state:Ze(vn),delay:Ne}),mn=rt("page"),yn=Vt("page",{validator:Je("page",$e({typeName:He("page"),id:mn,name:De,index:De})),migrations:en({}),scope:"document"});function bn(e){return yn.isId(e)}var wn=["exportBackground"],xn=["dialog"],kn=["isToolLocked"],Sn=["propsForNextShape"],_n=["propsForNextShape"],En=["labelColor"],Cn=["followingUserId"],Pn=["zoomBrush"],In=["verticalAlign"],Tn=["delay"],Mn=["userId"],An=["isPenMode","isGridMode"],On=["opacity"],jn=["propsForNextShape"],Rn=["opacityForNextShape"],Ln=["chatMessage","isChatting"],Dn=["highlightedUserIds"],Nn=["propsForNextShape"],zn=["stylesForNextShape"];rt("instance");var Bn,Fn=2,Un=3,Kn=4,Vn=5,Wn=6,Hn=7,Yn=8,Xn=9,qn=10,$n=11,Gn=12,Qn=13,Jn=14,Zn=15,er=16,tr=en({currentVersion:er,migrators:(on={},O(on,1,{up:function(e){return R(R({},e),{},{exportBackground:!0})},down:function(e){e.exportBackground;return Jt(e,wn)}}),O(on,Fn,{up:function(e){e.dialog;return Jt(e,xn)},down:function(e){return R(R({},e),{},{dialog:null})}}),O(on,Un,{up:function(e){return R(R({},e),{},{isToolLocked:!1})},down:function(e){e.isToolLocked;return Jt(e,kn)}}),O(on,Kn,{up:function(e){var t=e.propsForNextShape;return R(R({},Jt(e,Sn)),{},{propsForNextShape:Object.fromEntries(Object.entries(t).filter((function(e){var t=L(e,1)[0];return["color","labelColor","dash","fill","size","font","align","verticalAlign","icon","geo","arrowheadStart","arrowheadEnd","spline"].includes(t)})))})},down:function(e){return e}}),O(on,Vn,{up:function(e){var t=e.propsForNextShape;return R(R({},Jt(e,_n)),{},{propsForNextShape:R(R({},t),{},{labelColor:"black"})})},down:function(e){var t=e.propsForNextShape,n=(t.labelColor,Jt(t,En));return R(R({},e),{},{propsForNextShape:R({},n)})}}),O(on,Wn,{up:function(e){return R(R({},e),{},{followingUserId:null})},down:function(e){e.followingUserId;return Jt(e,Cn)}}),O(on,Hn,{up:function(e){var t=e.propsForNextShape.align;return"justify"===t&&(t="start"),R(R({},e),{},{propsForNextShape:R(R({},e.propsForNextShape),{},{align:t})})},down:function(e){return R({},e)}}),O(on,Yn,{up:function(e){return R(R({},e),{},{zoomBrush:null})},down:function(e){e.zoomBrush;return Jt(e,Pn)}}),O(on,Xn,{up:function(e){return R(R({},e),{},{propsForNextShape:R(R({},e.propsForNextShape),{},{verticalAlign:"middle"})})},down:function(e){var t=e.propsForNextShape,n=(t.verticalAlign,Jt(t,In));return R(R({},e),{},{propsForNextShape:n})}}),O(on,qn,{up:function(e){return null!==e.scribble?R(R({},e),{},{scribble:R(R({},e.scribble),{},{delay:0})}):R({},e)},down:function(e){if(null!==e.scribble){var t=e.scribble,n=(t.delay,Jt(t,Tn));return R(R({},e),{},{scribble:n})}return R({},e)}}),O(on,$n,{up:function(e){e.userId;return Jt(e,Mn)},down:function(e){return R(R({},e),{},{userId:"user:none"})}}),O(on,Gn,{up:function(e){return R(R({},e),{},{isPenMode:!1,isGridMode:!1})},down:function(e){e.isPenMode,e.isGridMode;return Jt(e,An)}}),O(on,Qn,{up:function(e){var t=e.propsForNextShape,n=t.opacity,r=Jt(t,On);return R(R({},Jt(e,jn)),{},{opacityForNextShape:Number(null!==n&&void 0!==n?n:"1"),propsForNextShape:r})},down:function(e){var t=e.opacityForNextShape,n=Jt(e,Rn);return R(R({},n),{},{propsForNextShape:R(R({},n.propsForNextShape),{},{opacity:t<.175?"0.1":t<.375?"0.25":t<.625?"0.5":t<.875?"0.75":"1"})})}}),O(on,Jn,{up:function(e){return R(R({},e),{},{chatMessage:"",isChatting:!1})},down:function(e){e.chatMessage,e.isChatting;return Jt(e,Ln)}}),O(on,Zn,{up:function(e){return R(R({},e),{},{highlightedUserIds:[]})},down:function(e){e.highlightedUserIds;return Jt(e,Dn)}}),O(on,er,{up:function(e){e.propsForNextShape;return R(R({},Jt(e,Nn)),{},{stylesForNextShape:{}})},down:function(e){e.stylesForNextShape;return R(R({},Jt(e,zn)),{},{propsForNextShape:{color:"black",labelColor:"black",dash:"draw",fill:"none",size:"m",icon:"file",font:"draw",align:"middle",verticalAlign:"middle",geo:"rectangle",arrowheadStart:"none",arrowheadEnd:"arrow",spline:"line"}})}}),on)}),nr="instance:instance",rr=De.refine((function(e){if(!e.startsWith("page:")&&!e.startsWith("shape:"))throw new Error('Parent ID must start with "page:" or "shape:"');return e})),ir=rt("shape");var or,ar=["croppingId"],sr=["instanceId","cameraId"],ur=Je("instance_page_state",$e({typeName:He("instance_page_state"),id:rt("instance_page_state"),pageId:mn,selectedIds:Xe(ir),hintingIds:Xe(ir),erasingIds:Xe(ir),hoveredId:ir.nullable(),editingId:ir.nullable(),croppingId:ir.nullable(),focusLayerId:ir.nullable()})),lr=2,cr=en({currentVersion:lr,migrators:(Bn={},O(Bn,1,{up:function(e){return R(R({},e),{},{croppingId:null})},down:function(e){e.croppingId;return Jt(e,ar)}}),O(Bn,lr,{up:function(e){e.instanceId,e.cameraId;return Jt(e,sr)},down:function(e){return R(R({},e),{},{instanceId:nr,cameraId:un.createId("void")})}}),Bn)}),dr=Vt("instance_page_state",{migrations:cr,validator:ur,scope:"session"}).withDefaultProperties((function(){return{editingId:null,croppingId:null,selectedIds:[],hoveredId:null,erasingIds:[],hintingIds:[],focusLayerId:null}})),fr=Vt("pointer",{validator:Je("pointer",$e({typeName:He("pointer"),id:rt("pointer"),x:Ne,y:Ne,lastActivityTimestamp:Ne})),migrations:en({}),scope:"session"}).withDefaultProperties((function(){return{x:0,y:0,lastActivityTimestamp:0}})),hr=fr.createId("pointer"),pr=["delay"],vr=["instanceId"],gr=["chatMessage"],mr=Je("instance_presence",$e({typeName:He("instance_presence"),id:rt("instance_presence"),userId:De,userName:De,lastActivityTimestamp:Ne,followingUserId:De.nullable(),cursor:$e({x:Ne,y:Ne,type:fn,rotation:Ne}),color:De,camera:$e({x:Ne,y:Ne,z:Ne}),screenBounds:cn,selectedIds:Xe(rt("shape")),currentPageId:rt("page"),brush:cn.nullable(),scribble:gn.nullable(),chatMessage:De})),yr=2,br=3,wr=en({currentVersion:br,migrators:(or={},O(or,1,{up:function(e){return null!==e.scribble?R(R({},e),{},{scribble:R(R({},e.scribble),{},{delay:0})}):R({},e)},down:function(e){if(null!==e.scribble){var t=e.scribble,n=(t.delay,Jt(t,pr));return R(R({},e),{},{scribble:n})}return R({},e)}}),O(or,yr,{up:function(e){e.instanceId;return Jt(e,vr)},down:function(e){return R(R({},e),{},{instanceId:nr})}}),O(or,br,{up:function(e){return R(R({},e),{},{chatMessage:""})},down:function(e){e.chatMessage;return Jt(e,gr)}}),or)}),xr=Vt("instance_presence",{migrations:wr,validator:mr,scope:"presence"}).withDefaultProperties((function(){return{lastActivityTimestamp:0,followingUserId:null,color:"#FF0000",camera:{x:0,y:0,z:1},cursor:{x:0,y:0,type:"default",rotation:0},screenBounds:{x:0,y:0,w:1,h:1},selectedIds:[],brush:null,scribble:null,chatMessage:""}})),kr=function(e,t){return function(n){return Nt("instancePresence",(function(){var r=n.get(nr),i=n.get(dr.createId(null===r||void 0===r?void 0:r.currentPageId)),o=n.get(un.createId(null===r||void 0===r?void 0:r.currentPageId)),a=n.get(hr),s=e.value;return i&&r&&o&&a&&s?xr.create({id:null!==t&&void 0!==t?t:xr.createId(n.id),selectedIds:i.selectedIds,brush:r.brush,scribble:r.scribble,userId:s.id,userName:s.name,followingUserId:r.followingUserId,camera:{x:o.x,y:o.y,z:o.z},color:s.color,currentPageId:r.currentPageId,cursor:{x:a.x,y:a.y,rotation:r.cursor.rotation,type:r.cursor.type},lastActivityTimestamp:a.lastActivityTimestamp,screenBounds:r.screenBounds,chatMessage:r.chatMessage}):null}))}},Sr=["name"],_r=Je("document",$e({typeName:He("document"),id:He("document:document"),gridSize:Ne,name:De})),Er=1,Cr=en({currentVersion:Er,migrators:O({},Er,{up:function(e){return R(R({},e),{},{name:""})},down:function(e){e.name;return Jt(e,Sr)}})}),Pr=Vt("document",{migrations:Cr,validator:_r,scope:"document"}).withDefaultProperties((function(){return{gridSize:10,name:""}})),Ir=Pr.createId("document");function Tr(e,t){return e.index<t.index?-1:e.index>t.index?1:0}function Mr(e){"asset"===e.typeName&&("src"in e&&(e.src="<redacted>"),"src"in e.props&&(e.props.src="<redacted>"))}var Ar=function(e){var t=e.error,n=e.phase,r=e.record,i=e.recordBefore;throw ie(t,{tags:{origin:"store.validateRecord",storePhase:n,isExistingValidationIssue:"initialize"===n},extras:{recordBefore:i?Mr(_e(i)):void 0,recordAfter:Mr(_e(r))}}),t};function Or(e){var t=e.query.ids("page");return function n(){if(!e.has(Ir))return e.put([Pr.create({id:Ir,name:e.props.defaultName})]),n();if(!e.has(hr))return e.put([fr.create({id:hr})]),n();var r=t.value;if(0===r.size)return e.put([yn.create({name:"Page 1",index:"a1"})]),n();var i=function(){return u(r).map((function(t){return e.get(t)})).sort(Tr)[0].id},o=e.get(nr);if(!o)return e.put([e.schema.types.instance.create({id:nr,currentPageId:i(),exportBackground:!0})]),n();if(!r.has(o.currentPageId))return e.put([R(R({},o),{},{currentPageId:i()})]),n();var a,s=new Set,l=new Set,c=X(r);try{for(c.s();!(a=c.n()).done;){var d=a.value,f=dr.createId(d);e.has(f)||s.add(f);var h=un.createId(d);e.has(h)||l.add(h)}}catch(p){c.e(p)}finally{c.f()}s.size>0&&e.put(u(s).map((function(e){return dr.create({id:e,pageId:dr.parseId(e)})}))),l.size>0&&e.put(u(l).map((function(e){return un.create({id:e})})))}}var jr,Rr,Lr,Dr,Nr=ot("bookmark",$e({title:De,description:De,image:De,src:De.nullable()})),zr=en({}),Br=["isAnimated"],Fr=["width","height"],Ur=["w","h"],Kr=ot("image",$e({w:Ne,h:Ne,name:De,isAnimated:Ve,mimeType:De.nullable(),src:De.nullable()})),Vr=2,Wr=en({currentVersion:Vr,migrators:(jr={},O(jr,1,{up:function(e){return R(R({},e),{},{props:R(R({},e.props),{},{isAnimated:!1})})},down:function(e){var t=e.props,n=(t.isAnimated,Jt(t,Br));return R(R({},e),{},{props:n})}}),O(jr,Vr,{up:function(e){var t=e.props,n=t.width,r=t.height,i=Jt(t,Fr);return R(R({},e),{},{props:R({w:n,h:r},i)})},down:function(e){var t=e.props,n=t.w,r=t.h,i=Jt(t,Ur);return R(R({},e),{},{props:R({width:n,height:r},i)})}}),jr)}),Hr=["isAnimated"],Yr=["width","height"],Xr=["w","h"],qr=ot("video",$e({w:Ne,h:Ne,name:De,isAnimated:Ve,mimeType:De.nullable(),src:De.nullable()})),$r=2,Gr=en({currentVersion:$r,migrators:(Rr={},O(Rr,1,{up:function(e){return R(R({},e),{},{props:R(R({},e.props),{},{isAnimated:!1})})},down:function(e){var t=e.props,n=(t.isAnimated,Jt(t,Hr));return R(R({},e),{},{props:n})}}),O(Rr,$r,{up:function(e){var t=e.props,n=t.width,r=t.height,i=Jt(t,Yr);return R(R({},e),{},{props:R({w:n,h:r},i)})},down:function(e){var t=e.props,n=t.w,r=t.h,i=Jt(t,Xr);return R(R({},e),{},{props:R({width:n,height:r},i)})}}),Rr)}),Qr=Je("asset",Qe("type",{image:Kr,video:qr,bookmark:Nr})),Jr=Vt("asset",{migrations:en({subTypeKey:"type",subTypeMigrations:{image:Wr,video:Gr,bookmark:zr}}),validator:Qr,scope:"document"}),Zr=function(){function e(t,n,r){z(this,e),this.id=t,this.defaultValue=n,this.type=r}return N(e,[{key:"validate",value:function(e){return this.type.validate(e)}}],[{key:"define",value:function(t,n){var r=n.defaultValue,i=n.type;return new e(t,r,void 0===i?Le:i)}},{key:"defineEnum",value:function(e,t){var n=t.defaultValue,r=t.values;return new ei(e,n,r)}}]),e}(),ei=function(t){U(r,t);var n=W(r);function r(t,i,o){var a;return z(this,r),(a=n.call(this,t,i,nt.apply(e,u(o)))).values=o,a}return N(r)}(Zr),ti=["isLocked"],ni=["opacity"],ri=["props"],ii=["opacity"],oi=2,ai=en({currentVersion:oi,migrators:(Lr={},O(Lr,1,{up:function(e){return R(R({},e),{},{isLocked:!1})},down:function(e){e.isLocked;return R({},Jt(e,ti))}}),O(Lr,oi,{up:function(e){var t=e.props,n=t.opacity,r=Jt(t,ni);return R(R({},Jt(e,ri)),{},{opacity:Number(null!==n&&void 0!==n?n:"1"),props:r})},down:function(e){var t=e.opacity,n=Jt(e,ii);return R(R({},n),{},{props:R(R({},n.props),{},{opacity:t<.175?"0.1":t<.375?"0.25":t<.625?"0.5":t<.875?"0.75":"1"})})}}),Lr)});function si(e){return!!e&&"shape"===e.typeName}function ui(e){return!!e&&e.startsWith("shape:")}function li(e){return"shape:".concat(null!==e&&void 0!==e?e:Ut())}function ci(e){for(var t=new Map,n=0,r=Object.entries(e);n<r.length;n++){var i=L(r[n],2),o=i[0],a=i[1];if(a instanceof Zr){if(t.has(a))throw new Error("Duplicate style prop ".concat(a.id,". Each style prop can only be used once within a shape."));t.set(a,o)}}return t}function di(e){return Vt("shape",{migrations:en({currentVersion:ai.currentVersion,firstVersion:ai.firstVersion,migrators:ai.migrators,subTypeKey:"type",subTypeMigrations:ge(e,(function(e,t){var n;return null!==(n=t.migrations)&&void 0!==n?n:en({})}))}),scope:"document",validator:Je("shape",Qe("type",ge(e,(function(e,t){return function(e,t){return $e({id:ir,typeName:He("shape"),x:Ne,y:Ne,rotation:Ne,index:De,parentId:rr,type:He(e),isLocked:Ve,opacity:pn,props:t?$e(t):qe})}(e,t.props)}))))}).withDefaultProperties((function(){return{x:0,y:0,rotation:0,isLocked:!1,opacity:1}}))}var fi=2,hi=3,pi=4,vi=en({currentVersion:pi,migrators:(Dr={},O(Dr,1,{up:function(e){return Object.fromEntries(Object.entries(e).filter((function(e){var t=L(e,2),n=(t[0],t[1]);return"shape"!==n.typeName||"icon"!==n.type&&"code"!==n.type})))},down:function(e){return e}}),O(Dr,fi,{up:function(e){return e},down:function(e){return Object.fromEntries(Object.entries(e).filter((function(e){var t=L(e,2);t[0];return"instance_presence"!==t[1].typeName})))}}),O(Dr,hi,{up:function(e){return Object.fromEntries(Object.entries(e).filter((function(e){var t=L(e,2);t[0];return!t[1].typeName.match(/^(user|user_presence)$/)})))},down:function(e){return Object.fromEntries(Object.entries(e).filter((function(e){var t=L(e,2);t[0];return"pointer"!==t[1].typeName})))}}),O(Dr,pi,{up:function(e){return Object.fromEntries(Object.entries(e).filter((function(e){var t=L(e,2);t[0];return!t[1].typeName.match("user_document")})))},down:function(e){return e}}),Dr)});function gi(e){var t,n=e.shapes,r=new Map,i=X(fe(n));try{for(i.s();!(t=i.n()).done;){var o,a,s=X(ci(null!==(o=t.value.props)&&void 0!==o?o:{}).keys());try{for(s.s();!(a=s.n()).done;){var u=a.value;if(r.has(u.id)&&r.get(u.id)!==u)throw new Error("Multiple StyleProp instances with the same id: ".concat(u.id));r.set(u.id,u)}}catch(d){s.e(d)}finally{s.f()}}}catch(d){i.e(d)}finally{i.f()}var l=di(n),c=function(e){var t,n={},r=X(e);try{for(r.s();!(t=r.n()).done;){var i=L(t.value,2),o=i[0],a=i[1];n[o]=et(a)}}catch(d){r.e(d)}finally{r.f()}var s=Je("instance",$e({typeName:He("instance"),id:rt("instance"),currentPageId:mn,followingUserId:De.nullable(),brush:cn.nullable(),opacityForNextShape:pn,stylesForNextShape:$e(n),cursor:hn,scribble:gn.nullable(),isFocusMode:Ve,isDebugMode:Ve,isToolLocked:Ve,exportBackground:Ve,screenBounds:cn,zoomBrush:cn.nullable(),isPenMode:Ve,isGridMode:Ve,chatMessage:De,isChatting:Ve,highlightedUserIds:Xe(De)}));return Vt("instance",{migrations:tr,validator:s,scope:"session"}).withDefaultProperties((function(){return{followingUserId:null,opacityForNextShape:1,stylesForNextShape:{},brush:null,scribble:null,cursor:{type:"default",color:"black",rotation:0},isFocusMode:!1,exportBackground:!1,isDebugMode:!1,isToolLocked:!1,screenBounds:{x:0,y:0,w:1080,h:720},zoomBrush:null,isGridMode:!1,isPenMode:!1,chatMessage:"",isChatting:!1,highlightedUserIds:[]}}))}(r);return an.create({asset:Jr,camera:un,document:Pr,instance:c,instance_page_state:dr,page:yn,shape:l,instance_presence:xr,pointer:fr},{snapshotMigrations:vi,onValidationFailure:Ar,createIntegrityChecker:Or})}var mi,yi,bi,wi,xi=["black","grey","light-violet","violet","blue","light-blue","yellow","orange","green","light-green","light-red","red"],ki=Zr.defineEnum("tldraw:color",{defaultValue:"black",values:xi}),Si=Zr.defineEnum("tldraw:labelColor",{defaultValue:"black",values:xi}),_i=Zr.defineEnum("tldraw:dash",{defaultValue:"draw",values:["draw","solid","dashed","dotted"]}),Ei=Zr.defineEnum("tldraw:fill",{defaultValue:"none",values:["none","semi","solid","pattern"]}),Ci=Zr.defineEnum("tldraw:font",{defaultValue:"draw",values:["draw","sans","serif","mono"]}),Pi=Zr.defineEnum("tldraw:size",{defaultValue:"m",values:["s","m","l","xl"]}),Ii=["labelColor"],Ti=["arrow","triangle","square","dot","pipe","diamond","inverted","bar","none"],Mi=Zr.defineEnum("tldraw:arrowheadStart",{defaultValue:"none",values:Ti}),Ai=Zr.defineEnum("tldraw:arrowheadEnd",{defaultValue:"arrow",values:Ti}),Oi=Qe("type",{binding:$e({type:He("binding"),boundShapeId:ir,normalizedAnchor:ln,isExact:Ve}),point:$e({type:He("point"),x:Ne,y:Ne})}),ji={labelColor:Si,color:ki,fill:Ei,dash:_i,size:Pi,arrowheadStart:Mi,arrowheadEnd:Ai,font:Ci,start:Oi,end:Oi,bend:Ne,text:De},Ri=1,Li=en({currentVersion:Ri,migrators:O({},Ri,{up:function(e){return R(R({},e),{},{props:R(R({},e.props),{},{labelColor:"black"})})},down:function(e){var t=e.props,n=(t.labelColor,Jt(t,Ii));return R(R({},e),{},{props:n})}})}),Di=["assetId"],Ni={w:Be,h:Be,assetId:it.nullable(),url:De},zi=1,Bi=en({currentVersion:zi,migrators:O({},zi,{up:function(e){return void 0===e.props.assetId?R(R({},e),{},{props:R(R({},e.props),{},{assetId:null})}):e},down:function(e){if(null===e.props.assetId){var t=e.props,n=(t.assetId,Jt(t,Di));return R(R({},e),{},{props:n})}return e}})}),Fi=["isPen"],Ui=$e({type:nt("free","straight"),points:Xe(ln)}),Ki={color:ki,fill:Ei,dash:_i,size:Pi,segments:Xe(Ui),isComplete:Ve,isClosed:Ve,isPen:Ve},Vi=1,Wi=en({currentVersion:Vi,migrators:O({},Vi,{up:function(e){var t=e.props.segments[0].points;if(0===t.length)return R(R({},e),{},{props:R(R({},e.props),{},{isPen:!1})});var n=!(0===t[0].z||.5===t[0].z);return t[1]&&(n=n&&!(0===t[1].z||.5===t[1].z)),R(R({},e),{},{props:R(R({},e.props),{},{isPen:n})})},down:function(e){var t=e.props,n=(t.isPen,Jt(t,Fi));return R(R({},e),{},{props:R({},n)})}})}),Hi=["tmpOldUrl"],Yi=["doesResize"],Xi=["tmpOldUrl"],qi=["overridePermissions"],$i=/(^\/r\/[^/]+\/?$)/,Gi=function(e){try{return new URL(e)}catch(t){return}},Qi=[{type:"tldraw",title:"tldraw",hostnames:["beta.tldraw.com","lite.tldraw.com","www.tldraw.com"],minWidth:300,minHeight:300,width:720,height:500,doesResize:!0,canUnmount:!0,toEmbedUrl:function(e){var t=Gi(e);if(t&&t.pathname.match($i))return e},fromEmbedUrl:function(e){var t=Gi(e);if(t&&t.pathname.match($i))return e}},{type:"codesandbox",title:"CodeSandbox",hostnames:["codesandbox.io"],minWidth:300,minHeight:300,width:720,height:500,doesResize:!0,canUnmount:!1,toEmbedUrl:function(e){var t=Gi(e),n=t&&t.pathname.match(/\/s\/([^/]+)\/?/);if(n)return"https://codesandbox.io/embed/".concat(n[1])},fromEmbedUrl:function(e){var t=Gi(e),n=t&&t.pathname.match(/\/embed\/([^/]+)\/?/);if(n)return"https://codesandbox.io/s/".concat(n[1])}},{type:"codepen",title:"Codepen",hostnames:["codepen.io"],minWidth:300,minHeight:300,width:520,height:400,doesResize:!0,canUnmount:!1,toEmbedUrl:function(e){var t=e.match(/https:\/\/codepen.io\/([^/]+)\/pen\/([^/]+)/);if(t){var n=L(t,3),r=(n[0],n[1]),i=n[2];return"https://codepen.io/".concat(r,"/embed/").concat(i)}},fromEmbedUrl:function(e){var t=e.match(/https:\/\/codepen.io\/([^/]+)\/embed\/([^/]+)/);if(t){var n=L(t,3),r=(n[0],n[1]),i=n[2];return"https://codepen.io/".concat(r,"/pen/").concat(i)}}},{type:"scratch",title:"Scratch",hostnames:["scratch.mit.edu"],width:520,height:400,doesResize:!1,canUnmount:!1,toEmbedUrl:function(e){var t=e.match(/https?:\/\/scratch.mit.edu\/projects\/([^/]+)/);if(t){var n=L(t,2),r=(n[0],n[1]);return"https://scratch.mit.edu/projects/embed/".concat(r)}},fromEmbedUrl:function(e){var t=e.match(/https:\/\/scratch.mit.edu\/projects\/embed\/([^/]+)/);if(t){var n=L(t,2),r=(n[0],n[1]);return"https://scratch.mit.edu/projects/".concat(r)}}},{type:"youtube",title:"YouTube",hostnames:["*.youtube.com","youtube.com","youtu.be"],width:800,height:450,doesResize:!0,canUnmount:!1,overridePermissions:{"allow-presentation":!0},isAspectRatioLocked:!0,toEmbedUrl:function(e){var t=Gi(e);if(t){var n=t.hostname.replace(/^www./,"");if("youtu.be"===n){var r=t.pathname.split("/").filter(Boolean)[0];return"https://www.youtube.com/embed/".concat(r)}if(("youtube.com"===n||"m.youtube.com"===n)&&t.pathname.match(/^\/watch/)){var i=t.searchParams.get("v");return"https://www.youtube.com/embed/".concat(i)}}},fromEmbedUrl:function(e){var t=Gi(e);if(t&&"youtube.com"===t.hostname.replace(/^www./,"")){var n=t.pathname.match(/^\/embed\/([^/]+)\/?/);if(n)return"https://www.youtube.com/watch?v=".concat(n[1])}}},{type:"figma",title:"Figma",hostnames:["figma.com"],width:720,height:500,doesResize:!0,canUnmount:!0,toEmbedUrl:function(e){if(e.match(/https:\/\/([\w\.-]+\.)?figma.com\/(file|proto)\/([0-9a-zA-Z]{22,128})(?:\/.*)?$/)&&!e.includes("figma.com/embed"))return"https://www.figma.com/embed?embed_host=share&url=".concat(e)},fromEmbedUrl:function(e){var t=Gi(e);if(t&&t.pathname.match(/^\/embed\/?$/)){var n=t.searchParams.get("url");if(n)return n}}},{type:"google_maps",title:"Google Maps",hostnames:["google.*"],width:720,height:500,doesResize:!0,canUnmount:!1,toEmbedUrl:function(e){if(e.includes("/maps/")){var t,n=e.match(/@(.*),(.*),(.*)z/);if(n){var r=L(n,4),i=r[1],o=r[2],a=r[3],s=new URL(e).host.replace("www.","");t="https://".concat(s,"/maps/embed/v1/view?key=").concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.NEXT_PUBLIC_GC_API_KEY,"&center=").concat(i,",").concat(o,"&zoom=").concat(a)}else t="";return t}},fromEmbedUrl:function(e){var t=Gi(e);if(t&&(t.pathname.match(/^\/maps\/embed\/v1\/view\/?$/)&&t.searchParams.has("center")&&t.searchParams.get("zoom"))){var n=t.searchParams.get("zoom"),r=L(t.searchParams.get("center").split(","),2),i=r[0],o=r[1];return"https://www.google.com/maps/@".concat(i,",").concat(o,",").concat(n,"z")}}},{type:"google_calendar",title:"Google Calendar",hostnames:["calendar.google.*"],width:720,height:500,minWidth:460,minHeight:360,doesResize:!0,canUnmount:!1,instructionLink:"https://support.google.com/calendar/answer/41207?hl=en",toEmbedUrl:function(e){var t=Gi(e),n=null===t||void 0===t?void 0:t.searchParams.get("cid");if(null!==t&&void 0!==t&&t.pathname.match(/\/calendar\/u\/0/)&&n){t.pathname="/calendar/embed";for(var r=0,i=Array.from(t.searchParams.keys());r<i.length;r++){var o=i[r];t.searchParams.delete(o)}return t.searchParams.set("src",n),t.href}},fromEmbedUrl:function(e){var t=Gi(e),n=null===t||void 0===t?void 0:t.searchParams.get("src");if(null!==t&&void 0!==t&&t.pathname.match(/\/calendar\/embed/)&&n){t.pathname="/calendar/u/0";for(var r=0,i=Array.from(t.searchParams.keys());r<i.length;r++){var o=i[r];t.searchParams.delete(o)}return t.searchParams.set("cid",n),t.href}}},{type:"google_slides",title:"Google Slides",hostnames:["docs.google.*"],width:720,height:500,minWidth:460,minHeight:360,doesResize:!0,canUnmount:!1,toEmbedUrl:function(e){var t=Gi(e);if(null!==t&&void 0!==t&&t.pathname.match(/^\/presentation/)&&null!==t&&void 0!==t&&t.pathname.match(/\/pub\/?$/)){t.pathname=t.pathname.replace(/\/pub$/,"/embed");for(var n=0,r=Array.from(t.searchParams.keys());n<r.length;n++){var i=r[n];t.searchParams.delete(i)}return t.href}},fromEmbedUrl:function(e){var t=Gi(e);if(null!==t&&void 0!==t&&t.pathname.match(/^\/presentation/)&&null!==t&&void 0!==t&&t.pathname.match(/\/embed\/?$/)){t.pathname=t.pathname.replace(/\/embed$/,"/pub");for(var n=0,r=Array.from(t.searchParams.keys());n<r.length;n++){var i=r[n];t.searchParams.delete(i)}return t.href}}},{type:"github_gist",title:"GitHub Gist",hostnames:["gist.github.com"],width:720,height:500,doesResize:!0,canUnmount:!0,toEmbedUrl:function(e){var t=Gi(e);if(t&&t.pathname.match(/\/([^/]+)\/([^/]+)/)){if(!e.split("/").pop())return;return e}},fromEmbedUrl:function(e){var t=Gi(e);if(t&&t.pathname.match(/\/([^/]+)\/([^/]+)/)){if(!e.split("/").pop())return;return e}}},{type:"replit",title:"Replit",hostnames:["replit.com"],width:720,height:500,doesResize:!0,canUnmount:!1,toEmbedUrl:function(e){var t=Gi(e);if(t&&t.pathname.match(/\/@([^/]+)\/([^/]+)/))return"".concat(e,"?embed=true")},fromEmbedUrl:function(e){var t=Gi(e);if(t&&t.pathname.match(/\/@([^/]+)\/([^/]+)/)&&t.searchParams.has("embed"))return t.searchParams.delete("embed"),t.href}},{type:"felt",title:"Felt",hostnames:["felt.com"],width:720,height:500,doesResize:!0,canUnmount:!1,toEmbedUrl:function(e){var t=Gi(e);if(t&&t.pathname.match(/^\/map\//))return t.origin+"/embed"+t.pathname},fromEmbedUrl:function(e){var t=Gi(e);if(t&&t.pathname.match(/^\/embed\/map\//))return t.pathname=t.pathname.replace(/^\/embed/,""),t.href}},{type:"spotify",title:"Spotify",hostnames:["open.spotify.com"],width:720,height:500,minHeight:500,overrideOutlineRadius:12,doesResize:!0,canUnmount:!1,toEmbedUrl:function(e){var t=Gi(e);if(t&&t.pathname.match(/^\/(artist|album)\//))return t.origin+"/embed"+t.pathname},fromEmbedUrl:function(e){var t=Gi(e);if(t&&t.pathname.match(/^\/embed\/(artist|album)\//))return t.origin+t.pathname.replace(/^\/embed/,"")}},{type:"vimeo",title:"Vimeo",hostnames:["vimeo.com","player.vimeo.com"],width:640,height:360,doesResize:!0,canUnmount:!1,isAspectRatioLocked:!0,toEmbedUrl:function(e){var t=Gi(e);if(t&&"vimeo.com"===t.hostname&&t.pathname.match(/^\/[0-9]+/))return"https://player.vimeo.com/video/"+t.pathname.split("/")[1]+"?title=0&byline=0"},fromEmbedUrl:function(e){var t=Gi(e);if(t&&"player.vimeo.com"===t.hostname){var n=t.pathname.match(/^\/video\/([^/]+)\/?$/);if(n)return"https://vimeo.com/"+n[1]}}},{type:"excalidraw",title:"Excalidraw",hostnames:["excalidraw.com"],width:720,height:500,doesResize:!0,canUnmount:!1,isAspectRatioLocked:!0,toEmbedUrl:function(e){var t=Gi(e);if(t&&t.hash.match(/#room=/))return e},fromEmbedUrl:function(e){var t=Gi(e);if(t&&t.hash.match(/#room=/))return e}},{type:"observable",title:"Observable",hostnames:["observablehq.com"],width:720,height:500,doesResize:!0,canUnmount:!1,isAspectRatioLocked:!1,backgroundColor:"#fff",toEmbedUrl:function(e){var t=Gi(e);if(t&&t.pathname.match(/^\/@([^/]+)\/([^/]+)\/?$/))return"".concat(t.origin,"/embed").concat(t.pathname,"?cell=*");if(t&&t.pathname.match(/^\/d\/([^/]+)\/?$/)){var n=t.pathname.replace(/^\/d/,"");return"".concat(t.origin,"/embed").concat(n,"?cell=*")}},fromEmbedUrl:function(e){var t=Gi(e);return t&&t.pathname.match(/^\/embed\/@([^/]+)\/([^/]+)\/?$/)?"".concat(t.origin).concat(t.pathname.replace("/embed",""),"#cell-*"):t&&t.pathname.match(/^\/embed\/([^/]+)\/?$/)?"".concat(t.origin).concat(t.pathname.replace("/embed","/d"),"#cell-*"):void 0}}],Ji={"allow-downloads-without-user-activation":!1,"allow-downloads":!1,"allow-modals":!1,"allow-orientation-lock":!1,"allow-pointer-lock":!1,"allow-popups":!0,"allow-popups-to-escape-sandbox":!1,"allow-presentation":!1,"allow-storage-access-by-user-activation":!1,"allow-top-navigation":!1,"allow-top-navigation-by-user-activation":!1,"allow-scripts":!0,"allow-same-origin":!0,"allow-forms":!0},Zi={w:Be,h:Be,url:De},eo=2,to=3,no=4,ro=en({currentVersion:no,migrators:(mi={},O(mi,1,{up:function(e){for(var t,n,r=e.props.url,i=new URL(r).host.replace("www.",""),o=0,a=Qi;o<a.length;o++){var s=a[o];if(s.hostnames.includes(i))try{n=s.fromEmbedUrl(r)}catch(u){console.warn(u)}}return R(R({},e),{},{props:R(R({},e.props),{},{tmpOldUrl:e.props.url,url:null!==(t=n)&&void 0!==t?t:""})})},down:function(e){var t,n=e.props.tmpOldUrl;if(!n||""===n)for(var r=e.props.url,i=new URL(r).host.replace("www.",""),o=0,a=Qi;o<a.length;o++){var s=a[o];if(s.hostnames.includes(i))try{n=s.toEmbedUrl(r)}catch(c){console.warn(c)}}var u=e.props,l=(u.tmpOldUrl,Jt(u,Hi));return R(R({},e),{},{props:R(R({},l),{},{url:null!==(t=n)&&void 0!==t?t:""})})}}),O(mi,eo,{up:function(e){var t=e.props,n=(t.doesResize,Jt(t,Yi));return R(R({},e),{},{props:R({},n)})},down:function(e){return R(R({},e),{},{props:R(R({},e.props),{},{doesResize:!0})})}}),O(mi,to,{up:function(e){var t=e.props,n=(t.tmpOldUrl,Jt(t,Xi));return R(R({},e),{},{props:R({},n)})},down:function(e){return R(R({},e),{},{props:R({},e.props)})}}),O(mi,no,{up:function(e){var t=e.props,n=(t.overridePermissions,Jt(t,qi));return R(R({},e),{},{props:R({},n)})},down:function(e){return R(R({},e),{},{props:R({},e.props)})}}),mi)}),io={w:Be,h:Be,name:De},oo=en({}),ao=Zr.defineEnum("tldraw:horizontalAlign",{defaultValue:"middle",values:["start","middle","end","start-legacy","end-legacy","middle-legacy"]}),so=Zr.defineEnum("tldraw:verticalAlign",{defaultValue:"middle",values:["start","middle","end"]}),uo=["url"],lo=["labelColor"],co=["verticalAlign"],fo=Zr.defineEnum("tldraw:geo",{defaultValue:"rectangle",values:["rectangle","ellipse","triangle","diamond","pentagon","hexagon","octagon","star","rhombus","rhombus-2","oval","trapezoid","arrow-right","arrow-left","arrow-up","arrow-down","x-box","check-box"]}),ho={geo:fo,labelColor:Si,color:ki,fill:Ei,dash:_i,size:Pi,font:Ci,align:ao,verticalAlign:so,url:De,w:Be,h:Be,growY:ze,text:De},po=2,vo=3,go=4,mo=5,yo=6,bo=en({currentVersion:yo,migrators:(yi={},O(yi,1,{up:function(e){return R(R({},e),{},{props:R(R({},e.props),{},{url:""})})},down:function(e){var t=e.props,n=(t.url,Jt(t,uo));return R(R({},e),{},{props:n})}}),O(yi,po,{up:function(e){return R(R({},e),{},{props:R(R({},e.props),{},{labelColor:"black"})})},down:function(e){var t=e.props,n=(t.labelColor,Jt(t,lo));return R(R({},e),{},{props:n})}}),O(yi,vo,{up:function(e){var t=e.props.align;return"justify"===t&&(t="start"),R(R({},e),{},{props:R(R({},e.props),{},{align:t})})},down:function(e){return R({},e)}}),O(yi,go,{up:function(e){return R({},e)},down:function(e){return R(R({},e),{},{props:R(R({},e.props),{},{geo:"check-box"===e.props.geo?"rectangle":e.props.geo})})}}),O(yi,mo,{up:function(e){return R(R({},e),{},{props:R(R({},e.props),{},{verticalAlign:"middle"})})},down:function(e){var t=e.props,n=(t.verticalAlign,Jt(t,co));return R(R({},e),{},{props:n})}}),O(yi,yo,{up:function(e){var t;switch(e.props.align){case"start":t="start-legacy";break;case"end":t="end-legacy";break;default:t="middle-legacy"}return R(R({},e),{},{props:R(R({},e.props),{},{align:t})})},down:function(e){var t;switch(e.props.align){case"start-legacy":t="start";break;case"end-legacy":t="end";break;case"middle-legacy":t="middle";break;default:t=e.props.align}return R(R({},e),{},{props:R(R({},e.props),{},{align:t})})}}),yi)}),wo=en({}),xo={color:ki,size:Pi,segments:Xe(Ui),isComplete:Ve,isPen:Ve},ko=en({}),So=["url"],_o=["crop"],Eo=$e({topLeft:ln,bottomRight:ln}),Co={w:Be,h:Be,playing:Ve,url:De,assetId:it.nullable(),crop:Eo.nullable()},Po=2,Io=en({currentVersion:Po,migrators:(bi={},O(bi,1,{up:function(e){return R(R({},e),{},{props:R(R({},e.props),{},{url:""})})},down:function(e){var t=e.props,n=(t.url,Jt(t,So));return R(R({},e),{},{props:n})}}),O(bi,Po,{up:function(e){return R(R({},e),{},{props:R(R({},e.props),{},{crop:null})})},down:function(e){var t=e.props,n=(t.crop,Jt(t,_o));return R(R({},e),{},{props:n})}}),bi)}),To=$e({id:De,type:Ze(new Set(["vertex","virtual","create"])),canBind:Ve.optional(),index:De,x:Ne,y:Ne}),Mo=Zr.defineEnum("tldraw:spline",{defaultValue:"line",values:["cubic","line"]}),Ao={color:ki,dash:_i,size:Pi,spline:Mo,handles:Ge(De,To)},Oo=en({}),jo=["url"],Ro=["verticalAlign"],Lo={color:ki,size:Pi,font:Ci,align:ao,verticalAlign:so,growY:ze,url:De,text:De},Do=2,No=3,zo=4,Bo=en({currentVersion:zo,migrators:(wi={},O(wi,1,{up:function(e){return R(R({},e),{},{props:R(R({},e.props),{},{url:""})})},down:function(e){var t=e.props,n=(t.url,Jt(t,jo));return R(R({},e),{},{props:n})}}),O(wi,Do,{up:function(e){var t=e.props.align;return"justify"===t&&(t="start"),R(R({},e),{},{props:R(R({},e.props),{},{align:t})})},down:function(e){return R({},e)}}),O(wi,No,{up:function(e){var t;switch(e.props.align){case"start":t="start-legacy";break;case"end":t="end-legacy";break;default:t="middle-legacy"}return R(R({},e),{},{props:R(R({},e.props),{},{align:t})})},down:function(e){var t;switch(e.props.align){case"start-legacy":t="start";break;case"end-legacy":t="end";break;case"middle-legacy":t="middle";break;default:t=e.props.align}return R(R({},e),{},{props:R(R({},e.props),{},{align:t})})}}),O(wi,zo,{up:function(e){return R(R({},e),{},{props:R(R({},e.props),{},{verticalAlign:"middle"})})},down:function(e){var t=e.props,n=(t.verticalAlign,Jt(t,Ro));return R(R({},e),{},{props:n})}}),wi)}),Fo={color:ki,size:Pi,font:Ci,align:ao,w:Be,text:De,scale:Be,autoSize:Ve},Uo=1,Ko=en({currentVersion:Uo,migrators:O({},Uo,{up:function(e){var t=e.props.align;return"justify"===t&&(t="start"),R(R({},e),{},{props:R(R({},e.props),{},{align:t})})},down:function(e){return R({},e)}})}),Vo=["url"],Wo={w:Be,h:Be,time:Ne,playing:Ve,url:De,assetId:it.nullable()},Ho=1,Yo=en({currentVersion:Ho,migrators:O({},Ho,{up:function(e){return R(R({},e),{},{props:R(R({},e.props),{},{url:""})})},down:function(e){var t=e.props,n=(t.url,Jt(t,Vo));return R(R({},e),{},{props:n})}})}),Xo=[{locale:"ar",label:"\u0639\u0631\u0628\u064a"},{locale:"ca",label:"Catal\xe0"},{locale:"da",label:"Danish"},{locale:"de",label:"Deutsch"},{locale:"en",label:"English"},{locale:"es",label:"Espa\xf1ol"},{locale:"fa",label:"\u0641\u0627\u0631\u0633\u06cc"},{locale:"fi",label:"Suomi"},{locale:"fr",label:"Fran\xe7ais"},{locale:"gl",label:"Galego"},{locale:"he",label:"\u05e2\u05d1\u05e8\u05d9\u05ea"},{locale:"it",label:"Italiano"},{locale:"ja",label:"\u65e5\u672c\u8a9e"},{locale:"ko-kr",label:"\ud55c\uad6d\uc5b4"},{locale:"ku",label:"\u06a9\u0648\u0631\u062f\u06cc"},{locale:"hi-in",label:"\u0939\u093f\u0928\u094d\u0926\u0940"},{locale:"hu",label:"Magyar"},{locale:"my",label:"\u1019\u103c\u1014\u103a\u1019\u102c\u1005\u102c"},{locale:"ne",label:"\u0928\u0947\u092a\u093e\u0932\u0940"},{locale:"no",label:"Norwegian"},{locale:"pl",label:"Polski"},{locale:"pt-br",label:"Portugu\xeas - Brasil"},{locale:"pt-pt",label:"Portugu\xeas - Europeu"},{locale:"ro",label:"Rom\xe2n\u0103"},{locale:"ru",label:"Russian"},{locale:"sv",label:"Svenska"},{locale:"te",label:"\u0c24\u0c46\u0c32\u0c41\u0c17\u0c41"},{locale:"th",label:"\u0e20\u0e32\u0e29\u0e32\u0e44\u0e17\u0e22"},{locale:"tr",label:"T\xfcrk\xe7e"},{locale:"uk",label:"Ukrainian"},{locale:"vi",label:"Ti\u1ebfng Vi\u1ec7t"},{locale:"zh-cn",label:"Chinese - Simplified"},{locale:"zh-tw",label:"\u7e41\u9ad4\u4e2d\u6587 (\u53f0\u7063)"}];function qo(){var e;return function(e){var t,n=X(e);try{for(n.s();!(t=n.n()).done;){var r=Go(t.value);if(r)return r}}catch(i){n.e(i)}finally{n.f()}return"en"}("undefined"!==typeof window&&null!==(e=window.navigator.languages)&&void 0!==e?e:["en"])}var $o={zh:"zh-cn",pt:"pt-br",ko:"ko-kr",hi:"hi-in"};function Go(e){var t=Xo.find((function(t){return t.locale===e.toLowerCase()}));if(t)return t.locale;var n=e.split(/[-_]/).map((function(e){return e.toLowerCase()})),r=L(n,2),i=r[0];if(r[1]){var o=Xo.find((function(e){return e.locale===i}));if(o)return o.locale}return i in $o?$o[i]:null}var Qo=n(184),Jo="2.0.0-canary.4b8491d388aa",Zo={fonts:{draw:"https://unpkg.com/@tldraw/assets@".concat(Jo,"/fonts/Shantell_Sans-Normal-SemiBold.woff2"),serif:"https://unpkg.com/@tldraw/assets@".concat(Jo,"/fonts/IBMPlexSerif-Medium.woff2"),sansSerif:"https://unpkg.com/@tldraw/assets@".concat(Jo,"/fonts/IBMPlexSans-Medium.woff2"),monospace:"https://unpkg.com/@tldraw/assets@".concat(Jo,"/fonts/IBMPlexMono-Medium.woff2")}};function ea(){ea=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var o=t&&t.prototype instanceof m?t:m,a=Object.create(o.prototype),s=new A(r||[]);return i(a,"_invoke",{value:C(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var f="suspendedStart",h="suspendedYield",p="executing",v="completed",g={};function m(){}function y(){}function b(){}var w={};l(w,a,(function(){return this}));var x=Object.getPrototypeOf,k=x&&x(x(O([])));k&&k!==n&&r.call(k,a)&&(w=k);var S=b.prototype=m.prototype=Object.create(w);function _(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function n(i,o,a,s){var u=d(e[i],e,o);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==M(c)&&r.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(c).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function C(t,n,r){var i=f;return function(o,a){if(i===p)throw new Error("Generator is already running");if(i===v){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var u=P(s,r);if(u){if(u===g)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var l=d(t,n,r);if("normal"===l.type){if(i=r.done?v:h,l.arg===g)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=v,r.method="throw",r.arg=l.arg)}}}function P(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,P(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=d(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function O(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(M(t)+" is not iterable")}return y.prototype=b,i(S,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=l(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,u,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},_(E.prototype),l(E.prototype,s,(function(){return this})),t.AsyncIterator=E,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new E(c(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},_(S),l(S,u,"Generator"),l(S,a,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function ta(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(l){return void n(l)}s.done?t(u):Promise.resolve(u).then(r,i)}function na(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){ta(o,r,i,a,s,"next",e)}function s(e){ta(o,r,i,a,s,"throw",e)}a(void 0)}))}}var ra=n(1694);function ia(e,n){var r=t.useRef(n);r.current=n;var i=L(t.useMemo((function(){var t=null,n=new zt("useStateTracking(".concat(e,")"),(function(){var e;return null===(e=r.current)||void 0===e?void 0:e.call(r)}),{scheduleEffect:function(){var e;null===(e=t)||void 0===e||e()}});return[n,function(e){return t=e,function(){t=null}},function(){return n.scheduleCount}]}),[e]),3),o=i[0],a=i[1],s=i[2];return t.useSyncExternalStore(a,s,s),t.useEffect((function(){return o.attach(),o.maybeScheduleEffect(),function(){o.detach()}}),[o]),o.execute()}var oa={apply:function(e,t,n){var r,i;return ia(null!==(r=null!==(i=e.displayName)&&void 0!==i?i:e.name)&&void 0!==r?r:"tracked(???)",(function(){return e.apply(t,n)}))}},aa=Symbol.for("react.memo"),sa=Symbol.for("react.forward_ref");function ua(e){var n=null,r=e.$$typeof;return r===aa&&(n=(e=e.type).compare),r===sa?(0,t.memo)((0,t.forwardRef)(new Proxy(e.render,oa))):(0,t.memo)(new Proxy(e,oa),n)}function la(){var e=arguments,n=3===e.length?e[2]:[e[0]],r=3===e.length?e[0]:"useValue(".concat(e[0].name,")"),i=(0,t.useMemo)((function(){return 1===e.length?e[0]:Nt(r,e[1])}),n),o=(0,t.useMemo)((function(){return{subscribe:function(e){return Bt("useValue(".concat(r,")"),(function(){i.value,e()}))},getSnapshot:function(){return i.value}}}),[i]),a=o.subscribe,s=o.getSnapshot;return(0,t.useSyncExternalStore)(a,s,s)}Symbol.for("react.memo"),Symbol.for("react.forward_ref");var ca=t.createContext({}),da=function(){return t.useContext(ca)},fa={openWindow:function(e,t){return window.open(e,t,"noopener noreferrer")},refreshPage:function(){return window.location.reload()},hardReset:function(){var e=na(ea().mark((function e(){var t,n;return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=(n=window).__tldraw__hardReset)||void 0===t?void 0:t.call(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()};function ha(){fa.hardReset()}var pa={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:(4-2*e)*e-1},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e},easeInSine:function(e){return 1-Math.cos(e*Math.PI/2)},easeOutSine:function(e){return Math.sin(e*Math.PI/2)},easeInOutSine:function(e){return-(Math.cos(Math.PI*e)-1)/2},easeInExpo:function(e){return e<=0?0:Math.pow(2,10*e-10)},easeOutExpo:function(e){return e>=1?1:1-Math.pow(2,-10*e)},easeInOutExpo:function(e){return e<=0?0:e>=1?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2}},va=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;z(this,e),this.x=t,this.y=n,this.z=r}return N(e,[{key:"pressure",get:function(){return this.z}},{key:"set",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.x,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.y,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.z;return this.x=e,this.y=t,this.z=n,this}},{key:"setTo",value:function(e){var t=e.x,n=void 0===t?0:t,r=e.y,i=void 0===r?0:r,o=e.z,a=void 0===o?1:o;return this.x=n,this.y=i,this.z=a,this}},{key:"rot",value:function(e){if(0===e)return this;var t=this.x,n=this.y,r=Math.sin(e),i=Math.cos(e);return this.x=t*i-n*r,this.y=t*r+n*i,this}},{key:"rotWith",value:function(e,t){if(0===t)return this;var n=this.x-e.x,r=this.y-e.y,i=Math.sin(t),o=Math.cos(t);return this.x=e.x+(n*o-r*i),this.y=e.y+(n*i+r*o),this}},{key:"clone",value:function(){return new e(this.x,this.y,this.z)}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this}},{key:"subXY",value:function(e,t){return this.x-=e,this.y-=t,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this}},{key:"addXY",value:function(e,t){return this.x+=e,this.y+=t,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this}},{key:"clamp",value:function(e,t){return this.x=Math.max(this.x,e),this.y=Math.max(this.y,e),void 0!==t&&(this.x=Math.min(this.x,t),this.y=Math.min(this.y,t)),this}},{key:"div",value:function(e){return this.x/=e,this.y/=e,this}},{key:"divV",value:function(e){return this.x/=e.x,this.y/=e.y,this}},{key:"mul",value:function(e){return this.x*=e,this.y*=e,this}},{key:"mulV",value:function(e){return this.x*=e.x,this.y*=e.y,this}},{key:"abs",value:function(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this}},{key:"nudge",value:function(t,n){var r=e.Tan(t,this);return this.add(r.mul(n))}},{key:"neg",value:function(){return this.x*=-1,this.y*=-1,this}},{key:"cross",value:function(e){return this.x=this.y*e.z-this.z*e.y,this.y=this.z*e.x-this.x*e.z,this}},{key:"dpr",value:function(t){return e.Dpr(this,t)}},{key:"cpr",value:function(t){return e.Cpr(this,t)}},{key:"len2",value:function(){return e.Len2(this)}},{key:"len",value:function(){return e.Len(this)}},{key:"pry",value:function(t){return e.Pry(this,t)}},{key:"per",value:function(){var e=this.x,t=this.y;return this.x=t,this.y=-e,this}},{key:"uni",value:function(){return e.Uni(this)}},{key:"tan",value:function(t){return e.Tan(this,t)}},{key:"dist",value:function(t){return e.Dist(this,t)}},{key:"distanceToLineSegment",value:function(t,n){return e.DistanceToLineSegment(t,n,this)}},{key:"slope",value:function(t){return e.Slope(this,t)}},{key:"snapToGrid",value:function(e){return this.x=Math.round(this.x/e)*e,this.y=Math.round(this.y/e)*e,this}},{key:"angle",value:function(t){return e.Angle(this,t)}},{key:"toAngle",value:function(){return e.ToAngle(this)}},{key:"lrp",value:function(e,t){return this.x=this.x+(e.x-this.x)*t,this.y=this.y+(e.y-this.y)*t,this}},{key:"equals",value:function(t){return e.Equals(this,t)}},{key:"equalsXY",value:function(t,n){return e.EqualsXY(this,t,n)}},{key:"norm",value:function(){var e=this.len();return this.x=0===e?0:this.x/e,this.y=0===e?0:this.y/e,this}},{key:"toFixed",value:function(){return e.ToFixed(this)}},{key:"toString",value:function(){return e.ToString(e.ToFixed(this))}},{key:"toJson",value:function(){return e.ToJson(this)}},{key:"toArray",value:function(){return e.ToArray(this)}}],[{key:"Add",value:function(t,n){return new e(t.x+n.x,t.y+n.y)}},{key:"AddXY",value:function(t,n,r){return new e(t.x+n,t.y+r)}},{key:"Sub",value:function(t,n){return new e(t.x-n.x,t.y-n.y)}},{key:"SubXY",value:function(t,n,r){return new e(t.x-n,t.y-r)}},{key:"AddScalar",value:function(t,n){return new e(t.x+n,t.y+n)}},{key:"SubScalar",value:function(t,n){return new e(t.x-n,t.y-n)}},{key:"Div",value:function(t,n){return new e(t.x/n,t.y/n)}},{key:"Mul",value:function(t,n){return new e(t.x*n,t.y*n)}},{key:"DivV",value:function(t,n){return new e(t.x/n.x,t.y/n.y)}},{key:"MulV",value:function(t,n){return new e(t.x*n.x,t.y*n.y)}},{key:"Neg",value:function(t){return new e(-t.x,-t.y)}},{key:"Per",value:function(t){return new e(t.y,-t.x)}},{key:"Dist2",value:function(t,n){return e.Sub(t,n).len2()}},{key:"Abs",value:function(t){return new e(Math.abs(t.x),Math.abs(t.y))}},{key:"Dist",value:function(e,t){return Math.hypot(e.y-t.y,e.x-t.x)}},{key:"Dpr",value:function(e,t){return e.x*t.x+e.y*t.y}},{key:"Cross",value:function(t,n){return new e(t.y*n.z-t.z*n.y,t.z*n.x-t.x*n.z)}},{key:"Cpr",value:function(e,t){return e.x*t.y-t.x*e.y}},{key:"Len2",value:function(e){return e.x*e.x+e.y*e.y}},{key:"Len",value:function(t){return Math.sqrt(e.Len2(t))}},{key:"Pry",value:function(t,n){return e.Dpr(t,n)/e.Len(n)}},{key:"Uni",value:function(t){return e.Div(t,e.Len(t))}},{key:"Tan",value:function(t,n){return e.Uni(e.Sub(t,n))}},{key:"Min",value:function(t,n){return new e(Math.min(t.x,n.x),Math.min(t.y,n.y))}},{key:"Max",value:function(t,n){return new e(Math.max(t.x,n.x),Math.max(t.y,n.y))}},{key:"From",value:function(t){var n=t.x,r=t.y,i=t.z;return new e(n,r,void 0===i?1:i)}},{key:"FromArray",value:function(t){return new e(t[0],t[1])}},{key:"Rot",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=Math.sin(n),i=Math.cos(n);return new e(t.x*i-t.y*r,t.x*r+t.y*i)}},{key:"RotWith",value:function(t,n,r){var i=t.x-n.x,o=t.y-n.y,a=Math.sin(r),s=Math.cos(r);return new e(n.x+(i*s-o*a),n.y+(i*a+o*s))}},{key:"NearestPointOnLineThroughPoint",value:function(t,n,r){return e.Mul(n,e.Sub(r,t).pry(n)).add(t)}},{key:"NearestPointOnLineSegment",value:function(t,n,r){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=e.Tan(n,t),a=e.Add(t,e.Mul(o,e.Sub(r,t).pry(o)));if(i){if(a.x<Math.min(t.x,n.x))return e.Cast(t.x<n.x?t:n);if(a.x>Math.max(t.x,n.x))return e.Cast(t.x>n.x?t:n);if(a.y<Math.min(t.y,n.y))return e.Cast(t.y<n.y?t:n);if(a.y>Math.max(t.y,n.y))return e.Cast(t.y>n.y?t:n)}return a}},{key:"DistanceToLineThroughPoint",value:function(t,n,r){return e.Dist(r,e.NearestPointOnLineThroughPoint(t,n,r))}},{key:"DistanceToLineSegment",value:function(t,n,r){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return e.Dist(r,e.NearestPointOnLineSegment(t,n,r,i))}},{key:"Snap",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new e(Math.round(t.x/n)*n,Math.round(t.y/n)*n)}},{key:"Cast",value:function(t){return t instanceof e?t:e.From(t)}},{key:"Slope",value:function(e,t){return e.x===t.y?NaN:(e.y-t.y)/(e.x-t.x)}},{key:"Angle",value:function(e,t){return Math.atan2(t.y-e.y,t.x-e.x)}},{key:"Lrp",value:function(t,n,r){return e.Sub(n,t).mul(r).add(t)}},{key:"Med",value:function(t,n){return new e((t.x+n.x)/2,(t.y+n.y)/2)}},{key:"Equals",value:function(e,t){return Math.abs(e.x-t.x)<1e-4&&Math.abs(e.y-t.y)<1e-4}},{key:"EqualsXY",value:function(e,t,n){return e.x===t&&e.y===n}},{key:"Clockwise",value:function(e,t,n){return(n.x-e.x)*(t.y-e.y)-(t.x-e.x)*(n.y-e.y)<0}},{key:"Rescale",value:function(t,n){var r=e.Len(t);return new e(n*t.x/r,n*t.y/r)}},{key:"ScaleWithOrigin",value:function(t,n,r){return e.Sub(t,r).mul(n).add(r)}},{key:"ToFixed",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return new e(+t.x.toFixed(n),+t.y.toFixed(n),+t.z.toFixed(n))}},{key:"Nudge",value:function(t,n,r){return e.Add(t,e.Tan(n,t).mul(r))}},{key:"ToString",value:function(e){return"".concat(e.x,", ").concat(e.y)}},{key:"ToAngle",value:function(e){var t=Math.atan2(e.y,e.x);return t<0&&(t+=2*Math.PI),t}},{key:"ToArray",value:function(e){return[e.x,e.y,e.z]}},{key:"ToJson",value:function(e){return{x:e.x,y:e.y,z:e.z}}},{key:"Average",value:function(t){for(var n=t.length,r=new e(0,0),i=0;i<n;i++)r.add(t[i]);return r.div(n)}},{key:"Clamp",value:function(t,n,r){return void 0===r?new e(Math.min(Math.max(t.x,n)),Math.min(Math.max(t.y,n))):new e(Math.min(Math.max(t.x,n),r),Math.min(Math.max(t.y,n),r))}},{key:"PointsBetween",value:function(t,n){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,i=[],o=0;o<r;o++){var a=pa.easeInQuad(o/(r-1)),s=e.Lrp(t,n,a);s.z=Math.min(1,.5+.65*Math.abs(.5-ga(a))),i.push(s)}return i}},{key:"SnapToGrid",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;return new e(Math.round(t.x/n)*n,Math.round(t.y/n)*n)}}]),e}(),ga=function(e){return e<.5?2*e*e:(4-2*e)*e-1},ma=Math.PI,ya=ma/2,ba=2*ma,wa=Math.PI/180,xa=Math.sin;function ka(e,t,n){return Math.max(t,"undefined"!==typeof n?Math.min(e,n):e)}function Sa(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e10;return e?Math.round(e*t)/t:0}function _a(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-6;return Math.abs(e-t)<=n}function Ea(e,t){var n=Math.pow(e-t,2)/Math.pow(e+t,2);return ma*(e+t)*(1+3*n/(10+Math.sqrt(4-3*n)))}function Ca(e){return(e%=ba)<0?e+=ba:0===e&&(e=0),e}function Pa(e,t){var n=(t-e)%ba;return 2*n%ba-n}function Ia(e,t,n){return e+Pa(e,t)*n}function Ta(e,t){return Pa(e,t)}function Ma(e){return(ba+e)%ba}function Aa(e,t){var n=ba/t,r=Math.floor((Ma(e)+n/2)/n)*n%ba;return r<ma&&(r+=ba),r>ma&&(r-=ba),r}function Oa(e,t){return e===t||_a(e%(Math.PI/2)-t%(Math.PI/2),0)}function ja(e,t,n,r){var i=function(e,t,n){return Ta(va.Angle(e,t),va.Angle(e,n))}(e,n,r);return t*ba*(i/ba)}function Ra(e,t,n,r){return new va(e+n*Math.cos(r),t+n*Math.sin(r))}function La(e,t,n){for(var r=e/2,i=t/2,o=[],a=0;a<n;a++){var s=a*(ba/n)-ya;o.push(new va(r+r*Math.cos(s),i+i*Math.sin(s)))}return o}function Da(e,t,n,r){return e<r&&n<t}function Na(e,t,n,r){var i=Math.max(e,n),o=Math.min(t,r);return i<=o?[i,o]:null}function za(e,t,n){return(t.x-e.x)*(n.y-e.y)-(n.x-e.x)*(t.y-e.y)}function Ba(e,t){for(var n,r,i=0,o=0;o<t.length;o++)n=t[o],r=t[(o+1)%t.length],n.y<=e.y?r.y>e.y&&za(n,r,e)>0&&(i+=1):r.y<=e.y&&za(n,r,e)<0&&(i-=1);return 0!==i}function Fa(e){return+e.toFixed(4)}function Ua(e){return+e.toFixed(2)}var Ka,Va=function(e){return Math.abs(e)<Number.MAX_SAFE_INTEGER},Wa=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;z(this,e),O(this,"x",0),O(this,"y",0),O(this,"w",0),O(this,"h",0),this.x=t,this.y=n,this.w=r,this.h=i}return N(e,[{key:"point",get:function(){return new va(this.x,this.y)},set:function(e){this.x=e.x,this.y=e.y}},{key:"minX",get:function(){return this.x},set:function(e){this.x=e}},{key:"midX",get:function(){return this.x+this.w/2}},{key:"maxX",get:function(){return this.x+this.w}},{key:"minY",get:function(){return this.y},set:function(e){this.y=e}},{key:"midY",get:function(){return this.y+this.h/2}},{key:"maxY",get:function(){return this.y+this.h}},{key:"width",get:function(){return this.w},set:function(e){this.w=e}},{key:"height",get:function(){return this.h},set:function(e){this.h=e}},{key:"aspectRatio",get:function(){return this.width/this.height}},{key:"center",get:function(){return new va(this.midX,this.midY)},set:function(e){this.minX=e.x-this.width/2,this.minY=e.y-this.height/2}},{key:"corners",get:function(){return[new va(this.minX,this.minY),new va(this.maxX,this.minY),new va(this.maxX,this.maxY),new va(this.minX,this.maxY)]}},{key:"snapPoints",get:function(){return[new va(this.minX,this.minY),new va(this.maxX,this.minY),new va(this.maxX,this.maxY),new va(this.minX,this.maxY),this.center]}},{key:"sides",get:function(){var e=this.corners;return[[e[0],e[1]],[e[1],e[2]],[e[2],e[3]],[e[3],e[0]]]}},{key:"size",get:function(){return new va(this.w,this.h)}},{key:"toFixed",value:function(){return this.x=Sa(this.x),this.y=Sa(this.y),this.w=Sa(this.w),this.h=Sa(this.h),this}},{key:"setTo",value:function(e){return this.x=e.x,this.y=e.y,this.w=e.w,this.h=e.h,this}},{key:"set",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return this.x=e,this.y=t,this.w=n,this.h=r,this}},{key:"expand",value:function(e){var t=Math.min(this.minX,e.minX),n=Math.min(this.minY,e.minY),r=Math.max(this.maxX,e.maxX),i=Math.max(this.maxY,e.maxY);return this.x=t,this.y=n,this.w=r-t,this.h=i-n,this}},{key:"expandBy",value:function(e){return this.x-=e,this.y-=e,this.w+=2*e,this.h+=2*e,this}},{key:"scale",value:function(e){return this.x/=e,this.y/=e,this.w/=e,this.h/=e,this}},{key:"clone",value:function(){return new e(this.x,this.y,this.w,this.h)}},{key:"translate",value:function(e){return this.x+=e.x,this.y+=e.y,this}},{key:"snapToGrid",value:function(e){var t=Math.round(this.minX/e)*e,n=Math.round(this.minY/e)*e,r=Math.round(this.maxX/e)*e,i=Math.round(this.maxY/e)*e;this.minX=t,this.minY=n,this.width=Math.max(1,r-t),this.height=Math.max(1,i-n)}},{key:"collides",value:function(t){return e.Collides(this,t)}},{key:"contains",value:function(t){return e.Contains(this,t)}},{key:"includes",value:function(t){return e.Includes(this,t)}},{key:"containsPoint",value:function(t,n){return e.ContainsPoint(this,t,n)}},{key:"getHandlePoint",value:function(e){switch(e){case"top_left":return new va(this.minX,this.minY);case"top_right":return new va(this.maxX,this.minY);case"bottom_left":return new va(this.minX,this.maxY);case"bottom_right":return new va(this.maxX,this.maxY);case"top":return new va(this.midX,this.minY);case"right":return new va(this.maxX,this.midY);case"bottom":return new va(this.midX,this.maxY);case"left":return new va(this.minX,this.midY)}}},{key:"toJson",value:function(){return{x:this.minX,y:this.minY,w:this.w,h:this.h}}},{key:"resize",value:function(e,t,n){var r=this.minX,i=this.minY,o=this.maxX,a=this.maxY,s=this.minX,u=this.minY,l=this.maxX,c=this.maxY;switch(e){case"left":case"top_left":case"bottom_left":s+=t;break;case"right":case"top_right":case"bottom_right":l+=t}switch(e){case"top":case"top_left":case"top_right":u+=n;break;case"bottom":case"bottom_left":case"bottom_right":c+=n}if((l-s)/(o-r)<0){var d=l;l=s,s=d}if((c-u)/(a-i)<0){var f=c;c=u,u=f}this.minX=s,this.minY=u,this.width=Math.abs(l-s),this.height=Math.abs(c-u)}},{key:"union",value:function(e){var t=Math.min(this.minX,e.x),n=Math.min(this.minY,e.y),r=Math.max(this.maxX,e.w+e.x),i=Math.max(this.maxY,e.h+e.y);return this.x=t,this.y=n,this.width=r-t,this.height=i-n,this}},{key:"equals",value:function(t){return e.Equals(this,t)}}],[{key:"From",value:function(t){return new e(t.x,t.y,t.w,t.h)}},{key:"FromPoints",value:function(t){if(0===t.length)return new e;for(var n,r=1/0,i=1/0,o=-1/0,a=-1/0,s=0,u=t.length;s<u;s++)n=t[s],r=Math.min(n.x,r),i=Math.min(n.y,i),o=Math.max(n.x,o),a=Math.max(n.y,a);return new e(r,i,o-r,a-i)}},{key:"Expand",value:function(t,n){var r=Math.min(n.minX,t.minX),i=Math.min(n.minY,t.minY);return new e(r,i,Math.max(n.maxX,t.maxX)-r,Math.max(n.maxY,t.maxY)-i)}},{key:"ExpandBy",value:function(t,n){return new e(t.minX-n,t.minY-n,t.width+2*n,t.height+2*n)}},{key:"Resize",value:function(t,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=t.minX,s=t.minY,u=t.maxX,l=t.maxY,c=t.minX,d=t.minY,f=t.maxX,h=t.maxY;switch(n){case"left":case"top_left":case"bottom_left":c+=r;break;case"right":case"top_right":case"bottom_right":f+=r}switch(n){case"top":case"top_left":case"top_right":d+=i;break;case"bottom":case"bottom_left":case"bottom_right":h+=i}var p=(f-c)/(u-a),v=(h-d)/(l-s),g=p<0,m=v<0;if(o){var y=(u-a)/(l-s),b=Math.abs(f-c),w=Math.abs(h-d),x=b*(v<0?1:-1)*(1/y),k=w*(p<0?1:-1)*y,S=y<b/w;switch(n){case"top_left":S?d=h+x:c=f+k;break;case"top_right":S?d=h+x:f=c-k;break;case"bottom_right":S?h=d-x:f=c-k;break;case"bottom_left":S?h=d-x:c=f+k;break;case"bottom":case"top":var _=(c+f)/2,E=w*y;c=_-E/2,f=_+E/2;break;case"left":case"right":var C=(d+h)/2,P=b/y;d=C-P/2,h=C+P/2}}if(g){var I=f;f=c,c=I}if(m){var T=h;h=d,d=T}var M=new e(c,d,Math.abs(f-c),Math.abs(h-d));return{box:M,scaleX:+(M.width/t.width*(p>0?1:-1)).toFixed(5),scaleY:+(M.height/t.height*(v>0?1:-1)).toFixed(5)}}},{key:"Equals",value:function(e,t){return t.x===e.x&&t.y===e.y&&t.w===e.w&&t.h===e.h}}]),e}();Ka=Wa,O(Wa,"Collides",(function(e,t){return!(e.maxX<t.minX||e.minX>t.maxX||e.maxY<t.minY||e.minY>t.maxY)})),O(Wa,"Contains",(function(e,t){return e.minX<t.minX&&e.minY<t.minY&&e.maxY>t.maxY&&e.maxX>t.maxX})),O(Wa,"Includes",(function(e,t){return Ka.Collides(e,t)||Ka.Contains(e,t)})),O(Wa,"ContainsPoint",(function(e,t,n){return"number"===typeof t?!(t<e.minX||n<e.minY||t>e.maxX||n>e.maxY):!(t.x<e.minX||t.y<e.minY||t.x>e.maxX||t.y>e.maxY)})),O(Wa,"Common",(function(e){for(var t=1/0,n=1/0,r=-1/0,i=-1/0,o=0;o<e.length;o++){var a=e[o];t=Math.min(t,a.minX),n=Math.min(n,a.minY),r=Math.max(r,a.maxX),i=Math.max(i,a.maxY)}return new Ka(t,n,r-t,i-n)})),O(Wa,"Sides",(function(e){var t=e.corners;return[[t[0],t[1]],[t[1],t[2]],[t[2],t[3]],[t[3],t[0]]]}));var Ha,Ya=function(){function e(t){z(this,e),O(this,"_values",void 0),O(this,"_computed",{}),this._values=t}return N(e,[{key:"values",get:function(){return this._values},set:function(e){this._values=e,this._computed={}}},{key:"length",get:function(){if(void 0!==this._computed.length)return this._computed.length;for(var e=this.lut,t=e[0],n=0,r=1;r<e.length;r++){var i=e[r];n+=t.dist(i),t=i}return this._computed.length=n,n}},{key:"bounds",get:function(){if(void 0!==this._computed.bounds)return this._computed.bounds;var e,t=1/0,n=1/0,r=-1/0,i=-1/0,o=X(this.lut);try{for(o.s();!(e=o.n()).done;){var a=e.value;t=Math.min(a.x,t),n=Math.min(a.y,n),r=Math.max(a.x,r),i=Math.max(a.y,i)}}catch(u){o.e(u)}finally{o.f()}var s=new Wa(t,n,r-t,i-n);return this._computed.bounds=s,s}},{key:"lut",get:function(){if(this._computed.lut)return this._computed.lut;for(var e=this.values.p,t=[],n=0;n<e+1;n++)t.push(this.getPoint(n/e));return this._computed.lut=t,t}},{key:"midPoint",get:function(){if(this._computed.midPoint)return this._computed.midPoint;var e=this.getPoint(.5);return this._computed.midPoint=e,e}},{key:"path",get:function(){if(this._computed.path)return this._computed.path;var e=this.getPath();return this._computed.path=e,e}},{key:"getPointAtLength",value:function(e){var t=Math.max(0,Math.min(1,e/this.length));return this.getPoint(t)}},{key:"getNormal",value:function(e){return this.getPoint(e-.0025).tan(this.getPoint(e+.0025)).per().uni().toFixed()}},{key:"getNormalAtLength",value:function(e){return this.getNormal(e/this.length)}},{key:"getClosestPointTo",value:function(e){for(var t=this.lut,n=0,r=t[0],i=t[0].dist(e),o=1;o<t.length;o++){var a=va.Dist(t[o],e);a<i&&(i=a,r=t[o],n=o/t.length)}for(var s=1/this.values.p,u=Math.max(0,n-s/2);u<Math.min(1,n+s/2);u+=s/10){var l=this.getPoint(u),c=va.Dist(l,e);c<i&&(i=c,r=l)}return{point:r,distance:i}}},{key:"update",value:function(e){this._computed={},this.values=R(R({},this.values),e)}}]),e}();Ha=Symbol.iterator;var Xa,qa=function(e){U(n,e);var t=W(n);function n(e,r,i,o){var a,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:25;return z(this,n),O(B(a=t.call(this,{a:e,b:r,c:i,d:o,p:s})),Ha,ea().mark((function e(){var t,n,r,i,o;return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.values,n=t.a,r=t.b,i=t.c,o=t.d,e.delegateYield([n,r,i,o],"t0",2);case 2:case"end":return e.stop()}}),e,this)}))),a}return N(n,[{key:"getPath",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.values,n=t.a,r=t.b,i=t.c,o=t.d;return va.Equals(n,o)?"":"".concat(e?"M".concat(n.x.toFixed(2),",").concat(n.y.toFixed(2),"C"):"").concat(r.x.toFixed(2),",").concat(r.y.toFixed(2)," ").concat(i.x.toFixed(2),",").concat(i.y.toFixed(2)," ").concat(o.x.toFixed(2),",").concat(o.y.toFixed(2))}},{key:"getPoint",value:function(e){var t=this.values,n=t.a,r=t.b,i=t.c,o=t.d;return e<=0?va.From(n):e>=1?va.From(o):new va((1-e)*(1-e)*(1-e)*n.x+(1-e)*(1-e)*3*e*r.x+3*(1-e)*(e*e)*i.x+e*e*e*o.x,(1-e)*(1-e)*(1-e)*n.y+(1-e)*(1-e)*3*e*r.y+3*(1-e)*(e*e)*i.y+e*e*e*o.y)}},{key:"getX",value:function(e){var t=this.values,n=t.a,r=t.b,i=t.c,o=t.d;return(1-e)*(1-e)*(1-e)*n.x+(1-e)*(1-e)*3*e*r.x+3*(1-e)*(e*e)*i.x+e*e*e*o.x}},{key:"getY",value:function(e){var t=this.values,n=t.a,r=t.b,i=t.c,o=t.d;return(1-e)*(1-e)*(1-e)*n.y+(1-e)*(1-e)*3*e*r.y+3*(1-e)*(e*e)*i.y+e*e*e*o.y}}]),n}(Ya),$a=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;z(this,e),O(this,"computed",{}),this.points=t,this.p=n,this.k=r}return N(e,[{key:"length",get:function(){if(void 0!==this.computed.length)return this.computed.length;var e=this.segments.reduce((function(e,t){return e+t.length}),0);return this.computed.length=e,e}},{key:"bounds",get:function(){if(void 0!==this.computed.bounds)return this.computed.bounds;var e=this.segments,t=Wa.Common(e.map((function(e){return e.bounds})));return this.computed.bounds=t,t}},{key:"head",get:function(){return this.points[0]}},{key:"tail",get:function(){var e=this.points;return e[e.length-1]}},{key:"path",get:function(){if(void 0!==this.computed.path)return this.computed.path;var e=this.segments.map((function(e){return e.path})).filter((function(e){return void 0!==e&&null!==e&&""!==e})).join(" ");return this.computed.path=e,e}},{key:"addPoint",value:function(e){var t=this.points,n=this.k,r=this.p;return t.push(e),this.computed={},this.getSegmentsFromPoints(this.points,r,n),this}},{key:"removePoint",value:function(e){var t=this.points,n=this.k,r=this.p,i="number"===typeof e?Math.floor(e):t.indexOf(e);return-1===i||(t.splice(i,1),this.computed={},this.getSegmentsFromPoints(this.points,r,n)),this}},{key:"getPointAtLength",value:function(e){var t=this.segments,n=e;if(e<=0)return t[0].getPoint(0);if(e>=this.length)return t[t.length-1].getPoint(1);for(var r=0;r<t.length;r++){var i=t[r],o=i.length;if(n<o)return i.getPoint(n/o);n-=i.length}return t[t.length-1].getPoint(1)}},{key:"getPoint",value:function(e){return e<=0?this.segments[0].getPoint(0):e>=1?this.segments[this.segments.length-1].getPoint(1):this.getPointAtLength(e*this.length)}},{key:"getNormal",value:function(e){var t=this.length;return this.getNormalAtLength(e*t)}},{key:"getNormalAtLength",value:function(e){var t=this.segments;if(e<0)return new va(0,0);var n,r=e,i=X(t);try{for(i.s();!(n=i.n()).done;){var o=n.value,a=o.length;if(r<=a)return o.getNormal(r/a);r-=a}}catch(s){i.e(s)}finally{i.f()}return new va(0,0)}},{key:"getClosestPointTo",value:function(e){var t,n=this.head,r=this.segments,i=n,o=va.Dist(e,n),a=X(r);try{for(a.s();!(t=a.n()).done;){var s=t.value.getClosestPointTo(e);s.distance<o&&(o=s.distance,i=s.point)}}catch(u){a.e(u)}finally{a.f()}return{point:i,distance:o}}}]),e}(),Ga=function(e){U(n,e);var t=W(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.2,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20;return z(this,n),O(B(r=t.call(this,e,i,o)),"segments",void 0),r.segments=r.getSegmentsFromPoints(e,i,o),r}return N(n,[{key:"getSegmentsFromPoints",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.25,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,r=e.length,i=r-2,o=[],a=0;a<r-1;a++){var s=0===a?e[0]:e[a-1],u=e[a],l=e[a+1],c=a===i?l:e[a+2];o.push(new qa(u,0===a?s:new va(u.x+(l.x-s.x)/6*t,u.y+(l.y-s.y)/6*t),a===i?l:new va(l.x-(c.x-u.x)/6*t,l.y-(c.y-u.y)/6*t),l,n))}return o}}],[{key:"FromPoints",value:function(e){return new n(e)}}]),n}($a),Qa=function(e){U(n,e);var t=W(n);function n(e,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;return z(this,n),(i=t.call(this,{a:e,b:r,p:o})).a=e,i.b=r,i.values.p=Math.max(10,Math.ceil(i.length/20)),i}return N(n,[{key:"length",get:function(){return va.Dist(this.a,this.b)}},{key:"tangent",get:function(){return va.Tan(this.a,this.b)}},{key:"angle",get:function(){return va.Angle(this.a,this.b)}},{key:"bounds",get:function(){return Wa.FromPoints([this.a,this.b])}},{key:"getX",value:function(e){var t=this.values,n=t.a,r=t.b;return n.x+(r.x-n.x)*e}},{key:"getY",value:function(e){var t=this.values,n=t.a,r=t.b;return n.y+(r.y-n.y)*e}},{key:"getPoint",value:function(e){var t=this.values,n=t.a,r=t.b;return e<=0?va.From(n):e>=1?va.From(r):va.Lrp(n,r,e)}},{key:"getPath",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.values,n=t.a,r=t.b;return va.Equals(n,r)?"":e?"M".concat(n.x,",").concat(n.y,"L").concat(r.x,",").concat(r.y):"".concat(r.x,",").concat(r.y)}},{key:"getNormal",value:function(){var e=this.values,t=e.a,n=e.b;return va.Sub(t,n).per().uni().toFixed()}},{key:"getClosestPointTo",value:function(e){var t=this.values,n=t.a,r=t.b,i=va.NearestPointOnLineSegment(n,r,e),o=i.dist(e);return{point:i,distance:o}}}],[{key:"Length",value:function(e){return va.Dist(e.a,e.b)}},{key:"Tangent",value:function(e){return va.Tan(e.a,e.b)}},{key:"Angle",value:function(e){return va.Angle(e.a,e.b)}}]),n}(Ya),Ja=function(){function e(t,n,r,i,o,a){z(this,e),O(this,"a",1),O(this,"b",0),O(this,"c",0),O(this,"d",1),O(this,"e",0),O(this,"f",0),this.a=t,this.b=n,this.c=r,this.d=i,this.e=o,this.f=a}return N(e,[{key:"equals",value:function(e){return this.a===e.a&&this.b===e.b&&this.c===e.c&&this.d===e.d&&this.e===e.e&&this.f===e.f}},{key:"identity",value:function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0,this}},{key:"multiply",value:function(e){var t=e,n=this.a,r=this.b,i=this.c,o=this.d,a=this.e,s=this.f;return this.a=n*t.a+i*t.b,this.c=n*t.c+i*t.d,this.e=n*t.e+i*t.f+a,this.b=r*t.a+o*t.b,this.d=r*t.c+o*t.d,this.f=r*t.e+o*t.f+s,this}},{key:"rotate",value:function(t,n,r){return 0===t?this:void 0===n?this.multiply(e.Rotate(t)):this.translate(n,r).multiply(e.Rotate(t)).translate(-n,-r)}},{key:"translate",value:function(t,n){return this.multiply(e.Translate(t,n))}},{key:"scale",value:function(t,n){return this.multiply(e.Scale(t,n))}},{key:"invert",value:function(){var e=this.a,t=this.b,n=this.c,r=this.d,i=this.e,o=this.f,a=e*r-t*n;return this.a=r/a,this.b=t/-a,this.c=n/-a,this.d=e/a,this.e=(r*i-n*o)/-a,this.f=(t*i-e*o)/a,this}},{key:"applyToPoint",value:function(t){return e.applyToPoint(this,t)}},{key:"applyToPoints",value:function(t){return e.applyToPoints(this,t)}},{key:"decomposed",value:function(){return e.Decompose(this)}},{key:"toCssString",value:function(){return e.toCssString(this)}},{key:"setTo",value:function(e){return Object.assign(this,e),this}},{key:"decompose",value:function(){return e.Decompose(this)}},{key:"clone",value:function(){return new e(this.a,this.b,this.c,this.d,this.e,this.f)}}],[{key:"Identity",value:function(){return new e(1,0,0,1,0,0)}},{key:"Translate",value:function(t,n){return new e(1,0,0,1,t,n)}},{key:"Rotate",value:function(t,n,r){if(0===t)return e.Identity();var i=Math.cos(t),o=Math.sin(t),a=new e(i,o,-o,i,0,0);return void 0===n?a:e.Compose(e.Translate(n,r),a,e.Translate(-n,-r))}},{key:"Multiply",value:function(e,t){return{a:e.a*t.a+e.c*t.b,c:e.a*t.c+e.c*t.d,e:e.a*t.e+e.c*t.f+e.e,b:e.b*t.a+e.d*t.b,d:e.b*t.c+e.d*t.d,f:e.b*t.e+e.d*t.f+e.f}}},{key:"Inverse",value:function(e){var t=e.a*e.d-e.b*e.c;return{a:e.d/t,b:e.b/-t,c:e.c/-t,d:e.a/t,e:(e.d*e.e-e.c*e.f)/-t,f:(e.b*e.e-e.a*e.f)/t}}},{key:"Absolute",value:function(e){var t=e.a*e.d-e.b*e.c;return{a:e.d/t,b:e.b/-t,c:e.c/-t,d:e.a/t,e:(e.d*e.e-e.c*e.f)/t,f:(e.b*e.e-e.a*e.f)/-t}}},{key:"Compose",value:function(){for(var t=e.Identity(),n=0,r=arguments.length;n<r;n++)t.multiply(n<0||arguments.length<=n?void 0:arguments[n]);return t}},{key:"Decompose",value:function(e){var t,n,r;if(0!==e.a||0!==e.c){var i=Math.hypot(e.a,e.c);t=i,n=(e.a*e.d-e.b*e.c)/i,r=Math.acos(e.a/i)*(e.c>0?-1:1)}else if(0!==e.b||0!==e.d){var o=Math.hypot(e.b,e.d);t=(e.a*e.d-e.b*e.c)/o,n=o,r=ya+Math.acos(e.b/o)*(e.d>0?-1:1)}else t=0,n=0,r=0;return{x:e.e,y:e.f,scaleX:t,scaleY:n,rotation:Ma(r)}}},{key:"Smooth",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e10;return e.a=Math.round(e.a*t)/t,e.b=Math.round(e.b*t)/t,e.c=Math.round(e.c*t)/t,e.d=Math.round(e.d*t)/t,e.e=Math.round(e.e*t)/t,e.f=Math.round(e.f*t)/t,e}},{key:"toCssString",value:function(e){return"matrix(".concat(Fa(e.a),", ").concat(Fa(e.b),", ").concat(Fa(e.c),", ").concat(Fa(e.d),", ").concat(Fa(e.e),", ").concat(Fa(e.f),")")}},{key:"applyToPoint",value:function(e,t){return new va(e.a*t.x+e.c*t.y+e.e,e.b*t.x+e.d*t.y+e.f,t.z)}},{key:"applyToXY",value:function(e,t,n){return[e.a*t+e.c*n+e.e,e.b*t+e.d*n+e.f]}},{key:"applyToPoints",value:function(e,t){return t.map((function(t){return new va(e.a*t.x+e.c*t.y+e.e,e.b*t.x+e.d*t.y+e.f,t.z)}))}},{key:"applyToBounds",value:function(e,t){return new Wa(e.e+t.minX,e.f+t.minY,t.width,t.height)}},{key:"From",value:function(t){return new e(t.a,t.b,t.c,t.d,t.e,t.f)}}]),e}();Xa=Ja,O(Ja,"Scale",(function(e,t,n,r){var i=new Xa(e,0,0,0,t,0);return void 0===n?i:Xa.Compose(Xa.Translate(n,r),i,Xa.Translate(-n,-r))}));var Za=function(e){U(n,e);var t=W(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.2,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20;return z(this,n),O(B(r=t.call(this,e,i,o)),"segments",void 0),r.segments=r.getSegmentsFromPoints(e,o),r}return N(n,[{key:"getSegmentsFromPoints",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,n=[],r=0;r<e.length-1;r++)n.push(new Qa(e[r],e[r+1],t));return n}}],[{key:"FromPoints",value:function(e){return new n(e)}}]),n}($a),es=Math.PI+1e-4;function ts(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.size,r=void 0===n?16:n,i=t.smoothing,o=void 0===i?.5:i,a=t.start,s=void 0===a?{}:a,u=t.end,l=void 0===u?{}:u,c=t.last,d=void 0!==c&&c,f=s.cap,h=void 0===f||f,p=l.cap,v=void 0===p||p;if(0===e.length||r<=0)return[];for(var g,m=e[0],y=e[e.length-1],b=y.runningLength,w=!1===s.taper?0:!0===s.taper?Math.max(r,b):s.taper,x=!1===l.taper?0:!0===l.taper?Math.max(r,b):l.taper,k=Math.pow(r*o,2),S=[],_=[],E=e[0].vector,C=e[0].point,P=C,I=C,T=P,M=!1,A=0;A<e.length;A++){g=e[A];var O=e[A],j=O.point,R=O.vector,L=g.vector.dpr(E),D=(A<e.length-1?e[A+1]:e[A]).vector,N=A<e.length-1?D.dpr(g.vector):1,z=null!==N&&N<.2;if(L<0&&!M||z){if(N>-.62&&b-g.runningLength>g.radius){var B=E.clone().mul(g.radius);E.clone().cpr(D)<0?(I=va.Add(j,B),T=va.Sub(j,B)):(I=va.Sub(j,B),T=va.Add(j,B)),S.push(I),_.push(T)}else for(var F=E.clone().mul(g.radius).per(),U=va.Sub(g.input,F),K=0;K<1;K+=.07692307692307693)I=va.RotWith(U,g.input,es*K),S.push(I),T=va.RotWith(U,g.input,es+es*-K),_.push(T);C=I,P=T,z&&(M=!0)}else if(M=!1,g!==m&&g!==y){var V=va.Lrp(D,R,N).per().mul(g.radius);I=va.Sub(j,V),(A<=1||va.Dist2(C,I)>k)&&(S.push(I),C=I),T=va.Add(j,V),(A<=1||va.Dist2(P,T)>k)&&(_.push(T),P=T),E=R}else{var W=va.Per(R).mul(g.radius);S.push(va.Sub(j,W)),_.push(va.Add(j,W))}}var H=m.point,Y=e.length>1?e[e.length-1].point:va.AddXY(m.point,1,1);if(1===e.length&&(!w&&!x||d)){for(var X=va.Add(H,va.Sub(H,Y).uni().per().mul(-m.radius)),q=[],$=1/13,G=$;G<=1;G+=$)q.push(va.RotWith(X,H,2*es*G));return q}var Q=[];if(w||x&&1===e.length);else if(h)for(var J=.125;J<=1;J+=.125){var Z=va.RotWith(_[0],H,es*J);Q.push(Z)}else{var ee=va.Sub(S[0],_[0]),te=va.Mul(ee,.5),ne=va.Mul(ee,.51);Q.push(va.Sub(H,te),va.Sub(H,ne),va.Add(H,ne),va.Add(H,te))}var re=[],ie=y.vector.clone().per().neg();if(x||w&&1===e.length)re.push(Y);else if(v)for(var oe=va.Add(Y,va.Mul(ie,y.radius)),ae=1/29,se=ae;se<1;se+=ae)re.push(va.RotWith(oe,Y,3*es*se));else re.push(va.Add(Y,va.Mul(ie,y.radius)),va.Add(Y,va.Mul(ie,.99*y.radius)),va.Sub(Y,va.Mul(ie,.99*y.radius)),va.Sub(Y,va.Mul(ie,y.radius)));return S.concat(re,_.reverse(),Q)}var ns=.025,rs=.01;function is(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.streamline,i=void 0===r?.5:r,o=n.size,a=void 0===o?16:o,s=n.simulatePressure,l=void 0!==s&&s;if(0===e.length)return[];var c=.15+.85*(1-i),d=e.map(va.From),f=0;if(!l)for(var h=d[0];h&&!(h.z>=ns);)d.shift(),h=d[0];if(!l)for(var p=d[d.length-1];p&&!(p.z>=rs);)d.pop(),p=d[d.length-1];if(0===d.length)return[{point:va.From(e[0]),input:va.From(e[0]),pressure:l?.5:.15,vector:new va(1,1),distance:0,runningLength:0,radius:1}];for(var v=d[1];v&&!(va.Dist(v,d[0])>a/3);)d[0].z=Math.max(d[0].z,v.z),d.splice(1,1),v=d[1];var g=d.pop();for(v=d[d.length-1];v&&!(va.Dist(v,g)>a/3);)d.pop(),v=d[d.length-1],f++;d.push(g);var m=n.last||!n.simulatePressure||d.length>1&&va.Dist(d[d.length-1],d[d.length-2])<a||f>0;if(2===d.length&&n.simulatePressure){var y=d[1];d=d.slice(0,-1);for(var b=1;b<5;b++){var w=va.Lrp(d[0],y,b/4);w.z=(d[0].z+(y.z-d[0].z))*b/4,d.push(w)}}var x,k,S=[{point:d[0],input:d[0],pressure:l?.5:d[0].z,vector:new va(1,1),distance:0,runningLength:0,radius:1}],_=0,E=S[0];m&&i>0&&d.push(d[d.length-1].clone());for(var C=1,P=d.length;C<P;C++)x=!c||n.last&&C===P-1?d[C].clone():d[C].clone().lrp(E.point,1-c),E.point.equals(x)||(_+=k=va.Dist(x,E.point),C<4&&_<a||(E={input:d[C],point:x,pressure:l?.5:d[C].z,vector:va.Sub(E.point,x).uni(),distance:k,runningLength:_,radius:1},S.push(E)));if(null!==(t=S[1])&&void 0!==t&&t.vector&&(S[0].vector=S[1].vector.clone()),_<1){var I=Math.max.apply(Math,[.5].concat(u(S.map((function(e){return e.pressure})))));S.forEach((function(e){return e.pressure=I}))}return S}var os=Math.min,as=.275;function ss(e,t){var n,r,i=t.size,o=void 0===i?16:i,a=t.thinning,s=void 0===a?.5:a,u=t.simulatePressure,l=void 0===u||u,c=t.easing,d=void 0===c?function(e){return e}:c,f=t.start,h=void 0===f?{}:f,p=t.end,v=void 0===p?{}:p,g=h.easing,m=void 0===g?pa.easeOutQuad:g,y=v.easing,b=void 0===y?pa.easeOutCubic:y,w=e[e.length-1].runningLength,x=e[0].pressure;if(!l&&w<o){var k=e.reduce((function(e,t){return Math.max(e,t.pressure)}),.5);return e.forEach((function(e){e.pressure=k,e.radius=o*d(.5-s*(.5-e.pressure))})),e}for(var S,_=0,E=e.length;_<E&&!((r=e[_]).runningLength>5*o);_++){var C=os(1,r.distance/o);if(l){var P=os(1,1-C);S=os(1,x+C*as*(P-x))}else S=os(1,x+.5*(r.pressure-x));x+=.5*(S-x)}for(var I=0;I<e.length;I++){if(r=e[I],s){var T=r.pressure,M=os(1,r.distance/o);if(l){var A=os(1,1-M);T=os(1,x+M*as*(A-x))}else T=os(1,x+M*as*(T-x));r.radius=o*d(.5-s*(.5-T)),x=T}else r.radius=o/2;void 0===n&&(n=r.radius)}var O=!1===h.taper?0:!0===h.taper?Math.max(o,w):h.taper,j=!1===v.taper?0:!0===v.taper?Math.max(o,w):v.taper;if(O||j)for(var R=0;R<e.length;R++){var L=(r=e[R]).runningLength,D=L<O?m(L/O):1,N=w-L<j?b((w-L)/j):1;r.radius=Math.max(.01,r.radius*Math.min(D,N))}return e}function us(e,t,n,r){var i=e.x-n.x,o=e.y-n.y,a=r.x-n.x,s=r.y-n.y,u=t.x-e.x,l=t.y-e.y,c=a*o-s*i,d=u*o-l*i,f=s*u-a*l;if(0===c||0===d)return null;if(0===f)return null;if(0!==f){var h=c/f,p=d/f;if(0<=h&&h<=1&&0<=p&&p<=1)return va.AddXY(e,h*u,h*l)}return null}function ls(e,t,n,r){var i=(t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y),o=2*((t.x-e.x)*(e.x-n.x)+(t.y-e.y)*(e.y-n.y)),a=o*o-4*i*(n.x*n.x+n.y*n.y+e.x*e.x+e.y*e.y-2*(n.x*e.x+n.y*e.y)-r*r);if(a<0)return null;if(0===a)return null;var s=Math.sqrt(a),u=(-o+s)/(2*i),l=(-o-s)/(2*i);if((u<0||u>1)&&(l<0||l>1))return null;var c=[];return 0<=u&&u<=1&&c.push(va.Lrp(e,t,u)),0<=l&&l<=1&&c.push(va.Lrp(e,t,l)),0===c.length?null:c}function cs(e,t,n){for(var r,i=[],o=0,a=n.length-1;o<a;o++)(r=us(e,t,n[o],n[o+1]))&&i.push(r);return 0===i.length?null:i}function ds(e,t,n){for(var r,i=[],o=1,a=n.length;o<a+1;o++)(r=us(e,t,n[o-1],n[o%n.length]))&&i.push(r);return 0===i.length?null:i}function fs(e,t,n){for(var r,i=[],o=0,a=n.length;o<a;o++)(r=ls(n[o],n[(o+1)%n.length],e,t))&&i.push.apply(i,u(r));return 0===i.length?null:i}function hs(e,t,n){for(var r,i=[],o=1,a=n.length;o<a;o++)(r=ls(n[o-1],n[o],e,t))&&i.push.apply(i,u(r));return 0===i.length?null:i}function ps(e,t,n){return(n.y-e.y)*(t.x-e.x)>(t.y-e.y)*(n.x-e.x)}function vs(e,t,n,r){return ps(e,n,r)!==ps(t,n,r)&&ps(e,t,n)!==ps(e,t,r)}function gs(e,t){for(var n,r,i=[],o=0,a=e.length;o<a;o++)Ba(n=e[o],t)&&i.push(n);for(var s=0,u=t.length;s<u;s++)Ba(n=t[s],e)&&i.push(n);for(var l=0,c=e.length;l<c;l++){n=e[l],r=e[(l+1)%e.length];for(var d=0,f=t.length;d<f;d++){var h=us(n,r,t[d],t[(d+1)%t.length]);null!==h&&i.push(h)}}return 0===i.length?null:function(e){var t=va.Average(e);return e.sort((function(e,n){return va.Angle(t,e)-va.Angle(t,n)}))}(i)}function ms(e){return"".concat(Fa(e.x),",").concat(Fa(e.y)," ")}function ys(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=0,n=0,r=0,i=0;function o(){var e=t^t<<11;return t=n,n=r,r=i,(i^=(i>>>19^e^e>>>8)>>>0)/4294967296*2}for(var a=0;a<e.length+64;a++)t^=0|e.charCodeAt(a),o();return o}function bs(e){for(var t,n,r,i="M",o=0,a=e.length;o<a;o+=3)t=e[o],n=e[o+1],r=e[o+2],i+="".concat(ms(t),"L").concat(ms(n),"Q").concat(ms(r));return i+="".concat(ms(e[0]))}function ws(e,t,n,r,i){for(var o,a=[],s=ys(e),u=t[0],l=t.length,c=0,d=l*i;c<d;c++){o=va.AddXY(t[(c+1)%l],s()*n,s()*n);var f=va.Sub(o,u),h=va.Len(f),p=va.Div(f,h).mul(Math.min(h/4,r));a.push(va.Add(u,p),va.Add(o,p.neg()),o),u=o}return a}function xs(e,t,n){for(var r,i,o="M".concat(ms(t[0]),"L"),a="M".concat(ms(t[0]),"L"),s="M".concat(ms(t[0]),"L"),u=n/3,l=2*n,c=ys(e),d=t[0],f=t[0],h=0,p=t.length-1;h<p;h++){r=va.AddXY(t[h+1],c()*u,c()*u),i=va.AddXY(t[h+1],c(),c()*u);var v=va.Sub(r,d),g=va.Len(v),m=va.Div(v,g).mul(Math.min(g/4,l)),y=va.Add(d,m),b=va.Add(r,m.neg()),w=va.Sub(i,f),x=va.Len(w),k=va.Div(w,x).mul(Math.min(x/4,l)),S=va.Add(f,k),_=va.Add(i,k.neg());h===p-1?(o+="".concat(ms(y)," L ").concat(ms(r)),a+="".concat(ms(y)," L ").concat(ms(r)),s+="".concat(ms(S)," L ").concat(ms(i))):(o+="".concat(ms(y),"L ").concat(ms(b),"Q ").concat(ms(r)),a+="".concat(ms(y),"L ").concat(ms(b),"Q ").concat(ms(r)),s+="".concat(ms(S),"L ").concat(ms(_),"Q ").concat(ms(i)),d=r,f=i)}return[o,a+s]}var ks={peopleMenu:Cs("peopleMenu"),highlighterTool:Cs("highlighterTool",{all:!0})},Ss={preventDefaultLogging:Es("preventDefaultLogging",{defaults:{all:!1}}),pointerCaptureLogging:Es("pointerCaptureLogging",{defaults:{all:!1}}),pointerCaptureTracking:Es("pointerCaptureTracking",{defaults:{all:!1}}),pointerCaptureTrackingObject:Es("pointerCaptureTrackingObject",{defaults:{all:new Map},shouldStoreForSession:!1}),elementRemovalLogging:Es("elementRemovalLogging",{defaults:{all:!1}}),debugSvg:Es("debugSvg",{defaults:{all:!1}}),throwToBlob:Es("throwToBlob",{defaults:{all:!1}}),logMessages:Es("uiLog",{defaults:{all:[]}}),resetConnectionEveryPing:Es("resetConnectionEveryPing",{defaults:{all:!1}}),debugCursors:Es("debugCursors",{defaults:{all:!1}}),forceSrgb:Es("forceSrgbColors",{defaults:{all:!1}})};if("undefined"!==typeof window&&(window.tldrawLog=function(e){Ss.logMessages.set(Ss.logMessages.value.concat(e))}),"undefined"!==typeof Element){var _s=Element.prototype.removeChild;Bt("element removal logging",(function(){Ss.elementRemovalLogging.value?Element.prototype.removeChild=function(e){return console.warn("[tldraw] removing child:",e),_s.call(this,e)}:Element.prototype.removeChild=_s}))}function Es(e,t){var n=t.defaults,r=t.shouldStoreForSession;return Ps({name:e,defaults:n,shouldStoreForSession:void 0===r||r})}function Cs(e){return Ps({name:e,defaults:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{all:!0,production:!1},shouldStoreForSession:!0})}function Ps(e){var t=function(e){var t,n,r,i,o,a;switch(null!==(t=null!==(n=null!==(r=Is((function(){return{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.TLDRAW_ENV})))&&void 0!==r?r:Is((function(){return{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.VERCEL_PUBLIC_TLDRAW_ENV})))&&void 0!==n?n:Is((function(){return{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.NEXT_PUBLIC_TLDRAW_ENV})))&&void 0!==t?t:"production"){case"production":return null!==(i=e.defaults.production)&&void 0!==i?i:e.defaults.all;case"preview":case"staging":return null!==(o=e.defaults.staging)&&void 0!==o?o:e.defaults.all;default:return null!==(a=e.defaults.development)&&void 0!==a?a:e.defaults.all}}(e),n=e.shouldStoreForSession?function(e){try{var t,n;return JSON.parse(null!==(t=null===(n=window)||void 0===n?void 0:n.sessionStorage.getItem("tldraw_debug:".concat(e)))&&void 0!==t?t:"null")}catch(r){return null}}(e.name):null,r=Mt("debug:".concat(e.name),null!==n&&void 0!==n?n:t);return"undefined"!==typeof window&&(e.shouldStoreForSession&&Bt("debug:".concat(e.name),(function(){var n=r.value;try{n===t?window.sessionStorage.removeItem("tldraw_debug:".concat(e.name)):window.sessionStorage.setItem("tldraw_debug:".concat(e.name),JSON.stringify(n))}catch(i){}})),Object.defineProperty(window,"tldraw".concat(e.name.replace(/^[a-z]/,(function(e){return e.toUpperCase()}))),{get:function(){return r.value},set:function(e){r.set(e)},configurable:!0})),Object.assign(r,e)}function Is(e){try{return e()}catch(t){return null}}function Ts(e){if(e instanceof HTMLElement)return e;if(e.parentElement)return Ts(e.parentElement);throw Error("Could not find a parent element of an HTML type!")}function Ms(e){e.preventDefault(),Ss.preventDefaultLogging.value&&console.warn("preventDefault called on event:",e)}function As(e,t){if(e.setPointerCapture(t.pointerId),Ss.pointerCaptureTracking.value){var n,r=Ss.pointerCaptureTrackingObject.value;r.set(e,(null!==(n=r.get(e))&&void 0!==n?n:0)+1)}Ss.pointerCaptureLogging.value&&console.warn("setPointerCapture called on element:",e,t)}function Os(e,t){if(e.hasPointerCapture(t.pointerId)){if(e.releasePointerCapture(t.pointerId),Ss.pointerCaptureTracking.value){var n=Ss.pointerCaptureTrackingObject.value;1===n.get(e)?n.delete(e):n.has(e)?n.set(e,n.get(e)-1):console.warn("Release without capture")}Ss.pointerCaptureLogging.value&&console.warn("releasePointerCapture called on element:",e,t)}}var js=[{offsetX:0,offsetY:2,blur:4,spread:0,color:"#00000029"},{offsetX:0,offsetY:3,blur:6,spread:0,color:"#0000001f"}];function Rs(e){var t=js.map((function(t){var n=t.offsetX,r=t.offsetY,i=t.blur,o=t.spread,a=t.color,s=new va(n,r).rot(-e),u=s.x,l=s.y;return"".concat(u,"px ").concat(l,"px ").concat(i,"px ").concat(o,"px ").concat(a)}));return t.join(", ")}function Ls(){var e=L((0,t.useState)(!1),2),n=e[0],r=e[1];return(0,t.useEffect)((function(){var e=window.matchMedia("(prefers-reduced-motion: reduce)"),t=function(){r(e.matches)};return t(),e.addEventListener("change",t),function(){return e.removeEventListener("change",t)}}),[]),n}var Ds=function(e,t){return e.length<=t?e:e.substring(0,t-3)+"..."},Ns=function(e){return e.stopPropagation()};function zs(e,t){e.isKilled=!0;var n=t.getBoundingClientRect(),r=n.top,i=n.left;return{point:{x:e.clientX-i,y:e.clientY-r,z:e.pressure},shiftKey:e.shiftKey,altKey:e.altKey,ctrlKey:e.metaKey||e.ctrlKey,pointerId:e.pointerId,button:e.button,isPen:"pen"===e.pointerType}}function Bs(e){return"".concat(Fa(e.x),",").concat(Fa(e.y)," ")}function Fs(e,t){return"".concat(Fa((e.x+t.x)/2),",").concat(Fa((e.y+t.y)/2)," ")}function Us(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.length;if(n<2)return"";var r=e[0],i=e[1];if(2===n)return"M".concat(Bs(r),"L").concat(Bs(i));for(var o="",a=2,s=n-1;a<s;a++)o+=Fs(r=e[a],i=e[a+1]);return t?"M".concat(Fs(e[0],e[1]),"Q").concat(Bs(e[1])).concat(Fs(e[1],e[2]),"T").concat(o).concat(Fs(e[n-1],e[0])).concat(Fs(e[0],e[1]),"Z"):"M".concat(Bs(e[0]),"Q").concat(Bs(e[1])).concat(Fs(e[1],e[2])).concat(e.length>3?"T":"").concat(o,"L").concat(Bs(e[n-1]))}function Ks(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.length;if(n<2)return"";var r=e[0].point,i=e[1].point;if(2===n)return"M".concat(Bs(r),"L").concat(Bs(i));for(var o="",a=2,s=n-1;a<s;a++)o+=Fs(r=e[a].point,i=e[a+1].point);return t?"M".concat(Fs(e[0].point,e[1].point),"Q").concat(Bs(e[1].point)).concat(Fs(e[1].point,e[2].point),"T").concat(o).concat(Fs(e[n-1].point,e[0].point)).concat(Fs(e[0].point,e[1].point),"Z"):"M".concat(Bs(e[0].point),"Q").concat(Bs(e[1].point)).concat(Fs(e[1].point,e[2].point)).concat(e.length>3?"T":"").concat(o,"L").concat(Bs(e[n-1].point))}var Vs=(0,t.createContext)(null);function Ws(e){var t=e.container,n=e.children;return(0,Qo.jsx)(Vs.Provider,{value:t,children:n})}function Hs(){return te((0,t.useContext)(Vs),"useContainer used outside of <Tldraw />")}var Ys=["input","select","button","textarea"];function Xs(){var e=document.activeElement;return!(!e||!(e.getAttribute("contenteditable")||Ys.indexOf(e.tagName.toLowerCase())>-1))}function qs(){return(0,Qo.jsx)("div",{className:"tl-background"})}function $s(e,n,r,i,o,a){(0,t.useLayoutEffect)((function(){var t=e.current;if(t&&void 0!==n){var s="translate(".concat(n,"px, ").concat(r,"px)");void 0!==i&&(s+=" scale(".concat(i,")")),void 0!==o&&(s+=" rotate(".concat(o,"rad)")),a&&(s+=" translate(".concat(a.x,"px, ").concat(a.y,"px)")),t.style.transform=s}}))}for(var Gs=function(e){var n=e.brush,r=e.color,i=e.opacity,o=(0,t.useRef)(null);return $s(o,n.x,n.y),(0,Qo.jsx)("svg",{className:"tl-overlays__item",ref:o,children:r?(0,Qo.jsxs)("g",{className:"tl-brush",opacity:i,children:[(0,Qo.jsx)("rect",{width:Fa(Math.max(1,n.w)),height:Fa(Math.max(1,n.h)),fill:r,opacity:.75}),(0,Qo.jsx)("rect",{width:Fa(Math.max(1,n.w)),height:Fa(Math.max(1,n.h)),fill:"none",stroke:r,opacity:.1})]}):(0,Qo.jsx)("rect",{className:"tl-brush tl-brush__default",width:Fa(Math.max(1,n.w)),height:Fa(Math.max(1,n.h))})})},Qs=function(e){var n=e.className,r=e.zoom,i=e.point,o=e.color,a=e.viewport,s=e.opacity,u=void 0===s?1:s,l=(0,t.useRef)(null);return $s(l,ka(i.x,a.minX+5/r,a.maxX-5/r),ka(i.y,a.minY+5/r,a.maxY-5/r),1/r,va.Angle(a.center,i)),(0,Qo.jsxs)("svg",{ref:l,className:ra("tl-overlays__item",n),children:[(0,Qo.jsx)("use",{href:"#cursor_hint",color:o,strokeWidth:3,stroke:"var(--color-background)"}),(0,Qo.jsx)("use",{href:"#cursor_hint",color:o,opacity:u})]})},Js=(0,t.memo)((function(e){var n=e.className,r=e.zoom,i=e.point,o=e.color,a=e.name,s=e.chatMessage,u=(0,t.useRef)(null);return $s(u,null===i||void 0===i?void 0:i.x,null===i||void 0===i?void 0:i.y,1/r),i?(0,Qo.jsxs)("div",{ref:u,className:ra("tl-overlays__item",n),children:[(0,Qo.jsx)("svg",{className:"tl-cursor",children:(0,Qo.jsx)("use",{href:"#cursor",color:o})}),s?(0,Qo.jsxs)(Qo.Fragment,{children:[a&&(0,Qo.jsx)("div",{className:"tl-nametag-title",style:{color:o},children:a}),(0,Qo.jsx)("div",{className:"tl-nametag-chat",style:{backgroundColor:o},children:s})]}):a&&(0,Qo.jsx)("div",{className:"tl-nametag",style:{backgroundColor:o},children:a})]}):null})),Zs=2e3,eu=(Symbol("remove"),320),tu=[.1,.25,.5,1,2,4,8],nu=.1,ru={},iu=1;iu<=Math.ceil(8);iu++)ru[iu+"_dark"]="hash_pattern_zoom_".concat(iu,"_dark"),ru[iu+"_light"]="hash_pattern_zoom_".concat(iu,"_light");var ou={duration:0,easing:pa.easeInOutCubic},au=.09,su=[{min:-1,mid:.15,step:100},{min:.05,mid:.375,step:25},{min:.15,mid:1,step:5},{min:.7,mid:2.5,step:1}],uu=-10,lu=function(e){var t=e.x,n=e.y,r=e.z,i=e.size;return(0,Qo.jsxs)("svg",{className:"tl-grid",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:[(0,Qo.jsx)("defs",{children:su.map((function(e,o){var a=e.min,s=e.mid,u=e.step,l=u*i*r,c=.5+t*r,d=.5+n*r,f=c>0?c%l:l+c%l,h=d>0?d%l:l+d%l,p=r<s?se(r,[a,s],[0,1]):1;return(0,Qo.jsx)("pattern",{id:"grid-".concat(u),width:l,height:l,patternUnits:"userSpaceOnUse",children:(0,Qo.jsx)("circle",{className:"tl-grid-dot",cx:f,cy:h,r:1,opacity:p})},"grid-pattern-".concat(o))}))}),su.map((function(e,t){var n=e.step;return(0,Qo.jsx)("rect",{width:"100%",height:"100%",fill:"url(#grid-".concat(n,")")},"grid-rect-".concat(t))}))]})},cu=function(e){var t=e.handle,n=e.className;return(0,Qo.jsxs)("g",{className:ra("tl-handle",{"tl-handle__hint":"vertex"!==t.type},n),children:[(0,Qo.jsx)("circle",{className:"tl-handle__bg"}),(0,Qo.jsx)("circle",{className:"tl-handle__fg"})]})},du=function(e){var t=e.scribble,n=e.zoom,r=e.color,i=e.opacity,o=e.className;if(t.points.length){var a=Us(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ts(ss(is(e,t),t),t)}(t.points,{size:t.size/n,start:{taper:!0,easing:pa.linear},last:"stopping"===t.state,simulatePressure:!1,streamline:.32}));return(0,Qo.jsx)("svg",{className:o?ra("tl-overlays__item",o):o,children:(0,Qo.jsx)("path",{className:"tl-scribble",d:a,fill:null!==r&&void 0!==r?r:"var(--color-".concat(t.color,")"),opacity:null!==i&&void 0!==i?i:t.opacity})})}},fu=function(){return(0,Qo.jsx)("div",{className:"tl-shape-error-boundary"})},hu=function(){return(0,Qo.jsx)("circle",{cx:4,cy:4,r:8,strokeWidth:"1",stroke:"red"})};function pu(e){var t,n,r,i,o=e.points,a=2.5/e.zoom,s=o.reduce((function(e,t){return Math.min(e,t.x)}),1/0),u=o.reduce((function(e,t){return Math.max(e,t.x)}),-1/0),l=o.reduce((function(e,t){return Math.min(e,t.y)}),1/0),c=o.reduce((function(e,t){return Math.max(e,t.y)}),-1/0),d=o.some((function(e){return e.x===s&&e.y===l}));return d?(t=s,n=l,r=u,i=c):(t=s,n=c,r=u,i=l),(0,Qo.jsxs)("g",{className:"tl-snap-line",children:[(0,Qo.jsx)("line",{x1:t,y1:n,x2:r,y2:i}),o.map((function(e,t){return(0,Qo.jsx)("g",{transform:"translate(".concat(e.x,",").concat(e.y,")"),children:(0,Qo.jsx)("path",{className:"tl-snap-point",d:"M ".concat(-a,",").concat(-a," L ").concat(a,",").concat(a," M ").concat(-a,",").concat(a," L ").concat(a,",").concat(-a)})},t)}))]})}function vu(e){var n,r=e.gaps,i=e.direction,o=3.5/e.zoom,a=[-1/0,1/0],s=null,u="horizontal"===i,l=X(r);try{for(l.s();!(n=l.n()).done;){var c=n.value;(s=Na(a[0],a[1],u?c.startEdge[0].y:c.startEdge[0].x,u?c.startEdge[1].y:c.startEdge[1].x))&&((s=Na((a=s)[0],a[1],u?c.endEdge[0].y:c.endEdge[0].x,u?c.endEdge[1].y:c.endEdge[1].x))&&(a=s))}}catch(f){l.e(f)}finally{l.f()}if(null===a)return null;var d=(a[0]+a[1])/2;return(0,Qo.jsx)("g",{className:"tl-snap-line",children:r.map((function(e,n){var r=e.startEdge,i=e.endEdge;return(0,Qo.jsx)(t.Fragment,{children:u?(0,Qo.jsxs)(Qo.Fragment,{children:[(0,Qo.jsx)("line",{x1:r[0].x,y1:d-2*o,x2:r[1].x,y2:d+2*o}),(0,Qo.jsx)("line",{x1:i[0].x,y1:d-2*o,x2:i[1].x,y2:d+2*o}),(0,Qo.jsx)("line",{x1:r[0].x,y1:d,x2:i[0].x,y2:d}),(0,Qo.jsx)("line",{x1:(r[0].x+i[0].x)/2,y1:d-o,x2:(r[0].x+i[0].x)/2,y2:d+o})]}):(0,Qo.jsxs)(Qo.Fragment,{children:[(0,Qo.jsx)("line",{x1:d-2*o,y1:r[0].y,x2:d+2*o,y2:r[1].y}),(0,Qo.jsx)("line",{x1:d-2*o,y1:i[0].y,x2:d+2*o,y2:i[1].y}),(0,Qo.jsx)("line",{x1:d,y1:r[0].y,x2:d,y2:i[0].y}),(0,Qo.jsx)("line",{x1:d-o,y1:(r[0].y+i[0].y)/2,x2:d+o,y2:(r[0].y+i[0].y)/2})]})},n)}))})}var gu=function(e){var t=e.className,n=e.line,r=e.zoom;return(0,Qo.jsx)("svg",{className:ra("tl-overlays__item",t),children:"points"===n.type?(0,Qo.jsx)(pu,R(R({},n),{},{zoom:r})):"gaps"===n.type?(0,Qo.jsx)(vu,R(R({},n),{},{zoom:r})):null})},mu=function(){return(0,Qo.jsx)("svg",{width:16,height:16,viewBox:"0 0 16 16",children:(0,Qo.jsxs)("g",{strokeWidth:2,fill:"none",fillRule:"evenodd",children:[(0,Qo.jsx)("circle",{strokeOpacity:.25,cx:8,cy:8,r:7,stroke:"var(--color-text-1)"}),(0,Qo.jsx)("path",{strokeLinecap:"round",d:"M15 8c0-4.5-4.5-7-7-7",stroke:"var(--color-text-1)",children:(0,Qo.jsx)("animateTransform",{attributeName:"transform",type:"rotate",from:"0 8 8",to:"360 8 8",dur:"1s",repeatCount:"indefinite"})})]})})},yu=function(){return null},bu=["children","fallback"],wu={error:null},xu=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"state",wu),e}return N(n,[{key:"componentDidCatch",value:function(e){var t,n;null===(t=(n=this.props).onError)||void 0===t||t.call(n,e)}},{key:"render",value:function(){var e=this.state.error;return null!==e?this.props.fallback(e):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}}]),n}(t.Component);function ku(e){var t=e.children,n=e.fallback,r=Jt(e,bu);return null===n?(0,Qo.jsx)(Qo.Fragment,{children:t}):(0,Qo.jsx)(xu,R(R({fallback:n},r),{},{children:t}))}var Su=function(){function e(t){z(this,e),this.shape=t}return N(e,[{key:"equals",value:function(e){var t,n;return(null===(t=this.shape)||void 0===t?void 0:t.props)===(null===e||void 0===e||null===(n=e.shape)||void 0===n?void 0:n.props)}}]),e}(),_u=function(e){var t=e.shape,n=e.util;return ia("Indicator:"+t.type,(function(){return n.indicator(t)}))},Eu=function(e){var t=e.editor,n=e.id,r=la("shape",(function(){return new Su(t.store.get(n))}),[t,n]),i=Tu().ShapeIndicatorErrorFallback;return r.shape?(0,Qo.jsx)(ku,{fallback:i?function(e){return(0,Qo.jsx)(i,{error:e})}:null,onError:function(e){return t.annotateError(e,{origin:"react.shapeIndicator",willCrashApp:!1})},children:(0,Qo.jsx)(_u,{shape:r.shape,util:t.getShapeUtil(r.shape)},r.shape.id)}):null},Cu=t.memo((function(e){var t=e.id,n=e.className,r=e.color,i=e.opacity,o=da(),a=la("transform",(function(){var e=o.getPageTransformById(t);return e?e.toCssString():""}),[o,t]);return(0,Qo.jsx)("svg",{className:ra("tl-overlays__item",n),children:(0,Qo.jsx)("g",{className:"tl-shape-indicator",transform:a,stroke:null!==r&&void 0!==r?r:"var(--color-selected)",opacity:i,children:(0,Qo.jsx)(Eu,{editor:o,id:t})})})})),Pu=(0,t.createContext)({});function Iu(e){var t=e.overrides,n=e.children;return(0,Qo.jsx)(Pu.Provider,{value:R({Background:qs,SvgDefs:yu,Brush:Gs,ZoomBrush:Gs,CollaboratorBrush:Gs,Cursor:Js,CollaboratorCursor:Js,CollaboratorHint:Qs,CollaboratorShapeIndicator:Cu,Grid:lu,Scribble:du,SnapLine:gu,Handle:cu,CollaboratorScribble:du,ErrorFallback:yd,ShapeErrorFallback:fu,ShapeIndicatorErrorFallback:hu,Spinner:mu},t),children:n})}function Tu(){return(0,t.useContext)(Pu)}var Mu=["textarea","input"];function Au(){return Au="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=K(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Au.apply(this,arguments)}var Ou=function(e,t){return void 0===e&&(e=t),Array.isArray(e)?e:[e,e]},ju=function(e,t){return[e[0]+t[0],e[1]+t[1]]},Ru=function(e,t){return[e[0]-t[0],e[1]-t[1]]},Lu=function(e,t){e[0]+=t[0],e[1]+=t[1]};function Du(e,t,n){return 0===t||Math.abs(t)===1/0?Math.pow(e,5*n):e*t*n/(t+n*e)}function Nu(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.15;return 0===r?function(e,t,n){return Math.max(t,Math.min(e,n))}(e,t,n):e<t?-Du(t-e,n-t,r)+t:e>n?+Du(e-n,n-t,r)+n:e}function zu(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function Bu(e,t,n){return(t=zu(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Uu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fu(Object(n),!0).forEach((function(t){Bu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ku={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function Vu(e){return e?e[0].toUpperCase()+e.slice(1):""}var Wu=["enter","leave"];function Hu(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Ku[e],i=r&&r[t]||t;return"on"+Vu(e)+Vu(i)+(function(){var e=arguments.length>1?arguments[1]:void 0;return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&!Wu.includes(e)}(n,i)?"Capture":"")}var Yu=["gotpointercapture","lostpointercapture"];function Xu(e){var t=e.substring(2).toLowerCase(),n=!!~t.indexOf("passive");n&&(t=t.replace("passive",""));var r=Yu.includes(t)?"capturecapture":"capture",i=!!~t.indexOf(r);return i&&(t=t.replace("capture","")),{device:t,capture:i,passive:n}}function qu(e){return"touches"in e}function $u(e){return qu(e)?"touch":"pointerType"in e?e.pointerType:"mouse"}function Gu(e,t){try{var n=t.clientX-e.clientX,r=t.clientY-e.clientY,i=(t.clientX+e.clientX)/2,o=(t.clientY+e.clientY)/2,a=Math.hypot(n,r);return{angle:-180*Math.atan2(n,r)/Math.PI,distance:a,origin:[i,o]}}catch(s){}return null}function Qu(e){return function(e){return Array.from(e.touches).filter((function(t){var n,r;return t.target===e.currentTarget||(null===(n=e.currentTarget)||void 0===n||null===(r=n.contains)||void 0===r?void 0:r.call(n,t.target))}))}(e).map((function(e){return e.identifier}))}function Ju(e,t){var n=L(Array.from(e.touches).filter((function(e){return t.includes(e.identifier)})),2);return Gu(n[0],n[1])}function Zu(e){var t=e.deltaX,n=e.deltaY,r=e.deltaMode;return 1===r?(t*=40,n*=40):2===r&&(t*=800,n*=800),[t,n]}function el(e){if("function"===typeof e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.apply(void 0,n)}return e}function tl(){}function nl(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?tl:1===t.length?t[0]:function(){for(var e,n=0,r=t;n<r.length;n++){e=r[n].apply(this,arguments)||e}return e}}function rl(e,t){return Object.assign({},t,e||{})}var il=function(){function e(t,n,r){z(this,e),this.ctrl=t,this.args=n,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}return N(e,[{key:"state",get:function(){return this.ctrl.state[this.key]},set:function(e){this.ctrl.state[this.key]=e}},{key:"shared",get:function(){return this.ctrl.state.shared}},{key:"eventStore",get:function(){return this.ctrl.gestureEventStores[this.key]}},{key:"timeoutStore",get:function(){return this.ctrl.gestureTimeoutStores[this.key]}},{key:"config",get:function(){return this.ctrl.config[this.key]}},{key:"sharedConfig",get:function(){return this.ctrl.config.shared}},{key:"handler",get:function(){return this.ctrl.handlers[this.key]}},{key:"reset",value:function(){var e=this.state,t=this.shared,n=this.ingKey,r=this.args;t[n]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=r,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}},{key:"start",value:function(e){var t=this.state,n=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=n.from?el(n.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}},{key:"computeValues",value:function(e){var t=this.state;t._values=e,t.values=this.config.transform(e)}},{key:"computeInitial",value:function(){var e=this.state;e._initial=e._values,e.initial=e.values}},{key:"compute",value:function(e){var t=this.state,n=this.config,r=this.shared;t.args=this.args;var i=0;if(e&&(t.event=e,n.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,r.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,r.locked=!!document.pointerLockElement,Object.assign(r,function(e){var t={};if("buttons"in e&&(t.buttons=e.buttons),"shiftKey"in e){var n=e.shiftKey,r=e.altKey,i=e.metaKey,o=e.ctrlKey;Object.assign(t,{shiftKey:n,altKey:r,metaKey:i,ctrlKey:o})}return t}(e)),r.down=r.pressed=r.buttons%2===1||r.touches>0,i=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){var o=t._delta.map(Math.abs);Lu(t._distance,o)}this.axisIntent&&this.axisIntent(e);var a=L(t._movement,2),s=a[0],u=a[1],l=L(n.threshold,2),c=l[0],d=l[1],f=t._step,h=t.values;if(n.hasCustomTransform?(!1===f[0]&&(f[0]=Math.abs(s)>=c&&h[0]),!1===f[1]&&(f[1]=Math.abs(u)>=d&&h[1])):(!1===f[0]&&(f[0]=Math.abs(s)>=c&&Math.sign(s)*c),!1===f[1]&&(f[1]=Math.abs(u)>=d&&Math.sign(u)*d)),t.intentional=!1!==f[0]||!1!==f[1],t.intentional){var p=[0,0];if(n.hasCustomTransform){var v=L(h,2),g=v[0],m=v[1];p[0]=!1!==f[0]?g-f[0]:0,p[1]=!1!==f[1]?m-f[1]:0}else p[0]=!1!==f[0]?s-f[0]:0,p[1]=!1!==f[1]?u-f[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(p);var y=t.offset,b=t._active&&!t._blocked||t.active;b&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=r[this.ingKey]=t._active,e&&(t.first&&("bounds"in n&&(t._bounds=el(n.bounds,t)),this.setup&&this.setup()),t.movement=p,this.computeOffset()));var w=L(t.offset,2),x=w[0],k=w[1],S=L(t._bounds,2),_=L(S[0],2),E=_[0],C=_[1],P=L(S[1],2),I=P[0],T=P[1];t.overflow=[x<E?-1:x>C?1:0,k<I?-1:k>T?1:0],t._movementBound[0]=!!t.overflow[0]&&(!1===t._movementBound[0]?t._movement[0]:t._movementBound[0]),t._movementBound[1]=!!t.overflow[1]&&(!1===t._movementBound[1]?t._movement[1]:t._movementBound[1]);var M=t._active&&n.rubberband||[0,0];if(t.offset=function(e,t,n){var r=L(t,2),i=r[0],o=r[1],a=L(n,2),s=a[0],u=a[1],l=L(e,2),c=L(l[0],2),d=c[0],f=c[1],h=L(l[1],2),p=h[0],v=h[1];return[Nu(i,d,f,s),Nu(o,p,v,u)]}(t._bounds,t.offset,M),t.delta=Ru(t.offset,y),this.computeMovement(),b&&(!t.last||i>32)){t.delta=Ru(t.offset,y);var A=t.delta.map(Math.abs);Lu(t.distance,A),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&i>0&&(t.velocity=[A[0]/i,A[1]/i],t.timeDelta=i)}}}},{key:"emit",value:function(){var e=this.state,t=this.shared,n=this.config;if(e._active||this.clean(),!e._blocked&&e.intentional||e._force||n.triggerAllEvents){var r=this.handler(Uu(Uu(Uu({},t),e),{},O({},this.aliasKey,e.values)));void 0!==r&&(e.memo=r)}}},{key:"clean",value:function(){this.eventStore.clean(),this.timeoutStore.clean()}}]),e}();var ol=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Bu(B(e=t.call.apply(t,[this].concat(i))),"aliasKey","xy"),e}return N(n,[{key:"reset",value:function(){Au(K(n.prototype),"reset",this).call(this),this.state.axis=void 0}},{key:"init",value:function(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}},{key:"computeOffset",value:function(){this.state.offset=ju(this.state.lastOffset,this.state.movement)}},{key:"computeMovement",value:function(){this.state.movement=Ru(this.state.offset,this.state.lastOffset)}},{key:"axisIntent",value:function(e){var t=this.state,n=this.config;if(!t.axis&&e){var r="object"===typeof n.axisThreshold?n.axisThreshold[$u(e)]:n.axisThreshold;t.axis=function(e,t){var n=L(e,2),r=n[0],i=n[1],o=Math.abs(r),a=Math.abs(i);return o>a&&o>t?"x":a>o&&a>t?"y":void 0}(t._movement,r)}t._blocked=(n.lockDirection||!!n.axis)&&!t.axis||!!n.axis&&n.axis!==t.axis}},{key:"restrictToAxis",value:function(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0}}}]),n}(il),al=function(e){return e},sl={enabled:function(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]},eventOptions:function(e,t,n){return Uu(Uu({},n.shared.eventOptions),e)},preventDefault:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]},triggerAllEvents:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]},rubberband:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch(e){case!0:return[.15,.15];case!1:return[0,0];default:return Ou(e)}},from:function(e){return"function"===typeof e?e:null!=e?Ou(e):void 0},transform:function(e,t,n){var r=e||n.shared.transform;return this.hasCustomTransform=!!r,r||al},threshold:function(e){return Ou(e,0)}};var ul=Uu(Uu({},sl),{},{axis:function(e,t,n){var r=n.axis;if(this.lockDirection="lock"===r,!this.lockDirection)return r},axisThreshold:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:0},bounds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("function"===typeof e)return function(t){return ul.bounds(e(t))};if("current"in e)return function(){return e.current};if("function"===typeof HTMLElement&&e instanceof HTMLElement)return e;var t=e.left,n=void 0===t?-1/0:t,r=e.right,i=void 0===r?1/0:r,o=e.top,a=void 0===o?-1/0:o,s=e.bottom;return[[n,i],[a,void 0===s?1/0:s]]}});var ll="undefined"!==typeof window&&window.document&&window.document.createElement;function cl(){return ll&&"ontouchstart"in window||ll&&window.navigator.maxTouchPoints>1}var dl={isBrowser:ll,gesture:function(){try{return"constructor"in GestureEvent}catch(kM){return!1}}(),touch:cl(),touchscreen:cl(),pointer:ll&&"onpointerdown"in window,pointerLock:ll&&"exitPointerLock"in window.document},fl={mouse:0,touch:0,pen:8};Uu(Uu({},ul),{},{device:function(e,t,n){var r=n.pointer,i=void 0===r?{}:r,o=i.touch,a=void 0!==o&&o,s=i.lock,u=void 0!==s&&s,l=i.mouse,c=void 0!==l&&l;return this.pointerLock=u&&dl.pointerLock,dl.touch&&a?"touch":this.pointerLock?"mouse":dl.pointer&&!c?"pointer":dl.touch?"touch":"mouse"},preventScrollAxis:function(e,t,n){var r=n.preventScroll;if(this.preventScrollDelay="number"===typeof r?r:r||void 0===r&&e?250:void 0,dl.touchscreen&&!1!==r)return e||(void 0!==r?"y":void 0)},pointerCapture:function(e,t,n){var r=n.pointer,i=void 0===r?{}:r,o=i.capture,a=void 0===o||o,s=i.buttons,u=void 0===s?1:s,l=i.keys,c=void 0===l||l;return this.pointerButtons=u,this.keys=c,!this.pointerLock&&"pointer"===this.device&&a},threshold:function(e,t,n){var r=n.filterTaps,i=void 0!==r&&r,o=n.tapsThreshold,a=void 0===o?3:o,s=n.axis,u=Ou(e,i?a:(void 0===s?void 0:s)?1:0);return this.filterTaps=i,this.tapsThreshold=a,u},swipe:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.velocity,n=void 0===t?.5:t,r=e.distance,i=void 0===r?50:r,o=e.duration,a=void 0===o?250:o;return{velocity:this.transform(Ou(n)),distance:this.transform(Ou(i)),duration:a}},delay:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch(e){case!0:return 180;case!1:return 0;default:return e}},axisThreshold:function(e){return e?Uu(Uu({},fl),e):fl},keyboardDisplacement:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:10}});function hl(e){var t=L(e.overflow,2),n=t[0],r=t[1],i=L(e._delta,2),o=i[0],a=i[1],s=L(e._direction,2),u=s[0],l=s[1];(n<0&&o>0&&u<0||n>0&&o<0&&u>0)&&(e._movement[0]=e._movementBound[0]),(r<0&&a>0&&l<0||r>0&&a<0&&l>0)&&(e._movement[1]=e._movementBound[1])}var pl=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Bu(B(e=t.call.apply(t,[this].concat(i))),"ingKey","pinching"),Bu(B(e),"aliasKey","da"),e}return N(n,[{key:"init",value:function(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}},{key:"reset",value:function(){Au(K(n.prototype),"reset",this).call(this);var e=this.state;e._touchIds=[],e.canceled=!1,e.cancel=this.cancel.bind(this),e.turns=0}},{key:"computeOffset",value:function(){var e=this.state,t=e.type,n=e.movement,r=e.lastOffset;this.state.offset="wheel"===t?ju(n,r):[(1+n[0])*r[0],n[1]+r[1]]}},{key:"computeMovement",value:function(){var e=this.state,t=e.offset,n=e.lastOffset;this.state.movement=[t[0]/n[0],t[1]-n[1]]}},{key:"axisIntent",value:function(){var e=this.state,t=L(e._movement,2),n=t[0],r=t[1];if(!e.axis){var i=30*Math.abs(n)-Math.abs(r);i<0?e.axis="angle":i>0&&(e.axis="scale")}}},{key:"restrictToAxis",value:function(e){this.config.lockDirection&&("scale"===this.state.axis?e[1]=0:"angle"===this.state.axis&&(e[0]=0))}},{key:"cancel",value:function(){var e=this,t=this.state;t.canceled||setTimeout((function(){t.canceled=!0,t._active=!1,e.compute(),e.emit()}),0)}},{key:"touchStart",value:function(e){this.ctrl.setEventIds(e);var t=this.state,n=this.ctrl.touchIds;if((!t._active||!t._touchIds.every((function(e){return n.has(e)})))&&!(n.size<2)){this.start(e),t._touchIds=Array.from(n).slice(0,2);var r=Ju(e,t._touchIds);r&&this.pinchStart(e,r)}}},{key:"pointerStart",value:function(e){if(null==e.buttons||e.buttons%2===1){this.ctrl.setEventIds(e),e.target.setPointerCapture(e.pointerId);var t=this.state,n=t._pointerEvents,r=this.ctrl.pointerIds;if((!t._active||!Array.from(n.keys()).every((function(e){return r.has(e)})))&&(n.size<2&&n.set(e.pointerId,e),!(t._pointerEvents.size<2))){this.start(e);var i=Gu.apply(void 0,u(Array.from(n.values())));i&&this.pinchStart(e,i)}}}},{key:"pinchStart",value:function(e,t){this.state.origin=t.origin,this.computeValues([t.distance,t.angle]),this.computeInitial(),this.compute(e),this.emit()}},{key:"touchMove",value:function(e){if(this.state._active){var t=Ju(e,this.state._touchIds);t&&this.pinchMove(e,t)}}},{key:"pointerMove",value:function(e){var t=this.state._pointerEvents;if(t.has(e.pointerId)&&t.set(e.pointerId,e),this.state._active){var n=Gu.apply(void 0,u(Array.from(t.values())));n&&this.pinchMove(e,n)}}},{key:"pinchMove",value:function(e,t){var n=this.state,r=n._values[1],i=t.angle-r,o=0;Math.abs(i)>270&&(o+=Math.sign(i)),this.computeValues([t.distance,t.angle-360*o]),n.origin=t.origin,n.turns=o,n._movement=[n._values[0]/n._initial[0]-1,n._values[1]-n._initial[1]],this.compute(e),this.emit()}},{key:"touchEnd",value:function(e){var t=this;this.ctrl.setEventIds(e),this.state._active&&this.state._touchIds.some((function(e){return!t.ctrl.touchIds.has(e)}))&&(this.state._active=!1,this.compute(e),this.emit())}},{key:"pointerEnd",value:function(e){var t=this.state;this.ctrl.setEventIds(e);try{e.target.releasePointerCapture(e.pointerId)}catch(n){}t._pointerEvents.has(e.pointerId)&&t._pointerEvents.delete(e.pointerId),t._active&&t._pointerEvents.size<2&&(t._active=!1,this.compute(e),this.emit())}},{key:"gestureStart",value:function(e){e.cancelable&&e.preventDefault();var t=this.state;t._active||(this.start(e),this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY],this.compute(e),this.emit())}},{key:"gestureMove",value:function(e){if(e.cancelable&&e.preventDefault(),this.state._active){var t=this.state;this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY];var n=t._movement;t._movement=[e.scale-1,e.rotation],t._delta=Ru(t._movement,n),this.compute(e),this.emit()}}},{key:"gestureEnd",value:function(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}},{key:"wheel",value:function(e){var t=this.config.modifierKey;t&&!e[t]||(this.state._active?this.wheelChange(e):this.wheelStart(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}},{key:"wheelStart",value:function(e){this.start(e),this.wheelChange(e)}},{key:"wheelChange",value:function(e){"uv"in e||e.cancelable&&e.preventDefault();var t=this.state;t._delta=[-Zu(e)[1]/100*t.offset[0],0],Lu(t._movement,t._delta),hl(t),this.state.origin=[e.clientX,e.clientY],this.compute(e),this.emit()}},{key:"wheelEnd",value:function(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}},{key:"bind",value:function(e){var t=this.config.device;t&&(e(t,"start",this[t+"Start"].bind(this)),e(t,"change",this[t+"Move"].bind(this)),e(t,"end",this[t+"End"].bind(this)),e(t,"cancel",this[t+"End"].bind(this)),e("lostPointerCapture","",this[t+"End"].bind(this))),this.config.pinchOnWheel&&e("wheel","",this.wheel.bind(this),{passive:!1})}}]),n}(il),vl=Uu(Uu({},sl),{},{device:function(e,t,n){var r=n.shared,i=n.pointer,o=(void 0===i?{}:i).touch,a=void 0!==o&&o;if(r.target&&!dl.touch&&dl.gesture)return"gesture";if(dl.touch&&a)return"touch";if(dl.touchscreen){if(dl.pointer)return"pointer";if(dl.touch)return"touch"}},bounds:function(e,t,n){var r=n.scaleBounds,i=void 0===r?{}:r,o=n.angleBounds,a=void 0===o?{}:o,s=function(e){var t=rl(el(i,e),{min:-1/0,max:1/0});return[t.min,t.max]},u=function(e){var t=rl(el(a,e),{min:-1/0,max:1/0});return[t.min,t.max]};return"function"!==typeof i&&"function"!==typeof a?[s(),u()]:function(e){return[s(e),u(e)]}},threshold:function(e,t,n){this.lockDirection="lock"===n.axis;var r=Ou(e,this.lockDirection?[.1,3]:0);return r},modifierKey:function(e){return void 0===e?"ctrlKey":e},pinchOnWheel:function(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}}),gl=(Uu(Uu({},ul),{},{mouseOnly:function(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}}),function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Bu(B(e=t.call.apply(t,[this].concat(i))),"ingKey","wheeling"),e}return N(n,[{key:"wheel",value:function(e){this.state._active||this.start(e),this.wheelChange(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}},{key:"wheelChange",value:function(e){var t=this.state;t._delta=Zu(e),Lu(t._movement,t._delta),hl(t),this.compute(e),this.emit()}},{key:"wheelEnd",value:function(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}},{key:"bind",value:function(e){e("wheel","",this.wheel.bind(this))}}]),n}(ol)),ml=ul,yl=(Uu(Uu({},ul),{},{mouseOnly:function(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}}),new Map),bl=new Map;function wl(e){yl.set(e.key,e.engine),bl.set(e.key,e.resolver)}var xl={key:"pinch",engine:pl,resolver:vl},kl={key:"wheel",engine:gl,resolver:ml};function Sl(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var _l={target:function(e){if(e)return function(){return"current"in e?e.current:e}},enabled:function(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]},window:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:dl.isBrowser?window:void 0})),eventOptions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.passive,n=void 0===t||t,r=e.capture;return{passive:n,capture:void 0!==r&&r}},transform:function(e){return e}},El=["target","eventOptions","window","enabled","transform"];function Cl(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n={},r=0,i=Object.entries(t);r<i.length;r++){var o=L(i[r],2),a=o[0],s=o[1];switch(typeof s){case"function":n[a]=s.call(n,e[a],a,e);break;case"object":n[a]=Cl(e[a],s);break;case"boolean":s&&(n[a]=e[a])}}return n}var Pl=function(){function e(t,n){z(this,e),Bu(this,"_listeners",new Set),this._ctrl=t,this._gestureKey=n}return N(e,[{key:"add",value:function(e,t,n,r,i){var o=this._listeners,a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Ku[e];return e+(n&&n[t]||t)}(t,n),s=Uu(Uu({},this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{}),i);e.addEventListener(a,r,s);var u=function t(){e.removeEventListener(a,r,s),o.delete(t)};return o.add(u),u}},{key:"clean",value:function(){this._listeners.forEach((function(e){return e()})),this._listeners.clear()}}]),e}(),Il=function(){function e(){z(this,e),Bu(this,"_timeouts",new Map)}return N(e,[{key:"add",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:140;this.remove(e);for(var i=arguments.length,o=new Array(i>3?i-3:0),a=3;a<i;a++)o[a-3]=arguments[a];this._timeouts.set(e,(n=window).setTimeout.apply(n,[t,r].concat(o)))}},{key:"remove",value:function(e){var t=this._timeouts.get(e);t&&window.clearTimeout(t)}},{key:"clean",value:function(){this._timeouts.forEach((function(e){window.clearTimeout(e)})),this._timeouts.clear()}}]),e}(),Tl=function(){function e(t){z(this,e),Bu(this,"gestures",new Set),Bu(this,"_targetEventStore",new Pl(this)),Bu(this,"gestureEventStores",{}),Bu(this,"gestureTimeoutStores",{}),Bu(this,"handlers",{}),Bu(this,"config",{}),Bu(this,"pointerIds",new Set),Bu(this,"touchIds",new Set),Bu(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),function(e,t){t.drag&&Ml(e,"drag");t.wheel&&Ml(e,"wheel");t.scroll&&Ml(e,"scroll");t.move&&Ml(e,"move");t.pinch&&Ml(e,"pinch");t.hover&&Ml(e,"hover")}(this,t)}return N(e,[{key:"setEventIds",value:function(e){return qu(e)?(this.touchIds=new Set(Qu(e)),this.touchIds):"pointerId"in e?("pointerup"===e.type||"pointercancel"===e.type?this.pointerIds.delete(e.pointerId):"pointerdown"===e.type&&this.pointerIds.add(e.pointerId),this.pointerIds):void 0}},{key:"applyHandlers",value:function(e,t){this.handlers=e,this.nativeHandlers=t}},{key:"applyConfig",value:function(e,t){this.config=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e,i=r.target,o=r.eventOptions,a=r.window,s=r.enabled,u=r.transform,l=Sl(r,El);if(n.shared=Cl({target:i,eventOptions:o,window:a,enabled:s,transform:u},_l),t){var c=bl.get(t);n[t]=Cl(Uu({shared:n.shared},l),c)}else for(var d in l){var f=bl.get(d);f&&(n[d]=Cl(Uu({shared:n.shared},l[d]),f))}return n}(e,t,this.config)}},{key:"clean",value:function(){this._targetEventStore.clean();var e,t=X(this.gestures);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.gestureEventStores[n].clean(),this.gestureTimeoutStores[n].clean()}}catch(r){t.e(r)}finally{t.f()}}},{key:"effect",value:function(){var e=this;return this.config.shared.target&&this.bind(),function(){return e._targetEventStore.clean()}}},{key:"bind",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i,o=this.config.shared,a={};if(!o.target||(i=o.target())){if(o.enabled){var s,l=X(this.gestures);try{for(l.s();!(s=l.n()).done;){var c=s.value,d=this.config[c],f=Al(a,d.eventOptions,!!i);if(d.enabled)new(yl.get(c))(this,n,c).bind(f)}}catch(k){l.e(k)}finally{l.f()}var h=Al(a,o.eventOptions,!!i),p=function(t){h(t,"",(function(r){return e.nativeHandlers[t](Uu(Uu({},e.state.shared),{},{event:r,args:n}))}),void 0,!0)};for(var v in this.nativeHandlers)p(v)}for(var g in a)a[g]=nl.apply(void 0,u(a[g]));if(!i)return a;for(var m in a){var y=Xu(m),b=y.device,w=y.capture,x=y.passive;this._targetEventStore.add(i,b,"",a[m],{capture:w,passive:x})}}}}]),e}();function Ml(e,t){e.gestures.add(t),e.gestureEventStores[t]=new Pl(e,t),e.gestureTimeoutStores[t]=new Il}var Al=function(e,t,n){return function(r,i,o){var a,s,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},l=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=null!==(a=u.capture)&&void 0!==a?a:t.capture,d=null!==(s=u.passive)&&void 0!==s?s:t.passive,f=l?r:Hu(r,i,c);n&&d&&(f+="Passive"),e[f]=e[f]||[],e[f].push(o)}},Ol=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function jl(e,t,n,r,i,o){if(e.has(n)&&yl.has(r)){var a=n+"Start",s=n+"End";i[r]=function(e){var r=void 0;return e.first&&a in t&&t[a](e),n in t&&(r=t[n](e)),e.last&&s in t&&t[s](e),r},o[r]=o[r]||{}}}function Rl(e,t){var n=function(e){var t={},n={},r=new Set;for(var i in e)Ol.test(i)?(r.add(RegExp.lastMatch),n[i]=e[i]):t[i]=e[i];return[n,t,r]}(e),r=L(n,3),i=r[0],o=r[1],a=r[2],s={};return jl(a,i,"onDrag","drag",s,t),jl(a,i,"onWheel","wheel",s,t),jl(a,i,"onScroll","scroll",s,t),jl(a,i,"onPinch","pinch",s,t),jl(a,i,"onMove","move",s,t),jl(a,i,"onHover","hover",s,t),{handlers:s,config:t,nativeHandlers:o}}function Ll(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=t.useMemo((function(){return new Tl(e)}),[]);if(o.applyHandlers(e,i),o.applyConfig(n,r),t.useEffect(o.effect.bind(o)),t.useEffect((function(){return o.clean.bind(o)}),[]),void 0===n.target)return o.bind.bind(o)}function Dl(e){return e.forEach(wl),function(e,t){var n=Rl(e,t||{}),r=n.handlers,i=n.nativeHandlers;return Ll(r,n.config,void 0,i)}}var Nl=n(3881),zl=10,Bl=/Mac|iPod|iPhone|iPad/.test("undefined"===typeof window?"node":window.navigator.platform);function Fl(e){var t=e.deltaY,n=e.deltaX,r=0;if(e.ctrlKey||e.altKey||e.metaKey){var i=Math.sign(e.deltaY),o=t;Math.abs(e.deltaY)>zl&&(o=zl*i),r=o/100}else e.shiftKey&&!Bl&&(n=t,t=0);return{x:-n,y:-t,z:-r}}var Ul=Dl([kl,xl]),Kl=void 0;function Vl(e){var n=da(),r=t.useMemo((function(){var t=null,r=1,i=1,o=1,a=0,s=new va,u=new va,l=Nl((function(e){if(null===t){var n=Math.abs(a-r),i=va.Dist(s,u);"gesture"===e&&n||"touch"===e&&n>16?t="zooming":i>16&&(t="panning")}}),32);return{onWheel:function(e){var r=e.event;if(n.isFocused&&(t=null,!function(e){return void 0===Kl?(Kl=e,!1):e-Kl>120&&e-Kl<160?(Kl=e,!0):(Kl=e,!1)}(Date.now()))){if(n.editingId){var i=n.getShapeById(n.editingId);if(i)if(n.getShapeUtil(i).canScroll(i)){var o=n.getPageBoundsById(n.editingId);if(null!==o&&void 0!==o&&o.containsPoint(n.inputs.currentPagePoint))return}}Ms(r);var a=Fl(r);if(0!==a.x||0!==a.y){var s={type:"wheel",name:"wheel",delta:a,shiftKey:r.shiftKey,altKey:r.altKey,ctrlKey:r.metaKey||r.ctrlKey};n.dispatch(s)}}},onPinchStart:function(o){var a=e.current;t=null;var l=o.event,c=o.origin,d=o.da;l instanceof WheelEvent||(l.target===a||null!==a&&void 0!==a&&a.contains(l.target))&&(u.x=c[0],u.y=c[1],s.x=c[0],s.y=c[1],r=d[0],i=n.zoomLevel,n.dispatch({type:"pinch",name:"pinch_start",point:{x:c[0],y:c[1],z:n.zoomLevel},delta:{x:0,y:0},shiftKey:l.shiftKey,altKey:l.altKey,ctrlKey:l.metaKey||l.ctrlKey}))},onPinchEnd:function(r){var i=e.current,o=r.event,a=r.origin,s=r.offset;if(!(o instanceof WheelEvent)&&(o.target===i||null!==i&&void 0!==i&&i.contains(o.target))){var u=s[0];t=null,requestAnimationFrame((function(){n.dispatch({type:"pinch",name:"pinch_end",point:{x:a[0],y:a[1],z:u},delta:{x:a[0],y:a[1]},shiftKey:o.shiftKey,altKey:o.altKey,ctrlKey:o.metaKey||o.ctrlKey})}))}},onPinch:function(r){var s=e.current,c=r.event,d=r.origin,f=r.offset,h=r.da;if(!(c instanceof WheelEvent)&&(c.target===s||null!==s&&void 0!==s&&s.contains(c.target))){var p=!("touches"in c);a=h[0],(p||a>64)&&(o=f[0]);var v=d[0]-u.x,g=d[1]-u.y;switch(u.x=d[0],u.y=d[1],l(p?"gesture":"touch"),t){case"zooming":n.dispatch({type:"pinch",name:"pinch",point:{x:d[0],y:d[1],z:o},delta:{x:v,y:g},shiftKey:c.shiftKey,altKey:c.altKey,ctrlKey:c.metaKey||c.ctrlKey});break;case"panning":n.dispatch({type:"pinch",name:"pinch",point:{x:d[0],y:d[1],z:i},delta:{x:v,y:g},shiftKey:c.shiftKey,altKey:c.altKey,ctrlKey:c.metaKey||c.ctrlKey})}}}}}),[n,e]);Ul(r,{target:e,eventOptions:{passive:!1},pinch:{from:function(){return[n.zoomLevel,0]},scaleBounds:function(){return{from:n.zoomLevel,max:8,min:.05}}}})}function Wl(e,t,n){var r=e.getShapeById(t);return{shape:r,handle:e.getShapeUtil(r).handles(r).find((function(e){return e.id===n}))}}var Hl=function(e,t,n){return new Promise((function(r,i){var o=8*t*e,a=document.createElement("canvas");a.width=o,a.height=o;var s=a.getContext("2d");if(s){s.fillStyle=n?"#212529":"#f8f9fa",s.fillRect(0,0,o,o),s.globalCompositeOperation="destination-out",s.lineCap="round",s.lineWidth=1.25*t*e;var u=8/12,l=function(n){return n*t*e};s.beginPath(),s.moveTo(l(1*u),l(2)),s.lineTo(l(2),l(1*u)),s.moveTo(l(5*u),l(7*u)),s.lineTo(l(7*u),l(5*u)),s.moveTo(l(6),l(11*u)),s.lineTo(l(11*u),l(6)),s.stroke(),a.toBlob((function(e){!e||Ss.throwToBlob.value?i():r(e)}))}}))},Yl=function(e,t){var n=document.createElement("canvas");n.width=e[0],n.height=e[1];var r=n.getContext("2d");return r?(t(r),n.toDataURL()):""},Xl=function(){var e=da().devicePixelRatio,n=L((0,t.useState)(!1),2),r=n[0],i=n[1],o=(0,t.useMemo)((function(){return function(){for(var e=[],t=1;t<=Math.ceil(8);t++){var n=Yl([1,1],(function(e){e.fillStyle="#e8e8e8",e.fillRect(0,0,1,1)})),r=Yl([1,1],(function(e){e.fillStyle="#2c3036",e.fillRect(0,0,1,1)}));e.push({zoom:t,url:n,darkMode:!1}),e.push({zoom:t,url:r,darkMode:!0})}return e}()}),[]),a=L((0,t.useState)(o),2),s=a[0],u=a[1];return(0,t.useEffect)((function(){for(var t=[],n=function(n){t.push(Hl(e,n,!1).then((function(e){return{zoom:n,url:URL.createObjectURL(e),darkMode:!1}}))),t.push(Hl(e,n,!0).then((function(e){return{zoom:n,url:URL.createObjectURL(e),darkMode:!0}})))},r=1;r<=Math.ceil(8);r++)n(r);var o=!1;return Promise.all(t).then((function(e){o||(u(e),i(!0))})),function(){o=!0,i(!1)}}),[e]),{context:(0,Qo.jsx)(Qo.Fragment,{children:s.map((function(e){var t=e.zoom+(e.darkMode?"_dark":"_light");return(0,Qo.jsx)("pattern",{id:ru[t],width:8,height:8,patternUnits:"userSpaceOnUse",children:(0,Qo.jsx)("image",{href:e.url,width:8,height:8})},t)}))}),isReady:r}},ql=8/12;function $l(e){var t=document.createElement("div");return t.innerHTML='\n\t\t<svg>\n\t\t\t<defs>\n\t\t\t\t<mask id="hash_pattern_mask">\n\t\t\t\t\t<rect x="0" y="0" width="8" height="8" fill="white" />\n\t\t\t\t\t<g\n\t\t\t\t\t\tstrokeLinecap="round"\n\t\t\t\t\t\tstroke="black"\n\t\t\t\t\t>\n\t\t\t\t\t\t<line x1="'.concat(1*ql,'" y1="').concat(2,'" x2="').concat(2,'" y2="').concat(1*ql,'" />\n\t\t\t\t\t\t<line x1="').concat(5*ql,'" y1="').concat(7*ql,'" x2="').concat(7*ql,'" y2="').concat(5*ql,'" />\n\t\t\t\t\t\t<line x1="').concat(6,'" y1="').concat(11*ql,'" x2="').concat(11*ql,'" y2="').concat(6,'" />\n\t\t\t\t\t</g>\n\t\t\t\t</mask>\n\t\t\t\t<pattern\n\t\t\t\t\tid="hash_pattern"\n\t\t\t\t\twidth="8"\n\t\t\t\t\theight="8"\n\t\t\t\t\tpatternUnits="userSpaceOnUse"\n\t\t\t\t>\n\t\t\t\t\t<rect x="0" y="0" width="8" height="8" fill="').concat(e,'" mask="url(#hash_pattern_mask)" />\n\t\t\t\t</pattern>\n\t\t\t</defs>\n\t\t</svg>\n\t'),t.querySelectorAll("defs > *")}function Gl(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ft;(0,t.useEffect)((function(){var t=new zt(e,n);return t.attach(),t.execute(),function(){t.detach()}}),r)}var Ql=n(9409);function Jl(){var e=da(),n=(0,t.useMemo)((function(){return e.store.query.records("instance_presence",(function(){return{userId:{neq:e.user.id}}}))}),[e]),r=function(){var e=arguments[0],n=arguments[1],r=3===arguments.length?void 0:arguments[2],i=3===arguments.length?arguments[2]:arguments[3];return(0,t.useMemo)((function(){return Nt("useComputed(".concat(e,")"),n,r)}),i)}("userIds",(function(){return Ql(n.value.map((function(e){return e.userId}))).sort()}),{isEqual:function(e,t){var n;return e.join(",")===(null===(n=t.join)||void 0===n?void 0:n.call(t,","))}},[n]);return la(r)}function Zl(e){var n=da(),r=(0,t.useMemo)((function(){return n.store.query.records("instance_presence",(function(){return{userId:{eq:e}}}))}),[n,e]),i=la("latestPresence:".concat(e),(function(){return r.value.slice().sort((function(e,t){return t.lastActivityTimestamp-e.lastActivityTimestamp}))[0]}),[]);return null!==i&&void 0!==i?i:null}var ec=ua((function(){var e=Jl();return(0,Qo.jsx)(Qo.Fragment,{children:e.map((function(e){return(0,Qo.jsx)(tc,{userId:e},e)}))})})),tc=ua((function(e){var n=e.userId,r=da(),i=r.viewportPageBounds,o=r.zoomLevel,a=Tu(),s=a.CollaboratorBrush,u=a.CollaboratorScribble,l=a.CollaboratorCursor,c=a.CollaboratorHint,d=a.CollaboratorShapeIndicator,f=Zl(n),h=L((0,t.useState)(!1),2),p=h[0],v=h[1],g=(0,t.useRef)(-1);if((0,t.useEffect)((function(){var e=setInterval((function(){v(Date.now()-g.current>3e3)}),1200);return function(){return clearInterval(e)}}),[]),!f)return null;if(g.current=f.lastActivityTimestamp,p&&r.instanceState.followingUserId!==n&&!r.instanceState.highlightedUserIds.includes(n))return null;if(f.currentPageId!==r.currentPageId)return null;var m=f.brush,y=f.scribble,b=f.selectedIds,w=f.userName,x=f.cursor,k=f.color,S=f.chatMessage,_=!(x.x<i.minX-12/o||x.y<i.minY-16/o||x.x>i.maxX-12/o||x.y>i.maxY-16/o);return(0,Qo.jsxs)(Qo.Fragment,{children:[m&&s?(0,Qo.jsx)(s,{className:"tl-collaborator__brush",brush:m,color:k,opacity:.1},n+"_brush"):null,_&&l?(0,Qo.jsx)(l,{className:"tl-collaborator__cursor",point:x,color:k,zoom:o,name:"New User"!==w?w:null,chatMessage:S},n+"_cursor"):c?(0,Qo.jsx)(c,{className:"tl-collaborator__cursor-hint",point:x,color:k,zoom:o,viewport:i},n+"_cursor_hint"):null,y&&u?(0,Qo.jsx)(u,{className:"tl-collaborator__scribble",scribble:y,color:k,zoom:o,opacity:"laser"===y.color?.5:.1},n+"_scribble"):null,d&&b.map((function(e){return(0,Qo.jsx)(d,{className:"tl-collaborator__shape-indicator",id:e,color:k,opacity:.5},n+"_"+e)}))]})})),nc=ua((function(){var e=da(),n=t.useMemo((function(){return{onPointerDown:function(t){if(!t.isKilled){As(t.currentTarget,t);var n=R({type:"pointer",target:"selection",name:"pointer_down"},zs(t,e.getContainer()));e.dispatch(n)}},onPointerMove:function(t){if(!t.isKilled){var n=R({type:"pointer",target:"selection",name:"pointer_move"},zs(t,e.getContainer()));e.dispatch(n)}},onPointerUp:function(t){if(!t.isKilled){Os(t.currentTarget,t);var n=R({type:"pointer",target:"selection",name:"pointer_up"},zs(t,e.getContainer()));e.dispatch(n)}},onPointerEnter:function(t){if(!t.isKilled){var n=R({type:"pointer",target:"selection",name:"pointer_enter"},zs(t,e.getContainer()));e.dispatch(n)}},onPointerLeave:function(t){if(!t.isKilled){var n=R({type:"pointer",target:"selection",name:"pointer_leave"},zs(t,e.getContainer()));e.dispatch(n)}}}}),[e]),r=e.selectionBounds,i=e.selectedIds;if(!r)return null;var o=e.isInAny("select.idle","select.brushing","select.scribble_brushing","select.pointing_shape","select.pointing_selection","text.resizing");if(1===i.length){var a=e.getShapeById(i[0]);if(!a)return null;if(e.getShapeUtil(a).hideSelectionBoundsBg(a))return null}var s=Ja.toCssString(Ja.Compose(Ja.Translate(r.minX,r.minY),Ja.Rotate(e.selectionRotation)));return(0,Qo.jsx)("div",R({className:"tl-selection__bg",draggable:!1,style:{transform:s,width:Fa(Math.max(1,r.width)),height:Fa(Math.max(1,r.height)),pointerEvents:o?"all":"none",opacity:o?1:0}},n))})),rc=["children","className"];function ic(e){var t=e.children,n=e.className,r=void 0===n?"":n,i=Jt(e,rc);return(0,Qo.jsx)("div",R(R({},i),{},{className:"tl-html-container ".concat(r),children:t}))}function oc(e){var t=da();return la("isEditing",(function(){return t.editingId===e}),[t,e])}var ac=function(e){return e.split("*").map((function(e){return function(e){if("string"!==typeof e)throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}(e)})).join(".+")},sc=function(e,t){return!!e.find((function(e){var n=new RegExp(ac(e));return t.match(n)}))};function uc(e){var t;return null!==(t=function(e){var t,n=new URL(e).host.replace("www.",""),r=X(Qi);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(sc(i.hostnames,n)){var o=i.toEmbedUrl(e);if(o)return{definition:i,embedUrl:o,url:e}}}}catch(a){r.e(a)}finally{r.f()}}(e))&&void 0!==t?t:function(e){var t,n=new URL(e).host.replace("www.",""),r=X(Qi);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(sc(i.hostnames,n)){var o=i.fromEmbedUrl(e);if(o)return{definition:i,url:o,embedUrl:e}}}}catch(a){r.e(a)}finally{r.f()}}(e)}function lc(e){try{return uc(e)}catch(kM){console.error(kM)}}var cc=Object.defineProperty,dc=Object.getOwnPropertyDescriptor,fc=function(e,t,n,r){for(var i,o=r>1?void 0:r?dc(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&cc(t,n,o),o},hc=function(){function e(t,n,r){var i=this;z(this,e),O(this,"canSnap",(function(){return!0})),O(this,"canScroll",(function(){return!1})),O(this,"canUnmount",(function(){return!0})),O(this,"canBind",(function(e,t){return!0})),O(this,"canEdit",(function(){return!1})),O(this,"canResize",(function(){return!0})),O(this,"canCrop",(function(){return!1})),O(this,"getEditingBounds",(function(e){return i.bounds(e)})),O(this,"isClosed",(function(){return!0})),O(this,"hideResizeHandles",(function(){return!1})),O(this,"hideRotateHandle",(function(){return!1})),O(this,"hideSelectionBoundsBg",(function(){return!1})),O(this,"hideSelectionBoundsFg",(function(){return!1})),O(this,"isAspectRatioLocked",(function(){return!1})),O(this,"onBeforeCreate",void 0),O(this,"onBeforeUpdate",void 0),O(this,"onDragShapesOver",void 0),O(this,"onDragShapesOut",void 0),O(this,"onDropShapesOver",void 0),O(this,"onResizeStart",void 0),O(this,"onResize",void 0),O(this,"onResizeEnd",void 0),O(this,"onTranslateStart",void 0),O(this,"onTranslate",void 0),O(this,"onTranslateEnd",void 0),O(this,"onRotateStart",void 0),O(this,"onRotate",void 0),O(this,"onRotateEnd",void 0),O(this,"onHandleChange",void 0),O(this,"onBindingChange",void 0),O(this,"onChildrenChange",void 0),O(this,"onDoubleClickHandle",void 0),O(this,"onDoubleClickEdge",void 0),O(this,"onDoubleClick",void 0),O(this,"onClick",void 0),O(this,"onEditEnd",void 0),this.editor=t,this.type=n,this.styleProps=r}return N(e,[{key:"hasStyle",value:function(e){return this.styleProps.has(e)}},{key:"getStyleIfExists",value:function(e,t){var n=this.styleProps.get(e);if(n)return t.props[n]}},{key:"iterateStyles",value:ea().mark((function e(t){var n,r,i,o,a,s;return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=X(this.styleProps),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=10;break}return i=L(r.value,2),o=i[0],a=i[1],s=t.props[a],e.next=8,[o,s];case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[1,12,15,18]])}))},{key:"setStyleInPartial",value:function(e,t,n){var r=this.styleProps.get(e);return r?R(R({},t),{},{props:R(R({},t.props),{},O({},r,n))}):t}},{key:"handlesCache",get:function(){var e=this;return this.editor.store.createComputedCache("handles:"+this.type,(function(t){return e.getHandles(t)}))}},{key:"handles",value:function(e){var t;return this.getHandles&&null!==(t=this.handlesCache.get(e.id))&&void 0!==t?t:ft}},{key:"getOutlineSegments",value:function(e){return[this.outline(e)]}},{key:"outlineSegmentsCache",get:function(){var e=this;return this.editor.store.createComputedCache("outline-segments:"+this.type,(function(t){return e.getOutlineSegments(t)}))}},{key:"outlineSegments",value:function(e){var t;return this.getOutlineSegments&&null!==(t=this.outlineSegmentsCache.get(e.id))&&void 0!==t?t:ft}},{key:"boundsCache",get:function(){var e=this;return this.editor.store.createComputedCache("bounds:"+this.type,(function(t){return e.getBounds(t)}))}},{key:"bounds",value:function(e){var t,n=null!==(t=this.boundsCache.get(e.id))&&void 0!==t?t:new Wa;return 0===n.width||0===n.height?new Wa(n.x,n.y,Math.max(n.width,1),Math.max(n.height,1)):n}},{key:"outlineCache",get:function(){var e=this;return this.editor.store.createComputedCache("outline:"+this.type,(function(t){return e.getOutline(t)}))}},{key:"outline",value:function(e){var t;return null!==(t=this.outlineCache.get(e.id))&&void 0!==t?t:ft}},{key:"snapPoints",value:function(e){return this.bounds(e).snapPoints}},{key:"center",value:function(e){return this.getCenter(e)}},{key:"canReceiveNewChildrenOfType",value:function(e,t){return!1}},{key:"canDropShapes",value:function(e,t){return!1}},{key:"hitTestPoint",value:function(e,t){return this.bounds(e).containsPoint(t)}},{key:"hitTestLineSegment",value:function(e,t,n){for(var r=this.outline(e),i=0;i<r.length;i++){if(vs(t,n,r[i],r[(i+1)%r.length]))return!0}return!1}},{key:"expandSelectionOutlinePx",value:function(e){return 0}},{key:"providesBackgroundForChildren",value:function(e){return!1}}]),e}();function pc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.newPoint,i=t.handle,o=t.scaleX,a=t.scaleY,s=n.minWidth,u=void 0===s?1:s,l=n.maxWidth,c=void 0===l?1/0:l,d=n.minHeight,f=void 0===d?1:d,h=n.maxHeight,p=void 0===h?1/0:h,v=e.props.w*o,g=e.props.h*a,m=new va(0,0);if(v>0){if(v<u){switch(i){case"top_left":case"left":case"bottom_left":m.x=v-u;break;case"top":case"bottom":m.x=(v-u)/2;break;default:m.x=0}v=u}}else if(m.x=v,(v=-v)<u){switch(i){case"top_left":case"left":case"bottom_left":m.x=-v;break;default:m.x=-u}v=u}if(g>0){if(g<f){switch(i){case"top_left":case"top":case"top_right":m.y=g-f;break;case"right":case"left":m.y=(g-f)/2;break;default:m.y=0}g=f}}else if(m.y=g,(g=-g)<f){switch(i){case"top_left":case"top":case"top_right":m.y=-g;break;default:m.y=-f}g=f}var y=m.rot(e.rotation).add(r);return{x:y.x,y:y.y,props:{w:Math.min(c,v),h:Math.min(p,g)}}}O(hc,"type",void 0),fc([Nt],hc.prototype,"handlesCache",1),fc([Nt],hc.prototype,"outlineSegmentsCache",1),fc([Nt],hc.prototype,"boundsCache",1),fc([Nt],hc.prototype,"outlineCache",1);var vc=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"onResize",(function(e,t){return pc(e,t)})),e}return N(n,[{key:"getBounds",value:function(e){return new Wa(0,0,e.props.w,e.props.h)}},{key:"getCenter",value:function(e){return new va(e.props.w/2,e.props.h/2)}},{key:"getOutline",value:function(e){return this.bounds(e).corners}},{key:"hitTestPoint",value:function(e,t){return Ba(t,this.outline(e))}},{key:"hitTestLineSegment",value:function(e,t,n){for(var r=this.outline(e),i=0;i<r.length;i++){if(vs(t,n,r[i],r[(i+1)%r.length]))return!0}return!1}}]),n}(hc),gc=function(e){U(r,e);var n=W(r);function r(){var e;z(this,r);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return O(B(e=n.call.apply(n,[this].concat(i))),"hideSelectionBoundsBg",(function(t){return!e.canResize(t)})),O(B(e),"hideSelectionBoundsFg",(function(t){return!e.canResize(t)})),O(B(e),"canEdit",(function(){return!0})),O(B(e),"canUnmount",(function(e){var t;return!(null===(t=lc(e.props.url))||void 0===t||null===(t=t.definition)||void 0===t||!t.canUnmount)})),O(B(e),"canResize",(function(e){var t;return!(null===(t=lc(e.props.url))||void 0===t||null===(t=t.definition)||void 0===t||!t.doesResize)})),O(B(e),"isAspectRatioLocked",(function(e){var t,n=lc(e.props.url);return null!==(t=null===n||void 0===n?void 0:n.definition.isAspectRatioLocked)&&void 0!==t&&t})),O(B(e),"onResize",(function(t,n){var r,i,o=e.isAspectRatioLocked(t),a=lc(t.props.url),s=null!==(r=null===a||void 0===a?void 0:a.definition.minWidth)&&void 0!==r?r:200,u=null!==(i=null===a||void 0===a?void 0:a.definition.minHeight)&&void 0!==i?i:200;if(o){var l=t.props.w/t.props.h;l>1?s*=l:u/=l}return pc(t,n,{minWidth:s,minHeight:u})})),e}return N(r,[{key:"defaultProps",value:function(){return{w:300,h:300,url:""}}},{key:"component",value:function(e){var n,i,o=this,a=e.props,s=a.w,u=a.h,l=a.url,c=oc(e.id),d=(0,t.useMemo)((function(){return uc(l)}),[l]),f=la("is hovering",(function(){var e=o.editor.pageState,t=e.editingId,n=e.hoveredId;if(t&&n!==t){var i=o.editor.getShapeById(t);if(i&&o.editor.isShapeOfType(i,r))return!0}return!1}),[]),h=this.editor.getPageRotation(e),p=c||f;if("github_gist"===(null===d||void 0===d?void 0:d.definition.type)){var v=d.url.split("/").pop();if(!v)throw Error("No gist id!");return(0,Qo.jsx)(ic,{className:"tl-embed-container",id:e.id,children:(0,Qo.jsx)(mc,{id:v,width:Fa(s),height:Fa(u),isInteractive:p,pageRotation:h})})}var g,m=(g=R(R({},Ji),null!==(n=null===d||void 0===d?void 0:d.definition.overridePermissions)&&void 0!==n?n:{}),Object.entries(g).filter((function(e){var t=L(e,2);return t[0],t[1]})).map((function(e){return L(e,1)[0]})).join(" "));return(0,Qo.jsx)(ic,{className:"tl-embed-container",id:e.id,children:null!==d&&void 0!==d&&d.definition?(0,Qo.jsx)("iframe",{className:"tl-embed tl-embed-".concat(e.id),sandbox:m,src:d.embedUrl,width:Fa(s),height:Fa(u),draggable:!1,frameBorder:"0",referrerPolicy:"no-referrer-when-downgrade",style:{border:0,pointerEvents:p?"auto":"none",zIndex:p?"":"-1",boxShadow:Rs(h),borderRadius:null!==(i=null===d||void 0===d?void 0:d.definition.overrideOutlineRadius)&&void 0!==i?i:8,background:null===d||void 0===d?void 0:d.definition.backgroundColor}}):(0,Qo.jsx)("g",{transform:"translate(".concat((s-38)/2,", ").concat((u-38)/2,")"),children:(0,Qo.jsx)(mu,{})})})}},{key:"indicator",value:function(e){var n,r,i=(0,t.useMemo)((function(){return lc(e.props.url)}),[e.props.url]);return(0,Qo.jsx)("rect",{width:Fa(e.props.w),height:Fa(e.props.h),rx:null!==(n=null===i||void 0===i?void 0:i.definition.overrideOutlineRadius)&&void 0!==n?n:8,ry:null!==(r=null===i||void 0===i?void 0:i.definition.overrideOutlineRadius)&&void 0!==r?r:8})}}]),r}(vc);function mc(e){var t=e.id,n=e.file,r=e.isInteractive,i=e.width,o=e.height,a=e.style,s=e.pageRotation;return(0,Qo.jsx)("iframe",{className:"tl-embed",draggable:!1,width:Fa(i),height:Fa(o),frameBorder:"0",scrolling:"no",seamless:!0,referrerPolicy:"no-referrer-when-downgrade",style:R(R({},a),{},{pointerEvents:r?"all":"none",zIndex:r?"":"-1",boxShadow:Rs(s)}),srcDoc:'\n\t\t\t<html>\n\t\t\t\t<head>\n\t\t\t\t\t<base target="_blank">\n\t\t\t\t</head>\n\t\t\t\t<body>\n\t\t\t\t\t<script src='.concat("https://gist.github.com/".concat(t,".js").concat(n?"?file=".concat(n):""),'><\/script>\n\t\t\t\t\t<style type="text/css">\n\t\t\t\t\t\t* { margin: 0px; }\n\t\t\t\t\t\ttable { height: 100%; background-color: red; }\n\t\t\t\t\t\t.gist { background-color: none; height: 100%;  }\n\t\t\t\t\t\t.gist .gist-file { height: calc(100vh - 2px); padding: 0px; display: grid; grid-template-rows: 1fr auto; }\n\t\t\t\t\t</style>\n\t\t\t\t</body>\n\t\t\t</html>')})}O(gc,"type","embed");var yc=function(){function e(){z(this,e),O(this,"items",new WeakMap)}return N(e,[{key:"get",value:function(e,t){return this.items.has(e)||this.items.set(e,t(e)),this.items.get(e)}},{key:"access",value:function(e){return this.items.get(e)}},{key:"set",value:function(e,t){this.items.set(e,t)}},{key:"has",value:function(e){return this.items.has(e)}},{key:"invalidate",value:function(e){this.items.delete(e)}},{key:"bust",value:function(){this.items=new WeakMap}}]),e}();function bc(e,t){return e.match(/^\s*$/)?t:e}function wc(e,t,n){var r,i,o=n.padding,a=void 0===o?0:o,s=document.createElementNS("http://www.w3.org/2000/svg","text");if(s.setAttribute("font-size",n.fontSize+"px"),s.setAttribute("font-family",n.fontFamily),s.setAttribute("font-style",n.fontStyle),s.setAttribute("font-weight",n.fontWeight),s.setAttribute("line-height",n.lineHeight*n.fontSize+"px"),s.setAttribute("dominant-baseline","mathematical"),s.setAttribute("alignment-baseline","mathematical"),0===t.length)return s;var u,l=Wa.From(t[0].box),c=X(t);try{for(c.s();!(u=c.n()).done;){var d=u.value.box;l.union(d)}}catch(S){c.e(S)}finally{c.f()}var f,h=a+(null!==(r=n.offsetX)&&void 0!==r?r:0),p=(null!==(i=n.offsetY)&&void 0!==i?i:0)+n.fontSize/2+("start"===n.verticalTextAlign?a:"end"===n.verticalTextAlign?n.height-a-l.height:(Math.ceil(n.height)-l.height)/2),v=null,g=X(t);try{for(g.s();!(f=g.n()).done;){var m=f.value,y=m.text,b=m.box;if(null!==v&&b.y>v){var w=document.createElementNS("http://www.w3.org/2000/svg","tspan");w.setAttribute("alignment-baseline","mathematical"),w.setAttribute("x",h+"px"),w.setAttribute("y",b.y+p+"px"),w.textContent="\n",s.appendChild(w)}var x=document.createElementNS("http://www.w3.org/2000/svg","tspan");x.setAttribute("alignment-baseline","mathematical"),x.setAttribute("x",b.x+h+"px"),x.setAttribute("y",b.y+p+"px");var k=y.replace(/\s/g,"\xa0");x.textContent=k,s.appendChild(x),v=b.y}}catch(S){g.e(S)}finally{g.f()}return n.stroke&&n.strokeWidth&&(s.setAttribute("stroke",n.stroke),s.setAttribute("stroke-width",n.strokeWidth+"px")),n.fill&&s.setAttribute("fill",n.fill),s}var xc={lineHeight:1.35,fontWeight:"normal",fontVariant:"normal",fontStyle:"normal",padding:"0px",maxWidth:"auto"},kc={s:2,m:3.5,l:5,xl:10},Sc={s:18,m:24,l:36,xl:44},_c={s:18,m:22,l:26,xl:32},Ec={s:18,m:20,l:24,xl:28},Cc={draw:"var(--tl-font-draw)",sans:"var(--tl-font-sans)",serif:"var(--tl-font-serif)",mono:"var(--tl-font-mono)"};var Pc="  ",Ic=function(){function e(){z(this,e)}return N(e,null,[{key:"insertTextFirefox",value:function(e,t){e.setRangeText(t,e.selectionStart||0,e.selectionEnd||0,"end"),e.dispatchEvent(new InputEvent("input",{data:t,inputType:"insertText",isComposing:!1}))}},{key:"insert",value:function(t,n){var r=t.ownerDocument,i=r.activeElement;i!==t&&t.focus(),r.execCommand("insertText",!1,n)||e.insertTextFirefox(t,n),i===r.body?t.blur():i instanceof HTMLElement&&i!==t&&i.focus()}},{key:"set",value:function(t,n){t.select(),e.insert(t,n)}},{key:"getSelection",value:function(e){var t=e.selectionStart,n=e.selectionEnd;return e.value.slice(t||void 0,n||void 0)}},{key:"wrapSelection",value:function(t,n,r){var i=t.selectionStart,o=t.selectionEnd,a=e.getSelection(t);e.insert(t,n+a+(null!==r&&void 0!==r?r:n)),t.selectionStart=(i||0)+n.length,t.selectionEnd=(o||0)+n.length}},{key:"replace",value:function(t,n,r){var i=0;t.value.replace(n,(function(){for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i+o[o.length-2],u=o[0].length;t.selectionStart=s,t.selectionEnd=s+u;var l="string"===typeof r?r:r.apply(void 0,o);return e.insert(t,l),t.selectionStart=s,i+=l.length-u,l}))}},{key:"findLineEnd",value:function(e,t){var n=e.lastIndexOf("\n",t-1)+1;return"\t"!==e.charAt(n)?t:n+1}},{key:"indent",value:function(t){var n,r=t.selectionStart,i=t.selectionEnd,o=t.value,a=o.slice(r,i),s=null===(n=/\n/g.exec(a))||void 0===n?void 0:n.length;if(s&&s>0){var u=o.lastIndexOf("\n",r-1)+1,l=t.value.slice(u,i-1),c=l.replace(/^|\n/g,"$&".concat(Pc)),d=c.length-l.length;t.setSelectionRange(u,i-1),e.insert(t,c),t.setSelectionRange(r+1,i+d)}else e.insert(t,Pc)}},{key:"unindent",value:function(t){var n=t.selectionStart,r=t.selectionEnd,i=t.value,o=i.lastIndexOf("\n",n-1)+1,a=e.findLineEnd(i,r),s=t.value.slice(o,a),u=s.replace(/(^|\n)(\t| {1,2})/g,"$1"),l=s.length-u.length;t.setSelectionRange(o,a),e.insert(t,u);var c=/\t| {1,2}/.exec(i.slice(o,n)),d=c?c[0].length:0,f=n-d;t.setSelectionRange(n-d,Math.max(f,r-l))}},{key:"indentCE",value:function(e){var t,n,r,i=window.getSelection(),o=e.innerText,a=null!==(t=Tc(e))&&void 0!==t?t:0,s=null!==(n=Tc(e))&&void 0!==n?n:0,u=o.slice(a,s),l=null===(r=/\n/g.exec(u))||void 0===r?void 0:r.length;if(l&&l>0){var c=o.lastIndexOf("\n",a-1)+1,d=o.slice(c,s-1),f=d.replace(/^|\n/g,"$&".concat(Pc)).length-d.length;i&&i.setBaseAndExtent(e,a+1,e,s+f)}else{var h=window.getSelection();e.innerText=o.slice(0,a)+Pc+o.slice(a),null===h||void 0===h||h.setBaseAndExtent(e,a+1,e,a+2)}}},{key:"unindentCE",value:function(t){var n,r,i=window.getSelection(),o=t.innerText,a=null!==(n=Tc(t))&&void 0!==n?n:0,s=null!==(r=Tc(t))&&void 0!==r?r:0,u=o.lastIndexOf("\n",a-1)+1,l=e.findLineEnd(o,s),c=o.slice(u,l),d=c.replace(/(^|\n)(\t| {1,2})/g,"$1"),f=c.length-d.length;if(i){i.setBaseAndExtent(t,u,t,l);var h=/\t| {1,2}/.exec(o.slice(u,a)),p=h?h[0].length:0,v=a-p;i.setBaseAndExtent(t,a-p,t,Math.max(v,s-f))}}},{key:"normalizeText",value:function(t){return t.replace(e.fixNewLines,"\n")}},{key:"normalizeTextForDom",value:function(t){return t.replace(e.fixNewLines,"\n").split("\n").map((function(e){return e||" "})).join("\n")}}]),e}();function Tc(e){if("undefined"!==typeof window.getSelection){var t=window.getSelection();if(t){var n=0;if(0!==t.rangeCount){var r=t.getRangeAt(0),i=r.cloneRange();i.selectNodeContents(e),i.setEnd(r.endContainer,r.endOffset),n=i.toString().length}return n}}}function Mc(e,n,r){var i=da(),o=(0,t.useRef)(null),a=la("isEditing",(function(){return i.pageState.editingId===e}),[i,e]),s=(0,t.useRef)(!1),u=(0,t.useRef)(),l=la("is editable hovering",(function(){if("text"===n&&i.isIn("text")&&i.hoveredId===e)return!0;if(i.isIn("select.editing_shape")){var t=i.editingShape;return!!t&&(i.hoveredId===e&&t.type===n&&i.getShapeUtil(t).canEdit(t))}return!1}),[n,e]),c=(0,t.useCallback)((function(){l||requestAnimationFrame((function(){var t=o.current;if(t){var n=i.getShapeById(e);n&&(t.value=n.props.text,t.value.length&&!s.current&&t.select(),s.current=!1)}}))}),[i,e,l]),d=(0,t.useCallback)((function(){var e=u.current;requestAnimationFrame((function(){var t,n=o.current;if(i.isIn("select.editing_shape")&&n)if(e)if(e.length){s.current=!0,n.focus();var r=window.getSelection();r&&e.forEach((function(e){return r.addRange(e)}))}else n.focus();else n.focus();else null===(t=window.getSelection())||void 0===t||t.removeAllRanges(),i.complete()}))}),[i]),f=(0,t.useCallback)((function(e){switch((e.ctrlKey||e.metaKey)&&Ns(e),e.key){case"Enter":(e.ctrlKey||e.metaKey)&&i.complete();break;case"Tab":Ms(e),e.shiftKey?Ic.unindent(e.currentTarget):Ic.indent(e.currentTarget)}}),[i]),h=(0,t.useCallback)((function(t){var r=Ic.normalizeText(t.currentTarget.value),o=r.replace(/\t/g,Pc);if(o!==r){var a=t.currentTarget.selectionStart;t.currentTarget.value=o,t.currentTarget.selectionStart=a+(o.length-r.length),t.currentTarget.selectionEnd=a+(o.length-r.length),r=o}i.updateShapes([{id:e,type:n,props:{text:r}}])}),[i,e,n]),p=0===r.trim().length;return(0,t.useEffect)((function(){if(o.current){var e=function(){var e,t,n=null===(e=(t=window).getSelection)||void 0===e?void 0:e.call(t);if(n&&"None"!==n.type){var r=[];if(n)for(var i=0;i<n.rangeCount;i++){var o;r.push(null===(o=n.getRangeAt)||void 0===o?void 0:o.call(n,i))}u.current=r}};return document.addEventListener("selectionchange",e),function(){document.removeEventListener("selectionchange",e)}}})),{rInput:o,isEditing:a,isEditableFromHover:l,handleFocus:c,handleBlur:d,handleKeyDown:f,handleChange:h,isEmpty:p}}O(Ic,"fixNewLines",/\r?\n|\r/g);var Ac=new yc,Oc=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"canEdit",(function(){return!0})),O(B(e),"isAspectRatioLocked",(function(){return!0})),O(B(e),"onResize",(function(e,t){var n=t.initialBounds,r=t.initialShape,i=t.scaleX,o=t.handle;if("scale_shape"===t.mode||"right"!==o&&"left"!==o)return function(e,t){var n=t.initialBounds,r=t.scaleX,i=t.scaleY,o=t.newPoint,a=Math.max(.01,Math.min(Math.abs(r),Math.abs(i))),s=new va(0,0);r<0&&(s.x=-n.width*a),i<0&&(s.y=-n.height*a);var u=va.Add(o,s.rot(e.rotation));return{x:u.x,y:u.y,props:{scale:a*e.props.scale}}}(e,t);var a=n.width,s=a*i,u=new va(0,0);s=Math.max(1,Math.abs(s)),"left"===o?(u.x=a-s,i<0&&(u.x+=s)):i<0&&(u.x-=s);var l=u.rot(e.rotation).add(r);return{x:l.x,y:l.y,props:{w:s/r.props.scale,autoSize:!1}}})),O(B(e),"onBeforeCreate",(function(t){if(t.props.autoSize&&!t.props.text.trim()){var n=e.getMinDimensions(t);return R(R({},t),{},{x:t.x-n.width/2,y:t.y-n.height/2})}})),O(B(e),"onEditEnd",(function(t){var n=t.id,r=t.type,i=t.props.text,o=t.props.text.trimEnd();0===o.length?e.editor.deleteShapes([t.id]):o!==t.props.text&&e.editor.updateShapes([{id:n,type:r,props:{text:i.trimEnd()}}])})),O(B(e),"onBeforeUpdate",(function(t,n){if(n.props.autoSize){var r=t.props.size!==n.props.size||t.props.align!==n.props.align||t.props.font!==n.props.font||1!==t.props.scale&&1===n.props.scale,i=t.props.text!==n.props.text;if(r||i){var o,a=e.getMinDimensions(t),s=jc(e.editor,n.props),u=a.width*t.props.scale,l=a.height*t.props.scale,c=s.width*n.props.scale,d=s.height*n.props.scale;switch(n.props.align){case"middle":o=new va((c-u)/2,i?0:(d-l)/2);break;case"end":o=new va(c-u,i?0:(d-l)/2);break;default:if(i)break;o=new va(0,(d-l)/2)}if(o){o.rot(n.rotation);var f=n.x,h=n.y;return R(R({},n),{},{x:f-o.x,y:h-o.y,props:R(R({},n.props),{},{w:c})})}return R(R({},n),{},{props:R(R({},n.props),{},{w:c})})}}})),O(B(e),"onDoubleClickEdge",(function(e){return e.props.autoSize?1!==e.props.scale?{id:e.id,type:e.type,props:{scale:1}}:void 0:{id:e.id,type:e.type,props:{autoSize:!0}}})),e}return N(n,[{key:"defaultProps",value:function(){return{color:"black",size:"m",w:8,text:"",font:"draw",align:"middle",autoSize:!0,scale:1}}},{key:"getMinDimensions",value:function(e){var t=this;return Ac.get(e.props,(function(e){return jc(t.editor,e)}))}},{key:"getBounds",value:function(e){var t=e.props.scale,n=this.getMinDimensions(e),r=n.width,i=n.height;return new Wa(0,0,r*t,i*t)}},{key:"getOutline",value:function(e){var t=this.bounds(e);return[new va(0,0),new va(t.width,0),new va(t.width,t.height),new va(0,t.height)]}},{key:"getCenter",value:function(e){var t=this.bounds(e);return new va(t.width/2,t.height/2)}},{key:"component",value:function(e){var t=e.id,n=e.type,r=e.props.text,i=this.getMinDimensions(e),o=i.width,a=i.height,s=Mc(t,n,r),u=s.rInput,l=s.isEmpty,c=s.isEditing,d=s.isEditableFromHover,f=s.handleFocus,h=s.handleChange,p=s.handleKeyDown,v=s.handleBlur;return(0,Qo.jsx)(ic,{id:e.id,children:(0,Qo.jsxs)("div",{className:"tl-text-shape__wrapper tl-text-shadow","data-font":e.props.font,"data-align":e.props.align,"data-hastext":!l,"data-isediting":c||d,"data-textwrap":!0,style:{fontSize:Sc[e.props.size],lineHeight:Sc[e.props.size]*xc.lineHeight+"px",transform:"scale(".concat(e.props.scale,")"),transformOrigin:"top left",width:Math.max(1,o),height:Math.max(Sc[e.props.size]*xc.lineHeight,a)},children:[(0,Qo.jsx)("div",{className:"tl-text tl-text-content",dir:"ltr",children:r}),c||d?(0,Qo.jsx)("textarea",{ref:u,className:"tl-text tl-text-input",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:c,placeholder:"",spellCheck:"true",wrap:"off",dir:"ltr",datatype:"wysiwyg",defaultValue:r,onFocus:f,onChange:h,onKeyDown:p,onBlur:v,onTouchEnd:Ns,onContextMenu:Ns}):null]})})}},{key:"indicator",value:function(e){var t=this.bounds(e);return(0,Qo.jsx)("rect",{width:Fa(t.width),height:Fa(t.height)})}},{key:"toSvg",value:function(e,t,n){var r,i,o=this.bounds(e),a=e.props.text,s=o.width/(null!==(r=e.props.scale)&&void 0!==r?r:1),u=o.height/(null!==(i=e.props.scale)&&void 0!==i?i:1),l={fontSize:Sc[e.props.size],fontFamily:t,textAlign:e.props.align,verticalTextAlign:"middle",width:s,height:u,padding:0,lineHeight:xc.lineHeight,fontStyle:"normal",fontWeight:"normal",overflow:"wrap"},c=n.fill[e.props.color],d=document.createElementNS("http://www.w3.org/2000/svg","g"),f=wc(this.editor,this.editor.textMeasure.measureTextSpans(a,l),R(R({},l),{},{stroke:n.background,strokeWidth:2,fill:n.background,padding:0})),h=f.cloneNode(!0);return h.setAttribute("fill",c),h.setAttribute("stroke","none"),d.append(f),d.append(h),d}}]),n}(hc);function jc(e,t){var n=t.font,r=t.text,i=t.autoSize,o=t.size,a=t.w,s=Sc[o],u=i?"fit-content":Math.floor(Math.max(16,a))+"px",l=e.textMeasure.measureText(r,R(R({},xc),{},{fontFamily:Cc[n],fontSize:s,width:u}));return i&&(l.w+=1),{width:Math.max(16,l.w),height:Math.max(s,l.h)}}O(Oc,"type","text");var Rc="<path d='m19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill='%23fff'/><path d='m18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill='%23000'/>",Lc="<path d='m9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill='%23fff'/><path d='m17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill='%23000'/>",Dc='<path d="M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill="black"/><path fill-rule="evenodd" clip-rule="evenodd" d="M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill="white"/>';function Nc(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:16,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:16,s=ma/180*(-n-t),u=Math.sin(s),l=Math.cos(s),c=1*l-1*u,d=1*u+1*l;return"url(\"data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 32 32' xmlns='http://www.w3.org/2000/svg' style='color: ".concat(i,";'><defs><filter id='shadow' y='-40%' x='-40%' width='180px' height='180%' color-interpolation-filters='sRGB'><feDropShadow dx='").concat(c,"' dy='").concat(d,"' stdDeviation='1.2' flood-opacity='.5'/></filter></defs><g fill='none' transform='rotate(").concat(t+n," 16 16)").concat(r?" scale(-1,-1) translate(0, -32)":"","' filter='url(%23shadow)'>")+e.replaceAll('"',"'")+'</g></svg>") '.concat(o," ").concat(a,", pointer")}var zc={none:function(){return"none"},default:function(e,t,n){return Nc('<path d="m12 24.4219v-16.015l11.591 11.619h-6.781l-.411.124z" fill="white"/><path d="m21.0845 25.0962-3.605 1.535-4.682-11.089 3.686-1.553z" fill="white"/><path d="m19.751 24.4155-1.844.774-3.1-7.374 1.841-.775z" fill="black"/><path d="m13 10.814v11.188l2.969-2.866.428-.139h4.768z" fill="black"/>',e,0,t,n,12,8)},pointer:function(e,t,n){return Nc('<path d="m13.3315 21.3799c-.284-.359-.629-1.093-1.243-1.984-.348-.504-1.211-1.453-1.468-1.935-.223-.426-.199-.617-.146-.97.094-.628.738-1.117 1.425-1.051.519.049.959.392 1.355.716.239.195.533.574.71.788.163.196.203.277.377.509.23.307.302.459.214.121-.071-.496-.187-1.343-.355-2.092-.128-.568-.159-.657-.281-1.093-.129-.464-.195-.789-.316-1.281-.084-.348-.235-1.059-.276-1.459-.057-.547-.087-1.439.264-1.849.275-.321.906-.418 1.297-.22.512.259.803 1.003.936 1.3.239.534.387 1.151.516 1.961.164 1.031.466 2.462.476 2.763.024-.369-.068-1.146-.004-1.5.058-.321.328-.694.666-.795.286-.085.621-.116.916-.055.313.064.643.288.766.499.362.624.369 1.899.384 1.831.086-.376.071-1.229.284-1.584.14-.234.497-.445.687-.479.294-.052.655-.068.964-.008.249.049.586.345.677.487.218.344.342 1.317.379 1.658.015.141.074-.392.293-.736.406-.639 1.843-.763 1.898.639.025.654.02.624.02 1.064 0 .517-.012.828-.04 1.202-.031.4-.117 1.304-.242 1.742-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.191 1.813-.118.562-.079.566-.102.965-.023.398.121.922.121.922s-.802.104-1.234.035c-.391-.063-.875-.841-1-1.079-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.031-3.139.02 0 0 .185-1.011-.227-1.358-.305-.259-.83-.784-1.144-1.06z" fill="white"/><g stroke="black" stroke-linecap="round" stroke-width=".75"><path d="m13.3315 21.3799c-.284-.359-.629-1.093-1.243-1.984-.348-.504-1.211-1.453-1.468-1.935-.223-.426-.199-.617-.146-.97.094-.628.738-1.117 1.425-1.051.519.049.959.392 1.355.716.239.195.533.574.71.788.163.196.203.277.377.509.23.307.302.459.214.121-.071-.496-.187-1.343-.355-2.092-.128-.568-.159-.657-.281-1.093-.129-.464-.195-.789-.316-1.281-.084-.348-.235-1.059-.276-1.459-.057-.547-.087-1.439.264-1.849.275-.321.906-.418 1.297-.22.512.259.803 1.003.936 1.3.239.534.387 1.151.516 1.961.164 1.031.466 2.462.476 2.763.024-.369-.068-1.146-.004-1.5.058-.321.328-.694.666-.795.286-.085.621-.116.916-.055.313.064.643.288.766.499.362.624.369 1.899.384 1.831.086-.376.071-1.229.284-1.584.14-.234.497-.445.687-.479.294-.052.655-.068.964-.008.249.049.586.345.677.487.218.344.342 1.317.379 1.658.015.141.074-.392.293-.736.406-.639 1.843-.763 1.898.639.025.654.02.624.02 1.064 0 .517-.012.828-.04 1.202-.031.4-.117 1.304-.242 1.742-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.191 1.813-.118.562-.079.566-.102.965-.023.398.121.922.121.922s-.802.104-1.234.035c-.391-.063-.875-.841-1-1.079-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.031-3.139.02 0 0 .185-1.011-.227-1.358-.305-.259-.83-.784-1.144-1.06z" stroke-linejoin="round"/><path d="m21.5664 21.7344v-3.459"/><path d="m19.5508 21.7461-.016-3.473"/><path d="m17.5547 18.3047.021 3.426"/></g>',e,0,t,n,14,10)},cross:function(e,t,n){return Nc('<path d="m25 16h-6.01v-6h-2.98v6h-6.01v3h6.01v6h2.98v-6h6.01z" fill="white"/><path d="m23.9902 17.0103h-6v-6.01h-.98v6.01h-6v.98h6v6.01h.98v-6.01h6z" fill="%23231f1f"/>',e,0,t,n)},move:function(e,t,n){return Nc('<path d="m19 14h1v1h-1zm1 6h-1v-1h1zm-5-5h-1v-1h1zm0 5h-1v-1h1zm2-10.987-7.985 7.988 5.222 5.221 2.763 2.763 7.984-7.985z" fill="white"/><g fill="black"><path d="m23.5664 16.9971-2.557-2.809v1.829h-4.009-4.001v-1.829l-2.571 2.809 2.572 2.808-.001-1.808h4.001 4.009l-.001 1.808z"/><path d="m17.9873 17h.013v-4.001l1.807.001-2.807-2.571-2.809 2.57h1.809v4.001h.008v4.002l-1.828-.001 2.807 2.577 2.805-2.576h-1.805z"/></g>',e,0,t,n)},grab:function(e,t,n){return Nc('<path d="m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" fill="white"/><g stroke="black" stroke-linecap="round" stroke-width=".75"><path d="m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" stroke-linejoin="round"/><path d="m20.5664 21.7344v-3.459"/><path d="m18.5508 21.7461-.016-3.473"/><path d="m16.5547 18.3047.021 3.426"/></g>',e,0,t,n)},grabbing:function(e,t,n){return Nc("<path d='m13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042' fill='white'/><g stroke='black' stroke-width='.75'><path d='m13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042z' stroke-linejoin='round'/><path d='m20.5664 19.7344v-3.459' stroke-linecap='round'/><path d='m18.5508 19.7461-.016-3.473' stroke-linecap='round'/><path d='m16.5547 16.3047.021 3.426' stroke-linecap='round'/></g>",e,0,t,n)},text:function(e,t,n){return Nc('<path fill="white" d="M7.94 0a5.25 5.25 0 0 0-3.47 1.17A5.27 5.27 0 0 0 1 0H0v3h1c1.41 0 1.85.7 2 1v3.94H2v3h1v3c-.13.3-.57 1-2 1H0v3h1a5.27 5.27 0 0 0 3.47-1.17c.98.8 2.21 1.21 3.47 1.17h1v-3h-1c-1.41 0-1.85-.7-2-1v-3H7v-3H6V4c.13-.3.57-1 2-1h1V0H7.94z"/><path fill="black" d="M7.94 2V1a4 4 0 0 0-3.47 1.64A4 4 0 0 0 1 1v1c1.3-.17 2.56.6 3 1.84v5.1H3v1h1v4.16c-.45 1.24-1.7 2-3 1.84v1a4.05 4.05 0 0 0 3.47-1.63 4.05 4.05 0 0 0 3.47 1.63v-1A2.82 2.82 0 0 1 5 14.1V9.93h1v-1H5V3.85A2.81 2.81 0 0 1 7.94 2z"/>',e,0,t,n,4,10)},"ew-resize":function(e,t,n){return Nc(Lc,e,0,t,n)},"ns-resize":function(e,t,n){return Nc(Lc,e,90,t,n)},"nesw-resize":function(e,t,n){return Nc(Rc,e,0,t,n)},"nwse-resize":function(e,t,n){return Nc(Rc,e,90,t,n)},"nwse-rotate":function(e,t,n){return Nc(Dc,e,0,t,n)},"nesw-rotate":function(e,t,n){return Nc(Dc,e,90,t,n)},"senw-rotate":function(e,t,n){return Nc(Dc,e,180,t,n)},"swne-rotate":function(e,t,n){return Nc(Dc,e,270,t,n)},"zoom-in":function(e,t,n){return Nc('<path d="m20.5 15c0 3.038-2.462 5.5-5.5 5.5s-5.5-2.462-5.5-5.5 2.462-5.5 5.5-5.5 5.5 2.462 5.5 5.5" fill="white"/><path d="m20.5 15c0 3.038-2.462 5.5-5.5 5.5s-5.5-2.462-5.5-5.5 2.462-5.5 5.5-5.5 5.5 2.462 5.5 5.5z" stroke="black"/><g fill="black"><path d="m18 14h-2v-2h-2v2h-2v1.98h2v2.02h2v-2.02h2z"/><path d="m23.5859 25 1.414-1.414-5.449-5.449-1.414 1.414z"/></g>',e,0,t,n)},"zoom-out":function(e,t,n){return Nc('<path d="m20.5 15c0 3.038-2.462 5.5-5.5 5.5s-5.5-2.462-5.5-5.5 2.462-5.5 5.5-5.5 5.5 2.462 5.5 5.5" fill="white"/><path d="m20.5 15c0 3.038-2.462 5.5-5.5 5.5s-5.5-2.462-5.5-5.5 2.462-5.5 5.5-5.5 5.5 2.462 5.5 5.5z" stroke="black"/><g fill="black"><path d="m18 16h-5.98v-1.98h5.98z"/><path d="m23.5859 25 1.414-1.414-5.449-5.449-1.414 1.414z"/></g>',e,0,t,n)}};function Bc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"black";return zc[e](function(e){return 180*e/ma}(t),!1,n)}var Fc=["default","pointer","cross","move","grab","grabbing","text"];function Uc(e){var n=da(),r=(0,t.useMemo)((function(){var t,r;return{onPointerDown:function(t){if(!t.isKilled&&0===t.button){var r=Ts(t.currentTarget);As(r,t),r.addEventListener("pointerup",(function e(){r.removeEventListener("pointerup",e),Os(r,t)})),n.dispatch(R({name:"pointer_down",type:"pointer",target:"selection",handle:e},zs(t,n.getContainer()))),t.stopPropagation()}},onPointerMove:function(i){i.isKilled||0===i.button&&(i.clientX===t&&i.clientY===r||(t=i.clientX,r=i.clientY,n.dispatch(R({name:"pointer_move",type:"pointer",target:"selection",handle:e},zs(i,n.getContainer())))))},onPointerUp:function(t){t.isKilled||0===t.button&&n.dispatch(R({name:"pointer_up",type:"pointer",target:"selection",handle:e},zs(t,n.getContainer())))}}}),[n,e]);return r}function Kc(e){var t=e.size,n=e.width,r=e.height,i=e.hideAlternateHandles,o=Fa(t/3),a=o/2;return(0,Qo.jsxs)("svg",{className:"tl-overlays__item",children:[(0,Qo.jsx)("polyline",{className:"tl-corner-crop-handle",points:"\n\t\t\t\t\t\t".concat(Fa(0-a),",").concat(Fa(t)," \n\t\t\t\t\t\t").concat(Fa(0-a),",").concat(Fa(0-a)," \n\t\t\t\t\t\t").concat(Fa(t),",").concat(Fa(0-a)),strokeWidth:o,"data-testid":"selection.crop.top_left","aria-label":"top_left handle"}),(0,Qo.jsx)("line",{className:ra("tl-corner-crop-edge-handle",{"tl-hidden":i}),x1:Fa(n/2-t),y1:Fa(0-a),x2:Fa(n/2+t),y2:Fa(0-a),strokeWidth:o,"data-testid":"selection.crop.top","aria-label":"top handle"}),(0,Qo.jsx)("polyline",{className:ra("tl-corner-crop-handle",{"tl-hidden":i}),points:"\n\t\t\t\t\t\t".concat(Fa(n-t),",").concat(Fa(0-a)," \n\t\t\t\t\t\t").concat(Fa(n+a),",").concat(Fa(0-a)," \n\t\t\t\t\t\t").concat(Fa(n+a),",").concat(Fa(t)),strokeWidth:o,"data-testid":"selection.crop.top_right","aria-label":"top_right handle"}),(0,Qo.jsx)("line",{className:ra("tl-corner-crop-edge-handle",{"tl-hidden":i}),x1:Fa(n+a),y1:Fa(r/2-t),x2:Fa(n+a),y2:Fa(r/2+t),strokeWidth:o,"data-testid":"selection.crop.right","aria-label":"right handle"}),(0,Qo.jsx)("polyline",{className:"tl-corner-crop-handle",points:"\n\t\t\t\t\t\t".concat(Fa(n+a),",").concat(Fa(r-t)," \n\t\t\t\t\t\t").concat(Fa(n+a),",").concat(Fa(r+a),"\n\t\t\t\t\t\t").concat(Fa(n-t),",").concat(Fa(r+a)),strokeWidth:o,"data-testid":"selection.crop.bottom_right","aria-label":"bottom_right handle"}),(0,Qo.jsx)("line",{className:ra("tl-corner-crop-edge-handle",{"tl-hidden":i}),x1:Fa(n/2-t),y1:Fa(r+a),x2:Fa(n/2+t),y2:Fa(r+a),strokeWidth:o,"data-testid":"selection.crop.bottom","aria-label":"bottom handle"}),(0,Qo.jsx)("polyline",{className:ra("tl-corner-crop-handle",{"tl-hidden":i}),points:"\n\t\t\t\t\t\t".concat(Fa(0+t),",").concat(Fa(r+a)," \n\t\t\t\t\t\t").concat(Fa(0-a),",").concat(Fa(r+a),"\n\t\t\t\t\t\t").concat(Fa(0-a),",").concat(Fa(r-t)),strokeWidth:o,"data-testid":"selection.crop.bottom_left","aria-label":"bottom_left handle"}),(0,Qo.jsx)("line",{className:ra("tl-corner-crop-edge-handle",{"tl-hidden":i}),x1:Fa(0-a),y1:Fa(r/2-t),x2:Fa(0-a),y2:Fa(r/2+t),strokeWidth:o,"data-testid":"selection.crop.left","aria-label":"left handle"})]})}var Vc="undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().indexOf("firefox")>-1,Wc=ua((function(){var e,n,r=da(),i=(0,t.useRef)(null),o=r.isReadOnly,a=Uc("top"),s=Uc("right"),u=Uc("bottom"),l=Uc("left"),c=Uc("top_left"),d=Uc("top_right"),f=Uc("bottom_right"),h=Uc("bottom_left"),p=!r.isMenuOpen&&"default"===r.cursor.type,v=r.isCoarsePointer,g=r.selectionBounds,m=r.selectedShapes,y=r.onlySelectedShape,b=y&&r.isShapeOrAncestorLocked(y),w=y?r.getShapeUtil(y).expandSelectionOutlinePx(y):0;if($s(i,null===(e=g)||void 0===e?void 0:e.x,null===(n=g)||void 0===n?void 0:n.y,1,r.selectionRotation,{x:-w,y:-w}),!g)return null;g=g.clone().expandBy(w);var x=r.zoomLevel,k=r.selectionRotation,S=r.isChangingStyle,_=Math.max(1,g.width),E=Math.max(1,g.height),C=8/x,P=_<2*C,I=E<2*C,T=_<4*C,M=E<4*C,A=_<5*C,O=E<5*C,j=v?1.75:1,L=6/x*j,D=(T?L/2:L)*(.75*j),N=(M?L/2:L)*(.75*j),z=(!y||!r.getShapeUtil(y).hideSelectionBoundsFg(y))&&!S,B=z&&r.isInAny("select.idle","select.brushing","select.scribble_brushing","select.pointing_canvas","select.pointing_selection","select.pointing_shape","select.crop.idle","select.crop.pointing_crop","select.pointing_resize_handle","select.pointing_crop_handle","select.editing_shape")||z&&r.isIn("select.resizing")&&y&&r.isShapeOfType(y,Oc);y&&r.isShapeOfType(y,gc)&&B&&Vc&&(B=!1);var F=r.isInAny("select.pointing_crop_handle","select.crop.idle","select.crop.pointing_crop")&&!S&&!o,U=r.isInAny("select.idle","select.pointing_selection","select.pointing_shape","select.crop.idle")&&!S&&!o,K=!v&&!(P||I)&&(U||F)&&(!y||!r.getShapeUtil(y).hideRotateHandle(y))&&!b,V=v&&(!T||!M)&&(U||F)&&(!y||!r.getShapeUtil(y).hideRotateHandle(y))&&!b,W=U&&(!y||r.getShapeUtil(y).canResize(y)&&!r.getShapeUtil(y).hideResizeHandles(y))&&!F&&!b,H=P||I,Y=P&&I,X=A||O,q=W||F,$=!K,G=!U||!V,Q=!U||!q,J=!U||!q||H,Z=!U||!q||H,ee=!U||!q||Y&&!F,te=v;te&&m.every((function(e){return r.getShapeUtil(e).isAspectRatioLocked(e)}))&&(te=!1);var ne=!0;F?ne=X:W&&(ne=H||Y||te);var re=Math.min(24/x,E-3*N),ie=U&&v&&y&&r.isShapeOfType(y,Oc)&&re*x>=4;return(0,Qo.jsxs)("svg",{ref:i,className:"tl-overlays__item tl-selection__fg","data-testid":"selection-foreground",children:[B&&(0,Qo.jsx)("rect",{className:ra("tl-selection__fg__outline"),width:Fa(_),height:Fa(E)}),(0,Qo.jsx)(Hc,{"data-testid":"selection.rotate.top-left",cx:0,cy:0,targetSize:L,corner:"top_left_rotate",cursor:p?Bc("nwse-rotate",k):void 0,isHidden:$}),(0,Qo.jsx)(Hc,{"data-testid":"selection.rotate.top-right",cx:_+3*L,cy:0,targetSize:L,corner:"top_right_rotate",cursor:p?Bc("nesw-rotate",k):void 0,isHidden:$}),(0,Qo.jsx)(Hc,{"data-testid":"selection.rotate.bottom-left",cx:0,cy:E+3*L,targetSize:L,corner:"bottom_left_rotate",cursor:p?Bc("swne-rotate",k):void 0,isHidden:$}),(0,Qo.jsx)(Hc,{"data-testid":"selection.rotate.bottom-right",cx:_+3*L,cy:E+3*L,targetSize:L,corner:"bottom_right_rotate",cursor:p?Bc("senw-rotate",k):void 0,isHidden:$})," ",(0,Qo.jsx)(Xc,{"data-testid":"selection.rotate.mobile",cx:T?1.5*-L:_/2,cy:T?E/2:1.5*-L,size:C,isHidden:G}),(0,Qo.jsx)("rect",R({className:ra("tl-transparent",{"tl-hidden":ne}),"data-testid":"selection.resize.top","aria-label":"top target",pointerEvents:"all",x:0,y:Fa(0-(M?2*N:N)),width:Fa(Math.max(1,_)),height:Fa(Math.max(1,2*N)),style:p?{cursor:Bc("ns-resize",k)}:void 0},a)),(0,Qo.jsx)("rect",R({className:ra("tl-transparent",{"tl-hidden":ne}),"data-testid":"selection.resize.right","aria-label":"right target",pointerEvents:"all",x:Fa(_-(T?0:D)),y:0,height:Fa(Math.max(1,E)),width:Fa(Math.max(1,2*D)),style:p?{cursor:Bc("ew-resize",k)}:void 0},s)),(0,Qo.jsx)("rect",R({className:ra("tl-transparent",{"tl-hidden":ne}),"data-testid":"selection.resize.bottom","aria-label":"bottom target",pointerEvents:"all",x:0,y:Fa(E-(M?0:N)),width:Fa(Math.max(1,_)),height:Fa(Math.max(1,2*N)),style:p?{cursor:Bc("ns-resize",k)}:void 0},u)),(0,Qo.jsx)("rect",R({className:ra("tl-transparent",{"tl-hidden":ne}),"data-testid":"selection.resize.left","aria-label":"left target",pointerEvents:"all",x:Fa(0-(T?2*D:D)),y:0,height:Fa(Math.max(1,E)),width:Fa(Math.max(1,2*D)),style:p?{cursor:Bc("ew-resize",k)}:void 0},l)),(0,Qo.jsx)("rect",R({className:ra("tl-transparent",{"tl-hidden":Q}),"data-testid":"selection.target.top-left","aria-label":"top-left target",pointerEvents:"all",x:Fa(0-(T?2*D:1.5*D)),y:Fa(0-(M?2*N:1.5*N)),width:Fa(3*D),height:Fa(3*N),style:p?{cursor:Bc("nwse-resize",k)}:void 0},c)),(0,Qo.jsx)("rect",R({className:ra("tl-transparent",{"tl-hidden":J}),"data-testid":"selection.target.top-right","aria-label":"top-right target",pointerEvents:"all",x:Fa(_-(T?0:1.5*D)),y:Fa(0-(M?2*N:1.5*N)),width:Fa(3*D),height:Fa(3*N),style:p?{cursor:Bc("nesw-resize",k)}:void 0},d)),(0,Qo.jsx)("rect",R({className:ra("tl-transparent",{"tl-hidden":ee}),"data-testid":"selection.target.bottom-right","aria-label":"bottom-right target",pointerEvents:"all",x:Fa(_-(T?D:1.5*D)),y:Fa(E-(M?N:1.5*N)),width:Fa(3*D),height:Fa(3*N),style:p?{cursor:Bc("nwse-resize",k)}:void 0},f)),(0,Qo.jsx)("rect",R({className:ra("tl-transparent",{"tl-hidden":Z}),"data-testid":"selection.target.bottom-left","aria-label":"bottom-left target",pointerEvents:"all",x:Fa(0-(T?3*D:1.5*D)),y:Fa(E-(M?0:1.5*N)),width:Fa(3*D),height:Fa(3*N),style:p?{cursor:Bc("nesw-resize",k)}:void 0},h)),W&&(0,Qo.jsxs)(Qo.Fragment,{children:[(0,Qo.jsx)("rect",{"data-testid":"selection.resize.top-left",className:ra("tl-corner-handle",{"tl-hidden":Q}),"aria-label":"top_left handle",x:Fa(0-C/2),y:Fa(0-C/2),width:Fa(C),height:Fa(C)}),(0,Qo.jsx)("rect",{"data-testid":"selection.resize.top-right",className:ra("tl-corner-handle",{"tl-hidden":J}),"aria-label":"top_right handle",x:Fa(_-C/2),y:Fa(0-C/2),width:Fa(C),height:Fa(C)}),(0,Qo.jsx)("rect",{"data-testid":"selection.resize.bottom-right",className:ra("tl-corner-handle",{"tl-hidden":ee}),"aria-label":"bottom_right handle",x:Fa(_-C/2),y:Fa(E-C/2),width:Fa(C),height:Fa(C)}),(0,Qo.jsx)("rect",{"data-testid":"selection.resize.bottom-left",className:ra("tl-corner-handle",{"tl-hidden":Z}),"aria-label":"bottom_left handle",x:Fa(0-C/2),y:Fa(E-C/2),width:Fa(C),height:Fa(C)})]}),ie&&(0,Qo.jsxs)(Qo.Fragment,{children:[(0,Qo.jsx)("rect",{"data-testid":"selection.text-resize.left.handle",className:"tl-text-handle","aria-label":"bottom_left handle",x:Fa(0-C/4),y:Fa(E/2-re/2),rx:C/4,width:Fa(C/2),height:Fa(re)}),(0,Qo.jsx)("rect",{"data-testid":"selection.text-resize.right.handle",className:"tl-text-handle","aria-label":"bottom_left handle",rx:C/4,x:Fa(_-C/4),y:Fa(E/2-re/2),width:Fa(C/2),height:Fa(re)})]}),F&&(0,Qo.jsx)(Kc,R({},{size:C,width:_,height:E,hideAlternateHandles:X}))]})})),Hc=function(e){var t=e.cx,n=e.cy,r=e.targetSize,i=e.corner,o=e.cursor,a=e.isHidden,s=e["data-testid"],u=Uc(i);return(0,Qo.jsx)("rect",R({className:ra("tl-transparent","tl-rotate-corner",{"tl-hidden":a}),"data-testid":s,"aria-label":"".concat(i," target"),pointerEvents:"all",x:Fa(t-3*r),y:Fa(n-3*r),width:Fa(Math.max(1,3*r)),height:Fa(Math.max(1,3*r)),cursor:o},u))},Yc=Math.sqrt(Math.PI),Xc=function(e){var t=e.cx,n=e.cy,r=e.size,i=e.isHidden,o=e["data-testid"],a=Uc("mobile_rotate");return(0,Qo.jsxs)("g",{children:[(0,Qo.jsx)("circle",R({"data-testid":o,pointerEvents:"all",className:ra("tl-transparent","tl-mobile-rotate__bg",{"tl-hidden":i}),cx:t,cy:n},a)),(0,Qo.jsx)("circle",{className:ra("tl-mobile-rotate__fg",{"tl-hidden":i}),cx:t,cy:n,r:r/Yc})]})},qc=function(e,t,n){return function(r){if("pointer_move"!==n&&e.pageState.editingId===t&&(r.isKilled=!0),!r.isKilled){switch(n){case"pointer_down":if(0!==r.button&&1!==r.button&&2!==r.button)return;As(r.currentTarget,r);break;case"pointer_up":Os(r.currentTarget,r)}var i=e.getShapeById(t);i?e.dispatch(R({type:"pointer",target:"shape",shape:i,name:n},zs(r,e.getContainer()))):console.error("Shape not found",t)}}};var $c=ua((function(e){var n=e.id,r=e.index,i=e.backgroundIndex,o=e.opacity,a=e.isCulled,s=da(),u=Tu().ShapeErrorFallback,l=function(e){var n=da();return t.useMemo((function(){var t,r,i=qc(n,e,"pointer_move");return{onPointerDown:qc(n,e,"pointer_down"),onPointerUp:qc(n,e,"pointer_up"),onPointerEnter:qc(n,e,"pointer_enter"),onPointerLeave:qc(n,e,"pointer_leave"),onPointerMove:function(e){if(!e.isKilled&&(e.clientX!==t||e.clientY!==r))return t=e.clientX,r=e.clientY,i(e)},onTouchStart:function(e){e.isKilled=!0,Ms(e)},onTouchEnd:function(e){e.isKilled=!0,Ms(e)}}}),[n,e])}(n),c=t.useRef(null),d=t.useRef(null),f=t.useCallback((function(e,t){var n,r;null===(n=c.current)||void 0===n||n.style.setProperty(e,t),null===(r=d.current)||void 0===r||r.style.setProperty(e,t)}),[]);Gl("set shape container transform position",(function(){var e=s.getShapeById(n),t=s.getPageTransformById(n);if(!e||!t)return null;var r=Ja.toCssString(t);f("transform",r)}),[s,f]),Gl("set shape container clip path",(function(){if(!s.getShapeById(n))return null;var e=s.getClipPathById(n);f("clip-path",null!==e&&void 0!==e?e:"none")}),[s,f]),Gl("set shape height and width",(function(){var e=s.getShapeById(n);if(!e)return null;var t=s.getShapeUtil(e).bounds(e);f("width",Math.ceil(t.width)+"px"),f("height",Math.ceil(t.height)+"px")}),[s]),t.useLayoutEffect((function(){var e,t;f("opacity",o+""),null===(e=c.current)||void 0===e||e.style.setProperty("z-index",r+""),null===(t=d.current)||void 0===t||t.style.setProperty("z-index",i+"")}),[o,r,i,f]);var h=s.getShapeById(n);if(!h)return null;var p=s.getShapeUtil(h);return(0,Qo.jsxs)(Qo.Fragment,{children:[p.renderBackground&&(0,Qo.jsx)("div",{ref:d,className:"tl-shape tl-shape-background","data-shape-type":h.type,draggable:!1,children:!a&&(0,Qo.jsx)(ku,{fallback:u?function(e){return(0,Qo.jsx)(u,{error:e})}:null,onError:function(e){return s.annotateError(e,{origin:"react.shape",willCrashApp:!1})},children:(0,Qo.jsx)(Qc,{shape:h,util:p})})}),(0,Qo.jsx)("div",{ref:c,className:"tl-shape","data-shape-type":h.type,draggable:!1,onPointerDown:l.onPointerDown,onPointerMove:l.onPointerMove,onPointerUp:l.onPointerUp,onPointerEnter:l.onPointerEnter,onPointerLeave:l.onPointerLeave,children:a&&p.canUnmount(h)?(0,Qo.jsx)(Jc,{shape:h,util:p}):(0,Qo.jsx)(ku,{fallback:u?function(e){return(0,Qo.jsx)(u,{error:e})}:null,onError:function(e){return s.annotateError(e,{origin:"react.shape",willCrashApp:!1})},children:(0,Qo.jsx)(Gc,{shape:h,util:p})})})]})})),Gc=t.memo((function(e){var t=e.shape,n=e.util;return ia("InnerShape:"+n.type,(function(){return n.component(t)}))}),(function(e,t){return e.shape.props===t.shape.props})),Qc=t.memo((function(e){var t=e.shape,n=e.util;return ia("InnerShape:"+n.type,(function(){var e;return null===(e=n.renderBackground)||void 0===e?void 0:e.call(n,t)}))}),(function(e,t){return e.shape.props===t.shape.props})),Jc=t.memo((function(e){var t=e.shape,n=e.util.bounds(t);return(0,Qo.jsx)("div",{className:"tl-shape__culled",style:{transform:"translate(".concat(n.minX,"px, ").concat(n.minY,"px)"),width:n.width,height:n.height}})}),(function(){return!0})),Zc=ua((function(){var e=da(),n=Tu(),r=n.Background,i=n.SvgDefs,o=t.useRef(null),a=t.useRef(null);!function(){var e=da(),n=Hs();(0,t.useLayoutEffect)((function(){var t=Nl((function(){e.updateViewportScreenBounds()}),200,{trailing:!0}),r=new ResizeObserver((function(e){e[0].contentRect&&t()}));return n&&r.observe(n),t(),function(){r.disconnect()}}),[e,n])}(),function(){var e=da(),n=Hs(),r=la("isFocused",(function(){return e.isFocused}),[e]);(0,t.useEffect)((function(){if(r){var t=function(t){if(!t.altKey||!e.isIn("zoom")&&e.root.path.value.endsWith(".idle")||Xs()||Ms(t),!t.isKilled){switch(t.isKilled=!0,t.key){case"=":case"-":case"0":if(t.metaKey||t.ctrlKey)return void Ms(t);break;case"Tab":default:if(Xs()||e.isMenuOpen)return;break;case",":if(!Xs()&&(Ms(t),!e.inputs.keys.has("Comma"))){var r=e.inputs.currentScreenPoint,i=r.x,o=r.y,a=r.z,s=e.pageState.hoveredId;e.inputs.keys.add("Comma");var u=R({type:"pointer",name:"pointer_down",point:{x:i,y:o,z:a},shiftKey:t.shiftKey,altKey:t.altKey,ctrlKey:t.metaKey||t.ctrlKey,pointerId:0,button:0,isPen:e.isPenMode},s?{target:"shape",shape:e.getShapeById(s)}:{target:"canvas"});return void e.dispatch(u)}break;case"Escape":return void(e.inputs.keys.has("Escape")||(e.inputs.keys.add("Escape"),e.cancel(),n.focus()))}var l={type:"keyboard",name:e.inputs.keys.has(t.code)?"key_repeat":"key_down",key:t.key,code:t.code,shiftKey:t.shiftKey,altKey:t.altKey,ctrlKey:t.metaKey||t.ctrlKey};e.dispatch(l)}},i=function(t){if(!t.isKilled&&(t.isKilled=!0,!Xs()&&!e.isMenuOpen)){var n;if(","===t.key&&(null!==(n=document.activeElement)&&void 0!==n&&n.ELEMENT_NODE&&Ms(t),e.inputs.keys.has(t.code))){var r=e.inputs.currentScreenPoint,i=r.x,o=r.y,a=r.z,s=e.pageState.hoveredId;e.inputs.keys.delete(t.code);var u=R({type:"pointer",name:"pointer_up",point:{x:i,y:o,z:a},shiftKey:t.shiftKey,altKey:t.altKey,ctrlKey:t.metaKey||t.ctrlKey,pointerId:0,button:0,isPen:e.isPenMode},s?{target:"shape",shape:e.getShapeById(s)}:{target:"canvas"});return void e.dispatch(u)}var l={type:"keyboard",name:"key_up",key:t.key,code:t.code,shiftKey:t.shiftKey,altKey:t.altKey,ctrlKey:t.metaKey||t.ctrlKey};e.dispatch(l)}},o=function(e){n.contains(e.target)&&(e.ctrlKey||e.metaKey)&&Ms(e)};return n.addEventListener("touchstart",a,{passive:!1}),document.addEventListener("wheel",o,{passive:!1}),document.addEventListener("gesturestart",Ms),document.addEventListener("gesturechange",Ms),document.addEventListener("gestureend",Ms),document.addEventListener("keydown",t),document.addEventListener("keyup",i),window.addEventListener("blur",s),window.addEventListener("focus",u),function(){n.removeEventListener("touchstart",a),document.removeEventListener("wheel",o),document.removeEventListener("gesturestart",Ms),document.removeEventListener("gesturechange",Ms),document.removeEventListener("gestureend",Ms),document.removeEventListener("keydown",t),document.removeEventListener("keyup",i),window.removeEventListener("blur",s),window.removeEventListener("focus",u)}}function a(t){if(n.contains(t.target)){var r,i,o=t.touches[0].pageX,a=t.touches[0].radiusX||0;if(o-a<10||o+a>e.viewportScreenBounds.width-10)"BUTTON"===(null===(r=t.target)||void 0===r?void 0:r.tagName)&&(null===(i=t.target)||void 0===i||i.click()),Ms(t)}}function s(){e.complete()}function u(){e.updateViewportScreenBounds()}}),[e,n,r])}(),function(){var e=da();(0,t.useEffect)((function(){if(window.matchMedia){var t=window.matchMedia("(pointer: coarse)"),n=function(){e.isCoarsePointer=t.matches};return n(),t.addEventListener("change",n),function(){return t.removeEventListener("change",n)}}}),[e])}(),Vl(o),function(e){var n=da();(0,t.useEffect)((function(){var t=e.current;if(t){var r=function(e){if(e instanceof PointerEvent&&"pen"===e.pointerType){var t;e.isKilled=!0;var r=e.target;if(Mu.includes(null===(t=r.tagName)||void 0===t?void 0:t.toLocaleLowerCase())||n.isIn("select.editing_shape"))return;Ms(e)}};return t.addEventListener("touchstart",r),t.addEventListener("touchend",r),function(){t.removeEventListener("touchstart",r),t.addEventListener("touchend",r)}}}),[n,e])}(o),Gl("position layers",(function(){var t=a.current;if(t){var n=e.camera,r=n.x,i=n.y,o=n.z,s=o>=1?se(o,[1,8],[.125,.5],!0):se(o,[.1,1],[-2,.125],!0);t.style.setProperty("transform","scale(".concat(Fa(o),") translate(").concat(Fa(r+s),"px,").concat(Fa(i+s),"px)"))}}),[e]);var s=Xl(),u=s.context,l=s.isReady,c=function(){var e=da(),n=(0,t.useMemo)((function(){var t,n;function r(){return r=na(ea().mark((function t(n){var r,i,o;return ea().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Ms(n),null!==(r=n.dataTransfer)&&void 0!==r&&null!==(r=r.files)&&void 0!==r&&r.length){t.next=3;break}return t.abrupt("return");case 3:return i=Array.from(n.dataTransfer.files),o=e.getContainer().getBoundingClientRect(),t.next=7,e.putExternalContent({type:"files",files:i,point:e.screenToPage(n.clientX-o.x,n.clientY-o.y),ignoreParent:!1});case 7:case"end":return t.stop()}}),t)}))),r.apply(this,arguments)}return{onPointerDown:function(t){t.isKilled||0!==t.button&&1!==t.button&&5!==t.button||(As(t.currentTarget,t),e.dispatch(R({type:"pointer",target:"canvas",name:"pointer_down"},zs(t,e.getContainer()))))},onPointerMove:function(r){r.isKilled||r.clientX===t&&r.clientY===n||(t=r.clientX,n=r.clientY,e.dispatch(R({type:"pointer",target:"canvas",name:"pointer_move"},zs(r,e.getContainer()))))},onPointerUp:function(r){r.isKilled||0!==r.button&&1!==r.button&&2!==r.button&&5!==r.button||(t=r.clientX,n=r.clientY,Os(r.currentTarget,r),e.dispatch(R({type:"pointer",target:"canvas",name:"pointer_up"},zs(r,e.getContainer()))))},onPointerEnter:function(t){t.isKilled||e.dispatch(R({type:"pointer",target:"canvas",name:"pointer_enter"},zs(t,e.getContainer())))},onPointerLeave:function(t){t.isKilled||e.dispatch(R({type:"pointer",target:"canvas",name:"pointer_leave"},zs(t,e.getContainer())))},onDragOver:function(e){Ms(e)},onDrop:function(e){return r.apply(this,arguments)},onTouchStart:function(e){e.isKilled=!0,document.body.click(),Ms(e)},onTouchEnd:function(e){e.isKilled=!0,"A"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&Ms(e)}}}),[e]);return n}();return t.useEffect((function(){if(l&&e.isSafari){var t=a.current;t&&requestAnimationFrame((function(){t.style.display="none",requestAnimationFrame((function(){t.style.display=""}))}))}}),[e,l]),t.useEffect((function(){var e;null===(e=o.current)||void 0===e||e.focus()}),[]),(0,Qo.jsxs)("div",R(R({ref:o,draggable:!1,className:"tl-canvas","data-testid":"canvas"},c),{},{children:[r&&(0,Qo.jsx)(r,{}),(0,Qo.jsx)(ed,{}),(0,Qo.jsx)(gd,{}),(0,Qo.jsxs)("div",{ref:a,className:"tl-html-layer",draggable:!1,children:[(0,Qo.jsx)("svg",{className:"tl-svg-context",children:(0,Qo.jsxs)("defs",{children:[u,dd&&(0,Qo.jsx)(dd,{}),(0,Qo.jsx)(fd,{}),(0,Qo.jsx)(hd,{}),(0,Qo.jsx)(pd,{}),i&&(0,Qo.jsx)(i,{})]})}),(0,Qo.jsx)(nc,{}),(0,Qo.jsx)("div",{className:"tl-shapes",children:(0,Qo.jsx)(sd,{})}),(0,Qo.jsxs)("div",{className:"tl-overlays",children:[(0,Qo.jsx)(od,{}),(0,Qo.jsx)(nd,{}),(0,Qo.jsx)(td,{}),(0,Qo.jsx)(rd,{}),(0,Qo.jsx)(ud,{}),(0,Qo.jsx)(ld,{}),(0,Qo.jsx)(cd,{}),(0,Qo.jsx)(id,{}),(0,Qo.jsx)(Wc,{}),(0,Qo.jsx)(ec,{})]})]})]}))})),ed=ua((function(){var e=da(),t=Tu().Grid,n=e.camera,r=n.x,i=n.y,o=n.z,a=e.isGridMode;return t&&a?(0,Qo.jsx)(t,{x:r,y:i,z:o,size:e.gridSize}):null})),td=ua((function(){var e=da(),t=e.scribble,n=e.zoomLevel,r=Tu().Scribble;return r&&t?(0,Qo.jsx)(r,{className:"tl-user-scribble",scribble:t,zoom:n}):null})),nd=ua((function(){var e=da(),t=e.brush,n=Tu().Brush;return n&&t&&e.isIn("select.brushing")?(0,Qo.jsx)(n,{className:"tl-user-brush",brush:t}):null})),rd=ua((function(){var e=da(),t=e.zoomBrush,n=Tu().ZoomBrush;return n&&t&&e.isIn("zoom")?(0,Qo.jsx)(n,{className:"tl-user-brush",brush:t}):null})),id=ua((function(){var e=da(),t=e.snaps.lines,n=e.zoomLevel,r=Tu().SnapLine;return r&&t.length>0?(0,Qo.jsx)(Qo.Fragment,{children:t.map((function(e){return(0,Qo.jsx)(r,{className:"tl-user-snapline",line:e,zoom:n},e.id)}))}):null})),od=ua((function(){var e,t=da(),n=t.zoomLevel,r=t.isChangingStyle,i=t.onlySelectedShape,o=t.isInAny("select.idle","select.pointing_handle")&&!r&&!t.isReadOnly;if(!i||!o)return null;var a=t.getShapeUtil(i),s=null===(e=a.handles)||void 0===e?void 0:e.call(a,i);if(!s)return null;var u=t.getPageTransform(i);if(!u)return null;for(var l=[],c=0,d=s[c];c<s.length;d=s[++c]){if("vertex"!==d.type){var f=s[c-1],h=s[c+1];if(f&&h&&Math.hypot(f.y-h.y,f.x-h.x)<48/n)continue}l.push(d)}return l.sort((function(e){return"vertex"===e.type?1:-1})),(0,Qo.jsx)("svg",{className:"tl-user-handles tl-overlays__item",children:(0,Qo.jsx)("g",{transform:Ja.toCssString(u),children:l.map((function(e){return(0,Qo.jsx)(ad,{shapeId:i.id,handle:e},e.id)}))})})})),ad=function(e){var n=e.shapeId,r=e.handle,i=function(e,n){var r=da();return t.useMemo((function(){var t,i;return{onPointerDown:function(t){if(!t.isKilled){As(Ts(t.currentTarget),t);var i=Wl(r,e,n),o=i.shape,a=i.handle;a&&r.dispatch(R({type:"pointer",target:"handle",handle:a,shape:o,name:"pointer_down"},zs(t,r.getContainer())))}},onPointerMove:function(o){if(!o.isKilled&&(o.clientX!==t||o.clientY!==i)){t=o.clientX,i=o.clientY;var a=Wl(r,e,n),s=a.shape,u=a.handle;u&&r.dispatch(R({type:"pointer",target:"handle",handle:u,shape:s,name:"pointer_move"},zs(o,r.getContainer())))}},onPointerUp:function(t){if(!t.isKilled){Os(Ts(t.currentTarget),t);var i=Wl(r,e,n),o=i.shape,a=i.handle;a&&r.dispatch(R({type:"pointer",target:"handle",handle:a,shape:o,name:"pointer_up"},zs(t,r.getContainer())))}},onPointerEnter:function(t){if(!t.isKilled){var i=Wl(r,e,n),o=i.shape,a=i.handle;a&&r.dispatch(R({type:"pointer",target:"handle",handle:a,shape:o,name:"pointer_enter"},zs(t,r.getContainer())))}},onPointerLeave:function(t){if(!t.isKilled){var i=Wl(r,e,n),o=i.shape,a=i.handle;a&&r.dispatch(R({type:"pointer",target:"handle",handle:a,shape:o,name:"pointer_leave"},zs(t,r.getContainer())))}}}}),[r,e,n])}(n,r.id),o=Tu().Handle;return o?(0,Qo.jsx)("g",R(R({"aria-label":"handle",transform:"translate(".concat(r.x,", ").concat(r.y,")")},i),{},{children:(0,Qo.jsx)(o,{shapeId:n,handle:r})})):null},sd=ua((function(){var e=da().renderingShapes;return Ss.debugSvg.value?(0,Qo.jsx)(Qo.Fragment,{children:e.map((function(e){return(0,Qo.jsxs)(t.Fragment,{children:[(0,Qo.jsx)($c,R({},e)),(0,Qo.jsx)(vd,{id:e.id})]},e.id+"_fragment")}))}):(0,Qo.jsx)(Qo.Fragment,{children:e.map((function(e){return(0,Qo.jsx)($c,R({},e),e.id+"_shape")}))})})),ud=ua((function(){var e=da();return e.isInAny("select.idle","select.brushing","select.scribble_brushing","select.pointing_shape","select.pointing_selection","select.pointing_handle")&&!e.isChangingStyle?(0,Qo.jsx)(Qo.Fragment,{children:e.selectedIds.map((function(e){return(0,Qo.jsx)(Cu,{className:"tl-user-indicator__selected",id:e},e+"_indicator")}))}):null})),ld=function(){var e=da(),t=la("hovered id and should display",(function(){return e.isInAny("select.idle","select.editing_shape")?e.pageState.hoveredId:null}),[e]);return t?(0,Qo.jsx)(Cu,{className:"tl-user-indicator__hovered",id:t}):null},cd=ua((function(){var e=q(da().hintingIds);return e.length?(0,Qo.jsx)(Qo.Fragment,{children:e.map((function(e){return(0,Qo.jsx)(Cu,{className:"tl-user-indicator__hint",id:e},e+"_hinting")}))}):null}));function dd(){return(0,Qo.jsxs)("g",{id:"cursor",children:[(0,Qo.jsxs)("g",{fill:"rgba(0,0,0,.2)",transform:"translate(-11,-11)",children:[(0,Qo.jsx)("path",{d:"m12 24.4219v-16.015l11.591 11.619h-6.781l-.411.124z"}),(0,Qo.jsx)("path",{d:"m21.0845 25.0962-3.605 1.535-4.682-11.089 3.686-1.553z"})]}),(0,Qo.jsxs)("g",{fill:"white",transform:"translate(-12,-12)",children:[(0,Qo.jsx)("path",{d:"m12 24.4219v-16.015l11.591 11.619h-6.781l-.411.124z"}),(0,Qo.jsx)("path",{d:"m21.0845 25.0962-3.605 1.535-4.682-11.089 3.686-1.553z"})]}),(0,Qo.jsxs)("g",{fill:"currentColor",transform:"translate(-12,-12)",children:[(0,Qo.jsx)("path",{d:"m19.751 24.4155-1.844.774-3.1-7.374 1.841-.775z"}),(0,Qo.jsx)("path",{d:"m13 10.814v11.188l2.969-2.866.428-.139h4.768z"})]})]})}function fd(){return(0,Qo.jsx)("path",{id:"cursor_hint",fill:"currentColor",d:"M -2,-5 2,0 -2,5 Z"})}function hd(){return(0,Qo.jsx)("marker",{id:"arrowhead-dot",className:"tl-arrow-hint",refX:"3.0",refY:"3.0",orient:"0",children:(0,Qo.jsx)("circle",{cx:"3",cy:"3",r:"2",strokeDasharray:"100%"})})}function pd(){return(0,Qo.jsxs)("marker",{id:"arrowhead-cross",className:"tl-arrow-hint",refX:"3.0",refY:"3.0",orient:"auto",children:[(0,Qo.jsx)("line",{x1:"1.5",y1:"1.5",x2:"4.5",y2:"4.5",strokeDasharray:"100%"}),(0,Qo.jsx)("line",{x1:"1.5",y1:"4.5",x2:"4.5",y2:"1.5",strokeDasharray:"100%"})]})}var vd=ua((function(e){var n=e.id,r=da(),i=r.getShapeById(n),o=L(t.useState(""),2),a=o[0],s=o[1],u=(null===i||void 0===i?void 0:i.parentId)===r.currentPageId;return t.useEffect((function(){if(u){var e=null,t=Bt("shape to svg",na(ea().mark((function t(){var i,o,a;return ea().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=Math.random(),e=i,o=r.getPageBoundsById(n),t.next=5,r.getSvg([n],{padding:0});case 5:(a=t.sent)&&o&&e===i&&(a.style.setProperty("overflow","visible"),a.setAttribute("preserveAspectRatio","xMidYMin slice"),a.style.setProperty("transform","translate(".concat(o.x,"px, ").concat(o.y+o.h+12,"px)")),a.style.setProperty("border","1px solid black"),s(null===a||void 0===a?void 0:a.outerHTML));case 7:case"end":return t.stop()}}),t)}))));return function(){e=null,t()}}}),[r,n,u]),u?(0,Qo.jsx)("div",{style:{paddingTop:12,position:"absolute"},children:(0,Qo.jsx)("div",{style:{display:"flex"},dangerouslySetInnerHTML:{__html:a}})}):null})),gd=ua((function(){var e=Ss.logMessages.value;return(0,Qo.jsx)("div",{className:"debug__ui-logger",children:e.map((function(e,t){var n="string"===typeof e?e:JSON.stringify(e);return(0,Qo.jsx)("div",{className:"debug__ui-logger__line",children:n},t)}))})}));function md(){}var yd=function(e){var n=e.error,r=e.editor,i=(0,t.useRef)(null),o=L((0,t.useState)(!1),2),a=o[0],s=o[1],u=L((0,t.useState)(!1),2),l=u[0],c=u[1],d=L((0,t.useState)(!1),2),f=d[0],h=d[1],p=n instanceof Error?n.message:String(n),v=n instanceof Error?n.stack:null,g=la("isDarkMode",(function(){try{if(r)return r.isDarkMode}catch(e){}return null}),[r]),m=L((0,t.useState)(null),2),y=m[0],b=m[1];(0,t.useLayoutEffect)((function(){var e;null!==g&&b(g);for(var t=null===(e=i.current)||void 0===e?void 0:e.parentElement,n=!1;t;){if(t.classList.contains("tl-theme__dark")||t.classList.contains("tl-theme__light")){n=!0;break}t=t.parentElement}b(n?null:window.matchMedia("(prefetl-color-scheme: dark)").matches)}),[g]),(0,t.useEffect)((function(){if(l){var e=setTimeout((function(){c(!1)}),2e3);return function(){return clearTimeout(e)}}}),[l]);var w=function(){var e=na(ea().mark((function e(){return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ha();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=new URL("https://github.com/tldraw/tldraw/issues/new");return x.searchParams.set("title",p),x.searchParams.set("labels","bug"),x.searchParams.set("body","Hey, I ran into an error while using tldraw:\n\n```js\n".concat(null!==v&&void 0!==v?v:p,"\n```\n\nMy browser: ").concat(navigator.userAgent)),(0,Qo.jsxs)("div",{ref:i,className:ra("tl-container tl-error-boundary",null===y?"":y?"tl-theme__dark":"tl-theme__light"),children:[(0,Qo.jsx)("div",{className:"tl-error-boundary__overlay"}),r&&(0,Qo.jsx)(xu,{onError:md,fallback:function(){return null},children:(0,Qo.jsx)(ca.Provider,{value:r,children:(0,Qo.jsx)("div",{className:"tl-overlay tl-error-boundary__canvas",children:(0,Qo.jsx)(Zc,{})})})}),(0,Qo.jsx)("div",{className:ra("tl-modal","tl-error-boundary__content",{"tl-error-boundary__content__expanded":a&&!f}),children:f?(0,Qo.jsxs)(Qo.Fragment,{children:[(0,Qo.jsx)("h2",{children:"Are you sure?"}),(0,Qo.jsx)("p",{children:"Resetting your data will delete your drawing and cannot be undone."}),(0,Qo.jsxs)("div",{className:"tl-error-boundary__content__actions",children:[(0,Qo.jsx)("button",{onClick:function(){return h(!1)},children:"Cancel"}),(0,Qo.jsx)("button",{className:"tl-error-boundary__reset",onClick:w,children:"Reset data"})]})]}):(0,Qo.jsxs)(Qo.Fragment,{children:[(0,Qo.jsx)("h2",{children:"Something's gone wrong."}),(0,Qo.jsxs)("p",{children:["Sorry, we encountered an error. Please refresh the page to continue. If you keep seeing this error, you can ",(0,Qo.jsx)("a",{href:x.toString(),children:"create a GitHub issue"})," or"," ",(0,Qo.jsx)("a",{href:"https://discord.gg/Cq6cPsTfNy",children:"ask for help on Discord"}),"."]}),a&&(0,Qo.jsxs)("div",{className:"tl-error-boundary__content__error",children:[(0,Qo.jsx)("pre",{children:(0,Qo.jsx)("code",{children:null!==v&&void 0!==v?v:p})}),(0,Qo.jsx)("button",{onClick:function(){var e=document.createElement("textarea");e.value=null!==v&&void 0!==v?v:p,document.body.appendChild(e),e.select(),document.execCommand("copy"),e.remove(),c(!0)},children:l?"Copied!":"Copy"})]}),(0,Qo.jsxs)("div",{className:"tl-error-boundary__content__actions",children:[(0,Qo.jsx)("button",{onClick:function(){return s(!a)},children:a?"Hide details":"Show details"}),(0,Qo.jsxs)("div",{className:"tl-error-boundary__content__actions__group",children:[(0,Qo.jsx)("button",{className:"tl-error-boundary__reset",onClick:function(){return h(!0)},children:"Reset data"}),(0,Qo.jsx)("button",{className:"tl-error-boundary__refresh",onClick:function(){fa.refreshPage()},children:"Refresh Page"})]})]})]})})]})};function bd(){return Ut()}var wd,xd=new RegExp(/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:[/?#]\S*)?$/i);function kd(e){return xd.test(e)}var Sd=["animationSpeed"],_d=["isSnapMode"],Ed="TLDRAW_USER_DATA_v3",Cd=$e({id:De,name:De,locale:De,color:De,isDarkMode:Ve,animationSpeed:Ne,isSnapMode:Ve}),Pd=2,Id=en({currentVersion:Pd,migrators:(wd={},O(wd,1,{up:function(e){return R(R({},e),{},{animationSpeed:1})},down:function(e){e.animationSpeed;return Jt(e,Sd)}}),O(wd,Pd,{up:function(e){return R(R({},e),{},{isSnapMode:!1})},down:function(e){e.isSnapMode;return Jt(e,_d)}}),wd)}),Td=["#FF802B","#EC5E41","#F2555A","#F04F88","#E34BA9","#BD54C6","#9D5BD2","#7B66DC","#02B1CC","#11B3A3","#39B178","#55B467"];function Md(){return{id:bd(),locale:"undefined"!==typeof window?qo():"en",name:"New User",color:Td[Math.floor(Math.random()*Td.length)],isDarkMode:!1,animationSpeed:1,isSnapMode:!1}}function Ad(e){var t;if(null===e||"object"!==typeof e)return Md();if(!("version"in e)||!("user"in e)||"number"!==typeof e.version)return Md();var n=rn({value:e.user,fromVersion:e.version,toVersion:null!==(t=Id.currentVersion)&&void 0!==t?t:0,migrations:Id});if("error"===n.type)return Md();try{Cd.validate(n.value)}catch(kM){return Md()}return n.value}var Od=Mt("globalUserData",function(){var e,t;return Ad("undefined"===typeof window?null:null!==(e=JSON.parse((null===(t=window)||void 0===t||null===(t=t.localStorage)||void 0===t?void 0:t.getItem(Ed))||"null"))&&void 0!==e?e:null)}());function jd(e){Cd.validate(e),Od.set(e),"undefined"!==typeof window&&window.localStorage&&window.localStorage.setItem(Ed,JSON.stringify({version:Id.currentVersion,user:Od.value})),null===Ld||void 0===Ld||Ld.postMessage({type:Nd,origin:Dd,data:{user:Od.value,version:Id.currentVersion}})}var Rd="undefined"!==typeof process&&!1,Ld="undefined"===typeof BroadcastChannel||Rd?null:new BroadcastChannel("tldraw-user-sync");null===Ld||void 0===Ld||Ld.addEventListener("message",(function(e){var t=e.data;(null===t||void 0===t?void 0:t.type)===Nd&&(null===t||void 0===t?void 0:t.origin)!==Dd&&Od.set(Ad(t.data))}));var Dd=bd(),Nd="tldraw-user-preferences-change";function zd(){return Od.value}function Bd(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{derivePresenceState:null!==(e=r.derivePresenceState)&&void 0!==e?e:function(){return Nt("presence",(function(){return null}))},userPreferences:null!==(t=r.userPreferences)&&void 0!==t?t:Nt("userPreferences",(function(){return zd()})),setUserPreferences:null!==(n=r.setUserPreferences)&&void 0!==n?n:jd}}var Fd=n(7143);function Ud(e,t){return ee(e===t.util.type,'Shape type "'.concat(e,'" does not match util type "').concat(t.util.type,'"')),R({type:e},t)}var Kd={wheel:"onWheel",pointer_enter:"onPointerEnter",pointer_leave:"onPointerLeave",pointer_down:"onPointerDown",pointer_move:"onPointerMove",pointer_up:"onPointerUp",right_click:"onRightClick",middle_click:"onMiddleClick",key_down:"onKeyDown",key_up:"onKeyUp",key_repeat:"onKeyRepeat",cancel:"onCancel",complete:"onComplete",interrupt:"onInterrupt",double_click:"onDoubleClick",triple_click:"onTripleClick",quadruple_click:"onQuadrupleClick"},Vd=function(){function e(t,n){var r=this;z(this,e),O(this,"path",void 0),O(this,"id",void 0),O(this,"current",void 0),O(this,"type",void 0),O(this,"shapeType",void 0),O(this,"initial",void 0),O(this,"children",void 0),O(this,"parent",void 0),O(this,"isActive",!1),O(this,"onWheel",void 0),O(this,"onPointerEnter",void 0),O(this,"onPointerLeave",void 0),O(this,"onPointerDown",void 0),O(this,"onPointerMove",void 0),O(this,"onPointerUp",void 0),O(this,"onDoubleClick",void 0),O(this,"onTripleClick",void 0),O(this,"onQuadrupleClick",void 0),O(this,"onRightClick",void 0),O(this,"onMiddleClick",void 0),O(this,"onKeyDown",void 0),O(this,"onKeyUp",void 0),O(this,"onKeyRepeat",void 0),O(this,"onCancel",void 0),O(this,"onComplete",void 0),O(this,"onInterrupt",void 0),O(this,"onEnter",void 0),O(this,"onExit",void 0),this.editor=t;var i=this.constructor,o=i.id,a=i.children,s=i.initial;this.id=o,this.current=Mt("toolState"+this.id,void 0),this.path=Nt("toolPath"+this.id,(function(){var e=r.current.value;return r.id+(e?".".concat(e.path.value):"")})),this.parent=null!==n&&void 0!==n?n:{},this.parent?a&&s?(this.type="branch",this.initial=s,this.children=Object.fromEntries(a().map((function(e){return[e.id,new e(r.editor,r)]}))),this.current.set(this.children[this.initial])):this.type="leaf":(this.type="root",a&&s&&(this.initial=s,this.children=Object.fromEntries(a().map((function(e){return[e.id,new e(r.editor,r)]}))),this.current.set(this.children[this.initial])))}return N(e,[{key:"transition",value:function(e,t){for(var n=e.split("."),r=this,i=0;i<n.length;i++){var o,a=n[i],s=r.current.value,u=null===(o=r.children)||void 0===o?void 0:o[a];if(!u)throw Error("".concat(r.id," - no child state exists with the id ").concat(a,"."));if((null===s||void 0===s?void 0:s.id)!==u.id&&(null===s||void 0===s||s.exit(t,a),r.current.set(u),u.enter(t,(null===s||void 0===s?void 0:s.id)||"initial"),!u.isActive))break;r=u}return this}},{key:"handleEvent",value:function(e){var t,n=Kd[e.name],r=this.current.value;null===(t=this[n])||void 0===t||t.call(this,e),this.current.value===r&&this.isActive&&(null===r||void 0===r||r.handleEvent(e))}},{key:"enter",value:function(e,t){var n;if(this.isActive=!0,null===(n=this.onEnter)||void 0===n||n.call(this,e,t),this.children&&this.initial&&this.isActive){var r=this.children[this.initial];this.current.set(r),r.enter(e,t)}}},{key:"exit",value:function(e,t){var n,r;(this.isActive=!1,null===(n=this.onExit)||void 0===n||n.call(this,e,t),this.isActive)||(null===(r=this.current.value)||void 0===r||r.exit(e,t))}}]),e}();O(Vd,"id",void 0),O(Vd,"initial",void 0),O(Vd,"children",void 0);var Wd=["children","className"];function Hd(e){var t=e.children,n=e.className,r=void 0===n?"":n,i=Jt(e,Wd);return(0,Qo.jsx)("svg",R(R({},i),{},{className:"tl-svg-container ".concat(r),children:t}))}function Yd(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.closed,i=void 0!==r&&r,o=n.snap,a=void 0===o?1:o,s=n.start,u=void 0===s?"outset":s,l=n.end,c=void 0===l?"outset":l,d=n.lengthRatio,f=void 0===d?2:d,h=n.style,p=void 0===h?"dashed":h,v=0,g=0,m=1,y=0,b=0;switch(p){case"dashed":m=1,v=Math.min(t*f,e/4);break;case"dotted":v=t/(m=100);break;default:return{strokeDasharray:"none",strokeDashoffset:"none"}}return i||("outset"===u?(e+=v/2,b+=v/2):"skip"===u&&(e-=v,b-=v),"outset"===c?e+=v/2:"skip"===c&&(e-=v)),g=Math.floor(e/v/(2*m)),(g-=g%a)<3&&"dashed"===p?e/t<5?(v=e,g=1,y=0):(v=.333*e,y=.333*e):(v=e/(g=Math.max(g,3))/(2*m),i?(b=v/2,y=(e-g*v)/g):y=(e-g*v)/Math.max(1,g-1)),{strokeDasharray:[v,y].join(" "),strokeDashoffset:b.toString()}}var Xd=t.memo((function(e){var t=e.d,n=e.color,r=e.fill;switch(r){case"none":return(0,Qo.jsx)("path",{className:"tl-hitarea-stroke",fill:"none",d:t});case"solid":return(0,Qo.jsx)("path",{className:"tl-hitarea-fill-solid",fill:"var(--palette-".concat(n,"-semi)"),d:t});case"semi":return(0,Qo.jsx)("path",{className:"tl-hitarea-fill-solid",fill:"var(--palette-solid)",d:t});case"pattern":return(0,Qo.jsx)(qd,{color:n,fill:r,d:t})}})),qd=function(e){var t=e.d,n=e.color,r=da(),i=la("zoomLevel",(function(){return r.zoomLevel}),[r]),o=la("isDarkMode",(function(){return r.isDarkMode}),[r]),a=Math.ceil(i),s=r.zoomLevel<=.18;return(0,Qo.jsxs)(Qo.Fragment,{children:[(0,Qo.jsx)("path",{className:"tl-hitarea-fill-solid",fill:"var(--palette-".concat(n,"-pattern)"),d:t}),(0,Qo.jsx)("path",{fill:s?"var(--palette-".concat(n,"-semi)"):"url(#".concat(ru[a+(o?"_dark":"_light")],")"),d:t})]})};function $d(e){var t=e.d,n=e.color,r=e.fill,i=e.colors;if("none"!==r){if("pattern"===r){var o=document.createElementNS("http://www.w3.org/2000/svg","g"),a=document.createElementNS("http://www.w3.org/2000/svg","path");a.setAttribute("d",t),a.setAttribute("fill",i.pattern[n]);var s=document.createElementNS("http://www.w3.org/2000/svg","path");return s.setAttribute("d",t),s.setAttribute("fill","url(#hash_pattern)"),o.appendChild(a),o.appendChild(s),o}var u=document.createElementNS("http://www.w3.org/2000/svg","path");switch(u.setAttribute("d",t),r){case"semi":u.setAttribute("fill",i.solid);break;case"solid":u.setAttribute("fill",i.semi[n])}return u}}function Gd(e,t){if(t){var n=document.createElementNS("http://www.w3.org/2000/svg","g");return n.appendChild(t),n.appendChild(e),n}return e}function Qd(e,t,n){var r,i="end"===t?e.end.point:e.start.point,o="end"===t?e.start.point:e.end.point,a=e.isStraight?va.Dist(o,i):Math.abs(e.bodyArc.length),s=Math.max(Math.min(a/5,3*n),n);if(e.isStraight)r=va.Nudge(i,o,s);else{var u=function(e,t,n,r){var i=n.x-e.x,o=n.y-e.y,a=Math.sqrt(i*i+o*o),s=(a*a-r*r+t*t)/(2*a),u=Math.sqrt(t*t-s*s);return i/=a,o/=a,[new va(e.x+i*s-o*u,e.y+o*s+i*u),new va(e.x+i*s+o*u,e.y+o*s-i*u)]}(i,s,e.handleArc.center,e.handleArc.radius);r="end"===t?e.handleArc.sweepFlag?u[0]:u[1]:e.handleArc.sweepFlag?u[1]:u[0]}return{point:i,int:r}}function Jd(e,t,n){var r="end"===t?e.end.arrowhead:e.start.arrowhead;if("none"!==r){var i=Qd(e,t,n);if(i){switch(r){case"bar":return function(e){var t=e.int,n=e.point,r=va.Sub(t,n).div(2),i=va.Add(n,va.Rot(r,ya)),o=va.Sub(n,va.Rot(r,ya));return"M ".concat(i.x," ").concat(i.y," L ").concat(o.x," ").concat(o.y)}(i);case"square":return function(e){var t=e.int,n=e.point,r=va.Lrp(n,t,.85),i=va.Sub(r,n).div(2),o=va.Add(n,va.Rot(i,ya)),a=va.Sub(n,va.Rot(i,ya)),s=va.Add(r,va.Rot(i,ya)),u=va.Sub(r,va.Rot(i,ya));return"M ".concat(o.x," ").concat(o.y," L ").concat(s.x," ").concat(s.y," L ").concat(u.x," ").concat(u.y," L ").concat(a.x," ").concat(a.y," Z")}(i);case"diamond":return function(e){var t=e.point,n=e.int,r=va.Lrp(t,n,.75),i=va.RotWith(r,t,ma/4),o=va.RotWith(r,t,-ma/4),a=va.Lrp(i,o,.5);return a.add(va.Sub(a,t)),"M ".concat(a.x," ").concat(a.y," L ").concat(i.x," ").concat(i.y," ").concat(t.x," ").concat(t.y," L ").concat(o.x," ").concat(o.y," Z")}(i);case"dot":return function(e){var t=e.point,n=e.int,r=va.Lrp(t,n,.45),i=va.Dist(r,t);return"M ".concat(r.x-i,",").concat(r.y,"\n  a ").concat(i,",").concat(i," 0 1,0 ").concat(2*i,",0\n  a ").concat(i,",").concat(i," 0 1,0 -").concat(2*i,",0 ")}(i);case"inverted":return function(e){var t=e.point,n=e.int,r=va.Sub(n,t).div(2),i=va.Add(t,va.Rot(r,ya)),o=va.Sub(t,va.Rot(r,ya));return"M ".concat(i.x," ").concat(i.y," L ").concat(n.x," ").concat(n.y," L ").concat(o.x," ").concat(o.y," Z")}(i);case"arrow":return function(e){var t=e.point,n=e.int,r=va.RotWith(n,t,ma/6),i=va.RotWith(n,t,-ma/6);return"M ".concat(r.x," ").concat(r.y," L ").concat(t.x," ").concat(t.y," L ").concat(i.x," ").concat(i.y)}(i);case"triangle":return function(e){var t=e.point,n=e.int,r=va.RotWith(n,t,ma/6),i=va.RotWith(n,t,-ma/6);return"M ".concat(r.x," ").concat(r.y," L ").concat(t.x," ").concat(t.y," L ").concat(i.x," ").concat(i.y," Z")}(i)}return""}}}function Zd(e){return Math.abs(e.props.bend)<8}function ef(e,t){if("point"!==t.type){var n=e.getShapeById(t.boundShapeId);return{shape:n,util:e.getShapeUtil(n),transform:e.getPageTransform(n),isExact:t.isExact,didIntersect:!1}}}function tf(e,t,n){if("point"===n.type)return va.From(n);var r=e.getShapeById(n.boundShapeId);if(r){var i=e.getBounds(r),o=i.point,a=i.size,s=va.Add(o,va.MulV(n.normalizedAnchor,a)),u=Ja.applyToPoint(e.getPageTransform(r),s);return Ja.applyToPoint(Ja.Inverse(t),u)}return new va(0,0)}function nf(e,t){var n=e.getPageTransform(t);return{start:tf(e,n,t.props.start),end:tf(e,n,t.props.end)}}var rf=48,of=10;function af(e,t){var n=t.props,r=n.start,i=n.end,o=n.arrowheadStart,a=n.arrowheadEnd,s=nf(e,t),u=s.start.clone(),l=s.end.clone(),c=va.Med(u,l),d=va.Sub(l,u).uni(),f=ef(e,r),h=ef(e,i),p=e.getPageTransform(t);sf(l,s.start,p,h),sf(u,s.end,p,f);var v=rf,g=f&&h&&f.shape===h.shape;!f||!h||g||f.isExact||h.isExact||(h.didIntersect&&!f.didIntersect?f.util.isClosed(f.shape)&&u.setTo(va.Nudge(l,u,v)):h.didIntersect||h.util.isClosed(h.shape)&&l.setTo(va.Nudge(u,l,v)));var m=va.Sub(l,u).uni(),y=!va.Equals(m,d);if(!g){if(f&&"none"!==o&&!f.isExact){var b=of+kc[t.props.size]/2+("size"in f.shape.props?kc[f.shape.props.size]/2:0);v-=b,u.nudge(l,b*(y?-1:1))}if(h&&"none"!==a&&!h.isExact){var w=of+kc[t.props.size]/2+("size"in h.shape.props?kc[h.shape.props.size]/2:0);v-=w,l.nudge(u,w*(y?-1:1))}}f&&h&&(y?l.setTo(va.Add(u,m.mul(-v))):va.Dist(u,l)<rf/2&&l.setTo(va.Add(u,m.mul(rf/2)))),y?c.setTo(va.Med(s.start,s.end)):c.setTo(va.Med(u,l));var x=va.Dist(u,l);return{isStraight:!0,start:{handle:s.start,point:u,arrowhead:t.props.arrowheadStart},end:{handle:s.end,point:l,arrowhead:t.props.arrowheadEnd},middle:c,isValid:x>0,length:x}}function sf(e,t,n,r){if(void 0!==r&&!r.isExact){var i,o,a=Ja.applyToPoint(n,t),s=Ja.applyToPoint(n,e),u=Ja.applyToPoint(Ja.Inverse(r.transform),a),l=Ja.applyToPoint(Ja.Inverse(r.transform),s),c=r.util.isClosed(r.shape),d=(c?ds:cs)(u,l,r.util.outline(r.shape));if(null!==d)i=null!==(o=d.sort((function(e,t){return va.Dist(e,u)-va.Dist(t,u)}))[0])&&void 0!==o?o:c?void 0:l;if(void 0!==i){var f=Ja.applyToPoint(r.transform,i),h=Ja.applyToPoint(Ja.Inverse(n),f);e.setTo(h),r.didIntersect=!0}}}function uf(e){return cf(e.start.handle,e.end.handle)}function lf(e){return cf(e.start.point,e.end.point)}function cf(e,t){return"M".concat(e.x,",").concat(e.y,"L").concat(t.x,",").concat(t.y)}function df(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=t.props,i=r.arrowheadEnd,o=r.arrowheadStart,a=t.props.bend+n;if(Math.abs(a)>Math.abs(10*t.props.bend))return af(e,t);var s=nf(e,t),u=va.Med(s.start,s.end),l=va.Sub(s.end,s.start).uni(),c=va.Add(u,l.per().mul(-a)),d=ef(e,t.props.start),f=ef(e,t.props.end),h=s.start.clone(),p=s.end.clone(),v=c.clone(),g=pf(h,p,v);if(0===g.length||0===g.size||!Va(g.length)||!Va(g.size))return af(e,t);var m=e.getPageTransform(t);if(d&&!d.isExact){var y,b=Ja.applyToPoint(m,h),w=Ja.applyToPoint(m,p),x=Ja.applyToPoint(m,g.center),k=Ja.Inverse(d.transform),S=Ja.applyToPoint(k,b),_=Ja.applyToPoint(k,w),E=Ja.applyToPoint(k,x),C=d.util.isClosed(d.shape),P=(C?fs:hs)(E,g.radius,d.util.outline(d.shape));if(P){var I;P=P.filter((function(e){return+va.Clockwise(S,e,_)===g.sweepFlag}));var T=Ia(va.Angle(g.center,c),va.Angle(g.center,s.start),.5);P.sort((function(e,t){return Math.abs(Pa(T,E.angle(e)))-Math.abs(Pa(T,E.angle(t)))})),y=null!==(I=P[0])&&void 0!==I?I:C?void 0:S}else y=C?void 0:S;if(y&&(h.setTo(e.getPointInShapeSpace(t,Ja.applyToPoint(d.transform,y))),d.didIntersect=!0,"none"!==o)){var M=of+kc[t.props.size]/2+("size"in d.shape.props?kc[d.shape.props.size]/2:0);h.setTo(Ra(g.center.x,g.center.y,g.radius,Ia(va.Angle(g.center,h),va.Angle(g.center,c),M/Math.abs(ja(g.center,g.radius,h,c)))))}}if(f&&!f.isExact){var A,O,j=Ja.applyToPoint(m,h),R=Ja.applyToPoint(m,p),L=Ja.applyToPoint(m,g.center),D=Ja.Inverse(f.transform),N=Ja.applyToPoint(D,j),z=Ja.applyToPoint(D,R),B=Ja.applyToPoint(D,L),F=f.util.isClosed(f.shape),U=F?fs:hs,K=Ia(va.Angle(g.center,c),va.Angle(g.center,s.end),.5),V=U(B,g.radius,f.util.outline(f.shape));if(V)(V=V.filter((function(e){return+va.Clockwise(N,e,z)===g.sweepFlag}))).sort((function(e,t){return Math.abs(Pa(K,B.angle(e)))-Math.abs(Pa(K,B.angle(t)))})),A=null!==(O=V[0])&&void 0!==O?O:F?void 0:z;else A=F?void 0:z;if(A&&(p.setTo(e.getPointInShapeSpace(t,Ja.applyToPoint(f.transform,A))),f.didIntersect=!0,"none"!==i)){var W=of+kc[t.props.size]/2+("size"in f.shape.props?kc[f.shape.props.size]/2:0);va.Dist(h,p)<rf&&(W*=-2),p.setTo(Ra(g.center.x,g.center.y,g.radius,Ia(va.Angle(g.center,p),va.Angle(g.center,c),W/Math.abs(ja(g.center,g.radius,p,c)))))}}if(Math.abs(ja(g.center,g.radius,h,p))<rf/2&&(h.setTo(s.start),p.setTo(s.end)),d&&f&&d.shape!==f.shape&&!d.isExact&&!f.isExact){var H=va.Angle(g.center,h),Y=va.Angle(g.center,p),X=g.sweepFlag?rf:-rf,q=ja(g.center,g.radius,p,h),$=g.center,G=$.x,Q=$.y,J=g.radius;d&&!d.didIntersect&&h.setTo(Ra(G,Q,J,Ia(H,Y,X/q))),f&&!f.didIntersect&&p.setTo(Ra(G,Q,J,Ia(H,Y,-X/q)))}var Z=Ia(va.Angle(g.center,h),va.Angle(g.center,p),.5),ee=Ra(g.center.x,g.center.y,g.radius,Z);+va.Clockwise(h,ee,p)!==g.sweepFlag&&(Z+=ma,ee=Ra(g.center.x,g.center.y,g.radius,Z)),v.setTo(ee);var te=pf(h,p,v);return{isStraight:!1,start:{point:h,handle:s.start,arrowhead:t.props.arrowheadStart},end:{point:p,handle:s.end,arrowhead:t.props.arrowheadEnd},middle:v,handleArc:g,bodyArc:te,isValid:0!==te.length&&isFinite(te.center.x)&&isFinite(te.center.y)}}function ff(e){var t=e.start,n=e.end,r=e.handleArc,i=r.radius,o=r.largeArcFlag,a=r.sweepFlag;return"M".concat(t.handle.x,",").concat(t.handle.y," A").concat(i," ").concat(i," 0 ").concat(o," ").concat(a," ").concat(n.handle.x,",").concat(n.handle.y)}function hf(e){var t=e.start,n=e.end,r=e.bodyArc,i=r.radius,o=r.largeArcFlag,a=r.sweepFlag;return"M".concat(t.point.x,",").concat(t.point.y," A").concat(i," ").concat(i," 0 ").concat(o," ").concat(a," ").concat(n.point.x,",").concat(n.point.y)}function pf(e,t,n){var r=-2*(e.x*(t.y-n.y)-e.y*(t.x-n.x)+t.x*n.y-n.x*t.y),i={x:((e.x*e.x+e.y*e.y)*(n.y-t.y)+(t.x*t.x+t.y*t.y)*(e.y-n.y)+(n.x*n.x+n.y*n.y)*(t.y-e.y))/r,y:((e.x*e.x+e.y*e.y)*(t.x-n.x)+(t.x*t.x+t.y*t.y)*(n.x-e.x)+(n.x*n.x+n.y*n.y)*(e.x-t.x))/r},o=va.Dist(i,e),a=+va.Clockwise(e,n,t),s=Math.hypot(e.y-t.y,e.x-t.x),u=Math.hypot(t.y-n.y,t.x-n.x),l=Math.hypot(n.y-e.y,n.x-e.x),c=2*Math.acos((u*u+l*l-s*s)/(2*u*l)),d=(ba-c)*(a?1:-1);return{center:i,radius:o,size:d,length:d*o,largeArcFlag:+(ma>c),sweepFlag:a}}var vf=t.memo((function(e){var t=e.id,n=e.text,r=e.size,i=e.font,o=e.position,a=e.width,s=e.labelColor,u=Mc(t,"arrow",n),l=u.rInput,c=u.isEditing,d=u.handleFocus,f=u.handleBlur,h=u.handleKeyDown,p=u.handleChange,v=u.isEmpty;return!c&&v?null:(0,Qo.jsx)("div",{className:"tl-arrow-label","data-font":i,"data-align":"center","data-hastext":!v,"data-isediting":c,style:{textAlign:"center",fontSize:Ec[r],lineHeight:Ec[r]*xc.lineHeight+"px",transform:"translate(".concat(o.x,"px, ").concat(o.y,"px)"),color:s},children:(0,Qo.jsxs)("div",{className:"tl-arrow-label__inner",children:[(0,Qo.jsx)("p",{style:{width:a||"9px"},children:n?Ic.normalizeTextForDom(n):" "}),c&&(0,Qo.jsx)("textarea",{ref:l,className:"tl-text tl-text-input",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:!0,placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:n,onFocus:d,onChange:p,onKeyDown:h,onBlur:f,onContextMenu:Ns})]})})})),gf=Object.defineProperty,mf=Object.getOwnPropertyDescriptor,yf=function(e,t,n,r){for(var i,o=r>1?void 0:r?mf(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&gf(t,n,o),o},bf=0,wf=function(e){U(r,e);var n=W(r);function r(){var e;z(this,r);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return O(B(e=n.call.apply(n,[this].concat(i))),"canEdit",(function(){return!0})),O(B(e),"canBind",(function(){return!1})),O(B(e),"isClosed",(function(){return!1})),O(B(e),"canSnap",(function(){return!0})),O(B(e),"hideResizeHandles",(function(){return!0})),O(B(e),"hideRotateHandle",(function(){return!0})),O(B(e),"hideSelectionBoundsFg",(function(){return!0})),O(B(e),"hideSelectionBoundsBg",(function(){return!0})),O(B(e),"onHandleChange",(function(t,n){var r=n.handle,i=n.isPrecise,o=ce(t);switch(r.id){case"start":case"end":var a=e.editor.getPageTransformById(o.id),s=Ja.applyToPoint(a,r);if(e.editor.inputs.ctrlKey)o.props[r.id]={type:"point",x:r.x,y:r.y};else{var u=G(e.editor.sortedShapesArray.filter((function(n){if(n.id!==t.id){var r=e.editor.getShapeUtil(n);if(r.canBind(n)){var i=e.editor.getPageMaskById(n.id);if(!i||Ba(s,i)){var o=e.editor.getPointInShapeSpace(n,s);return r.isClosed(n)?Ba(o,r.outline(n)):r.hitTestPoint(n,o)}}}})));if(u){var l=e.editor.getBounds(u),c=e.editor.getPointInShapeSpace(u,s),d=o.props[r.id],f="binding"===t.props.start.type&&t.props.start.boundShapeId,h="binding"===t.props.end.type&&t.props.end.boundShapeId,p=i||(f||h)&&f===h||!e.editor.getShapeUtil(u).isClosed(o);("point"===d.type||"binding"===d.type&&u.id!==d.boundShapeId)&&(p=e.editor.inputs.pointerVelocity.len()<.5),p&&(p=va.Dist(c,l.center)>Math.max(4,Math.min(.15*Math.min(l.width,l.height),16))/e.editor.zoomLevel),o.props[r.id]={type:"binding",boundShapeId:u.id,normalizedAnchor:p?{x:(c.x-l.minX)/l.width,y:(c.y-l.minY)/l.height}:{x:.5,y:.5},isExact:e.editor.inputs.altKey}}else o.props[r.id]={type:"point",x:r.x,y:r.y}}break;case"middle":var v=nf(e.editor,o),g=v.start,m=v.end,y=va.Sub(m,g),b=va.Per(y),w=va.Med(m,g),x=va.Sub(w,b),k=va.Add(w,b),S=va.NearestPointOnLineSegment(x,k,r,!1),_=va.Dist(S,w);va.Clockwise(S,m,w)&&(_*=-1),o.props.bend=_}return o})),O(B(e),"onTranslateStart",(function(t){var n="binding"===t.props.start.type?t.props.start.boundShapeId:null,r="binding"===t.props.end.type?t.props.end.boundShapeId:null;if(!(n&&e.editor.isWithinSelection(n)||r&&e.editor.isWithinSelection(r))){n=null,r=null;var i=nf(e.editor,t),o=i.start,a=i.end;return{id:t.id,type:t.type,props:R(R({},t.props),{},{start:{type:"point",x:o.x,y:o.y},end:{type:"point",x:a.x,y:a.y}})}}})),O(B(e),"onResize",(function(t,n){var r=n.scaleX,i=n.scaleY,o=nf(e.editor,t),a=ce(t.props),s=a.start,u=a.end,l=t.props.bend;"point"===s.type&&(s.x=o.start.x*r,s.y=o.start.y*i),"point"===u.type&&(u.x=o.end.x*r,u.y=o.end.y*i);var c=Math.abs(r),d=Math.abs(i);return r<0&&i>=0?(0!==l&&(l*=-1,l*=Math.max(c,d)),"binding"===s.type&&(s.normalizedAnchor.x=1-s.normalizedAnchor.x),"binding"===u.type&&(u.normalizedAnchor.x=1-u.normalizedAnchor.x)):r>=0&&i<0?(0!==l&&(l*=-1,l*=Math.max(c,d)),"binding"===s.type&&(s.normalizedAnchor.y=1-s.normalizedAnchor.y),"binding"===u.type&&(u.normalizedAnchor.y=1-u.normalizedAnchor.y)):r>=0&&i>=0?0!==l&&(l*=Math.max(c,d)):r<0&&i<0&&(0!==l&&(l*=Math.max(c,d)),"binding"===s.type&&(s.normalizedAnchor.x=1-s.normalizedAnchor.x,s.normalizedAnchor.y=1-s.normalizedAnchor.y),"binding"===u.type&&(u.normalizedAnchor.x=1-u.normalizedAnchor.x,u.normalizedAnchor.y=1-u.normalizedAnchor.y)),{props:{start:s,end:u,bend:l}}})),O(B(e),"onDoubleClickHandle",(function(e,t){switch(t.id){case"start":return{id:e.id,type:e.type,props:R(R({},e.props),{},{arrowheadStart:"none"===e.props.arrowheadStart?"arrow":"none"})};case"end":return{id:e.id,type:e.type,props:R(R({},e.props),{},{arrowheadEnd:"none"===e.props.arrowheadEnd?"arrow":"none"})}}})),O(B(e),"getEditingBounds",(function(t){var n;return null!==(n=e.getLabelBounds(t))&&void 0!==n?n:new Wa})),O(B(e),"onEditEnd",(function(t){var n=t.id,r=t.type,i=t.props.text;i.trimEnd()!==t.props.text&&e.editor.updateShapes([{id:n,type:r,props:{text:i.trimEnd()}}])})),e}return N(r,[{key:"defaultProps",value:function(){return{dash:"draw",size:"m",fill:"none",color:"black",labelColor:"black",bend:0,start:{type:"point",x:0,y:0},end:{type:"point",x:0,y:0},arrowheadStart:"none",arrowheadEnd:"arrow",text:"",font:"draw"}}},{key:"getCenter",value:function(e){return this.bounds(e).center}},{key:"getBounds",value:function(e){return Wa.FromPoints(this.getOutlineWithoutLabel(e))}},{key:"getOutlineWithoutLabel",value:function(e){var t=this.getArrowInfo(e);if(!t)return[];if(t.isStraight)return t.isValid?[va.From(t.start.point),va.From(t.end.point)]:[new va(0,0),new va(1,1)];if(!t.isValid)return[new va(0,0),new va(1,1)];var n=Math.max(5,Math.ceil(Math.abs(t.bodyArc.length)/16));if(n<=0&&!isFinite(n))return[new va(0,0),new va(1,1)];for(var r=Array(n),i=va.Angle(t.bodyArc.center,t.start.point),o=va.Angle(t.bodyArc.center,t.end.point),a=t.bodyArc.sweepFlag?o:i,s=t.bodyArc.sweepFlag?i:o,u=t.bodyArc.largeArcFlag?-(ba-Pa(a,s)):Pa(a,s),l=Math.max(1,t.bodyArc.radius),c=0;c<n;c++){var d=a+u*(c/(n-1)),f=Ra(t.bodyArc.center.x,t.bodyArc.center.y,l,d);r[c]=f}return r}},{key:"getOutline",value:function(e){var t=this.getOutlineWithoutLabel(e),n=this.getLabelBounds(e);if(!n)return t;for(var r=n.sides,i=[0,1,2,3],o=t[0],a=!1,s=[o],u=function(){var e=t[l];if(!a){var n=Q(i.filter((function(t){return vs(r[t][0],r[t][1],o,e)})),(function(e){return va.DistanceToLineSegment(r[e][0],r[e][1],o)}));if(void 0!==n){var u=va.NearestPointOnLineSegment(r[n][0],r[n][1],o);s.push(u);for(var c=0;c<4;c++){var d=(n+c)%4;s.push(r[d][1])}s.push(u),a=!0}}s.push(e),o=e},l=1;l<t.length;l++)u();return s}},{key:"snapPoints",value:function(e){return ft}},{key:"infoCache",get:function(){var e=this;return this.editor.store.createComputedCache("arrow infoCache",(function(t){return Zd(t)?af(e.editor,t):df(e.editor,t)}))}},{key:"getArrowInfo",value:function(e){return this.infoCache.get(e.id)}},{key:"getHandles",value:function(e){var t=this.infoCache.get(e.id);return[{id:"start",type:"vertex",index:"a0",x:t.start.handle.x,y:t.start.handle.y,canBind:!0},{id:"middle",type:"vertex",index:"a2",x:t.middle.x,y:t.middle.y,canBind:!1},{id:"end",type:"vertex",index:"a3",x:t.end.handle.x,y:t.end.handle.y,canBind:!0}]}},{key:"hitTestPoint",value:function(e,t){for(var n=this.outline(e),r=this.editor.zoomLevel,i=kc[e.props.size]/r,o=0;o<n.length-1;o++){var a=n[o],s=n[o+1];if(va.DistanceToLineSegment(a,s,t)<i)return!0}return!1}},{key:"hitTestLineSegment",value:function(e,t,n){for(var r=this.outline(e),i=0;i<r.length-1;i++){if(vs(t,n,r[i],r[i+1]))return!0}return!1}},{key:"component",value:function(e){var n,r=this,i=this.editor.onlySelectedShape,o=this.editor.isInAny("select.idle","select.pointing_handle","select.dragging_handle","arrow.dragging")&&!this.editor.isReadOnly,a=this.getArrowInfo(e),s=this.bounds(e),u=this.getLabelBounds(e),l=t.useMemo((function(){return r.editor.isSafari?bf+=1:0}),[e]);if(null===a||void 0===a||!a.isValid)return null;var c=kc[e.props.size],d=a.start.arrowhead&&Jd(a,"start",c),f=a.end.arrowhead&&Jd(a,"end",c),h=a.isStraight?lf(a):hf(a),p=null;if(i===e&&o){var v=Yd(a.isStraight?va.Dist(a.start.handle,a.end.handle):Math.abs(a.handleArc.length),2,{end:"skip",start:"skip",lengthRatio:2.5}),g=v.strokeDasharray,m=v.strokeDashoffset;p="binding"===e.props.start.type||"binding"===e.props.end.type?(0,Qo.jsx)("path",{className:"tl-arrow-hint",d:a.isStraight?uf(a):ff(a),strokeDasharray:g,strokeDashoffset:m,strokeWidth:2,markerStart:"binding"===e.props.start.type?e.props.start.isExact?"":Sf(e.props.start.normalizedAnchor)?"url(#arrowhead-cross)":"url(#arrowhead-dot)":"",markerEnd:"binding"===e.props.end.type?e.props.end.isExact?"":Sf(e.props.end.normalizedAnchor)?"url(#arrowhead-cross)":"url(#arrowhead-dot)":"",opacity:.16}):null}var y=Yd(a.isStraight?a.length:Math.abs(a.bodyArc.length),c,{style:e.props.dash}),b=y.strokeDasharray,w=y.strokeDashoffset,x=!("none"===a.start.arrowhead||"arrow"===a.start.arrowhead),k=!("none"===a.end.arrowhead||"arrow"===a.end.arrowhead),S=x||k||u,_=(e.id+"_clip_"+l).replace(":","_");return(0,Qo.jsxs)(Qo.Fragment,{children:[(0,Qo.jsxs)(Hd,{id:e.id,style:{minWidth:50,minHeight:50},children:[S&&(0,Qo.jsx)("defs",{children:(0,Qo.jsxs)("mask",{id:_,children:[(0,Qo.jsx)("rect",{x:Fa(-100+s.minX),y:Fa(-100+s.minY),width:Fa(s.width+200),height:Fa(s.height+200),fill:"white"}),u&&(0,Qo.jsx)("rect",{x:Fa(u.x),y:Fa(u.y),width:Fa(u.w),height:Fa(u.h),fill:"black",rx:4,ry:4}),d&&x&&(0,Qo.jsx)("path",{d:d,fill:"arrow"===a.start.arrowhead?"none":"black",stroke:"none"}),f&&k&&(0,Qo.jsx)("path",{d:f,fill:"arrow"===a.end.arrowhead?"none":"black",stroke:"none"})]})}),(0,Qo.jsxs)("g",{fill:"none",stroke:"var(--palette-".concat(e.props.color,")"),strokeWidth:c,strokeLinejoin:"round",strokeLinecap:"round",pointerEvents:"none",children:[p,(0,Qo.jsxs)("g",R(R({},S?{mask:"url(#".concat(_,")")}:void 0),{},{children:[S&&(0,Qo.jsx)("rect",{x:Fa(s.minX-100),y:Fa(s.minY-100),width:Fa(s.width+200),height:Fa(s.height+200),opacity:0}),(0,Qo.jsx)("path",{d:h,strokeDasharray:b,strokeDashoffset:w})]})),d&&x&&"none"!==e.props.fill&&(0,Qo.jsx)(Xd,{d:d,color:e.props.color,fill:e.props.fill}),f&&k&&"none"!==e.props.fill&&(0,Qo.jsx)(Xd,{d:f,color:e.props.color,fill:e.props.fill}),d&&(0,Qo.jsx)("path",{d:d}),f&&(0,Qo.jsx)("path",{d:f})]}),(0,Qo.jsx)("path",{d:h,className:"tl-hitarea-stroke"})]}),(0,Qo.jsx)(vf,{id:e.id,text:e.props.text,font:e.props.font,size:e.props.size,position:a.middle,width:null!==(n=null===u||void 0===u?void 0:u.w)&&void 0!==n?n:0,labelColor:e.props.labelColor})]})}},{key:"indicator",value:function(e){var t=nf(this.editor,e),n=t.start,r=t.end,i=this.getArrowInfo(e),o=this.bounds(e),a=this.getLabelBounds(e);if(!i)return null;if(va.Equals(n,r))return null;var s=kc[e.props.size],u=i.start.arrowhead&&Jd(i,"start",s),l=i.end.arrowhead&&Jd(i,"end",s),c=i.isStraight?lf(i):hf(i),d=u&&"arrow"!==i.start.arrowhead||l&&"arrow"!==i.end.arrowhead||null!==a,f=(e.id+"_clip").replace(":","_");return(0,Qo.jsxs)("g",{children:[d&&(0,Qo.jsx)("defs",{children:(0,Qo.jsxs)("mask",{id:f,children:[(0,Qo.jsx)("rect",{x:o.minX-100,y:o.minY-100,width:o.w+200,height:o.h+200,fill:"white"}),a&&(0,Qo.jsx)("rect",{x:a.x,y:a.y,width:a.w,height:a.h,fill:"black",rx:4,ry:4}),u&&(0,Qo.jsx)("path",{d:u,fill:"arrow"===i.start.arrowhead?"none":"black",stroke:"none"}),l&&(0,Qo.jsx)("path",{d:l,fill:"arrow"===i.end.arrowhead?"none":"black",stroke:"none"})]})}),(0,Qo.jsxs)("g",R(R({},d?{mask:"url(#".concat(f,")")}:void 0),{},{children:[d&&(0,Qo.jsx)("rect",{x:o.minX-100,y:o.minY-100,width:o.width+200,height:o.height+200,opacity:0}),(0,Qo.jsx)("path",{d:c})]})),u&&(0,Qo.jsx)("path",{d:u}),l&&(0,Qo.jsx)("path",{d:l}),a&&(0,Qo.jsx)("rect",{x:a.x,y:a.y,width:a.w,height:a.h,rx:4,ry:4})]})}},{key:"labelBoundsCache",get:function(){var e=this;return this.editor.store.createComputedCache("labelBoundsCache",(function(t){var n=e.getArrowInfo(t),r=e.bounds(t),i=t.props,o=i.text,a=i.font,s=i.size;if(!n)return null;if(!o.trim())return null;var u=e.editor.textMeasure.measureText(o,R(R({},xc),{},{fontFamily:Cc[a],fontSize:Ec[s],width:"fit-content"})),l=u.w,c=l,d=u.h;if(r.width>r.height){c=Math.max(Math.min(l,64),Math.min(r.width-64,l));var f=e.editor.textMeasure.measureText(o,R(R({},xc),{},{fontFamily:Cc[a],fontSize:Ec[s],width:c+"px"}));c=f.w,d=f.h}if(c>16*Ec[s]){c=16*Ec[s];var h=e.editor.textMeasure.measureText(o,R(R({},xc),{},{fontFamily:Cc[a],fontSize:Ec[s],width:c+"px"}));c=h.w,d=h.h}return new Wa(n.middle.x-(c+8)/2,n.middle.y-(d+8)/2,c+8,d+8)}))}},{key:"getLabelBounds",value:function(e){return this.labelBoundsCache.get(e.id)||null}},{key:"toSvg",value:function(e,t,n){var r=n.fill[e.props.color],i=this.getArrowInfo(e),o=kc[e.props.size],a=document.createElementNS("http://www.w3.org/2000/svg","g");if(!i)return a;var s=i.start.arrowhead&&Jd(i,"start",o),u=i.end.arrowhead&&Jd(i,"end",o),l=this.bounds(e),c=this.getLabelBounds(e),d=(e.id+"_clip").replace(":","_");if(s||u||c){var f=document.createElementNS("http://www.w3.org/2000/svg","defs"),h=document.createElementNS("http://www.w3.org/2000/svg","mask");h.id=d;var p=document.createElementNS("http://www.w3.org/2000/svg","rect");if(p.setAttribute("x",l.minX-100+""),p.setAttribute("y",l.minY-100+""),p.setAttribute("width",l.width+200+""),p.setAttribute("height",l.height+200+""),p.setAttribute("fill","white"),h.appendChild(p),s&&h.appendChild(xf(s,i.start.arrowhead)),u&&h.appendChild(xf(u,i.end.arrowhead)),c){var v=document.createElementNS("http://www.w3.org/2000/svg","rect");v.setAttribute("x",c.x+""),v.setAttribute("y",c.y+""),v.setAttribute("width",c.w+""),v.setAttribute("height",c.h+""),v.setAttribute("fill","black"),h.appendChild(v)}f.appendChild(h),a.appendChild(f)}var g=document.createElementNS("http://www.w3.org/2000/svg","g");g.setAttribute("mask","url(#".concat(d,")")),a.appendChild(g);var m=document.createElementNS("http://www.w3.org/2000/svg","rect");m.setAttribute("x","-100"),m.setAttribute("y","-100"),m.setAttribute("width",l.width+200+""),m.setAttribute("height",l.height+200+""),m.setAttribute("fill","transparent"),m.setAttribute("stroke","none"),g.appendChild(m);var y=function(e,t,n){var r=document.createElementNS("http://www.w3.org/2000/svg","path");return r.setAttribute("d",e),r.setAttribute("fill","none"),r.setAttribute("stroke",t),r.setAttribute("stroke-width",n+""),r}(i.isStraight?lf(i):hf(i),r,o),b=Yd(i.isStraight?i.length:Math.abs(i.bodyArc.length),o,{style:e.props.dash}),w=b.strokeDasharray,x=b.strokeDashoffset;if(y.setAttribute("stroke-dasharray",w),y.setAttribute("stroke-dashoffset",x),g.appendChild(y),s&&a.appendChild(kf(s,e.props.color,o,"arrow"===e.props.arrowheadStart?"none":e.props.fill,n)),u&&a.appendChild(kf(u,e.props.color,o,"arrow"===e.props.arrowheadEnd?"none":e.props.fill,n)),c){var k={fontSize:Ec[e.props.size],lineHeight:xc.lineHeight,fontFamily:t,padding:0,textAlign:"middle",width:c.w-8,verticalTextAlign:"middle",height:c.h,fontStyle:"normal",fontWeight:"normal",overflow:"wrap"},S=wc(this.editor,this.editor.textMeasure.measureTextSpans(e.props.text,k),k);S.setAttribute("fill",n.fill[e.props.labelColor]),Array.from(S.children).forEach((function(e){var t=parseFloat(e.getAttribute("x")||"0"),n=parseFloat(e.getAttribute("y")||"0");e.setAttribute("x",t+4+c.x+"px"),e.setAttribute("y",n+c.y+"px")}));var _=S.cloneNode(!0);_.setAttribute("stroke-width","2"),_.setAttribute("fill",n.background),_.setAttribute("stroke",n.background),a.appendChild(_),a.appendChild(S)}return a}}]),r}(hc);function xf(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg","path");return n.setAttribute("d",e),n.setAttribute("fill","arrow"===t?"none":"black"),n.setAttribute("stroke","none"),n}function kf(e,t,n,r,i){var o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("d",e),o.setAttribute("fill","none"),o.setAttribute("stroke",i.fill[t]),o.setAttribute("stroke-width",n+"");var a=$d({d:e,fill:r,color:t,colors:i});if(a){var s=document.createElementNS("http://www.w3.org/2000/svg","g");return s.appendChild(a),s.appendChild(o),s}return o}function Sf(e){return.5!==e.x||.5!==e.y}O(wf,"type","arrow"),yf([Nt],wf.prototype,"infoCache",1),yf([Nt],wf.prototype,"labelBoundsCache",1);var _f=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"onPointerDown",(function(t){e.parent.transition("pointing",t)})),O(B(e),"onEnter",(function(){e.editor.setCursor({type:"cross"})})),O(B(e),"onCancel",(function(){e.editor.setSelectedTool("select")})),e}return N(n)}(Vd);O(_f,"id","idle");var Ef=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"shape",void 0),O(B(e),"preciseTimeout",-1),O(B(e),"didTimeout",!1),O(B(e),"onEnter",(function(){var t,n=e.editor.inputs.currentPagePoint;e.didTimeout=!1,e.editor.mark("creating");var r=li();e.editor.createShapes([{id:r,type:"arrow",x:n.x,y:n.y}]);var i=e.editor.getShapeUtil(wf),o=e.editor.getShapeById(r);if(o){var a=null===(t=i.handles)||void 0===t?void 0:t.call(i,o);if(a){var s,u=e.editor.getPointInShapeSpace(o,n),l=null===(s=i.onHandleChange)||void 0===s?void 0:s.call(i,o,{handle:R(R({},a[0]),{},{x:u.x,y:u.y}),isPrecise:!0});if(l){var c,d=null===(c=l.props)||void 0===c?void 0:c.start;"binding"===(null===d||void 0===d?void 0:d.type)&&e.editor.setHintingIds([d.boundShapeId]),e.editor.updateShapes([l],!0)}}e.editor.select(r),e.shape=e.editor.getShapeById(r),e.startPreciseTimeout()}})),O(B(e),"onExit",(function(){e.clearPreciseTimeout()})),O(B(e),"onPointerMove",(function(){if(e.shape&&e.editor.inputs.isDragging){var t,n=e.editor.getShapeUtil(e.shape),r=null===(t=n.handles)||void 0===t?void 0:t.call(n,e.shape);if(!r)throw e.editor.bailToMark("creating"),Error("No handles found");if(!e.didTimeout){var i=e.editor.getShapeUtil(wf),o=e.editor.getShapeById(e.shape.id);if(!o)return;var a=i.handles(o);if(a){var s,u=e.editor.getPointInShapeSpace(o,e.editor.inputs.originPagePoint),l=u.x,c=u.y,d=null===(s=i.onHandleChange)||void 0===s?void 0:s.call(i,o,{handle:R(R({},a[0]),{},{x:l,y:c}),isPrecise:!1});d&&e.editor.updateShapes([d],!0)}}e.editor.setSelectedTool("select.dragging_handle",{shape:e.shape,handle:r.find((function(e){return"end"===e.id})),isCreating:!0,onInteractionEnd:"arrow"})}})),O(B(e),"onPointerUp",(function(){e.cancel()})),O(B(e),"onCancel",(function(){e.cancel()})),O(B(e),"onComplete",(function(){e.cancel()})),O(B(e),"onInterrupt",(function(){e.cancel()})),e}return N(n,[{key:"startPreciseTimeout",value:function(){var e=this;this.preciseTimeout=window.setTimeout((function(){e.isActive&&e.shape&&(e.didTimeout=!0)}),300)}},{key:"clearPreciseTimeout",value:function(){clearTimeout(this.preciseTimeout)}},{key:"cancel",value:function(){this.editor.bailToMark("creating"),this.editor.setHintingIds([]),this.parent.transition("idle",{})}}]),n}(Vd);O(Ef,"id","pointing");var Cf=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"shapeType",wf),e}return N(n)}(Vd);O(Cf,"id","arrow"),O(Cf,"initial","idle"),O(Cf,"children",(function(){return[_f,Ef]}));var Pf=Ud("arrow",{util:wf,props:ji,migrations:Li,tool:Cf}),If="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='30' height='30' fill='none'%3E%3Cpath stroke='%23000' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M13 5H7a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6M19 5h6m0 0v6m0-6L13 17'/%3E%3C/svg%3E";function Tf(e){var t=e.url,n=e.zoomLevel;return(0,Qo.jsx)("a",{className:ra("tl-hyperlink-button",{"tl-hyperlink-button__hidden":n<.32}),href:t,target:"_blank",rel:"noopener noreferrer",onPointerDown:Ns,onPointerUp:Ns,title:t,draggable:!1,children:(0,Qo.jsx)("div",{className:"tl-hyperlink-button__icon",style:{mask:'url("'.concat(If,'") center 100% / 100% no-repeat'),WebkitMask:'url("'.concat(If,'") center 100% / 100% no-repeat')}})})}var Mf=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"canResize",(function(){return!1})),O(B(e),"hideSelectionBoundsBg",(function(){return!0})),O(B(e),"hideSelectionBoundsFg",(function(){return!0})),O(B(e),"onBeforeCreate",(function(t){Of(e.editor,t)})),O(B(e),"onBeforeUpdate",(function(t,n){if(t.props.url!==n.props.url){if(!kd(n.props.url))return R(R({},n),{},{props:R(R({},n.props),{},{url:t.props.url})});Of(e.editor,n)}})),e}return N(n,[{key:"defaultProps",value:function(){return{url:"",w:300,h:320,assetId:null}}},{key:"component",value:function(e){var t=e.props.assetId?this.editor.getAssetById(e.props.assetId):null,n=this.editor.getPageRotation(e),r=Af(e);return(0,Qo.jsx)(ic,{children:(0,Qo.jsxs)("div",{className:"tl-bookmark__container tl-hitarea-stroke",style:{boxShadow:Rs(n)},children:[(0,Qo.jsxs)("div",{className:"tl-bookmark__image_container",children:[null!==t&&void 0!==t&&t.props.image?(0,Qo.jsx)("img",{className:"tl-bookmark__image",draggable:!1,src:null===t||void 0===t?void 0:t.props.image,alt:(null===t||void 0===t?void 0:t.props.title)||""}):(0,Qo.jsx)("div",{className:"tl-bookmark__placeholder"}),(0,Qo.jsx)(Tf,{url:e.props.url,zoomLevel:this.editor.zoomLevel})]}),(0,Qo.jsxs)("div",{className:"tl-bookmark__copy_container",children:[(null===t||void 0===t?void 0:t.props.title)&&(0,Qo.jsx)("h2",{className:"tl-bookmark__heading",children:Ds((null===t||void 0===t?void 0:t.props.title)||"",54)}),(null===t||void 0===t?void 0:t.props.description)&&(0,Qo.jsx)("p",{className:"tl-bookmark__description",children:Ds((null===t||void 0===t?void 0:t.props.description)||"",128)}),(0,Qo.jsx)("a",{className:"tl-bookmark__link",href:e.props.url||"",target:"_blank",rel:"noopener noreferrer",onPointerDown:Ns,onPointerUp:Ns,onClick:Ns,children:Ds(r,45)})]})]})})}},{key:"indicator",value:function(e){return(0,Qo.jsx)("rect",{width:Fa(e.props.w),height:Fa(e.props.h),rx:"8",ry:"8"})}}]),n}(vc);O(Mf,"type","bookmark");var Af=function(e){try{var t=new URL(e.props.url),n=t.pathname.replace(/\/*$/,"");return"".concat(t.hostname).concat(n)}catch(kM){return e.props.url}};function Of(e,t){var n=t.props.url,r=Jr.createId(oe(n));e.getAssetById(r)?t.props.assetId!==r&&e.updateShapes([{id:t.id,type:t.type,props:{assetId:r}}]):(e.updateShapes([{id:t.id,type:t.type,props:{assetId:null}}]),jf(e,t))}var jf=ne(function(){var e=na(ea().mark((function e(t,n){var r,i;return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.props.url,e.next=3,t.externalContentManager.createAssetFromUrl(t,r);case 3:if(i=e.sent){e.next=6;break}return e.abrupt("return");case 6:t.batch((function(){t.createAssets([i]),t.updateShapes([{id:n.id,type:n.type,props:{assetId:i.id}}])}));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),500),Rf=Ud("bookmark",{util:Mf,props:Ni,migrations:Bi});function Lf(){var e=da();return la("zoom",(function(){return e.zoomLevel<.35}),[e])}var Df=function(e){return.65*e+.35*xa(e*ma/2)},Nf=function(e){return{size:1+e,thinning:0,streamline:.62+(1+e)/8*.06,smoothing:.62,simulatePressure:!1,easing:pa.linear}};function zf(e){var t=e.strokeWidth,n=e.showAsComplete,r=e.isPen;return{size:1+t,thinning:.1,streamline:.5,smoothing:.5,simulatePressure:!r,easing:r?Df:pa.easeOutSine,last:n}}function Bf(e,t,n,r){return R(R({},r?Nf(t):"draw"===e.dash?e.isPen?function(e){return{size:1+1.2*e,thinning:.62,streamline:.62,smoothing:.62,simulatePressure:!1,easing:Df}}(t):function(e){return{size:1+e,thinning:.5,streamline:.62+(1+e)/8*.06,smoothing:.62,easing:pa.easeOutSine,simulatePressure:!0}}(t):Nf(t)),{},{last:e.isComplete||n})}function Ff(e){var t,n=[],r=X(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;if("free"===i.type||i.points.length<2)n.push.apply(n,u(i.points.map(va.Cast)));else{var o=Math.max(4,Math.floor(va.Dist(i.points[0],i.points[1])/16));n.push.apply(n,u(va.PointsBetween(i.points[0],i.points[1],o)))}}}catch(a){r.e(a)}finally{r.f()}return n}function Uf(e,t){return{draw:"none",solid:"none",dotted:"0.1 ".concat(2*t),dashed:"".concat(2*t," ").concat(2*t)}[e.props.dash]}var Kf=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"hideResizeHandles",(function(e){return Wf(e)})),O(B(e),"hideRotateHandle",(function(e){return Wf(e)})),O(B(e),"hideSelectionBoundsBg",(function(e){return Wf(e)})),O(B(e),"hideSelectionBoundsFg",(function(e){return Wf(e)})),O(B(e),"isClosed",(function(e){return e.props.isClosed})),O(B(e),"onResize",(function(e,t){var n,r=t.scaleX,i=t.scaleY,o=[],a=X(e.props.segments);try{for(a.s();!(n=a.n()).done;){var s=n.value;o.push(R(R({},s),{},{points:s.points.map((function(e){var t=e.x,n=e.y,o=e.z;return{x:Ua(r*t),y:Ua(i*n),z:o}}))}))}}catch(u){a.e(u)}finally{a.f()}return{props:{segments:o}}})),e}return N(n,[{key:"defaultProps",value:function(){return{segments:[],color:"black",fill:"none",dash:"draw",size:"m",isComplete:!1,isClosed:!1,isPen:!1}}},{key:"getBounds",value:function(e){return Wa.FromPoints(this.outline(e))}},{key:"getOutline",value:function(e){return Ff(e.props.segments)}},{key:"getCenter",value:function(e){return this.bounds(e).center}},{key:"hitTestPoint",value:function(e,t){var n=this.outline(e),r=this.editor.zoomLevel,i=kc[e.props.size]/r;if(1===e.props.segments.length&&e.props.segments[0].points.length<4&&e.props.segments[0].points.some((function(e){return va.Dist(t,e)<1.5*i})))return!0;if(this.isClosed(e))return Ba(t,n);if(this.bounds(e).containsPoint(t))for(var o=0;o<n.length;o++){var a=n[o],s=n[(o+1)%n.length];if(va.DistanceToLineSegment(a,s,t)<i)return!0}return!1}},{key:"hitTestLineSegment",value:function(e,t,n){var r=this.outline(e);if(1===e.props.segments.length&&e.props.segments[0].points.length<4){var i=this.editor.zoomLevel,o=kc[e.props.size]/i;if(e.props.segments[0].points.some((function(e){return va.DistanceToLineSegment(t,n,e)<1.5*o})))return!0}if(this.isClosed(e))for(var a=0;a<r.length;a++){var s=r[a],u=r[(a+1)%r.length];if(vs(t,n,s,u))return!0}else for(var l=0;l<r.length-1;l++){var c=r[l],d=r[l+1];if(vs(t,n,c,d))return!0}return!1}},{key:"component",value:function(e){var t,n=Lf(),r=kc[e.props.size],i=Ff(e.props.segments),o=e.props.isComplete||"straight"===(null===(t=G(e.props.segments))||void 0===t?void 0:t.type),a=r;n||e.props.isPen||"draw"!==e.props.dash||1!==i.length||(a+=ae(e.id)()*(r/6));var s=Bf(e.props,a,o,n),u=is(i,s),l=u.length>1?Ks(u,e.props.isClosed):Vf(i[0],a);if(!n&&"draw"===e.props.dash||u.length<2){ss(u,s);var c=ts(u,s);return(0,Qo.jsxs)(Hd,{id:e.id,children:[(0,Qo.jsx)(Xd,{fill:e.props.isClosed?e.props.fill:"none",color:e.props.color,d:l}),(0,Qo.jsx)("path",{d:Us(c,!0),strokeLinecap:"round",fill:"var(--palette-".concat(e.props.color,")")})]})}return(0,Qo.jsxs)(Hd,{id:e.id,children:[(0,Qo.jsx)(Xd,{color:e.props.color,fill:e.props.isClosed?e.props.fill:"none",d:l}),(0,Qo.jsx)("path",{d:l,strokeLinecap:"round",fill:"none",stroke:"var(--palette-".concat(e.props.color,")"),strokeWidth:r,strokeDasharray:Uf(e,r),strokeDashoffset:"0"})]})}},{key:"indicator",value:function(e){var t,n=Lf(),r=kc[e.props.size],i=Ff(e.props.segments),o=r;n||e.props.isPen||"draw"!==e.props.dash||1!==i.length||(o+=ae(e.id)()*(r/6));var a=e.props.isComplete||"straight"===(null===(t=G(e.props.segments))||void 0===t?void 0:t.type),s=is(i,Bf(e.props,o,a,!0)),u=s.length>1?Ks(s,e.props.isClosed):Vf(i[0],o);return(0,Qo.jsx)("path",{d:u})}},{key:"toSvg",value:function(e,t,n){var r,i=e.props.color,o=kc[e.props.size],a=Ff(e.props.segments),s=e.props.isComplete||"straight"===(null===(r=G(e.props.segments))||void 0===r?void 0:r.type),u=o;e.props.isPen||"draw"!==e.props.dash||1!==a.length||(u+=ae(e.id)()*(o/6));var l,c=Bf(e.props,u,s,!1),d=is(a,c),f=d.length>1?Ks(d,e.props.isClosed):Vf(a[0],u);if("draw"===e.props.dash||d.length<2){ss(d,c);var h=ts(d,c),p=document.createElementNS("http://www.w3.org/2000/svg","path");p.setAttribute("d",Us(h,!0)),p.setAttribute("fill",n.fill[i]),p.setAttribute("stroke-linecap","round"),l=p}else{var v=document.createElementNS("http://www.w3.org/2000/svg","path");v.setAttribute("d",f),v.setAttribute("stroke",n.fill[i]),v.setAttribute("fill","none"),v.setAttribute("stroke-linecap","round"),v.setAttribute("stroke-width",o.toString()),v.setAttribute("stroke-dasharray",Uf(e,o)),v.setAttribute("stroke-dashoffset","0"),l=v}var g=$d({fill:e.props.isClosed?e.props.fill:"none",d:f,color:e.props.color,colors:n});if(g){var m=document.createElementNS("http://www.w3.org/2000/svg","g");return m.appendChild(g),m.appendChild(l),m}return l}},{key:"expandSelectionOutlinePx",value:function(e){var t="draw"===e.props.dash?1.6:1;return kc[e.props.size]*t/2}}]),n}(hc);function Vf(e,t){var n=.5*(t+1);return"M ".concat(e.x," ").concat(e.y," m -").concat(n,", 0 a ").concat(n,",").concat(n," 0 1,0 ").concat(2*n,",0 a ").concat(n,",").concat(n," 0 1,0 -").concat(2*n,",0")}function Wf(e){return 1===e.props.segments.length&&e.props.segments[0].points.length<2}O(Kf,"type","draw");var Hf=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"hideResizeHandles",(function(e){return Gf(e)})),O(B(e),"hideRotateHandle",(function(e){return Gf(e)})),O(B(e),"hideSelectionBoundsBg",(function(e){return Gf(e)})),O(B(e),"hideSelectionBoundsFg",(function(e){return Gf(e)})),O(B(e),"onResize",(function(e,t){var n,r=t.scaleX,i=t.scaleY,o=[],a=X(e.props.segments);try{for(a.s();!(n=a.n()).done;){var s=n.value;o.push(R(R({},s),{},{points:s.points.map((function(e){var t=e.x,n=e.y,o=e.z;return{x:r*t,y:i*n,z:o}}))}))}}catch(u){a.e(u)}finally{a.f()}return{props:{segments:o}}})),e}return N(n,[{key:"defaultProps",value:function(){return{segments:[],color:"black",size:"m",isComplete:!1,isPen:!1}}},{key:"getBounds",value:function(e){return Wa.FromPoints(this.outline(e))}},{key:"getOutline",value:function(e){return Ff(e.props.segments)}},{key:"getCenter",value:function(e){return this.bounds(e).center}},{key:"hitTestPoint",value:function(e,t){var n=this.outline(e),r=this.editor.zoomLevel,i=$f(e)/r;if(1===e.props.segments.length&&e.props.segments[0].points.length<4&&e.props.segments[0].points.some((function(e){return va.Dist(t,e)<1.5*i})))return!0;if(this.bounds(e).containsPoint(t))for(var o=0;o<n.length;o++){var a=n[o],s=n[(o+1)%n.length];if(va.DistanceToLineSegment(a,s,t)<i)return!0}return!1}},{key:"hitTestLineSegment",value:function(e,t,n){var r=this.outline(e);if(1===e.props.segments.length&&e.props.segments[0].points.length<4){var i=this.editor.zoomLevel,o=$f(e)/i;if(e.props.segments[0].points.some((function(e){return va.DistanceToLineSegment(t,n,e)<1.5*o})))return!0}for(var a=0;a<r.length-1;a++){var s=r[a],u=r[a+1];if(vs(t,n,s,u))return!0}return!1}},{key:"component",value:function(e){return(0,Qo.jsx)(Xf,{strokeWidth:$f(e),shape:e,opacity:.35})}},{key:"renderBackground",value:function(e){return(0,Qo.jsx)(Xf,{strokeWidth:$f(e),shape:e,opacity:.82})}},{key:"indicator",value:function(e){var t,n=Lf(),r=$f(e),i=Ff(e.props.segments),o=r;n||e.props.isPen||1!==i.length||(o+=ae(e.id)()*(r/6));var a,s=is(i,zf({strokeWidth:r,showAsComplete:e.props.isComplete||"straight"===(null===(t=G(e.props.segments))||void 0===t?void 0:t.type),isPen:e.props.isPen}));return a=s.length<2?function(e,t){var n=t/2;return"M ".concat(e.x," ").concat(e.y," m -").concat(n,", 0 a ").concat(n,",").concat(n," 0 1,0 ").concat(2*n,",0 a ").concat(n,",").concat(n," 0 1,0 -").concat(2*n,",0")}(i[0],o):Ks(s,!1),(0,Qo.jsx)("path",{d:a})}},{key:"expandSelectionOutlinePx",value:function(e){return $f(e)/2}},{key:"toSvg",value:function(e,t,n){return qf($f(e),e,.35,n)}},{key:"toBackgroundSvg",value:function(e,t,n){return qf($f(e),e,.82,n)}}]),n}(hc);function Yf(e,t,n){var r,i=Ff(e.props.segments),o=e.props.isComplete||"straight"===(null===(r=G(e.props.segments))||void 0===r?void 0:r.type),a=t;n||e.props.isPen||1!==i.length||(a+=ae(e.id)()*(t/6));var s=is(i,zf({strokeWidth:a,showAsComplete:o,isPen:e.props.isPen})),u=s.length>1?Ks(s,!1):function(e){var t=.1;return"M ".concat(e.x," ").concat(e.y," m -").concat(t,", 0 a ").concat(t,",").concat(t," 0 1,0 ").concat(.2,",0 a ").concat(t,",").concat(t," 0 1,0 -").concat(.2,",0")}(i[0]);return{solidStrokePath:u,sw:a}}function Xf(e){var t=e.strokeWidth,n=e.shape,r=e.opacity,i=Yf(n,t,Lf()),o=i.solidStrokePath,a=i.sw;return(0,Qo.jsx)(Hd,{id:n.id,style:{opacity:r},children:(0,Qo.jsx)("path",{d:o,strokeLinecap:"round",fill:"none",pointerEvents:"all",stroke:"var(--palette-".concat(n.props.color,"-highlight)"),strokeWidth:a})})}function qf(e,t,n,r){var i=Yf(t,e,!1),o=i.solidStrokePath,a=i.sw,s=document.createElementNS("http://www.w3.org/2000/svg","path");return s.setAttribute("d",o),s.setAttribute("fill","none"),s.setAttribute("stroke",r.highlight[t.props.color]),s.setAttribute("stroke-width","".concat(a)),s.setAttribute("opacity","".concat(n)),s}function $f(e){return 1.12*Sc[e.props.size]}function Gf(e){return 1===e.props.segments.length&&e.props.segments[0].points.length<2}O(Hf,"type","highlight");var Qf=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"info",{}),O(B(e),"initialShape",void 0),O(B(e),"shapeType","highlight"===e.parent.id?Hf:Kf),O(B(e),"util",e.editor.getShapeUtil(e.shapeType)),O(B(e),"isPen",!1),O(B(e),"segmentMode","free"),O(B(e),"didJustShiftClickToExtendPreviousShapeLine",!1),O(B(e),"pagePointWhereCurrentSegmentChanged",{}),O(B(e),"pagePointWhereNextSegmentChanged",null),O(B(e),"lastRecordedPoint",{}),O(B(e),"mergeNextPoint",!1),O(B(e),"currentLineLength",0),O(B(e),"canDraw",!1),O(B(e),"onEnter",(function(t){e.info=t,e.canDraw=!e.editor.isMenuOpen,e.lastRecordedPoint=e.editor.inputs.currentPagePoint.clone(),e.canDraw&&e.startShape()})),O(B(e),"onPointerMove",(function(){var t=B(e).editor.inputs;e.isPen!==t.isPen&&e.cancel(),!e.canDraw&&t.isDragging&&(e.startShape(),e.canDraw=!0),e.canDraw&&(t.isPen?va.Dist(t.currentPagePoint,e.lastRecordedPoint)>=1/e.editor.zoomLevel?(e.lastRecordedPoint=t.currentPagePoint.clone(),e.mergeNextPoint=!1):e.mergeNextPoint=!0:e.mergeNextPoint=!1,e.updateShapes())})),O(B(e),"onKeyDown",(function(t){if("Shift"===t.key)switch(e.segmentMode){case"free":e.segmentMode="starting_straight",e.pagePointWhereNextSegmentChanged=e.editor.inputs.currentPagePoint.clone();break;case"starting_free":e.segmentMode="starting_straight"}e.updateShapes()})),O(B(e),"onKeyUp",(function(t){if("Shift"===t.key)switch(e.editor.snaps.clear(),e.segmentMode){case"straight":e.segmentMode="starting_free",e.pagePointWhereNextSegmentChanged=e.editor.inputs.currentPagePoint.clone();break;case"starting_straight":e.pagePointWhereNextSegmentChanged=null,e.segmentMode="free"}e.updateShapes()})),O(B(e),"onExit",(function(){e.editor.snaps.clear(),e.pagePointWhereCurrentSegmentChanged=e.editor.inputs.currentPagePoint.clone()})),O(B(e),"onPointerUp",(function(){e.complete()})),O(B(e),"onCancel",(function(){e.cancel()})),O(B(e),"onComplete",(function(){e.complete()})),O(B(e),"onInterrupt",(function(){e.editor.inputs.isDragging||(e.editor.bail(),e.cancel())})),e}return N(n,[{key:"canClose",value:function(){return"highlight"!==this.shapeType.type}},{key:"getIsClosed",value:function(e,t){if(!this.canClose())return!1;var n=kc[t],r=e[0].points[0],i=e[e.length-1],o=i.points[i.points.length-1];return r!==o&&this.currentLineLength>4*n&&va.Dist(r,o)<2*n}},{key:"startShape",value:function(){var e=this.editor.inputs,t=e.originPagePoint,n=e.isPen;this.editor.mark("draw create start"),this.isPen=n;var r=this.isPen?1.25*this.info.point.z:.5;if(this.segmentMode=this.editor.inputs.shiftKey?"straight":"free",this.didJustShiftClickToExtendPreviousShapeLine=!1,this.lastRecordedPoint=t.clone(),this.initialShape){var i=this.editor.getShapeById(this.initialShape.id);if(i&&"straight"===this.segmentMode){this.didJustShiftClickToExtendPreviousShapeLine=!0;var o=G(i.props.segments);if(!o)throw Error("Expected a previous segment!");var a=G(o.points);if(!a)throw Error("Expected a previous point!");var s=this.editor.getPointInShapeSpace(i,t).toFixed(),l=s.x,c=s.y,d=this.isPen?1.25*this.info.point.z:.5,f={type:this.segmentMode,points:[{x:a.x,y:a.y,z:+d.toFixed(2)},{x:l,y:c,z:+d.toFixed(2)}]},h=Ja.applyToPoint(this.editor.getPageTransformById(i.id),a);this.pagePointWhereCurrentSegmentChanged=h,this.pagePointWhereNextSegmentChanged=null;var p=[].concat(u(i.props.segments),[f]);this.currentLineLength=this.getLineLength(p);var v={id:i.id,type:this.shapeType.type,props:{segments:p}};return this.canClose()&&(v.props.isClosed=this.getIsClosed(p,i.props.size)),void this.editor.updateShapes([v])}}this.pagePointWhereCurrentSegmentChanged=t.clone();var g=li();this.editor.createShapes([{id:g,type:this.shapeType.type,x:t.x,y:t.y,props:{isPen:this.isPen,segments:[{type:this.segmentMode,points:[{x:0,y:0,z:+r.toFixed(2)}]}]}}]),this.currentLineLength=0,this.initialShape=this.editor.getShapeById(g)}},{key:"updateShapes",value:function(){var e=this.editor.inputs,t=this.initialShape;if(t){var n=t.id,r=t.props.size,i=this.editor.getShapeById(n);if(i){var o=i.props.segments,a=this.editor.getPointInShapeSpace(i,e.currentPagePoint).toFixed(),s=a.x,l=a.y,c=a.z,d={x:s,y:l,z:this.isPen?+(1.25*c).toFixed(2):.5};switch(this.segmentMode){case"starting_straight":var f=this.pagePointWhereNextSegmentChanged;if(null===f)throw Error("We should have a point where the segment changed");if(va.Dist(f,e.currentPagePoint)>4){this.pagePointWhereCurrentSegmentChanged=this.pagePointWhereNextSegmentChanged.clone(),this.pagePointWhereNextSegmentChanged=null,this.segmentMode="straight";var h=G(o);if(!h)throw Error("Expected a previous segment!");var p,v=G(h.points);if(!v)throw Error("Expected a previous last point!");var g=this.editor.getPointInShapeSpace(i,this.pagePointWhereCurrentSegmentChanged).toFixed().toJson();if("straight"===h.type){this.currentLineLength+=va.Dist(v,g),p={type:"straight",points:[R({},v),g]};var m=this.editor.getPageTransform(i);this.pagePointWhereCurrentSegmentChanged=Ja.applyToPoint(m,v)}else p={type:"straight",points:[g,d]};var y={id:n,type:this.shapeType.type,props:{segments:[].concat(u(o),[p])}};this.canClose()&&(y.props.isClosed=this.getIsClosed(o,r)),this.editor.updateShapes([y],!0)}break;case"starting_free":var b=this.pagePointWhereNextSegmentChanged;if(null===b)throw Error("We should have a point where the segment changed");if(va.Dist(b,e.currentPagePoint)>4){this.pagePointWhereCurrentSegmentChanged=this.pagePointWhereNextSegmentChanged.clone(),this.pagePointWhereNextSegmentChanged=null,this.segmentMode="free";var w=o.slice(),x=G(w[w.length-1].points);if(!x)throw Error("No previous point!");var k={type:"free",points:u(va.PointsBetween(x,d,6).map((function(e){return e.toFixed().toJson()})))},S=[].concat(u(w),[k]);this.currentLineLength=this.getLineLength(S);var _={id:n,type:this.shapeType.type,props:{segments:S}};this.canClose()&&(_.props.isClosed=this.getIsClosed(S,r)),this.editor.updateShapes([_],!0)}break;case"straight":var E,C=o.slice(),P=C[C.length-1],I=this.pagePointWhereCurrentSegmentChanged,T=this.editor.inputs,M=T.currentPagePoint,A=T.ctrlKey;if(!I)throw Error("We should have a point where the segment changed");var O=!1;this.didJustShiftClickToExtendPreviousShapeLine?this.editor.inputs.isDragging&&(O=!A,this.didJustShiftClickToExtendPreviousShapeLine=!1):O=!A;var j=this.editor.getPointInShapeSpace(i,M).toFixed().toJson(),L=!1,D=void 0;if((this.editor.isSnapMode?!A:A)&&C.length>2){for(var N=void 0,z=8/this.editor.zoomLevel,B=0,F=o.length-2;B<F;B++){var U=o[B];if(!U)break;if("free"!==U.type){var K=U.points[0],V=G(U.points);if(K&&V){var W=va.NearestPointOnLineSegment(K,V,j),H=va.Dist(W,j);if(H<z){N=W.toFixed().toJson(),z=H,D=U;break}}}}N&&(L=!0,j=N)}if(L&&D){var Y=this.editor.getPageTransform(i),X=D.points[0],q=G(D.points);if(!q)throw Error("Expected a last point!");var $=Ja.applyToPoint(Y,X),Q=Ja.applyToPoint(Y,q),J=Ja.applyToPoint(Y,j);this.editor.snaps.setLines([{id:bd(),type:"points",points:[$,J,Q]}])}else{if(this.editor.snaps.clear(),O){var Z=va.Angle(I,M),ee=Aa(Z,24)-Z;E=va.RotWith(M,I,ee)}else E=M;j=this.editor.getPointInShapeSpace(i,E).toFixed().toJson()}this.currentLineLength+=va.Dist(P.points[0],j),C[C.length-1]=R(R({},P),{},{type:"straight",points:[P.points[0],j]});var te={id:n,type:this.shapeType.type,props:{segments:C}};this.canClose()&&(te.props.isClosed=this.getIsClosed(o,r)),this.editor.updateShapes([te],!0);break;case"free":var ne=o.slice(),re=ne[ne.length-1],ie=u(re.points);if(ie.length&&this.mergeNextPoint){var oe=ie[ie.length-1].z;ie[ie.length-1]={x:d.x,y:d.y,z:oe?Math.max(oe,d.z):d.z}}else this.currentLineLength+=va.Dist(ie[ie.length-1],d),ie.push(d);ne[ne.length-1]=R(R({},re),{},{points:ie}),this.currentLineLength=this.getLineLength(ne);var ae={id:n,type:this.shapeType.type,props:{segments:ne}};if(this.canClose()&&(ae.props.isClosed=this.getIsClosed(ne,r)),this.editor.updateShapes([ae],!0),ie.length>500){this.editor.updateShapes([{id:n,type:this.shapeType.type,props:{isComplete:!0}}]);var se=this.editor.inputs.currentPagePoint,ue=li();this.editor.createShapes([{id:ue,type:this.shapeType.type,x:Ua(se.x),y:Ua(se.y),props:{isPen:this.isPen,segments:[{type:"free",points:[{x:0,y:0,z:this.isPen?+(1.25*c).toFixed():.5}]}]}}]),this.initialShape=_e(this.editor.getShapeById(ue)),this.mergeNextPoint=!1,this.lastRecordedPoint=this.editor.inputs.currentPagePoint.clone(),this.currentLineLength=0}}}}}},{key:"getLineLength",value:function(e){var t,n=0,r=X(e);try{for(r.s();!(t=r.n()).done;)for(var i=t.value,o=0;o<i.points.length-1;o++){var a=i.points[o],s=i.points[o+1];n+=va.Sub(s,a).len2()}}catch(u){r.e(u)}finally{r.f()}return Math.sqrt(n)}},{key:"complete",value:function(){if(this.canDraw){var e=this.initialShape;e&&(this.editor.updateShapes([{id:e.id,type:e.type,props:{isComplete:!0}}]),this.parent.transition("idle",{}))}else this.cancel()}},{key:"cancel",value:function(){this.parent.transition("idle",this.info)}}]),n}(Vd);O(Qf,"id","drawing");var Jf=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"onPointerDown",(function(t){e.parent.transition("drawing",t)})),O(B(e),"onEnter",(function(){e.editor.setCursor({type:"cross"})})),O(B(e),"onCancel",(function(){e.editor.setSelectedTool("select")})),e}return N(n)}(Vd);O(Jf,"id","idle");var Zf=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"shapeType",Kf),O(B(e),"onExit",(function(){e.children.drawing.initialShape=void 0})),e}return N(n)}(Vd);O(Zf,"id","draw"),O(Zf,"initial","idle"),O(Zf,"children",(function(){return[Jf,Qf]}));var eh=Ud("draw",{util:Kf,props:Ki,migrations:Wi,tool:Zf}),th=Ud("embed",{util:gc,props:Zi,migrations:ro}),nh=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"onPointerDown",(function(t){e.parent.transition("pointing",t)})),O(B(e),"onEnter",(function(){e.editor.setCursor({type:"cross"})})),O(B(e),"onCancel",(function(){e.editor.setSelectedTool("select")})),e}return N(n)}(Vd);O(nh,"id","idle");var rh=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"markId","creating"),O(B(e),"wasFocusedOnEnter",!1),O(B(e),"onEnter",(function(){var t=e.editor.isMenuOpen;e.wasFocusedOnEnter=!t})),O(B(e),"onPointerMove",(function(t){if(e.editor.inputs.isDragging){var n=e.editor.inputs.originPagePoint,r=e.parent.shapeType.type,i=li();e.editor.mark(e.markId),e.editor.createShapes([{id:i,type:r,x:n.x,y:n.y,props:{w:1,h:1}}],!0),e.editor.setSelectedTool("select.resizing",R(R({},t),{},{target:"selection",handle:"bottom_right",isCreating:!0,creationCursorOffset:{x:1,y:1},onInteractionEnd:e.parent.id}))}})),O(B(e),"onPointerUp",(function(){e.complete()})),O(B(e),"onCancel",(function(){e.cancel()})),O(B(e),"onComplete",(function(){e.complete()})),O(B(e),"onInterrupt",(function(){e.cancel()})),e}return N(n,[{key:"complete",value:function(){var e=this.editor.inputs.originPagePoint;if(this.wasFocusedOnEnter){this.editor.mark(this.markId);var t=this.parent.shapeType.type,n=li();this.editor.mark(this.markId),this.editor.createShapes([{id:n,type:t,x:e.x,y:e.y}]);var r=this.editor.getShapeById(n),i=this.editor.getShapeUtil(r).defaultProps(),o=i.w,a=i.h,s=this.editor.getDeltaInParentSpace(r,new va(o/2,a/2));this.editor.updateShapes([{id:n,type:t,x:r.x-s.x,y:r.y-s.y}]),this.editor.setSelectedIds([n]),this.editor.instanceState.isToolLocked?this.parent.transition("idle",{}):this.editor.setSelectedTool("select.idle")}}},{key:"cancel",value:function(){this.parent.transition("idle",{})}}]),n}(Vd);O(rh,"id","pointing");var ih=function(e){U(n,e);var t=W(n);function n(){return z(this,n),t.apply(this,arguments)}return N(n)}(Vd);function oh(e){var t=e.bounds,n=e.zoomLevel,r=e.className;return(0,Qo.jsx)("g",{className:r,pointerEvents:"none",strokeLinecap:"round",strokeLinejoin:"round",children:t.sides.map((function(e,t){var r=Yd(e[0].dist(e[1]),1/n,{style:"dashed",lengthRatio:4}),i=r.strokeDasharray,o=r.strokeDashoffset;return(0,Qo.jsx)("line",{x1:e[0].x,y1:e[0].y,x2:e[1].x,y2:e[1].y,strokeDasharray:i,strokeDashoffset:o},t)}))})}O(ih,"id","box"),O(ih,"initial","idle"),O(ih,"children",(function(){return[nh,rh]}));var ah=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"type","group"),O(B(e),"hideSelectionBoundsBg",(function(){return!1})),O(B(e),"hideSelectionBoundsFg",(function(){return!0})),O(B(e),"canBind",(function(){return!1})),O(B(e),"onChildrenChange",(function(t){var n=e.editor.getSortedChildIds(t.id);return 0===n.length?(e.editor.pageState.focusLayerId===t.id&&e.editor.popFocusLayer(),void e.editor.deleteShapes([t.id])):1===n.length?(e.editor.pageState.focusLayerId===t.id&&e.editor.popFocusLayer(),e.editor.reparentShapesById(n,t.parentId),void e.editor.deleteShapes([t.id])):void 0})),e}return N(n,[{key:"defaultProps",value:function(){return{}}},{key:"getBounds",value:function(e){var t=this,n=this.editor.getSortedChildIds(e.id);if(0===n.length)return new Wa;var r=n.flatMap((function(e){var n=t.editor.getShapeById(e);return t.editor.getOutlineById(e).map((function(e){return Ja.applyToPoint(t.editor.getTransform(n),e)}))}));return Wa.FromPoints(r)}},{key:"getCenter",value:function(e){return this.bounds(e).center}},{key:"getOutline",value:function(e){return this.bounds(e).corners}},{key:"component",value:function(e){var t=this,r=this.editor,i=r.erasingIdsSet,o=r.pageState,a=o.hintingIds,s=o.focusLayerId,u=r.zoomLevel,l=i.has(e.id),c=a.length>0&&a.some((function(r){return r!==e.id&&t.editor.isShapeOfType(t.editor.getShapeById(r),n)}));if(!l&&(e.id!==s||c))return null;var d=this.bounds(e);return(0,Qo.jsx)(Hd,{id:e.id,children:(0,Qo.jsx)(oh,{className:"tl-group",bounds:d,zoomLevel:u})})}},{key:"indicator",value:function(e){var t=this.editor.camera.z,n=this.bounds(e);return(0,Qo.jsx)(oh,{className:"",bounds:n,zoomLevel:t})}}]),n}(hc);O(ah,"type","group");var sh=(0,t.forwardRef)((function(e,n){var r=e.id,i=e.name,o=e.isEditing,a=da(),s=(0,t.useCallback)((function(e){"Enter"===e.key&&(e.stopPropagation(),e.currentTarget.blur(),a.setEditingId(null))}),[a]),u=(0,t.useCallback)((function(e){var t=a.getShapeById(r);if(t){var n=t.props.name,i=e.currentTarget.value.trim();n!==i&&a.updateShapes([{id:r,type:"frame",props:{name:i}}],!0)}}),[r,a]),l=(0,t.useCallback)((function(e){var t=a.getShapeById(r);if(t){var n=t.props.name,i=e.currentTarget.value;n!==i&&a.updateShapes([{id:r,type:"frame",props:{name:i}}],!0)}}),[r,a]);return(0,Qo.jsxs)("div",{className:"tl-frame-label ".concat(o?"tl-frame-label__editing":""),children:[(0,Qo.jsx)("input",{className:"tl-frame-name-input",ref:n,style:{display:o?void 0:"none"},value:i,autoFocus:!0,onKeyDown:s,onBlur:u,onChange:l}),bc(i,"Frame")+String.fromCharCode(8203)]})})),uh=function(e){var n=e.id,r=e.name,i=e.width,o=e.height,a=Ca(da().getPageRotationById(n)),s=oc(n),u=(0,t.useRef)(null);(0,t.useEffect)((function(){var e=u.current;e&&s&&(e.focus(),e.select(),requestAnimationFrame((function(){document.activeElement!==e&&(e.focus(),e.select())})))}),[u,s]);var l,c=((a+Math.PI/4)*(2/Math.PI)+4)%4,d=["top","left","bottom","right"][Math.floor(c)];switch(d){case"top":l="";break;case"right":l="translate(".concat(Fa(i),"px, 0px) rotate(90deg)");break;case"bottom":l="translate(".concat(Fa(i),"px, ").concat(Fa(o),"px) rotate(180deg)");break;case"left":l="translate(0px, ".concat(Fa(o),"px) rotate(270deg)")}return(0,Qo.jsx)("div",{className:"tl-frame-heading",style:{overflow:s?"visible":"hidden",maxWidth:"calc(var(--tl-zoom) * ".concat("top"===d||"bottom"===d?Math.ceil(i):Math.ceil(o),"px + var(--space-5))"),bottom:Math.ceil(o),transform:"".concat(l," scale(var(--tl-scale)) translateX(calc(-1 * var(--space-3))")},children:(0,Qo.jsx)("div",{className:"tl-frame-heading-hit-area",children:(0,Qo.jsx)(sh,{ref:u,id:n,name:r,isEditing:s})})})},lh=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"canBind",(function(){return!0})),O(B(e),"canEdit",(function(){return!0})),O(B(e),"canReceiveNewChildrenOfType",(function(e,t){return!e.isLocked})),O(B(e),"canDropShapes",(function(e,t){return!e.isLocked})),O(B(e),"onDragShapesOver",(function(t,n){return n.every((function(e){return e.parentId===t.id}))?{shouldHint:!1}:(e.editor.reparentShapesById(n.map((function(e){return e.id})),t.id),{shouldHint:!0})})),O(B(e),"onDragShapesOut",(function(t,n){var r=e.editor.getShapeById(t.parentId);r&&e.editor.isShapeOfType(r,ah)?e.editor.reparentShapesById(n.map((function(e){return e.id})),r.id):e.editor.reparentShapesById(n.map((function(e){return e.id})),e.editor.currentPageId)})),O(B(e),"onResizeEnd",(function(t){var n,r=e.editor.getPageBounds(t),i=[],o=X(e.editor.getSortedChildIds(t.id));try{for(o.s();!(n=o.n()).done;){var a=n.value,s=e.editor.getPageBoundsById(a);r.includes(s)||i.push(a)}}catch(u){o.e(u)}finally{o.f()}i.length>0&&e.editor.reparentShapesById(i,e.editor.currentPageId)})),e}return N(n,[{key:"defaultProps",value:function(){return{w:320,h:180,name:""}}},{key:"component",value:function(e){var t=this.bounds(e);return(0,Qo.jsxs)(Qo.Fragment,{children:[(0,Qo.jsxs)(Hd,{children:[(0,Qo.jsx)("rect",{className:"tl-hitarea-stroke",width:t.width,height:t.height}),(0,Qo.jsx)("rect",{className:"tl-frame__body",width:t.width,height:t.height,fill:"none"})]}),(0,Qo.jsx)(uh,{id:e.id,name:e.props.name,width:t.width,height:t.height})]})}},{key:"toSvg",value:function(e,t,n){var r=document.createElementNS("http://www.w3.org/2000/svg","g"),i=document.createElementNS("http://www.w3.org/2000/svg","rect");i.setAttribute("width",e.props.w.toString()),i.setAttribute("height",e.props.h.toString()),i.setAttribute("fill",n.solid),i.setAttribute("stroke",n.fill.black),i.setAttribute("stroke-width","1"),i.setAttribute("rx","1"),i.setAttribute("ry","1"),r.appendChild(i);var o,a=((Ca(this.editor.getPageRotationById(e.id))+Math.PI/4)*(2/Math.PI)+4)%4;switch(["top","left","bottom","right"][Math.floor(a)]){case"top":default:o="";break;case"right":o="translate(".concat(Fa(e.props.w),"px, 0px) rotate(90deg)");break;case"bottom":o="translate(".concat(Fa(e.props.w),"px, ").concat(Fa(e.props.h),"px) rotate(180deg)");break;case"left":o="translate(0px, ".concat(Fa(e.props.h),"px) rotate(270deg)")}var s={fontSize:12,fontFamily:"Inter, sans-serif",textAlign:"start",width:e.props.w,height:32,padding:0,lineHeight:1,fontStyle:"normal",fontWeight:"normal",overflow:"truncate-ellipsis",verticalTextAlign:"middle"},u=this.editor.textMeasure.measureTextSpans(bc(e.props.name,"Frame")+String.fromCharCode(8203),s),l=u[0],c=G(u),d=c.box.w+c.box.x-l.box.x,f=wc(this.editor,u,R({offsetY:-s.height-2},s));f.style.setProperty("transform",o);var h=document.createElementNS("http://www.w3.org/2000/svg","rect");return h.setAttribute("x","-8px"),h.setAttribute("y",-s.height-4+"px"),h.setAttribute("width",d+16+"px"),h.setAttribute("height","".concat(s.height,"px")),h.setAttribute("rx","4px"),h.setAttribute("ry","4px"),h.setAttribute("fill",n.background),r.appendChild(h),r.appendChild(f),r}},{key:"indicator",value:function(e){var t=this.bounds(e);return(0,Qo.jsx)("rect",{width:Fa(t.width),height:Fa(t.height),className:"tl-frame-indicator"})}},{key:"providesBackgroundForChildren",value:function(){return!0}}]),n}(vc);O(lh,"type","frame");var ch=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"shapeType",lh),e}return N(n)}(ih);O(ch,"id","frame"),O(ch,"initial","idle");var dh=Ud("frame",{util:lh,props:io,migrations:oo,tool:ch});function fh(e){var t=e.bounds,n=e.editor,r=e.font,i=e.shape,o={fontSize:_c[i.props.size],fontFamily:r,textAlign:i.props.align,verticalTextAlign:i.props.verticalAlign,width:Math.ceil(t.width),height:Math.ceil(t.height),padding:16,lineHeight:xc.lineHeight,fontStyle:"normal",fontWeight:"normal",overflow:"wrap",offsetX:0},a=n.textMeasure.measureTextSpans(i.props.text,o),s=function(e,t,n,r){if(("start-legacy"===e||"end-legacy"===e)&&0!==n.length){var i,o=Wa.From(n[0].box),a=X(n);try{for(a.s();!(i=a.n()).done;){var s=i.value.box;o.union(s)}}catch(u){a.e(u)}finally{a.f()}if("start-legacy"===e)return(r-2*t-o.width)/2;if("end-legacy"===e)return-(r-2*t-o.width)/2}}(i.props.align,16,a,t.width);return s&&(o.offsetX=s),wc(0,a,o)}var hh=t.memo((function(e){var t=e.id,n=e.type,r=e.text,i=e.size,o=e.labelColor,a=e.font,s=e.align,u=e.verticalAlign,l=e.wrap,c=Mc(t,n,r),d=c.rInput,f=c.isEmpty,h=c.isEditing,p=c.isEditableFromHover,v=c.handleFocus,g=c.handleChange,m=c.handleKeyDown,y=c.handleBlur,b=h||p,w=Ic.normalizeTextForDom(r),x=w.trim().length>0,k=function(e){return"start-legacy"===e||"middle-legacy"===e||"end-legacy"===e}(s);return(0,Qo.jsx)("div",{className:"tl-text-label","data-font":a,"data-align":s,"data-hastext":!f,"data-isediting":h,"data-textwrap":!!l,style:x||b?{justifyContent:"middle"===s||k?"center":s,alignItems:"middle"===u?"center":u}:void 0,children:(0,Qo.jsxs)("div",{className:"tl-text-label__inner",style:{fontSize:_c[i],lineHeight:_c[i]*xc.lineHeight+"px",minHeight:f?_c[i]*xc.lineHeight+32:0,minWidth:f?33:0,color:"var(--palette-".concat(o,")")},children:[(0,Qo.jsx)("div",{className:"tl-text tl-text-content",dir:"ltr",children:w}),b?(0,Qo.jsx)("textarea",{ref:d,className:"tl-text tl-text-input",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:h,placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:r,onFocus:v,onChange:g,onKeyDown:m,onBlur:y,onContextMenu:Ns}):null]})})})),ph=t.memo((function(e){var t=e.w,n=e.h,r=e.strokeWidth,i=e.dash,o=e.color,a=e.fill,s=t/2,u=n/2,l=Math.max(0,s-r/2),c=Math.max(0,u-r/2),d=Ea(l,c),f=Yd(d<64?2*d:d,r,{style:i,snap:4,closed:!0}),h=f.strokeDasharray,p=f.strokeDashoffset,v="M".concat(s-l,",").concat(u,"a").concat(l,",").concat(c,",0,1,1,").concat(2*l,",0a").concat(l,",").concat(c,",0,1,1,-").concat(2*l,",0");return(0,Qo.jsxs)(Qo.Fragment,{children:[(0,Qo.jsx)(Xd,{d:v,color:o,fill:a}),(0,Qo.jsx)("path",{d:v,strokeWidth:r,width:Fa(t),height:Fa(n),fill:"none",stroke:"var(--palette-".concat(o,")"),strokeDasharray:h,strokeDashoffset:p,pointerEvents:"all"})]})}));function vh(e,t){if(t>e){var n=e/2;return"\n    M0,".concat(n,"\n    a").concat(n,",").concat(n,",0,1,1,").concat(2*n,",0\n    L").concat(e,",").concat(t-n,"\n    a").concat(n,",").concat(n,",0,1,1,-").concat(2*n,",0\n    Z")}var r=t/2;return"\n    M".concat(r,",0\n    L").concat(e-r,",0\n    a").concat(r,",").concat(r,",0,1,1,0,").concat(2*r,"\n    L").concat(r,",").concat(t,"\n    a").concat(r,",").concat(r,",0,1,1,0,").concat(2*-r,"\n    Z")}function gh(e,t){if(e>t){var n=t/2;return Ea(n,n)+2*(e-2*n)}var r=e/2;return Ea(r,r)+2*(t-2*r)}var mh=t.memo((function(e){var t=e.w,n=e.h,r=e.strokeWidth,i=e.dash,o=e.color,a=e.fill,s=vh(t,n),u=gh(t,n),l=Yd(u<64?2*u:u,r,{style:i,snap:4,start:"outset",end:"outset",closed:!0}),c=l.strokeDasharray,d=l.strokeDashoffset;return(0,Qo.jsxs)(Qo.Fragment,{children:[(0,Qo.jsx)(Xd,{d:s,color:o,fill:a}),(0,Qo.jsx)("path",{d:s,strokeWidth:r,width:Fa(t),height:Fa(n),fill:"none",stroke:"var(--palette-".concat(o,")"),strokeDasharray:c,strokeDashoffset:d,pointerEvents:"all"})]})}));function yh(e){var t=e.w,n=e.h,r=e.strokeWidth,i=e.dash,o=e.color,a=e.colors,s=e.fill,u=vh(t,n),l=gh(t,n),c=Yd(l<64?2*l:l,r,{style:i,snap:4,closed:!0}),d=c.strokeDasharray,f=c.strokeDashoffset,h=document.createElementNS("http://www.w3.org/2000/svg","path");return h.setAttribute("d",u),h.setAttribute("stroke-width",r.toString()),h.setAttribute("width",t.toString()),h.setAttribute("height",n.toString()),h.setAttribute("fill","none"),h.setAttribute("stroke",a.fill[o]),h.setAttribute("stroke-dasharray",d),h.setAttribute("stroke-dashoffset",f),Gd(h,$d({d:u,fill:s,color:o,colors:a}))}var bh=t.memo((function(e){var t=e.dash,n=e.fill,r=e.color,i=e.strokeWidth,o=e.outline,a=e.lines,s="M"+o[0]+"L"+o.slice(1)+"Z";return(0,Qo.jsxs)(Qo.Fragment,{children:[(0,Qo.jsx)(Xd,{d:s,fill:n,color:r}),a&&a.map((function(e,t){return(0,Qo.jsx)("path",{className:"tl-hitarea-stroke",fill:"none",d:"M".concat(e[0].x,",").concat(e[0].y,"L").concat(e[1].x,",").concat(e[1].y)},"line_bg_".concat(t))})),(0,Qo.jsxs)("g",{strokeWidth:i,stroke:"var(--palette-".concat(r,")"),fill:"none",pointerEvents:"all",children:[Array.from(Array(o.length)).map((function(e,n){var r=o[n],a=o[(n+1)%o.length],s=Yd(va.Dist(r,a),i,{style:t,start:"outset",end:"outset"}),u=s.strokeDasharray,l=s.strokeDashoffset;return(0,Qo.jsx)("line",{x1:r.x,y1:r.y,x2:a.x,y2:a.y,strokeDasharray:u,strokeDashoffset:l},n)})),a&&a.map((function(e,n){var o=L(e,2),a=o[0],s=o[1],u=Yd(va.Dist(a,s),i,{style:t,start:"skip",end:"outset",snap:"dotted"===t?4:void 0}),l=u.strokeDasharray,c=u.strokeDashoffset;return(0,Qo.jsx)("path",{d:"M".concat(a.x,",").concat(a.y,"L").concat(s.x,",").concat(s.y),stroke:"var(--palette-".concat(r,")"),strokeWidth:i,fill:"none",strokeDasharray:l,strokeDashoffset:c},"line_fg_".concat(n))}))]})]})}));t.memo((function(e){var t=e.id,n=e.w,r=e.h,i=e.strokeWidth,o=e.fill,a=e.color,s=Sh(t,n,r,i),u=kh(t,n,r,i);return(0,Qo.jsxs)(Qo.Fragment,{children:[(0,Qo.jsx)(Xd,{d:s,color:a,fill:o}),(0,Qo.jsx)("path",{d:u,fill:"var(--palette-".concat(a,")"),strokeWidth:0,pointerEvents:"all"})]})}));function wh(e){return{size:1+e,thinning:.25,end:{taper:e},start:{taper:e},streamline:0,smoothing:1,simulatePressure:!1}}function xh(e,t,n,r){for(var i=ae(e),o=t/2,a=n/2,s=Ea(o,a),u=[],l=ba*i(),c=ba+ya/2+Math.abs(i())*ya,d=Math.max(16,s/10),f=0;f<d;f++){var h=f/(d-1),p=l+h*c,v=Math.cos(p),g=Math.sin(p);u.push(new va(o*v+.5*t+.05*i(),a*g+n/2+.05*i(),Math.min(1,.5+Math.abs(.5-(i()>0?pa.easeInOutSine(h):pa.easeInExpo(h)))/2)))}return is(u,wh(r))}function kh(e,t,n,r){var i=wh(r);return Us(ts(ss(xh(e,t,n,r),i),i))}function Sh(e,t,n,r){return Ks(xh(e,t,n,r))}var _h=t.memo((function(e){var t=e.id,n=e.outline,r=e.lines,i=e.fill,o=e.color,a=e.strokeWidth,s=bs(ws(t,n,a/3,2*a,2));if(r){var u,l=X(r);try{for(l.s();!(u=l.n()).done;){var c=L(u.value,2),d=c[0],f=c[1];s+="M".concat(d.x,",").concat(d.y,"L").concat(f.x,",").concat(f.y)}}catch(p){l.e(p)}finally{l.f()}}var h=bs(ws(t,n,0,2*a,1));return(0,Qo.jsxs)(Qo.Fragment,{children:[(0,Qo.jsx)(Xd,{d:h,fill:i,color:o}),(0,Qo.jsx)("path",{d:s,stroke:"var(--palette-".concat(o,")"),strokeWidth:a,fill:"none"})]})}));var Eh=t.memo((function(e){var t=e.w,n=e.h,r=e.strokeWidth,i=e.fill,o=e.color,a=t/2,s=n/2,u=Math.max(0,a),l=Math.max(0,s),c="M".concat(a-u,",").concat(s,"a").concat(u,",").concat(l,",0,1,1,").concat(2*u,",0a").concat(u,",").concat(l,",0,1,1,-").concat(2*u,",0");return(0,Qo.jsxs)(Qo.Fragment,{children:[(0,Qo.jsx)(Xd,{d:c,color:o,fill:i}),(0,Qo.jsx)("path",{d:c,stroke:"var(--palette-".concat(o,")"),strokeWidth:r,fill:"none"})]})}));var Ch=t.memo((function(e){var t=e.w,n=e.h,r=e.strokeWidth,i=e.fill,o=e.color,a=Ph(t,n);return(0,Qo.jsxs)(Qo.Fragment,{children:[(0,Qo.jsx)(Xd,{d:a,color:o,fill:i}),(0,Qo.jsx)("path",{d:a,stroke:"var(--palette-".concat(o,")"),strokeWidth:r,fill:"none"})]})}));function Ph(e,t){var n;if(t>e){var r=e/2;n="\n    M0,".concat(r,"\n    a").concat(r,",").concat(r,",0,1,1,").concat(2*r,",0\n    L").concat(e,",").concat(t-r,"\n    a").concat(r,",").concat(r,",0,1,1,-").concat(2*r,",0\n    Z")}else{var i=t/2;n="\n    M".concat(i,",0\n    L").concat(e-i,",0\n    a").concat(i,",").concat(i,",0,1,1,0,").concat(2*i,"\n    L").concat(i,",").concat(t,"\n    a").concat(i,",").concat(i,",0,1,1,0,").concat(2*-i,"\n    Z")}return n}var Ih=t.memo((function(e){var t=e.outline,n=e.lines,r=e.fill,i=e.color,o=e.strokeWidth,a="M"+t[0]+"L"+t.slice(1)+"Z";if(n){var s,u=X(n);try{for(u.s();!(s=u.n()).done;){var l=L(s.value,2),c=l[0],d=l[1];a+="M".concat(c.x,",").concat(c.y,"L").concat(d.x,",").concat(d.y)}}catch(f){u.e(f)}finally{u.f()}}return(0,Qo.jsxs)(Qo.Fragment,{children:[(0,Qo.jsx)(Xd,{d:a,fill:r,color:i}),(0,Qo.jsx)("path",{d:a,stroke:"var(--palette-".concat(i),strokeWidth:o,fill:"none"})]})}));var Th=51,Mh=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"canEdit",(function(){return!0})),O(B(e),"onEditEnd",(function(t){var n=t.id,r=t.type,i=t.props.text;i.trimEnd()!==t.props.text&&e.editor.updateShapes([{id:n,type:r,props:{text:i.trimEnd()}}])})),O(B(e),"onResize",(function(t,n){var r=n.initialBounds,i=n.handle,o=n.newPoint,a=n.scaleX,s=n.scaleY,u=r.width*a,l=r.height*s,c=0,d=0;if(t.props.text.trim()){var f=Math.max(Math.abs(u),Th),h=Math.max(Math.abs(l),Th);f<Th&&h===Th&&(f=Th),f===Th&&h<Th&&(h=Th);var p=Ah(e.editor,R(R({},t),{},{props:R(R({},t.props),{},{w:f,h:h})})),v=Math.max(Math.abs(u),p.w)*Math.sign(u),g=Math.max(Math.abs(l),p.h)*Math.sign(l);c=Math.abs(v)-Math.abs(u),d=Math.abs(g)-Math.abs(l),u=v,l=g}var m=new va(0,0);a<0&&(m.x+=u),"left"!==i&&"top_left"!==i&&"bottom_left"!==i||(m.x+=a<0?c:-c),s<0&&(m.y+=l),"top"!==i&&"top_left"!==i&&"top_right"!==i||(m.y+=s<0?d:-d);var y=m.rot(t.rotation).add(o);return{x:y.x,y:y.y,props:{w:Math.max(Math.abs(u),1),h:Math.max(Math.abs(l),1),growY:0}}})),O(B(e),"onBeforeCreate",(function(t){if(!t.props.text)return t.props.growY?R(R({},t),{},{props:R(R({},t.props),{},{growY:0})}):void 0;var n=t.props.h,r=Ah(e.editor,t).h,i=null;return r>n?i=r-n:t.props.growY&&(i=0),null!==i?R(R({},t),{},{props:R(R({},t.props),{},{growY:i})}):void 0})),O(B(e),"onBeforeUpdate",(function(t,n){var r=t.props.text.trimEnd(),i=n.props.text.trimEnd();if(r!==i||t.props.font!==n.props.font||t.props.size!==n.props.size){if(r&&!i)return R(R({},n),{},{props:R(R({},n.props),{},{growY:0})});var o=t.props.w,a=t.props.h,s=Ah(e.editor,n),u=s.w,l=s.h;if(!r&&i&&1===i.length){var c=Math.max(o,u),d=Math.max(a,l);return t.props.w<Th&&t.props.h<Th&&(c=Math.max(c,Th),d=Math.max(d,Th),c=Math.max(c,d),d=Math.max(c,d)),R(R({},n),{},{props:R(R({},n.props),{},{w:c,h:d,growY:0})})}var f=null;return l>a?f=l-a:t.props.growY&&(f=0),null!==f?R(R({},n),{},{props:R(R({},n.props),{},{growY:f,w:Math.max(n.props.w,u)})}):u>t.props.w?R(R({},n),{},{props:R(R({},n.props),{},{w:u})}):void 0}})),O(B(e),"onDoubleClick",(function(t){if(e.editor.inputs.altKey)switch(t.props.geo){case"rectangle":return R(R({},t),{},{props:{geo:"check-box"}});case"check-box":return R(R({},t),{},{props:{geo:"rectangle"}})}})),e}return N(n,[{key:"defaultProps",value:function(){return{w:100,h:100,geo:"rectangle",color:"black",labelColor:"black",fill:"none",dash:"draw",size:"m",font:"draw",text:"",align:"middle",verticalAlign:"middle",growY:0,url:""}}},{key:"hitTestLineSegment",value:function(e,t,n){for(var r=this.outline(e),i=0;i<r.length;i++){if(vs(t,n,r[i],r[(i+1)%r.length]))return!0}var o=Oh(e.props,0);if(void 0!==o){var a,s=X(o);try{for(s.s();!(a=s.n()).done;){var u=L(a.value,2);if(vs(t,n,u[0],u[1]))return!0}}catch(l){s.e(l)}finally{s.f()}}return!1}},{key:"hitTestPoint",value:function(e,t){var n=this.outline(e);if("none"===e.props.fill){for(var r=this.editor.zoomLevel,i=kc[e.props.size]/r,o=0;o<n.length;o++){var a=n[o],s=n[(o+1)%n.length];if(va.DistanceToLineSegment(a,s,t)<i)return!0}var u=Oh(e.props,1);if(void 0!==u){var l,c=X(u);try{for(c.s();!(l=c.n()).done;){var d=L(l.value,2),f=d[0],h=d[1];if(va.DistanceToLineSegment(f,h,t)<i)return!0}}catch(p){c.e(p)}finally{c.f()}}return!1}return Ba(t,n)}},{key:"getBounds",value:function(e){return new Wa(0,0,e.props.w,e.props.h+e.props.growY)}},{key:"getCenter",value:function(e){return new va(e.props.w/2,(e.props.h+e.props.growY)/2)}},{key:"getOutline",value:function(e){var t=Math.max(1,e.props.w),n=Math.max(1,e.props.h+e.props.growY),r=t/2,i=n/2;switch(e.props.geo){case"triangle":return[new va(r,0),new va(t,n),new va(0,n)];case"diamond":return[new va(r,0),new va(t,i),new va(r,n),new va(0,i)];case"pentagon":return La(t,n,5);case"hexagon":return La(t,n,6);case"octagon":return La(t,n,8);case"ellipse":var o=Math.pow(r-i,2)/Math.pow(r+i,2),a=ma*(r+i)*(1+3*o/(10+Math.sqrt(4-3*o))),s=Math.max(4,Math.ceil(a/10));s=4*Math.ceil(s/4);for(var u=ba/s,l=Math.cos(u),c=Math.sin(u),d=0,f=1,h=1,p=Array(s),v=0;v<s;v++)p[v]=new va(r+r*f,i+i*d),h=l*f-c*d,d=c*f+l*d,f=h;return p;case"oval":var g=10,m=Array(20);if(n>t)for(var y=0;y<g;y++){var b=ma*y/8-ma,w=ma*y/8;m[y]=new va(r+r*Math.cos(b),r+r*Math.sin(b)),m[y+g]=new va(r+r*Math.cos(w),n-r+r*Math.sin(w))}else for(var x=0;x<g;x++){var k=ma*x/8-ya,S=ya+ma*-x/8;m[x]=new va(t-i+i*Math.cos(k),n-i+i*Math.sin(k)),m[x+g]=new va(i-i*Math.cos(S),n-i+i*Math.sin(S))}return m;case"star":var _=ba/5/2,E=2*Math.floor(5/4),C=10-E,P=2*Math.floor(2.5),I=Math.cos(E*_-ya)*t/2,T=Math.cos(C*_-ya)*t/2,M=Math.sin(0*_-ya)*n/2,A=Math.sin(P*_-ya)*n/2,O=t-Math.abs(I-T),j=n-Math.abs(A-M),R=(t-(t/2+T-(t/2-I)))/2,L=(n-(n/2+M-(n/2-A)))/2,D=(t+O)/2,N=(n+j)/2,z=1*D/2,B=1*N/2;return Array.from(Array(10)).map((function(e,t){var n=t*_-ya;return new va(R+(t%2?z:D)*Math.cos(n),L+(t%2?B:N)*Math.sin(n))}));case"rhombus":var F=Math.min(.38*t,.38*n);return[new va(F,0),new va(t,0),new va(t-F,n),new va(0,n)];case"rhombus-2":var U=Math.min(.38*t,.38*n);return[new va(0,0),new va(t-U,0),new va(t,n),new va(U,n)];case"trapezoid":var K=Math.min(.38*t,.38*n);return[new va(K,0),new va(t-K,0),new va(t,n),new va(0,n)];case"arrow-right":var V=.38*Math.min(t,n),W=.16*n;return[new va(0,W),new va(t-V,W),new va(t-V,0),new va(t,n/2),new va(t-V,n),new va(t-V,n-W),new va(0,n-W)];case"arrow-left":var H=.38*Math.min(t,n),Y=.16*n;return[new va(H,0),new va(H,Y),new va(t,Y),new va(t,n-Y),new va(H,n-Y),new va(H,n),new va(0,n/2)];case"arrow-up":var X=.16*t,q=.38*Math.min(t,n);return[new va(t/2,0),new va(t,q),new va(t-X,q),new va(t-X,n),new va(X,n),new va(X,q),new va(0,q)];case"arrow-down":var $=.16*t,G=.38*Math.min(t,n);return[new va($,0),new va(t-$,0),new va(t-$,n-G),new va(t,n-G),new va(t/2,n),new va(0,n-G),new va($,n-G)];case"check-box":case"x-box":case"rectangle":return[new va(0,0),new va(t,0),new va(t,n),new va(0,n)]}}},{key:"component",value:function(e){var t=this,n=e.id,r=e.type,i=e.props,o=Lf(),a=kc[i.size],s=i.w,u=i.color,l=i.labelColor,c=i.fill,d=i.dash,f=i.growY,h=i.font,p=i.align,v=i.verticalAlign,g=i.size,m=i.text;return(0,Qo.jsxs)(Qo.Fragment,{children:[(0,Qo.jsx)(Hd,{id:n,children:function(){var r=i.h+f;switch(i.geo){case"ellipse":if("solid"===d||"draw"===d&&o)return(0,Qo.jsx)(Eh,{strokeWidth:a,w:s,h:r,color:u,fill:c});if("dashed"===d||"dotted"===d)return(0,Qo.jsx)(ph,{id:n,strokeWidth:a,w:s,h:r,dash:"dashed"===d?d:"s"===g&&o?"dashed":d,color:u,fill:c});if("draw"===d)return(0,Qo.jsx)(Eh,{strokeWidth:a,w:s,h:r,color:u,fill:c});break;case"oval":if("solid"===d||"draw"===d&&o)return(0,Qo.jsx)(Ch,{strokeWidth:a,w:s,h:r,color:u,fill:c});if("dashed"===d||"dotted"===d)return(0,Qo.jsx)(mh,{id:n,strokeWidth:a,w:s,h:r,dash:"dashed"===d?d:"s"===g&&o?"dashed":d,color:u,fill:c});if("draw"===d)return(0,Qo.jsx)(Ch,{strokeWidth:a,w:s,h:r,color:u,fill:c});break;default:var l=t.outline(e),h=Oh(e.props,a);if("solid"===d||"draw"===d&&o)return(0,Qo.jsx)(Ih,{fill:c,color:u,strokeWidth:a,outline:l,lines:h});if("dashed"===d||"dotted"===d)return(0,Qo.jsx)(bh,{dash:"dashed"===d?d:"s"===g&&o?"dashed":d,fill:c,color:u,strokeWidth:a,outline:l,lines:h});if("draw"===d)return(0,Qo.jsx)(_h,{id:n,fill:c,color:u,strokeWidth:a,outline:l,lines:h})}}()}),(0,Qo.jsx)(hh,{id:n,type:r,font:h,fill:c,size:g,align:p,verticalAlign:v,text:m,labelColor:l,wrap:!0}),e.props.url&&(0,Qo.jsx)(Tf,{url:e.props.url,zoomLevel:this.editor.zoomLevel})]})}},{key:"indicator",value:function(e){var t=e.id,n=e.props,r=n.w,i=n.h,o=n.growY,a=n.size,s=Lf(),u=kc[a];switch(n.geo){case"ellipse":return"draw"!==n.dash||s?(0,Qo.jsx)("ellipse",{cx:r/2,cy:(i+o)/2,rx:r/2,ry:(i+o)/2}):(0,Qo.jsx)("path",{d:Sh(t,r,i+o,u)});case"oval":return(0,Qo.jsx)("path",{d:Ph(r,i+o)});default:var l,c=this.outline(e);if("draw"!==n.dash||s)l="M"+c[0]+"L"+c.slice(1)+"Z";else l=bs(ws(t,c,0,2*u,1));var d=Oh(e.props,u);if(d){var f,h=X(d);try{for(h.s();!(f=h.n()).done;){var p=L(f.value,2),v=p[0],g=p[1];l+="M".concat(v.x,",").concat(v.y,"L").concat(g.x,",").concat(g.y)}}catch(m){h.e(m)}finally{h.f()}}return(0,Qo.jsx)("path",{d:l})}}},{key:"toSvg",value:function(e,t,n){var r,i=e.id,o=e.props,a=kc[o.size];switch(o.geo){case"ellipse":switch(o.dash){case"draw":r=function(e){var t=e.id,n=e.w,r=e.h,i=e.strokeWidth,o=e.fill,a=e.color,s=e.colors,u=document.createElementNS("http://www.w3.org/2000/svg","path");return u.setAttribute("d",kh(t,n,r,i)),u.setAttribute("fill",s.fill[a]),Gd(u,$d({d:Sh(t,n,r,i),fill:o,color:a,colors:s}))}({id:i,w:o.w,h:o.h,color:o.color,fill:o.fill,strokeWidth:a,colors:n});break;case"solid":r=function(e){var t=e.w,n=e.h,r=e.strokeWidth,i=e.fill,o=e.color,a=e.colors,s=t/2,u=n/2,l=Math.max(0,s),c=Math.max(0,u),d="M".concat(s-l,",").concat(u,"a").concat(l,",").concat(c,",0,1,1,").concat(2*l,",0a").concat(l,",").concat(c,",0,1,1,-").concat(2*l,",0"),f=document.createElementNS("http://www.w3.org/2000/svg","path");return f.setAttribute("d",d),f.setAttribute("stroke-width",r.toString()),f.setAttribute("width",t.toString()),f.setAttribute("height",n.toString()),f.setAttribute("fill","none"),f.setAttribute("stroke",a.fill[o]),Gd(f,$d({d:d,fill:i,color:o,colors:a}))}({strokeWidth:a,w:o.w,h:o.h,color:o.color,fill:o.fill,colors:n});break;default:r=function(e){var t=e.w,n=e.h,r=e.strokeWidth,i=e.dash,o=e.color,a=e.colors,s=e.fill,u=t/2,l=n/2,c=Math.max(0,u-r/2),d=Math.max(0,l-r/2),f=Ea(c,d),h=Yd(f<64?2*f:f,r,{style:i,snap:4,closed:!0}),p=h.strokeDasharray,v=h.strokeDashoffset,g="M".concat(u-c,",").concat(l,"a").concat(c,",").concat(d,",0,1,1,").concat(2*c,",0a").concat(c,",").concat(d,",0,1,1,-").concat(2*c,",0"),m=document.createElementNS("http://www.w3.org/2000/svg","path");return m.setAttribute("d",g),m.setAttribute("stroke-width",r.toString()),m.setAttribute("width",t.toString()),m.setAttribute("height",n.toString()),m.setAttribute("fill","none"),m.setAttribute("stroke",a.fill[o]),m.setAttribute("stroke-dasharray",p),m.setAttribute("stroke-dashoffset",v),Gd(m,$d({d:g,fill:s,color:o,colors:a}))}({id:i,strokeWidth:a,w:o.w,h:o.h,dash:o.dash,color:o.color,fill:o.fill,colors:n})}break;case"oval":switch(o.dash){case"draw":default:r=yh({id:i,strokeWidth:a,w:o.w,h:o.h,dash:o.dash,color:o.color,fill:o.fill,colors:n});break;case"solid":r=function(e){var t=e.w,n=e.h,r=e.strokeWidth,i=e.fill,o=e.color,a=e.colors,s=Ph(t,n),u=document.createElementNS("http://www.w3.org/2000/svg","path");return u.setAttribute("d",s),u.setAttribute("stroke-width",r.toString()),u.setAttribute("width",t.toString()),u.setAttribute("height",n.toString()),u.setAttribute("fill","none"),u.setAttribute("stroke",a.fill[o]),Gd(u,$d({d:s,fill:i,color:o,colors:a}))}({strokeWidth:a,w:o.w,h:o.h,color:o.color,fill:o.fill,colors:n})}break;default:var s=this.outline(e),u=Oh(e.props,a);switch(o.dash){case"draw":r=function(e){var t=e.id,n=e.outline,r=e.lines,i=e.fill,o=e.color,a=e.colors,s=e.strokeWidth,u=bs(ws(t,n,s/3,2*s,2));if(r){var l,c=X(r);try{for(c.s();!(l=c.n()).done;){var d=L(l.value,2),f=d[0],h=d[1];u+="M".concat(f.x,",").concat(f.y,"L").concat(h.x,",").concat(h.y)}}catch(g){c.e(g)}finally{c.f()}}var p=bs(ws(t,n,0,2*s,1)),v=document.createElementNS("http://www.w3.org/2000/svg","path");return v.setAttribute("d",u),v.setAttribute("fill","none"),v.setAttribute("stroke",a.fill[o]),v.setAttribute("stroke-width",s.toString()),Gd(v,$d({d:p,fill:i,color:o,colors:a}))}({id:i,fill:o.fill,color:o.color,strokeWidth:a,outline:s,lines:u,colors:n});break;case"solid":r=function(e){var t=e.outline,n=e.lines,r=e.fill,i=e.color,o=e.strokeWidth,a=e.colors,s="M"+t[0]+"L"+t.slice(1)+"Z",u=s,l=s;if(n){var c,d=X(n);try{for(d.s();!(c=d.n()).done;){var f=L(c.value,2),h=f[0],p=f[1];l+="M".concat(h.x,",").concat(h.y,"L").concat(p.x,",").concat(p.y)}}catch(g){d.e(g)}finally{d.f()}}var v=document.createElementNS("http://www.w3.org/2000/svg","path");return v.setAttribute("d",l),v.setAttribute("stroke-width",o.toString()),v.setAttribute("stroke",a.fill[i]),v.setAttribute("fill","none"),Gd(v,$d({d:u,fill:r,color:i,colors:a}))}({fill:o.fill,color:o.color,strokeWidth:a,outline:s,lines:u,colors:n});break;default:r=function(e){var t=e.dash,n=e.fill,r=e.color,i=e.colors,o=e.strokeWidth,a=e.outline,s=e.lines,u=document.createElementNS("http://www.w3.org/2000/svg","g");if(u.setAttribute("stroke-width",o.toString()),u.setAttribute("stroke",i.fill[r]),u.setAttribute("fill","none"),Array.from(Array(a.length)).forEach((function(e,n){var r=a[n],i=a[(n+1)%a.length],s=Yd(va.Dist(r,i),o,{style:t}),l=s.strokeDasharray,c=s.strokeDashoffset,d=document.createElementNS("http://www.w3.org/2000/svg","line");d.setAttribute("x1",r.x.toString()),d.setAttribute("y1",r.y.toString()),d.setAttribute("x2",i.x.toString()),d.setAttribute("y2",i.y.toString()),d.setAttribute("stroke-dasharray",l.toString()),d.setAttribute("stroke-dashoffset",c.toString()),u.appendChild(d)})),s){var l,c=X(s);try{for(c.s();!(l=c.n()).done;){var d=L(l.value,2),f=d[0],h=d[1],p=Yd(va.Dist(f,h),o,{style:t,start:"skip",end:"skip",snap:"dotted"===t?4:2}),v=p.strokeDasharray,g=p.strokeDashoffset,m=document.createElementNS("http://www.w3.org/2000/svg","line");m.setAttribute("x1",f.x.toString()),m.setAttribute("y1",f.y.toString()),m.setAttribute("x2",h.x.toString()),m.setAttribute("y2",h.y.toString()),m.setAttribute("stroke-dasharray",v.toString()),m.setAttribute("stroke-dashoffset",g.toString()),u.appendChild(m)}}catch(b){c.e(b)}finally{c.f()}}var y=$d({d:"M"+a[0]+"L"+a.slice(1)+"Z",fill:n,color:r,colors:i});return Gd(u,y)}({dash:o.dash,fill:o.fill,color:o.color,strokeWidth:a,outline:s,lines:u,colors:n})}}if(o.text){var l=this.bounds(e),c=fh({editor:this.editor,shape:e,font:t,bounds:l}),d=c.cloneNode(!0);d.setAttribute("fill",n.fill[e.props.labelColor]),d.setAttribute("stroke","none");var f=c.cloneNode(!0);f.setAttribute("stroke-width","2"),f.setAttribute("fill",n.background),f.setAttribute("stroke",n.background);var h=document.createElementNS("http://www.w3.org/2000/svg","g");if(h.append(f),h.append(d),"g"===r.nodeName)return r.appendChild(h),r;var p=document.createElementNS("http://www.w3.org/2000/svg","g");return p.appendChild(r),p.appendChild(h),p}return r}}]),n}(vc);function Ah(e,t){var n=t.props.text.trimEnd();if(!n)return{w:0,h:0};var r=e.textMeasure.measureText("w",R(R({},xc),{},{fontFamily:Cc[t.props.font],fontSize:_c[t.props.size],width:"fit-content",maxWidth:"100px"})),i=e.textMeasure.measureText(n,R(R({},xc),{},{fontFamily:Cc[t.props.font],fontSize:_c[t.props.size],width:"fit-content",minWidth:r.w+"px",maxWidth:Math.max(0,Math.ceil(r.w+{s:2,m:3.5,l:5,xl:10}[t.props.size]),Math.ceil(t.props.w-32))+"px"}));return{w:i.w+32,h:i.h+32}}function Oh(e,t){switch(e.geo){case"x-box":return function(e,t,n,r){var i="draw"===r?.62:0;if("dashed"===r)return[[new va(0,0),new va(e/2,t/2)],[new va(e,t),new va(e/2,t/2)],[new va(0,t),new va(e/2,t/2)],[new va(e,0),new va(e/2,t/2)]];return[[new va(n*i,n*i),new va(e-n*i,t-n*i)],[new va(n*i,t-n*i),new va(e-n*i,n*i)]]}(e.w,e.h,t,e.dash);case"check-box":return function(e,t){var n=.82*Math.min(e,t),r=(e-n)/2,i=(t-n)/2;return[[new va(r+.25*n,i+.52*n),new va(r+.45*n,i+.82*n)],[new va(r+.45*n,i+.82*n),new va(r+.82*n,i+.22*n)]]}(e.w,e.h);default:return}}O(Mh,"type","geo");var jh=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"onPointerDown",(function(t){e.parent.transition("pointing",t)})),O(B(e),"onEnter",(function(){e.editor.setCursor({type:"cross"})})),O(B(e),"onKeyUp",(function(t){if("Enter"===t.key){var n=e.editor.onlySelectedShape;n&&e.editor.isShapeOfType(n,Mh)&&(e.editor.mark("editing shape"),e.editor.setEditingId(n.id),e.editor.setSelectedTool("select.editing_shape",R(R({},t),{},{target:"shape",shape:n})))}})),O(B(e),"onCancel",(function(){e.editor.setSelectedTool("select")})),e}return N(n)}(Vd);O(jh,"id","idle");var Rh=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"onPointerMove",(function(t){if(e.editor.inputs.isDragging){var n=e.editor.inputs.originPagePoint,r=li();e.editor.mark("creating"),e.editor.createShapes([{id:r,type:"geo",x:n.x,y:n.y,props:{w:1,h:1,geo:e.editor.getStyleForNextShape(fo)}}]),e.editor.select(r),e.editor.setSelectedTool("select.resizing",R(R({},t),{},{target:"selection",handle:"bottom_right",isCreating:!0,creationCursorOffset:{x:1,y:1},onInteractionEnd:"geo"}))}})),O(B(e),"onPointerUp",(function(){e.complete()})),O(B(e),"onCancel",(function(){e.cancel()})),O(B(e),"onComplete",(function(){e.complete()})),O(B(e),"onInterrupt",(function(){e.cancel()})),e}return N(n,[{key:"complete",value:function(){var e=this.editor.inputs.originPagePoint,t=li();this.editor.mark("creating"),this.editor.createShapes([{id:t,type:"geo",x:e.x,y:e.y,props:{geo:this.editor.getStyleForNextShape(fo),w:1,h:1}}]);var n=this.editor.getShapeById(t);if(n){var r="star"===n.props.geo?function(e,t,n){var r=ba/e/2,i=2*Math.floor(e/4),o=2*e-i,a=2*Math.floor(e/2),s=Math.cos(i*r-ya)*t/2,u=Math.cos(o*r-ya)*t/2,l=Math.sin(0*r-ya)*n/2,c=Math.sin(a*r-ya)*n/2;return new Wa(0,0,s-u,c-l)}(5,200,200):new Wa(0,0,200,200),i=this.editor.getDeltaInParentSpace(n,r.center);this.editor.select(t),this.editor.updateShapes([{id:n.id,type:"geo",x:n.x-i.x,y:n.y-i.y,props:{geo:this.editor.getStyleForNextShape(fo),w:r.width,h:r.height}}]),this.editor.instanceState.isToolLocked?this.parent.transition("idle",{}):this.editor.setSelectedTool("select",{})}}},{key:"cancel",value:function(){this.parent.transition("idle",{})}}]),n}(Vd);O(Rh,"id","pointing");var Lh=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"shapeType",Mh),e}return N(n)}(Vd);O(Lh,"id","geo"),O(Lh,"initial","idle"),O(Lh,"children",(function(){return[jh,Rh]}));var Dh=Ud("geo",{util:Mh,props:ho,migrations:bo,tool:Lh}),Nh=Ud("group",{util:ah,props:{},migrations:wo}),zh=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"shapeType",Hf),O(B(e),"onExit",(function(){e.children.drawing.initialShape=void 0})),e}return N(n)}(Vd);O(zh,"id","highlight"),O(zh,"initial","idle"),O(zh,"children",(function(){return[Jf,Qf]}));var Bh=Ud("highlight",{util:Hf,props:xo,migrations:ko,tool:zh});function Fh(e){var t=da();return la("isCropping",(function(){return t.croppingId===e}),[t,e])}var Uh=function(){var e=na(ea().mark((function e(t){return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new Image;r.onload=function(){return e(r)},r.onerror=function(){return n(new Error("Failed to load image"))},r.crossOrigin="anonymous",r.src=t})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Kh=function(){var e=na(ea().mark((function e(t){var n,r,i;return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Uh(t);case 2:if(n=e.sent,(r=document.createElement("canvas")).width=n.width,r.height=n.height,i=r.getContext("2d")){e.next=9;break}return e.abrupt("return");case 9:return i.drawImage(n,0,0),e.abrupt("return",r.toDataURL());case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Vh(e){return Wh.apply(this,arguments)}function Wh(){return Wh=na(ea().mark((function e(t){var n,r;return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.blob();case 5:return r=e.sent,e.abrupt("return",new Promise((function(e,t){var n=new FileReader;n.onloadend=function(){return e(n.result)},n.onerror=t,n.readAsDataURL(r)})));case 7:case"end":return e.stop()}}),e)}))),Wh.apply(this,arguments)}var Hh=function(e){U(r,e);var n=W(r);function r(){var e;z(this,r);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return O(B(e=n.call.apply(n,[this].concat(i))),"isAspectRatioLocked",(function(){return!0})),O(B(e),"canCrop",(function(){return!0})),O(B(e),"onDoubleClick",(function(t){var n=t.props.assetId?e.editor.getAssetById(t.props.assetId):void 0;n&&(n.props.src&&"mimeType"in n.props&&"image/gif"===n.props.mimeType&&e.editor.updateShapes([{type:"image",id:t.id,props:{playing:!t.props.playing}}]))})),O(B(e),"onDoubleClickEdge",(function(t){var n=t.props;if(n&&e.editor.croppingId===t.id){var r=ce(n.crop)||{topLeft:{x:0,y:0},bottomRight:{x:1,y:1}},i=1/(r.bottomRight.x-r.topLeft.x)*t.props.w,o=1/(r.bottomRight.y-r.topLeft.y)*t.props.h,a=new va(r.topLeft.x*i,r.topLeft.y*o).rot(t.rotation),s={id:t.id,type:t.type,x:t.x-a.x,y:t.y-a.y,props:{crop:{topLeft:{x:0,y:0},bottomRight:{x:1,y:1}},w:i,h:o}};e.editor.updateShapes([s])}})),e}return N(r,[{key:"defaultProps",value:function(){return{w:100,h:100,assetId:null,playing:!0,url:"",crop:null}}},{key:"component",value:function(e){var n,r,i=this,o=Yh(e),a=Fh(e.id),s=Ls(),u=L((0,t.useState)(""),2),l=u[0],c=u[1],d=e.props,f=d.w,h=d.h,p=e.props.assetId?this.editor.getAssetById(e.props.assetId):void 0;if("bookmark"===(null===p||void 0===p?void 0:p.type))throw Error("Bookmark assets can't be rendered as images");var v=la("onlySelectedShape",(function(){var t;return e.id===(null===(t=i.editor.onlySelectedShape)||void 0===t?void 0:t.id)}),[this.editor])&&a&&this.editor.isInAny("select.crop","select.cropping","select.pointing_crop_handle"),g=s&&((null===p||void 0===p||null===(n=p.props.mimeType)||void 0===n?void 0:n.includes("video"))||(null===p||void 0===p||null===(r=p.props.mimeType)||void 0===r?void 0:r.includes("gif")));return(0,t.useEffect)((function(){if(null!==p&&void 0!==p&&p.props.src&&"mimeType"in p.props&&"image/gif"===(null===p||void 0===p?void 0:p.props.mimeType)){var e=!1,t=function(){var t=na(ea().mark((function t(){var n;return ea().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Kh(p.props.src);case 2:if(n=t.sent,!e){t.next=5;break}return t.abrupt("return");case 5:n&&c(n);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return t(),function(){e=!0}}}),[s,null===p||void 0===p?void 0:p.props]),(0,Qo.jsxs)(Qo.Fragment,{children:[(null===p||void 0===p?void 0:p.props.src)&&v&&(0,Qo.jsx)("div",{style:o,children:(0,Qo.jsx)("div",{className:"tl-image tl-image-".concat(e.id,"-crop"),style:{opacity:.1,backgroundImage:"url(".concat(!e.props.playing||g?l:p.props.src,")")},draggable:!1})}),(0,Qo.jsx)(ic,{id:e.id,style:{overflow:"hidden"},children:(0,Qo.jsxs)("div",{className:"tl-image-container",style:o,children:[null!==p&&void 0!==p&&p.props.src?(0,Qo.jsx)("div",{className:"tl-image tl-image-".concat(e.id),style:{backgroundImage:"url(".concat(!e.props.playing||g?l:p.props.src,")")},draggable:!1}):(0,Qo.jsx)("g",{transform:"translate(".concat((f-38)/2,", ").concat((h-38)/2,")"),children:(0,Qo.jsx)(mu,{})}),(null===p||void 0===p?void 0:p.props.isAnimated)&&!e.props.playing&&(0,Qo.jsx)("div",{className:"tl-image__tg",children:"GIF"})]})}),"url"in e.props&&e.props.url&&(0,Qo.jsx)(Tf,{url:e.props.url,zoomLevel:this.editor.zoomLevel})]})}},{key:"indicator",value:function(e){return Fh(e.id)?null:(0,Qo.jsx)("rect",{width:Fa(e.props.w),height:Fa(e.props.h)})}},{key:"toSvg",value:function(){var e=na(ea().mark((function e(t){var n,r,i,o,a,s,u,l,c,d,f;return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=document.createElementNS("http://www.w3.org/2000/svg","g"),r=t.props.assetId?this.editor.getAssetById(t.props.assetId):null,!(i=(null===r||void 0===r?void 0:r.props.src)||"")||!i.startsWith("http")){e.next=10;break}return e.next=6,Vh(i);case 6:if(e.t0=e.sent,e.t0){e.next=9;break}e.t0="";case 9:i=e.t0;case 10:return(o=document.createElementNS("http://www.w3.org/2000/svg","image")).setAttributeNS("http://www.w3.org/1999/xlink","href",i),a=Yh(t),s=t.props.crop,a&&s?(u=a.transform,l=a.width,c=a.height,d=[new va(s.topLeft.x*l,s.topLeft.y*c),new va(s.bottomRight.x*l,s.topLeft.y*c),new va(s.bottomRight.x*l,s.bottomRight.y*c),new va(s.topLeft.x*l,s.bottomRight.y*c)],(f=document.createElementNS("http://www.w3.org/2000/svg","g")).style.clipPath="polygon(".concat(d.map((function(e){return"".concat(e.x,"px ").concat(e.y,"px")})).join(","),")"),o.setAttribute("width",l.toString()),o.setAttribute("height",c.toString()),o.style.transform=u,f.appendChild(o),n.appendChild(f)):(o.setAttribute("width",t.props.w.toString()),o.setAttribute("height",t.props.h.toString()),n.appendChild(o)),e.abrupt("return",n);case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(vc);function Yh(e){var t=e.props.crop,n=null===t||void 0===t?void 0:t.topLeft;if(n){var r=1/(t.bottomRight.x-t.topLeft.x)*e.props.w,i=1/(t.bottomRight.y-t.topLeft.y)*e.props.h,o=-n.x*r,a=-n.y*i;return{transform:"translate(".concat(o,"px, ").concat(a,"px)"),width:r,height:i}}}O(Hh,"type","image");var Xh=Ud("image",{util:Hh,props:Co,migrations:Io});function qh(e){for(var t=e.segments,n=[],r=0,i=t.length;r<i;r++){var o=t[r].lut,a=o.length-1;r>0?n.push(va.Lrp(o[0],o[1],.25)):n.push(o[0]);for(var s=1;s<a;s++)n.push(o[s]);r<i-1?n.push(va.Lrp(o[a-1],o[a],.75)):n.push(o[a])}return n}function $h(e){return{size:e,thinning:.4,streamline:0,smoothing:.5,simulatePressure:!0,last:!0}}function Gh(e,t,n){return is(qh(t),$h(n))}function Qh(e,t,n){var r=function(e,t,n){var r=$h(n);return ts(ss(Gh(0,t,n),r),r)}(0,t,n);return Us(r)}function Jh(e,t,n,r){switch(e.props.dash){case"draw":return function(e){e.shape;var t=e.strokeWidth,n=e.spline,r=e.color,i=Qh(0,n,t),o=document.createElementNS("http://www.w3.org/2000/svg","path");return o.setAttribute("stroke-width","0"),o.setAttribute("stroke","none"),o.setAttribute("fill",r),o.setAttribute("d",i),o}({shape:e,strokeWidth:r,spline:t,color:n});case"solid":return function(e){var t=e.strokeWidth,n=e.spline,r=e.color,i=n.path,o=document.createElementNS("http://www.w3.org/2000/svg","path");return o.setAttribute("stroke-width",t.toString()),o.setAttribute("stroke",r),o.setAttribute("fill","none"),o.setAttribute("d",i),o}({strokeWidth:r,spline:t,color:n});default:return function(e){var t=e.dash,n=e.strokeWidth,r=e.spline,i=e.color,o=r.segments,a=document.createElementNS("http://www.w3.org/2000/svg","g");return a.setAttribute("stroke",i),a.setAttribute("stroke-width",n.toString()),o.forEach((function(e,r){var i=document.createElementNS("http://www.w3.org/2000/svg","path"),s=Yd(e.length,n,{style:t,start:r>0?"outset":"none",end:r<o.length-1?"outset":"none"}),u=s.strokeDasharray,l=s.strokeDashoffset;i.setAttribute("stroke-dasharray",u.toString()),i.setAttribute("stroke-dashoffset",l.toString()),i.setAttribute("d",e.path),i.setAttribute("fill","none"),a.appendChild(i)})),a}({strokeWidth:r,spline:t,dash:e.props.dash,color:n})}}var Zh=new yc,ep=new yc,tp=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"hideResizeHandles",(function(){return!0})),O(B(e),"hideRotateHandle",(function(){return!0})),O(B(e),"hideSelectionBoundsBg",(function(){return!0})),O(B(e),"hideSelectionBoundsFg",(function(){return!0})),O(B(e),"isClosed",(function(){return!1})),O(B(e),"onResize",(function(e,t){var n=t.scaleX,r=t.scaleY,i=ce(e.props.handles);return Object.values(e.props.handles).forEach((function(e){var t=e.id,o=e.x,a=e.y;i[t].x=o*n,i[t].y=a*r})),{props:{handles:i}}})),O(B(e),"onHandleChange",(function(e,t){var n=t.handle,r=ce(e);switch(n.id){case"start":case"end":r.props.handles[n.id]=R(R({},r.props.handles[n.id]),{},{x:n.x,y:n.y});break;default:var i="handle:"+n.index,o=e.props.handles[i];r.props.handles[i]=o?R(R({},o),{},{x:n.x,y:n.y}):{id:i,type:"vertex",canBind:!1,index:n.index,x:n.x,y:n.y}}return r})),e}return N(n,[{key:"defaultProps",value:function(){return{dash:"draw",size:"m",color:"black",spline:"line",handles:{start:{id:"start",type:"vertex",canBind:!1,index:"a1",x:0,y:0},end:{id:"end",type:"vertex",canBind:!1,index:"a2",x:0,y:0}}}}},{key:"getBounds",value:function(e){return np(e).bounds}},{key:"getCenter",value:function(e){return this.bounds(e).center}},{key:"getHandles",value:function(e){return ep.get(e.props,(function(){for(var t=e.props.handles,n=np(e),r=Object.values(t).sort(T),i=r.slice(),o=0;o<n.segments.length;o++){var a=n.segments[o].midPoint,s=C(r[o].index,r[o+1].index);i.push({id:"mid-".concat(o),type:"create",index:s,x:a.x,y:a.y})}return i.sort(T)}))}},{key:"getOutline",value:function(e){return qh(np(e))}},{key:"getOutlineSegments",value:function(e){var t=np(e);return"cubic"===e.props.spline?t.segments.map((function(e){return e.lut})):t.segments.map((function(e){return[e.getPoint(0),e.getPoint(1)]}))}},{key:"hitTestPoint",value:function(e,t){var n=this.editor.zoomLevel,r=kc[e.props.size]/n;return function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,r=t.length,i=1;i<r;i++){var o=t[i-1],a=t[i];if(va.DistanceToLineSegment(o,a,e)<n)return!0}return!1}(t,this.outline(e),r)}},{key:"hitTestLineSegment",value:function(e,t,n){return null!==cs(t,n,this.outline(e))}},{key:"component",value:function(e){var t=Lf(),n=np(e),r=kc[e.props.size],i=e.props,o=i.dash,a=i.color;if("line"===e.props.spline){if("solid"===o){var s=n.points,u="M"+s[0]+"L"+s.slice(1);return(0,Qo.jsxs)(Hd,{id:e.id,children:[(0,Qo.jsx)(Xd,{d:u,fill:"none",color:a}),(0,Qo.jsx)("path",{d:u,stroke:"var(--palette-".concat(a,")"),strokeWidth:r,fill:"none"})]})}if("dashed"===o||"dotted"===o){var l=n.points,c="M"+l[0]+"L"+l.slice(1);return(0,Qo.jsxs)(Hd,{id:e.id,children:[(0,Qo.jsx)(Xd,{d:c,fill:"none",color:a}),(0,Qo.jsx)("g",{stroke:"var(--palette-".concat(a,")"),strokeWidth:r,children:n.segments.map((function(e,t){var i=Yd(e.length,r,{style:o,start:t>0?"outset":"none",end:t<n.segments.length-1?"outset":"none"}),a=i.strokeDasharray,s=i.strokeDashoffset;return(0,Qo.jsx)("path",{strokeDasharray:a,strokeDashoffset:s,d:e.path,fill:"none"},t)}))})]})}if("draw"===o){var d=n.points,f=L(xs(e.id,d,r),2),h=f[0],p=f[1];return(0,Qo.jsxs)(Hd,{id:e.id,children:[(0,Qo.jsx)(Xd,{d:h,fill:"none",color:a}),(0,Qo.jsx)("path",{d:p,stroke:"var(--palette-".concat(a,")"),strokeWidth:r,fill:"none"})]})}}if("cubic"===e.props.spline){var v=n.path;if("solid"===o||"draw"===o&&t)return(0,Qo.jsxs)(Hd,{id:e.id,children:[(0,Qo.jsx)(Xd,{d:v,fill:"none",color:a}),(0,Qo.jsx)("path",{strokeWidth:r,stroke:"var(--palette-".concat(a,")"),fill:"none",d:v})]});if("dashed"===o||"dotted"===o)return(0,Qo.jsxs)(Hd,{id:e.id,children:[(0,Qo.jsx)(Xd,{d:v,fill:"none",color:a}),(0,Qo.jsx)("g",{stroke:"var(--palette-".concat(a,")"),strokeWidth:r,children:n.segments.map((function(e,t){var i=Yd(e.length,r,{style:o,start:t>0?"outset":"none",end:t<n.segments.length-1?"outset":"none"}),a=i.strokeDasharray,s=i.strokeDashoffset;return(0,Qo.jsx)("path",{strokeDasharray:a,strokeDashoffset:s,d:e.path,fill:"none"},t)}))})]});if("draw"===o)return(0,Qo.jsxs)(Hd,{id:e.id,children:[(0,Qo.jsx)(Xd,{d:v,fill:"none",color:a}),(0,Qo.jsx)("path",{d:Qh(0,n,r),strokeWidth:1,stroke:"var(--palette-".concat(a,")"),fill:"var(--palette-".concat(a,")")})]})}}},{key:"indicator",value:function(e){var t,n=kc[e.props.size],r=np(e),i=e.props.dash;if("line"===e.props.spline){var o=r.points;if("solid"===i||"dotted"===i||"dashed"===i)t="M"+o[0]+"L"+o.slice(1);else t=L(xs(e.id,o,n),1)[0]}else t=function(e,t,n){return"draw"===e.props.dash?Ks(Gh(0,t,n)):t.path}(e,r,n);return(0,Qo.jsx)("path",{d:t})}},{key:"toSvg",value:function(e,t,n){var r=e.props,i=r.color,o=r.size,a=n.fill[i];return Jh(e,np(e),a,kc[o])}}]),n}(hc);function np(e){return Zh.get(e.props,(function(){var t=e.props,n=t.spline,r=t.handles,i=Object.values(r).sort(T).map(va.From);switch(n){case"cubic":return new Ga(i,2===i.length?2:1.2,20);case"line":return new Za(i)}}))}O(tp,"type","line");var rp=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"shapeId",""),O(B(e),"onEnter",(function(t){e.shapeId=t.shapeId,e.editor.setCursor({type:"cross"})})),O(B(e),"onPointerDown",(function(){e.parent.transition("pointing",{shapeId:e.shapeId})})),O(B(e),"onCancel",(function(){e.editor.setSelectedTool("select")})),e}return N(n)}(Vd);O(rp,"id","idle");var ip=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"shape",{}),O(B(e),"markPointId",""),O(B(e),"onEnter",(function(t){var n=e.editor.inputs,r=n.currentPagePoint;e.markPointId=e.editor.mark("creating");var i=!1;if(t.shapeId){var o=e.editor.getShapeById(t.shapeId);o&&(i=!0,e.shape=o)}if(n.shiftKey&&i){var a,s,u,l=e.editor.getShapeUtil(e.shape).handles(e.shape).filter((function(e){return"vertex"===e.type})).sort(T),c=l[l.length-1],d=Ja.applyToPoint(e.editor.getParentTransform(e.shape),new va(e.shape.x,e.shape.y));2===l.length&&1===l[1].x&&1===l[1].y?(a=l[1].index,s=l[1].id,u=R(R({},l[1]),{},{x:r.x-d.x,y:r.y-d.y})):(s="handle:"+(a=P(c.index)),u={x:r.x-d.x,y:r.y-d.y,index:a,canBind:!1,type:"vertex",id:s});var f=_e(e.shape.props.handles);f[u.id]=u,e.editor.updateShapes([{id:e.shape.id,type:e.shape.type,props:{handles:f}}])}else{var h=li();e.editor.createShapes([{id:h,type:"line",x:r.x,y:r.y}]),e.editor.select(h),e.shape=e.editor.getShapeById(h)}})),O(B(e),"onPointerMove",(function(){if(e.shape&&e.editor.inputs.isDragging){var t,n=e.editor.getShapeUtil(e.shape),r=null===(t=n.handles)||void 0===t?void 0:t.call(n,e.shape);if(!r)throw e.editor.bailToMark("creating"),Error("No handles found");e.editor.setSelectedTool("select.dragging_handle",{shape:e.shape,isCreating:!0,handle:G(r),onInteractionEnd:"line"})}})),O(B(e),"onPointerUp",(function(){e.complete()})),O(B(e),"onCancel",(function(){e.cancel()})),O(B(e),"onComplete",(function(){e.complete()})),O(B(e),"onInterrupt",(function(){e.parent.transition("idle",{}),e.editor.bailToMark("creating"),e.editor.snaps.clear()})),e}return N(n,[{key:"complete",value:function(){this.parent.transition("idle",{shapeId:this.shape.id}),this.editor.snaps.clear()}},{key:"cancel",value:function(){this.editor.bailToMark(this.markPointId),this.parent.transition("idle",{shapeId:this.shape.id}),this.editor.snaps.clear()}}]),n}(Vd);O(ip,"id","pointing");var op=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"shapeType",tp),e}return N(n)}(Vd);O(op,"id","line"),O(op,"initial","idle"),O(op,"children",(function(){return[rp,ip]}));var ap=Ud("line",{util:tp,props:Ao,migrations:Oo,tool:op}),sp=200,up=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"canEdit",(function(){return!0})),O(B(e),"hideResizeHandles",(function(){return!0})),O(B(e),"hideSelectionBoundsBg",(function(){return!0})),O(B(e),"hideSelectionBoundsFg",(function(){return!0})),O(B(e),"onBeforeCreate",(function(t){return lp(e.editor,t,t.props.growY)})),O(B(e),"onBeforeUpdate",(function(t,n){if(t.props.text!==n.props.text||t.props.font!==n.props.font||t.props.size!==n.props.size)return lp(e.editor,n,t.props.growY)})),O(B(e),"onEditEnd",(function(t){var n=t.id,r=t.type,i=t.props.text;i.trimEnd()!==t.props.text&&e.editor.updateShapes([{id:n,type:r,props:{text:i.trimEnd()}}])})),e}return N(n,[{key:"defaultProps",value:function(){return{color:"black",size:"m",text:"",font:"draw",align:"middle",verticalAlign:"middle",growY:0,url:""}}},{key:"getHeight",value:function(e){return sp+e.props.growY}},{key:"getBounds",value:function(e){var t=this.getHeight(e);return new Wa(0,0,sp,t)}},{key:"getOutline",value:function(e){return this.bounds(e).corners}},{key:"getCenter",value:function(e){return new va(100,this.getHeight(e)/2)}},{key:"component",value:function(e){var t=e.id,n=e.type,r=e.props,i=r.color,o=r.font,a=r.size,s=r.align,u=r.text,l=r.verticalAlign,c="black"===i?"yellow":i;return(0,Qo.jsxs)(Qo.Fragment,{children:[(0,Qo.jsx)("div",{style:{position:"absolute",width:sp,height:this.getHeight(e)},children:(0,Qo.jsxs)("div",{className:"tl-note__container tl-hitarea-fill",style:{color:"var(--palette-".concat(c,")"),backgroundColor:"var(--palette-".concat(c,")")},children:[(0,Qo.jsx)("div",{className:"tl-note__scrim"}),(0,Qo.jsx)(hh,{id:t,type:n,font:o,size:a,align:s,verticalAlign:l,text:u,labelColor:c,wrap:!0})]})}),"url"in e.props&&e.props.url&&(0,Qo.jsx)(Tf,{url:e.props.url,zoomLevel:this.editor.zoomLevel})]})}},{key:"indicator",value:function(e){return(0,Qo.jsx)("rect",{rx:"7",width:Fa(sp),height:Fa(this.getHeight(e))})}},{key:"toSvg",value:function(e,t,n){var r=this.bounds(e),i=document.createElementNS("http://www.w3.org/2000/svg","g"),o="black"===e.props.color?"yellow":e.props.color,a=document.createElementNS("http://www.w3.org/2000/svg","rect");a.setAttribute("rx","10"),a.setAttribute("width",sp.toString()),a.setAttribute("height",r.height.toString()),a.setAttribute("fill",n.fill[o]),a.setAttribute("stroke",n.fill[o]),a.setAttribute("stroke-width","1"),i.appendChild(a);var s=document.createElementNS("http://www.w3.org/2000/svg","rect");s.setAttribute("rx","10"),s.setAttribute("width",sp.toString()),s.setAttribute("height",r.height.toString()),s.setAttribute("fill",n.background),s.setAttribute("opacity",".28"),i.appendChild(s);var u=fh({editor:this.editor,shape:e,font:t,bounds:r});return u.setAttribute("fill",n.text),u.setAttribute("stroke","none"),i.appendChild(u),i}}]),n}(hc);function lp(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=e.textMeasure.measureText(t.props.text,R(R({},xc),{},{fontFamily:Cc[t.props.font],fontSize:_c[t.props.size],width:"166px"})).h+34,i=null;if(r>sp?i=r-sp:n&&(i=0),null!==i)return R(R({},t),{},{props:R(R({},t.props),{},{growY:i})})}O(up,"type","note");var cp=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"onPointerDown",(function(t){e.parent.transition("pointing",t)})),O(B(e),"onEnter",(function(){e.editor.setCursor({type:"cross"})})),O(B(e),"onCancel",(function(){e.editor.setSelectedTool("select")})),e}return N(n)}(Vd);O(cp,"id","idle");var dp=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"dragged",!1),O(B(e),"info",{}),O(B(e),"wasFocusedOnEnter",!1),O(B(e),"markPointId","creating"),O(B(e),"onEnter",(function(){e.wasFocusedOnEnter=!e.editor.isMenuOpen})),O(B(e),"onPointerMove",(function(t){if(e.editor.inputs.isDragging){e.editor.mark(e.markPointId);var n=e.createShape();if(!n)return;e.editor.setSelectedTool("select.translating",R(R({},t),{},{target:"shape",shape:n,isCreating:!0,editAfterComplete:!0,onInteractionEnd:"note"}))}})),O(B(e),"onPointerUp",(function(){e.complete()})),O(B(e),"onInterrupt",(function(){e.cancel()})),O(B(e),"onComplete",(function(){e.complete()})),O(B(e),"onCancel",(function(){e.cancel()})),e}return N(n,[{key:"complete",value:function(){if(this.wasFocusedOnEnter){this.editor.mark(this.markPointId);var e=this.createShape();if(this.editor.instanceState.isToolLocked)this.parent.transition("idle",{});else{if(!e)return;this.editor.setEditingId(e.id),this.editor.setSelectedTool("select.editing_shape",R(R({},this.info),{},{target:"shape",shape:e}))}}}},{key:"cancel",value:function(){this.editor.bailToMark(this.markPointId),this.parent.transition("idle",this.info)}},{key:"createShape",value:function(){var e=this.editor.inputs.originPagePoint,t=li();this.editor.createShapes([{id:t,type:"note",x:e.x,y:e.y}],!0);var n=this.editor.getShapeUtil(up),r=this.editor.getShapeById(t),i=n.bounds(r);return this.editor.updateShapes([{id:t,type:"note",x:r.x-i.width/2,y:r.y-i.height/2}]),this.editor.getShapeById(t)}}]),n}(Vd);O(dp,"id","pointing");var fp=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"shapeType",up),e}return N(n)}(Vd);O(fp,"id","note"),O(fp,"initial","idle"),O(fp,"children",(function(){return[cp,dp]}));var hp=Ud("note",{util:up,props:Lo,migrations:Bo,tool:fp}),pp=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"onPointerEnter",(function(t){switch(t.target){case"canvas":break;case"shape":var n=e.editor,r=n.selectedIds,i=n.focusLayerId,o=e.editor.getOutermostSelectableShape(t.shape,(function(e){return!r.includes(e.id)}));o.id!==i&&e.editor.isShapeOfType(o,Oc)&&e.editor.setHoveredId(o.id)}})),O(B(e),"onPointerLeave",(function(t){if("shape"===t.target)e.editor.setHoveredId(null)})),O(B(e),"onPointerDown",(function(t){var n=e.editor.hoveredId;if(n){var r=e.editor.getShapeById(n);if(e.editor.isShapeOfType(r,Oc))return void requestAnimationFrame((function(){e.editor.setSelectedIds([r.id]),e.editor.setEditingId(r.id),e.editor.setSelectedTool("select.editing_shape",R(R({},t),{},{target:"shape",shape:r}))}))}e.parent.transition("pointing",t)})),O(B(e),"onEnter",(function(){e.editor.setCursor({type:"cross"})})),O(B(e),"onKeyDown",(function(t){if("Enter"===t.key){var n=e.editor.selectedShapes[0];n&&e.editor.isShapeOfType(n,Mh)&&(e.editor.setSelectedTool("select"),e.editor.setEditingId(n.id),e.editor.root.current.value.transition("editing_shape",R(R({},t),{},{target:"shape",shape:n})))}})),O(B(e),"onCancel",(function(){e.editor.setSelectedTool("select")})),e}return N(n)}(Vd);O(pp,"id","idle");var vp=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"shape",void 0),O(B(e),"onExit",(function(){e.editor.setHintingIds([])})),O(B(e),"onPointerMove",(function(t){if(e.editor.inputs.isDragging){var n=e.editor.inputs.originPagePoint,r=li();if(e.editor.mark("creating"),e.editor.createShapes([{id:r,type:"text",x:n.x,y:n.y,props:{text:"",autoSize:!1,w:20}}]),e.editor.select(r),e.shape=e.editor.getShapeById(r),!e.shape)return;e.editor.setSelectedTool("select.resizing",R(R({},t),{},{target:"selection",handle:"right",isCreating:!0,creationCursorOffset:{x:1,y:1},editAfterComplete:!0,onInteractionEnd:"text"}))}})),O(B(e),"onPointerUp",(function(){e.complete()})),O(B(e),"onComplete",(function(){e.cancel()})),O(B(e),"onCancel",(function(){e.cancel()})),O(B(e),"onInterrupt",(function(){e.cancel()})),e}return N(n,[{key:"complete",value:function(){var e;this.editor.mark("creating text shape");var t=li(),n=this.editor.inputs.currentPagePoint,r=n.x,i=n.y;this.editor.createShapes([{id:t,type:"text",x:r,y:i,props:{text:"",autoSize:!0}}],!0),this.editor.setEditingId(t),this.editor.setSelectedTool("select"),null===(e=this.editor.root.current.value)||void 0===e||e.transition("editing_shape",{})}},{key:"cancel",value:function(){this.parent.transition("idle",{}),this.editor.bailToMark("creating")}}]),n}(Vd);O(vp,"id","pointing");var gp=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"shapeType",Oc),e}return N(n)}(Vd);O(gp,"id","text"),O(gp,"initial","idle"),O(gp,"children",(function(){return[pp,vp]}));var mp=Ud("text",{util:Oc,props:Fo,migrations:Ko,tool:gp}),yp=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"canEdit",(function(){return!0})),O(B(e),"isAspectRatioLocked",(function(){return!0})),e}return N(n,[{key:"defaultProps",value:function(){return{w:100,h:100,assetId:null,time:0,playing:!0,url:""}}},{key:"component",value:function(e){return(0,Qo.jsx)(wp,{shape:e,videoUtil:this})}},{key:"indicator",value:function(e){return(0,Qo.jsx)("rect",{width:Fa(e.props.w),height:Fa(e.props.h)})}},{key:"toSvg",value:function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","g"),n=document.createElementNS("http://www.w3.org/2000/svg","image");return n.setAttributeNS("http://www.w3.org/1999/xlink","href",function(e){var t=e.split(":")[1],n=document.querySelector(".tl-video-shape-".concat(t));if(n){var r=document.createElement("canvas");return r.width=n.videoWidth,r.height=n.videoHeight,r.getContext("2d").drawImage(n,0,0),r.toDataURL("image/png")}throw new Error("Video with id "+t+" not found")}(e.id)),n.setAttribute("width",e.props.w.toString()),n.setAttribute("height",e.props.h.toString()),t.appendChild(n),t}}]),n}(vc);O(yp,"type","video");var bp,wp=ua((function(e){var n=e.shape,r=e.videoUtil,i=r.editor.getBounds(n).w*r.editor.zoomLevel>=110,o=n.props.assetId?r.editor.getAssetById(n.props.assetId):null,a=n.props,s=a.w,u=a.h,l=a.time,c=a.playing,d=oc(n.id),f=Ls(),h=t.useRef(null),p=t.useCallback((function(e){var t=e.currentTarget;r.editor.updateShapes([{type:"video",id:n.id,props:{playing:!0,time:t.currentTime}}])}),[n.id,r.editor]),v=t.useCallback((function(e){var t=e.currentTarget;r.editor.updateShapes([{type:"video",id:n.id,props:{playing:!1,time:t.currentTime}}])}),[n.id,r.editor]),g=t.useCallback((function(e){var t=e.currentTarget;d&&r.editor.updateShapes([{type:"video",id:n.id,props:{time:t.currentTime}}])}),[d,n.id,r.editor]),m=L(t.useState(!1),2),y=m[0],b=m[1],w=t.useCallback((function(e){var t=e.currentTarget;l!==t.currentTime&&(t.currentTime=l),c||t.pause(),b(!0)}),[c,l]);return t.useEffect((function(){var e=h.current;e&&y&&!d&&l!==e.currentTime&&(e.currentTime=l)}),[d,y,l]),t.useEffect((function(){if(f){var e=h.current;e.pause(),e.currentTime=0}}),[h,f]),(0,Qo.jsxs)(Qo.Fragment,{children:[(0,Qo.jsx)(ic,{id:n.id,children:(0,Qo.jsx)("div",{className:"tl-counter-scaled",children:null!==o&&void 0!==o&&o.props.src?(0,Qo.jsx)("video",{ref:h,className:"tl-video tl-video-shape-".concat(n.id.split(":")[1]," tl-hitarea-stroke"),width:"100%",height:"100%",draggable:!1,playsInline:!0,autoPlay:!0,muted:!0,loop:!0,disableRemotePlayback:!0,disablePictureInPicture:!0,controls:d&&i,onPlay:p,onPause:v,onTimeUpdate:g,onLoadedData:w,hidden:!y,children:(0,Qo.jsx)("source",{src:o.props.src})}):(0,Qo.jsx)("g",{transform:"translate(".concat((s-38)/2,", ").concat((u-38)/2,")"),children:(0,Qo.jsx)(mu,{})})})}),"url"in n.props&&n.props.url&&(0,Qo.jsx)(Tf,{url:n.props.url,zoomLevel:r.editor.zoomLevel})]})})),xp=Ud("video",{util:yp,props:Wo,migrations:Yo}),kp=[Nh,th,Rf,Xh,mp],Sp=[eh,Dh,ap,hp,dh,Pf,Bh,xp],_p=new Set(kp.map((function(e){return e.type})));function Ep(e){var t,n=[].concat(kp),r=new Set,i=X(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;if(_p.has(o.type))throw new Error('Shape type "'.concat(o.type,'" is a core shapes type and cannot be overridden'));if(r.has(o.type))throw new Error('Shape type "'.concat(o.type,'" is defined more than once'));n.push(o),r.add(o.type)}}catch(a){i.e(a)}finally{i.f()}return n}function Cp(e,t){if(!t)return!1;switch(e.type){case"mixed":return"mixed"===t.type;case"shared":return"shared"===t.type&&e.value===t.value;default:throw Z(e)}}bp=Symbol.iterator;var Pp=function(e){U(n,e);var t=W(n);function n(){return z(this,n),t.apply(this,arguments)}return N(n,[{key:"set",value:function(e,t){this.map.set(e,t)}},{key:"applyValue",value:function(e,t){var n=this.get(e);if(n)switch(n.type){case"mixed":return;case"shared":return void(n.value!==t&&this.set(e,{type:"mixed"}));default:Z(n,"type")}else this.set(e,{type:"shared",value:t})}}]),n}(function(){function e(t){z(this,e),O(this,"map",void 0),this.map=new Map(t)}return N(e,[{key:"get",value:function(e){return this.map.get(e)}},{key:"getAsKnownValue",value:function(e){var t=this.get(e);if(t&&"mixed"!==t.type)return t.value}},{key:"size",get:function(){return this.map.size}},{key:"equals",value:function(e){if(this.size!==e.size)return!1;var t,n=new Set,r=X(this);try{for(r.s();!(t=r.n()).done;){var i=L(t.value,2),o=i[0];if(!Cp(i[1],e.get(o)))return!1;n.add(o)}}catch(d){r.e(d)}finally{r.f()}var a,s=X(e);try{for(s.s();!(a=s.n()).done;){var u=L(a.value,2),l=u[0],c=u[1];if(!n.has(l)&&!Cp(c,this.get(l)))return!1}}catch(d){s.e(d)}finally{s.f()}return!0}},{key:"keys",value:function(){return this.map.keys()}},{key:"values",value:function(){return this.map.values()}},{key:"entries",value:function(){return this.map.entries()}},{key:bp,value:function(){return this.map[Symbol.iterator]()}}]),e}());function Ip(e,t){for(var n=0;e[t+n];)n+=e[t+n]+1;return n+1}function Tp(e){var t,n,r=new Uint8Array(e),i=0,o=0;if(!function(e){return"GIF"===new TextDecoder("ascii").decode(e.slice(0,3))}(e))return!1;for(t=128&r[10],n=7&r[10],i+=6,i+=7,i+=t?3*Math.pow(2,n+1):0;o<2&&i<r.length;)switch(r[i]){case 44:o+=1,t=128&r[i+9],n=7&r[i+9],i+=10,i+=t?3*Math.pow(2,n+1):0,i+=Ip(r,i+1)+1;break;case 33:i+=2,i+=Ip(r,i);break;default:i=r.length}return o>1}var Mp=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];"undefined"!==typeof Int32Array&&(Mp=new Int32Array(Mp));var Ap=function(e,t){for(var n=0===t?0:-1^~~t,r=0;r<e.length;r++)n=Mp[255&(n^e[r])]^n>>>8;return-1^n},Op=n(9778),jp=function(e,t){return Op.lW.from(e,t)};var Rp=function(e,t){var n=function(e,n){return t(jp(e),n)>>>0};return n.signed=function(e,n){return t(jp(e),n)},n.unsigned=n,n.model=e,n}("crc-32",Ap);function Lp(e,t){return 137===e.getUint8(t+0)&&80===e.getUint8(t+1)&&78===e.getUint8(t+2)&&71===e.getUint8(t+3)&&13===e.getUint8(t+4)&&10===e.getUint8(t+5)&&26===e.getUint8(t+6)&&10===e.getUint8(t+7)}function Dp(e,t){return[String.fromCharCode(e.getUint8(t)),String.fromCharCode(e.getUint8(t+1)),String.fromCharCode(e.getUint8(t+2)),String.fromCharCode(e.getUint8(t+3))].join("")}var Np=4,zp=4;function Bp(e,t){return{ppux:e.getUint32(t),ppuy:e.getUint32(t+4),unit:e.getUint8(t+4)}}function Fp(e,t){var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={};if(!Lp(e,t))throw new Error("Not a PNG");for(t+=8;t<=e.buffer.byteLength;){var r=t,i=e.getInt32(t),o=Dp(e,t+=4);if("IDAT"===o&&n[o])t+=i+Np+zp;else{if("IEND"===o)break;n[o]={start:r,dataOffset:t+4,size:i},t+=i+Np+zp}}return n}(e);return n[t]}function Up(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,r=46,i=0,o=Fp(e,"pHYs");o&&(r=o.start,i=o.size);var a=Fp(e,"IDAT");a&&(r=a.start,i=0);var s=new ArrayBuffer(21),u=new DataView(s);u.setUint32(0,9),u.setUint8(4,"p".charCodeAt(0)),u.setUint8(5,"H".charCodeAt(0)),u.setUint8(6,"Y".charCodeAt(0)),u.setUint8(7,"s".charCodeAt(0));var l=2835.5;u.setInt32(8,l*t),u.setInt32(12,l*t),u.setInt8(16,1);var c=new Uint8Array(s.slice(4,17));u.setInt32(17,Rp(c));var d=e.buffer.slice(0,r),f=e.buffer.slice(r+i);return new Blob([d,s,f],n)}var Kp=["image/jpeg","image/png","image/gif","image/svg+xml"],Vp=["video/mp4","video/quicktime"],Wp=Kp.concat(Vp).join(", "),Hp=function(e){return Kp.includes(e)};function Yp(e){return Xp.apply(this,arguments)}function Xp(){return Xp=na(ea().mark((function e(t){return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,n){var r=document.createElement("video");r.onloadeddata=function(){return e({w:r.videoWidth,h:r.videoHeight})},r.onerror=function(e){console.error(e),n(new Error("Could not get video size"))},r.crossOrigin="anonymous",r.src=t}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),Xp.apply(this,arguments)}function qp(e){return $p.apply(this,arguments)}function $p(){return($p=na(ea().mark((function e(t){return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(t).then((function(e){return e.arrayBuffer()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gp(e){return Qp.apply(this,arguments)}function Qp(){return Qp=na(ea().mark((function e(t){return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,n){var r=new Image;r.onload=na(ea().mark((function n(){var i,o,a,s,u;return ea().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,qp(t);case 3:if(i=n.sent,!Lp(o=new DataView(i),0)){n.next=13;break}if(!(a=Fp(o,"pHYs"))){n.next=13;break}if(0!==(s=Bp(o,a.dataOffset)).unit||s.ppux!==s.ppuy){n.next=13;break}return u=Math.round(s.ppux/2834.5),e({w:r.width/u,h:r.height/u}),n.abrupt("return");case 13:e({w:r.width,h:r.height}),n.next=20;break;case 16:n.prev=16,n.t0=n.catch(0),console.error(n.t0),e({w:r.width,h:r.height});case 20:case"end":return n.stop()}}),n,null,[[0,16]])}))),r.onerror=function(e){console.error(e),n(new Error("Could not get image size"))},r.crossOrigin="anonymous",r.src=t}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),Qp.apply(this,arguments)}function Jp(e,t,n){return Zp.apply(this,arguments)}function Zp(){return Zp=na(ea().mark((function e(t,n,r){return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){var i=new Image;i.onload=function(){var t=document.createElement("canvas"),o=t.getContext("2d");if(o){t.width=2*n,t.height=2*r,o.drawImage(i,0,0,t.width,t.height);var a=t.toDataURL();e(a)}},i.crossOrigin="anonymous",i.src=t}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),Zp.apply(this,arguments)}function ev(e){return tv.apply(this,arguments)}function tv(){return tv=na(ea().mark((function e(t){return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("image/gif"!==t.type){e.next=4;break}return e.next=3,new Promise((function(e,n){var r=new FileReader;r.onerror=function(){return n(r.error)},r.onload=function(){e({isAnimated:!!r.result&&Tp(r.result)})},r.readAsArrayBuffer(t)}));case 3:return e.abrupt("return",e.sent);case 4:return e.abrupt("return",{isAnimated:!Hp(t.type)});case 5:case"end":return e.stop()}}),e)}))),tv.apply(this,arguments)}function nv(e,t){var n=e.w/t.w,r=e.h/t.h;return n<=1&&r<=1?e:n>r?{w:e.w/n,h:e.h/n}:{w:e.w/r,h:e.h/r}}function rv(e,t,n){return fetch(e).then((function(e){return e.arrayBuffer()})).then((function(e){return new File([e],t,{type:n})}))}function iv(e){var t=e.editor,n=t.selectionRotation,r=t.selectionPageCenter,i=t.inputs.originPagePoint,o=t.selectedShapes;return{selectionPageCenter:r,initialCursorAngle:r.angle(i),initialSelectionRotation:n,shapeSnapshots:o.map((function(e){return{shape:_e(e),initialPagePoint:t.getPagePointById(e.id)}}))}}function ov(e){var t=e.delta,n=e.editor,r=e.snapshot,i=e.stage,o=r.selectionPageCenter,a=r.shapeSnapshots;n.updateShapes(a.map((function(e){var r=e.shape,i=e.initialPagePoint,a=ui(r.parentId)?n.getPageTransformById(r.parentId):Ja.Identity(),s=va.RotWith(i,o,t),u=Ja.applyToPoint(Ja.Inverse(a),s),l=Ca(r.rotation+t);return{id:r.id,type:r.type,x:u.x,y:u.y,rotation:l}})));var s=[];a.forEach((function(e){var t,r=e.shape,o=n.getShapeById(r.id);if(o){var a=n.getShapeUtil(r);if("start"===i||"one-off"===i){var u,l=null===(u=a.onRotateStart)||void 0===u?void 0:u.call(a,r);l&&s.push(l)}var c=null===(t=a.onRotate)||void 0===t?void 0:t.call(a,r,o);if(c&&s.push(c),"end"===i||"one-off"===i){var d,f=null===(d=a.onRotateEnd)||void 0===d?void 0:d.call(a,r,o);f&&s.push(f)}}})),s.length>0&&n.updateShapes(s)}var av=function(e,t,n){for(;!bn(n.parentId);){var r=e.get(n.parentId);if(!r)return!1;n=r}return n.parentId===t},sv={top:10,left:10,bottom:10,right:10};function uv(e){var t=e.getContainer(),n=t.querySelector('*[data-tldraw-area="active-drawing"]'),r=R(R({},sv),{},{width:0,height:0});if(n&&t){var i=t.getBoundingClientRect(),o=n.getBoundingClientRect();r.top=o.top,r.left=o.left,r.bottom=i.height-o.bottom,r.right=i.width-o.right}return r.width=e.viewportScreenBounds.width-r.left-r.right,r.height=e.viewportScreenBounds.height-r.top-r.bottom,r}var lv,cv,dv=N((function e(t){var n=this;z(this,e),O(this,"offsets",Mt("activeAreaOffsets",sv)),O(this,"updateOffsets",(function(){var e=function(e){var t=uv(e),n=e.zoomLevel;return t.left/=n,t.right/=n,t.top/=n,t.bottom/=n,t.width/=n,t.height/=n,t}(n.editor);n.offsets.set(e)})),O(this,"dispose",(function(){window.addEventListener("resize",n.updateOffsets)})),this.editor=t,window.addEventListener("resize",this.updateOffsets),this.editor.disposables.add(this.dispose)})),fv=function(){function e(t){var n=this;z(this,e),O(this,"_clickId",""),O(this,"_clickTimeout",void 0),O(this,"_clickScreenPoint",void 0),O(this,"_previousScreenPoint",void 0),O(this,"_getClickTimeout",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bd();n._clickId=t,clearTimeout(n._clickTimeout),n._clickTimeout=setTimeout((function(){if(n._clickState===e&&n._clickId===t){switch(n._clickState){case"pendingTriple":n.editor.dispatch(R(R({},n.lastPointerInfo),{},{type:"click",name:"double_click",phase:"settle"}));break;case"pendingQuadruple":n.editor.dispatch(R(R({},n.lastPointerInfo),{},{type:"click",name:"triple_click",phase:"settle"}));break;case"pendingOverflow":n.editor.dispatch(R(R({},n.lastPointerInfo),{},{type:"click",name:"quadruple_click",phase:"settle"}))}n._clickState="idle"}}),"idle"===e||"pendingDouble"===e?450:200)})),O(this,"_clickState","idle"),O(this,"lastPointerInfo",{}),O(this,"transformPointerDownEvent",(function(e){if(!n._clickState)return e;switch(n._clickScreenPoint=va.From(e.point),n._previousScreenPoint&&n._previousScreenPoint.dist(n._clickScreenPoint)>40&&(n._clickState="idle"),n._previousScreenPoint=n._clickScreenPoint,n.lastPointerInfo=e,n._clickState){case"idle":return n._clickState="pendingDouble",n._clickTimeout=n._getClickTimeout(n._clickState),e;case"pendingDouble":return n._clickState="pendingTriple",n._clickTimeout=n._getClickTimeout(n._clickState),R(R({},e),{},{type:"click",name:"double_click",phase:"down"});case"pendingTriple":return n._clickState="pendingQuadruple",n._clickTimeout=n._getClickTimeout(n._clickState),R(R({},e),{},{type:"click",name:"triple_click",phase:"down"});case"pendingQuadruple":return n._clickState="pendingOverflow",n._clickTimeout=n._getClickTimeout(n._clickState),R(R({},e),{},{type:"click",name:"quadruple_click",phase:"down"});case"pendingOverflow":return n._clickState="overflow",n._clickTimeout=n._getClickTimeout(n._clickState),e;default:return n._clickTimeout=n._getClickTimeout(n._clickState),e}})),O(this,"transformPointerUpEvent",(function(e){if(!n._clickState)return e;switch(n._clickScreenPoint=va.From(e.point),n._clickState){case"pendingTriple":return R(R({},n.lastPointerInfo),{},{type:"click",name:"double_click",phase:"up"});case"pendingQuadruple":return R(R({},n.lastPointerInfo),{},{type:"click",name:"triple_click",phase:"up"});case"pendingOverflow":return R(R({},n.lastPointerInfo),{},{type:"click",name:"quadruple_click",phase:"up"});default:return e}})),O(this,"cancelDoubleClickTimeout",(function(){n._clickTimeout=clearTimeout(n._clickTimeout),n._clickState="idle"})),O(this,"handleMove",(function(){"idle"!==n._clickState&&n._clickScreenPoint&&n._clickScreenPoint.dist(n.editor.inputs.currentScreenPoint)>(n.editor.isCoarsePointer?6:4)&&n.cancelDoubleClickTimeout()})),this.editor=t}return N(e,[{key:"clickState",get:function(){return this._clickState}}]),e}(),hv=function(){function e(t){var n=this;z(this,e),O(this,"_currentMM",void 0),O(this,"dpr",Mt("devicePixelRatio","undefined"===typeof window?1:window.devicePixelRatio)),O(this,"updateDevicePixelRatio",(function(){n.dpr.set(window.devicePixelRatio),n.rebind()})),O(this,"dispose",(function(){var e;null===(e=n._currentMM)||void 0===e||e.removeEventListener("change",n.updateDevicePixelRatio)})),this.editor=t,this.rebind(),this.editor.disposables.add(this.dispose)}return N(e,[{key:"rebind",value:function(){var e;this.dispose(),this._currentMM=this.getMedia(),null===(e=this._currentMM)||void 0===e||e.addEventListener("change",this.updateDevicePixelRatio)}},{key:"getMedia",value:function(){if(window.matchMedia)return matchMedia("(resolution: ".concat(window.devicePixelRatio,"dppx)"))}}]),e}(),pv=function(){function e(t){var n=this;z(this,e),O(this,"handleContent",function(){var e=na(ea().mark((function e(t){return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.type,e.next="text"===e.t0?3:"files"===e.t0?6:"embed"===e.t0?9:"svg-text"===e.t0?12:"url"===e.t0?15:18;break;case 3:return e.next=5,n.handleText(n.editor,t);case 5:case 8:case 11:case 14:case 17:return e.abrupt("return",e.sent);case 6:return e.next=8,n.handleFiles(n.editor,t);case 9:return e.next=11,n.handleEmbed(n.editor,t);case 12:return e.next=14,n.handleSvgText(n.editor,t);case 15:return e.next=17,n.handleUrl(n.editor,t);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),O(this,"handleUrl",function(){var e=na(ea().mark((function e(t,r){var i,o,a,s,u,l,c;return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=r.point,o=r.url,!(a=lc(o))){e.next=4;break}return e.abrupt("return",n.handleEmbed(t,{type:"embed",url:a.url,point:i,embed:a.definition}));case 4:if(s=null!==i&&void 0!==i?i:t.inputs.shiftKey?t.inputs.currentPagePoint:t.viewportPageCenter,u=Jr.createId(oe(o)),l=t.getAssetById(u),c=!1,l){e.next=13;break}return c=!0,e.next=12,n.createAssetFromUrl(t,o);case 12:l=e.sent;case 13:t.batch((function(){c&&t.createAssets([l]),n.createShapesForAssets(t,[l],s)}));case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.editor=t}return N(e,[{key:"handleSvgText",value:function(){var e=na(ea().mark((function e(t,n){var r,i,o,a,s,u,l,c;return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.point,i=n.text,o=null!==r&&void 0!==r?r:t.inputs.shiftKey?t.inputs.currentPagePoint:t.viewportPageCenter,a=(new DOMParser).parseFromString(i,"image/svg+xml").querySelector("svg")){e.next=5;break}throw new Error("No <svg/> element present");case 5:return s=parseFloat(a.getAttribute("width")||"0"),u=parseFloat(a.getAttribute("height")||"0"),s&&u||(document.body.appendChild(a),l=a.getBoundingClientRect(),document.body.removeChild(a),s=l.width,u=l.height),e.next=10,this.createAssetFromFile(t,new File([i],"asset.svg",{type:"image/svg+xml"}));case 10:c=e.sent,this.createShapesForAssets(t,[c],o);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"handleEmbed",value:function(){var e=na(ea().mark((function e(t,n){var r,i,o,a,s,u,l;return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.point,i=n.url,o=n.embed,a=null!==r&&void 0!==r?r:t.inputs.shiftKey?t.inputs.currentPagePoint:t.viewportPageCenter,s=o.width,u=o.height,l={id:li(),type:"embed",x:a.x-(s||450)/2,y:a.y-(u||450)/2,props:{w:s,h:u,url:i}},t.createShapes([l],!0);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"handleFiles",value:function(){var e=na(ea().mark((function e(t,n){var r,i,o,a,s,u=this;return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.point,i=n.files,o=null!==r&&void 0!==r?r:t.inputs.shiftKey?t.inputs.currentPagePoint:t.viewportPageCenter,a=new va(o.x,o.y),s=[],e.next=6,Promise.all(i.map(function(){var e=na(ea().mark((function e(n,r){var i;return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.type){e.next=2;break}throw new Error("No mime type");case 2:if(Kp.concat(Vp).includes(n.type)){e.next=5;break}return console.warn("".concat(n.name," not loaded - Extension not allowed.")),e.abrupt("return",null);case 5:return e.prev=5,e.next=8,u.createAssetFromFile(t,n);case 8:if(i=e.sent){e.next=11;break}throw Error("Could not create an asset");case 11:s[r]=i,e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(5),console.error(e.t0),e.abrupt("return",null);case 18:case"end":return e.stop()}}),e,null,[[5,14]])})));return function(t,n){return e.apply(this,arguments)}}()));case 6:this.createShapesForAssets(t,$(s),a);case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"handleText",value:function(){var e=na(ea().mark((function e(t,n){var r,i,o,a,s,u,l,c,d,f,h,p,v,g;return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.point,i=n.text,o=null!==r&&void 0!==r?r:t.inputs.shiftKey?t.inputs.currentPagePoint:t.viewportPageCenter,a=t.getShapeUtil(Oc).defaultProps(),s=yv(mv(gv(i))),d="middle",f=s.split("\n").length>1,h=vv.test(s),f&&(d=f?h?"end":"start":"middle"),p=t.textMeasure.measureText(s,R(R({},xc),{},{fontFamily:Cc[a.font],fontSize:Sc[a.size],width:"fit-content"})),v=Math.min(f?.9*t.viewportPageBounds.width:920,Math.max(200,.9*t.viewportPageBounds.width)),p.w>v?(g=t.textMeasure.measureText(s,R(R({},xc),{},{fontFamily:Cc[a.font],fontSize:Sc[a.size],width:v+"px"})),u=g.w,l=g.h,c=!1,d=h?"end":"start"):(u=p.w,l=p.h,c=!0),o.y-l/2<t.viewportPageBounds.minY+40&&(o.y=t.viewportPageBounds.minY+40+l/2),t.createShapes([{id:li(),type:"text",x:o.x-u/2,y:o.y-l/2,props:{text:s,align:d,autoSize:c,w:u}}]);case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createShapesForAssets",value:function(){var e=na(ea().mark((function e(t,n,r){var i,o,a,s,u;return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.length){e.next=2;break}return e.abrupt("return");case 2:i=va.From(r),o=[],a=X(n),e.prev=5,a.s();case 7:if((s=a.n()).done){e.next=22;break}u=s.value,e.t0=u.type,e.next="bookmark"===e.t0?12:"image"===e.t0?15:"video"===e.t0?18:20;break;case 12:return o.push({id:li(),type:"bookmark",x:i.x-150,y:i.y-160,opacity:1,props:{assetId:u.id,url:u.props.src}}),i.x+=300,e.abrupt("break",20);case 15:return o.push({id:li(),type:"image",x:i.x-u.props.w/2,y:i.y-u.props.h/2,opacity:1,props:{assetId:u.id,w:u.props.w,h:u.props.h}}),i.x+=u.props.w,e.abrupt("break",20);case 18:o.push({id:li(),type:"video",x:i.x-u.props.w/2,y:i.y-u.props.h/2,opacity:1,props:{assetId:u.id,w:u.props.w,h:u.props.h}}),i.x+=u.props.w;case 20:e.next=7;break;case 22:e.next=27;break;case 24:e.prev=24,e.t1=e.catch(5),a.e(e.t1);case 27:return e.prev=27,a.f(),e.finish(27);case 30:t.batch((function(){var e=n.filter((function(e){return!t.getAssetById(e.id)}));e.length&&t.createAssets(e),t.createShapes(o,!0);var i=t.viewportPageBounds,a=t.selectedPageBounds;if(a){var s=a.center.sub(r);t.updateShapes(o.map((function(e){return{id:e.id,type:e.type,x:e.x-s.x,y:e.y-s.y}})))}(a=t.selectedPageBounds)&&!i.contains(a)&&t.zoomToSelection()}));case 31:case"end":return e.stop()}}),e,null,[[5,24,27,30]])})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"createAssetFromFile",value:function(){var e=na(ea().mark((function e(t,n){return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,t){var r=new FileReader;r.onerror=function(){return t(r.error)},r.onload=na(ea().mark((function t(){var i,o,a,s,u,l,c,d;return ea().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=r.result,o=Hp(n.type),a=o?Gp:Yp,"video/quicktime"===n.type&&i.includes("video/quicktime")&&(i=i.replace("video/quicktime","video/mp4")),t.next=6,a(i);case 6:if(s=t.sent,(u=nv(s,{w:1e3,h:1e3}))===s||"image/jpeg"!==n.type&&"image/png"!==n.type){t.next=12;break}return t.next=11,Jp(i,u.w,u.h);case 11:i=t.sent;case 12:return l=Jr.createId(oe(i)),t.next=15,ev(n);case 15:c=t.sent,d={id:l,type:o?"image":"video",typeName:"asset",props:{name:n.name,src:i,w:u.w,h:u.h,mimeType:n.type,isAnimated:c.isAnimated}},e(d);case 18:case"end":return t.stop()}}),t)}))),r.readAsDataURL(n)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createAssetFromUrl",value:function(){var e=na(ea().mark((function e(t,n){var r,i,o,a,s,u,l,c,d,f;return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(n,{method:"GET",mode:"no-cors"});case 3:return c=e.sent,e.next=6,c.text();case 6:d=e.sent,f=(new DOMParser).parseFromString(d,"text/html"),r={image:null!==(i=null===(o=f.head.querySelector('meta[property="og:image"]'))||void 0===o?void 0:o.getAttribute("content"))&&void 0!==i?i:"",title:null!==(a=null===(s=f.head.querySelector('meta[property="og:title"]'))||void 0===s?void 0:s.getAttribute("content"))&&void 0!==a?a:Ds(n,32),description:null!==(u=null===(l=f.head.querySelector('meta[property="og:description"]'))||void 0===l?void 0:l.getAttribute("content"))&&void 0!==u?u:""},e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0),r={image:"",title:Ds(n,32),description:""};case 15:return e.abrupt("return",{id:Jr.createId(oe(n)),typeName:"asset",type:"bookmark",props:{src:n,description:r.description,image:r.image,title:r.title}});case 16:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),vv=/[\u0590-\u05FF\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]/;function gv(e){return e.replace(/\t/g,Pc)}function mv(e){for(var t=e.split("\n");0===t[0].trim().length;)t.shift();var n,r=1/0,i=X(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o.trim().length>0){var a=o.length-o.trimStart().length;r=Math.min(r,a)}}}catch(s){i.e(s)}finally{i.f()}return t.map((function(e){return e.slice(r)})).join("\n")}function yv(e){return e.replace(/[ \t]+$/gm,"").replace(/\n+$/,"")}function bv(e){if(e){for(var t=wv;e.length;)t=t.push(e.pop());return t}return wv}lv=Symbol.iterator;var wv=new(function(){function e(){z(this,e),O(this,"length",0),O(this,"head",null),O(this,"tail",this)}return N(e,[{key:"push",value:function(e){return new xv(e,this)}},{key:"toArray",value:function(){return ft}},{key:lv,value:function(){return{next:function(){return{value:void 0,done:!0}}}}}]),e}());cv=Symbol.iterator;var xv=function(){function e(t,n){z(this,e),O(this,"length",void 0),this.head=t,this.tail=n,this.length=n.length+1}return N(e,[{key:"push",value:function(t){return new e(t,this)}},{key:"toArray",value:function(){return Array.from(this)}},{key:cv,value:function(){var e=this;return{next:function(){if(e.length){var t=e.head;return e=e.tail,{value:t,done:!1}}return{value:void 0,done:!0}}}}}]),e}(),kv=function(){function e(t,n,r){var i=this;z(this,e),O(this,"_undos",Mt("HistoryManager.undos",bv())),O(this,"_redos",Mt("HistoryManager.redos",bv())),O(this,"_batchDepth",0),O(this,"_commands",{}),O(this,"createCommand",(function(e,t,n){if(i._commands[e])throw new Error("Duplicate command: ".concat(e));i._commands[e]=n;return function r(){for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];if(!i._batchDepth)return i.batch((function(){return r.apply(void 0,a)})),i.ctx;var u=t.apply(void 0,a);if(!u)return i.ctx;var l=u.data,c=u.ephemeral,d=u.squashing,f=u.preservesRedoStack;if(i.ignoringUpdates((function(e,t){return n.do(l),{undos:e,redos:t}})),!c){var h=i._undos.value.head;d&&h&&"command"===h.type&&h.name===e&&h.preservesRedoStack===f?i._undos.update((function(e){return e.tail.push(R(R({},h),{},{id:bd(),data:n.squash(h.data,l)}))})):i._undos.update((function(t){return t.push({type:"command",name:e,data:l,id:bd(),preservesRedoStack:f})})),u.preservesRedoStack||i._redos.set(bv()),i.ctx.emit("change-history",{reason:"push"})}return i.ctx}})),O(this,"batch",(function(e){try{i._batchDepth++,1===i._batchDepth?It((function(){var t,n,r=null===(t=i._undos.value.head)||void 0===t?void 0:t.id;e(),r!==(null===(n=i._undos.value.head)||void 0===n?void 0:n.id)&&i.onBatchComplete()})):e()}catch(t){throw i.annotateError(t),t}finally{i._batchDepth--}return i})),O(this,"ignoringUpdates",(function(e){var t=i._undos.value,n=i._redos.value;i._undos.set(bv()),i._redos.set(bv());try{var r=It((function(){return e(t,n)}));t=r.undos,n=r.redos}finally{i._undos.set(t),i._redos.set(n)}})),O(this,"_undo",(function(e){var t=e.pushToRedoStack,n=e.toMark,r=void 0===n?void 0:n;return i.ignoringUpdates((function(e,n){if(0===e.length)return{undos:e,redos:n};for(;"STOP"===(null===(o=e.head)||void 0===o?void 0:o.type);){var o,a=e.head;if(e=e.tail,t&&(n=n.push(a)),a.id===r)return i.ctx.emit("change-history",t?{reason:"undo"}:{reason:"bail",markId:r}),{undos:e,redos:n}}if(0===e.length)return i.ctx.emit("change-history",t?{reason:"undo"}:{reason:"bail",markId:r}),{undos:e,redos:n};for(;e.head;){var s=e.head;if(e=e.tail,t&&(n=n.push(s)),"STOP"===s.type){if(s.onUndo&&(!r||s.id===r))return i.ctx.emit("change-history",t?{reason:"undo"}:{reason:"bail",markId:r}),{undos:e,redos:n}}else i._commands[s.name].undo(s.data)}return i.ctx.emit("change-history",t?{reason:"undo"}:{reason:"bail",markId:r}),{undos:e,redos:n}})),i})),O(this,"undo",(function(){return i._undo({pushToRedoStack:!0}),i})),O(this,"redo",(function(){return i.ignoringUpdates((function(e,t){if(0===t.length)return{undos:e,redos:t};for(;"STOP"===(null===(n=t.head)||void 0===n?void 0:n.type);){var n;e=e.push(t.head),t=t.tail}if(0===t.length)return i.ctx.emit("change-history",{reason:"redo"}),{undos:e,redos:t};for(;t.head;){var r=t.head;if(e=e.push(t.head),t=t.tail,"STOP"===r.type){if(r.onRedo)break}else{var o=i._commands[r.name];o.redo?o.redo(r.data):o.do(r.data)}}return i.ctx.emit("change-history",{reason:"redo"}),{undos:e,redos:t}})),i})),O(this,"bail",(function(){return i._undo({pushToRedoStack:!1}),i})),O(this,"bailToMark",(function(e){return i._undo({pushToRedoStack:!1,toMark:e}),i})),O(this,"mark",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bd(),t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=i._undos.value.head;return r&&"STOP"===r.type&&r.id===e&&r.onUndo===t&&r.onRedo===n?r.id:(i._undos.update((function(r){return r.push({type:"STOP",id:e,onUndo:t,onRedo:n})})),i.ctx.emit("mark-history",{id:e}),e)})),this.ctx=t,this.onBatchComplete=n,this.annotateError=r}return N(e,[{key:"numUndos",get:function(){return this._undos.value.length}},{key:"numRedos",get:function(){return this._redos.value.length}},{key:"clear",value:function(){this._undos.set(bv()),this._redos.set(bv())}}]),e}(),Sv=Object.defineProperty,_v=Object.getOwnPropertyDescriptor,Ev=function(e,t,n,r){for(var i,o=r>1?void 0:r?_v(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Sv(t,n,o),o},Cv=function(e){return Math.round(e*Math.pow(10,8))/Math.pow(10,8)};function Pv(e,t,n,r,i,o){if(o>20)return[];var a=e.filter((function(e){return("forward"===r?e.startNode.id===t:e.endNode.id===t)&&Cv(e.length)===Cv(n)&&Na(e.breadthIntersection[0],e.breadthIntersection[1],i[0],i[1])}));if(0===a.length)return[];var s,l=new Set,c=X(a);try{for(c.s();!(s=c.n()).done;){var d=s.value,f="forward"===r?d.endNode.id:d.startNode.id;l.has(f)||(l.add(f),a.push.apply(a,u(Pv(e,f,n,r,Na(d.breadthIntersection[0],d.breadthIntersection[1],i[0],i[1]),o+1))))}}catch(h){c.e(h)}finally{c.f()}return a}var Iv=function(){function e(t){z(this,e),O(this,"_snapLines",Mt("snapLines",void 0)),this.editor=t}return N(e,[{key:"lines",get:function(){var e;return null!==(e=this._snapLines.value)&&void 0!==e?e:ft}},{key:"clear",value:function(){this.lines.length&&this._snapLines.set(void 0)}},{key:"setLines",value:function(e){this._snapLines.set(e)}},{key:"snapPointsCache",get:function(){var e=this;return this.editor.store.createComputedCache("snapPoints",(function(t){var n=e.editor.getPageTransformById(t.id);if(n)return e.editor.getShapeUtil(t).snapPoints(t).map((function(e,r){var i=Ja.applyToPoint(n,e);return{x:i.x,y:i.y,id:"".concat(t.id,":").concat(r)}}))}))}},{key:"snapThreshold",get:function(){return 8/this.editor.zoomLevel}},{key:"snappableShapes",get:function(){var e,t=this.editor,n=t.selectedIds,r=t.renderingBounds,i=[];return function e(o){var a,s=X(t.getSortedChildIds(o));try{for(s.s();!(a=s.n()).done;){var u=a.value;if(!n.includes(u)){var l=t.getShapeById(u);if(l){var c=t.getShapeUtil(l);if(c.canSnap(l)){var d=t.getPageBoundsById(u);d&&r.includes(d)&&(t.isShapeOfType(l,ah)?e(u):i.push({id:u,pageBounds:d,isClosed:c.isClosed(l)}))}}}}}catch(f){s.e(f)}finally{s.f()}}(null!==(e=this.currentCommonAncestor)&&void 0!==e?e:t.currentPageId),i}},{key:"currentCommonAncestor",get:function(){return this.editor.findCommonAncestor(this.editor.selectedShapes)}},{key:"snappablePoints",get:function(){var e=this.snappableShapes,t=this.snapPointsCache,n=[];return e.forEach((function(e){var r=t.get(e.id);r&&n.push.apply(n,u(r))})),n}},{key:"visibleGaps",get:function(){for(var e,t,n=[],r=[],i=this.snappableShapes.sort((function(e,t){return e.pageBounds.minX-t.pageBounds.minX})),o=0;o<i.length;o++){e=i[o];for(var a=o+1;a<i.length;a++)t=i[a],e.pageBounds.maxX<t.pageBounds.minX&&Da(e.pageBounds.minY,e.pageBounds.maxY,t.pageBounds.minY,t.pageBounds.maxY)&&n.push({startNode:e,endNode:t,startEdge:[new va(e.pageBounds.maxX,e.pageBounds.minY),new va(e.pageBounds.maxX,e.pageBounds.maxY)],endEdge:[new va(t.pageBounds.minX,t.pageBounds.minY),new va(t.pageBounds.minX,t.pageBounds.maxY)],length:t.pageBounds.minX-e.pageBounds.maxX,breadthIntersection:Na(e.pageBounds.minY,e.pageBounds.maxY,t.pageBounds.minY,t.pageBounds.maxY)})}for(var s=i.sort((function(e,t){return e.pageBounds.minY-t.pageBounds.minY})),u=0;u<s.length;u++){e=s[u];for(var l=u+1;l<s.length;l++)t=s[l],e.pageBounds.maxY<t.pageBounds.minY&&Da(e.pageBounds.minX,e.pageBounds.maxX,t.pageBounds.minX,t.pageBounds.maxX)&&r.push({startNode:e,endNode:t,startEdge:[new va(e.pageBounds.minX,e.pageBounds.maxY),new va(e.pageBounds.maxX,e.pageBounds.maxY)],endEdge:[new va(t.pageBounds.minX,t.pageBounds.minY),new va(t.pageBounds.maxX,t.pageBounds.minY)],length:t.pageBounds.minY-e.pageBounds.maxY,breadthIntersection:Na(e.pageBounds.minX,e.pageBounds.maxX,t.pageBounds.minX,t.pageBounds.maxX)})}return{horizontal:n,vertical:r}}},{key:"snapTranslate",value:function(e){var t,n,r,i,o=e.lockedAxis,a=e.initialSelectionPageBounds,s=e.initialSelectionSnapPoints,l=e.dragDelta,c=this.snappablePoints,d=this.snapThreshold,f=a.clone().translate(l),h=s.map((function(e,t){var n=e.x,r=e.y;return{id:"selection:"+t,x:n+l.x,y:r+l.y}})),p=c,v=[],g=[],m=new va(d,d);this.collectPointSnaps({minOffset:m,nearestSnapsX:v,nearestSnapsY:g,otherNodeSnapPoints:p,selectionSnapPoints:h}),this.collectGapSnaps({selectionPageBounds:f,nearestSnapsX:v,nearestSnapsY:g,minOffset:m});var y=new va("x"===o?0:null!==(t=null===(n=v[0])||void 0===n?void 0:n.nudge)&&void 0!==t?t:0,"y"===o?0:null!==(r=null===(i=g[0])||void 0===i?void 0:i.nudge)&&void 0!==r?r:0);m.x=0,m.y=0,v.length=0,g.length=0,h.forEach((function(e){e.x+=y.x,e.y+=y.y})),f.translate(y),this.collectPointSnaps({minOffset:m,nearestSnapsX:v,nearestSnapsY:g,otherNodeSnapPoints:p,selectionSnapPoints:h}),this.collectGapSnaps({selectionPageBounds:f,nearestSnapsX:v,nearestSnapsY:g,minOffset:m});var b=this.getPointSnapLines({nearestSnapsX:v,nearestSnapsY:g}),w=this.getGapSnapLines({selectionPageBounds:f,nearestSnapsX:v,nearestSnapsY:g});return this._snapLines.set([].concat(u(w),u(b))),{nudge:y}}},{key:"outlinesInPageSpace",get:function(){var e=this;return this.snappableShapes.map((function(t){var n=t.id,r=t.isClosed,i=ce(e.editor.getOutlineById(n));r&&i.push(i[0]);var o=e.editor.getPageTransformById(n);if(!o)throw Error("No page transform");return Ja.applyToPoints(o,i)}))}},{key:"getSnappingHandleDelta",value:function(e){var t,n,r,i,o,a=e.handlePoint,s=e.additionalSegments,l=this.outlinesInPageSpace,c=this.snapThreshold,d=null,f=X([].concat(u(l),u(s)));try{for(f.s();!(o=f.n()).done;)for(var h=o.value,p=0;p<h.length-1;p++)t=h[p],n=h[p+1],r=va.NearestPointOnLineSegment(t,n,a),i=va.Dist(a,r),isNaN(i)||i<c&&(c=i,d=r)}catch(v){f.e(v)}finally{f.f()}return d?(this._snapLines.set([{id:bd(),type:"points",points:[d]}]),va.Sub(d,a)):null}},{key:"snapResize",value:function(e){var t,n,r,i,o=e.initialSelectionPageBounds,a=e.dragDelta,s=e.handle,l=e.isAspectRatioLocked,c=e.isResizingFromCenter,d=this.snapThreshold,f=Wa.Resize(o,s,c?2*a.x:a.x,c?2*a.y:a.y,l),h=f.box,p=f.scaleX,v=f.scaleY,g=s;p<0&&(g=function(e){switch(e){case"left":return"right";case"right":return"left";case"top_left":return"top_right";case"top_right":return"top_left";case"bottom_left":return"bottom_right";case"bottom_right":return"bottom_left";default:return e}}(g)),v<0&&(g=function(e){switch(e){case"top":return"bottom";case"bottom":return"top";case"top_left":return"bottom_left";case"top_right":return"bottom_right";case"bottom_left":return"top_left";case"bottom_right":return"top_right";default:return e}}(g)),c&&(h.center=o.center);var m="top"===g||"bottom"===g,y="left"===g||"right"===g,b=Tv(g,h),w=this.snappablePoints,x=[],k=[],S=new va(d,d);this.collectPointSnaps({minOffset:S,nearestSnapsX:x,nearestSnapsY:k,otherNodeSnapPoints:w,selectionSnapPoints:b});var _,E=new va(m?0:null!==(t=null===(n=x[0])||void 0===n?void 0:n.nudge)&&void 0!==t?t:0,y?0:null!==(r=null===(i=k[0])||void 0===i?void 0:i.nudge)&&void 0!==r?r:0);if(l&&("top_left"===(_=g)||"top_right"===_||"bottom_right"===_||"bottom_left"===_)&&0!==E.len()){var C=x.length&&k.length?Math.abs(E.x)<Math.abs(E.y)?"x":"y":x.length?"x":"y",P=o.aspectRatio;"x"===C?(k.length=0,E.y=E.x/P,"bottom_left"!==g&&"top_right"!==g||(E.y=-E.y)):(x.length=0,E.x=E.y*P,"bottom_left"!==g&&"top_right"!==g||(E.x=-E.x))}var I=va.Add(a,E),T=Wa.Resize(o,s,c?2*I.x:I.x,c?2*I.y:I.y,l).box;c&&(T.center=o.center);var M=Tv("any",T);x.length=0,k.length=0,S.x=0,S.y=0,this.collectPointSnaps({minOffset:S,nearestSnapsX:x,nearestSnapsY:k,otherNodeSnapPoints:w,selectionSnapPoints:M});var A=this.getPointSnapLines({nearestSnapsX:x,nearestSnapsY:k});return this._snapLines.set(u(A)),{nudge:E}}},{key:"collectPointSnaps",value:function(e){var t,n=e.selectionSnapPoints,r=e.otherNodeSnapPoints,i=e.minOffset,o=e.nearestSnapsX,a=e.nearestSnapsY,s=X(n);try{for(s.s();!(t=s.n()).done;){var u,l=t.value,c=X(r);try{for(c.s();!(u=c.n()).done;){var d=u.value,f=va.Sub(l,d),h=Math.abs(f.x),p=Math.abs(f.y);Cv(h)<=Cv(i.x)&&(Cv(h)<Cv(i.x)&&(o.length=0),o.push({type:"points",points:{thisPoint:l,otherPoint:d},nudge:d.x-l.x}),i.x=h),Cv(p)<=Cv(i.y)&&(Cv(p)<Cv(i.y)&&(a.length=0),a.push({type:"points",points:{thisPoint:l,otherPoint:d},nudge:d.y-l.y}),i.y=p)}}catch(v){c.e(v)}finally{c.f()}}}catch(v){s.e(v)}finally{s.f()}}},{key:"collectGapSnaps",value:function(e){var t,n=e.selectionPageBounds,r=e.minOffset,i=e.nearestSnapsX,o=e.nearestSnapsY,a=this.visibleGaps,s=a.horizontal,u=a.vertical,l=X(s);try{for(l.s();!(t=l.n()).done;){var c=t.value;if(Da(c.breadthIntersection[0],c.breadthIntersection[1],n.minY,n.maxY)){var d=c.startEdge[0].x+c.length/2-n.center.x;if(c.length>n.width&&Cv(Math.abs(d))<=Cv(r.x)){Cv(Math.abs(d))<Cv(r.x)&&(i.length=0),r.x=Math.abs(d);var f={type:"gap_center",gap:c,nudge:d},h=i.find((function(e){return"gap_center"===e.type})),p=h&&Na(c.breadthIntersection[0],c.breadthIntersection[1],h.gap.breadthIntersection[0],h.gap.breadthIntersection[1]);h&&h.gap.length>c.length&&p?i[i.indexOf(h)]=f:h&&p||i.push(f)}var v=c.startNode.pageBounds.minX-c.length-n.maxX;Cv(Math.abs(v))<=Cv(r.x)&&(Cv(Math.abs(v))<Cv(r.x)&&(i.length=0),r.x=Math.abs(v),i.push({type:"gap_duplicate",gap:c,protrusionDirection:"left",nudge:v}));var g=c.endNode.pageBounds.maxX+c.length-n.minX;Cv(Math.abs(g))<=Cv(r.x)&&(Cv(Math.abs(g))<Cv(r.x)&&(i.length=0),r.x=Math.abs(g),i.push({type:"gap_duplicate",gap:c,protrusionDirection:"right",nudge:g}))}}}catch(C){l.e(C)}finally{l.f()}var m,y=X(u);try{for(y.s();!(m=y.n()).done;){var b=m.value;if(Da(b.breadthIntersection[0],b.breadthIntersection[1],n.minX,n.maxX)){var w=b.startEdge[0].y+b.length/2-n.center.y;if(b.length>n.height&&Cv(Math.abs(w))<=Cv(r.y)){Cv(Math.abs(w))<Cv(r.y)&&(o.length=0),r.y=Math.abs(w);var x={type:"gap_center",gap:b,nudge:w},k=o.find((function(e){return"gap_center"===e.type})),S=k&&Da(k.gap.breadthIntersection[0],k.gap.breadthIntersection[1],b.breadthIntersection[0],b.breadthIntersection[1]);k&&k.gap.length>b.length&&S?o[o.indexOf(k)]=x:k&&S||o.push(x)}else{var _=b.startNode.pageBounds.minY-b.length-n.maxY;Cv(Math.abs(_))<=Cv(r.y)&&(Cv(Math.abs(_))<Cv(r.y)&&(o.length=0),r.y=Math.abs(_),o.push({type:"gap_duplicate",gap:b,protrusionDirection:"top",nudge:_}));var E=b.endNode.pageBounds.maxY+b.length-n.minY;Cv(Math.abs(E))<=Cv(r.y)&&(Cv(Math.abs(E))<Cv(r.y)&&(o.length=0),r.y=Math.abs(E),o.push({type:"gap_duplicate",gap:b,protrusionDirection:"bottom",nudge:E}))}}}}catch(C){y.e(C)}finally{y.f()}}},{key:"getPointSnapLines",value:function(e){var t=e.nearestSnapsX,n=e.nearestSnapsY,r={},i={};if(t.length>0){var o,a=X(t);try{for(a.s();!(o=a.n()).done;){var s=o.value;if("points"===s.type){var u=Cv(s.points.otherPoint.x);r[u]||(r[u]=[]),r[u].push(s.points)}}}catch(h){a.e(h)}finally{a.f()}}if(n.length>0){var l,c=X(n);try{for(c.s();!(l=c.n()).done;){var d=l.value;if("points"===d.type){var f=Cv(d.points.otherPoint.y);i[f]||(i[f]=[]),i[f].push(d.points)}}}catch(h){c.e(h)}finally{c.f()}}return Object.values(r).concat(Object.values(i)).map((function(e){return{id:bd(),type:"points",points:q(e.map((function(e){return va.From(e.otherPoint)})).concat(e.map((function(e){return va.From(e.thisPoint)}))),(function(e,t){return e.equals(t)}))}}))}},{key:"getGapSnapLines",value:function(e){var t=e.selectionPageBounds,n=e.nearestSnapsX,r=e.nearestSnapsY,i=this.visibleGaps,o=i.vertical,a=i.horizontal,s={top:t.sides[0],right:t.sides[1],bottom:[t.corners[3],t.corners[2]],left:[t.corners[0],t.corners[3]]},l=[];if(n.length>0){var c,d=X(n);try{var f=function(){var e=c.value;if("points"===e.type)return 1;var n=e.gap,r=n.breadthIntersection,i=n.startEdge,o=n.startNode,d=n.endNode,f=n.length,h=n.endEdge;switch(e.type){case"gap_center":var p=(f-t.width)/2,v=Na(r[0],r[1],t.minY,t.maxY);l.push({type:"gaps",direction:"horizontal",id:bd(),gaps:[].concat(u(Pv(a,o.id,p,"backward",v,0)),[{startEdge:i,endEdge:s.left},{startEdge:s.right,endEdge:h}],u(Pv(a,d.id,p,"forward",v,0)))});break;case"gap_duplicate":var g=Na(r[0],r[1],t.minY,t.maxY);l.push({type:"gaps",direction:"horizontal",id:bd(),gaps:"left"===e.protrusionDirection?[{startEdge:s.right,endEdge:i.map((function(e){return e.clone().addXY(-o.pageBounds.width,0)}))},{startEdge:i,endEdge:h}].concat(u(Pv(a,d.id,f,"forward",g,0))):[].concat(u(Pv(a,o.id,f,"backward",g,0)),[{startEdge:i,endEdge:h},{startEdge:h.map((function(t){return t.clone().addXY(e.gap.endNode.pageBounds.width,0)})),endEdge:s.left}])})}};for(d.s();!(c=d.n()).done;)f()}catch(g){d.e(g)}finally{d.f()}}if(r.length>0){var h,p=X(r);try{var v=function(){var e=h.value;if("points"===e.type)return 1;var n=e.gap,r=n.breadthIntersection,i=n.startEdge,a=n.startNode,c=n.endNode,d=n.length,f=n.endEdge;switch(e.type){case"gap_center":var p=(d-t.height)/2,v=Na(r[0],r[1],t.minX,t.maxX);l.push({type:"gaps",direction:"vertical",id:bd(),gaps:[].concat(u(Pv(o,a.id,p,"backward",v,0)),[{startEdge:i,endEdge:s.top},{startEdge:s.bottom,endEdge:f}],u(Pv(o,e.gap.endNode.id,p,"forward",v,0)))});break;case"gap_duplicate":var g=Na(r[0],r[1],t.minX,t.maxX);l.push({type:"gaps",direction:"vertical",id:bd(),gaps:"top"===e.protrusionDirection?[{startEdge:s.bottom,endEdge:i.map((function(e){return e.clone().addXY(0,-a.pageBounds.height)}))},{startEdge:i,endEdge:f}].concat(u(Pv(o,c.id,d,"forward",g,0))):[].concat(u(Pv(o,a.id,d,"backward",g,0)),[{startEdge:i,endEdge:f},{startEdge:f.map((function(e){return e.clone().addXY(0,c.pageBounds.height)})),endEdge:s.top}])})}};for(p.s();!(h=p.n()).done;)v()}catch(g){p.e(g)}finally{p.f()}}return function(e){e.sort((function(e,t){return t.gaps.length-e.gaps.length}));for(var t=e.length-1;t>0;t--)for(var n=e[t],r=function(){var r=e[i];if(r.direction===n.direction&&n.gaps.every((function(e){return r.gaps.some((function(t){return Cv(e.startEdge[0].x)===Cv(t.startEdge[0].x)&&Cv(e.startEdge[0].y)===Cv(t.startEdge[0].y)&&Cv(e.startEdge[1].x)===Cv(t.startEdge[1].x)&&Cv(e.startEdge[1].y)===Cv(t.startEdge[1].y)}))&&r.gaps.some((function(t){return Cv(e.endEdge[0].x)===Cv(t.endEdge[0].x)&&Cv(e.endEdge[0].y)===Cv(t.endEdge[0].y)&&Cv(e.endEdge[1].x)===Cv(t.endEdge[1].x)&&Cv(e.endEdge[1].y)===Cv(t.endEdge[1].y)}))})))return e.splice(t,1),1},i=t-1;i>=0&&!r();i--);}(l),l}}]),e}();function Tv(e,t){var n=t.minX,r=t.maxX,i=t.minY,o=t.maxY,a=[];switch(e){case"top":case"left":case"top_left":case"any":a.push({id:"top_left",handle:"top_left",x:n,y:i})}switch(e){case"top":case"right":case"top_right":case"any":a.push({id:"top_right",handle:"top_right",x:r,y:i})}switch(e){case"bottom":case"right":case"bottom_right":case"any":a.push({id:"bottom_right",handle:"bottom_right",x:r,y:o})}switch(e){case"bottom":case"left":case"bottom_left":case"any":a.push({id:"bottom_left",handle:"bottom_left",x:n,y:o})}return a}Ev([Nt],Iv.prototype,"snapPointsCache",1),Ev([Nt],Iv.prototype,"snapThreshold",1),Ev([Nt],Iv.prototype,"snappableShapes",1),Ev([Nt],Iv.prototype,"currentCommonAncestor",1),Ev([Nt],Iv.prototype,"snappablePoints",1),Ev([Nt],Iv.prototype,"visibleGaps",1),Ev([Nt],Iv.prototype,"outlinesInPageSpace",1);var Mv={start:"left","start-legacy":"left",middle:"center","middle-legacy":"center",end:"right","end-legacy":"right"},Av=/\s/,Ov=function(){function e(t){var n=this;z(this,e),O(this,"measureText",(function(e,t){var r,i=n.getTextElement();i.setAttribute("dir","ltr"),i.style.setProperty("font-family",t.fontFamily),i.style.setProperty("font-style",t.fontStyle),i.style.setProperty("font-weight",t.fontWeight),i.style.setProperty("font-size",t.fontSize+"px"),i.style.setProperty("line-height",t.lineHeight*t.fontSize+"px"),i.style.setProperty("width",t.width),i.style.setProperty("min-width",null!==(r=t.minWidth)&&void 0!==r?r:null),i.style.setProperty("max-width",t.maxWidth),i.style.setProperty("padding",t.padding),i.textContent=Ic.normalizeTextForDom(e);var o=i.getBoundingClientRect();return{x:0,y:0,w:o.width,h:o.height}})),this.editor=t}return N(e,[{key:"getTextElement",value:function(){var e=document.querySelector(".tl-text-measure");null===e||void 0===e||e.remove();var t=document.createElement("div");return this.editor.getContainer().appendChild(t),t.id="__textMeasure_".concat(bd()),t.classList.add("tl-text"),t.classList.add("tl-text-measure"),t.tabIndex=-1,t}},{key:"measureElementTextNodeSpans",value:function(e){var t,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).shouldTruncateToFirstLine,r=void 0!==n&&n,i=[],o=e.getBoundingClientRect(),a=-o.left,s=-o.top,u=new Range,l=e.childNodes[0],c=0,d=null,f=null,h=0,p=!1,v=X(e.childNodes);try{for(v.s();!(t=v.n()).done;){var g,m=t.value;if(m.nodeType===Node.TEXT_NODE){var y,b=X(null!==(g=m.textContent)&&void 0!==g?g:"");try{for(b.s();!(y=b.n()).done;){var w=y.value;u.setStart(l,c),u.setEnd(l,c+w.length);var x=u.getClientRects(),k=x[x.length-1],S=k.top+s,_=k.left+a,E=k.right+a,C=Av.test(w);if(C===f&&S===h&&d)d.box.w=E-d.box.x,d.text+=w;else{if(d){if(r&&S!==h){p=!0;break}i.push(d)}d={box:{x:_,y:S,w:k.width,h:k.height},text:w}}f=C,h=S,c+=w.length}}catch(P){b.e(P)}finally{b.f()}}}}catch(P){v.e(P)}finally{v.f()}return d&&i.push(d),{spans:i,didTruncate:p}}},{key:"measureTextSpans",value:function(e,t){var n="truncate-ellipsis"===t.overflow||"truncate-clip"===t.overflow,r=this.getTextElement(),i=Math.ceil(t.width-2*t.padding);r.style.setProperty("width","".concat(i,"px")),r.style.setProperty("height","min-content"),r.style.setProperty("dir","ltr"),r.style.setProperty("font-size","".concat(t.fontSize,"px")),r.style.setProperty("font-family",t.fontFamily),r.style.setProperty("font-weight",t.fontWeight),r.style.setProperty("line-height","".concat(t.lineHeight*t.fontSize,"px")),r.style.setProperty("text-align",Mv[t.textAlign]),n&&(r.style.setProperty("overflow-wrap","anywhere"),r.style.setProperty("word-break","break-all")),r.textContent=e;var o=this.measureElementTextNodeSpans(r,{shouldTruncateToFirstLine:n}),a=o.spans,s=o.didTruncate;if("truncate-ellipsis"===t.overflow&&s){r.textContent="\u2026";var u=Math.ceil(this.measureElementTextNodeSpans(r).spans[0].box.w);r.style.setProperty("width","".concat(i-u,"px")),r.textContent=e;var l=this.measureElementTextNodeSpans(r,{shouldTruncateToFirstLine:!0}).spans,c=l[l.length-1];return l.push({text:"\u2026",box:{x:Math.min(c.box.x+c.box.w,t.width-t.padding-u),y:c.box.y,w:u,h:c.box.h}}),l}return r.remove(),a}}]),e}(),jv=N((function e(t){var n=this;z(this,e),O(this,"raf",void 0),O(this,"isPaused",!0),O(this,"last",0),O(this,"t",0),O(this,"start",(function(){n.isPaused=!1,cancelAnimationFrame(n.raf),n.raf=requestAnimationFrame(n.tick),n.last=Date.now()})),O(this,"tick",(function(){if(!n.isPaused){var e=Date.now(),t=e-n.last;n.last=e,n.t+=t,n.editor.emit("frame",t),n.t<16||(n.t-=16,n.updatePointerVelocity(t),n.editor.emit("tick",t)),n.raf=requestAnimationFrame(n.tick)}})),O(this,"dispose",(function(){n.isPaused=!0,cancelAnimationFrame(n.raf)})),O(this,"prevPoint",new va),O(this,"updatePointerVelocity",(function(e){var t=n.prevPoint,r=n.editor.inputs,i=r.currentScreenPoint,o=r.pointerVelocity;if(0!==e){var a=va.Sub(i,t);n.prevPoint=i.clone();var s=a.len(),u=s?a.div(s):new va(0,0),l=o.clone().lrp(u.mul(s/e),.5);Math.abs(l.x)<.01&&(l.x=0),Math.abs(l.y)<.01&&(l.y=0),o.equals(l)||(n.editor.inputs.pointerVelocity=l)}})),this.editor=t,this.editor.disposables.add(this.dispose),this.start()})),Rv=function(){function e(t){var n=this;z(this,e),O(this,"updateUserPreferences",(function(e){n.user.setUserPreferences(R(R({},n.user.userPreferences.value),e))})),this.user=t}return N(e,[{key:"userPreferences",get:function(){return this.user.userPreferences}},{key:"isDarkMode",get:function(){return this.user.userPreferences.value.isDarkMode}},{key:"animationSpeed",get:function(){return this.user.userPreferences.value.animationSpeed}},{key:"id",get:function(){return this.user.userPreferences.value.id}},{key:"name",get:function(){return this.user.userPreferences.value.name}},{key:"locale",get:function(){return this.user.userPreferences.value.locale}},{key:"color",get:function(){return this.user.userPreferences.value.color}},{key:"isSnapMode",get:function(){return this.user.userPreferences.value.isSnapMode}}]),e}(),Lv=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"info",{}),O(B(e),"brush",new Wa),O(B(e),"initialSelectedIds",[]),O(B(e),"excludedShapeIds",new Set),O(B(e),"initialStartShape",null),O(B(e),"onEnter",(function(t){var n=e.editor.inputs,r=n.altKey,i=n.currentPagePoint;r?e.parent.transition("scribble_brushing",t):(e.excludedShapeIds=new Set(e.editor.shapesArray.filter((function(t){return e.editor.isShapeOfType(t,ah)||e.editor.isShapeOrAncestorLocked(t)})).map((function(e){return e.id}))),e.info=t,e.initialSelectedIds=e.editor.selectedIds.slice(),e.initialStartShape=e.editor.getShapesAtPoint(i)[0],e.onPointerMove())})),O(B(e),"onExit",(function(){e.initialSelectedIds=[],e.editor.setBrush(null)})),O(B(e),"onPointerMove",(function(){e.hitTestShapes()})),O(B(e),"onPointerUp",(function(){e.complete()})),O(B(e),"onComplete",(function(){e.complete()})),O(B(e),"onCancel",(function(t){e.editor.setSelectedIds(e.initialSelectedIds,!0),e.parent.transition("idle",t)})),O(B(e),"onKeyDown",(function(t){e.editor.inputs.altKey?e.parent.transition("scribble_brushing",t):e.hitTestShapes()})),O(B(e),"onKeyUp",(function(){e.hitTestShapes()})),O(B(e),"onInterrupt",(function(){e.editor.setBrush(null)})),e}return N(n,[{key:"complete",value:function(){this.parent.transition("idle",{})}},{key:"hitTestShapes",value:function(){var e=this.editor,t=e.currentPageId,n=e.shapesArray,r=e.inputs,i=r.originPagePoint,o=r.currentPagePoint,a=r.shiftKey,s=r.ctrlKey;this.brush.setTo(Wa.FromPoints([i,o]));var u,l,c,d,f,h,p,v=new Set(a?this.initialSelectedIds:[]),g=this.brush.corners,m=this.excludedShapeIds;e:for(var y=0,b=n.length;y<b;y++)if(c=n[y],!m.has(c.id)&&!v.has(c.id)&&(f=this.editor.getPageBounds(c)))if(this.brush.contains(f))this.handleHit(c,o,t,v,g);else if(!s&&!this.editor.isShapeOfType(c,lh)&&this.brush.collides(f)){if(d=this.editor.getShapeUtil(c),!(h=this.editor.getPageTransform(c)))continue e;p=Ja.applyToPoints(Ja.Inverse(h),g);t:for(var w=0;w<p.length;w++)if(u=p[w],l=p[(w+1)%p.length],d.hitTestLineSegment(c,u,l)){this.handleHit(c,o,t,v,g);break t}}this.editor.setBrush(R({},this.brush.toJson())),this.editor.setSelectedIds(Array.from(v),!0)}},{key:"handleHit",value:function(e,t,n,r,i){if(e.parentId!==n){var o=this.editor.getOutermostSelectableShape(e),a=this.editor.getPageMaskById(o.id);a&&null!==function(e,t){for(var n,r,i=0,o=e.length;i<o;i++){n=e[i],r=e[(i+1)%o];for(var a=0,s=t.length;a<s;a++)if(vs(n,r,t[a],t[(a+1)%s]))return!0}return!1}(a,i)&&!Ba(t,a)||r.add(o.id)}else r.add(e.id)}}]),n}(Vd);function Dv(e,t,n){if(!t)throw Error("Needs to translate a cropped shape!");var r=t.props.crop;if(r){var i=e.inputs.shiftKey?Math.abs(n.x)<Math.abs(n.y)?"x":"y":null;"x"===i?n.x=0:"y"===i&&(n.y=0),n.rot(-t.rotation);var o=1/(r.bottomRight.x-r.topLeft.x)*t.props.w,a=1/(r.bottomRight.y-r.topLeft.y)*t.props.h,s=r.bottomRight.y-r.topLeft.y,u=r.bottomRight.x-r.topLeft.x,l=ce(r);return l.topLeft.x=Math.min(1-u,Math.max(0,l.topLeft.x-n.x/o)),l.topLeft.y=Math.min(1-s,Math.max(0,l.topLeft.y-n.y/a)),l.bottomRight.x=l.topLeft.x+u,l.bottomRight.y=l.topLeft.y+s,{id:t.id,type:t.type,props:{crop:l}}}}O(Lv,"id","brushing");var Nv=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"onEnter",(function(){e.editor.setCursor({type:"default"});var t=e.editor.onlySelectedShape;e.editor.on("change-history",e.cleanupCroppingState),e.editor.mark("crop"),t&&e.editor.setCroppingId(t.id)})),O(B(e),"onExit",(function(){e.editor.setCursor({type:"default"}),e.editor.off("change-history",e.cleanupCroppingState)})),O(B(e),"onCancel",(function(){e.editor.setCroppingId(null),e.editor.setSelectedTool("select.idle",{})})),O(B(e),"onPointerDown",(function(t){if(!e.editor.isMenuOpen){if(t.ctrlKey)return e.editor.setCroppingId(null),void e.editor.setSelectedTool("select.brushing",t);switch(t.target){case"canvas":e.cancel();break;case"shape":if(t.shape.id===e.editor.croppingId)return void e.editor.setSelectedTool("select.crop.pointing_crop",t);var n;null!==(n=e.editor.getShapeUtil(t.shape))&&void 0!==n&&n.canCrop(t.shape)?(e.editor.setCroppingId(t.shape.id),e.editor.setSelectedIds([t.shape.id]),e.editor.setSelectedTool("select.crop.pointing_crop",t)):e.cancel();break;case"selection":switch(t.handle){case"mobile_rotate":case"top_left_rotate":case"top_right_rotate":case"bottom_left_rotate":case"bottom_right_rotate":e.editor.setSelectedTool("select.pointing_rotate_handle",R(R({},t),{},{onInteractionEnd:"select.crop"}));break;case"top":case"right":case"bottom":case"left":case"top_left":case"top_right":case"bottom_left":case"bottom_right":e.editor.setSelectedTool("select.pointing_crop_handle",R(R({},t),{},{onInteractionEnd:"select.crop"}));break;default:e.cancel()}}}})),O(B(e),"onDoubleClick",(function(t){if("up"===t.phase&&e.editor.croppingId){var n=e.editor.getShapeById(e.editor.croppingId);if(n){var r,i=e.editor.getShapeUtil(n);if(i)if("selection"===t.target)null===(r=i.onDoubleClickEdge)||void 0===r||r.call(i,n)}}})),O(B(e),"onKeyDown",(function(){e.nudgeCroppingImage(!1)})),O(B(e),"onKeyRepeat",(function(){e.nudgeCroppingImage(!0)})),O(B(e),"onKeyUp",(function(t){if("Enter"===t.code)e.editor.setCroppingId(null),e.editor.setSelectedTool("select.idle",{})})),O(B(e),"cleanupCroppingState",(function(){e.editor.croppingId||e.editor.setSelectedTool("select.idle",{})})),e}return N(n,[{key:"cancel",value:function(){this.editor.setCroppingId(null),this.editor.setSelectedTool("select.idle",{})}},{key:"nudgeCroppingImage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.editor.inputs.keys,n=t.has("ShiftLeft"),r=new va(0,0);if(t.has("ArrowLeft")&&(r.x+=1),t.has("ArrowRight")&&(r.x-=1),t.has("ArrowUp")&&(r.y+=1),t.has("ArrowDown")&&(r.y-=1),!r.equals(new va(0,0))){n&&r.mul(10);var i=this.editor.getShapeById(this.editor.croppingId);if(i){var o=Dv(this.editor,i,r);o&&(e||this.editor.mark("translate crop"),this.editor.updateShapes([o]))}}}}]),n}(Vd);O(Nv,"id","idle");var zv=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"onCancel",(function(){e.editor.setSelectedTool("select.crop.idle",{})})),O(B(e),"onPointerMove",(function(t){e.editor.inputs.isDragging&&e.editor.setSelectedTool("select.crop.translating_crop",t)})),O(B(e),"onPointerUp",(function(t){e.editor.setSelectedTool("select.crop.idle",t)})),e}return N(n)}(Vd);O(zv,"id","pointing_crop");var Bv=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"info",{}),O(B(e),"markId","translating crop"),O(B(e),"snapshot",{}),O(B(e),"onEnter",(function(t){e.info=t,e.snapshot=e.createSnapshot(),e.editor.mark(e.markId),e.editor.setCursor({type:"move"}),e.updateShapes()})),O(B(e),"onExit",(function(){e.editor.setCursor({type:"default"})})),O(B(e),"onPointerMove",(function(){e.updateShapes()})),O(B(e),"onPointerUp",(function(){e.complete()})),O(B(e),"onComplete",(function(){e.complete()})),O(B(e),"onCancel",(function(){e.cancel()})),O(B(e),"onKeyDown",(function(t){switch(t.key){case"Alt":case"Shift":return void e.updateShapes()}})),O(B(e),"onKeyUp",(function(t){switch(t.key){case"Enter":return void e.complete();case"Alt":case"Shift":e.updateShapes()}})),e}return N(n,[{key:"complete",value:function(){this.updateShapes(),this.editor.setSelectedTool("select.crop.idle",this.info)}},{key:"cancel",value:function(){this.editor.bailToMark(this.markId),this.editor.setSelectedTool("select.crop.idle",this.info)}},{key:"createSnapshot",value:function(){return{shape:this.editor.onlySelectedShape}}},{key:"updateShapes",value:function(){var e=this.snapshot.shape;if(e){var t=this.editor.inputs,n=t.originPagePoint,r=t.currentPagePoint.clone().sub(n),i=Dv(this.editor,e,r);i&&this.editor.updateShapes([i],!0)}}}]),n}(Vd);O(Bv,"id","translating_crop");var Fv=function(e){U(n,e);var t=W(n);function n(){return z(this,n),t.apply(this,arguments)}return N(n)}(Vd);O(Fv,"id","crop"),O(Fv,"initial","idle"),O(Fv,"children",(function(){return[Nv,Bv,zv]}));var Uv={bottom:"ns-resize",top:"ns-resize",left:"ew-resize",right:"ew-resize",bottom_left:"nesw-resize",bottom_right:"nwse-resize",top_left:"nwse-resize",top_right:"nesw-resize",bottom_left_rotate:"swne-rotate",bottom_right_rotate:"senw-rotate",top_left_rotate:"nwse-rotate",top_right_rotate:"nesw-rotate",mobile_rotate:"grabbing"},Kv=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"info",{}),O(B(e),"onEnter",(function(t){e.info=t,e.updateCursor()})),O(B(e),"onPointerMove",(function(){e.editor.inputs.isDragging&&e.parent.transition("resizing",e.info)})),O(B(e),"onPointerUp",(function(){e.complete()})),O(B(e),"onCancel",(function(){e.cancel()})),O(B(e),"onComplete",(function(){e.cancel()})),O(B(e),"onInterrupt",(function(){e.cancel()})),e}return N(n,[{key:"updateCursor",value:function(){var e=this.editor.selectedShapes,t=Uv[this.info.handle];this.editor.setCursor({type:t,rotation:1===e.length?e[0].rotation:0})}},{key:"complete",value:function(){this.info.onInteractionEnd?this.editor.setSelectedTool(this.info.onInteractionEnd,{}):this.parent.transition("idle",{})}},{key:"cancel",value:function(){this.info.onInteractionEnd?this.editor.setSelectedTool(this.info.onInteractionEnd,{}):this.parent.transition("idle",{})}}]),n}(Vd);O(Kv,"id","pointing_resize_handle");var Vv=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"info",{}),O(B(e),"markId",""),O(B(e),"snapshot",{}),O(B(e),"onEnter",(function(t){e.info=t,e.markId=e.editor.mark("cropping"),e.snapshot=e.createSnapshot(),e.updateShapes()})),O(B(e),"onPointerMove",(function(){e.updateShapes()})),O(B(e),"onPointerUp",(function(){e.complete()})),O(B(e),"onComplete",(function(){e.complete()})),O(B(e),"onCancel",(function(){e.cancel()})),O(B(e),"getDefaultCrop",(function(){return{topLeft:{x:0,y:0},bottomRight:{x:1,y:1}}})),e}return N(n,[{key:"updateCursor",value:function(){var e=this.editor.selectedShapes[0];if(e){var t=Uv[this.info.handle];this.editor.setCursor({type:t,rotation:e.rotation})}}},{key:"updateShapes",value:function(){var e,t=this.snapshot,n=t.shape,r=t.cursorHandleOffset;if(n&&this.editor.getShapeUtil(Hh)){var i=n.props,o=this.editor.inputs.currentPagePoint.clone().sub(r),a=this.editor.inputs.originPagePoint.clone().sub(r),s=o.clone().sub(a).rot(-n.rotation),u=null!==(e=i.crop)&&void 0!==e?e:this.getDefaultCrop(),l=ce(u),c=new va(n.x,n.y),d=new va(0,0),f=1/(u.bottomRight.x-u.topLeft.x)*i.w,h=1/(u.bottomRight.y-u.topLeft.y)*i.h,p=!1;switch(this.info.handle){case"top":case"top_left":case"top_right":if(h<8)break;p=!0,l.topLeft.y=l.topLeft.y+s.y/h,h*(l.bottomRight.y-l.topLeft.y)<8?(l.topLeft.y=l.bottomRight.y-8/h,d.y=(l.topLeft.y-u.topLeft.y)*h):l.topLeft.y<=0?(l.topLeft.y=0,d.y=(l.topLeft.y-u.topLeft.y)*h):d.y=s.y;break;case"bottom":case"bottom_left":case"bottom_right":if(h<8)break;p=!0,l.bottomRight.y=Math.min(1,l.bottomRight.y+s.y/h),h*(l.bottomRight.y-l.topLeft.y)<8&&(l.bottomRight.y=l.topLeft.y+8/h)}switch(this.info.handle){case"left":case"top_left":case"bottom_left":if(f<8)break;p=!0,l.topLeft.x=l.topLeft.x+s.x/f,f*(l.bottomRight.x-l.topLeft.x)<8?(l.topLeft.x=l.bottomRight.x-8/f,d.x=(l.topLeft.x-u.topLeft.x)*f):l.topLeft.x<=0?(l.topLeft.x=0,d.x=(l.topLeft.x-u.topLeft.x)*f):d.x=s.x;break;case"right":case"top_right":case"bottom_right":if(f<8)break;p=!0,l.bottomRight.x=Math.min(1,l.bottomRight.x+s.x/f),f*(l.bottomRight.x-l.topLeft.x)<8&&(l.bottomRight.x=l.topLeft.x+8/f)}if(p){c.add(d.rot(n.rotation));var v={id:n.id,type:n.type,x:c.x,y:c.y,props:{crop:l,w:(l.bottomRight.x-l.topLeft.x)*f,h:(l.bottomRight.y-l.topLeft.y)*h}};this.editor.updateShapes([v],!0),this.updateCursor()}}}},{key:"complete",value:function(){this.info.onInteractionEnd?this.editor.setSelectedTool(this.info.onInteractionEnd,this.info):(this.editor.setCroppingId(null),this.parent.transition("idle",{}))}},{key:"cancel",value:function(){this.editor.bailToMark(this.markId),this.info.onInteractionEnd?this.editor.setSelectedTool(this.info.onInteractionEnd,this.info):(this.editor.setCroppingId(null),this.parent.transition("idle",{}))}},{key:"createSnapshot",value:function(){var e=this.editor,t=e.selectionRotation,n=e.inputs.originPagePoint,r=this.editor.onlySelectedShape,i=this.editor.selectionBounds,o=va.RotWith(i.getHandlePoint(this.info.handle),i.point,t);return{shape:r,cursorHandleOffset:va.Sub(n,o)}}}]),n}(Vd);O(Vv,"id","cropping");var Wv=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"shapeId",""),O(B(e),"initialHandle",{}),O(B(e),"initialAdjacentHandle",null),O(B(e),"markId",""),O(B(e),"initialPageTransform",void 0),O(B(e),"initialPageRotation",void 0),O(B(e),"info",{}),O(B(e),"isPrecise",!1),O(B(e),"isPreciseId",null),O(B(e),"pointingId",null),O(B(e),"onEnter",(function(t){var n=t.shape,r=t.isCreating,i=t.handle;e.info=t,e.shapeId=n.id,e.markId=r?"creating":e.editor.mark("dragging handle"),e.initialHandle=ce(i),e.initialPageTransform=e.editor.getPageTransform(n),e.initialPageRotation=e.editor.getPageRotation(n),e.editor.setCursor({type:r?"cross":"grabbing",rotation:0});var o=e.editor.getShapeUtil(n).handles(n).sort(T),a=o.findIndex((function(e){return e.id===t.handle.id}));e.initialAdjacentHandle=null;for(var s=a+1;s<o.length;s++){var u=o[s];if("vertex"===u.type&&"middle"!==u.id&&u.id!==t.handle.id){e.initialAdjacentHandle=u;break}}if(!e.initialAdjacentHandle)for(var l=o.length-1;l>=0;l--){var c=o[l];if("vertex"===c.type&&"middle"!==c.id&&c.id!==t.handle.id){e.initialAdjacentHandle=c;break}}var d=n.props[t.handle.id];e.isPrecise=!1,"binding"===(null===d||void 0===d?void 0:d.type)&&(e.editor.setHintingIds([d.boundShapeId]),e.isPrecise=!va.Equals(d.normalizedAnchor,{x:.5,y:.5}),e.isPrecise?e.isPreciseId=d.boundShapeId:e.resetExactTimeout()),e.update()})),O(B(e),"exactTimeout",-1),O(B(e),"onPointerMove",(function(){e.update()})),O(B(e),"onKeyDown",(function(){e.update()})),O(B(e),"onKeyUp",(function(){e.update()})),O(B(e),"onPointerUp",(function(){e.complete()})),O(B(e),"onComplete",(function(){e.complete()})),O(B(e),"onCancel",(function(){e.cancel()})),O(B(e),"onExit",(function(){e.editor.setHintingIds([]),e.editor.snaps.clear(),e.editor.setCursor({type:"default"})})),e}return N(n,[{key:"resetExactTimeout",value:function(){var e=this;-1!==this.exactTimeout&&this.clearExactTimeout(),this.exactTimeout=setTimeout((function(){e.isActive&&!e.isPrecise&&(e.isPrecise=!0,e.isPreciseId=e.pointingId,e.update()),e.exactTimeout=-1}),750)}},{key:"clearExactTimeout",value:function(){-1!==this.exactTimeout&&(clearTimeout(this.exactTimeout),this.exactTimeout=-1)}},{key:"complete",value:function(){this.editor.snaps.clear();var e=this.info.onInteractionEnd;this.editor.instanceState.isToolLocked&&e?this.editor.setSelectedTool(e,{shapeId:this.shapeId}):this.parent.transition("idle",{})}},{key:"cancel",value:function(){this.editor.bailToMark(this.markId),this.editor.snaps.clear();var e=this.info.onInteractionEnd;e?this.editor.setSelectedTool(e,{shapeId:this.shapeId}):this.parent.transition("idle",{})}},{key:"update",value:function(){var e,t=this.editor,n=this.shapeId,r=this.initialHandle,i=this.initialPageRotation,o=this.initialAdjacentHandle,a=t.isSnapMode,s=t.hintingIds,u=t.snaps,l=t.inputs,c=l.currentPagePoint,d=l.originPagePoint,f=l.shiftKey,h=l.ctrlKey,p=l.altKey,v=l.pointerVelocity,g=t.getShapeById(n);if(g){var m=t.getShapeUtil(g),y=c.clone().sub(d).rot(-i).add(r);if(f&&o&&"middle"!==r.id){var b=va.Angle(o,y),w=Aa(b,24)-b;y=va.RotWith(y,o,w)}if(t.snaps.clear(),a?!h:h){var x=t.getPageTransformById(g.id);if(!x)throw Error("Expected a page transform");var k=m.outlineSegments(g).map((function(e){return Ja.applyToPoints(x,e)})),S=m.handles(g).filter((function(e){return"vertex"===e.type})).sort(T).findIndex((function(e){var t=e.index;return r.index===t}));k.splice(S-1,2);var _=u.getSnappingHandleDelta({additionalSegments:k,handlePoint:Ja.applyToPoint(x,y)});_&&y.add(t.getDeltaInShapeSpace(g,_))}var E=null===(e=m.onHandleChange)||void 0===e?void 0:e.call(m,g,{handle:R(R({},r),{},{x:y.x,y:y.y}),isPrecise:this.isPrecise||p}),C=R(R({},g),E);if(r.canBind){var P=C.props[r.id];"binding"===(null===P||void 0===P?void 0:P.type)?s[0]!==P.boundShapeId&&(t.setHintingIds([P.boundShapeId]),this.pointingId=P.boundShapeId,this.isPrecise=v.len()<.5||p,this.isPreciseId=this.isPrecise?P.boundShapeId:null,this.resetExactTimeout()):s.length>0&&(t.setHintingIds([]),this.pointingId=null,this.isPrecise=!1,this.isPreciseId=null,this.resetExactTimeout())}E&&t.updateShapes([C],!0)}}}]),n}(Vd);O(Wv,"id","dragging_handle");var Hv=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"onPointerEnter",(function(t){if("shape"===t.target){var n=e.editor,r=n.selectedIds,i=n.focusLayerId,o=e.editor.getOutermostSelectableShape(t.shape,(function(e){return!r.includes(e.id)}));o.id!==i&&e.editor.setHoveredId(o.id)}})),O(B(e),"onPointerLeave",(function(t){if("shape"===t.target)e.editor.setHoveredId(null)})),O(B(e),"onExit",(function(){var t;if(e.editor.pageState.editingId){var n=e.editor.pageState.editingId;if(n){e.editor.setEditingId(null);var r=e.editor.getShapeById(n),i=e.editor.getShapeUtil(r);null===(t=i.onEditEnd)||void 0===t||t.call(i,r)}}})),O(B(e),"onPointerDown",(function(t){var n,r;if("shape"===t.target){var i=t.shape,o=e.editor.pageState.editingId;if(o){if(i.id===o)return;var a=e.editor.getShapeById(o);if(a){var s,u,l=e.editor.getShapeUtil(a);null===(s=l.onEditEnd)||void 0===s||s.call(l,a);var c=e.editor.getShapeUtil(i);if(i.type===a.type&&null!==(u=c.canEdit)&&void 0!==u&&u.call(c,i)&&!e.editor.isShapeOrAncestorLocked(i))return e.editor.setEditingId(i.id),e.editor.setHoveredId(i.id),void e.editor.setSelectedIds([i.id])}}}e.parent.transition("idle",t),null===(n=e.parent.current.value)||void 0===n||null===(r=n.onPointerDown)||void 0===r||r.call(n,t)})),O(B(e),"onComplete",(function(t){e.parent.transition("idle",t)})),O(B(e),"onCancel",(function(t){e.parent.transition("idle",t)})),e}return N(n)}(Vd);O(Hv,"id","editing_shape");var Yv=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"isDarwin",window.navigator.userAgent.toLowerCase().indexOf("mac")>-1),O(B(e),"onPointerEnter",(function(t){switch(t.target){case"canvas":break;case"shape":var n=e.editor,r=n.selectedIds,i=n.focusLayerId,o=e.editor.getOutermostSelectableShape(t.shape,(function(e){return!r.includes(e.id)}));if(o.id!==i&&e.editor.setHoveredId(o.id),Ss.debugCursors.value){if("geo"!==o.type)break;var a=o.props.text;try{e.editor.setCursor({type:a})}catch(kM){console.error("Cursor type not recognized: '".concat(a,"'")),e.editor.setCursor({type:"default"})}}}})),O(B(e),"onPointerLeave",(function(t){if("shape"===t.target)e.editor.setHoveredId(null)})),O(B(e),"onPointerDown",(function(t){if(!e.editor.isMenuOpen){var n=e.shouldEnterCropMode(t,!0);if(t.ctrlKey&&!n)return"shape"===t.target&&e.isDarwin&&e.editor.inputs.keys.has("ControlLeft")&&!e.editor.isShapeOrAncestorLocked(t.shape)?void e.parent.transition("pointing_shape",t):void e.parent.transition("brushing",t);switch(t.target){case"canvas":e.parent.transition("pointing_canvas",t);break;case"shape":if(e.editor.isShapeOrAncestorLocked(t.shape))break;e.parent.transition("pointing_shape",t);break;case"handle":if(e.editor.isReadOnly)break;e.editor.inputs.altKey?e.parent.transition("pointing_shape",t):e.parent.transition("pointing_handle",t);break;case"selection":switch(t.handle){case"mobile_rotate":case"top_left_rotate":case"top_right_rotate":case"bottom_left_rotate":case"bottom_right_rotate":e.parent.transition("pointing_rotate_handle",t);break;case"top":case"right":case"bottom":case"left":case"top_left":case"top_right":case"bottom_left":case"bottom_right":n?e.parent.transition("pointing_crop_handle",t):e.parent.transition("pointing_resize_handle",t);break;default:e.parent.transition("pointing_selection",t)}}}})),O(B(e),"onDoubleClick",(function(t){if("up"===t.phase)switch(t.target){case"canvas":if(e.editor.isReadOnly)break;e.handleDoubleClickOnCanvas(t);break;case"selection":if(e.editor.isReadOnly)break;var n=e.editor.onlySelectedShape;if(n){var r=e.editor.getShapeUtil(n);if("right"===t.handle||"left"===t.handle||"top"===t.handle||"bottom"===t.handle){var i,o=null===(i=r.onDoubleClickEdge)||void 0===i?void 0:i.call(r,n);if(o)return e.editor.mark("double click edge"),void e.editor.updateShapes([o])}if(r.canCrop(n)&&!e.editor.isShapeOrAncestorLocked(n))return void e.parent.transition("crop",t);e.shouldStartEditingShape(n)&&e.startEditingShape(n,t)}break;case"shape":var a=t.shape,s=e.editor.getShapeUtil(a);if("video"!==a.type&&"embed"!==a.type&&e.editor.isReadOnly)break;if(s.onDoubleClick){var u,l,c=null===(u=s.onDoubleClick)||void 0===u?void 0:u.call(s,a);if(c)return void e.editor.updateShapes([c]);if(s.canCrop(a)&&!e.editor.isShapeOrAncestorLocked(a))return e.editor.mark("select and crop"),e.editor.select(null===(l=t.shape)||void 0===l?void 0:l.id),void e.parent.transition("crop",t)}e.shouldStartEditingShape(a)?e.startEditingShape(a,t):e.handleDoubleClickOnCanvas(t);break;case"handle":var d;if(e.editor.isReadOnly)break;var f=t.shape,h=t.handle,p=e.editor.getShapeUtil(f),v=null===(d=p.onDoubleClickHandle)||void 0===d?void 0:d.call(p,f,h);v?e.editor.updateShapes([v]):e.shouldStartEditingShape(f)&&e.startEditingShape(f,t)}})),O(B(e),"onRightClick",(function(t){switch(t.target){case"canvas":e.editor.selectNone();break;case"shape":var n=e.editor.pageState.selectedIds,r=t.shape,i=e.editor.getOutermostSelectableShape(r,(function(t){return!e.editor.isSelected(t.id)}));n.includes(i.id)||(e.editor.mark("selecting shape"),e.editor.setSelectedIds([i.id]))}})),O(B(e),"onEnter",(function(){e.editor.setHoveredId(null),e.editor.setCursor({type:"default"})})),O(B(e),"onCancel",(function(){e.editor.focusLayerId!==e.editor.currentPageId&&e.editor.selectedIds.length>0?e.editor.popFocusLayer():(e.editor.mark("clearing selection"),e.editor.selectNone())})),O(B(e),"onKeyDown",(function(t){switch(t.code){case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":e.nudgeSelectedShapes(!1)}})),O(B(e),"onKeyRepeat",(function(t){switch(t.code){case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":e.nudgeSelectedShapes(!0)}})),O(B(e),"onKeyUp",(function(t){if(e.editor.isReadOnly){if("Enter"===t.code)if(e.shouldStartEditingShape()&&e.editor.onlySelectedShape)return void e.startEditingShape(e.editor.onlySelectedShape,R(R({},t),{},{target:"shape",shape:e.editor.onlySelectedShape}))}else if("Enter"===t.code){var n=e.editor.selectedShapes;if(n.every((function(t){return e.editor.isShapeOfType(t,ah)})))return void e.editor.setSelectedIds(n.flatMap((function(t){return e.editor.getSortedChildIds(t.id)})));if(e.shouldStartEditingShape()&&e.editor.onlySelectedShape)return void e.startEditingShape(e.editor.onlySelectedShape,R(R({},t),{},{target:"shape",shape:e.editor.onlySelectedShape}));e.shouldEnterCropMode(t,!1)&&e.parent.transition("crop",t)}})),e}return N(n,[{key:"shouldStartEditingShape",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.editor.onlySelectedShape;return!!e&&((!this.editor.isShapeOrAncestorLocked(e)||"embed"===e.type)&&this.editor.getShapeUtil(e).canEdit(e))}},{key:"shouldEnterCropMode",value:function(e,t){var n=this.editor.onlySelectedShape;if(!n)return!1;if(this.editor.isShapeOrAncestorLocked(n))return!1;var r=this.editor.getShapeUtil(n);return t?r.canCrop(n)&&e.ctrlKey:r.canCrop(n)}},{key:"startEditingShape",value:function(e,t){this.editor.isShapeOrAncestorLocked(e)&&"embed"!==e.type||(this.editor.mark("editing shape"),this.editor.setEditingId(e.id),this.parent.transition("editing_shape",t))}},{key:"handleDoubleClickOnCanvas",value:function(e){this.editor.mark("creating text shape");var t=li(),n=this.editor.inputs.currentPagePoint,r=n.x,i=n.y;this.editor.createShapes([{id:t,type:"text",x:r,y:i,props:{text:"",autoSize:!0}}]);var o=this.editor.getShapeById(t);if(o){var a=this.editor.getBounds(o);this.editor.updateShapes([{id:t,type:"text",x:o.x-a.width/2,y:o.y-a.height/2}]),this.editor.setEditingId(t),this.editor.select(t),this.parent.transition("editing_shape",e)}}},{key:"nudgeSelectedShapes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.editor.inputs.keys,n=t.has("ShiftLeft"),r=new va(0,0);t.has("ArrowLeft")&&(r.x-=1),t.has("ArrowRight")&&(r.x+=1),t.has("ArrowUp")&&(r.y-=1),t.has("ArrowDown")&&(r.y+=1),r.equals(new va(0,0))||(e||this.editor.mark("nudge shapes"),this.editor.nudgeShapes(this.editor.selectedIds,r,n))}}]),n}(Vd);O(Yv,"id","idle");var Xv=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"onEnter",(function(){e.editor.inputs.shiftKey||e.editor.selectedIds.length>0&&(e.editor.mark("selecting none"),e.editor.selectNone())})),O(B(e),"onPointerMove",(function(t){e.editor.inputs.isDragging&&e.parent.transition("brushing",t)})),O(B(e),"onPointerUp",(function(){e.complete()})),O(B(e),"onComplete",(function(){e.complete()})),O(B(e),"onInterrupt",(function(){e.parent.transition("idle",{})})),e}return N(n,[{key:"_clickWasInsideFocusedGroup",value:function(){var e=this.editor,t=e.focusLayerId,n=e.inputs;if(!ui(t))return!1;var r=this.editor.getShapeById(t);if(!r)return!1;var i=this.editor.getPointInShapeSpace(r,n.currentPagePoint);return this.editor.getShapeUtil(r).hitTestPoint(r,i)}},{key:"complete",value:function(){this.editor.inputs.shiftKey||(this.editor.selectNone(),this._clickWasInsideFocusedGroup()||this.editor.setFocusLayer(null)),this.parent.transition("idle",{})}}]),n}(Vd);O(Xv,"id","pointing_canvas");var qv=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"info",{}),O(B(e),"onEnter",(function(t){e.info=t;var n=e.editor.selectedShapes[0];n&&(e.updateCursor(n),e.editor.setCroppingId(n.id))})),O(B(e),"onPointerMove",(function(){e.editor.inputs.isDragging&&e.parent.transition("cropping",R(R({},e.info),{},{onInteractionEnd:e.info.onInteractionEnd}))})),O(B(e),"onPointerUp",(function(){e.info.onInteractionEnd?e.editor.setSelectedTool(e.info.onInteractionEnd,e.info):(e.editor.setCroppingId(null),e.parent.transition("idle",{}))})),O(B(e),"onCancel",(function(){e.cancel()})),O(B(e),"onComplete",(function(){e.cancel()})),O(B(e),"onInterrupt",(function(){e.cancel()})),e}return N(n,[{key:"updateCursor",value:function(e){var t=Uv[this.info.handle];this.editor.setCursor({type:t,rotation:e.rotation})}},{key:"cancel",value:function(){this.info.onInteractionEnd?this.editor.setSelectedTool(this.info.onInteractionEnd,this.info):(this.editor.setCroppingId(null),this.parent.transition("idle",{}))}}]),n}(Vd);O(qv,"id","pointing_crop_handle");var $v=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"info",{}),O(B(e),"onEnter",(function(t){e.info=t;var n=t.shape.props[t.handle.id];"binding"===(null===n||void 0===n?void 0:n.type)&&e.editor.setHintingIds([n.boundShapeId]),e.editor.setCursor({type:"grabbing"})})),O(B(e),"onExit",(function(){e.editor.setHintingIds([]),e.editor.setCursor({type:"default"})})),O(B(e),"onPointerUp",(function(){e.parent.transition("idle",e.info)})),O(B(e),"onPointerMove",(function(){e.editor.inputs.isDragging&&e.parent.transition("dragging_handle",e.info)})),O(B(e),"onCancel",(function(){e.cancel()})),O(B(e),"onComplete",(function(){e.cancel()})),O(B(e),"onInterrupt",(function(){e.cancel()})),e}return N(n,[{key:"cancel",value:function(){this.parent.transition("idle",{})}}]),n}(Vd);O($v,"id","pointing_handle");var Gv=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"info",{}),O(B(e),"onEnter",(function(t){e.info=t,e.updateCursor()})),O(B(e),"onPointerMove",(function(){e.editor.inputs.isDragging&&e.parent.transition("rotating",e.info)})),O(B(e),"onPointerUp",(function(){e.complete()})),O(B(e),"onCancel",(function(){e.cancel()})),O(B(e),"onComplete",(function(){e.cancel()})),O(B(e),"onInterrupt",(function(){e.cancel()})),e}return N(n,[{key:"updateCursor",value:function(){var e=this.editor.selectionRotation;this.editor.setCursor({type:Uv[this.info.handle],rotation:e})}},{key:"complete",value:function(){this.info.onInteractionEnd?this.editor.setSelectedTool(this.info.onInteractionEnd,{}):this.parent.transition("idle",{})}},{key:"cancel",value:function(){this.info.onInteractionEnd?this.editor.setSelectedTool(this.info.onInteractionEnd,{}):this.parent.transition("idle",{})}}]),n}(Vd);O(Gv,"id","pointing_rotate_handle");var Qv=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"info",{}),O(B(e),"onEnter",(function(t){e.info=t})),O(B(e),"onPointerUp",(function(t){e.editor.selectNone(),e.parent.transition("idle",t)})),O(B(e),"onPointerMove",(function(t){if(e.editor.inputs.isDragging){if(e.editor.isReadOnly)return;e.parent.transition("translating",t)}})),O(B(e),"onCancel",(function(){e.cancel()})),O(B(e),"onComplete",(function(){e.cancel()})),O(B(e),"onInterrupt",(function(){e.cancel()})),e}return N(n,[{key:"cancel",value:function(){this.parent.transition("idle",{})}}]),n}(Vd);O(Qv,"id","pointing_selection");var Jv=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"eventTargetShape",{}),O(B(e),"selectingShape",{}),O(B(e),"didSelectOnEnter",!1),O(B(e),"onEnter",(function(t){var n;if(e.eventTargetShape=t.shape,e.selectingShape=e.editor.getOutermostSelectableShape(t.shape),e.editor.getShapeUtil(t.shape).onClick||e.selectingShape.id===e.editor.focusLayerId)e.didSelectOnEnter=!1;else{var r=e.editor.isWithinSelection(e.selectingShape.id),i=e.editor.selectedIds.length>1&&(null===(n=e.editor.selectionBounds)||void 0===n?void 0:n.containsPoint(e.editor.inputs.currentPagePoint));if(e.didSelectOnEnter=!r&&e.selectingShape.id!==e.editor.focusLayerId&&!i,e.didSelectOnEnter){var o=e.editor,a=o.inputs,s=o.selectedIds,l=e.editor.getParentShape(t.shape);l&&e.editor.isShapeOfType(l,ah)&&e.editor.cancelDoubleClick(),a.shiftKey&&!a.altKey?s.includes(e.selectingShape.id)||(e.editor.mark("shift selecting shape"),e.editor.setSelectedIds([].concat(u(s),[e.selectingShape.id]))):(e.editor.mark("selecting shape"),e.editor.setSelectedIds([e.selectingShape.id]))}}})),O(B(e),"onPointerUp",(function(t){var n=t.shape;if(n){var r=e.editor.getShapeUtil(n);if(r.onClick){var i,o=null===(i=r.onClick)||void 0===i?void 0:i.call(r,n);if(o)return e.editor.updateShapes([o]),void e.parent.transition("idle",t)}}if(e.didSelectOnEnter||e.selectingShape.id===e.editor.focusLayerId)e.selectingShape.id===e.editor.focusLayerId&&(e.editor.selectedIds.length>0?e.editor.setSelectedIds([]):e.editor.popFocusLayer());else{e.editor.mark("selecting shape (pointer up)");var a=e.editor.getOutermostSelectableShape(e.eventTargetShape,(function(t){return!e.editor.isSelected(t.id)}));if(e.editor.selectedIds.includes(a.id))e.editor.setSelectedIds(e.editor.inputs.shiftKey?e.editor.selectedIds.filter((function(t){return t!==e.selectingShape.id})):[e.selectingShape.id]);else if(e.editor.inputs.shiftKey){var s=e.editor.getAncestors(a);e.editor.setSelectedIds([].concat(u(e.editor.selectedIds.filter((function(e){return!s.find((function(t){return t.id===e}))}))),[a.id]))}else e.editor.setSelectedIds([a.id])}e.parent.transition("idle",t)})),O(B(e),"onPointerMove",(function(t){if(e.editor.inputs.isDragging){if(e.editor.isReadOnly)return;e.parent.transition("translating",t)}})),O(B(e),"onCancel",(function(){e.cancel()})),O(B(e),"onComplete",(function(){e.cancel()})),O(B(e),"onInterrupt",(function(){e.cancel()})),e}return N(n,[{key:"cancel",value:function(){this.parent.transition("idle",{})}}]),n}(Vd);O(Jv,"id","pointing_shape");var Zv=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"info",{}),O(B(e),"markId",""),O(B(e),"creationCursorOffset",{x:0,y:0}),O(B(e),"editAfterComplete",!1),O(B(e),"snapshot",{}),O(B(e),"onEnter",(function(t){var n=t.isCreating,r=void 0!==n&&n,i=t.editAfterComplete,o=void 0!==i&&i,a=t.creationCursorOffset,s=void 0===a?{x:0,y:0}:a;e.info=t,e.editAfterComplete=o,e.creationCursorOffset=s,t.isCreating&&e.editor.setCursor({type:"cross",rotation:0}),e.snapshot=e._createSnapshot(),e.markId=r?"creating":e.editor.mark("starting resizing"),e.handleResizeStart(),e.updateShapes()})),O(B(e),"onPointerMove",(function(){e.updateShapes()})),O(B(e),"onKeyDown",(function(){e.updateShapes()})),O(B(e),"onKeyUp",(function(){e.updateShapes()})),O(B(e),"onPointerUp",(function(){e.complete()})),O(B(e),"onComplete",(function(){e.complete()})),O(B(e),"onCancel",(function(){e.cancel()})),O(B(e),"onExit",(function(){e.editor.snaps.clear()})),O(B(e),"_createSnapshot",(function(){var t=e.editor,n=t.selectedIds,r=t.selectionRotation,i=t.inputs.originPagePoint,o=e.editor.selectionBounds,a=va.RotWith(o.getHandlePoint(e.info.handle),o.point,r),s=va.Sub(i,a),l=new Map;n.forEach((function(t){var r=e.editor.getShapeById(t);if(r){if(l.set(r.id,e._createShapeSnapshot(r)),e.editor.isShapeOfType(r,lh)&&1===n.length)return;e.editor.visitDescendants(r.id,(function(t){var n=e.editor.getShapeById(t);if(n&&(l.set(n.id,e._createShapeSnapshot(n)),e.editor.isShapeOfType(n,lh)))return!1}))}}));var c=!u(l.values()).some((function(e){return!Oa(e.pageRotation,r)||e.isAspectRatioLocked}));return{shapeSnapshots:l,selectionBounds:o,cursorHandleOffset:s,selectionRotation:r,selectedIds:n,canShapesDeform:c,initialSelectionPageBounds:e.editor.selectedPageBounds}})),O(B(e),"_createShapeSnapshot",(function(t){var n=e.editor.getPageTransform(t),r=e.editor.getShapeUtil(t);return{shape:t,bounds:r.bounds(t),pageTransform:n,pageRotation:Ja.Decompose(n).rotation,isAspectRatioLocked:r.isAspectRatioLocked(t)}})),e}return N(n,[{key:"cancel",value:function(){this.editor.bailToMark(this.markId),this.info.onInteractionEnd?this.editor.setSelectedTool(this.info.onInteractionEnd,{}):this.parent.transition("idle",{})}},{key:"complete",value:function(){if(this.handleResizeEnd(),this.editAfterComplete&&this.editor.onlySelectedShape)return this.editor.setEditingId(this.editor.onlySelectedShape.id),this.editor.setSelectedTool("select"),void this.editor.root.current.value.transition("editing_shape",{});this.editor.instanceState.isToolLocked&&this.info.onInteractionEnd?this.editor.setSelectedTool(this.info.onInteractionEnd,{}):this.parent.transition("idle",{})}},{key:"handleResizeStart",value:function(){var e=this,t=this.snapshot.shapeSnapshots,n=[];t.forEach((function(t){var r,i=t.shape,o=e.editor.getShapeUtil(i),a=null===(r=o.onResizeStart)||void 0===r?void 0:r.call(o,i);a&&n.push(a)})),n.length>0&&this.editor.updateShapes(n)}},{key:"handleResizeEnd",value:function(){var e=this,t=this.snapshot.shapeSnapshots,n=[];t.forEach((function(t){var r,i=t.shape,o=e.editor.getShapeById(i.id),a=e.editor.getShapeUtil(i),s=null===(r=a.onResizeEnd)||void 0===r?void 0:r.call(a,i,o);s&&n.push(s)})),n.length>0&&this.editor.updateShapes(n)}},{key:"updateShapes",value:function(){var e=this.editor.inputs,t=e.altKey,n=e.shiftKey,r=this.snapshot,i=r.shapeSnapshots,o=r.selectionBounds,a=r.cursorHandleOffset,s=r.selectedIds,u=r.selectionRotation,l=r.canShapesDeform,c=n||!l,d=this.editor.inputs.ctrlKey,f=this.editor.inputs.currentPagePoint.clone().sub(a).sub(this.creationCursorOffset),h=this.editor.inputs.originPagePoint.clone().sub(a);this.editor.isGridMode&&!d&&f.snapToGrid(this.editor.gridSize);var p=this.info.handle,v=tg(p,Math.PI);if(this.editor.snaps.clear(),(this.editor.isSnapMode?!d:d)&&u%ya===0){var g=this.editor.snaps.snapResize({dragDelta:va.Sub(f,h),initialSelectionPageBounds:this.snapshot.initialSelectionPageBounds,handle:tg(p,u),isAspectRatioLocked:c,isResizingFromCenter:t}).nudge;f.add(g)}var m=va.RotWith(t?o.center:o.getHandlePoint(v),o.point,u),y=va.Sub(f,m).rot(-u),b=va.Sub(h,m).rot(-u),w=va.DivV(y,b);Number.isFinite(w.x)||(w.x=1),Number.isFinite(w.y)||(w.y=1);var x="top"===p||"bottom"===p,k="left"===p||"right"===p;c?k?w.y=Math.abs(w.x):x?w.x=Math.abs(w.y):Math.abs(w.x)>Math.abs(w.y)?w.y=Math.abs(w.x)*(w.y<0?-1:1):w.x=Math.abs(w.y)*(w.x<0?-1:1):(x&&(w.x=1),k&&(w.y=1)),this.info.isCreating||this.updateCursor({dragHandle:p,isFlippedX:w.x<0,isFlippedY:w.y<0,rotation:u});var S,_=X(i.keys());try{for(_.s();!(S=_.n()).done;){var E=S.value,C=i.get(E);this.editor.resizeShape(E,w,{initialBounds:C.bounds,dragHandle:p,initialPageTransform:C.pageTransform,initialShape:C.shape,mode:1===s.length&&E===s[0]?"resize_bounds":"scale_shape",scaleOrigin:m,scaleAxisRotation:u})}}catch(P){_.e(P)}finally{_.f()}}},{key:"updateCursor",value:function(e){var t=e.dragHandle,n=e.isFlippedX,r=e.isFlippedY,i=e.rotation,o=R({},this.editor.cursor);switch(t){case"top_left":case"bottom_right":o.type="nwse-resize",n!==r&&(o.type="nesw-resize");break;case"top_right":case"bottom_left":o.type="nesw-resize",n!==r&&(o.type="nwse-resize")}o.rotation=i,this.editor.setCursor(o)}}]),n}(Vd);O(Zv,"id","resizing");var eg=["top","top_right","right","bottom_right","bottom","bottom_left","left","top_left"];function tg(e,t){t%=ba;var n=Math.round(t/(ma/4)),r=eg.indexOf(e);return eg[(r+n)%eg.length]}var ng=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"snapshot",{}),O(B(e),"info",{}),O(B(e),"markId",""),O(B(e),"onEnter",(function(t){e.info=t,e.markId=e.editor.mark("rotate start"),e.snapshot=iv({editor:e.editor}),e.handleStart()})),O(B(e),"onExit",(function(){e.editor.setCursor({type:"none"}),e.snapshot={}})),O(B(e),"onPointerMove",(function(){e.update()})),O(B(e),"onKeyDown",(function(){e.update()})),O(B(e),"onKeyUp",(function(){e.update()})),O(B(e),"onPointerUp",(function(){e.complete()})),O(B(e),"onComplete",(function(){e.complete()})),O(B(e),"onCancel",(function(){e.cancel()})),O(B(e),"update",(function(){var t=e._getRotationFromPointerPosition({snapToNearestDegree:!1});ov({editor:e.editor,delta:t,snapshot:e.snapshot,stage:"update"}),e.editor.setCursor({type:Uv[e.info.handle],rotation:t+e.snapshot.initialSelectionRotation})})),O(B(e),"cancel",(function(){e.editor.bailToMark(e.markId),e.info.onInteractionEnd?e.editor.setSelectedTool(e.info.onInteractionEnd,e.info):e.parent.transition("idle",e.info)})),O(B(e),"complete",(function(){ov({editor:e.editor,delta:e._getRotationFromPointerPosition({snapToNearestDegree:!0}),snapshot:e.snapshot,stage:"end"}),e.info.onInteractionEnd?e.editor.setSelectedTool(e.info.onInteractionEnd,e.info):e.parent.transition("idle",e.info)})),e}return N(n,[{key:"handleStart",value:function(){var e=this._getRotationFromPointerPosition({snapToNearestDegree:!1});ov({editor:this.editor,delta:this._getRotationFromPointerPosition({snapToNearestDegree:!1}),snapshot:this.snapshot,stage:"start"}),this.editor.setCursor({type:Uv[this.info.handle],rotation:e+this.snapshot.initialSelectionRotation})}},{key:"_getRotationFromPointerPosition",value:function(e){var t=e.snapToNearestDegree,n=this.editor,r=n.selectionPageCenter,i=n.inputs,o=i.shiftKey,a=i.currentPagePoint,s=this.snapshot,u=s.initialCursorAngle,l=s.initialSelectionRotation,c=l+(r.angle(a)-u);if(o)c=Aa(c,24);else if(t&&(c=Math.round(c/wa)*wa,this.editor.isCoarsePointer)){var d=Aa(c,4),f=Ta(c,d);Math.abs(f)<function(e){return e*ma/180}(5)&&(c=d)}return c-l}}]),n}(Vd);O(ng,"id","rotating");var rg=function(){function e(t){var n=this;z(this,e),O(this,"state",void 0),O(this,"points",void 0),O(this,"size",void 0),O(this,"color",void 0),O(this,"opacity",void 0),O(this,"delay",void 0),O(this,"timeoutMs",0),O(this,"delayRemaining",0),O(this,"onUpdate",void 0),O(this,"onComplete",void 0),O(this,"prev",null),O(this,"next",null),O(this,"resume",(function(){n.state="active"})),O(this,"pause",(function(){n.state="starting"})),O(this,"stop",(function(){n.delayRemaining=Math.min(n.delayRemaining,200),n.state="stopping"})),O(this,"addPoint",(function(e,t){var r=n.prev,i={x:e,y:t,z:.5};r&&va.Dist(r,i)<1||(n.next=i)})),O(this,"tick",(function(e){n.timeoutMs+=e,n.delayRemaining>0&&(n.delayRemaining=Math.max(0,n.delayRemaining-e)),n.timeoutMs>=16&&(n.timeoutMs=0);var t=n.timeoutMs,r=n.state,i=n.prev,o=n.next,a=n.points;switch(r){case"active":o&&o!==i?(n.prev=o,a.push(o),0===n.delayRemaining&&a.length>8&&a.shift(),n.updateScribble()):0===t&&(a.length>1?(a.shift(),n.updateScribble()):n.delayRemaining=n.delay);break;case"stopping":if(0===n.delayRemaining&&0===t){if(1===a.length)return n.state="paused",void n.onComplete();n.size*=.9,a.shift(),n.updateScribble()}}}));var r=t.size,i=void 0===r?20:r,o=t.color,a=void 0===o?"accent":o,s=t.opacity,u=void 0===s?.8:s,l=t.delay,c=void 0===l?0:l,d=t.onComplete,f=t.onUpdate;this.onUpdate=f,this.onComplete=d,this.size=i,this.color=a,this.delay=c,this.opacity=u,this.points=[],this.state="starting",this.prev=null,this.next=null,this.delayRemaining=this.delay,this.resume()}return N(e,[{key:"getScribble",value:function(){return{state:this.state,size:this.size,color:this.color,opacity:this.opacity,delay:this.delay,points:u(this.points)}}},{key:"updateScribble",value:function(){this.onUpdate(this.getScribble())}}]),e}(),ig=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"hits",new Set),O(B(e),"size",0),O(B(e),"scribble",{}),O(B(e),"initialSelectedIds",new Set),O(B(e),"newlySelectedIds",new Set),O(B(e),"onEnter",(function(){e.initialSelectedIds=new Set(e.editor.inputs.shiftKey?e.editor.selectedIds:[]),e.newlySelectedIds=new Set,e.size=0,e.hits.clear(),e.startScribble(),e.updateBrushSelection(),requestAnimationFrame((function(){e.editor.setBrush(null)}))})),O(B(e),"onExit",(function(){e.editor.setErasingIds([]),e.scribble.stop()})),O(B(e),"onPointerMove",(function(){e.updateBrushSelection()})),O(B(e),"onPointerUp",(function(){e.complete()})),O(B(e),"onKeyDown",(function(){e.updateBrushSelection()})),O(B(e),"onKeyUp",(function(){e.editor.inputs.altKey?e.updateBrushSelection():e.parent.transition("brushing",{})})),O(B(e),"startScribble",(function(){var t;e.scribble.tick&&e.editor.off("tick",null===(t=e.scribble)||void 0===t?void 0:t.tick);e.scribble=new rg({onUpdate:e.onScribbleUpdate,onComplete:e.onScribbleComplete,color:"selection-stroke",opacity:.32,size:12}),e.editor.on("tick",e.scribble.tick)})),O(B(e),"pushPointToScribble",(function(){var t=e.editor.inputs.currentPagePoint,n=t.x,r=t.y;e.scribble.addPoint(n,r)})),O(B(e),"onScribbleUpdate",(function(t){e.editor.setScribble(t)})),O(B(e),"onScribbleComplete",(function(){e.editor.off("tick",e.scribble.tick),e.editor.setScribble(null)})),O(B(e),"onCancel",(function(){e.cancel()})),O(B(e),"onComplete",(function(){e.complete()})),e}return N(n,[{key:"updateBrushSelection",value:function(){var e=this.editor,t=e.shapesArray,n=e.inputs,r=n.originPagePoint,i=n.previousPagePoint,o=n.currentPagePoint;this.pushPointToScribble();for(var a,s,l=t,c=0,d=l.length;c<d;c++)if(a=l[c],s=this.editor.getShapeUtil(a),!(this.editor.isShapeOfType(a,ah)||this.newlySelectedIds.has(a.id)||this.editor.isShapeOfType(a,lh)&&s.hitTestPoint(a,this.editor.getPointInShapeSpace(a,r))||this.editor.isShapeOrAncestorLocked(a))&&s.hitTestLineSegment(a,this.editor.getPointInShapeSpace(a,i),this.editor.getPointInShapeSpace(a,o))){var f=this.editor.getOutermostSelectableShape(a),h=this.editor.getPageMaskById(f.id);if(h)if(null!==cs(i,o,h))if(!Ba(o,h))continue;this.newlySelectedIds.add(f.id)}this.editor.setSelectedIds(u(new Set([].concat(u(this.newlySelectedIds),u(this.initialSelectedIds)))),!0)}},{key:"complete",value:function(){this.parent.transition("idle",{})}},{key:"cancel",value:function(){this.editor.setSelectedIds(u(this.initialSelectedIds),!0),this.parent.transition("idle",{})}}]),n}(Vd);O(ig,"id","scribble_brushing");var og=function(){function e(t){var n=this;z(this,e),O(this,"prevDroppingShapeId",null),O(this,"currDroppingShapeId",null),O(this,"droppingNodeTimer",null),O(this,"dispose",(function(){n.clear()})),this.editor=t,t.disposables.add(this.dispose)}return N(e,[{key:"updateDroppingNode",value:function(e,t){if(null===this.droppingNodeTimer){var n,r,i=this.editor.inputs.currentPagePoint;this.currDroppingShapeId=null!==(n=null===(r=this.editor.getDroppingShape(i,e))||void 0===r?void 0:r.id)&&void 0!==n?n:null,this.setDragTimer(e,1e3,t)}else this.editor.inputs.pointerVelocity.len()>.5&&(clearInterval(this.droppingNodeTimer),this.setDragTimer(e,100,t))}},{key:"setDragTimer",value:function(e,t,n){var r=this;this.droppingNodeTimer=setTimeout((function(){r.editor.batch((function(){r.handleDrag(e,n)})),r.droppingNodeTimer=null}),t)}},{key:"handleDrag",value:function(e,t){var n,r,i=this,o=this.editor.inputs.currentPagePoint;e=$(e.map((function(e){return i.editor.getShapeById(e.id)})));var a=null!==(n=null===(r=this.editor.getDroppingShape(o,e))||void 0===r?void 0:r.id)&&void 0!==n?n:null;a!==this.currDroppingShapeId&&(this.prevDroppingShapeId=this.currDroppingShapeId,this.currDroppingShapeId=a);var s=this.prevDroppingShapeId;if(a!==s){var u,l,c=s&&this.editor.getShapeById(s),d=a&&this.editor.getShapeById(a);if(this.prevDroppingShapeId=this.currDroppingShapeId,c)null===(u=(l=this.editor.getShapeUtil(c)).onDragShapesOut)||void 0===u||u.call(l,c,e);if(d){var f,h,p=null===(f=(h=this.editor.getShapeUtil(d)).onDragShapesOver)||void 0===f?void 0:f.call(h,d,e);p&&p.shouldHint&&this.editor.setHintingIds([d.id])}else this.editor.setHintingIds([]);null===t||void 0===t||t()}}},{key:"dropShapes",value:function(e){var t=this.currDroppingShapeId;if(this.handleDrag(e),t){var n,r,i=this.editor.getShapeById(t);if(!i)return;null===(n=(r=this.editor.getShapeUtil(i)).onDropShapesOver)||void 0===n||n.call(r,i,e)}}},{key:"clear",value:function(){this.prevDroppingShapeId=null,this.currDroppingShapeId=null,null!==this.droppingNodeTimer&&clearInterval(this.droppingNodeTimer),this.droppingNodeTimer=null,this.editor.setHintingIds([])}}]),e}(),ag=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"info",{}),O(B(e),"selectionSnapshot",{}),O(B(e),"snapshot",{}),O(B(e),"markId",""),O(B(e),"isCloning",!1),O(B(e),"isCreating",!1),O(B(e),"editAfterComplete",!1),O(B(e),"dragAndDropManager",new og(e.editor)),O(B(e),"onEnter",(function(t){var n=t.isCreating,r=void 0!==n&&n,i=t.editAfterComplete,o=void 0!==i&&i;e.info=t,e.isCreating=r,e.editAfterComplete=o,e.markId=r?"creating":e.editor.mark("translating"),e.handleEnter(t),e.editor.on("tick",e.updateParent)})),O(B(e),"updateParent",(function(){var t=B(e).snapshot;e.dragAndDropManager.updateDroppingNode(t.movingShapes,e.updateParentTransforms)})),O(B(e),"onExit",(function(){e.editor.off("tick",e.updateParent),e.selectionSnapshot={},e.snapshot={},e.editor.snaps.clear(),e.editor.setCursor({type:"default"}),e.dragAndDropManager.clear()})),O(B(e),"onPointerMove",(function(){e.updateShapes()})),O(B(e),"onKeyDown",(function(){!e.editor.inputs.altKey||e.isCloning?e.updateShapes():e.startCloning()})),O(B(e),"onKeyUp",(function(){e.editor.inputs.altKey||!e.isCloning?e.updateShapes():e.stopCloning()})),O(B(e),"onPointerUp",(function(){e.complete()})),O(B(e),"onComplete",(function(){e.complete()})),O(B(e),"onCancel",(function(){e.cancel()})),O(B(e),"updateParentTransforms",(function(){var t=B(e),n=t.editor,r=t.snapshot.shapeSnapshots,i=[];r.forEach((function(e){var t=n.getShapeById(e.shape.id);if(!t)return null;i.push(t);var r=bn(t.parentId)?null:Ja.Inverse(n.getPageTransformById(t.parentId));e.parentTransform=r}))})),e}return N(n,[{key:"reset",value:function(){this.editor.bailToMark(this.markId)}},{key:"startCloning",value:function(){this.isCreating||(this.isCloning=!0,this.reset(),this.markId=this.editor.mark("translating"),this.editor.duplicateShapes(),this.snapshot=sg(this.editor),this.handleStart(),this.updateShapes())}},{key:"stopCloning",value:function(){this.isCloning=!1,this.snapshot=this.selectionSnapshot,this.reset(),this.markId=this.editor.mark("translating"),this.updateShapes()}},{key:"complete",value:function(){if(this.updateShapes(),this.dragAndDropManager.dropShapes(this.snapshot.movingShapes),this.handleEnd(),this.editor.instanceState.isToolLocked&&this.info.onInteractionEnd)this.editor.setSelectedTool(this.info.onInteractionEnd);else if(this.editAfterComplete){var e=this.editor.onlySelectedShape;e&&(this.editor.setEditingId(e.id),this.editor.setSelectedTool("select"),this.editor.root.current.value.transition("editing_shape",{}))}else this.parent.transition("idle",{})}},{key:"cancel",value:function(){this.reset(),this.info.onInteractionEnd?this.editor.setSelectedTool(this.info.onInteractionEnd):this.parent.transition("idle",this.info)}},{key:"handleEnter",value:function(e){this.isCloning=!1,this.info=e,this.editor.setCursor({type:"move"}),this.selectionSnapshot=sg(this.editor),this.isCreating||!this.editor.inputs.altKey?(this.snapshot=this.selectionSnapshot,this.handleStart(),this.updateShapes()):this.startCloning()}},{key:"handleStart",value:function(){var e=this,t=this.snapshot.movingShapes,n=[];t.forEach((function(t){var r,i=e.editor.getShapeUtil(t),o=null===(r=i.onTranslateStart)||void 0===r?void 0:r.call(i,t);o&&n.push(o)})),n.length>0&&this.editor.updateShapes(n)}},{key:"handleEnd",value:function(){var e=this,t=this.snapshot.movingShapes,n=[];t.forEach((function(t){var r,i=e.editor.getShapeById(t.id),o=e.editor.getShapeUtil(t),a=null===(r=o.onTranslateEnd)||void 0===r?void 0:r.call(o,t,i);a&&n.push(a)})),n.length>0&&this.editor.updateShapes(n)}},{key:"handleChange",value:function(){var e=this,t=this.snapshot.movingShapes,n=[];t.forEach((function(t){var r,i=e.editor.getShapeById(t.id),o=e.editor.getShapeUtil(t),a=null===(r=o.onTranslate)||void 0===r?void 0:r.call(o,t,i);a&&n.push(a)})),n.length>0&&this.editor.updateShapes(n)}},{key:"updateShapes",value:function(){var e=this.snapshot;this.dragAndDropManager.updateDroppingNode(e.movingShapes,this.updateParentTransforms),function(e){var t=e.editor,n=e.shapeSnapshots,r=e.averagePagePoint,i=e.initialSelectionPageBounds,o=e.initialSelectionSnapPoints,a=t.inputs,s=t.isGridMode,u=t.gridSize,l=va.Sub(a.currentPagePoint,a.originPagePoint),c=t.inputs.shiftKey?Math.abs(l.x)<Math.abs(l.y)?"x":"y":null;"x"===c?l.x=0:"y"===c&&(l.y=0);if(t.snaps.clear(),(t.isSnapMode?!a.ctrlKey:a.ctrlKey)&&t.inputs.pointerVelocity.len()<.5){var d=t.snaps.snapTranslate({dragDelta:l,initialSelectionPageBounds:i,lockedAxis:c,initialSelectionSnapPoints:o}).nudge;l.add(d)}var f=va.Add(r,l);s&&!a.ctrlKey&&f.snapToGrid(u);var h=va.Sub(f,r);t.updateShapes($(n.map((function(e){var t=e.shape,n=e.pagePoint,r=e.parentTransform,i=va.Add(n,h),o=r?Ja.applyToPoint(r,i):i;return{id:t.id,type:t.type,x:o.x,y:o.y}}))),!0)}({editor:this.editor,shapeSnapshots:e.shapeSnapshots,averagePagePoint:e.averagePagePoint,initialSelectionPageBounds:e.initialPageBounds,initialSelectionSnapPoints:e.initialSnapPoints}),this.handleChange()}}]),n}(Vd);function sg(e){var t=[],n=[],r=$(e.selectedIds.map((function(r){var i=e.getShapeById(r);if(!i)return null;t.push(i);var o=e.getPagePointById(r);return o?(n.push(o),{shape:i,pagePoint:o,parentTransform:yn.isId(i.parentId)?null:Ja.Inverse(e.getPageTransformById(i.parentId))}):null})));return{averagePagePoint:va.Average(n),movingShapes:t,shapeSnapshots:r,initialPageBounds:e.selectedPageBounds,initialSnapPoints:1===e.selectedIds.length?e.snaps.snapPointsCache.get(e.selectedIds[0]):e.selectedPageBounds?e.selectedPageBounds.snapPoints.map((function(e,t){return{id:"selection:"+t,x:e.x,y:e.y}})):[]}}O(ag,"id","translating");var ug=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"onExit",(function(){e.editor.pageState.editingId&&e.editor.setEditingId(null)})),e}return N(n)}(Vd);O(ug,"id","select"),O(ug,"initial","idle"),O(ug,"children",(function(){return[Fv,Vv,Yv,Xv,Jv,ag,Lv,ig,qv,Qv,Kv,Hv,Zv,ng,Gv,$v,Wv]}));var lg=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"info",{}),O(B(e),"onEnter",(function(t){e.info=t})),O(B(e),"onPointerDown",(function(){e.parent.transition("pointing",e.info)})),e}return N(n)}(Vd);O(lg,"id","idle");var cg=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"info",{}),O(B(e),"onEnter",(function(t){e.info=t})),O(B(e),"onPointerUp",(function(){e.complete()})),O(B(e),"onPointerMove",(function(){e.editor.inputs.isDragging&&e.parent.transition("zoom_brushing",e.info)})),O(B(e),"onCancel",(function(){e.cancel()})),e}return N(n,[{key:"complete",value:function(){var e=this.editor.inputs.currentScreenPoint;this.editor.inputs.altKey?this.editor.zoomOut(e,{duration:220}):this.editor.zoomIn(e,{duration:220}),this.parent.transition("idle",this.info)}},{key:"cancel",value:function(){this.parent.transition("idle",this.info)}}]),n}(Vd);O(cg,"id","pointing");var dg=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"info",{}),O(B(e),"zoomBrush",new Wa),O(B(e),"onEnter",(function(t){e.info=t,e.update()})),O(B(e),"onExit",(function(){e.editor.setZoomBrush(null)})),O(B(e),"onPointerMove",(function(){e.update()})),O(B(e),"onPointerUp",(function(){e.complete()})),O(B(e),"onCancel",(function(){e.cancel()})),e}return N(n,[{key:"update",value:function(){var e=this.editor.inputs,t=e.originPagePoint,n=e.currentPagePoint;this.zoomBrush.setTo(Wa.FromPoints([t,n])),this.editor.setZoomBrush(this.zoomBrush.toJson())}},{key:"cancel",value:function(){this.parent.transition("idle",this.info)}},{key:"complete",value:function(){var e=this.zoomBrush,t=8/this.editor.zoomLevel;if(e.width<t&&e.height<t){var n=this.editor.inputs.currentScreenPoint;this.editor.inputs.altKey?this.editor.zoomOut(n,{duration:220}):this.editor.zoomIn(n,{duration:220})}else{var r=this.editor.inputs.altKey?this.editor.zoomLevel/2:void 0;this.editor.zoomToBounds(e.x,e.y,e.width,e.height,r,{duration:220})}this.parent.transition("idle",this.info)}}]),n}(Vd);O(dg,"id","zoom_brushing");var fg=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"info",{}),O(B(e),"onEnter",(function(t){e.info=t,e.updateCursor()})),O(B(e),"onExit",(function(){e.editor.setZoomBrush(null),e.editor.setCursor({type:"default"})})),O(B(e),"onKeyDown",(function(){e.updateCursor()})),O(B(e),"onKeyUp",(function(t){e.updateCursor(),"KeyZ"===t.code&&e.complete()})),O(B(e),"onInterrupt",(function(){e.complete()})),e}return N(n,[{key:"updateCursor",value:function(){this.editor.inputs.altKey?this.editor.setCursor({type:"zoom-out"}):this.editor.setCursor({type:"zoom-in"})}},{key:"complete",value:function(){this.info.onInteractionEnd&&"select"!==this.info.onInteractionEnd?this.editor.setSelectedTool(this.info.onInteractionEnd,this.info):this.parent.transition("select",{})}}]),n}(Vd);O(fg,"id","zoom"),O(fg,"initial","idle"),O(fg,"children",(function(){return[lg,dg,cg]}));var hg=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"onKeyDown",(function(t){if("KeyZ"===t.code)if(!t.shiftKey&&!t.ctrlKey){var n,r=e.current.value;r&&"idle"===(null===(n=r.current.value)||void 0===n?void 0:n.id)&&e.editor.setSelectedTool("zoom",R(R({},t),{},{onInteractionEnd:r.id}))}})),e}return N(n)}(Vd);O(hg,"id","root"),O(hg,"initial","select"),O(hg,"children",(function(){return[ug,fg]}));var pg,vg,gg=Object.defineProperty,mg=Object.getOwnPropertyDescriptor,yg=function(e,t,n,r){for(var i,o=r>1?void 0:r?mg(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&gg(t,n,o),o},bg=function(e){U(n,e);var t=W(n);function n(e){var r,i=e.store,o=e.user,a=e.shapes,s=e.tools,l=e.getContainer;z(this,n),O(B(r=t.call(this)),"store",void 0),O(B(r),"root",void 0),O(B(r),"disposables",new Set),O(B(r),"_dprManager",new hv(B(r))),O(B(r),"_activeAreaManager",new dv(B(r))),O(B(r),"_tickManager",new jv(B(r))),O(B(r),"_updateDepth",0),O(B(r),"externalContentManager",new pv(B(r))),O(B(r),"snaps",new Iv(B(r))),O(B(r),"user",void 0),O(B(r),"isSafari",void 0),O(B(r),"isIos",void 0),O(B(r),"isChromeForIos",void 0),O(B(r),"getContainer",void 0),O(B(r),"history",new kv(B(r),(function(){return r._complete()}),(function(e){r.annotateError(e,{origin:"history.batch",willCrashApp:!0}),r.crash(e)}))),O(B(r),"shapeUtils",void 0),O(B(r),"_selectionSharedStyles",Nt("_selectionSharedStyles",(function(){var e,t=B(r).selectedShapes,n=new Pp,i=X(t);try{for(i.s();!(e=i.n()).done;){var o=e.value;r._extractSharedStyles(o,n)}}catch(a){i.e(a)}finally{i.f()}return n}))),O(B(r),"_invalidParents",new Set),O(B(r),"_crashingError",null),O(B(r),"_canMoveCamera",Mt("can move camera",!0)),O(B(r),"_isFocused",Mt("_isFocused",!1)),O(B(r),"_isCoarsePointer",Mt("isCoarsePointer",!1)),O(B(r),"_openMenus",Mt("open-menus",[])),O(B(r),"_isChangingStyle",Mt("isChangingStyle",!1)),O(B(r),"_isChangingStyleTimeout",-1),O(B(r),"_isPenMode",Mt("isPenMode",!1)),O(B(r),"_touchEventsRemainingBeforeExitingPenMode",0),O(B(r),"_isReadOnly",Mt("isReadOnly",!1)),O(B(r),"_currentPageShapeIds",void 0),O(B(r),"_setSelectedIds",r.history.createCommand("setSelectedIds",(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=r.pageState.selectedIds,i=new Set(r.pageState.selectedIds);return e.length===i.size&&e.every((function(e){return i.has(e)}))?null:{data:{ids:e,prevSelectedIds:n},squashing:t,preservesRedoStack:!0}}),{do:function(e){var t=e.ids;r.store.update(r.pageState.id,(function(e){return R(R({},e),{},{selectedIds:t})}))},undo:function(e){var t=e.prevSelectedIds;r.store.update(r.pageState.id,(function(){return R(R({},r.pageState),{},{selectedIds:t})}))},squash:function(e,t){return{ids:t.ids,prevSelectedIds:e.prevSelectedIds}}})),O(B(r),"_setFocusLayer",r.history.createCommand("setFocusLayer",(function(e){if(null!==e||r.canUndo)return{data:{prev:r.pageState.focusLayerId,next:e},preservesRedoStack:!0,squashing:!0}}),{do:function(e){var t=e.next;r.store.update(r.pageState.id,(function(e){return R(R({},e),{},{focusLayerId:t})}))},undo:function(e){var t=e.prev;r.store.update(r.pageState.id,(function(e){return R(R({},e),{},{focusLayerId:t})}))},squash:function(e,t){return{prev:e.prev,next:t.next}}})),O(B(r),"_cameraState",Mt("camera state","idle")),O(B(r),"_cameraStateTimeoutRemaining",0),O(B(r),"_lastUpdateRenderingBoundsTimestamp",Date.now()),O(B(r),"_decayCameraStateTimeout",(function(e){r._cameraStateTimeoutRemaining-=e,r._cameraStateTimeoutRemaining<=0&&(r.off("tick",r._decayCameraStateTimeout),r._cameraState.set("idle"),r.updateRenderingBounds())})),O(B(r),"_tickCameraState",(function(){r._cameraStateTimeoutRemaining=64;var e=Date.now();"idle"===r._cameraState.__unsafe__getWithoutCapture()?(r._lastUpdateRenderingBoundsTimestamp=e,r._cameraState.set("moving"),r.on("tick",r._decayCameraStateTimeout)):e-r._lastUpdateRenderingBoundsTimestamp>620&&r.updateRenderingBounds()})),O(B(r),"_renderingBounds",Mt("rendering viewport",new Wa)),O(B(r),"_renderingBoundsExpanded",Mt("rendering viewport expanded",new Wa)),O(B(r),"inputs",{originPagePoint:new va,originScreenPoint:new va,previousPagePoint:new va,previousScreenPoint:new va,currentPagePoint:new va,currentScreenPoint:new va,keys:new Set,buttons:new Set,isPen:!1,shiftKey:!1,ctrlKey:!1,altKey:!1,isDragging:!1,isPointing:!1,isPinching:!1,isEditing:!1,isPanning:!1,pointerVelocity:new va}),O(B(r),"_clickManager",new fv(B(r))),O(B(r),"_prevCursor","default"),O(B(r),"_shiftKeyTimeout",-1),O(B(r),"_setShiftKeyTimeout",(function(){r.inputs.shiftKey=!1,r.dispatch({type:"keyboard",name:"key_up",key:"Shift",shiftKey:r.inputs.shiftKey,ctrlKey:r.inputs.ctrlKey,altKey:r.inputs.altKey,code:"ShiftLeft"})})),O(B(r),"_altKeyTimeout",-1),O(B(r),"_setAltKeyTimeout",(function(){r.inputs.altKey=!1,r.dispatch({type:"keyboard",name:"key_up",key:"Alt",shiftKey:r.inputs.shiftKey,ctrlKey:r.inputs.ctrlKey,altKey:r.inputs.altKey,code:"AltLeft"})})),O(B(r),"_ctrlKeyTimeout",-1),O(B(r),"_setCtrlKeyTimeout",(function(){r.inputs.ctrlKey=!1,r.dispatch({type:"keyboard",name:"key_up",key:"Ctrl",shiftKey:r.inputs.shiftKey,ctrlKey:r.inputs.ctrlKey,altKey:r.inputs.altKey,code:"ControlLeft"})})),O(B(r),"_restoreToolId","select"),O(B(r),"_pinchStart",1),O(B(r),"_didPinch",!1),O(B(r),"_selectedIdsAtPointerDown",[]),O(B(r),"capturedPointerId",null),O(B(r),"_createShapes",r.history.createCommand("createShapes",(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(r.isReadOnly)return null;if(e.length<=0)return null;var n=B(r),i=n.currentPageShapeIds,o=n.selectedIds,a=t?o:void 0,s=e.length+i.size>Zs;s&&wg(B(r));var u=s?e.slice(0,Zs-i.size):e;return 0===u.length?null:{data:{currentPageId:r.currentPageId,createdIds:e.map((function(e){return e.id})),prevSelectedIds:a,partials:u,select:t}}}),{do:function(e){var t=e.createdIds,n=e.partials,i=e.select,o=B(r).focusLayerId;n=n.map((function(e){if(!e.parentId||!r.store.get(e.parentId)&&!n.find((function(t){return t.id===e.parentId}))){var t,i;e=R({},e);var a=r.getParentIdForNewShapeAtPoint({x:null!==(t=e.x)&&void 0!==t?t:0,y:null!==(i=e.y)&&void 0!==i?i:0},e.type);if(e.parentId=a,ui(a)){var s,u,l,c=r.getPointInShapeSpace(r.getShapeById(a),{x:null!==(s=e.x)&&void 0!==s?s:0,y:null!==(u=e.y)&&void 0!==u?u:0});e.x=c.x,e.y=c.y,e.rotation=-r.getPageRotationById(a)+(null!==(l=e.rotation)&&void 0!==l?l:0)}return e.parentId===e.id&&(e.parentId=o),e}return e}));var a,s=new Map,u=[],l=X(n);try{for(l.s();!(a=l.n()).done;){var c,d,f,h,p=a.value,v=r.getShapeUtil(p),g=p.index;if(!g){var m,y=null!==(m=p.parentId)&&void 0!==m?m:o;s.has(y)||s.set(y,r.getHighestIndexForParent(y)),g=s.get(y),s.set(y,P(g))}var b,w=v.defaultProps(),x=X(v.styleProps);try{for(x.s();!(b=x.n()).done;){var k=L(b.value,2),S=k[0];w[k[1]]=r.getStyleForNextShape(S)}}catch(C){x.e(C)}finally{x.f()}var _=r.store.schema.types.shape.create(R(R({},p),{},{index:g,opacity:null!==(c=p.opacity)&&void 0!==c?c:r.instanceState.opacityForNextShape,parentId:null!==(d=p.parentId)&&void 0!==d?d:o,props:"props"in p?R(R({},w),p.props):w}));if(void 0===_.index)throw Error("no index!");var E=null===(f=(h=r.getShapeUtil(_)).onBeforeCreate)||void 0===f?void 0:f.call(h,_);E&&(_=E),u.push(_)}}catch(C){l.e(C)}finally{l.f()}r.store.put(u),i&&r.store.update(r.pageState.id,(function(e){return R(R({},e),{},{selectedIds:t})}))},undo:function(e){var t=e.createdIds,n=e.prevSelectedIds;r.store.remove(t),n&&r.store.update(r.pageState.id,(function(e){return R(R({},e),{},{selectedIds:n})}))}})),O(B(r),"animatingShapes",new Map),O(B(r),"_updateShapes",r.history.createCommand("updateShapes",(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(r.isReadOnly)return null;var n=$(e),i=Object.fromEntries($(n.map((function(e){var t=e.id;return r.getShapeById(t)}))).map((function(e){return[e.id,e]})));if(n.length<=0)return null;var o=$(n.map((function(e){var t,n=i[e.id];if(!n)return null;for(var r=null,o=0,a=Object.entries(e);o<a.length;o++){var s=L(a[o],2),u=s[0],l=s[1];if(void 0!==l)switch(u){case"id":case"type":case"typeName":continue;default:if(l!==n[u])if(r||(r=R({},n)),"props"===u){for(var c=R({},n.props),d=0,f=Object.entries(l);d<f.length;d++){var h=L(f[d],2),p=h[0],v=h[1];void 0!==v&&(c[p]=v)}r.props=c}else r[u]=l}}return null!==(t=r)&&void 0!==t?t:n}))),a=Object.fromEntries(o.map((function(e){return[e.id,e]})));return{data:{snapshots:i,updates:a},squashing:t}}),{do:function(e){for(var t=e.updates,n=Object.values(t),i=0;i<n.length;i++){var o,a,s=n[i],u=r.store.get(s.id);if(u){var l=null===(o=(a=r.getShapeUtil(s)).onBeforeUpdate)||void 0===o?void 0:o.call(a,u,s);l&&(n[i]=l)}}r.store.put(n)},undo:function(e){var t=e.snapshots;r.store.put(Object.values(t))},squash:function(e,t){return{snapshots:R(R({},t.snapshots),e.snapshots),updates:R(R({},e.updates),t.updates)}}})),O(B(r),"_deleteShapes",r.history.createCommand("delete_shapes",(function(e){if(r.isReadOnly)return null;if(0===e.length)return null;var t,n=u(r.pageState.selectedIds),i=new Set(e),o=X(e);try{for(o.s();!(t=o.n()).done;){var a=t.value;r.visitDescendants(a,(function(e){i.add(e)}))}}catch(f){o.e(f)}finally{o.f()}var s=u(i),l=r._arrowBindingsIndex.value,c=$(s.flatMap((function(e){var t=r.getShapeById(e),n=l[e];return n&&n.length>0?n.map((function(e){var t=e.arrowId;return r.getShapeById(t)})).concat(t):t}))),d=n.filter((function(e){return!i.has(e)}));return{data:{deletedIds:s,snapshots:c,prevSelectedIds:n,postSelectedIds:d}}}),{do:function(e){var t=e.deletedIds,n=e.postSelectedIds;r.store.remove(t),r.store.update(r.pageState.id,(function(e){return R(R({},e),{},{selectedIds:n})}))},undo:function(e){var t=e.snapshots,n=e.prevSelectedIds;r.store.put(t),r.store.update(r.pageState.id,(function(e){return R(R({},e),{},{selectedIds:n})}))}})),O(B(r),"_updatePage",r.history.createCommand("updatePage",(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(r.isReadOnly)return null;var n=r.getPageById(e.id);return n?{data:{prev:n,partial:e},squashing:t}:null}),{do:function(e){var t=e.partial;r.store.update(t.id,(function(e){return R(R({},e),t)}))},undo:function(e){var t=e.prev,n=e.partial;r.store.update(n.id,(function(){return t}))},squash:function(e,t){return{prev:R(R({},e.prev),t.prev),partial:t.partial}}})),O(B(r),"_createPage",r.history.createCommand("createPage",(function(e){var t,n,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yn.createId(),a=arguments.length>2?arguments[2]:void 0;if(r.isReadOnly)return null;if(r.pages.length>=40)return null;var s=r.pages,u=null!==(t=null!==a&&void 0!==a?a:null===(n=s[s.length-1])||void 0===n?void 0:n.index)&&void 0!==t?t:"a1",l=null===(i=s[s.findIndex((function(e){return e.index===u}))+1])||void 0===i?void 0:i.index;e=function(e,t){for(var n=e,r=new Set(t);r.has(n);){var i;n=null!==(i=/^.*(\d+)$/.exec(n))&&void 0!==i&&i[1]?n.replace(/(\d+)(?=\D?)$/,(function(e){return(+e+1).toString()})):"".concat(n," 1")}return n}(e,s.map((function(e){return e.name})));var c=yn.create({id:o,name:e,index:l&&u!==l?C(u,l):P(u)}),d=un.create({id:un.createId(c.id)}),f=dr.create({id:dr.createId(c.id),pageId:c.id});return{data:{prevSelectedPageId:r.currentPageId,newPage:c,newTabPageState:f,newCamera:d}}}),{do:function(e){var t=e.newPage,n=e.newTabPageState,i=e.newCamera;r.store.put([t,i,n,R(R({},r.instanceState),{},{currentPageId:t.id})]),r.updateRenderingBounds()},undo:function(e){var t=e.newPage,n=e.prevSelectedPageId,i=e.newTabPageState,o=e.newCamera;1!==r.pages.length&&(r.store.remove([i.id,t.id,o.id]),r.store.has(n)&&r.currentPageId!==n&&r.store.put([R(R({},r.instanceState),{},{currentPageId:n})]),r.updateRenderingBounds())}})),O(B(r),"_deletePage",r.history.createCommand("delete_page",(function(e){if(r.isReadOnly)return null;var t=B(r).pages;if(1===t.length)return null;var n=r.getPageById(e),i=r._pageStates.value.filter((function(t){return t.pageId===e}));if(!n)return null;if(e===r.currentPageId){var o,a=t.findIndex((function(t){return t.id===e})),s=null!==(o=t[a-1])&&void 0!==o?o:t[a+1];r.setCurrentPageId(s.id)}return{data:{id:e,deletedPage:n,deletedPageStates:i}}}),{do:function(e){var t=e.deletedPage,n=e.deletedPageStates,i=B(r).pages;if(1!==i.length){if(t.id===r.currentPageId){var o,a=i.findIndex((function(e){return e.id===t.id})),s=null!==(o=i[a-1])&&void 0!==o?o:i[a+1];r.setCurrentPageId(s.id)}r.store.remove(n.map((function(e){return e.id}))),r.store.remove([t.id]),r.updateRenderingBounds()}},undo:function(e){var t=e.deletedPage,n=e.deletedPageStates;r.store.put([t]),r.store.put(n),r.updateRenderingBounds()}})),O(B(r),"_setInstancePageState",r.history.createCommand("setInstancePageState",(function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{data:{prev:r.store.get(null!==(t=e.id)&&void 0!==t?t:r.pageState.id),partial:e},ephemeral:n}}),{do:function(e){var t=e.prev,n=e.partial;r.store.update(t.id,(function(e){return R(R({},e),n)}))},undo:function(e){var t=e.prev;r.store.update(t.id,(function(){return t}))}})),O(B(r),"_createAssets",r.history.createCommand("createAssets",(function(e){return r.isReadOnly||e.length<=0?null:{data:{assets:e}}}),{do:function(e){var t=e.assets;r.store.put(t)},undo:function(e){var t=e.assets;r.store.remove(t.map((function(e){return e.id})))}})),O(B(r),"_deleteAssets",r.history.createCommand("deleteAssets",(function(e){if(!r.isReadOnly&&!(e.length<=0)){var t=$(e.map((function(e){return r.store.get(e)})));return{data:{ids:e,prev:t}}}}),{do:function(e){var t=e.ids;r.store.remove(t)},undo:function(e){var t=e.prev;r.store.put(t)}})),O(B(r),"_updateAssets",r.history.createCommand("updateAssets",(function(e){if(!r.isReadOnly&&!(e.length<=0)){return{data:{snapshots:{},assets:e}}}}),{do:function(e){var t=e.assets,n=e.snapshots;r.store.put(t.map((function(e){var t=r.store.get(e.id);return n[e.id]=t,R(R({},t),e)})))},undo:function(e){var t=e.snapshots;r.store.put(Object.values(t))}})),O(B(r),"_parentIdsToChildIds",void 0),O(B(r),"_childIdsCache",new yc),O(B(r),"_setCurrentPageId",r.history.createCommand("setCurrentPage",(function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).stopFollowing,n=void 0===t||t;if(r.store.has(e))return n&&r.instanceState.followingUserId&&r.stopFollowingUser(),{data:{toId:e,fromId:r.currentPageId},squashing:!0,preservesRedoStack:!0};console.error("Tried to set the current page id to a page that doesn't exist.")}),{do:function(e){var t=e.toId;if(r.store.has(t)){if(!r.getPageStateByPageId(t)){var n=un.create({id:un.createId(t)});r.store.put([n,dr.create({id:dr.createId(t),pageId:t})])}r.store.put([R(R({},r.instanceState),{},{currentPageId:t})]),r.updateRenderingBounds()}},undo:function(e){var t=e.fromId;r.store.has(t)&&(r.store.put([R(R({},r.instanceState),{},{currentPageId:t})]),r.updateRenderingBounds())},squash:function(e,t){var n=e.fromId;return{toId:t.toId,fromId:n}}})),O(B(r),"_updateInstanceState",r.history.createCommand("updateTabState",(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=r.instanceState;return{data:{prev:i,next:R(R({},i),e)},squashing:n,ephemeral:t}}),{do:function(e){var t=e.next;r.store.put([t])},undo:function(e){var t=e.prev;r.store.put([t])},squash:function(e,t){return{prev:e.prev,next:t.next}}})),O(B(r),"_willSetInitialBounds",!0),O(B(r),"_viewportAnimation",null),O(B(r),"textMeasure",void 0),r.store=i,r.user=new Rv(null!==o&&void 0!==o?o:Bd()),r.getContainer=null!==l&&void 0!==l?l:function(){return document.body},r.textMeasure=new Ov(B(r)),r.root=new hg(B(r));var c,d=Ep(a),f=new Set(Object.keys(i.schema.types.shape.migrations.subTypeMigrations)),h=X(d);try{for(h.s();!(c=h.n()).done;){var p=c.value;if(!f.has(p.type))throw Error('Editor and store have different shapes: "'.concat(p.type,'" was passed into the editor but not the schema'));f.delete(p.type)}}catch(K){h.e(K)}finally{h.f()}if(f.size>0)throw Error('Editor and store have different shapes: "'.concat(u(f)[0],'" is present in the store schema but not provided to the editor'));var v,g={},m=new Map,y=X(d);try{for(y.s();!(v=y.n()).done;){var b=v.value,w=b.util,x=b.props,k=ci(null!==x&&void 0!==x?x:{});g[w.type]=new w(B(r),w.type,k);var S,_=X(k.keys());try{for(_.s();!(S=_.n()).done;){var E=S.value;if(m.has(E.id)){if(m.get(E.id)!==E)throw Error('Multiple style props with id "'.concat(E.id,'" in use. Style prop IDs must be unique.'))}else m.set(E.id,E)}}catch(K){_.e(K)}finally{_.f()}}}catch(K){y.e(K)}finally{y.f()}r.shapeUtils=g;var I,T=X(d);try{for(T.s();!(I=T.n()).done;){var M=I.value.tool;if(M){if(ue(r.root.children,M.id))throw Error("Can't override tool with id \"".concat(M.id,'"'));r.root.children[M.id]=new M(B(r))}}}catch(K){T.e(K)}finally{T.f()}var A,j=X(s);try{for(j.s();!(A=j.n()).done;){var D=A.value;if(ue(r.root.children,D.id))throw Error("Can't override tool with id \"".concat(D.id,'"'));r.root.children[D.id]=new D(B(r))}}catch(K){j.e(K)}finally{j.f()}"undefined"!==typeof window&&"navigator"in window?(r.isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),r.isIos=!!navigator.userAgent.match(/iPad/i)||!!navigator.userAgent.match(/iPhone/i),r.isChromeForIos=/crios.*safari/i.test(navigator.userAgent)):(r.isSafari=!1,r.isIos=!1,r.isChromeForIos=!1),r.store.onBeforeDelete=function(e){"shape"===e.typeName?r._shapeWillBeDeleted(e):"page"===e.typeName&&r._pageWillBeDeleted(e)},r.store.onAfterChange=function(e,t){r._updateDepth++,r._updateDepth>1e3&&console.error("[onAfterChange] Maximum update depth exceeded, bailing out."),"shape"===e.typeName&&"shape"===t.typeName?r._shapeDidChange(e,t):"instance_page_state"===e.typeName&&"instance_page_state"===t.typeName&&r._pageStateDidChange(e,t),r._updateDepth--},r.store.onAfterCreate=function(e){if("shape"===e.typeName&&r.isShapeOfType(e,wf)&&r._arrowDidUpdate(e),"page"===e.typeName){var t=un.createId(e.id),n=dr.createId(e.id);r.store.has(t)||r.store.put([un.create({id:t})]),r.store.has(n)||r.store.put([dr.create({id:n,pageId:e.id})])}},r._currentPageShapeIds=function(e,t){var n=e.query.ids("shape"),r=null;function i(){var i=t();return r=i,new Set(u(n.value).filter((function(t){return av(e,i,e.get(t))})))}return Nt("_shapeIdsInCurrentPage",(function(n,o){if(Ot(n))return i();var a=t();if(a!==r)return i();var s=e.history.getDiffSince(o);if(s===wt)return i();var u,l=new Ft(n),c=X(s);try{for(c.s();!(u=c.n()).done;){for(var d=u.value,f=0,h=Object.values(d.added);f<h.length;f++){var p=h[f];si(p)&&av(e,a,p)&&l.add(p.id)}for(var v=0,g=Object.values(d.updated);v<g.length;v++){var m=L(g[v],2),y=(m[0],m[1]);si(y)&&(av(e,a,y)?l.add(y.id):l.remove(y.id))}for(var b=0,w=Object.keys(d.removed);b<w.length;b++){var x=w[b];ui(x)&&l.remove(x)}}}catch(K){c.e(K)}finally{c.f()}var k=l.get();return k?Rt(k.value,k.diff):n}))}(r.store,(function(){return r.currentPageId})),r._parentIdsToChildIds=function(e){var t=e.query.ids("shape");function n(){var n={};return t.value.forEach((function(t){var r=e.get(t);n[r.parentId]||(n[r.parentId]=[]),n[r.parentId].push([t,r.index])})),Object.values(n).forEach((function(e){return e.sort((function(e,t){return e[1]<t[1]?-1:1}))})),n}return Nt("parentsToChildrenWithIndexes",(function(t,r){var i;if(Ot(t))return n();var o=e.history.getDiffSince(r);if(o===wt)return n();if(0===o.length)return t;for(var a,s=null,l=function(e){s||(s=R({},t)),s[e]?s[e]===t[e]&&(s[e]=u(s[e])):s[e]=[]},c=new Set,d=0,f=o.length;d<f;d++){a=o[d];for(var h=0,p=Object.values(a.added);h<p.length;h++){var v=p[h];si(v)&&(l(v.parentId),s[v.parentId].push([v.id,v.index]),c.add(s[v.parentId]))}for(var g=function(){var e=L(y[m],2),t=e[0],n=e[1];if(!si(n))return 0;if(!si(t))return 0;if(t.parentId!==n.parentId)l(t.parentId),l(n.parentId),s[t.parentId].splice(s[t.parentId].findIndex((function(e){return e[0]===n.id})),1),s[n.parentId].push([n.id,n.index]),c.add(s[n.parentId]);else if(t.index!==n.index){l(n.parentId);var r=s[n.parentId].findIndex((function(e){return e[0]===n.id}));s[n.parentId][r]=[n.id,n.index],c.add(s[n.parentId])}},m=0,y=Object.values(a.updated);m<y.length;m++)g();for(var b=function(){var e=x[w];if(!si(e))return 1;l(e.parentId),s[e.parentId].splice(s[e.parentId].findIndex((function(t){return t[0]===e.id})),1)},w=0,x=Object.values(a.removed);w<x.length;w++)b()}var k,S=X(c);try{for(S.s();!(k=S.n()).done;)k.value.sort((function(e,t){return e[1]<t[1]?-1:1}))}catch(K){S.e(K)}finally{S.f()}return null!==(i=s)&&void 0!==i?i:t}))}(r.store),r.disposables.add(r.store.listen((function(e){r.emit("change",e)})));var N=r.getContainer(),F=function(){r._isFocused.set(!0)},U=function(){r._isFocused.set(!1)};return N.addEventListener("focusin",F),N.addEventListener("focus",F),N.addEventListener("focusout",U),N.addEventListener("blur",U),r.disposables.add((function(){N.removeEventListener("focusin",F),N.removeEventListener("focus",F),N.removeEventListener("focusout",U),N.removeEventListener("blur",U)})),r.store.ensureStoreIsUsable(),r.setInstancePageState({editingId:null,hoveredId:null,erasingIds:[]},!0),r.root.enter(void 0,"initial"),r.instanceState.followingUserId&&r.stopFollowingUser(),r.updateRenderingBounds(),requestAnimationFrame((function(){r._tickManager.start()})),r}return N(n,[{key:"_pageTransformCache",get:function(){var e=this;return this.store.createComputedCache("pageTransformCache",(function(t){var n;if(bn(t.parentId))return e.getTransform(t);var r=null!==(n=e._pageTransformCache.get(t.parentId))&&void 0!==n?n:Ja.Identity();return Ja.Compose(r,e.getTransform(t))}))}},{key:"_pageBoundsCache",get:function(){var e=this;return this.store.createComputedCache("pageBoundsCache",(function(t){var n=e._pageTransformCache.get(t.id);return n?Wa.FromPoints(Ja.applyToPoints(n,e.getShapeUtil(t).outline(t))):new Wa}))}},{key:"dispose",value:function(){this.disposables.forEach((function(e){return e()})),this.disposables.clear()}},{key:"undo",value:function(){return this.history.undo()}},{key:"canUndo",get:function(){return this.history.numUndos>0}},{key:"redo",value:function(){return this.history.redo(),this}},{key:"canRedo",get:function(){return this.history.numRedos>0}},{key:"mark",value:function(e,t,n){return this.history.mark(e,t,n)}},{key:"bail",value:function(){return this.history.bail(),this}},{key:"bailToMark",value:function(e){return this.history.bailToMark(e),this}},{key:"batch",value:function(e){return this.history.batch(e),this}},{key:"getShapeUtil",value:function(e){var t=le(this.shapeUtils,e.type);return ee(t,'No shape util found for type "'.concat(e.type,'"')),"prototype"in e&&e.prototype instanceof hc&&ee(t instanceof e,'Shape util found for type "'.concat(e.type,'" is not an instance of the provided constructor')),t}},{key:"_extractSharedStyles",value:function(e,t){if(this.isShapeOfType(e,ah)){var n=this._parentIdsToChildIds.value[e.id];if(!n)return;for(var r=0,i=n.length;r<i;r++)this._extractSharedStyles(this.getShapeById(n[r][0]),t)}else{var o,a=X(this.getShapeUtil(e).iterateStyles(e));try{for(a.s();!(o=a.n()).done;){var s=L(o.value,2),u=s[0],l=s[1];t.applyValue(u,l)}}catch(c){a.e(c)}finally{a.f()}}}},{key:"_stylesForNextShape",get:function(){return this.instanceState.stylesForNextShape}},{key:"getStyleForNextShape",value:function(e){var t=this._stylesForNextShape[e.id];return void 0===t?e.defaultValue:t}},{key:"sharedStyles",get:function(){if(this.isIn("select")&&this.selectedIds.length>0)return this._selectionSharedStyles.value;var e=this.root.current.value,t=new Pp;if(e.shapeType){var n,r=X(this.getShapeUtil(e.shapeType).styleProps.keys());try{for(r.s();!(n=r.n()).done;){var i=n.value;t.applyValue(i,this.getStyleForNextShape(i))}}catch(o){r.e(o)}finally{r.f()}}return t}},{key:"sharedOpacity",get:function(){var e=this;if(this.isIn("select")&&this.selectedIds.length>0){var t,n=[],r=function t(r){var i=e.getShapeById(r);if(i)if(e.isShapeOfType(i,ah)){var o,a=X(e.getSortedChildIds(i.id));try{for(a.s();!(o=a.n()).done;){t(o.value)}}catch(s){a.e(s)}finally{a.f()}}else n.push(i)},i=X(this.selectedIds);try{for(i.s();!(t=i.n()).done;){r(t.value)}}catch(l){i.e(l)}finally{i.f()}for(var o=null,a=0,s=n;a<s.length;a++){var u=s[a];if(null===o)o=u.opacity;else if(o!==u.opacity)return{type:"mixed"}}if(null!==o)return{type:"shared",value:o}}return{type:"shared",value:this.instanceState.opacityForNextShape}}},{key:"_arrowBindingsIndex",get:function(){return function(e){var t=e.store,n=t.query.filterHistory("shape"),r=t.query.records("shape",(function(){return{type:{eq:"arrow"}}}));function i(){var e,t={},n=X(r.value);try{for(n.s();!(e=n.n()).done;){var i=e.value,o=i.props,a=o.start,s=o.end;if("binding"===a.type){var u=t[a.boundShapeId];u?u.push({arrowId:i.id,handleId:"start"}):t[a.boundShapeId]=[{arrowId:i.id,handleId:"start"}]}if("binding"===s.type){var l=t[s.boundShapeId];l?l.push({arrowId:i.id,handleId:"end"}):t[s.boundShapeId]=[{arrowId:i.id,handleId:"end"}]}}}catch(c){n.e(c)}finally{n.f()}return t}return Nt("arrowBindingsIndex",(function(t,r){var o;if(Ot(t))return i();var a=t,s=n.getDiffSince(r);if(s===wt)return i();var l=void 0;function c(e){l||(l=R({},a)),l[e]?l[e]===a[e]&&(l[e]=u(l[e])):l[e]=[]}function d(e,t,n){c(e),l[e]=l[e].filter((function(e){return e.arrowId!==t||e.handleId!==n})),0===l[e].length&&delete l[e]}function f(e,t,n){c(e),l[e].push({arrowId:t,handleId:n})}var h,p=X(s);try{for(p.s();!(h=p.n()).done;){for(var v=h.value,g=0,m=Object.values(v.added);g<m.length;g++){var y=m[g];if(e.isShapeOfType(y,wf)){var b=y.props,w=b.start,x=b.end;"binding"===w.type&&f(w.boundShapeId,y.id,"start"),"binding"===x.type&&f(x.boundShapeId,y.id,"end")}}for(var k=0,S=Object.values(v.updated);k<S.length;k++){var _=L(S[k],2),E=_[0],C=_[1];if(e.isShapeOfType(E,wf)&&e.isShapeOfType(C,wf))for(var P=0,I=["start","end"];P<I.length;P++){var T=I[P],M=E.props[T],A=C.props[T];"binding"===M.type&&"point"===A.type?d(M.boundShapeId,E.id,T):"point"===M.type&&"binding"===A.type?f(A.boundShapeId,C.id,T):"binding"===M.type&&"binding"===A.type&&M.boundShapeId!==A.boundShapeId&&(d(M.boundShapeId,E.id,T),f(A.boundShapeId,C.id,T))}}for(var O=0,j=Object.values(v.removed);O<j.length;O++){var D=j[O];if(e.isShapeOfType(D,wf)){var N=D.props,z=N.start,B=N.end;"binding"===z.type&&d(z.boundShapeId,D.id,"start"),"binding"===B.type&&d(B.boundShapeId,D.id,"end")}}}}catch(F){p.e(F)}finally{p.f()}return null!==(o=l)&&void 0!==o?o:a}))}(this)}},{key:"getArrowsBoundTo",value:function(e){return this._arrowBindingsIndex.value[e]||ft}},{key:"_reparentArrow",value:function(e){var t=this,n=this.getShapeById(e);if(n){var r=n.props,i=r.start,o=r.end,a="binding"===i.type?this.getShapeById(i.boundShapeId):void 0,s="binding"===o.type?this.getShapeById(o.boundShapeId):void 0,u=this.getAncestorPageId(n);if(u){var l;if(a&&s){var c;l=null!==(c=this.findCommonAncestor([a,s]))&&void 0!==c?c:u}else{if(!a&&!s)return;l=u}l&&l!==n.parentId&&this.reparentShapesById([e],l);var d=this.getShapeById(e);if(!d)throw Error("no reparented arrow");var f,h,p=this.getShapeNearestSibling(d,a),v=this.getShapeNearestSibling(d,s);if(p&&v)f=p.index>v.index?p:v;else if(p&&!v)f=p;else{if(!v||p)return;f=v}var g=this.getSortedChildIds(f.parentId).map((function(e){return t.getShapeById(e)})).filter((function(e){return e.index>f.index}));if(g.length){var m=g.find((function(e){return"arrow"!==e.type}));if(d.index>f.index&&(!m||d.index<m.index))return;h=C(f.index,g[0].index)}else h=P(f.index);h!==d.index&&this.updateShapes([{id:e,type:"arrow",index:h}])}}}},{key:"_unbindArrowTerminal",value:function(e,t){var n=nf(this,e)[t],r=n.x,i=n.y;this.store.put([R(R({},e),{},{props:R(R({},e.props),{},O({},t,{type:"point",x:r,y:i}))})])}},{key:"_allPageStates",get:function(){return this.store.query.records("instance_page_state")}},{key:"_shapeWillBeDeleted",value:function(e){var t=this;e.parentId&&ui(e.parentId)&&this._invalidParents.add(e.parentId);var n=this._arrowBindingsIndex.value[e.id];if(null!==n&&void 0!==n&&n.length){var r,i=X(n);try{for(i.s();!(r=i.n()).done;){var o=r.value,a=o.arrowId,s=o.handleId,u=this.getShapeById(a);u&&this._unbindArrowTerminal(u,s)}}catch(f){i.e(f)}finally{i.f()}}var l=this._allPageStates.value,c=new Set([e.id]),d=$(l.map((function(e){return t._cleanupInstancePageState(e,c)})));d.length&&this.store.put(d)}},{key:"_arrowDidUpdate",value:function(e){for(var t=0,n=["start","end"];t<n.length;t++){var r=n[t],i=e.props[r];if("binding"===i.type){var o=this.getShapeById(i.boundShapeId),a=this.getAncestorPageId(e)===this.getAncestorPageId(o);o&&a||this._unbindArrowTerminal(e,r)}}this._reparentArrow(e.id)}},{key:"_complete",value:function(){var e,t=X(this._invalidParents);try{for(t.s();!(e=t.n()).done;){var n,r=e.value;this._invalidParents.delete(r);var i=this.getShapeById(r);if(i){var o=this.getShapeUtil(i),a=null===(n=o.onChildrenChange)||void 0===n?void 0:n.call(o,i);null!==a&&void 0!==a&&a.length&&this.updateShapes(a,!0)}}}catch(s){t.e(s)}finally{t.f()}this.emit("update")}},{key:"_cleanupInstancePageState",value:function(e,t){var n=null,r=e.selectedIds.filter((function(e){return!t.has(e)}));r.length!==e.selectedIds.length&&(n||(n=R({},e)),n.selectedIds=r);var i=e.erasingIds.filter((function(e){return!t.has(e)}));i.length!==e.erasingIds.length&&(n||(n=R({},e)),n.erasingIds=i),e.hoveredId&&t.has(e.hoveredId)&&(n||(n=R({},e)),n.hoveredId=null),e.editingId&&t.has(e.editingId)&&(n||(n=R({},e)),n.editingId=null);var o=e.hintingIds.filter((function(e){return!t.has(e)}));return o.length!==e.hintingIds.length&&(n||(n=R({},e)),n.hintingIds=o),e.focusLayerId&&t.has(e.focusLayerId)&&(n||(n=R({},e)),n.focusLayerId=null),n}},{key:"_shapeDidChange",value:function(e,t){var n=this;if(this.isShapeOfType(t,wf)&&this._arrowDidUpdate(t),e.parentId!==t.parentId){var r=function(e){var t=n._arrowBindingsIndex.value[e];if(null!==t&&void 0!==t&&t.length){var r,i=X(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;n._reparentArrow(o.arrowId)}}catch(a){i.e(a)}finally{i.f()}}};r(t.id),this.visitDescendants(t.id,r)}if(e.parentId!==t.parentId&&bn(t.parentId)){var i=new Set([e.id]);this.visitDescendants(e.id,(function(e){i.add(e)}));var o,a=X(this._allPageStates.value);try{for(a.s();!(o=a.n()).done;){var s=o.value;if(s.pageId!==t.parentId){var u=this._cleanupInstancePageState(s,i);u&&this.store.put([u])}}}catch(l){a.e(l)}finally{a.f()}}e.parentId&&ui(e.parentId)&&this._invalidParents.add(e.parentId),t.parentId!==e.parentId&&ui(t.parentId)&&this._invalidParents.add(t.parentId)}},{key:"_pageStateDidChange",value:function(e,t){var n=this;if((null===e||void 0===e?void 0:e.selectedIds)!==(null===t||void 0===t?void 0:t.selectedIds)){var r=t.selectedIds.filter((function(e){for(var r,i=null===(r=n.getShapeById(e))||void 0===r?void 0:r.parentId;ui(i);){var o;if(t.selectedIds.includes(i))return!1;i=null===(o=n.getShapeById(i))||void 0===o?void 0:o.parentId}return!0})),i=0===r.length?null===t||void 0===t?void 0:t.focusLayerId:this.findCommonAncestor($(r.map((function(e){return n.getShapeById(e)}))),(function(e){return n.isShapeOfType(e,ah)}));r.length===t.selectedIds.length&&i==t.focusLayerId||this.store.put([R(R({},t),{},{selectedIds:r,focusLayerId:null!==i&&void 0!==i?i:null})])}}},{key:"_pageWillBeDeleted",value:function(e){var t;if(this.instanceState.currentPageId===e.id){var n=null===(t=this.pages.find((function(t){return t.id!==e.id})))||void 0===t?void 0:t.id;if(n){this.store.put([R(R({},this.instanceState),{},{currentPageId:n})]);var r=un.createId(e.id),i=dr.createId(e.id);this.store.remove([r,i])}}}},{key:"annotateError",value:function(e,t){var n=t.origin,r=t.willCrashApp,i=t.tags,o=t.extras,a=this.createErrorAnnotations(n,r);ie(e,{tags:R(R({},a.tags),i),extras:R(R({},a.extras),o)}),r&&this.store.markAsPossiblyCorrupted()}},{key:"createErrorAnnotations",value:function(e,t){try{return{tags:{origin:e,willCrashApp:t},extras:{activeStateNode:this.root.path.value,selectedShapes:this.selectedShapes,editingShape:this.editingId?this.getShapeById(this.editingId):void 0,inputs:this.inputs}}}catch(n){return{tags:{origin:e,willCrashApp:t},extras:{}}}}},{key:"crashingError",get:function(){return this._crashingError}},{key:"crash",value:function(e){this._crashingError=e,this.store.markAsPossiblyCorrupted(),this.emit("crash",{error:e})}},{key:"canMoveCamera",get:function(){return this._canMoveCamera.value},set:function(e){this._canMoveCamera.set(e)}},{key:"isFocused",get:function(){return this._isFocused.value}},{key:"devicePixelRatio",get:function(){return this._dprManager.dpr.value}},{key:"isCoarsePointer",get:function(){return this._isCoarsePointer.value},set:function(e){this._isCoarsePointer.set(e)}},{key:"openMenus",get:function(){return this._openMenus.value}},{key:"addOpenMenu",value:function(e){var t=new Set(this.openMenus);return t.has(e)||(t.add(e),this._openMenus.set(u(t))),this}},{key:"deleteOpenMenu",value:function(e){var t=new Set(this.openMenus);return t.has(e)&&(t.delete(e),this._openMenus.set(u(t))),this}},{key:"isMenuOpen",get:function(){return this.openMenus.length>0}},{key:"isChangingStyle",get:function(){return this._isChangingStyle.value},set:function(e){var t=this;this._isChangingStyle.set(e),clearTimeout(this._isChangingStyleTimeout),e&&(this._isChangingStyleTimeout=setTimeout((function(){return t.isChangingStyle=!1}),2e3))}},{key:"isPenMode",get:function(){return this._isPenMode.value}},{key:"setPenMode",value:function(e){return e&&(this._touchEventsRemainingBeforeExitingPenMode=3),e!==this.isPenMode&&this._isPenMode.set(e),this}},{key:"setReadOnly",value:function(e){return this._isReadOnly.set(e),e&&this.setSelectedTool("hand"),this}},{key:"isReadOnly",get:function(){return this._isReadOnly.value}},{key:"documentSettings",get:function(){return this.store.get(Ir)}},{key:"updateDocumentSettings",value:function(e){this.store.put([R(R({},this.documentSettings),e)])}},{key:"gridSize",get:function(){return this.documentSettings.gridSize}},{key:"projectName",get:function(){return this.documentSettings.name}},{key:"setProjectName",value:function(e){this.updateDocumentSettings({name:e})}},{key:"isSnapMode",get:function(){return this.user.isSnapMode}},{key:"setSnapMode",value:function(e){return e!==this.isSnapMode&&this.user.updateUserPreferences({isSnapMode:e}),this}},{key:"isDarkMode",get:function(){return this.user.isDarkMode}},{key:"setDarkMode",value:function(e){return e!==this.isDarkMode&&this.user.updateUserPreferences({isDarkMode:e}),this}},{key:"animationSpeed",get:function(){return this.user.animationSpeed}},{key:"setAnimationSpeed",value:function(e){return e!==this.animationSpeed&&this.user.updateUserPreferences({animationSpeed:e}),this}},{key:"instanceState",get:function(){return this.store.get(nr)}},{key:"cursor",get:function(){return this.instanceState.cursor}},{key:"brush",get:function(){return this.instanceState.brush}},{key:"zoomBrush",get:function(){return this.instanceState.zoomBrush}},{key:"scribble",get:function(){return this.instanceState.scribble}},{key:"isFocusMode",get:function(){return this.instanceState.isFocusMode}},{key:"setFocusMode",value:function(e){return e!==this.isFocusMode&&this.updateInstanceState({isFocusMode:e},!0),this}},{key:"isToolLocked",get:function(){return this.instanceState.isToolLocked}},{key:"setToolLocked",value:function(e){return e!==this.isToolLocked&&this.updateInstanceState({isToolLocked:e},!0),this}},{key:"isGridMode",get:function(){return this.instanceState.isGridMode}},{key:"setGridMode",value:function(e){return e!==this.isGridMode&&this.updateInstanceState({isGridMode:e},!0),this}},{key:"_pages",get:function(){return this.store.query.records("page")}},{key:"pages",get:function(){return this._pages.value.sort(T)}},{key:"currentPage",get:function(){var e=this.getPageById(this.currentPageId);if(!e)throw Error("No current page (id ".concat(this.currentPageId,", ").concat(this.pages.length," pages))"));return e}},{key:"currentPageId",get:function(){return this.instanceState.currentPageId}},{key:"getPageById",value:function(e){return this.store.get(e)}},{key:"getPageInfoById",value:function(e){return this.store.get(e)}},{key:"currentPageShapeIds",get:function(){return this._currentPageShapeIds.value}},{key:"getShapeIdsInPage",value:function(e){var t=this.store.query.exec("shape",{parentId:{eq:e}});return this.getShapeAndDescendantIds(t.map((function(e){return e.id})))}},{key:"_pageStates",get:function(){return this.store.query.records("instance_page_state")}},{key:"getPageStateByPageId",value:function(e){return this._pageStates.value.find((function(t){return t.pageId===e}))}},{key:"pageStateId",get:function(){return dr.createId(this.currentPageId)}},{key:"pageState",get:function(){return this.store.get(this.pageStateId)}},{key:"setInstancePageState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._setInstancePageState(e,t)}},{key:"selectedIds",get:function(){return this.pageState.selectedIds}},{key:"selectedIdsSet",get:function(){return new Set(this.selectedIds)}},{key:"setSelectedIds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._setSelectedIds(e,t),this}},{key:"isSelected",value:function(e){return this.selectedIdsSet.has(e)}},{key:"isWithinSelection",value:function(e){var t=this,n=this.getShapeById(e);return!!n&&(!!this.isSelected(e)||!!this.findAncestor(n,(function(e){return t.isSelected(e.id)})))}},{key:"select",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.setSelectedIds(t),this}},{key:"deselect",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=this.selectedIds;return r.length>0&&t.length>0&&this.setSelectedIds(r.filter((function(e){return!t.includes(e)}))),this}},{key:"selectAll",value:function(){var e=this.getSortedChildIds(this.currentPageId);return e.length<=0||this.setSelectedIds(this._getUnlockedShapeIds(e)),this}},{key:"selectNone",value:function(){return this.selectedIds.length>0&&this.setSelectedIds([]),this}},{key:"focusLayerId",get:function(){var e;return null!==(e=this.pageState.focusLayerId)&&void 0!==e?e:this.currentPageId}},{key:"focusLayerShape",get:function(){var e=this.pageState.focusLayerId;if(e)return this.getShapeById(e)}},{key:"popFocusLayer",value:function(){var e=this,t=this.pageState.focusLayerId,n=t&&this.getShapeById(t);if(n){var r,i=this.findAncestor(n,(function(t){return e.isShapeOfType(t,ah)}));this.setFocusLayer(null!==(r=null===i||void 0===i?void 0:i.id)&&void 0!==r?r:null),this.select(n.id)}else this.setFocusLayer(null),this.selectNone();return this}},{key:"setFocusLayer",value:function(e){return this._setFocusLayer(e),this}},{key:"editingId",get:function(){return this.pageState.editingId}},{key:"setEditingId",value:function(e){if(e){if(e!==this.editingId){var t=this.getShapeById(e),n=this.getShapeUtil(t);if(t&&n.canEdit(t)){this.setInstancePageState({editingId:e,hoveredId:null},!1);var r=this.viewportPageBounds,i=n.getEditingBounds(t),o=this.getPageTransformById(e),a=Wa.FromPoints(Ja.applyToPoints(o,i.corners));r.contains(a)||(a.width>r.width||a.height>r.height?this.zoomToBounds(a.minX,a.minY,a.width,a.height):this.centerOnPoint(a.midX,a.midY))}}}else this.setInstancePageState({editingId:null});return this}},{key:"editingShape",get:function(){var e;return this.editingId&&null!==(e=this.getShapeById(this.editingId))&&void 0!==e?e:null}},{key:"hoveredId",get:function(){return this.pageState.hoveredId}},{key:"setHoveredId",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e===this.pageState.hoveredId||this.setInstancePageState({hoveredId:e},!0),this}},{key:"hoveredShape",get:function(){var e;return this.hoveredId&&null!==(e=this.getShapeById(this.hoveredId))&&void 0!==e?e:null}},{key:"hintingIds",get:function(){return this.pageState.hintingIds}},{key:"setHintingIds",value:function(e){return this.store.update(this.pageState.id,(function(t){return R(R({},t),{},{hintingIds:q(e)})})),this}},{key:"erasingIds",get:function(){return this.pageState.erasingIds}},{key:"erasingIdsSet",get:function(){return new Set(this.erasingIds)}},{key:"setErasingIds",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.erasingIdsSet;return e.length===t.size&&e.every((function(e){return t.has(e)}))||this.setInstancePageState({erasingIds:e},!0),this}},{key:"croppingId",get:function(){return this.pageState.croppingId}},{key:"setCroppingId",value:function(e){if(e!==this.croppingId)if(e){var t=this.getShapeById(e),n=this.getShapeUtil(t);t&&n.canCrop(t)&&this.setInstancePageState({croppingId:e,hoveredId:null})}else this.setInstancePageState({croppingId:null}),this.isInAny("select.crop","select.pointing_crop_handle","select.cropping")&&this.setSelectedTool("select.idle");return this}},{key:"cameraId",get:function(){return un.createId(this.currentPageId)}},{key:"camera",get:function(){return this.store.get(this.cameraId)}},{key:"zoomLevel",get:function(){return this.camera.z}},{key:"updateViewportScreenBounds",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.getContainer();if(!t)return this;var n=t.getBoundingClientRect(),r=new Wa(0,0,Math.max(n.width,1),Math.max(n.height,1)),i=r.equals(this.viewportScreenBounds),o=this._willSetInitialBounds;if(i)this._willSetInitialBounds=!1;else if(o)this._willSetInitialBounds=!1,this.updateInstanceState({screenBounds:r.toJson()},!0,!0);else{var a=this.zoomLevel;if(e){var s=this.viewportPageCenter;this.updateInstanceState({screenBounds:r.toJson()},!0,!0);var u=this.viewportPageCenter;this.instanceState.followingUserId||this.pan((u.x-s.x)*a,(u.y-s.y)*a)}else{var l=this.screenToPage(0,0);this.updateInstanceState({screenBounds:r.toJson()},!0,!0);var c=this.screenToPage(0,0);this.instanceState.followingUserId||this.pan((c.x-l.x)*a,(c.y-l.y)*a)}}this._tickCameraState(),this.updateRenderingBounds();var d=this.editingId;return d&&this.panZoomIntoView([d]),this}},{key:"viewportScreenBounds",get:function(){var e=this.instanceState.screenBounds,t=e.x,n=e.y,r=e.w,i=e.h;return new Wa(t,n,r,i)}},{key:"viewportScreenCenter",get:function(){return this.viewportScreenBounds.center}},{key:"viewportPageBounds",get:function(){var e=this.viewportScreenBounds,t=e.x,n=e.y,r=e.w,i=e.h,o=this.screenToPage(t,n),a=this.screenToPage(t+r,n+i);return new Wa(o.x,o.y,a.x-o.x,a.y-o.y)}},{key:"viewportPageCenter",get:function(){return this.viewportPageBounds.center}},{key:"screenToPage",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.camera,i=this.store.unsafeGetWithoutCapture(nr).screenBounds,o=r.x,a=r.y,s=r.z,u=void 0===s?1:s;return{x:(e-i.x)/u-o,y:(t-i.y)/u-a,z:n}}},{key:"pageToScreen",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.camera,i=r.x,o=r.y,a=r.z,s=void 0===a?1:a;return{x:e+i*s,y:t+o*s,z:n}}},{key:"cameraState",get:function(){return this._cameraState.value}},{key:"computeUnorderedRenderingShapes",value:function(e){var t,n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.renderingBounds,o=r.renderingBoundsExpanded,a=r.erasingIdsSet,s=r.editingId,u=[],l=Zs,c=0,d=function e(t,r,d){var f,h;if(yn.isId(t)){var p,v=X(n.getSortedChildIds(t));try{for(v.s();!(p=v.n()).done;){e(p.value,r,d)}}catch(C){v.e(C)}finally{v.f()}}else{var g=n.getShapeById(t);if(g){var m=g.opacity*r,y=!1;!d&&null!==a&&void 0!==a&&a.has(t)&&(y=!0,m*=.32);var b=n.getMaskedPageBoundsById(t),w=!!b&&(null===(f=null===i||void 0===i?void 0:i.includes(b))||void 0===f||f),x=!b||(null===(h=s!==t&&!(null!==o&&void 0!==o&&o.includes(b)))||void 0===h||h);u.push({id:t,index:l,backgroundIndex:c,opacity:m,isCulled:x,isInViewport:w,maskedPageBounds:b}),l+=1,c+=1;var k=n.getSortedChildIds(t);if(k.length){var S=null;n.getShapeUtil(g).providesBackgroundForChildren(g)&&(S=c,c=l,l+=Zs);var _,E=X(k);try{for(E.s();!(_=E.n()).done;){e(_.value,m,d||y)}}catch(C){E.e(C)}finally{E.f()}null!==S&&(c=S)}}}},f=X(e);try{for(f.s();!(t=f.n()).done;){d(t.value,1,!1)}}catch(h){f.e(h)}finally{f.f()}return u}},{key:"renderingShapes",get:function(){return this.computeUnorderedRenderingShapes([this.currentPageId],{renderingBounds:this.renderingBounds,renderingBoundsExpanded:this.renderingBoundsExpanded,erasingIdsSet:this.erasingIdsSet,editingId:this.editingId}).sort(ke)}},{key:"renderingBounds",get:function(){return this._renderingBounds.value}},{key:"renderingBoundsExpanded",get:function(){return this._renderingBoundsExpanded.value}},{key:"updateRenderingBounds",value:function(){var e=this.viewportPageBounds;return e.equals(this._renderingBounds.__unsafe__getWithoutCapture())||(this._renderingBounds.set(e.clone()),this._renderingBoundsExpanded.set(e.clone().expandBy(100/this.zoomLevel))),this}},{key:"getTransform",value:function(e){return Ja.Compose(Ja.Translate(e.x,e.y),Ja.Rotate(e.rotation))}},{key:"getParentTransform",value:function(e){var t;return bn(e.parentId)?Ja.Identity():null!==(t=this._pageTransformCache.get(e.parentId))&&void 0!==t?t:Ja.Identity()}},{key:"getPageTransform",value:function(e){return this.getPageTransformById(e.id)}},{key:"getPageTransformById",value:function(e){return this._pageTransformCache.get(e)}},{key:"getPagePointById",value:function(e){var t=this.getPageTransformById(e);if(t)return Ja.applyToPoint(t,new va)}},{key:"getPageCenter",value:function(e){var t=this.getPageTransformById(e.id);if(!t)return null;var n=this.getShapeUtil(e).center(e);return Ja.applyToPoint(t,n)}},{key:"getPageCenterById",value:function(e){var t=this.getShapeById(e);return this.getPageCenter(t)}},{key:"getPageRotation",value:function(e){return this.getPageRotationById(e.id)}},{key:"getPageRotationById",value:function(e){var t=this.getPageTransformById(e);return t?Ja.Decompose(t).rotation:0}},{key:"getBounds",value:function(e){return this.getShapeUtil(e).bounds(e)}},{key:"getBoundsById",value:function(e){var t=this.getShapeById(e);if(t)return this.getBounds(t)}},{key:"getPageBounds",value:function(e){return this.getPageBoundsById(e.id)}},{key:"getPageBoundsById",value:function(e){return this._pageBoundsCache.get(e)}},{key:"_clipPathCache",get:function(){var e=this;return this.store.createComputedCache("clipPathCache",(function(t){var n=e._pageMaskCache.get(t.id);if(n){var r=e._pageTransformCache.get(t.id);if(r){if(0===n.length)return"polygon(0px 0px, 0px 0px, 0px 0px)";var i=Ja.applyToPoints(Ja.Inverse(r),n);return"polygon(".concat(i.map((function(e){return"".concat(e.x,"px ").concat(e.y,"px")})).join(","),")")}}}))}},{key:"getClipPathById",value:function(e){return this._clipPathCache.get(e)}},{key:"_pageMaskCache",get:function(){var e=this;return this.store.createComputedCache("pageMaskCache",(function(t){if(!bn(t.parentId)){var n=e.getAncestorsById(t.id).filter((function(t){return e.isShapeOfType(t,lh)}));if(0!==n.length){var r=n.map((function(t){return Ja.applyToPoints(e._pageTransformCache.get(t.id),e.getOutline(t))})).reduce((function(e,t){var n;return t&&e&&null!==(n=gs(e,t))&&void 0!==n?n:void 0}));return r}}}))}},{key:"getPageMaskById",value:function(e){return this._pageMaskCache.get(e)}},{key:"getMaskedPageBounds",value:function(e){return this.getMaskedPageBoundsById(e.id)}},{key:"getMaskedPageBoundsById",value:function(e){var t=this._pageBoundsCache.get(e);if(t){var n=this._pageMaskCache.get(e);if(n){var r=gs(n,t.corners);if(!r)return;return Wa.FromPoints(r)}return t}}},{key:"getOutline",value:function(e){return this.getShapeUtil(e).outline(e)}},{key:"getOutlineById",value:function(e){return this.getOutline(this.getShapeById(e))}},{key:"getAncestors",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e.parentId;if(bn(n))return t.reverse(),t;var r=this.store.get(n);return r?(t.push(r),this.getAncestors(r,t)):t}},{key:"getAncestorsById",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=this.getShapeById(e);return n?this.getAncestors(n,t):t}},{key:"findAncestor",value:function(e,t){var n=e.parentId;if(!bn(n)){var r=this.getShapeById(n);return r?t(r)?r:this.findAncestor(r,t):void 0}}},{key:"hasAncestor",value:function(e,t){return!!e&&(e.parentId===t||this.hasAncestor(this.getParentShape(e),t))}},{key:"findCommonAncestor",value:function(e,t){var n=this;if(0!==e.length){if(1===e.length){var r,i=e[0].parentId;if(bn(i))return;return t?null===(r=this.findAncestor(e[0],t))||void 0===r?void 0:r.id:i}for(var o=d(e),a=o[0],s=o.slice(1),u=this.getParentShape(a);u;)if(!t||t(u)){if(s.every((function(e){return n.hasAncestor(e,u.id)})))return u.id;u=this.getParentShape(u)}else u=this.getParentShape(u)}}},{key:"isShapeOrAncestorLocked",value:function(e){return void 0!==e&&(!!e.isLocked||this.isShapeOrAncestorLocked(this.getParentShape(e)))}},{key:"allShapesCommonBounds",get:function(){var e=this,t=null;return this.currentPageShapeIds.forEach((function(n){var r=e.getMaskedPageBoundsById(n);r&&(t?t.expand(r):t=r.clone())})),t}},{key:"getPageCorners",value:function(e){var t=this.getAncestors(e),n=this.getBounds(e).corners,r=Ja.Compose.apply(Ja,u(t.flatMap((function(e){return[Ja.Translate(e.x,e.y),Ja.Rotate(e.rotation)]}))).concat([Ja.Translate(e.x,e.y),Ja.Rotate(e.rotation,0,0)]));return Ja.applyToPoints(r,n)}},{key:"isPointInShape",value:function(e,t){var n=this.getShapeUtil(t),r=this._pageMaskCache.get(t.id);if(r&&!Ba(e,r))return!1;return n.hitTestPoint(t,this.getPointInShapeSpace(t,e))}},{key:"getShapesAtPoint",value:function(e){var t=this;return this.shapesArray.filter((function(n){var r=t._pageMaskCache.get(n.id);return r?Ba(e,r):t.getShapeUtil(n).hitTestPoint(n,t.getPointInShapeSpace(n,e))}))}},{key:"getPointInShapeSpace",value:function(e,t){return Ja.applyToPoint(Ja.Inverse(this.getPageTransform(e)),t)}},{key:"getPointInParentSpace",value:function(e,t){var n=this.getShapeById(e);if(!n)return new va(0,0);if(bn(n.parentId))return va.From(t);var r=this.getPageTransformById(n.parentId);return r?Ja.applyToPoint(Ja.Inverse(r),t):va.From(t)}},{key:"getDeltaInShapeSpace",value:function(e,t){var n=this.getPageTransform(e);return n?va.Rot(t,-Ja.Decompose(n).rotation):va.From(t)}},{key:"getDeltaInParentSpace",value:function(e,t){if(bn(e.parentId))return va.From(t);var n=this.getShapeById(e.parentId);return n?this.getDeltaInShapeSpace(n,t):va.From(t)}},{key:"getParentsMappedToChildren",value:function(e){var t=this,n=e.map((function(e){return t.store.get(e)})),r=new Map;return n.forEach((function(e){var t;r.has(e.parentId)||r.set(e.parentId,new Set),null===(t=r.get(e.parentId))||void 0===t||t.add(e)})),r}},{key:"selectedPageBounds",get:function(){var e=this,t=this.pageState.selectedIds;return 0===t.length?null:Wa.Common($(t.map((function(t){return e.getPageBoundsById(t)}))))}},{key:"selectionRotation",get:function(){var e=this,t=this.selectedIds;if(0===t.length)return 0;if(1===t.length)return this.getPageRotationById(this.selectedIds[0]);var n=t.map((function(t){return e.getPageRotationById(t)%(Math.PI/2)}));return n.every((function(e){return Math.abs(e-n[0])<Math.PI/180}))?this.getPageRotationById(t[0]):0}},{key:"selectionBounds",get:function(){var e=this,t=this.selectedIds;if(0!==t.length){var n=this.selectionRotation;if(0===n)return this.selectedPageBounds;if(1===t.length){var r=this.getBounds(this.getShapeById(t[0])).clone();return r.point=Ja.applyToPoint(this.getPageTransformById(t[0]),r.point),r}var i=this.selectedIds.flatMap((function(t){var n=e.getPageTransformById(t);return n?e.getOutlineById(t).map((function(e){return Ja.applyToPoint(n,e)})):[]})).map((function(e){return va.Rot(e,-n)})),o=Wa.FromPoints(i);return o.point=o.point.rot(n),o}}},{key:"selectionPageCenter",get:function(){var e=this.selectionBounds,t=this.selectionRotation;return e?va.RotWith(e.center,e.point,t):null}},{key:"currentToolId",get:function(){var e,t=this.root.current.value,n=null===t||void 0===t?void 0:t.id;if("select"===n||"zoom"===n){var r,i,o=null===t||void 0===t?void 0:t.current.value;n=null!==(r=null===o||void 0===o||null===(i=o.info)||void 0===i?void 0:i.onInteractionEnd)&&void 0!==r?r:"select"}return null!==(e=n)&&void 0!==e?e:"select"}},{key:"setSelectedTool",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.root.transition(e,t),this}},{key:"getStateDescendant",value:function(e){for(var t=e.split(".").reverse(),n=this.root;t.length>0;){var r,i=t.pop();if(!i)return n;var o=null===(r=n.children)||void 0===r?void 0:r[i];if(!o)return;n=o}return n}},{key:"isIn",value:function(e){for(var t=e.split(".").reverse(),n=this.root;t.length>0;){var r=t.pop();if(!r)return!0;var i=n.current.value;if((null===i||void 0===i?void 0:i.id)!==r)return!1;if(0===t.length)return!0;n=i}return!1}},{key:"isInAny",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.some((function(t){return e.isIn(t)}))}},{key:"_updateInputsFromEvent",value:function(e){var t,n,r=this.inputs,i=r.previousScreenPoint,o=r.previousPagePoint,a=r.currentScreenPoint,s=r.currentPagePoint,u=this.store.unsafeGetWithoutCapture(nr).screenBounds,l=e.point,c=l.x,d=l.y,f=l.z,h=this.camera,p=h.x,v=h.y,g=h.z;i.setTo(a),o.setTo(s),a.set(c,d),s.set((c-u.x)/g-p,(d-u.y)/g-v,null!==f&&void 0!==f?f:.5),this.inputs.isPen="pointer"===e.type&&e.isPen,"pointer_down"===e.name&&this.inputs.pointerVelocity.set(0,0),this.store.put([{id:hr,typeName:"pointer",x:s.x,y:s.y,lastActivityTimestamp:"pointer"===e.type&&e.pointerId===uu&&null!==(t=null===(n=this.store.get(hr))||void 0===n?void 0:n.lastActivityTimestamp)&&void 0!==t?t:Date.now()}])}},{key:"cancelDoubleClick",value:function(){this._clickManager.cancelDoubleClickTimeout()}},{key:"dispatch",value:function(e){var t=this;if(this.crashingError)return this;var n=this.inputs,r=e.type;return this.batch((function(){if("misc"===e.type)return"cancel"!==e.name&&"complete"!==e.name||(t.inputs.isDragging=!1,t.inputs.isPanning&&(t.inputs.isPanning=!1,t.setCursor({type:t._prevCursor}))),void t.root.handleEvent(e);e.shiftKey?(clearInterval(t._shiftKeyTimeout),t._shiftKeyTimeout=-1,n.shiftKey=!0):!e.shiftKey&&n.shiftKey&&-1===t._shiftKeyTimeout&&(t._shiftKeyTimeout=setTimeout(t._setShiftKeyTimeout,150)),e.altKey?(clearInterval(t._altKeyTimeout),t._altKeyTimeout=-1,n.altKey=!0):!e.altKey&&n.altKey&&-1===t._altKeyTimeout&&(t._altKeyTimeout=setTimeout(t._setAltKeyTimeout,150)),e.ctrlKey?(clearInterval(t._ctrlKeyTimeout),t._ctrlKeyTimeout=-1,n.ctrlKey=!0):!e.ctrlKey&&n.ctrlKey&&-1===t._ctrlKeyTimeout&&(t._ctrlKeyTimeout=setTimeout(t._setCtrlKeyTimeout,150));var i=n.originPagePoint,o=n.originScreenPoint,a=n.currentPagePoint,s=n.currentScreenPoint;switch(n.isPointing||(n.isDragging=!1),r){case"pinch":if(!t.canMoveCamera)return;switch(t._updateInputsFromEvent(e),e.name){case"pinch_start":if(n.isPinching)return;return void(n.isEditing||(t._pinchStart=t.camera.z,t._selectedIdsAtPointerDown.length||(t._selectedIdsAtPointerDown=t.selectedIds.slice()),t._didPinch=!0,n.isPinching=!0,t.interrupt()));case"pinch":if(!n.isPinching)return;var u=e.point,l=u.x,c=u.y,d=u.z,f=void 0===d?1:d,h=e.delta,p=h.x,v=h.y,g=t.camera,m=g.x,y=g.y,b=g.z,w=Math.min(8,Math.max(nu,f));return void t.setCamera(m+p/b-l/b+l/w,y+v/b-c/b+c/w,w);case"pinch_end":if(!n.isPinching)return t;n.isPinching=!1;var x=t._selectedIdsAtPointerDown;t.setSelectedIds(t._selectedIdsAtPointerDown,!0),t._selectedIdsAtPointerDown=[];var k,S=t.camera,_=S.x,E=S.y,C=S.z;if(C>.9&&C<1.05?k=1:C>.49&&C<.505&&(k=.5),C>t._pinchStart-.1&&C<t._pinchStart+.05&&(k=t._pinchStart),void 0!==k){var P=t.viewportScreenCenter,I=P.x,T=P.y;t.animateCamera(_+(I/k-I)-(I/C-I),E+(T/k-T)-(T/C-T),k,{duration:100})}return void(t._didPinch&&(t._didPinch=!1,requestAnimationFrame((function(){t._didPinch||t.setSelectedIds(x,!0)}))))}case"wheel":if(!t.canMoveCamera)return;if(t.isMenuOpen);else{if(n.ctrlKey){var M,A=t.inputs.currentScreenPoint,O=A.x,j=A.y,R=t.camera,L=R.x,D=R.y,N=R.z,z=Math.min(8,Math.max(nu,N+(null!==(M=e.delta.z)&&void 0!==M?M:0)*N));return void t.setCamera(L+(O/z-O)-(O/N-O),D+(j/z-j)-(j/N-j),z)}t.pan(e.delta.x,e.delta.y),!n.isDragging&&n.isPointing&&i.dist(a)>(t.isCoarsePointer?6:4)/t.zoomLevel&&(n.isDragging=!0)}break;case"pointer":if(n.isPinching)return;t._updateInputsFromEvent(e);var B=e.isPen;switch(e.name){case"pointer_down":if(t._selectedIdsAtPointerDown=t.selectedIds.slice(),0===e.button&&(t.capturedPointerId=e.pointerId),n.buttons.add(e.button),n.isPointing=!0,n.isDragging=!1,t.isPenMode)if(B)t._touchEventsRemainingBeforeExitingPenMode=3;else{if(t._touchEventsRemainingBeforeExitingPenMode--,0!==t._touchEventsRemainingBeforeExitingPenMode)return;t.setPenMode(!1)}else B&&t.setPenMode(!0);if(5===e.button?(t._restoreToolId=t.currentToolId,t.complete(),t.setSelectedTool("eraser")):1===e.button&&(t.inputs.isPanning||(t._prevCursor=t.instanceState.cursor.type),t.inputs.isPanning=!0),t.inputs.isPanning)return t.stopCameraAnimation(),t.setCursor({type:"grabbing"}),t;o.setTo(s),i.setTo(a);break;case"pointer_move":if(!B&&t.isPenMode)return;if(t.inputs.isPanning&&t.inputs.isPointing){var F=t.inputs,U=F.currentScreenPoint,K=F.previousScreenPoint,V=va.Sub(U,K);return void t.pan(V.x,V.y)}!n.isDragging&&n.isPointing&&i.dist(a)>(t.isCoarsePointer?6:4)/t.zoomLevel&&(n.isDragging=!0);break;case"pointer_up":if(n.buttons.delete(e.button),n.isPointing=!1,n.isDragging=!1,t.isMenuOpen)return;if(!B&&t.isPenMode)return;t.capturedPointerId===e.pointerId&&(t.capturedPointerId=null,e.button=0),n.isPanning?1===e.button?t.inputs.keys.has(" ")?(t.slideCamera({speed:Math.min(2,t.inputs.pointerVelocity.len()),direction:t.inputs.pointerVelocity,friction:au}),t.setCursor({type:"grab"})):(n.isPanning=!1,t.slideCamera({speed:Math.min(2,t.inputs.pointerVelocity.len()),direction:t.inputs.pointerVelocity,friction:au}),t.setCursor({type:t._prevCursor})):0===e.button&&(t.slideCamera({speed:Math.min(2,t.inputs.pointerVelocity.len()),direction:t.inputs.pointerVelocity,friction:au}),t.setCursor({type:"grab"})):5===e.button&&(t.complete(),t.setSelectedTool(t._restoreToolId))}break;case"keyboard":switch("ShiftRight"===e.key&&(e.key="ShiftLeft"),"AltRight"===e.key&&(e.key="AltLeft"),"ControlRight"===e.code&&(e.code="ControlLeft"),e.name){case"key_down":n.keys.add(e.code),e.ctrlKey||"Space"!==e.code||(t.inputs.isPanning||(t._prevCursor=t.instanceState.cursor.type),t.inputs.isPanning=!0,t.setCursor({type:t.inputs.isPointing?"grabbing":"grab"}));break;case"key_up":n.keys.delete(e.code),"Space"!==e.code||t.inputs.buttons.has(1)||(t.inputs.isPanning=!1,t.setCursor({type:t._prevCursor}))}}if("pointer"===e.type&&(1===e.button?e.name="middle_click":2===e.button&&(e.name="right_click"),e.isPen===t.isPenMode))switch(e.name){case"pointer_down":var W=t._clickManager.transformPointerDownEvent(e);if(e.name!==W.name)return t.root.handleEvent(e),t.emit("event",e),t.root.handleEvent(W),void t.emit("event",W);break;case"pointer_up":var H=t._clickManager.transformPointerUpEvent(e);if(e.name!==H.name)return t.root.handleEvent(e),t.emit("event",e),t.root.handleEvent(H),void t.emit("event",H);break;case"pointer_move":t._clickManager.handleMove()}t.root.handleEvent(e),t.emit("event",e)})),this}},{key:"replaceStoreContentsWithRecordsForOtherDocument",value:function(e){var t=this;It((function(){t.store.clear();var n=L(function(e,t){var n,r=[],i=[],o=X(e);try{for(o.s();!(n=o.n()).done;){var a=n.value;t(a)?r.push(a):i.push(a)}}catch(s){o.e(s)}finally{o.f()}return[r,i]}(e,(function(e){return"shape"===e.typeName})),2),r=n[0],i=n[1];t.store.put(i,"initialize"),t.store.ensureStoreIsUsable(),t.store.put(r,"initialize"),t.history.clear(),t.updateViewportScreenBounds(),t.updateRenderingBounds();var o=t.allShapesCommonBounds;o&&t.zoomToBounds(o.minX,o.minY,o.width,o.height,1)}))}},{key:"getContent",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectedIds;if(t&&0!==t.length){var n={},r=q(t.map((function(t){return e.getShapeById(t)})).sort(T).flatMap((function(t){var n=[t];return e.visitDescendants(t.id,(function(t){n.push(e.getShapeById(t))})),n})));r=r.map((function(t){if(n[t.id]=e.getPageTransformById(t.id),t=_e(t),e.isShapeOfType(t,wf)){var i="binding"===t.props.start.type?t.props.start.boundShapeId:void 0,o="binding"===t.props.end.type?t.props.end.boundShapeId:void 0,a=e.getShapeUtil(wf).getArrowInfo(t);if("binding"===t.props.start.type&&!r.some((function(e){return e.id===i})))if(null!==a&&void 0!==a&&a.isValid){var s=a.start.point,u=s.x,l=s.y;t.props.start={type:"point",x:u,y:l}}else{var c=nf(e,t).start;t.props.start={type:"point",x:c.x,y:c.y}}if("binding"===t.props.end.type&&!r.some((function(e){return e.id===o})))if(null!==a&&void 0!==a&&a.isValid){var d=a.end.point,f=d.x,h=d.y;t.props.end={type:"point",x:f,y:h}}else{var p=nf(e,t).end;t.props.end={type:"point",x:p.x,y:p.y}}var v=Zd(t)?af(e,t):df(e,t);if(null!==a&&void 0!==a&&a.isValid&&null!==v&&void 0!==v&&v.isValid&&!Zd(t)){var g=va.Med(a.start.handle,a.end.handle),m=va.Dist(a.middle,g),y=va.Dist(v.middle,g);t.props.bend<0?t.props.bend+=y-m:t.props.bend-=y-m}return t}return t}));var i=[];r.forEach((function(t){if(void 0===r.find((function(e){return e.id===t.parentId}))){var n=e.getPagePointById(t.id),o=e.getPageRotationById(t.id);t.x=n.x,t.y=n.y,t.rotation=o,t.parentId=e.currentPageId,i.push(t.id)}}));var o=new Set;return r.forEach((function(e){"assetId"in e.props&&null!==e.props.assetId&&o.add(e.props.assetId)})),{shapes:r,rootShapeIds:i,schema:this.store.schema.serialize(),assets:$(Array.from(o).map((function(t){return e.getAssetById(t)})))}}}},{key:"putContent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.isReadOnly)return this;if(!e.schema)throw Error("Could not put content: content is missing a schema.");var r,i=n.select,o=void 0!==i&&i,a=n.preserveIds,s=void 0!==a&&a,u=n.preservePosition,l=void 0!==u&&u,c=n.point,d=void 0===c?void 0:c,f=this.currentPageId,h=e.assets,p=e.shapes,v=e.rootShapeIds,g=new Map(p.map((function(e){return[e.id,li()]}))),m=this.currentPageId,y=1/0,b=[],w=X(this.selectedShapes);try{for(w.s();!(r=w.n()).done;){var x=r.value;if(0===y)break;var k=this.isShapeOfType(x,lh),S=this.getAncestors(x);k&&S.push(x);var _=k?S.length+1:S.length;if(_<y)y=_,b=S,m=k?x.id:x.parentId;else if(_===y){if(b.length!==S.length)throw Error("Ancestors: ".concat(b.length," !== ").concat(S.length));if(0===b.length){m=f;break}m=f;for(var E=0;E<b.length&&S[E]===b[E];E++)m=S[E].id}}}catch(K){w.e(K)}finally{w.f()}var C=!1;if(!bn(m)){var I=this.getShapeById(m);if(I)if(this.viewportPageBounds.includes(this.getPageBounds(I))){if(1===v.length){var T=p.find((function(e){return e.id===v[0]}));this.isShapeOfType(I,lh)&&this.isShapeOfType(T,lh)&&T.props.w===(null===I||void 0===I?void 0:I.props.w)&&T.props.h===(null===I||void 0===I?void 0:I.props.h)&&(C=!0)}}else m=f;else m=f}C||(C=g.has(m)),C&&(m=this.getShapeById(m).parentId);var M=this.getHighestIndexForParent(m),A=[],O=p.map((function(e){var n;if(s)n=ce(e),g.set(e.id,e.id);else{var r=g.get(e.id);n=ce(R(R({},e),{},{id:r}))}if(v.includes(e.id)&&(n.parentId=f,A.push(n)),g.has(n.parentId)?n.parentId=g.get(e.parentId):(v.push(n.id),n.index=M,M=P(M)),t.isShapeOfType(n,wf)){if("binding"===n.props.start.type){var i=g.get(n.props.start.boundShapeId);n.props.start=i?R(R({},n.props.start),{},{boundShapeId:i}):{type:"point",x:0,y:0}}if("binding"===n.props.end.type){var o=g.get(n.props.end.boundShapeId);n.props.end=o?R(R({},n.props.end),{},{boundShapeId:o}):{type:"point",x:0,y:0}}}return n}));if(O.length+this.currentPageShapeIds.size>Zs)return wg(this),this;var j=[];if(h){for(var L=0;L<h.length;L++){var D=h[L],N=this.store.schema.migratePersistedRecord(D,e.schema);if("success"!==N.type)throw Error("Could not put content: could not migrate content for asset:\n".concat(JSON.stringify(D,null,2)));h[L]=N.value}var z=[];j=h.filter((function(e){return!t.store.has(e.id)})).map((function(e){var t;"image"!==e.type&&"video"!==e.type||(e.props.src&&null!==(t=e.props.src)&&void 0!==t&&t.startsWith("data:image")?(z.push(_e(e)),e.props.src=null):z.push(_e(e)));return e})),Promise.allSettled(z.map(function(){var e=na(ea().mark((function e(n){var r,i,o;return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rv(n.props.src,n.props.name,null!==(r=n.props.mimeType)&&void 0!==r?r:"image/png");case 2:return i=e.sent,e.next=5,t.externalContentManager.createAssetFromFile(t,i);case 5:return o=e.sent,e.abrupt("return",[n,o]);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).then((function(e){t.updateAssets($(e.map((function(e){return"fulfilled"===e.status?R(R({},e.value[1]),{},{id:e.value[0].id}):void 0}))))}))}for(var B=0;B<O.length;B++){var F=O[B],U=this.store.schema.migratePersistedRecord(F,e.schema);if("success"!==U.type)throw Error("Could not put content: could not migrate content for shape:\n".concat(JSON.stringify(F,null,2)));O[B]=U.value}return this.batch((function(){j.length>0&&t.createAssets(j),t.createShapes(O,o),m!==f&&t.reparentShapesById(A.map((function(e){return e.id})),m);var e=O.map((function(e){return t.getShapeById(e.id)})),n=Wa.Common(e.map((function(e){return t.getPageBounds(e)})));if(void 0===d)if(bn(m)){var r=t.viewportPageBounds;d=l||r.includes(Wa.From(n))?n.center:r.center}else{var i=t.getShapeById(m),a=t.getShapeUtil(i);d=a.center(i)}if(1===A.length){var s=A[0];if(t.isShapeOfType(s,lh))for(;t.getShapesAtPoint(d).some((function(e){return t.isShapeOfType(e,lh)&&e.props.w===s.props.w&&e.props.h===s.props.h}));)d.x+=n.w+16}t.updateShapes(A.map((function(e){var t,r,i=(null!==(t=e.x)&&void 0!==t?t:0)-(n.x+n.w/2),o=(null!==(r=e.y)&&void 0!==r?r:0)-(n.y+n.h/2);return{id:e.id,type:e.type,x:d.x+i,y:d.y+o}})))})),this}},{key:"createShapes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._createShapes(e,t),this}},{key:"animateShapes",value:function(e){var t,n,r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i.duration,a=void 0===o?500:o,s=i.ease,u=void 0===s?pa.linear:s,l=bd(),c=a,d=[];e.forEach((function(e){if(e){var t={partial:e,values:[]},n=r.getShapeById(e.id);if(n){for(var i=0,o=["x","y","rotation"];i<o.length;i++){var a=o[i];void 0!==e[a]&&n[a]!==e[a]&&t.values.push({prop:a,from:n[a],to:e[a]})}d.push(t),r.animatingShapes.set(n.id,l)}}}));return this.addListener("tick",(function i(o){if((c-=o)<0){var s=r.animatingShapes,f=e.filter((function(e){return e&&s.get(e.id)===l}));return f.length&&r.updateShapes(f,!1),void r.removeListener("tick",i)}t=u(1-c/a);var h=r.animatingShapes;try{for(var p=[],v=0;v<d.length;v++)n=d[v],h.get(n.partial.id)===l&&p.push(R({id:n.partial.id,type:n.partial.type},n.values.reduce((function(e,n){var r=n.prop,i=n.from,o=n.to;return e[r]=i+(o-i)*t,e}),{})));r._updateShapes(p,!0)}catch(kM){}})),this}},{key:"updateShapes",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=$(e);return this.animatingShapes.size>0&&r.forEach((function(e){return t.animatingShapes.delete(e.id)})),r=r.filter((function(e){var n=t.getShapeById(e.id);return!!n&&!(t.isShapeOrAncestorLocked(n)&&!Object.hasOwn(e,"isLocked"))})),this._updateShapes(r,n),this}},{key:"_getUnlockedShapeIds",value:function(e){var t=this;return e.filter((function(e){var n;return!(null!==(n=t.getShapeById(e))&&void 0!==n&&n.isLocked)}))}},{key:"deleteShapes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectedIds;return this._deleteShapes(this._getUnlockedShapeIds(e)),this}},{key:"locale",get:function(){return this.user.locale}},{key:"setLocale",value:function(e){this.user.updateUserPreferences({locale:e})}},{key:"updatePage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._updatePage(e,t),this}},{key:"createPage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yn.createId(),n=arguments.length>2?arguments[2]:void 0;return this._createPage(e,t,n),this}},{key:"duplicatePage",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.currentPageId,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yn.createId();if(this.pages.length>=40)return this;var r=this.getPageById(t);if(!r)return this;var i=R({},this.camera),o=this.getContent(this.getSortedChildIds(r.id));return this.batch((function(){if(e.createPage(r.name+" Copy",n,r.index),e.setCurrentPageId(n),e.setCamera(i.x,i.y,i.z),o)return e.putContent(o)})),this}},{key:"deletePage",value:function(e){this._deletePage(e)}},{key:"_assets",get:function(){return this.store.query.records("asset")}},{key:"assets",get:function(){return this._assets.value}},{key:"createAssets",value:function(e){return this._createAssets(e),this}},{key:"deleteAssets",value:function(e){return this._deleteAssets(e),this}},{key:"updateAssets",value:function(e){return this._updateAssets(e),this}},{key:"getAssetBySrc",value:function(e){return this.assets.find((function(t){return t.props.src===e}))}},{key:"getAssetById",value:function(e){return this.store.get(e)}},{key:"renamePage",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.isReadOnly||this.updatePage({id:e,name:t},n),this}},{key:"moveShapesToPage",value:function(e,t){var n=this;if(0===e.length)return this;if(this.isReadOnly)return this;var r=this.currentPageId;if(t===r)return this;if(!this.store.has(t))return this;var i=this.getContent(e);if(!i)return this;if(this.getShapeIdsInPage(t).size+i.shapes.length>Zs)return wg(this,t),this;var o=this.camera.z;return this.history.batch((function(){n.deleteShapes(e),n.setCurrentPageId(t),n.setFocusLayer(null),n.selectNone(),n.putContent(i,{select:!0,preserveIds:!0,preservePosition:!0});var r=n.selectionBounds.center,a=r.x,s=r.y;n.setCamera(n.camera.x,n.camera.y,o),n.centerOnPoint(a,s)})),this}},{key:"toggleLock",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectedIds;if(this.isReadOnly||0===e.length)return this;var t,n=!0,r=!0,i=[],o=X(e);try{for(o.s();!(t=o.n()).done;){var a=t.value,s=this.getShapeById(a);s&&(i.push(s),s.isLocked?r=!1:n=!1)}}catch(u){o.e(u)}finally{o.f()}return r?(this.updateShapes(i.map((function(e){return{id:e.id,type:e.type,isLocked:!0}}))),this.setSelectedIds([])):n?this.updateShapes(i.map((function(e){return{id:e.id,type:e.type,isLocked:!1}}))):this.updateShapes(i.map((function(e){return{id:e.id,type:e.type,isLocked:!0}}))),this}},{key:"reorderShapes",value:function(e,t){var n=this;if(this.isReadOnly)return this;if(0===t.length)return this;var r=this.getParentsMappedToChildren(t),i=[];switch(e){case"toBack":r.forEach((function(e,t){var r=$(n.getSortedChildIds(t).map((function(e){return n.getShapeById(e)})));if(e.size!==r.length){var o,a,s,u=X(r);try{for(u.s();!(s=u.n()).done;){var l=s.value;if(!e.has(l)){a=l.index;break}e.delete(l),o=l.index}}catch(d){u.e(d)}finally{u.f()}if(0!==e.size){var c=_(o,a,e.size);Array.from(e.values()).sort(T).forEach((function(e,t){return i.push({id:e.id,type:e.type,index:c[t]})}))}}}));break;case"toFront":r.forEach((function(e,t){var r=$(n.getSortedChildIds(t).map((function(e){return n.getShapeById(e)}))),o=r.length;if(e.size!==o){for(var a,s,u=o-1;u>-1;u--){var l=r[u];if(!e.has(l)){a=l.index;break}e.delete(l),s=l.index}if(0!==e.size){var c=_(a,s,e.size);Array.from(e.values()).sort(T).forEach((function(e,t){return i.push({id:e.id,type:e.type,index:c[t]})}))}}}));break;case"forward":r.forEach((function(e,t){var r=$(n.getSortedChildIds(t).map((function(e){return n.getShapeById(e)}))),o=r.length;if(e.size!==o)for(var a,s=new Set(Array.from(e).map((function(e){return r.indexOf(e)}))),u=-1,l=!1,c=0;c<o;c++){var d=s.has(c);if(!l&&d)l=!0,u=c,void 0;else if(l&&!d){var f;l=!1,a=c-u;for(var h=_(r[c].index,null===(f=r[c+1])||void 0===f?void 0:f.index,a),p=0;p<a;p++){var v=r[u+p];i.push({id:v.id,type:v.type,index:h[p]})}}}}));break;case"backward":r.forEach((function(e,t){var r=$(n.getSortedChildIds(t).map((function(e){return n.getShapeById(e)}))),o=r.length;if(e.size!==o)for(var a,s=new Set(Array.from(e).map((function(e){return r.indexOf(e)}))),u=-1,l=!1,c=o-1;c>-1;c--){var d=s.has(c);if(!l&&d)l=!0,u=c;else if(l&&!d){var f;l=!1,a=u-c;for(var h=_(null===(f=r[c-1])||void 0===f?void 0:f.index,r[c].index,a),p=0;p<a;p++){var v=r[c+p+1];i.push({id:v.id,type:v.type,index:h[p]})}}}}))}return this.updateShapes(i),this}},{key:"sendToBack",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pageState.selectedIds;return this.reorderShapes("toBack",e),this}},{key:"sendBackward",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pageState.selectedIds;return this.reorderShapes("backward",e),this}},{key:"bringForward",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pageState.selectedIds;return this.reorderShapes("forward",e),this}},{key:"bringToFront",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pageState.selectedIds;return this.reorderShapes("toFront",e),this}},{key:"flipShapes",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selectedIds;if(this.isReadOnly)return this;var r=$(n.map((function(e){return t.getShapeById(e)})));if(!r.length)return this;r=$(r.map((function(e){return t.isShapeOfType(e,ah)?t.getSortedChildIds(e.id).map((function(e){return t.getShapeById(e)})):e})).flat());var i=Wa.Common($(r.map((function(e){return t.getPageBounds(e)})))).center;return this.batch((function(){var n,o=X(r);try{for(o.s();!(n=o.n()).done;){var a=n.value,s=t.getShapeUtil(a).bounds(a),u=t.getPageTransformById(a.id);u&&t.resizeShape(a.id,{x:"horizontal"===e?-1:1,y:"vertical"===e?-1:1},{initialBounds:s,initialPageTransform:u,initialShape:a,mode:"scale_shape",scaleOrigin:i,scaleAxisRotation:0})}}catch(l){o.e(l)}finally{o.f()}})),this}},{key:"stackShapes",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.pageState.selectedIds,r=arguments.length>2?arguments[2]:void 0;if(this.isReadOnly)return this;var i=$(n.map((function(e){return t.getShapeById(e)}))).filter((function(e){return!!e&&(!t.isShapeOfType(e,wf)||"binding"!==e.props.start.type&&"binding"!==e.props.end.type)})),o=i.length;if(void 0===r&&o<3||o<2)return this;var a,s,u,l,c,d=Object.fromEntries(i.map((function(e){return[e.id,t.getPageBounds(e)]})));if("horizontal"===e?(a="x",s="minX",u="maxX",l="width"):(a="y",s="minY",u="maxY",l="height"),void 0===r){var f=[];i.sort((function(e,t){return d[e.id][s]-d[t.id][s]}));for(var h=function(){var e=i[p],t=i[p+1],n=d[e.id],r=d[t.id][s]-n[u],o=f.find((function(e){return e.gap===r}));o?o.count++:f.push({gap:r,count:1})},p=0;p<o-1;p++)h();var v=0;f.forEach((function(e){e.count>v&&(v=e.count,c=e.gap)})),1===v&&(c=Math.max(0,f.reduce((function(e,t){return e+t.gap*t.count}),0)/(o-1)))}else c=r;var g=[],m=d[i[0].id][u];return i.forEach((function(e,n){var r,i;if(0!==n){var o={x:0,y:0};o[a]=m+c-d[e.id][a];var s=t.getParentShape(e),u=s?va.Rot(o,-t.getPageRotation(s)):o,f=null===(r=(i=t.getShapeUtil(e)).onTranslateStart)||void 0===r?void 0:r.call(i,e);g.push(f?R(R({},f),{},O({},a,e[a]+u[a])):O({id:e.id,type:e.type},a,e[a]+u[a])),m+=d[e.id][l]+c}})),this.updateShapes(g),this}},{key:"packShapes",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pageState.selectedIds,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16;if(this.isReadOnly)return this;if(t.length<2)return this;for(var r,i,o=$(t.map((function(t){return e.getShapeById(t)})).filter((function(t){return!!t&&(!e.isShapeOfType(t,wf)||"binding"!==t.props.start.type&&"binding"!==t.props.end.type)}))),a={},s={},u=0,l=0;l<o.length;l++)r=o[l],i=this.getPageBounds(r),a[r.id]=i,s[r.id]=i.clone(),u+=i.width*i.height;var c=Wa.Common($(Object.values(a))),d=c.width;o.sort((function(e,t){return a[t.id].height-a[e.id].height}));for(var f,h,p=Math.max(Math.ceil(Math.sqrt(u/.95)),d),v=[new Wa(c.x,c.y,p,1/0)],g=0,m=0,y=0;y<o.length;y++){i=s[(r=o[y]).id];for(var b=v.length-1;b>=0;b--)if(f=v[b],!(i.width>f.width||i.height>f.height)){i.x=f.x,i.y=f.y,m=Math.max(m,i.maxY),g=Math.max(g,i.maxX),i.width===f.width&&i.height===f.height?(h=v.pop(),b<v.length&&(v[b]=h)):i.height===f.height?(f.x+=i.width+n,f.width-=i.width+n):i.width===f.width?(f.y+=i.height+n,f.height-=i.height+n):(v.push(new Wa(f.x+(i.width+n),f.y,f.width-(i.width+n),i.height)),f.y+=i.height+n,f.height-=i.height+n);break}}for(var w,x=Wa.Common(Object.values(s)),k=va.Sub(c.center,x.center),S=[],_=0;_<o.length;_++){var E,C;r=o[_],i=a[r.id],w=s[r.id];var P=this.getDeltaInParentSpace(r,va.Sub(w.point,i.point).add(k)),I={id:r.id,type:r.type,x:r.x+P.x,y:r.y+P.y},T=null===(E=(C=this.getShapeUtil(r)).onTranslateStart)||void 0===E?void 0:E.call(C,R(R({},r),I));T?S.push(R(R({},I),T)):S.push(I)}return S.length&&this.updateShapes(S),this}},{key:"alignShapes",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.pageState.selectedIds;if(this.isReadOnly)return this;if(n.length<2)return this;var r=$(n.map((function(e){return t.getShapeById(e)}))),i=Object.fromEntries(r.map((function(e){return[e.id,t.getPageBounds(e)]}))),o=Wa.Common($(Object.values(i))),a=[];return r.forEach((function(n){var r,s,u=i[n.id];if(u){var l={x:0,y:0};switch(e){case"top":l.y=o.minY-u.minY;break;case"center-vertical":l.y=o.midY-u.minY-u.height/2;break;case"bottom":l.y=o.maxY-u.minY-u.height;break;case"left":l.x=o.minX-u.minX;break;case"center-horizontal":l.x=o.midX-u.minX-u.width/2;break;case"right":l.x=o.maxX-u.minX-u.width}var c=t.getParentShape(n),d=c?va.Rot(l,-t.getPageRotation(c)):l,f=null===(r=(s=t.getShapeUtil(n)).onTranslateStart)||void 0===r?void 0:r.call(s,n);a.push(f?R(R({},f),{},{x:n.x+d.x,y:n.y+d.y}):{id:n.id,type:n.type,x:n.x+d.x,y:n.y+d.y})}})),this.updateShapes(a),this}},{key:"distributeShapes",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.pageState.selectedIds;if(this.isReadOnly)return this;if(n.length<3)return this;var r,i,o,a,s,u=n.length,l=$(n.map((function(e){return t.getShapeById(e)}))),c=Object.fromEntries(l.map((function(e){return[e.id,t.getPageBounds(e)]})));"horizontal"===e?(r="x",i="minX",o="maxX",a="midX",s="width"):(r="y",i="minY",o="maxY",a="midY",s="height");var d=[],f=l.sort((function(e,t){return c[e.id][i]-c[t.id][i]}))[0],h=l.sort((function(e,t){return c[t.id][o]-c[e.id][o]}))[0],p=c[f.id][a],v=(c[h.id][a]-p)/(u-1),g=p+v;return l.filter((function(e){return e!==f&&e!==h})).sort((function(e,t){return c[e.id][a]-c[t.id][a]})).forEach((function(e,n){var i,o,a={x:0,y:0};a[r]=g+v*n-c[e.id][s]/2-c[e.id][r];var u=t.getParentShape(e),l=u?va.Rot(a,-t.getPageRotation(u)):a,f=null===(i=(o=t.getShapeUtil(e)).onTranslateStart)||void 0===i?void 0:i.call(o,e);d.push(f?R(R({},f),{},O({},r,e[r]+l[r])):O({id:e.id,type:e.type},r,e[r]+l[r]))})),this.updateShapes(d),this}},{key:"_resizeUnalignedShape",value:function(e,t,n){var r=n.initialShape.type,i=new va(t.x,t.y);if(Math.abs(t.x)>Math.abs(t.y)?i.x=Math.sign(t.x)*Math.abs(t.y):i.y=Math.sign(t.y)*Math.abs(t.x),this.resizeShape(e,i,{initialShape:n.initialShape,initialBounds:n.initialBounds}),Math.sign(t.x)*Math.sign(t.y)<0){var o=Ja.Decompose(n.initialPageTransform).rotation;o-=2*o,this.updateShapes([{id:e,type:r,rotation:o}],!0)}var a=Ja.applyToPoint(n.initialPageTransform,n.initialBounds.center),s=this._scalePagePoint(a,n.scaleOrigin,t,n.scaleAxisRotation),u=this.getPageCenterById(e),l=this.getPagePointById(e);if(!u||!l)return this;var c=va.Sub(s,u),d=va.Add(l,c),f=this.getPointInParentSpace(e,d),h=f.x,p=f.y;return this.updateShapes([{id:e,type:r,x:h,y:p}],!0),this}},{key:"_scalePagePoint",value:function(e,t,n,r){var i=va.RotWith(e,t,-r).sub(t),o=va.MulV(i,n);return va.Add(o,t).rotWith(t,r)}},{key:"resizeShape",value:function(e,t){var n,r,i,o,a,s,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.isReadOnly)return this;Number.isFinite(t.x)||(t=new va(1,t.y)),Number.isFinite(t.y)||(t=new va(t.x,1));var l=null!==(n=u.initialShape)&&void 0!==n?n:this.getShapeById(e);if(!l)return this;var c=null!==(r=u.scaleOrigin)&&void 0!==r?r:null===(i=this.getPageBoundsById(e))||void 0===i?void 0:i.center;if(!c)return this;var d=this.getPageRotationById(e);if(null==d)return this;var f=null!==(o=u.scaleAxisRotation)&&void 0!==o?o:d,h=null!==(a=u.initialPageTransform)&&void 0!==a?a:this.getPageTransformById(e);if(!h)return this;var p=null!==(s=u.initialBounds)&&void 0!==s?s:this.getBoundsById(e);if(!p)return this;if(!Oa(d,f))return this._resizeUnalignedShape(e,t,R(R({},u),{},{initialBounds:p,scaleOrigin:c,scaleAxisRotation:f,initialPageTransform:h,initialShape:l}));var v=this.getShapeUtil(l);if(v.isAspectRatioLocked(l)&&(t=Math.abs(t.x)>Math.abs(t.y)?new va(t.x,Math.sign(t.y)*Math.abs(t.x)):new va(Math.sign(t.x)*Math.abs(t.y),t.y)),v.onResize&&v.canResize(l)){var g,m,y=this._scalePagePoint(Ja.applyToPoint(h,new va(0,0)),c,t,f),b=this.getPointInParentSpace(l.id,y),w=new va(t.x,t.y),x=_a((d-f)%Math.PI,0);w.x=x?t.x:t.y,w.y=x?t.y:t.x;var k=Ja.applyToPoint(h,new va),S=this.getPointInParentSpace(l.id,k),_=S.x,E=S.y;this.updateShapes([R({id:e,type:l.type,x:b.x,y:b.y},v.onResize(R(R({},l),{},{x:_,y:E}),{newPoint:b,handle:null!==(g=u.dragHandle)&&void 0!==g?g:"bottom_right",mode:null!==(m=u.mode)&&void 0!==m?m:"scale_shape",scaleX:w.x,scaleY:w.y,initialBounds:p,initialShape:l}))],!0)}else{var C=Ja.applyToPoint(h,p.center),P=this._scalePagePoint(C,c,t,f),I=this.getPointInParentSpace(l.id,C),T=this.getPointInParentSpace(l.id,P),M=va.Sub(T,I);this.updateShapes([{id:e,type:l.type,x:l.x+M.x,y:l.y+M.y}],!0)}return this}},{key:"stretchShapes",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.pageState.selectedIds;if(this.isReadOnly)return this;if(n.length<2)return this;var r=$(n.map((function(e){return t.getShapeById(e)}))),i=Object.fromEntries(r.map((function(e){return[e.id,t.getBounds(e)]}))),o=Object.fromEntries(r.map((function(e){return[e.id,t.getPageBounds(e)]}))),a=Wa.Common($(Object.values(o)));switch(e){case"vertical":this.batch((function(){var e,n=X(r);try{for(n.s();!(e=n.n()).done;){var s=e.value;if(!(t.getPageRotation(s)%ba)){var u=i[s.id],l=o[s.id],c=t.getDeltaInParentSpace(s,new va(0,a.minY-l.minY)),d=va.Add(c,s),f=d.x,h=d.y;t.updateShapes([{id:s.id,type:s.type,x:f,y:h}],!0);var p=new va(1,a.height/l.height);t.resizeShape(s.id,p,{initialBounds:u,scaleOrigin:new va(l.center.x,a.minY),scaleAxisRotation:0})}}}catch(v){n.e(v)}finally{n.f()}}));break;case"horizontal":this.batch((function(){var e,n=X(r);try{for(n.s();!(e=n.n()).done;){var s=e.value,u=i[s.id],l=o[s.id];if(!(t.getPageRotation(s)%ba)){var c=t.getDeltaInParentSpace(s,new va(a.minX-l.minX,0)),d=va.Add(c,s),f=d.x,h=d.y;t.updateShapes([{id:s.id,type:s.type,x:f,y:h}],!0);var p=new va(a.width/l.width,1);t.resizeShape(s.id,p,{initialBounds:u,scaleOrigin:new va(a.minX,l.center.y),scaleAxisRotation:0})}}}catch(v){n.e(v)}finally{n.f()}}))}return this.updateShapes([]),this}},{key:"shapesArray",get:function(){var e=this;return Array.from(this.currentPageShapeIds,(function(t){return e.store.get(t)}))}},{key:"sortedShapesArray",get:function(){var e=this,t=new Set(this.shapesArray.sort(T)),n=[];function r(e){n.push(e),t.delete(e),t.forEach((function(t){t.parentId===e.id&&r(t)}))}return t.forEach((function(t){si(e.getShapeById(t.parentId))||r(t)})),n}},{key:"selectedShapes",get:function(){var e=this;return $(this.pageState.selectedIds.map((function(t){return e.store.get(t)})))}},{key:"onlySelectedShape",get:function(){var e=this.selectedShapes;return 1===e.length?e[0]:null}},{key:"isShapeOfType",value:function(e,t){return e.type===t.type}},{key:"getShapeById",value:function(e){if(ui(e))return this.store.get(e)}},{key:"getParentShape",value:function(e){if(void 0!==e&&ui(e.parentId))return this.store.get(e.parentId)}},{key:"getShapeNearestSibling",value:function(e,t){if(t)return t.parentId===e.parentId?t:this.findAncestor(t,(function(t){return t.parentId===e.parentId}))}},{key:"isShapeInPage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.currentPageId,n=!1;if(e.parentId===t)n=!0;else{var r=this.getShapeById(e.parentId);e:for(;r;){if(r.parentId===t){n=!0;break e}r=this.getShapeById(r.parentId)}}return n}},{key:"getAncestorPageId",value:function(e){if(void 0!==e)return bn(e.parentId)?e.parentId:this.getAncestorPageId(this.getShapeById(e.parentId))}},{key:"reparentShapesById",value:function(e,t,n){var r,i=this,o=[],a=bn(t)?Ja.Identity():this.getPageTransformById(t),s=a.decompose().rotation,u=[],l=$(this.getSortedChildIds(t).map((function(e){return i.getShapeById(e)})));if(n){var c=l.find((function(e){return e.index===n}));if(c){var d=l[l.indexOf(c)+1];u=d?_(n,d.index,e.length):E(n,e.length)}else{var f=l.sort(T).find((function(e){return e.index>n}));u=f?_(n,f.index,e.length):E(n,e.length)}}else{var h=l.length&&l[l.length-1];u=h?E(h.index,e.length):I(e.length)}for(var p=0;p<e.length;p++){r=e[p];var v=this.getShapeById(r),g=this.getPagePointById(r);if(v&&g){var m=Ja.applyToPoint(Ja.Inverse(a),g),y=this.getPageRotation(v)-s;o.push({id:v.id,type:v.type,parentId:t,x:m.x,y:m.y,rotation:y,index:u[p]})}}return this.updateShapes(o),this}},{key:"getHighestIndexForParent",value:function(e){var t=this._parentIdsToChildIds.value[e];return t&&0!==t.length?P(t[t.length-1][1]):"a1"}},{key:"getSortedChildIds",value:function(e){var t=this._parentIdsToChildIds.value[e];return t?this._childIdsCache.get(t,(function(){return t.map((function(e){return L(e,1)[0]}))})):ft}},{key:"visitDescendants",value:function(e,t){var n,r=X(this.getSortedChildIds(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;!1!==t(i)&&this.visitDescendants(i,t)}}catch(o){r.e(o)}finally{r.f()}}},{key:"getShapeAndDescendantIds",value:function(e){for(var t=new Set,n=u(e);n.length>0;){var r=n.pop();if(!r)break;t.has(r)||(t.add(r),this.getSortedChildIds(r).forEach((function(e){n.push(e)})))}return t}},{key:"getParentIdForNewShapeAtPoint",value:function(e,t){for(var n=this.sortedShapesArray,r=n.length-1;r>=0;r--){var i=n[r],o=this.getShapeUtil(i);if(o.canReceiveNewChildrenOfType(i,t)){var a=this.getMaskedPageBoundsById(i.id);if(a&&a.containsPoint(e)&&o.hitTestPoint(i,this.getPointInShapeSpace(i,e)))return i.id}}return this.focusLayerId}},{key:"getDroppingShape",value:function(e){for(var t,n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=this.sortedShapesArray,o=function(){var t=i[a];if(r.find((function(e){return e.id===t.id||n.hasAncestor(t,e.id)})))return 0;var o=n.getShapeUtil(t);if(!o.canDropShapes(t,r))return 0;var s=n.getMaskedPageBoundsById(t.id);return s&&s.containsPoint(e)&&o.hitTestPoint(t,n.getPointInShapeSpace(t,e))?{v:t}:void 0},a=i.length-1;a>=0;a--)if(0!==(t=o())&&t)return t.v}},{key:"getOutermostSelectableShape",value:function(e,t){for(var n=e,r=e;r;){var i;if(!this.isShapeOfType(r,ah)||this.focusLayerId===r.id||this.hasAncestor(this.focusLayerShape,r.id)||null!==(i=null===t||void 0===t?void 0:t(r))&&void 0!==i&&!i){if(this.focusLayerId===r.id)break}else n=r;r=this.getParentShape(r)}return n}},{key:"setCurrentPageId",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).stopFollowing,n=void 0===t||t;return this._setCurrentPageId(e,{stopFollowing:n}),this}},{key:"updateInstanceState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this._updateInstanceState(e,t,n),this}},{key:"setCursor",value:function(e){var t=this.cursor,n=R(R({},t),{},{rotation:0},e);return t.type===n.type&&t.rotation===n.rotation&&t.color===n.color||this.updateInstanceState({cursor:n},!0),this}},{key:"setScribble",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.updateInstanceState({scribble:e},!0),this}},{key:"setBrush",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e||this.brush?(this.updateInstanceState({brush:e},!0),this):this}},{key:"setZoomBrush",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e||this.zoomBrush?(this.updateInstanceState({zoomBrush:e},!0),this):this}},{key:"rotateShapesBy",value:function(e,t){return e.length<=0||ov({delta:t,snapshot:iv({editor:this}),editor:this,stage:"one-off"}),this}},{key:"nudgeShapes",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e.length<=0)return this;var i,o=this.isGridMode?n?5*this.gridSize:this.gridSize:n?10:1,a=va.Mul(t,o),s=[],u=X(e);try{for(u.s();!(i=u.n()).done;){var l,c,d=i.value,f=this.getShapeById(d);if(!f)throw Error("Could not find a shape with the id ".concat(d,"."));var h=this.getDeltaInParentSpace(f,a),p=null===(l=(c=this.getShapeUtil(f)).onTranslateStart)||void 0===l?void 0:l.call(c,f);s.push(p?R(R({},p),{},{x:f.x+h.x,y:f.y+h.y}):{id:d,x:f.x+h.x,y:f.y+h.y,type:f.type})}}catch(v){u.e(v)}finally{u.f()}return this.updateShapes(s,r),this}},{key:"duplicateShapes",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectedIds,n=arguments.length>1?arguments[1]:void 0;if(t.length<=0)return this;for(var r=new Set(t),i=[],o=u(t);o.length>0;){var a=o.pop();if(!a)break;i.push(a),this.getSortedChildIds(a).forEach((function(e){return o.push(e)}))}i.reverse();var s=new Map(i.map((function(e){return[e,li()]}))),l=$(i.map((function(t){var i,o=e.getShapeById(t);if(!o)return null;var a=s.get(t),u=0,l=0;if(n&&r.has(t)){var c=e.getParentTransform(o),d=new va(n.x,n.y).rot(-Ja.Decompose(c).rotation);u=d.x,l=d.y}var f=null!==(i=o.parentId)&&void 0!==i?i:e.currentPageId,h=e.getSortedChildIds(f),p=h.indexOf(o.id),v=h[p+1],g=v?e.getShapeById(v):null,m=g?C(o.index,g.index):P(o.index),y=ce(o);if(e.isShapeOfType(o,wf)&&e.isShapeOfType(y,wf)){var b=e.getShapeUtil(wf).getArrowInfo(o),w=void 0,x=void 0;if("binding"===o.props.start.type&&!(w=s.get(o.props.start.boundShapeId)))if(null!==b&&void 0!==b&&b.isValid){var k=b.start.point,S=k.x,_=k.y;y.props.start={type:"point",x:S,y:_}}else{var E=nf(e,o).start;y.props.start={type:"point",x:E.x,y:E.y}}if("binding"===o.props.end.type&&!(x=s.get(o.props.end.boundShapeId)))if(null!==b&&void 0!==b&&b.isValid){var I=b.end.point,T=I.x,M=I.y;y.props.end={type:"point",x:T,y:M}}else{var A=nf(e,o).end;y.props.start={type:"point",x:A.x,y:A.y}}var O=Zd(y)?af(e,y):df(e,y);if(null!==b&&void 0!==b&&b.isValid&&null!==O&&void 0!==O&&O.isValid&&!Zd(o)){var j=va.Med(b.start.handle,b.end.handle),L=va.Dist(b.middle,j),D=va.Dist(O.middle,j);y.props.bend<0?y.props.bend+=D-L:y.props.bend-=D-L}"binding"===y.props.start.type&&w&&(y.props.start.boundShapeId=w),"binding"===y.props.end.type&&x&&(y.props.end.boundShapeId=x)}return y=R(R({},y),{},{id:a,x:o.x+u,y:o.y+l,index:m})})));return l.forEach((function(e){ui(e.parentId)&&s.has(e.parentId)&&(e.parentId=s.get(e.parentId))})),this.history.batch((function(){var t=l.length+e.currentPageShapeIds.size>Zs;t&&wg(e);var r=t?l.slice(0,Zs-e.currentPageShapeIds.size):l,i=r.map((function(e){return e.id}));if(e.createShapes(r),e.setSelectedIds(i),void 0!==n){var o=e.viewportPageBounds,a=e.selectedPageBounds;a&&!o.contains(a)&&e.centerOnPoint(a.center.x,a.center.y,{duration:eu})}})),this}},{key:"setOpacity",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.history.batch((function(){if(t.isIn("select")){var i=t.pageState.selectedIds,o=[],a=function e(n){var r=t.getShapeById(n);if(r)if(t.isShapeOfType(r,ah)){var i,a=X(t.getSortedChildIds(n));try{for(a.s();!(i=a.n()).done;){e(i.value)}}catch(s){a.e(s)}finally{a.f()}}else o.push(r)};if(i.length>0){var s,u=X(i);try{for(u.s();!(s=u.n()).done;){a(s.value)}}catch(l){u.e(l)}finally{u.f()}t.updateShapes(o.map((function(t){return{id:t.id,type:t.type,opacity:e}})),n)}}t.updateInstanceState({opacityForNextShape:e},n,r)})),this}},{key:"setStyle",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.history.batch((function(){if(n.isIn("select")){var o=n.pageState.selectedIds;if(o.length>0){var a,s=[],u=function r(i){var o=n.getShapeById(i);if(o)if(n.isShapeOfType(o,ah)){var a,u=X(n.getSortedChildIds(i));try{for(u.s();!(a=u.n()).done;){r(a.value)}}catch(d){u.e(d)}finally{u.f()}}else{var l=n.getShapeUtil(o);if(l.hasStyle(e)){var c={id:o.id,type:o.type,props:{}};s.push({originalShape:o,updatePartial:l.setStyleInPartial(e,c,t)})}}},l=X(o);try{for(l.s();!(a=l.n()).done;){u(a.value)}}catch(w){l.e(w)}finally{l.f()}n.updateShapes(s.map((function(e){return e.updatePartial})),r);for(var c=[],d=0,f=s;d<f.length;d++){var h=f[d].originalShape,p=n.getShapeById(h.id);if(p){var v=n.getShapeUtil(p),g=v.bounds(h),m=v.bounds(p),y={id:h.id,type:h.type},b=!1;if(g.width!==m.width)if(b=!0,n.isShapeOfType(h,Oc))switch(h.props.align){case"middle":y.x=p.x+(g.width-m.width)/2;break;case"end":y.x=p.x+g.width-m.width}else y.x=p.x+(g.width-m.width)/2;g.height!==m.height&&(b=!0,y.y=p.y+(g.height-m.height)/2),b&&c.push(y)}}c.length&&n.updateShapes(c,r)}}n.updateInstanceState({stylesForNextShape:R(R({},n._stylesForNextShape),{},O({},e.id,t))},r,i)})),this}},{key:"_setCamera",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.camera.z,i=this.camera;if(i.x===e&&i.y===t&&i.z===r)return this;var o=R(R({},i),{},{x:e,y:t,z:r});return this.batch((function(){var e;n.store.put([o]);var t=n.inputs.currentScreenPoint;n.dispatch({type:"pointer",target:"canvas",name:"pointer_move",point:t,pointerId:uu,ctrlKey:n.inputs.ctrlKey,altKey:n.inputs.altKey,shiftKey:n.inputs.shiftKey,button:0,isPen:null!==(e=n.isPenMode)&&void 0!==e&&e}),n._tickCameraState()})),this}},{key:"setCamera",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.camera.z,r=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).stopFollowing,i=void 0===r||r;return this.stopCameraAnimation(),i&&this.instanceState.followingUserId&&this.stopFollowingUser(),e=Number.isNaN(e)?0:e,t=Number.isNaN(t)?0:t,n=Number.isNaN(n)?1:n,this._setCamera(e,t,n),this}},{key:"animateCamera",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.camera.z,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ou;e=Number.isNaN(e)?0:e,t=Number.isNaN(t)?0:t,n=Number.isNaN(n)?1:n;var i=this.viewportScreenBounds,o=i.width,a=i.height,s=new Wa(-e,-t,o/n,a/n);return this._animateToViewport(s,r)}},{key:"centerOnPoint",value:function(e,t,n){if(!this.canMoveCamera)return this;var r=this.viewportPageBounds,i=r.width,o=r.height,a=this.camera;return null!==n&&void 0!==n&&n.duration?this.animateCamera(-(e-i/2),-(t-o/2),a.z,n):this.setCamera(-(e-i/2),-(t-o/2),a.z),this}},{key:"zoomToContent",value:function(){var e,t=null!==(e=this.selectedPageBounds)&&void 0!==e?e:this.allShapesCommonBounds;return t&&this.zoomToBounds(t.minX,t.minY,t.width,t.height,Math.min(1,this.zoomLevel),{duration:220}),this}},{key:"zoomToFit",value:function(e){var t=this;if(!this.canMoveCamera)return this;var n=u(this.currentPageShapeIds);if(n.length<=0)return this;var r=Wa.Common($(n.map((function(e){return t.getPageBoundsById(e)}))));return this.zoomToBounds(r.minX,r.minY,r.width,r.height,void 0,e),this}},{key:"resetZoom",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.viewportScreenCenter,t=arguments.length>1?arguments[1]:void 0;if(!this.canMoveCamera)return this;var n=this.camera,r=n.x,i=n.y,o=n.z,a=e.x,s=e.y;return null!==t&&void 0!==t&&t.duration?this.animateCamera(r+(a/1-a)-(a/o-a),i+(s/1-s)-(s/o-s),1,t):this.setCamera(r+(a/1-a)-(a/o-a),i+(s/1-s)-(s/o-s),1),this}},{key:"zoomIn",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.viewportScreenCenter,t=arguments.length>1?arguments[1]:void 0;if(!this.canMoveCamera)return this;for(var n=this.camera,r=n.x,i=n.y,o=n.z,a=8,s=1;s<tu.length;s++){var u=tu[s];if(!(u-o<=(u-tu[s-1])/2)){a=u;break}}var l=e.x,c=e.y;return null!==t&&void 0!==t&&t.duration?this.animateCamera(r+(l/a-l)-(l/o-l),i+(c/a-c)-(c/o-c),a,t):this.setCamera(r+(l/a-l)-(l/o-l),i+(c/a-c)-(c/o-c),a),this}},{key:"zoomOut",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.viewportScreenCenter,t=arguments.length>1?arguments[1]:void 0;if(!this.canMoveCamera)return this;for(var n=this.camera,r=n.x,i=n.y,o=n.z,a=nu,s=tu.length-1;s>0;s--){var u=tu[s-1],l=tu[s];if(!(l-o>=(l-u)/2)){a=u;break}}var c=e.x,d=e.y;return null!==t&&void 0!==t&&t.duration?this.animateCamera(r+(c/a-c)-(c/o-c),i+(d/a-d)-(d/o-d),a,t):this.setCamera(r+(c/a-c)-(c/o-c),i+(d/a-d)-(d/o-d),a),this}},{key:"zoomToSelection",value:function(e){var t=this;if(!this.canMoveCamera)return this;var n=this.selectedIds;if(n.length<=0)return this;var r=Wa.Common($(n.map((function(e){return t.getPageBoundsById(e)}))));return this.zoomToBounds(r.minX,r.minY,r.width,r.height,Math.max(1,this.camera.z),e),this}},{key:"panZoomIntoView",value:function(e,t){var n=this;if(!this.canMoveCamera)return this;if(e.length<=0)return this;var r=Wa.Common($(e.map((function(e){return n.getPageBoundsById(e)})))),i=this.viewportPageBounds;if(i.h<r.h||i.w<r.w)return this.zoomToBounds(r.minX,r.minY,r.width,r.height,this.camera.z,t),this;var o=this._activeAreaManager.offsets.value,a=i.y+o.top,s=i.maxY-o.right,u=i.maxY-o.bottom,l=i.x+o.left,c=r.y,d=r.maxX,f=r.maxY,h=r.x,p=0,v=0;u<f?v=u-f:a>c&&(v=a-c),s<d?p=s-d:l>h&&(p=l-h);var g=this.camera;return null!==t&&void 0!==t&&t.duration?this.animateCamera(g.x+p,g.y+v,g.z,t):this.setCamera(g.x+p,g.y+v,g.z),this}},{key:"zoomToBounds",value:function(e,t,n,r,i,o){if(!this.canMoveCamera)return this;var a=this.viewportScreenBounds,s=Math.min(256,.28*a.width),u=ka(Math.min((a.width-s)/n,(a.height-s)/r),nu,8);return void 0!==i&&(u=Math.min(i,u)),null!==o&&void 0!==o&&o.duration?this.animateCamera(-e+(a.width-n*u)/2/u,-t+(a.height-r*u)/2/u,u,o):this.setCamera(-e+(a.width-n*u)/2/u,-t+(a.height-r*u)/2/u,u),this}},{key:"pan",value:function(e,t,n){var r;if(!this.canMoveCamera)return this;var i=this.camera,o=i.x,a=i.y,s=i.z,u=new va(e,t).div(s);return null!==(r=null===n||void 0===n?void 0:n.duration)&&void 0!==r&&r?this.animateCamera(o+u.x,a+u.y,s,n):(this.setCamera(o+u.x,a+u.y,s),this)}},{key:"stopCameraAnimation",value:function(){return this.emit("stop-camera-animation"),this}},{key:"_animateViewport",value:function(e){var t=this;if(this._viewportAnimation){var n=function e(){t.removeListener("tick",t._animateViewport),t.removeListener("stop-camera-animation",e),t._viewportAnimation=null};this.once("stop-camera-animation",n),this._viewportAnimation.elapsed+=e;var r=this._viewportAnimation,i=r.elapsed,o=r.easing,a=r.duration,s=r.start,u=r.end;if(i>a){var l=this.viewportScreenBounds.width/u.width,c=-u.x,d=-u.y;return this._setCamera(c,d,l),void n()}var f=o(1-(a-i)/a),h=s.minX+(u.minX-s.minX)*f,p=s.minY+(u.minY-s.minY)*f,v=s.maxX+(u.maxX-s.maxX)*f,g=s.maxY+(u.maxY-s.maxY)*f,m=new Wa(h,p,v-h,g-p),y=this.viewportScreenBounds.width/m.width,b=-m.x,w=-m.y;this._setCamera(b,w,y)}}},{key:"_animateToViewport",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.duration,r=void 0===n?0:n,i=t.easing,o=void 0===i?pa.easeInOutCubic:i,a=this.animationSpeed,s=this.viewportPageBounds;return this.stopCameraAnimation(),this.instanceState.followingUserId&&this.stopFollowingUser(),0===r||0===a?this._setCamera(-e.x,-e.y,this.viewportScreenBounds.width/e.width):(this._viewportAnimation={elapsed:0,duration:r/a,easing:o,start:s.clone(),end:e},this.addListener("tick",this._animateViewport),this)}},{key:"slideCamera",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.canMoveCamera)return this;if(this.stopCameraAnimation(),0!==this.animationSpeed){var n=t.speed,r=t.friction,i=t.direction,o=t.speedThreshold,a=void 0===o?.01:o,s=Math.min(n,1),u=function t(){e.removeListener("tick",l),e.removeListener("stop-camera-animation",t)};this.once("stop-camera-animation",u);var l=function(t){var n=e.camera,o=n.x,l=n.y,c=n.z,d=i.clone().mul(s*t/c);(s*=1-r)<a?u():e._setCamera(o+d.x,l+d.y,c)};return this.addListener("tick",l),this}}},{key:"animateToUser",value:function(e){var t=this,n=u(this.store.query.records("instance_presence",(function(){return{userId:{eq:e}}})).value).sort((function(e,t){return e.lastActivityTimestamp-t.lastActivityTimestamp})).pop();n&&this.batch((function(){null!==t.instanceState.followingUserId&&t.stopFollowingUser();var r=n.currentPageId===t.currentPageId;r||t.setCurrentPageId(n.currentPageId);var i=r?{duration:500}:void 0,o=n.cursor;t.centerOnPoint(o.x,o.y,i);var a=t.instanceState.highlightedUserIds;t.updateInstanceState({highlightedUserIds:[].concat(u(a),[e])}),setTimeout((function(){var n=u(t.instanceState.highlightedUserIds),r=n.indexOf(e);r<0||(n.splice(r,1),t.updateInstanceState({highlightedUserIds:n}))}),3e3)}))}},{key:"startFollowingUser",value:function(e){var t=this,n=this.store.query.records("instance_presence",(function(){return{userId:{eq:e}}})),r=this.user.id;if(r||console.warn("You should set the userId for the current instance before following a user"),!n.value.some((function(e){return e.followingUserId===r}))){It((function(){t.stopFollowingUser(),t.updateInstanceState({followingUserId:e},!0)}));var i=!1,o=function(){var e=u(n.value).sort((function(e,t){return e.lastActivityTimestamp-t.lastActivityTimestamp})).pop();if(e){var o=e.currentPageId===t.currentPageId,a=o?.5:1;o||t.setCurrentPageId(e.currentPageId,{stopFollowing:!1});var s=t.viewportPageBounds,l=s.center,c=s.width,d=s.height,f=Wa.From(e.screenBounds),h=f.width/e.camera.z,p=f.height/e.camera.z,v=new va(h/2-e.camera.x,p/2-e.camera.y),g=c+(h-c)*a,m=d+(p-d)*a,y=e.followingUserId===r?d/m:Math.min(c/g,d/m),b=ka(t.camera.z*y,nu,8),w=t.viewportScreenBounds.w/b,x=t.viewportScreenBounds.h/b,k=v.sub(l),S=va.Add(l,va.Mul(k,a)),_=va.Sub(S,l).len(),E=Math.abs(b-t.camera.z);_<.1&&E<.005?i=!0:i&&_<.2&&E<.05||(i=!1,t.stopCameraAnimation(),t.setCamera(-(S.x-w/2),-(S.y-x/2),b,{stopFollowing:!1}))}else t.stopFollowingUser()};return this.once("stop-following",(function e(){t.removeListener("frame",o),t.removeListener("stop-following",e)})),this.addListener("frame",o),this}}},{key:"stopFollowingUser",value:function(){return this.updateInstanceState({followingUserId:null},!0),this.emit("stop-following"),this}},{key:"animateToShape",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ou;if(!this.canMoveCamera)return this;var n=uv(this),r=n.width/n.height,i=this.getPageBoundsById(e);if(!i)return this;var o=i.width/i.height,a=i.clone(),s=i.width/n.width;return a.width+=(n.left+n.right)*s,a.height+=(n.top+n.bottom)*s,a.x-=n.left*s,a.y-=n.top*s,o>r?(a.height=i.width/r,a.y-=(a.height-i.height)/2):(a.width=i.height*r,a.x-=(a.width-i.width)/2),this._animateToViewport(a,t)}},{key:"blur",value:function(){return this.complete(),this.getContainer().blur(),this._isFocused.set(!1),this}},{key:"focus",value:function(){return this.getContainer().focus(),this._isFocused.set(!0),this}},{key:"cancel",value:function(){return this.dispatch({type:"misc",name:"cancel"}),this}},{key:"interrupt",value:function(){return this.dispatch({type:"misc",name:"interrupt"}),this}},{key:"complete",value:function(){return this.dispatch({type:"misc",name:"complete"}),this}},{key:"putExternalContent",value:function(){var e=na(ea().mark((function e(t){return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.externalContentManager.handleContent(t);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"groupShapes",value:function(){var e,t,n=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectedIds,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:li();if(this.isReadOnly)return this;if(r.length<=1)return this;var o=$(this._getUnlockedShapeIds(r).map((function(e){return n.getShapeById(e)}))),a=o.sort(T).map((function(e){return e.id})),s=Wa.Common($(o.map((function(e){return n.getPageBounds(e)})))),u=s.point,l=u.x,c=u.y,d=null!==(e=this.findCommonAncestor(o))&&void 0!==e?e:this.currentPageId;if("select"!==this.currentToolId)return this;this.isIn("select.idle")||this.cancel();var f=o.filter((function(e){return e.parentId===d})).sort(T),h=null===(t=f[f.length-1])||void 0===t?void 0:t.index;return this.batch((function(){n.createShapes([{id:i,type:"group",parentId:d,index:h,x:l,y:c,opacity:1,props:{}}]),n.reparentShapesById(a,i),n.select(i)})),this}},{key:"ungroupShapes",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectedIds;if(this.isReadOnly)return this;if(0===t.length)return this;if("select"!==this.currentToolId)return this;this.isIn("select.idle")||this.cancel();var n=new Set,r=$(t.map((function(t){return e.getShapeById(t)}))),i=[];return r.forEach((function(t){e.isShapeOfType(t,ah)?i.push(t):n.add(t.id)})),0===i.length||this.batch((function(){for(var t,r=0,o=i.length;r<o;r++){t=i[r];for(var a=e.getSortedChildIds(t.id),s=0,l=a.length;s<l;s++)n.add(a[s]);e.reparentShapesById(a,t.parentId,t.index)}e.deleteShapes(i.map((function(e){return e.id}))),e.select.apply(e,u(n))})),this}},{key:"getSvg",value:function(){var e=na(ea().mark((function e(){var t,n,r,i,o,a,s,u,l,c,d,f,h,p,v,g,m,y,b,w,x,k,S,_,E,C,P,I,T,M,A,O,j,R,L,D,N,z,B,F,U,K=this,V=arguments;return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=V.length>0&&void 0!==V[0]?V[0]:this.selectedIds.length?this.selectedIds:Object.keys(this.currentPageShapeIds),n=V.length>1&&void 0!==V[1]?V[1]:{},0!==t.length){e.next=4;break}return e.abrupt("return");case 4:if(window.document){e.next=6;break}throw Error("No document");case 6:r=n.scale,i=void 0===r?1:r,o=n.background,a=void 0!==o&&o,s=n.padding,u=void 0===s?32:s,l=n.darkMode,c=void 0===l?this.isDarkMode:l,d=n.preserveAspectRatio,f=void 0!==d&&d,h=this.getContainer(),p=getComputedStyle(h),(v=document.createElement("div")).className="tl-container tl-theme__".concat(c?"dark":"light"," tl-theme__force-sRGB"),document.body.appendChild(v),g=getComputedStyle(v),m=new Map,y={fill:pe(ki.values.map((function(e){return[e,g.getPropertyValue("--palette-".concat(e))]}))),pattern:pe(ki.values.map((function(e){return[e,g.getPropertyValue("--palette-".concat(e,"-pattern"))]}))),semi:pe(ki.values.map((function(e){return[e,g.getPropertyValue("--palette-".concat(e,"-semi"))]}))),highlight:pe(ki.values.map((function(e){return[e,g.getPropertyValue("--palette-".concat(e,"-highlight"))]}))),text:g.getPropertyValue("--color-text"),background:g.getPropertyValue("--color-background"),solid:g.getPropertyValue("--palette-solid")},document.body.removeChild(v),b=this.getShapeAndDescendantIds(t),w=this.computeUnorderedRenderingShapes([this.currentPageId]).filter((function(e){var t=e.id;return b.has(t)})),x=null,k=X(w),e.prev=20,k.s();case 22:if((S=k.n()).done){e.next=29;break}if(_=S.value.maskedPageBounds){e.next=26;break}return e.abrupt("continue",27);case 26:x?x.union(_):x=_.clone();case 27:e.next=22;break;case 29:e.next=34;break;case 31:e.prev=31,e.t0=e.catch(20),k.e(e.t0);case 34:return e.prev=34,k.f(),e.finish(34);case 37:if(x){e.next=39;break}return e.abrupt("return");case 39:for((E=1===t.length&&this.isShapeOfType(this.getShapeById(t[0]),lh)?t[0]:null)||x.expandBy(u),C=x.width*i,P=x.height*i,I=window.document.createElementNS("http://www.w3.org/2000/svg","svg"),f&&I.setAttribute("preserveAspectRatio",f),I.setAttribute("direction","ltr"),I.setAttribute("width",C+""),I.setAttribute("height",P+""),I.setAttribute("viewBox","".concat(x.minX," ").concat(x.minY," ").concat(x.width," ").concat(x.height)),I.setAttribute("stroke-linecap","round"),I.setAttribute("stroke-linejoin","round"),a?E?I.style.setProperty("background",y.solid):I.style.setProperty("background-color",y.background):I.style.setProperty("background-color","transparent"),T=window.document.createElementNS("http://www.w3.org/2000/svg","defs"),M=0,A=Array.from($l(y.solid));M<A.length;M++)O=A[M],T.appendChild(O);try{null===(j=(R=document.body).focus)||void 0===j||j.call(R)}catch(kM){}return I.append(T),e.next=58,Promise.all(w.map(function(){var e=na(ea().mark((function e(t){var n,r,i,o,a,s,u,l,c,d,f,h,v,g,b,w,x,k,S,_,C,P,I,M,A,O,j,R;return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=t.id,l=t.opacity,c=t.index,d=t.backgroundIndex,u!==E){e.next=3;break}return e.abrupt("return",[]);case 3:if(f=K.getShapeById(u),!K.isShapeOfType(f,ah)){e.next=6;break}return e.abrupt("return",[]);case 6:return h=K.getShapeUtil(f),(g=h.getStyleIfExists(Ci,f))&&(m.has(g)?v=m.get(g):(v=p.getPropertyValue("--tl-font-".concat(g)),m.set(g,v))),e.next=11,null===(n=h.toSvg)||void 0===n?void 0:n.call(h,f,v,y);case 11:return b=e.sent,e.next=14,null===(r=h.toBackgroundSvg)||void 0===r?void 0:r.call(h,f,v,y);case 14:return w=e.sent,b&&((x=document.createElementNS("http://www.w3.org/2000/svg","g")).appendChild(b),b=x),w&&((k=document.createElementNS("http://www.w3.org/2000/svg","g")).appendChild(w),w=k),b||w||(S=K.getPageBounds(f),(_=window.document.createElementNS("http://www.w3.org/2000/svg","rect")).setAttribute("width",S.width+""),_.setAttribute("height",S.height+""),_.setAttribute("fill",y.solid),_.setAttribute("stroke",y.pattern.grey),_.setAttribute("stroke-width","1"),b=_),C=K.getPageTransform(f).toCssString(),"scale"in f.props&&1!==f.props.scale&&(C="".concat(C," scale(").concat(f.props.scale,", ").concat(f.props.scale,")")),null===(i=b)||void 0===i||i.setAttribute("transform",C),null===(o=w)||void 0===o||o.setAttribute("transform",C),null===(a=b)||void 0===a||a.setAttribute("opacity",l+""),null===(s=w)||void 0===s||s.setAttribute("opacity",l+""),(P=K.getPageMaskById(f.id))&&(I=document.createElementNS("http://www.w3.org/2000/svg","clipPath"),T.appendChild(I),M=Ut(),I.id=M,(A=document.createElementNS("http://www.w3.org/2000/svg","path")).setAttribute("d","M".concat(P.map((function(e){var t=e.x,n=e.y;return"".concat(t,",").concat(n)})).join("L"),"Z")),I.appendChild(A),b&&((O=document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute("clip-path","url(#".concat(M,")")),O.appendChild(b),b=O),w&&((j=document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute("clip-path","url(#".concat(M,")")),j.appendChild(w),w=j)),R=[],b&&R.push({zIndex:c,element:b}),w&&R.push({zIndex:d,element:w}),e.abrupt("return",R);case 30:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 58:L=e.sent.flat(),D=X(L.sort((function(e,t){return e.zIndex-t.zIndex})));try{for(D.s();!(N=D.n()).done;)z=N.value.element,I.appendChild(z)}catch(W){D.e(W)}finally{D.f()}return B="",F=window.document.createElementNS("http://www.w3.org/2000/svg","style"),U=[],"fonts"in document&&document.fonts.forEach((function(e){return U.push(e)})),e.next=67,Promise.all(U.map(function(){var e=na(ea().mark((function e(t){var n,r,i,o,a,s,u;return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=new FileReader,r=!1,m.forEach((function(e){e.includes(t.family)&&(r=!0)})),r){e.next=5;break}return e.abrupt("return");case 5:if(i=t.$$_url,o=t.$$_fontface,!i){e.next=18;break}return e.next=10,fetch(i);case 10:return e.next=12,e.sent.blob();case 12:return a=e.sent,e.next=15,new Promise((function(e,t){n.onload=function(){return e(n.result)},n.onerror=function(){return t(n.error)},n.readAsDataURL(a)}));case 15:s=e.sent,u="\n"+o.replaceAll(i,s),B+=u;case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 67:return F.textContent=B,T.append(F),e.abrupt("return",I);case 70:case"end":return e.stop()}}),e,this,[[20,31,34,37]])})));return function(){return e.apply(this,arguments)}}()}]),n}(Fd.EventEmitter);function wg(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.currentPageId,n=e.getPageById(t).name;e.emit("max-shapes",{name:n,pageId:t,count:Zs})}yg([Nt],bg.prototype,"_pageTransformCache",1),yg([Nt],bg.prototype,"_pageBoundsCache",1),yg([Nt],bg.prototype,"canUndo",1),yg([Nt],bg.prototype,"canRedo",1),yg([Nt],bg.prototype,"_stylesForNextShape",1),yg([Nt({isEqual:function(e,t){return e.equals(t)}})],bg.prototype,"sharedStyles",1),yg([Nt],bg.prototype,"sharedOpacity",1),yg([Nt],bg.prototype,"_arrowBindingsIndex",1),yg([Nt],bg.prototype,"_allPageStates",1),yg([Nt],bg.prototype,"openMenus",1),yg([Nt],bg.prototype,"isMenuOpen",1),yg([Nt],bg.prototype,"documentSettings",1),yg([Nt],bg.prototype,"_pages",1),yg([Nt],bg.prototype,"pages",1),yg([Nt],bg.prototype,"_pageStates",1),yg([Nt],bg.prototype,"pageStateId",1),yg([Nt],bg.prototype,"pageState",1),yg([Nt],bg.prototype,"selectedIds",1),yg([Nt],bg.prototype,"selectedIdsSet",1),yg([Nt],bg.prototype,"editingShape",1),yg([Nt],bg.prototype,"hoveredId",1),yg([Nt],bg.prototype,"hoveredShape",1),yg([Nt],bg.prototype,"hintingIds",1),yg([Nt],bg.prototype,"erasingIds",1),yg([Nt],bg.prototype,"erasingIdsSet",1),yg([Nt],bg.prototype,"cameraId",1),yg([Nt],bg.prototype,"camera",1),yg([Nt],bg.prototype,"zoomLevel",1),yg([Nt],bg.prototype,"viewportScreenBounds",1),yg([Nt],bg.prototype,"viewportScreenCenter",1),yg([Nt],bg.prototype,"viewportPageBounds",1),yg([Nt],bg.prototype,"viewportPageCenter",1),yg([Nt],bg.prototype,"cameraState",1),yg([Nt],bg.prototype,"renderingShapes",1),yg([Nt],bg.prototype,"renderingBounds",1),yg([Nt],bg.prototype,"renderingBoundsExpanded",1),yg([Nt],bg.prototype,"_clipPathCache",1),yg([Nt],bg.prototype,"_pageMaskCache",1),yg([Nt],bg.prototype,"allShapesCommonBounds",1),yg([Nt],bg.prototype,"selectedPageBounds",1),yg([Nt],bg.prototype,"selectionRotation",1),yg([Nt],bg.prototype,"selectionBounds",1),yg([Nt],bg.prototype,"selectionPageCenter",1),yg([Nt],bg.prototype,"_assets",1),yg([Nt],bg.prototype,"shapesArray",1),yg([Nt],bg.prototype,"sortedShapesArray",1),yg([Nt],bg.prototype,"selectedShapes",1),yg([Nt],bg.prototype,"onlySelectedShape",1);var xg="TLDRAW_TAB_ID_v2",kg=globalThis.window;var Sg=null!==(pg=null!==(vg=null===kg||void 0===kg?void 0:kg[xg])&&void 0!==vg?vg:null===kg||void 0===kg?void 0:kg.sessionStorage[xg])&&void 0!==pg?pg:"TLDRAW_INSTANCE_STATE_V1_"+bd();kg&&(kg[xg]=Sg,kg&&(["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(kg.navigator.platform)||kg.navigator.userAgent.includes("Mac")&&"ontouchend"in document)?kg.sessionStorage[xg]=Sg:delete kg.sessionStorage[xg]),null===kg||void 0===kg||kg.addEventListener("beforeunload",(function(){kg.sessionStorage[xg]=Sg}));var _g=0,Eg=$e({version:Ne,currentPageId:mn,isFocusMode:Ve,exportBackground:Ve,isDebugMode:Ve,isToolLocked:Ve,isGridMode:Ve,pageStates:Xe($e({pageId:mn,camera:$e({x:Ne,y:Ne,z:Ne}),selectedIds:Xe(ir),focusLayerId:ir.nullable()}))}),Cg=en({currentVersion:_g});function Pg(e,t){var n=function(e){if(!e||"object"!==typeof e)return console.warn("Invalid instance state"),null;if(!("version"in e)||"number"!==typeof e.version)return console.warn("No version in instance state"),null;var t=rn({value:e,fromVersion:e.version,toVersion:_g,migrations:Cg});if("error"===t.type)return console.warn(t.reason),null;var n=R(R({},t.value),{},{version:_g});try{Eg.validate(n)}catch(kM){return console.warn(kM),null}return n}(t);if(n){var r=e.allRecords().filter((function(e){return"instance_page_state"===e.typeName||"camera"===e.typeName})),i={added:{},updated:{},removed:R({},pe(r.map((function(e){return[e.id,e]}))))};e.has(nr)&&(i.removed[nr]=e.get(nr));var o,a={removed:{},updated:{},added:O({},nr,e.schema.types.instance.create({id:nr,currentPageId:n.currentPageId,isDebugMode:n.isDebugMode,isFocusMode:n.isFocusMode,isToolLocked:n.isToolLocked,isGridMode:n.isGridMode,exportBackground:n.exportBackground}))},s=X(n.pageStates);try{for(s.s();!(o=s.n()).done;){var u=o.value,l=un.createId(u.pageId),c=dr.createId(u.pageId);a.added[l]=un.create({id:un.createId(u.pageId),x:u.camera.x,y:u.camera.y,z:u.camera.z}),a.added[c]=dr.create({id:dr.createId(u.pageId),pageId:u.pageId,selectedIds:u.selectedIds,focusLayerId:u.focusLayerId})}}catch(d){s.e(d)}finally{s.f()}It((function(){e.applyDiff(Gt([i,a])),e.ensureStoreIsUsable()}))}}function Ig(e){for(var t=[],n=0,r=Object.values(e);n<r.length;n++){var i,o=r[n];null!==(i=o.typeName)&&void 0!==i&&i.match(/^(instance.*|pointer|camera)$/)&&t.push(o)}var a=t.filter((function(e){return"instance"===e.typeName&&e.id!==nr}))[0];if(!a)return null;var s={version:_g,currentPageId:a.currentPageId,exportBackground:!!a.exportBackground,isFocusMode:!!a.isFocusMode,isDebugMode:!!a.isDebugMode,isToolLocked:!!a.isToolLocked,isGridMode:!1,pageStates:t.filter((function(e){return"instance_page_state"===e.typeName&&e.instanceId===a.id})).map((function(t){var n,r=null!==(n=e[t.cameraId])&&void 0!==n?n:{x:0,y:0,z:1};return{pageId:t.pageId,camera:{x:r.x,y:r.y,z:r.z},selectedIds:t.selectedIds,focusLayerId:t.focusLayerId}}))};try{return Eg.validate(s),s}catch(kM){return null}}var Tg,Mg,Ag=function(e,t){return t.some((function(t){return e instanceof t}))};var Og=new WeakMap,jg=new WeakMap,Rg=new WeakMap,Lg=new WeakMap,Dg=new WeakMap;var Ng={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return jg.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Rg.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Fg(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function zg(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Mg||(Mg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Ug(this),n),Fg(Og.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Fg(e.apply(Ug(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o=e.call.apply(e,[Ug(this),t].concat(r));return Rg.set(o,t.sort?t.sort():[t]),Fg(o)}}function Bg(e){return"function"===typeof e?zg(e):(e instanceof IDBTransaction&&function(e){if(!jg.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=function(){t(),r()},o=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)}));jg.set(e,t)}}(e),Ag(e,Tg||(Tg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Ng):e)}function Fg(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",o)},i=function(){t(Fg(e.result)),r()},o=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)}));return t.then((function(t){t instanceof IDBCursor&&Og.set(t,e)})).catch((function(){})),Dg.set(t,e),t}(e);if(Lg.has(e))return Lg.get(e);var t=Bg(e);return t!==e&&(Lg.set(e,t),Dg.set(t,e)),t}var Ug=function(e){return Dg.get(e)};function Kg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,o=n.blocking,a=n.terminated,s=indexedDB.open(e,t),u=Fg(s);return i&&s.addEventListener("upgradeneeded",(function(e){i(Fg(s.result),e.oldVersion,e.newVersion,Fg(s.transaction),e)})),r&&s.addEventListener("blocked",(function(e){return r(e.oldVersion,e.newVersion,e)})),u.then((function(e){a&&e.addEventListener("close",(function(){return a()})),o&&e.addEventListener("versionchange",(function(e){return o(e.oldVersion,e.newVersion,e)}))})).catch((function(){})),u}function Vg(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).blocked,n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",(function(e){return t(e.oldVersion,e)})),Fg(n).then((function(){}))}var Wg=["get","getKey","getAll","getAllKeys","count"],Hg=["put","add","delete","clear"],Yg=new Map;function Xg(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(Yg.get(t))return Yg.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Hg.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Wg.includes(n))){var o=function(){var e=na(ea().mark((function e(t){var o,a,s,u,l,c,d=arguments;return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=this.transaction(t,i?"readwrite":"readonly"),s=a.store,u=d.length,l=new Array(u>1?u-1:0),c=1;c<u;c++)l[c-1]=d[c];return r&&(s=s.index(l.shift())),e.next=6,Promise.all([(o=s)[n].apply(o,l),i&&a.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Yg.set(t,o),o}}}Ng=function(e){return R(R({},e),{},{get:function(t,n,r){return Xg(t,n)||e.get(t,n,r)},has:function(t,n){return!!Xg(t,n)||e.has(t,n)}})}(Ng);var qg="TLDRAW_DOCUMENT_v2",$g="TLDRAW_DB_NAME_INDEX_v2",Gg={Records:"records",Schema:"schema",SessionState:"session_state"};function Qg(e,t){return Jg.apply(this,arguments)}function Jg(){return(Jg=na(ea().mark((function e(t,n){var r;return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return um(t),e.next=3,Kg(t,3,{upgrade:function(e){e.objectStoreNames.contains(Gg.Records)||e.createObjectStore(Gg.Records),e.objectStoreNames.contains(Gg.Schema)||e.createObjectStore(Gg.Schema),e.objectStoreNames.contains(Gg.SessionState)||e.createObjectStore(Gg.SessionState)}});case 3:return r=e.sent,e.prev=4,e.next=7,n(r);case 7:return e.abrupt("return",e.sent);case 8:return e.prev=8,r.close(),e.finish(8);case 11:case"end":return e.stop()}}),e,null,[[4,,8,11]])})))).apply(this,arguments)}function Zg(e){return em.apply(this,arguments)}function em(){return em=na(ea().mark((function e(t){var n,r,i,o;return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.persistenceKey,r=t.sessionId,i=t.didCancel,o=qg+n,sm().includes(o)){e.next=4;break}return e.abrupt("return",void 0);case 4:return e.next=6,om({persistenceKey:n,didCancel:i});case 6:return e.next=8,Qg(o,function(){var e=na(ea().mark((function e(t){var n,o,a,s,u,l,c,d,f;return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===i||void 0===i||!i()){e.next=2;break}return e.abrupt("return",void 0);case 2:if(o=t.transaction([Gg.Records,Gg.Schema,Gg.SessionState],"readonly"),a=o.objectStore(Gg.Records),s=o.objectStore(Gg.Schema),u=o.objectStore(Gg.SessionState),!r){e.next=21;break}return e.next=9,u.get(r);case 9:if(e.t2=n=e.sent,e.t1=null===e.t2,e.t1){e.next=13;break}e.t1=void 0===n;case 13:if(!e.t1){e.next=17;break}e.t3=void 0,e.next=18;break;case 17:e.t3=n.snapshot;case 18:e.t0=e.t3,e.next=22;break;case 21:e.t0=null;case 22:if(l=e.t0){e.next=28;break}return e.next=26,u.getAll();case 26:d=e.sent,l=null===(c=d.sort((function(e,t){return e.updatedAt-t.updatedAt})).pop())||void 0===c?void 0:c.snapshot;case 28:return e.next=30,a.getAll();case 30:return e.t4=e.sent,e.next=33,s.get(Gg.Schema);case 33:if(e.t5=e.sent,e.t6=l,f={records:e.t4,schema:e.t5,sessionStateSnapshot:e.t6},null===i||void 0===i||!i()){e.next=39;break}return o.abort(),e.abrupt("return",void 0);case 39:return e.next=41,o.done;case 41:return e.abrupt("return",f);case 42:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)}))),em.apply(this,arguments)}function tm(e){return nm.apply(this,arguments)}function nm(){return nm=na(ea().mark((function e(t){var n,r,i,o,a,s,u;return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.persistenceKey,r=t.schema,i=t.changes,o=t.sessionId,a=t.sessionStateSnapshot,s=t.didCancel,u=qg+n,e.next=4,Qg(u,function(){var e=na(ea().mark((function e(t){var n,u,l,c,d,f,h,p,v,g,m,y,b,w,x,k;return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.transaction([Gg.Records,Gg.Schema,Gg.SessionState],"readwrite"),u=n.objectStore(Gg.Records),l=n.objectStore(Gg.Schema),c=n.objectStore(Gg.SessionState),d=0,f=Object.entries(i.added);case 5:if(!(d<f.length)){e.next=12;break}return h=L(f[d],2),p=h[0],v=h[1],e.next=9,u.put(v,p);case 9:d++,e.next=5;break;case 12:g=0,m=Object.values(i.updated);case 13:if(!(g<m.length)){e.next=20;break}return y=L(m[g],2),y[0],b=y[1],e.next=17,u.put(b,b.id);case 17:g++,e.next=13;break;case 20:w=0,x=Object.keys(i.removed);case 21:if(!(w<x.length)){e.next=28;break}return k=x[w],e.next=25,u.delete(k);case 25:w++,e.next=21;break;case 28:if(l.put(r.serialize(),Gg.Schema),a&&o?c.put({snapshot:a,updatedAt:Date.now(),id:o},o):(a||o)&&console.error("sessionStateSnapshot and instanceId must be provided together"),null===s||void 0===s||!s()){e.next=32;break}return e.abrupt("return",n.abort());case 32:return e.next=34,n.done;case 34:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}}),e)}))),nm.apply(this,arguments)}function rm(e){return im.apply(this,arguments)}function im(){return im=na(ea().mark((function e(t){var n,r,i,o,a,s,u;return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.persistenceKey,r=t.schema,i=t.snapshot,o=t.sessionId,a=t.sessionStateSnapshot,s=t.didCancel,u=qg+n,e.next=4,Qg(u,function(){var e=na(ea().mark((function e(t){var n,u,l,c,d,f,h,p,v;return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.transaction([Gg.Records,Gg.Schema,Gg.SessionState],"readwrite"),u=n.objectStore(Gg.Records),l=n.objectStore(Gg.Schema),c=n.objectStore(Gg.SessionState),e.next=6,u.clear();case 6:d=0,f=Object.entries(i);case 7:if(!(d<f.length)){e.next=14;break}return h=L(f[d],2),p=h[0],v=h[1],e.next=11,u.put(v,p);case 11:d++,e.next=7;break;case 14:if(l.put(r.serialize(),Gg.Schema),a&&o?c.put({snapshot:a,updatedAt:Date.now(),id:o},o):(a||o)&&console.error("sessionStateSnapshot and instanceId must be provided together"),null===s||void 0===s||!s()){e.next=18;break}return e.abrupt("return",n.abort());case 18:return e.next=20,n.done;case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}}),e)}))),im.apply(this,arguments)}function om(e){return am.apply(this,arguments)}function am(){return am=na(ea().mark((function e(t){var n,r;return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.persistenceKey,r=t.didCancel,e.next=3,Qg(qg+n,function(){var e=na(ea().mark((function e(t){var n,i,o,a,s,u,l;return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.transaction([Gg.SessionState],"readwrite"),i=n.objectStore(Gg.SessionState),e.next=4,i.getAll();case 4:if(o=e.sent.sort((function(e,t){return e.updatedAt-t.updatedAt})),!(o.length<10)){e.next=9;break}return e.next=8,n.done;case 8:return e.abrupt("return");case 9:a=o.slice(0,o.length-10),s=X(a),e.prev=11,s.s();case 13:if((u=s.n()).done){e.next=19;break}return l=u.value.id,e.next=17,i.delete(l);case 17:e.next=13;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(11),s.e(e.t0);case 24:return e.prev=24,s.f(),e.finish(24);case 27:if(null===r||void 0===r||!r()){e.next=29;break}return e.abrupt("return",n.abort());case 29:return e.next=31,n.done;case 31:case"end":return e.stop()}}),e,null,[[11,21,24,27]])})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)}))),am.apply(this,arguments)}function sm(){var e,t,n=null!==(e=JSON.parse((null===(t=window)||void 0===t?void 0:t.localStorage.getItem($g))||"[]"))&&void 0!==e?e:[];return Array.isArray(n)?n:[]}function um(e){var t,n=new Set(sm());n.add(e),null===(t=window)||void 0===t||t.localStorage.setItem($g,JSON.stringify(u(n)))}var lm=Symbol("UPDATE_INSTANCE_STATE"),cm="undefined"===typeof BroadcastChannel?function(){function e(t){z(this,e),O(this,"onmessage",void 0)}return N(e,[{key:"postMessage",value:function(e){}},{key:"close",value:function(){}}]),e}():BroadcastChannel,dm=function(){function e(t,n){var r=this,i=n.persistenceKey,o=n.sessionId,a=void 0===o?Sg:o,s=n.onLoad,l=n.onLoadError,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new cm("tldraw-tab-sync-".concat(i));z(this,e),O(this,"disposables",new Set),O(this,"diffQueue",[]),O(this,"didDispose",!1),O(this,"shouldDoFullDBWrite",!0),O(this,"isReloading",!1),O(this,"persistenceKey",void 0),O(this,"sessionId",void 0),O(this,"serializedSchema",void 0),O(this,"isDebugging",!1),O(this,"documentTypes",void 0),O(this,"$sessionStateSnapshot",void 0),O(this,"initTime",Date.now()),O(this,"isPersisting",!1),O(this,"didLastWriteError",!1),O(this,"scheduledPersistTimeout",null),this.store=t,this.channel=c,"undefined"!==typeof window&&(window.tlsync=this),this.persistenceKey=i,this.sessionId=a,this.serializedSchema=this.store.schema.serialize(),this.$sessionStateSnapshot=function(e){var t=e.query.ids("page");return Nt("sessionStateSnapshot",(function(){var n=e.get(nr);if(!n)return null;var r=u(t.value);return{version:_g,currentPageId:n.currentPageId,exportBackground:n.exportBackground,isFocusMode:n.isFocusMode,isDebugMode:n.isDebugMode,isToolLocked:n.isToolLocked,isGridMode:n.isGridMode,pageStates:r.map((function(t){var n,r,i,o,a,s=e.get(dr.createId(t)),u=e.get(un.createId(t));return{pageId:t,camera:{x:null!==(n=null===u||void 0===u?void 0:u.x)&&void 0!==n?n:0,y:null!==(r=null===u||void 0===u?void 0:u.y)&&void 0!==r?r:0,z:null!==(i=null===u||void 0===u?void 0:u.z)&&void 0!==i?i:1},selectedIds:null!==(o=null===s||void 0===s?void 0:s.selectedIds)&&void 0!==o?o:[],focusLayerId:null!==(a=null===s||void 0===s?void 0:s.focusLayerId)&&void 0!==a?a:null}}))}}))}(this.store),this.disposables.add(t.listen((function(e){var t=e.changes;r.diffQueue.push(t),r.channel.postMessage({type:"diff",storeId:r.store.id,changes:t,schema:r.serializedSchema}),r.schedulePersist()}),{source:"user",scope:"document"})),this.disposables.add(t.listen((function(){r.diffQueue.push(lm),r.schedulePersist()}),{scope:"session"})),this.connect(s,l),this.documentTypes=new Set(Object.values(this.store.schema.types).filter((function(e){return"document"===e.scope})).map((function(e){return e.typeName})))}return N(e,[{key:"debug",value:function(){var e;this.isDebugging&&(e=console).debug.apply(e,arguments)}},{key:"connect",value:function(){var e=na(ea().mark((function e(t,n){var r,i,o,a,s,u,l=this;return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.debug("connecting"),e.prev=1,e.next=4,Zg({persistenceKey:this.persistenceKey,sessionId:this.sessionId,didCancel:function(){return l.didDispose}});case 4:r=e.sent,e.next=13;break;case 7:return e.prev=7,e.t0=e.catch(1),n(e.t0),window.alert("Oops! We could not access your browser's storage\u2014and the app won't work correctly without that. We now need to reload the page and try again.\n\nKeep seeing this message?\n\u2022 If you're using tldraw in a private or \"incognito\" window, try loading tldraw in a regular window or in a different browser."),"undefined"!==typeof window&&window.location.reload(),e.abrupt("return");case 13:if(this.debug("loaded data from store",r,"didDispose",this.didDispose),!this.didDispose){e.next=16;break}return e.abrupt("return");case 16:if(e.prev=16,!r){e.next=27;break}if(a=Object.fromEntries(r.records.map((function(e){return[e.id,e]}))),s=null!==(i=r.sessionStateSnapshot)&&void 0!==i?i:Ig(a),"error"!==(u=this.store.schema.migrateStoreSnapshot(a,null!==(o=r.schema)&&void 0!==o?o:this.store.schema.serializeEarliestVersion())).type){e.next=25;break}return console.error("failed to migrate store",u),n(new Error("Failed to migrate store: ".concat(u.reason))),e.abrupt("return");case 25:this.store.mergeRemoteChanges((function(){l.store.put(Object.values(u.value).filter((function(e){return l.documentTypes.has(e.typeName)})),"initialize")})),s&&Pg(this.store,s);case 27:this.channel.onmessage=function(e){var t,r=e.data;l.debug("got message",r);var i,o,a=r,s=sn(l.serializedSchema,null!==(t=a.schema)&&void 0!==t?t:l.store.schema.serializeEarliestVersion());return-1===s?Date.now()-l.initTime<5e3?void n(new Error("Schema mismatch, please close other tabs and reload the page")):(l.debug("reloading"),l.isReloading=!0,void(null===(i=window)||void 0===i||null===(i=i.location)||void 0===i||null===(o=i.reload)||void 0===o||o.call(i))):1===s?(l.debug("telling them to reload"),l.channel.postMessage({type:"announce",schema:l.serializedSchema}),l.shouldDoFullDBWrite=!0,void l.persistIfNeeded()):void("diff"===a.type&&(l.debug("applying diff"),It((function(){l.store.mergeRemoteChanges((function(){l.store.applyDiff(a.changes),l.store.ensureStoreIsUsable()}))}))))},this.channel.postMessage({type:"announce",schema:this.serializedSchema}),this.disposables.add((function(){l.channel.close()})),t(this),e.next=40;break;case 33:if(e.prev=33,e.t1=e.catch(16),this.debug("error loading data from store",e.t1),!this.didDispose){e.next=38;break}return e.abrupt("return");case 38:return n(e.t1),e.abrupt("return");case 40:case"end":return e.stop()}}),e,this,[[1,7],[16,33]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.debug("closing"),this.didDispose=!0,this.disposables.forEach((function(e){return e()}))}},{key:"schedulePersist",value:function(){var e=this;this.debug("schedulePersist",this.scheduledPersistTimeout),this.scheduledPersistTimeout||(this.scheduledPersistTimeout=setTimeout((function(){e.scheduledPersistTimeout=null,e.persistIfNeeded()}),this.didLastWriteError?1e4:350))}},{key:"persistIfNeeded",value:function(){this.debug("persistIfNeeded",{isPersisting:this.isPersisting,isReloading:this.isReloading,shouldDoFullDBWrite:this.shouldDoFullDBWrite,diffQueueLength:this.diffQueue.length,storeIsPossiblyCorrupt:this.store.isPossiblyCorrupted()}),this.scheduledPersistTimeout&&(clearTimeout(this.scheduledPersistTimeout),this.scheduledPersistTimeout=null),this.isPersisting||this.isReloading||this.store.isPossiblyCorrupted()||(this.shouldDoFullDBWrite||this.diffQueue.length>0)&&this.doPersist()}},{key:"doPersist",value:function(){var e=na(ea().mark((function e(){var t,n,r=this;return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ee(!this.isPersisting,"persist already in progress"),this.isPersisting=!0,this.debug("doPersist start"),t=this.diffQueue,this.diffQueue=[],e.prev=5,!this.shouldDoFullDBWrite){e.next=12;break}return this.shouldDoFullDBWrite=!1,e.next=10,rm({persistenceKey:this.persistenceKey,schema:this.store.schema,snapshot:this.store.serialize(),didCancel:function(){return r.didDispose},sessionId:this.sessionId,sessionStateSnapshot:this.$sessionStateSnapshot.value});case 10:e.next=15;break;case 12:return n=Gt(t.filter((function(e){return e!==lm}))),e.next=15,tm({persistenceKey:this.persistenceKey,changes:n,schema:this.store.schema,didCancel:function(){return r.didDispose},sessionId:this.sessionId,sessionStateSnapshot:this.$sessionStateSnapshot.value});case 15:this.didLastWriteError=!1,e.next=25;break;case 18:e.prev=18,e.t0=e.catch(5),this.shouldDoFullDBWrite=!0,this.didLastWriteError=!0,console.error("failed to store changes in indexed db",e.t0),window.alert("Oops! We could not save changes to your browser's storage. We now need to reload the page and try again.\n\nKeep seeing this message?\n\u2022 If you're using tldraw in a private or \"incognito\" window, try loading tldraw in a regular window or in a different browser.\n\u2022 If your hard disk is full, try clearing up some space and then reload the page."),"undefined"!==typeof window&&window.location.reload();case 25:this.isPersisting=!1,this.debug("doPersist end"),this.schedulePersist();case 28:case"end":return e.stop()}}),e,this,[[5,18]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),fm=["initialData","defaultName"];function hm(e){var t,n=e.initialData,r=e.defaultName,i=void 0===r?"":r,o=Jt(e,fm),a="schema"in o?o.schema:gi({shapes:(t=Ep(o.shapes),Object.fromEntries(t.map((function(e){return[e.type,e]}))))});return new $t({schema:a,initialData:n,props:{defaultName:i}})}function pm(e){var n=L((0,t.useState)((function(){return hm(e)})),2),r=n[0],i=n[1],o=function(e){var n=(0,t.useRef)(e);return(0,t.useEffect)((function(){n.current=e})),n.current}(e);if(Object.keys(o).some((function(t){return o[t]!==e[t]}))){var a=hm(e);return i(a),a}return r}var vm=["persistenceKey","sessionId"];var gm=function(e,n){var r=L((0,t.useState)(2),2),i=r[0],o=r[1];return(0,t.useEffect)((function(){var t=n.url,r=n.style,i=void 0===r?"normal":r,a=n.weight,s=void 0===a?"500":a,u=n.display,l=n.featureSettings,c=n.stretch,d=n.unicodeRange,f=n.variant,h=!1;o(2);var p={style:i,weight:s,display:u,featureSettings:l,stretch:c,unicodeRange:d,variant:f},v=new FontFace(e,"url(".concat(t,")"),p);return v.load().then((function(){h||(document.fonts.add(v),o(0))})).catch((function(e){h||(console.error(e),o(1))})),v.$$_url=t,v.$$_fontface="\n@font-face {\n\tfont-family: ".concat(v.family,";\n\tfont-stretch: ").concat(v.stretch,";\n\tfont-weight: ").concat(v.weight,";\n\tfont-style: ").concat(v.style,';\n\tsrc: url("').concat(t,'") format("woff2")\n}'),function(){document.fonts.delete(v),h=!0}}),[e,n]),i};var mm=!1;if("undefined"!==typeof window){var ym=window.navigator.userAgent,bm=!!ym.match(/iPad/i)||!!ym.match(/iPhone/i),wm=!!ym.match(/WebKit/i);mm=bm&&wm&&!ym.match(/CriOS/i)}var xm=["store","components"],km=["store","user"],Sm=[],_m=[],Em=(0,t.memo)((function(e){var n,r,i=e.store,o=e.components,a=Jt(e,xm),s=L(t.useState(null),2),u=s[0],l=s[1],c=(0,t.useMemo)((function(){return Bd()}),[]),d=void 0===(null===o||void 0===o?void 0:o.ErrorFallback)?yd:null===o||void 0===o?void 0:o.ErrorFallback,f=R(R({},a),{},{shapes:null!==(n=a.shapes)&&void 0!==n?n:Sm,tools:null!==(r=a.tools)&&void 0!==r?r:_m});return(0,Qo.jsx)("div",{ref:l,draggable:!1,className:"tl-container tl-theme__light",tabIndex:0,children:(0,Qo.jsx)(ku,{fallback:d?function(e){return(0,Qo.jsx)(d,{error:e})}:null,onError:function(e){return ie(e,{tags:{origin:"react.tldraw-before-app"}})},children:u&&(0,Qo.jsx)(Ws,{container:u,children:(0,Qo.jsx)(Iu,{overrides:o,children:i?i instanceof $t?(0,Qo.jsx)(Im,R(R({},f),{},{store:i,user:c})):(0,Qo.jsx)(Pm,R(R({},f),{},{store:i,user:c})):(0,Qo.jsx)(Cm,R(R({},f),{},{store:i,user:c}))})})})})}));function Cm(e){var n=e.defaultName,r=e.initialData,i=e.shapes,o=e.persistenceKey,a=e.sessionId,s=e.user,u=function(e){var n,r=e.persistenceKey,i=e.sessionId,o=Jt(e,vm),a=L((0,t.useState)(null),2),s=a[0],u=a[1],l=pm(o);return(0,t.useEffect)((function(){var e=bd();if(r){u({id:e,storeWithStatus:{status:"loading"}});var t=function(t){u((function(n){return(null===n||void 0===n?void 0:n.id)===e?{id:e,storeWithStatus:t}:n}))},n=new dm(l,{sessionId:i,persistenceKey:r,onLoad:function(){t({store:l,status:"synced-local"})},onLoadError:function(e){t({status:"error",error:e})}});return function(){u((function(t){return(null===t||void 0===t?void 0:t.id)===e?null:t})),n.close()}}u({id:e,storeWithStatus:{status:"not-synced",store:l}})}),[r,l,i]),null!==(n=null===s||void 0===s?void 0:s.storeWithStatus)&&void 0!==n?n:{status:"loading"}}({shapes:i,initialData:r,persistenceKey:o,sessionId:a,defaultName:n});return(0,Qo.jsx)(Pm,R(R({},e),{},{store:u,user:s}))}var Pm=(0,t.memo)((function(e){var n=e.store,r=e.user,i=Jt(e,km),o=Hs();switch((0,t.useLayoutEffect)((function(){r.userPreferences.value.isDarkMode&&(o.classList.remove("tl-theme__light"),o.classList.add("tl-theme__dark"))}),[o,r.userPreferences.value.isDarkMode]),n.status){case"error":throw n.error;case"loading":return(0,Qo.jsx)(Am,{children:"Connecting..."})}return(0,Qo.jsx)(Im,R(R({},i),{},{store:n.store,user:r}))}));function Im(e){var n=e.onMount,r=e.children,i=e.store,o=e.tools,a=e.shapes,s=e.autoFocus,u=e.user,l=e.assetUrls,c=Tu().ErrorFallback,d=Hs(),f=L((0,t.useState)(null),2),h=f[0],p=f[1];(0,t.useLayoutEffect)((function(){var e=new bg({store:i,shapes:a,tools:o,getContainer:function(){return d},user:u});return window.app=e,window.editor=e,p(e),function(){e.dispose()}}),[d,a,o,i,u]),t.useLayoutEffect((function(){h&&s&&h.focus()}),[h,s]);var v=function(e){var n=(0,t.useRef)();return(0,t.useLayoutEffect)((function(){n.current=e})),(0,t.useDebugValue)(e),(0,t.useCallback)((function(){var e=n.current;return ee(e,"fn does not exist"),e.apply(void 0,arguments)}),[])}((function(e){var t=null===n||void 0===n?void 0:n(e);return e.emit("mount"),window.tldrawReady=!0,t}));t.useLayoutEffect((function(){if(h)return null===v||void 0===v?void 0:v(h)}),[h,v]);var g,m=(0,t.useSyncExternalStore)((0,t.useCallback)((function(e){return h?(h.on("crash",e),function(){return h.off("crash",e)}):function(){}}),[h]),(function(){var e;return null!==(e=null===h||void 0===h?void 0:h.crashingError)&&void 0!==e?e:null})),y=function(e){var n=(0,t.useMemo)((function(){return function(e){return{draw:{url:e.fonts.draw},serif:{url:e.fonts.serif},sansSerif:{url:e.fonts.sansSerif},monospace:{url:e.fonts.monospace}}}(e)}),[e]),r=[gm("tldraw_draw",n.draw),gm("tldraw_serif",n.serif),gm("tldraw_sans",n.sansSerif),gm("tldraw_mono",n.monospace)];return{error:r.some((function(e){return 1===e})),done:!r.some((function(e){return 2===e}))}}((g=l,(0,t.useMemo)((function(){return g?{fonts:Object.assign(R({},Zo.fonts),R({},null===g||void 0===g?void 0:g.fonts))}:Zo}),[g]))),b=y.done;return y.error?(0,Qo.jsx)(Om,{children:"Could not load assets. Please refresh the page."}):b?h?(0,Qo.jsx)(ku,{fallback:c?function(e){return(0,Qo.jsx)(c,{error:e,editor:h})}:null,onError:function(e){return h.annotateError(e,{origin:"react.tldraw",willCrashApp:!0})},children:m?(0,Qo.jsx)(Mm,{crashingError:m}):(0,Qo.jsx)(ca.Provider,{value:h,children:(0,Qo.jsx)(Tm,{children:r})})}):null:(0,Qo.jsx)(Am,{children:"Loading assets..."})}function Tm(e){var n=e.children;return function(){var e=da(),n=Hs();t.useEffect((function(){var t=function(e){return n.style.setProperty("--tl-zoom",e.toString())},r=ne(t,100),i=new zt("useZoomCss",(function(){e.currentPageShapeIds.size<300?t(e.zoomLevel):r(e.zoomLevel)}));return i.attach(),i.execute(),function(){i.detach()}}),[e,n])}(),function(){var e=da(),t=Hs();Gl("useCursor",(function(){var n=e.cursor,r=n.type,i=n.rotation,o=n.color;Fc.includes(r)?t.style.setProperty("--tl-cursor","var(--tl-cursor-".concat(r,")")):t.style.setProperty("--tl-cursor",Bc(r,i,o))}),[e,t])}(),function(){var e=da(),n=Hs(),r=la("isDarkMode",(function(){return e.isDarkMode}),[e]),i=la(Ss.forceSrgb);t.useEffect((function(){r?(n.setAttribute("data-color-mode","dark"),n.classList.remove("tl-theme__light"),n.classList.add("tl-theme__dark"),e.setCursor({color:"white"})):(n.setAttribute("data-color-mode","light"),n.classList.remove("tl-theme__dark"),n.classList.add("tl-theme__light"),e.setCursor({color:"black"})),i?n.classList.add("tl-theme__force-sRGB"):n.classList.remove("tl-theme__force-sRGB")}),[e,n,i,r])}(),function(){var e=da();t.useEffect((function(){if(mm)return document.addEventListener("focusout",t),function(){return document.removeEventListener("focusout",t)};function t(t){(t.target instanceof HTMLInputElement&&"text"===t.target.type||t.target instanceof HTMLTextAreaElement)&&e.complete()}}),[e])}(),function(){var e=L((0,t.useState)(0),2),n=(e[0],e[1]);(0,t.useEffect)((function(){return n((function(e){return e+1}))}),[])}(),n}function Mm(e){throw e.crashingError}function Am(e){var t=e.children,n=Tu().Spinner;return(0,Qo.jsxs)("div",{className:"tl-loading",children:[n?(0,Qo.jsx)(n,{}):null,t]})}function Om(e){var t=e.children;return(0,Qo.jsx)("div",{className:"tl-loading",children:t})}var jm=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"info",{}),O(B(e),"scribble",{}),O(B(e),"markId",""),O(B(e),"excludedShapeIds",new Set),O(B(e),"onEnter",(function(t){e.markId=e.editor.mark("erase scribble begin"),e.info=t;var n=e.editor.inputs.originPagePoint;e.excludedShapeIds=new Set(e.editor.shapesArray.filter((function(t){return e.editor.isShapeOrAncestorLocked(t)||(e.editor.isShapeOfType(t,ah)||e.editor.isShapeOfType(t,lh))&&e.editor.isPointInShape(n,t)})).map((function(e){return e.id}))),e.startScribble(),e.update()})),O(B(e),"startScribble",(function(){var t;e.scribble.tick&&e.editor.off("tick",null===(t=e.scribble)||void 0===t?void 0:t.tick);e.scribble=new rg({onUpdate:e.onScribbleUpdate,onComplete:e.onScribbleComplete,color:"muted-1",size:12}),e.editor.on("tick",e.scribble.tick)})),O(B(e),"pushPointToScribble",(function(){var t=e.editor.inputs.currentPagePoint,n=t.x,r=t.y;e.scribble.addPoint(n,r)})),O(B(e),"onScribbleUpdate",(function(t){e.editor.setScribble(t)})),O(B(e),"onScribbleComplete",(function(){e.editor.off("tick",e.scribble.tick),e.editor.setScribble(null)})),O(B(e),"onExit",(function(){e.scribble.stop()})),O(B(e),"onPointerMove",(function(){e.update()})),O(B(e),"onPointerUp",(function(){e.complete()})),O(B(e),"onCancel",(function(){e.cancel()})),O(B(e),"onComplete",(function(){e.complete()})),e}return N(n,[{key:"update",value:function(){var e=this.editor,t=e.shapesArray,n=e.erasingIdsSet,r=e.inputs,i=r.currentPagePoint,o=r.previousPagePoint,a=this.excludedShapeIds;this.pushPointToScribble();var s,l=new Set(n),c=X(t);try{for(c.s();!(s=c.n()).done;){var d=s.value;if(!this.editor.isShapeOfType(d,ah)){var f=this.editor.getPageMaskById(d.id);if(!f||Ba(i,f)){var h=this.editor.getShapeUtil(d),p=this.editor.getPointInShapeSpace(d,o),v=this.editor.getPointInShapeSpace(d,i);h.hitTestLineSegment(d,p,v)&&l.add(this.editor.getOutermostSelectableShape(d).id)}}}}catch(g){c.e(g)}finally{c.f()}this.editor.setErasingIds(u(l).filter((function(e){return!a.has(e)})))}},{key:"complete",value:function(){this.editor.deleteShapes(this.editor.pageState.erasingIds),this.editor.setErasingIds([]),this.parent.transition("idle",{})}},{key:"cancel",value:function(){this.editor.setErasingIds([]),this.editor.bailToMark(this.markId),this.parent.transition("idle",this.info)}}]),n}(Vd);O(jm,"id","erasing");var Rm=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"onPointerDown",(function(t){e.parent.transition("pointing",t)})),e}return N(n)}(Vd);O(Rm,"id","idle");var Lm=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"onEnter",(function(){var t,n=e.editor.inputs,r=new Set,i=r.size,o=X(u(e.editor.sortedShapesArray).reverse());try{for(o.s();!(t=o.n()).done;){var a=t.value;if(e.editor.isPointInShape(n.currentPagePoint,a)){if(e.editor.isShapeOfType(a,ah))continue;var s=e.editor.getOutermostSelectableShape(a);if(e.editor.isShapeOfType(s,lh)&&r.size>i)break;r.add(s.id)}}}catch(l){o.e(l)}finally{o.f()}e.editor.setErasingIds(u(r))})),O(B(e),"onPointerMove",(function(t){e.editor.inputs.isDragging&&e.parent.transition("erasing",t)})),O(B(e),"onPointerUp",(function(){e.complete()})),O(B(e),"onCancel",(function(){e.cancel()})),O(B(e),"onComplete",(function(){e.complete()})),O(B(e),"onInterrupt",(function(){e.cancel()})),e}return N(n,[{key:"complete",value:function(){var e=this.editor.erasingIds;e.length&&(this.editor.mark("erase end"),this.editor.deleteShapes(e)),this.editor.setErasingIds([]),this.parent.transition("idle",{})}},{key:"cancel",value:function(){this.editor.setErasingIds([]),this.parent.transition("idle",{})}}]),n}(Vd);O(Lm,"id","pointing");var Dm=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"onEnter",(function(){e.editor.setCursor({type:"cross"})})),e}return N(n)}(Vd);O(Dm,"id","eraser"),O(Dm,"initial","idle"),O(Dm,"children",(function(){return[Rm,Lm,jm]}));var Nm=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"onEnter",(function(){e.update()})),O(B(e),"onPointerMove",(function(){e.update()})),O(B(e),"onPointerUp",(function(){e.complete()})),O(B(e),"onCancel",(function(){e.complete()})),O(B(e),"onComplete",(function(){e.complete()})),e}return N(n,[{key:"update",value:function(){var e=this.editor.inputs,t=e.currentScreenPoint,n=e.previousScreenPoint,r=va.Sub(t,n);(Math.abs(r.x)>0||Math.abs(r.y)>0)&&this.editor.pan(r.x,r.y)}},{key:"complete",value:function(){this.editor.slideCamera({speed:Math.min(2,this.editor.inputs.pointerVelocity.len()),direction:this.editor.inputs.pointerVelocity,friction:au}),this.parent.transition("idle",{})}}]),n}(Vd);O(Nm,"id","dragging");var zm=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"onEnter",(function(){e.editor.setCursor({type:"grab"})})),O(B(e),"onPointerDown",(function(t){e.parent.transition("pointing",t)})),O(B(e),"onCancel",(function(){e.editor.setSelectedTool("select")})),e}return N(n)}(Vd);O(zm,"id","idle");var Bm=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"onEnter",(function(){e.editor.stopCameraAnimation(),e.editor.setCursor({type:"grabbing"})})),O(B(e),"onPointerMove",(function(t){e.editor.inputs.isDragging&&e.parent.transition("dragging",t)})),O(B(e),"onPointerUp",(function(){e.complete()})),O(B(e),"onCancel",(function(){e.complete()})),O(B(e),"onComplete",(function(){e.complete()})),O(B(e),"onInterrupt",(function(){e.complete()})),e}return N(n,[{key:"complete",value:function(){this.parent.transition("idle",{})}}]),n}(Vd);O(Bm,"id","pointing");var Fm=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"onDoubleClick",(function(t){if("settle"===t.phase){var n=e.editor.inputs.currentScreenPoint;e.editor.zoomIn(n,{duration:220,easing:pa.easeOutQuint})}})),O(B(e),"onTripleClick",(function(t){if("settle"===t.phase){var n=e.editor.inputs.currentScreenPoint;e.editor.zoomOut(n,{duration:320,easing:pa.easeOutQuint})}})),O(B(e),"onQuadrupleClick",(function(t){if("settle"===t.phase){var n=e.editor,r=n.zoomLevel,i=n.inputs.currentScreenPoint;1===r?e.editor.zoomToFit({duration:400,easing:pa.easeOutQuint}):e.editor.resetZoom(i,{duration:320,easing:pa.easeOutQuint})}})),e}return N(n)}(Vd);O(Fm,"id","hand"),O(Fm,"initial","idle"),O(Fm,"children",(function(){return[zm,Bm,Nm]}));var Um=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"onPointerDown",(function(t){e.parent.transition("lasering",t)})),e}return N(n)}(Vd);O(Um,"id","idle");var Km=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"scribble",{}),O(B(e),"onEnter",(function(){e.startScribble(),e.pushPointToScribble()})),O(B(e),"onExit",(function(){e.editor.setErasingIds([]),e.scribble.stop()})),O(B(e),"onPointerMove",(function(){e.pushPointToScribble()})),O(B(e),"onPointerUp",(function(){e.complete()})),O(B(e),"startScribble",(function(){var t;e.scribble.tick&&e.editor.off("tick",null===(t=e.scribble)||void 0===t?void 0:t.tick);e.scribble=new rg({onUpdate:e.onScribbleUpdate,onComplete:e.onScribbleComplete,color:"laser",opacity:.7,size:4,delay:1200}),e.editor.on("tick",e.scribble.tick)})),O(B(e),"pushPointToScribble",(function(){var t=e.editor.inputs.currentPagePoint,n=t.x,r=t.y;e.scribble.addPoint(n,r)})),O(B(e),"onScribbleUpdate",(function(t){e.editor.setScribble(t)})),O(B(e),"onScribbleComplete",(function(){e.editor.off("tick",e.scribble.tick),e.editor.setScribble(null)})),O(B(e),"onCancel",(function(){e.cancel()})),O(B(e),"onComplete",(function(){e.complete()})),e}return N(n,[{key:"complete",value:function(){this.parent.transition("idle",{})}},{key:"cancel",value:function(){this.parent.transition("idle",{})}}]),n}(Vd);O(Km,"id","lasering");var Vm=function(e){U(n,e);var t=W(n);function n(){var e;z(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return O(B(e=t.call.apply(t,[this].concat(i))),"onEnter",(function(){e.editor.setCursor({type:"cross"})})),e}return N(n)}(Vd);O(Vm,"id","laser"),O(Vm,"initial","idle"),O(Vm,"children",(function(){return[Um,Km]}));var Wm=[Fm,Dm,Vm];function Hm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ym(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hm(Object(n),!0).forEach((function(t){Xm(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Xm(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qm(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function $m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(e,t)||Qm(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gm(e){return function(e){if(Array.isArray(e))return Jm(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Qm(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qm(e,t){if(e){if("string"===typeof e)return Jm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Jm(e,t):void 0}}function Jm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Zm(e){var t,n,r=e.sizes.shift(),i=Math.max(Math.ceil(r[0]),1),o=Math.max(Math.ceil(r[1]),1),a=[i-1,o-1,1,1],s=Date.now(),u="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope;u?(t=new OffscreenCanvas(1,1),n=new OffscreenCanvas(i,o)):((t=document.createElement("canvas")).width=1,t.height=1,(n=document.createElement("canvas")).width=i,n.height=o);var l=t.getContext("2d"),c=n.getContext("2d");c&&(c.fillRect.apply(c,a),l.drawImage(n,i-1,o-1,1,1,0,0,1,1));var d=l&&0!==l.getImageData(0,0,1,1).data[3],f=Date.now()-s;return[t,n].forEach((function(e){e.height=0,e.width=0})),u?(postMessage({width:i,height:o,benchmark:f,isTestPass:d}),!d&&e.sizes.length&&Zm(e)):d?e.onSuccess(i,o,f):(e.onError(i,o,f),e.sizes.length&&Zm(e)),d}var ey=[16384,14188,11402,11180,10836,8192,4096,1],ty=[8388607,65535,32767,16384,8192,4096,1],ny=[4194303,65535,32767,16384,8192,4096,1],ry=["onError","onSuccess"],iy={max:null,min:1,sizes:[],step:1024,usePromise:!1,useWorker:!1,onError:Function.prototype,onSuccess:Function.prototype},oy={};function ay(e){var t=e.width===e.height,n=1===e.height,r=1===e.width,i=[];if(e.width&&e.height)for(var o=e.min||iy.min,a=e.step||iy.step,s=Math.max(e.width,e.height);s>=o;){var u=t||n?s:1,l=t||r?s:1;i.push([u,l]),s-=a}else e.sizes.forEach((function(e){var o=t||n?e:1,a=t||r?e:1;i.push([o,a])}));return i}function sy(e){var t=window&&"HTMLCanvasElement"in window,n=window&&"OffscreenCanvas"in window,r=Date.now(),i=e.onError,o=e.onSuccess,a=qm(e,ry),s=null;if(!t)return!1;if(e.useWorker&&n){var u="\n            var canvasTest = ".concat(Zm.toString(),";\n            onmessage = function(e) {\n                canvasTest(e.data);\n            };\n        "),l=new Blob([u],{type:"application/javascript"}),c=URL.createObjectURL(l);s=new Worker(c),URL.revokeObjectURL(c),s.onmessage=function(e){var t=e.data,n=t.width,i=t.height,o=t.benchmark;t.isTestPass?(oy[r].onSuccess(n,i,o),delete oy[r]):oy[r].onError(n,i,o)}}return e.usePromise?new Promise((function(t,n){var u=Ym(Ym({},e),{},{onError:function(t,r,o){var a;if(0===e.sizes.length)a=!0;else{var s=$m(e.sizes.slice(-1),1),u=$m(s[0],2),l=u[0],c=u[1];a=t===l&&r===c}i(t,r,o),a&&n({width:t,height:r,benchmark:o})},onSuccess:function(e,n,r){o(e,n,r),t({width:e,height:n,benchmark:r})}});if(s){var l=u.onError,c=u.onSuccess;oy[r]={onError:l,onSuccess:c},s.postMessage(a)}else Zm(u)})):s?(oy[r]={onError:i,onSuccess:o},void s.postMessage(a)):Zm(e)}var uy={maxArea:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ay({width:e.max,height:e.max,min:e.min,step:e.step,sizes:Gm(ey)});return sy(Ym(Ym(Ym({},iy),e),{},{sizes:t}))},maxHeight:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ay({width:1,height:e.max,min:e.min,step:e.step,sizes:Gm(ty)});return sy(Ym(Ym(Ym({},iy),e),{},{sizes:t}))},maxWidth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ay({width:e.max,height:1,min:e.min,step:e.step,sizes:Gm(ny)});return sy(Ym(Ym(Ym({},iy),e),{},{sizes:t}))},test:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Ym(Ym({},iy),e);return t.sizes=Gm(t.sizes),t.width&&t.height&&(t.sizes=[[t.width,t.height]]),sy(t)}},ly=null;function cy(){return ly||(ly=function(){return dy.apply(this,arguments)}()),ly}function dy(){return(dy=na(ea().mark((function e(){var t,n,r;return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uy.maxWidth({usePromise:!0});case 2:return t=e.sent,e.next=5,uy.maxHeight({usePromise:!0});case 5:return n=e.sent,e.next=8,uy.maxArea({usePromise:!0});case 8:return r=e.sent,e.abrupt("return",{maxWidth:t.width,maxHeight:n.height,maxArea:r.width*r.height});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fy(e){var t=e.cloneNode(!0);return e.setAttribute("width",+e.getAttribute("width")+""),e.setAttribute("height",+e.getAttribute("height")+""),(new XMLSerializer).serializeToString(t).replaceAll("&#10;      ","").replaceAll(/((\s|")[0-9]*\.[0-9]{2})([0-9]*)(\b|"|\))/g,"$1")}function hy(e,t){return py.apply(this,arguments)}function py(){return py=na(ea().mark((function e(t,n){var r,i,o,a,s,u,l,c,d,f,h,p,v,g;return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.type,i=n.quality,o=n.scale,a=+t.getAttribute("width"),s=+t.getAttribute("height"),u=a*o,l=s*o,e.next=7,vy(t);case 7:return c=e.sent,e.next=10,cy();case 10:return d=e.sent,a>d.maxWidth&&(u=d.maxWidth,l=u/a*s),s>d.maxHeight&&(l=d.maxHeight,u=l/s*a),u*l>d.maxArea&&(f=Math.sqrt(d.maxArea/(u*l)),u*=f,l*=f),u=Math.floor(u),l=Math.floor(l),h=u/a,e.next=19,new Promise((function(e){var t=new Image;t.crossOrigin="anonymous",t.onload=na(ea().mark((function n(){var r,i;return ea().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,new Promise((function(e){return setTimeout(e,250)}));case 2:r=document.createElement("canvas"),i=r.getContext("2d"),r.width=u,r.height=l,i.imageSmoothingEnabled=!0,i.imageSmoothingQuality="high",i.drawImage(t,0,0,u,l),URL.revokeObjectURL(c),e(r);case 11:case"end":return n.stop()}}),n)}))),t.onerror=function(){e(null)},t.src=c}));case 19:if(p=e.sent){e.next=22;break}return e.abrupt("return",null);case 22:return e.next=24,new Promise((function(e){return p.toBlob((function(t){t&&!Ss.throwToBlob.value||e(null),e(t)}),"image/"+r,i)}));case 24:if(v=e.sent){e.next=27;break}return e.abrupt("return",null);case 27:return e.t0=DataView,e.next=30,v.arrayBuffer();case 30:return e.t1=e.sent,g=new e.t0(e.t1),e.abrupt("return",Up(g,h,{type:"image/"+r}));case 33:case"end":return e.stop()}}),e)}))),py.apply(this,arguments)}function vy(e){return gy.apply(this,arguments)}function gy(){return gy=na(ea().mark((function e(t){var n,r,i,o,a,s;return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=t.cloneNode(!0)).setAttribute("encoding",'UTF-8"'),r=new FileReader,i=Array.from(n.querySelectorAll("image")),o=ea().mark((function e(){var t,n,i,o;return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s[a],!(n=t.getAttribute("xlink:href"))){e.next=13;break}if(n.startsWith("data:")){e.next=13;break}return e.next=6,fetch(n);case 6:return e.next=8,e.sent.blob();case 8:return i=e.sent,e.next=11,new Promise((function(e,t){r.onload=function(){return e(r.result)},r.onerror=function(){return t(r.error)},r.readAsDataURL(i)}));case 11:o=e.sent,t.setAttribute("xlink:href",o);case 13:case"end":return e.stop()}}),e)})),a=0,s=i;case 6:if(!(a<s.length)){e.next=11;break}return e.delegateYield(o(),"t0",8);case 8:a++,e.next=6;break;case 11:return e.abrupt("return",my(n));case 12:case"end":return e.stop()}}),e)}))),gy.apply(this,arguments)}function my(e){var t=(new XMLSerializer).serializeToString(e),n=window.btoa(unescape(encodeURIComponent(t)));return"data:image/svg+xml;base64,".concat(n)}function yy(e,t){var n=document.createElement("a");n.href=e,n.download=t,n.click()}function by(){return by=na(ea().mark((function e(){var t,n,r=arguments;return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(r.length>0&&void 0!==r[0]?r[0]:{}).shouldReload,n=void 0===t||t,sessionStorage.clear(),e.next=4,Promise.all(sm().map((function(e){return Vg(e)})));case 4:localStorage.clear(),n&&window.location.reload();case 6:case"end":return e.stop()}}),e)}))),by.apply(this,arguments)}function wy(){return wy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wy.apply(this,arguments)}function xy(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).checkForDefaultPrevented,r=void 0===n||n;return function(n){if(null===e||void 0===e||e(n),!1===r||!n.defaultPrevented)return null===t||void 0===t?void 0:t(n)}}function ky(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.forEach((function(t){return function(e,t){"function"===typeof e?e(t):null!==e&&void 0!==e&&(e.current=t)}(t,e)}))}}function Sy(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0,t.useCallback)(ky.apply(void 0,n),n)}"undefined"!==typeof window&&(window.__tldraw__hardReset=function(){return by.apply(this,arguments)});var _y=["children"],Ey=["scope","children"];function Cy(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=[];var i=function(){var n=r.map((function(e){return(0,t.createContext)(e)}));return function(r){var i=(null===r||void 0===r?void 0:r[e])||n;return(0,t.useMemo)((function(){return O({},"__scope".concat(e),R(R({},r),{},O({},e,i)))}),[r,i])}};return i.scopeName=e,[function(n,i){var o=(0,t.createContext)(i),a=r.length;function s(n){var r=n.scope,i=n.children,s=Jt(n,Ey),u=(null===r||void 0===r?void 0:r[e][a])||o,l=(0,t.useMemo)((function(){return s}),Object.values(s));return(0,t.createElement)(u.Provider,{value:l},i)}return r=[].concat(u(r),[i]),s.displayName=n+"Provider",[s,function(r,s){var u=(null===s||void 0===s?void 0:s[e][a])||o,l=(0,t.useContext)(u);if(l)return l;if(void 0!==i)return i;throw new Error("`".concat(r,"` must be used within `").concat(n,"`"))}]},Py.apply(void 0,[i].concat(u(n)))]}function Py(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(1===n.length)return i;var o=function(){var e=n.map((function(e){return{useScope:e(),scopeName:e.scopeName}}));return function(n){var r=e.reduce((function(e,t){var r=t.useScope,i=t.scopeName,o=r(n)["__scope".concat(i)];return R(R({},e),o)}),{});return(0,t.useMemo)((function(){return O({},"__scope".concat(i.scopeName),r)}),[r])}};return o.scopeName=i.scopeName,o}var Iy=Boolean(null===globalThis||void 0===globalThis?void 0:globalThis.document)?t.useLayoutEffect:function(){},Ty=r["useId".toString()]||function(){},My=0;function Ay(e){var n=L(t.useState(Ty()),2),r=n[0],i=n[1];return Iy((function(){e||i((function(e){return null!==e&&void 0!==e?e:String(My++)}))}),[e]),e||(r?"radix-".concat(r):"")}function Oy(e){var n=(0,t.useRef)(e);return(0,t.useEffect)((function(){n.current=e})),(0,t.useMemo)((function(){return function(){for(var e,t,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return null===(t=n.current)||void 0===t?void 0:(e=t).call.apply(e,[n].concat(i))}}),[])}function jy(e){var n=e.prop,r=e.defaultProp,i=e.onChange,o=void 0===i?function(){}:i,a=function(e){var n=e.defaultProp,r=e.onChange,i=(0,t.useState)(n),o=L(i,1)[0],a=(0,t.useRef)(o),s=Oy(r);return(0,t.useEffect)((function(){a.current!==o&&(s(o),a.current=o)}),[o,a,s]),i}({defaultProp:r,onChange:o}),s=L(a,2),u=s[0],l=s[1],c=void 0!==n,d=c?n:u,f=Oy(o);return[d,(0,t.useCallback)((function(e){if(c){var t="function"===typeof e?e(n):e;t!==n&&f(t)}else l(e)}),[c,n,l,f])]}var Ry=n(4164),Ly=["children"],Dy=["children"],Ny=(0,t.forwardRef)((function(e,n){var r=e.children,i=Jt(e,Ly),o=t.Children.toArray(r),a=o.find(Fy);if(a){var s=a.props.children,u=o.map((function(e){return e===a?t.Children.count(s)>1?t.Children.only(null):(0,t.isValidElement)(s)?s.props.children:null:e}));return(0,t.createElement)(zy,wy({},i,{ref:n}),(0,t.isValidElement)(s)?(0,t.cloneElement)(s,void 0,u):null)}return(0,t.createElement)(zy,wy({},i,{ref:n}),r)}));Ny.displayName="Slot";var zy=(0,t.forwardRef)((function(e,n){var r=e.children,i=Jt(e,Dy);return(0,t.isValidElement)(r)?(0,t.cloneElement)(r,R(R({},function(e,t){var n=R({},t),r=function(){var r=e[i],o=t[i];/^on[A-Z]/.test(i)?r&&o?n[i]=function(){o.apply(void 0,arguments),r.apply(void 0,arguments)}:r&&(n[i]=r):"style"===i?n[i]=R(R({},r),o):"className"===i&&(n[i]=[r,o].filter(Boolean).join(" "))};for(var i in t)r();return R(R({},e),n)}(i,r.props)),{},{ref:n?ky(n,r.ref):r.ref})):t.Children.count(r)>1?t.Children.only(null):null}));zy.displayName="SlotClone";var By=function(e){var n=e.children;return(0,t.createElement)(t.Fragment,null,n)};function Fy(e){return(0,t.isValidElement)(e)&&e.type===By}var Uy=["asChild"],Ky=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((function(e,n){var r=(0,t.forwardRef)((function(e,r){var i=e.asChild,o=Jt(e,Uy),a=i?Ny:n;return(0,t.useEffect)((function(){window[Symbol.for("radix-ui")]=!0}),[]),(0,t.createElement)(a,wy({},o,{ref:r}))}));return r.displayName="Primitive.".concat(n),R(R({},e),{},O({},n,r))}),{});function Vy(e,t){e&&(0,Ry.flushSync)((function(){return e.dispatchEvent(t)}))}var Wy,Hy=["disableOutsidePointerEvents","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss"],Yy="dismissableLayer.update",Xy="dismissableLayer.pointerDownOutside",qy="dismissableLayer.focusOutside",$y=(0,t.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Gy=(0,t.forwardRef)((function(e,n){var r,i=e.disableOutsidePointerEvents,o=void 0!==i&&i,a=e.onEscapeKeyDown,s=e.onPointerDownOutside,l=e.onFocusOutside,c=e.onInteractOutside,d=e.onDismiss,f=Jt(e,Hy),h=(0,t.useContext)($y),p=L((0,t.useState)(null),2),v=p[0],g=p[1],m=null!==(r=null===v||void 0===v?void 0:v.ownerDocument)&&void 0!==r?r:null===globalThis||void 0===globalThis?void 0:globalThis.document,y=L((0,t.useState)({}),2)[1],b=Sy(n,(function(e){return g(e)})),w=Array.from(h.layers),x=L(u(h.layersWithOutsidePointerEventsDisabled).slice(-1),1)[0],k=w.indexOf(x),S=v?w.indexOf(v):-1,_=h.layersWithOutsidePointerEventsDisabled.size>0,E=S>=k,C=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document,r=Oy(e),i=(0,t.useRef)(!1),o=(0,t.useRef)((function(){}));return(0,t.useEffect)((function(){var e=function(e){if(e.target&&!i.current){var t=function(){Zy(Xy,r,a,{discrete:!0})},a={originalEvent:e};"touch"===e.pointerType?(n.removeEventListener("click",o.current),o.current=t,n.addEventListener("click",o.current,{once:!0})):t()}i.current=!1},t=window.setTimeout((function(){n.addEventListener("pointerdown",e)}),0);return function(){window.clearTimeout(t),n.removeEventListener("pointerdown",e),n.removeEventListener("click",o.current)}}),[n,r]),{onPointerDownCapture:function(){return i.current=!0}}}((function(e){var t=e.target,n=u(h.branches).some((function(e){return e.contains(t)}));E&&!n&&(null===s||void 0===s||s(e),null===c||void 0===c||c(e),e.defaultPrevented||null===d||void 0===d||d())}),m),P=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document,r=Oy(e),i=(0,t.useRef)(!1);return(0,t.useEffect)((function(){var e=function(e){e.target&&!i.current&&Zy(qy,r,{originalEvent:e},{discrete:!1})};return n.addEventListener("focusin",e),function(){return n.removeEventListener("focusin",e)}}),[n,r]),{onFocusCapture:function(){return i.current=!0},onBlurCapture:function(){return i.current=!1}}}((function(e){var t=e.target;u(h.branches).some((function(e){return e.contains(t)}))||(null===l||void 0===l||l(e),null===c||void 0===c||c(e),e.defaultPrevented||null===d||void 0===d||d())}),m);return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document,r=Oy(e);(0,t.useEffect)((function(){var e=function(e){"Escape"===e.key&&r(e)};return n.addEventListener("keydown",e),function(){return n.removeEventListener("keydown",e)}}),[r,n])}((function(e){S===h.layers.size-1&&(null===a||void 0===a||a(e),!e.defaultPrevented&&d&&(e.preventDefault(),d()))}),m),(0,t.useEffect)((function(){if(v)return o&&(0===h.layersWithOutsidePointerEventsDisabled.size&&(Wy=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(v)),h.layers.add(v),Jy(),function(){o&&1===h.layersWithOutsidePointerEventsDisabled.size&&(m.body.style.pointerEvents=Wy)}}),[v,m,o,h]),(0,t.useEffect)((function(){return function(){v&&(h.layers.delete(v),h.layersWithOutsidePointerEventsDisabled.delete(v),Jy())}}),[v,h]),(0,t.useEffect)((function(){var e=function(){return y({})};return document.addEventListener(Yy,e),function(){return document.removeEventListener(Yy,e)}}),[]),(0,t.createElement)(Ky.div,wy({},f,{ref:b,style:R({pointerEvents:_?E?"auto":"none":void 0},e.style),onFocusCapture:xy(e.onFocusCapture,P.onFocusCapture),onBlurCapture:xy(e.onBlurCapture,P.onBlurCapture),onPointerDownCapture:xy(e.onPointerDownCapture,C.onPointerDownCapture)}))})),Qy=(0,t.forwardRef)((function(e,n){var r=(0,t.useContext)($y),i=(0,t.useRef)(null),o=Sy(n,i);return(0,t.useEffect)((function(){var e=i.current;if(e)return r.branches.add(e),function(){r.branches.delete(e)}}),[r.branches]),(0,t.createElement)(Ky.div,wy({},e,{ref:o}))}));function Jy(){var e=new CustomEvent(Yy);document.dispatchEvent(e)}function Zy(e,t,n,r){var i=r.discrete,o=n.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&o.addEventListener(e,t,{once:!0}),i?Vy(o,a):o.dispatchEvent(a)}var eb=Gy,tb=Qy,nb=["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"],rb="focusScope.autoFocusOnMount",ib="focusScope.autoFocusOnUnmount",ob={bubbles:!1,cancelable:!0},ab=(0,t.forwardRef)((function(e,n){var r=e.loop,i=void 0!==r&&r,o=e.trapped,a=void 0!==o&&o,s=e.onMountAutoFocus,u=e.onUnmountAutoFocus,l=Jt(e,nb),c=L((0,t.useState)(null),2),d=c[0],f=c[1],h=Oy(s),p=Oy(u),v=(0,t.useRef)(null),g=Sy(n,(function(e){return f(e)})),m=(0,t.useRef)({paused:!1,pause:function(){this.paused=!0},resume:function(){this.paused=!1}}).current;(0,t.useEffect)((function(){if(a){var e=function(e){if(!m.paused&&d){var t=e.target;d.contains(t)?v.current=t:cb(v.current,{select:!0})}},t=function(e){if(!m.paused&&d){var t=e.relatedTarget;null!==t&&(d.contains(t)||cb(v.current,{select:!0}))}};document.addEventListener("focusin",e),document.addEventListener("focusout",t);var n=new MutationObserver((function(e){var t,n=document.activeElement,r=X(e);try{for(r.s();!(t=r.n()).done;){t.value.removedNodes.length>0&&(null!==d&&void 0!==d&&d.contains(n)||cb(d))}}catch(i){r.e(i)}finally{r.f()}}));return d&&n.observe(d,{childList:!0,subtree:!0}),function(){document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),n.disconnect()}}}),[a,d,m.paused]),(0,t.useEffect)((function(){if(d){db.add(m);var e=document.activeElement;if(!d.contains(e)){var t=new CustomEvent(rb,ob);d.addEventListener(rb,h),d.dispatchEvent(t),t.defaultPrevented||(!function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.select,i=void 0!==r&&r,o=document.activeElement,a=X(e);try{for(a.s();!(t=a.n()).done;){if(cb(t.value,{select:i}),document.activeElement!==o)return}}catch(s){a.e(s)}finally{a.f()}}((n=sb(d),n.filter((function(e){return"A"!==e.tagName}))),{select:!0}),document.activeElement===e&&cb(d))}return function(){d.removeEventListener(rb,h),setTimeout((function(){var t=new CustomEvent(ib,ob);d.addEventListener(ib,p),d.dispatchEvent(t),t.defaultPrevented||cb(null!==e&&void 0!==e?e:document.body,{select:!0}),d.removeEventListener(ib,p),db.remove(m)}),0)}}var n}),[d,h,p,m]);var y=(0,t.useCallback)((function(e){if((i||a)&&!m.paused){var t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,n=document.activeElement;if(t&&n){var r=e.currentTarget,o=function(e){var t=sb(e),n=ub(t,e),r=ub(t.reverse(),e);return[n,r]}(r),s=L(o,2),u=s[0],l=s[1];u&&l?e.shiftKey||n!==l?e.shiftKey&&n===u&&(e.preventDefault(),i&&cb(l,{select:!0})):(e.preventDefault(),i&&cb(u,{select:!0})):n===r&&e.preventDefault()}}}),[i,a,m.paused]);return(0,t.createElement)(Ky.div,wy({tabIndex:-1},l,{ref:g,onKeyDown:y}))}));function sb(e){for(var t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:function(e){var t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});n.nextNode();)t.push(n.currentNode);return t}function ub(e,t){var n,r=X(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!lb(i,{upTo:t}))return i}}catch(o){r.e(o)}finally{r.f()}}function lb(e,t){var n=t.upTo;if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==n&&e===n)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function cb(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).select,n=void 0!==t&&t;if(e&&e.focus){var r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&function(e){return e instanceof HTMLInputElement&&"select"in e}(e)&&n&&e.select()}}var db=function(){var e=[];return{add:function(t){var n=e[0];t!==n&&(null===n||void 0===n||n.pause()),(e=fb(e,t)).unshift(t)},remove:function(t){var n;null===(n=(e=fb(e,t))[0])||void 0===n||n.resume()}}}();function fb(e,t){var n=u(e),r=n.indexOf(t);return-1!==r&&n.splice(r,1),n}var hb=["container"],pb=(0,t.forwardRef)((function(e,n){var r,i=e.container,o=void 0===i?null===globalThis||void 0===globalThis||null===(r=globalThis.document)||void 0===r?void 0:r.body:i,a=Jt(e,hb);return o?Ry.createPortal((0,t.createElement)(Ky.div,wy({},a,{ref:n})),o):null}));var vb=function(e){var n=e.present,r=e.children,i=function(e){var n=L((0,t.useState)(),2),r=n[0],i=n[1],o=(0,t.useRef)({}),a=(0,t.useRef)(e),s=(0,t.useRef)("none"),u=e?"mounted":"unmounted",l=function(e,n){return(0,t.useReducer)((function(e,t){var r=n[e][t];return null!==r&&void 0!==r?r:e}),e)}(u,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}}),c=L(l,2),d=c[0],f=c[1];return(0,t.useEffect)((function(){var e=gb(o.current);s.current="mounted"===d?e:"none"}),[d]),Iy((function(){var t=o.current,n=a.current;if(n!==e){var r=s.current,i=gb(t);if(e)f("MOUNT");else if("none"===i||"none"===(null===t||void 0===t?void 0:t.display))f("UNMOUNT");else{f(n&&r!==i?"ANIMATION_OUT":"UNMOUNT")}a.current=e}}),[e,f]),Iy((function(){if(r){var e=function(e){var t=gb(o.current).includes(e.animationName);e.target===r&&t&&(0,Ry.flushSync)((function(){return f("ANIMATION_END")}))},t=function(e){e.target===r&&(s.current=gb(o.current))};return r.addEventListener("animationstart",t),r.addEventListener("animationcancel",e),r.addEventListener("animationend",e),function(){r.removeEventListener("animationstart",t),r.removeEventListener("animationcancel",e),r.removeEventListener("animationend",e)}}f("ANIMATION_END")}),[r,f]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:(0,t.useCallback)((function(e){e&&(o.current=getComputedStyle(e)),i(e)}),[])}}(n),o="function"===typeof r?r({present:i.isPresent}):t.Children.only(r),a=Sy(i.ref,o.ref);return"function"===typeof r||i.isPresent?(0,t.cloneElement)(o,{ref:a}):null};function gb(e){return(null===e||void 0===e?void 0:e.animationName)||"none"}vb.displayName="Presence";var mb=0;function yb(){(0,t.useEffect)((function(){var e,t,n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",null!==(e=n[0])&&void 0!==e?e:bb()),document.body.insertAdjacentElement("beforeend",null!==(t=n[1])&&void 0!==t?t:bb()),mb++,function(){1===mb&&document.querySelectorAll("[data-radix-focus-guard]").forEach((function(e){return e.remove()})),mb--}}),[])}function bb(){var e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}var wb=function(){return wb=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},wb.apply(this,arguments)};function xb(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;function kb(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;"function"===typeof SuppressedError&&SuppressedError;var Sb="right-scroll-bar-position",_b="width-before-scroll-bar";function Eb(e,n){return function(e,n){var r=(0,t.useState)((function(){return{value:e,callback:n,facade:{get current(){return r.value},set current(e){var t=r.value;t!==e&&(r.value=e,r.callback(e,t))}}}}))[0];return r.callback=n,r.facade}(n||null,(function(t){return e.forEach((function(e){return function(e,t){return"function"===typeof e?e(t):e&&(e.current=t),e}(e,t)}))}))}function Cb(e){return e}function Pb(e,t){void 0===t&&(t=Cb);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(e){var i=t(e,r);return n.push(i),function(){n=n.filter((function(e){return e!==i}))}},assignSyncMedium:function(e){for(r=!0;n.length;){var t=n;n=[],t.forEach(e)}n={push:function(t){return e(t)},filter:function(){return n}}},assignMedium:function(e){r=!0;var t=[];if(n.length){var i=n;n=[],i.forEach(e),t=n}var o=function(){var n=t;t=[],n.forEach(e)},a=function(){return Promise.resolve().then(o)};a(),n={push:function(e){t.push(e),a()},filter:function(e){return t=t.filter(e),n}}}};return i}var Ib=function(e){void 0===e&&(e={});var t=Pb(null);return t.options=wb({async:!0,ssr:!1},e),t}(),Tb=function(){},Mb=t.forwardRef((function(e,n){var r=t.useRef(null),i=t.useState({onScrollCapture:Tb,onWheelCapture:Tb,onTouchMoveCapture:Tb}),o=i[0],a=i[1],s=e.forwardProps,u=e.children,l=e.className,c=e.removeScrollBar,d=e.enabled,f=e.shards,h=e.sideCar,p=e.noIsolation,v=e.inert,g=e.allowPinchZoom,m=e.as,y=void 0===m?"div":m,b=xb(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),w=h,x=Eb([r,n]),k=wb(wb({},b),o);return t.createElement(t.Fragment,null,d&&t.createElement(w,{sideCar:Ib,removeScrollBar:c,shards:f,noIsolation:p,inert:v,setCallbacks:a,allowPinchZoom:!!g,lockRef:r}),s?t.cloneElement(t.Children.only(u),wb(wb({},k),{ref:x})):t.createElement(y,wb({},k,{className:l,ref:x}),u))}));Mb.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},Mb.classNames={fullWidth:_b,zeroRight:Sb};var Ab,Ob=function(e){var n=e.sideCar,r=xb(e,["sideCar"]);if(!n)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=n.read();if(!i)throw new Error("Sidecar medium not found");return t.createElement(i,wb({},r))};Ob.isSideCarExport=!0;function jb(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Ab||n.nc;return t&&e.setAttribute("nonce",t),e}var Rb=function(){var e=0,t=null;return{add:function(n){var r,i;0==e&&(t=jb())&&(i=n,(r=t).styleSheet?r.styleSheet.cssText=i:r.appendChild(document.createTextNode(i)),function(e){(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}(t)),e++},remove:function(){! --e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Lb=function(){var e=function(){var e=Rb();return function(n,r){t.useEffect((function(){return e.add(n),function(){e.remove()}}),[n&&r])}}();return function(t){var n=t.styles,r=t.dynamic;return e(n,r),null}},Db={left:0,top:0,right:0,gap:0},Nb=function(e){return parseInt(e||"",10)||0},zb=function(e){if(void 0===e&&(e="margin"),"undefined"===typeof window)return Db;var t=function(e){var t=window.getComputedStyle(document.body),n=t["padding"===e?"paddingLeft":"marginLeft"],r=t["padding"===e?"paddingTop":"marginTop"],i=t["padding"===e?"paddingRight":"marginRight"];return[Nb(n),Nb(r),Nb(i)]}(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},Bb=Lb(),Fb=function(e,t,n,r){var i=e.left,o=e.top,a=e.right,s=e.gap;return void 0===n&&(n="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(r,";\n   padding-right: ").concat(s,"px ").concat(r,";\n  }\n  body {\n    overflow: hidden ").concat(r,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(r,";"),"margin"===n&&"\n    padding-left: ".concat(i,"px;\n    padding-top: ").concat(o,"px;\n    padding-right: ").concat(a,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(s,"px ").concat(r,";\n    "),"padding"===n&&"padding-right: ".concat(s,"px ").concat(r,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(Sb," {\n    right: ").concat(s,"px ").concat(r,";\n  }\n  \n  .").concat(_b," {\n    margin-right: ").concat(s,"px ").concat(r,";\n  }\n  \n  .").concat(Sb," .").concat(Sb," {\n    right: 0 ").concat(r,";\n  }\n  \n  .").concat(_b," .").concat(_b," {\n    margin-right: 0 ").concat(r,";\n  }\n  \n  body {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(s,"px;\n  }\n")},Ub=function(e){var n=e.noRelative,r=e.noImportant,i=e.gapMode,o=void 0===i?"margin":i,a=t.useMemo((function(){return zb(o)}),[o]);return t.createElement(Bb,{styles:Fb(a,!n,o,r?"":"!important")})},Kb=!1;if("undefined"!==typeof window)try{var Vb=Object.defineProperty({},"passive",{get:function(){return Kb=!0,!0}});window.addEventListener("test",Vb,Vb),window.removeEventListener("test",Vb,Vb)}catch(YK){Kb=!1}var Wb=!!Kb&&{passive:!1},Hb=function(e,t){var n=window.getComputedStyle(e);return"hidden"!==n[t]&&!(n.overflowY===n.overflowX&&!function(e){return"TEXTAREA"===e.tagName}(e)&&"visible"===n[t])},Yb=function(e,t){var n=t;do{if("undefined"!==typeof ShadowRoot&&n instanceof ShadowRoot&&(n=n.host),Xb(e,n)){var r=qb(e,n);if(r[1]>r[2])return!0}n=n.parentNode}while(n&&n!==document.body);return!1},Xb=function(e,t){return"v"===e?function(e){return Hb(e,"overflowY")}(t):function(e){return Hb(e,"overflowX")}(t)},qb=function(e,t){return"v"===e?[(n=t).scrollTop,n.scrollHeight,n.clientHeight]:function(e){return[e.scrollLeft,e.scrollWidth,e.clientWidth]}(t);var n},$b=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Gb=function(e){return[e.deltaX,e.deltaY]},Qb=function(e){return e&&"current"in e?e.current:e},Jb=function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")},Zb=0,ew=[];var tw,nw=(tw=function(e){var n=t.useRef([]),r=t.useRef([0,0]),i=t.useRef(),o=t.useState(Zb++)[0],a=t.useState((function(){return Lb()}))[0],s=t.useRef(e);t.useEffect((function(){s.current=e}),[e]),t.useEffect((function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(o));var t=kb([e.lockRef.current],(e.shards||[]).map(Qb),!0).filter(Boolean);return t.forEach((function(e){return e.classList.add("allow-interactivity-".concat(o))})),function(){document.body.classList.remove("block-interactivity-".concat(o)),t.forEach((function(e){return e.classList.remove("allow-interactivity-".concat(o))}))}}}),[e.inert,e.lockRef.current,e.shards]);var u=t.useCallback((function(e,t){if("touches"in e&&2===e.touches.length)return!s.current.allowPinchZoom;var n,o=$b(e),a=r.current,u="deltaX"in e?e.deltaX:a[0]-o[0],l="deltaY"in e?e.deltaY:a[1]-o[1],c=e.target,d=Math.abs(u)>Math.abs(l)?"h":"v";if("touches"in e&&"h"===d&&"range"===c.type)return!1;var f=Yb(d,c);if(!f)return!0;if(f?n=d:(n="v"===d?"h":"v",f=Yb(d,c)),!f)return!1;if(!i.current&&"changedTouches"in e&&(u||l)&&(i.current=n),!n)return!0;var h=i.current||n;return function(e,t,n,r,i){var o=function(e,t){return"h"===e&&"rtl"===t?-1:1}(e,window.getComputedStyle(t).direction),a=o*r,s=n.target,u=t.contains(s),l=!1,c=a>0,d=0,f=0;do{var h=qb(e,s),p=h[0],v=h[1]-h[2]-o*p;(p||v)&&Xb(e,s)&&(d+=v,f+=p),s=s.parentNode}while(!u&&s!==document.body||u&&(t.contains(s)||t===s));return(c&&(i&&0===d||!i&&a>d)||!c&&(i&&0===f||!i&&-a>f))&&(l=!0),l}(h,t,e,"h"===h?u:l,!0)}),[]),l=t.useCallback((function(e){var t=e;if(ew.length&&ew[ew.length-1]===a){var r="deltaY"in t?Gb(t):$b(t),i=n.current.filter((function(e){return e.name===t.type&&e.target===t.target&&function(e,t){return e[0]===t[0]&&e[1]===t[1]}(e.delta,r)}))[0];if(i&&i.should)t.cancelable&&t.preventDefault();else if(!i){var o=(s.current.shards||[]).map(Qb).filter(Boolean).filter((function(e){return e.contains(t.target)}));(o.length>0?u(t,o[0]):!s.current.noIsolation)&&t.cancelable&&t.preventDefault()}}}),[]),c=t.useCallback((function(e,t,r,i){var o={name:e,delta:t,target:r,should:i};n.current.push(o),setTimeout((function(){n.current=n.current.filter((function(e){return e!==o}))}),1)}),[]),d=t.useCallback((function(e){r.current=$b(e),i.current=void 0}),[]),f=t.useCallback((function(t){c(t.type,Gb(t),t.target,u(t,e.lockRef.current))}),[]),h=t.useCallback((function(t){c(t.type,$b(t),t.target,u(t,e.lockRef.current))}),[]);t.useEffect((function(){return ew.push(a),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:h}),document.addEventListener("wheel",l,Wb),document.addEventListener("touchmove",l,Wb),document.addEventListener("touchstart",d,Wb),function(){ew=ew.filter((function(e){return e!==a})),document.removeEventListener("wheel",l,Wb),document.removeEventListener("touchmove",l,Wb),document.removeEventListener("touchstart",d,Wb)}}),[]);var p=e.removeScrollBar,v=e.inert;return t.createElement(t.Fragment,null,v?t.createElement(a,{styles:Jb(o)}):null,p?t.createElement(Ub,{gapMode:"margin"}):null)},Ib.useMedium(tw),Ob),rw=t.forwardRef((function(e,n){return t.createElement(Mb,wb({},e,{ref:n,sideCar:nw}))}));rw.classNames=Mb.classNames;var iw=rw,ow=function(e){return"undefined"===typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body},aw=new WeakMap,sw=new WeakMap,uw={},lw=0,cw=function e(t){return t&&(t.host||e(t.parentNode))},dw=function(e,t,n,r){var i=function(e,t){return t.map((function(t){if(e.contains(t))return t;var n=cw(t);return n&&e.contains(n)?n:(console.error("aria-hidden",t,"in not contained inside",e,". Doing nothing"),null)})).filter((function(e){return Boolean(e)}))}(t,Array.isArray(e)?e:[e]);uw[n]||(uw[n]=new WeakMap);var o=uw[n],a=[],s=new Set,u=new Set(i);i.forEach((function e(t){t&&!s.has(t)&&(s.add(t),e(t.parentNode))}));return function e(t){t&&!u.has(t)&&Array.prototype.forEach.call(t.children,(function(t){if(s.has(t))e(t);else{var i=t.getAttribute(r),u=null!==i&&"false"!==i,l=(aw.get(t)||0)+1,c=(o.get(t)||0)+1;aw.set(t,l),o.set(t,c),a.push(t),1===l&&u&&sw.set(t,!0),1===c&&t.setAttribute(n,"true"),u||t.setAttribute(r,"true")}}))}(t),s.clear(),lw++,function(){a.forEach((function(e){var t=aw.get(e)-1,i=o.get(e)-1;aw.set(e,t),o.set(e,i),t||(sw.has(e)||e.removeAttribute(r),sw.delete(e)),i||e.removeAttribute(n)})),--lw||(aw=new WeakMap,aw=new WeakMap,sw=new WeakMap,uw={})}},fw=function(e,t,n){void 0===n&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),i=t||ow(e);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),dw(r,i,n,"aria-hidden")):function(){return null}},hw=["forceMount"],pw=["__scopeDialog"],vw=["forceMount"],gw=["__scopeDialog","trapFocus","onOpenAutoFocus","onCloseAutoFocus"],mw=["__scopeDialog"],yw=["__scopeDialog"],bw="Dialog",ww=L(Cy(bw),2),xw=ww[0],kw=(ww[1],L(xw(bw),2)),Sw=kw[0],_w=kw[1],Ew=function(e){var n=e.__scopeDialog,r=e.children,i=e.open,o=e.defaultOpen,a=e.onOpenChange,s=e.modal,u=void 0===s||s,l=(0,t.useRef)(null),c=(0,t.useRef)(null),d=L(jy({prop:i,defaultProp:o,onChange:a}),2),f=d[0],h=void 0!==f&&f,p=d[1];return(0,t.createElement)(Sw,{scope:n,triggerRef:l,contentRef:c,contentId:Ay(),titleId:Ay(),descriptionId:Ay(),open:h,onOpenChange:p,onOpenToggle:(0,t.useCallback)((function(){return p((function(e){return!e}))}),[p]),modal:u},r)},Cw="DialogPortal",Pw=L(xw(Cw,{forceMount:void 0}),2),Iw=Pw[0],Tw=Pw[1],Mw=function(e){var n=e.__scopeDialog,r=e.forceMount,i=e.children,o=e.container,a=_w(Cw,n);return(0,t.createElement)(Iw,{scope:n,forceMount:r},t.Children.map(i,(function(e){return(0,t.createElement)(vb,{present:r||a.open},(0,t.createElement)(pb,{asChild:!0,container:o},e))})))},Aw="DialogOverlay",Ow=(0,t.forwardRef)((function(e,n){var r=Tw(Aw,e.__scopeDialog),i=e.forceMount,o=void 0===i?r.forceMount:i,a=Jt(e,hw),s=_w(Aw,e.__scopeDialog);return s.modal?(0,t.createElement)(vb,{present:o||s.open},(0,t.createElement)(jw,wy({},a,{ref:n}))):null})),jw=(0,t.forwardRef)((function(e,n){var r=e.__scopeDialog,i=Jt(e,pw),o=_w(Aw,r);return(0,t.createElement)(iw,{as:Ny,allowPinchZoom:!0,shards:[o.contentRef]},(0,t.createElement)(Ky.div,wy({"data-state":Vw(o.open)},i,{ref:n,style:R({pointerEvents:"auto"},i.style)})))})),Rw="DialogContent",Lw=(0,t.forwardRef)((function(e,n){var r=Tw(Rw,e.__scopeDialog),i=e.forceMount,o=void 0===i?r.forceMount:i,a=Jt(e,vw),s=_w(Rw,e.__scopeDialog);return(0,t.createElement)(vb,{present:o||s.open},s.modal?(0,t.createElement)(Dw,wy({},a,{ref:n})):(0,t.createElement)(Nw,wy({},a,{ref:n})))})),Dw=(0,t.forwardRef)((function(e,n){var r=_w(Rw,e.__scopeDialog),i=(0,t.useRef)(null),o=Sy(n,r.contentRef,i);return(0,t.useEffect)((function(){var e=i.current;if(e)return fw(e)}),[]),(0,t.createElement)(zw,wy({},e,{ref:o,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:xy(e.onCloseAutoFocus,(function(e){var t;e.preventDefault(),null===(t=r.triggerRef.current)||void 0===t||t.focus()})),onPointerDownOutside:xy(e.onPointerDownOutside,(function(e){var t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey;(2===t.button||n)&&e.preventDefault()})),onFocusOutside:xy(e.onFocusOutside,(function(e){return e.preventDefault()}))}))})),Nw=(0,t.forwardRef)((function(e,n){var r=_w(Rw,e.__scopeDialog),i=(0,t.useRef)(!1),o=(0,t.useRef)(!1);return(0,t.createElement)(zw,wy({},e,{ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:function(t){var n,a;(null===(n=e.onCloseAutoFocus)||void 0===n||n.call(e,t),t.defaultPrevented)||(i.current||null===(a=r.triggerRef.current)||void 0===a||a.focus(),t.preventDefault());i.current=!1,o.current=!1},onInteractOutside:function(t){var n,a;null===(n=e.onInteractOutside)||void 0===n||n.call(e,t),t.defaultPrevented||(i.current=!0,"pointerdown"===t.detail.originalEvent.type&&(o.current=!0));var s=t.target;(null===(a=r.triggerRef.current)||void 0===a?void 0:a.contains(s))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&o.current&&t.preventDefault()}}))})),zw=(0,t.forwardRef)((function(e,n){var r=e.__scopeDialog,i=e.trapFocus,o=e.onOpenAutoFocus,a=e.onCloseAutoFocus,s=Jt(e,gw),u=_w(Rw,r),l=Sy(n,(0,t.useRef)(null));return yb(),(0,t.createElement)(t.Fragment,null,(0,t.createElement)(ab,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:o,onUnmountAutoFocus:a},(0,t.createElement)(Gy,wy({role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":Vw(u.open)},s,{ref:l,onDismiss:function(){return u.onOpenChange(!1)}}))),!1)})),Bw="DialogTitle",Fw=(0,t.forwardRef)((function(e,n){var r=e.__scopeDialog,i=Jt(e,mw),o=_w(Bw,r);return(0,t.createElement)(Ky.h2,wy({id:o.titleId},i,{ref:n}))})),Uw="DialogClose",Kw=(0,t.forwardRef)((function(e,n){var r=e.__scopeDialog,i=Jt(e,yw),o=_w(Uw,r);return(0,t.createElement)(Ky.button,wy({type:"button"},i,{ref:n,onClick:xy(e.onClick,(function(){return o.onOpenChange(!1)}))}))}));function Vw(e){return e?"open":"closed"}var Ww="DialogTitleWarning",Hw=L(function(e,n){var r=(0,t.createContext)(n);function i(e){var n=e.children,i=Jt(e,_y),o=(0,t.useMemo)((function(){return i}),Object.values(i));return(0,t.createElement)(r.Provider,{value:o},n)}return i.displayName=e+"Provider",[i,function(i){var o=(0,t.useContext)(r);if(o)return o;if(void 0!==n)return n;throw new Error("`".concat(i,"` must be used within `").concat(e,"`"))}]}(Ww,{contentName:Rw,titleName:Bw,docsSlug:"dialog"}),2),Yw=(Hw[0],Hw[1],Ew),Xw=Mw,qw=Ow,$w=Lw,Gw=(0,t.createContext)(null);function Qw(e){var t=e.assetUrls,n=e.children;return(0,Qo.jsx)(Gw.Provider,{value:t,children:n})}function Jw(){var e=(0,t.useContext)(Gw);if(!e)throw new Error("useAssetUrls must be used within an AssetUrlsProvider");return e}var Zw={"action.convert-to-bookmark":"Convert to Bookmark","action.convert-to-embed":"Convert to Embed","action.open-embed-link":"Open link","action.align-bottom":"Align bottom","action.align-center-horizontal":"Align horizontally","action.align-center-vertical":"Align vertically","action.align-center-horizontal.short":"Align H","action.align-center-vertical.short":"Align V","action.align-left":"Align left","action.align-right":"Align right","action.align-top":"Align top","action.back-to-content":"Back to content","action.bring-forward":"Bring forward","action.bring-to-front":"Bring to front","action.copy-as-json.short":"JSON","action.copy-as-json":"Copy as JSON","action.copy-as-png.short":"PNG","action.copy-as-png":"Copy as PNG","action.copy-as-svg.short":"SVG","action.copy-as-svg":"Copy as SVG","action.copy":"Copy","action.cut":"Cut","action.delete":"Delete","action.distribute-horizontal":"Distribute horizontally","action.distribute-vertical":"Distribute vertically","action.distribute-horizontal.short":"Distribute H","action.distribute-vertical.short":"Distribute V","action.duplicate":"Duplicate","action.edit-link":"Edit link","action.exit-pen-mode":"Exit pen mode","action.export-as-json.short":"JSON","action.export-as-json":"Export as JSON","action.export-as-png.short":"PNG","action.export-as-png":"Export as PNG","action.export-as-svg.short":"SVG","action.export-as-svg":"Export as SVG","action.flip-horizontal":"Flip horizontally","action.flip-vertical":"Flip vertically","action.flip-horizontal.short":"Flip H","action.flip-vertical.short":"Flip V","action.fork-project":"Fork this project","action.group":"Group","action.insert-embed":"Insert embed","action.insert-media":"Upload media","action.leave-shared-project":"Leave shared project","action.new-project":"New project","action.new-shared-project":"New shared project","action.open-cursor-chat":"Cursor chat","action.open-file":"Open file","action.pack":"Pack","action.paste":"Paste","action.print":"Print","action.redo":"Redo","action.rotate-ccw":"Rotate counterclockwise","action.rotate-cw":"Rotate clockwise","action.save-copy":"Save a copy","action.select-all":"Select all","action.select-none":"Select none","action.send-backward":"Send backward","action.send-to-back":"Send to back","action.share-project":"Share this project","action.stack-horizontal":"Stack horizontally","action.stack-vertical":"Stack vertically","action.stack-horizontal.short":"Stack H","action.stack-vertical.short":"Stack V","action.stop-following":"Stop following","action.stretch-horizontal":"Stretch horizontally","action.stretch-vertical":"Stretch vertically","action.stretch-horizontal.short":"Stretch H","action.stretch-vertical.short":"Stretch V","action.toggle-auto-size":"Toggle auto size","action.toggle-dark-mode.menu":"Dark mode","action.toggle-dark-mode":"Toggle dark mode","action.toggle-reduce-motion.menu":"Reduce motion","action.toggle-reduce-motion":"Toggle reduce motion","action.toggle-debug-mode.menu":"Debug mode","action.toggle-debug-mode":"Toggle debug mode","action.toggle-focus-mode.menu":"Focus mode","action.toggle-focus-mode":"Toggle focus mode","action.toggle-grid.menu":"Show grid","action.toggle-grid":"Toggle grid","action.toggle-lock":"Toggle locked","action.toggle-snap-mode.menu":"Always snap","action.toggle-snap-mode":"Toggle always snap","action.toggle-tool-lock.menu":"Tool lock","action.toggle-tool-lock":"Toggle tool lock","action.toggle-transparent.context-menu":"Transparent","action.toggle-transparent.menu":"Transparent","action.toggle-transparent":"Toggle transparent background","action.undo":"Undo","action.ungroup":"Ungroup","action.zoom-in":"Zoom in","action.zoom-out":"Zoom out","action.zoom-to-100":"Zoom to 100%","action.zoom-to-fit":"Zoom to fit","action.zoom-to-selection":"Zoom to selection","color-style.black":"Black","color-style.blue":"Blue","color-style.green":"Green","color-style.grey":"Grey","color-style.light-blue":"Light blue","color-style.light-green":"Light green","color-style.light-red":"Light red","color-style.light-violet":"Light violet","color-style.orange":"Orange","color-style.red":"Red","color-style.violet":"Violet","color-style.yellow":"Yellow","fill-style.none":"None","fill-style.semi":"Semi","fill-style.solid":"Solid","fill-style.pattern":"Pattern","dash-style.dashed":"Dashed","dash-style.dotted":"Dotted","dash-style.draw":"Draw","dash-style.solid":"Solid","size-style.s":"Small","size-style.m":"Medium","size-style.l":"Large","size-style.xl":"Extra large","opacity-style.0.1":"10%","opacity-style.0.25":"25%","opacity-style.0.5":"50%","opacity-style.0.75":"75%","opacity-style.1":"100%","font-style.draw":"Draw","font-style.sans":"Sans","font-style.serif":"Serif","font-style.mono":"Mono","align-style.start":"Start","align-style.middle":"Middle","align-style.end":"End","align-style.justify":"Justify","geo-style.arrow-down":"Arrow down","geo-style.arrow-left":"Arrow left","geo-style.arrow-right":"Arrow right","geo-style.arrow-up":"Arrow up","geo-style.diamond":"Diamond","geo-style.ellipse":"Ellipse","geo-style.hexagon":"Hexagon","geo-style.octagon":"Octagon","geo-style.oval":"Oval","geo-style.pentagon":"Pentagon","geo-style.rectangle":"Rectangle","geo-style.rhombus-2":"Rhombus 2","geo-style.rhombus":"Rhombus","geo-style.star":"Star","geo-style.trapezoid":"Trapezoid","geo-style.triangle":"Triangle","geo-style.x-box":"X box","geo-style.check-box":"Check box","arrowheadStart-style.none":"None","arrowheadStart-style.arrow":"Arrow","arrowheadStart-style.bar":"Bar","arrowheadStart-style.diamond":"Diamond","arrowheadStart-style.dot":"Dot","arrowheadStart-style.inverted":"Inverted","arrowheadStart-style.pipe":"Pipe","arrowheadStart-style.square":"Square","arrowheadStart-style.triangle":"Triangle","arrowheadEnd-style.none":"None","arrowheadEnd-style.arrow":"Arrow","arrowheadEnd-style.bar":"Bar","arrowheadEnd-style.diamond":"Diamond","arrowheadEnd-style.dot":"Dot","arrowheadEnd-style.inverted":"Inverted","arrowheadEnd-style.pipe":"Pipe","arrowheadEnd-style.square":"Square","arrowheadEnd-style.triangle":"Triangle","spline-style.line":"Line","spline-style.cubic":"Cubic","tool.select":"Select","tool.hand":"Hand","tool.draw":"Draw","tool.eraser":"Eraser","tool.arrow-down":"Arrow down","tool.arrow-left":"Arrow left","tool.arrow-right":"Arrow right","tool.arrow-up":"Arrow up","tool.arrow":"Arrow","tool.diamond":"Diamond","tool.ellipse":"Ellipse","tool.hexagon":"Hexagon","tool.highlight":"Highlight","tool.line":"Line","tool.octagon":"Octagon","tool.oval":"Oval","tool.pentagon":"Pentagon","tool.rectangle":"Rectangle","tool.rhombus":"Rhombus","tool.star":"Star","tool.trapezoid":"Trapezoid","tool.triangle":"Triangle","tool.x-box":"X box","tool.check-box":"Check box","tool.asset":"Asset","tool.frame":"Frame","tool.note":"Note","tool.laser":"Laser","tool.embed":"Embed","tool.text":"Text","menu.title":"Menu","menu.copy-as":"Copy as","menu.edit":"Edit","menu.export-as":"Export as","menu.file":"File","menu.language":"Language","menu.preferences":"Preferences","menu.view":"View","context-menu.arrange":"Arrange","context-menu.copy-as":"Copy as","context-menu.export-as":"Export as","context-menu.move-to-page":"Move to page","context-menu.reorder":"Reorder","page-menu.title":"Pages","page-menu.create-new-page":"Create new page","page-menu.max-page-count-reached":"Max pages reached","page-menu.new-page-initial-name":"Page 1","page-menu.edit-start":"Edit","page-menu.edit-done":"Done","page-menu.go-to-page":"Go to page","page-menu.submenu.rename":"Rename","page-menu.submenu.duplicate-page":"Duplicate","page-menu.submenu.title":"Menu","page-menu.submenu.move-down":"Move down","page-menu.submenu.move-up":"Move up","page-menu.submenu.delete":"Delete","share-menu.title":"Share","share-menu.save-note":"Download this project to your computer as a .tldr file.","share-menu.fork-note":"Create a new shared project based on this snapshot.","share-menu.share-project":"Share this project","share-menu.default-project-name":"Shared Project","share-menu.copy-link":"Copy share link","share-menu.readonly-link":"Read-only","share-menu.create-snapshot-link":"Copy snapshot link","share-menu.snapshot-link-note":"Capture and share this project as a read-only snapshot link.","share-menu.copy-readonly-link":"Copy read-only link","share-menu.offline-note":"Create a new shared project based on your current project.","share-menu.copy-link-note":"Anyone with the link will be able to view and edit this project.","share-menu.copy-readonly-link-note":"Anyone with the link will be able to view (but not edit) this project.","share-menu.project-too-large":"Sorry, this project can't be shared because it's too large. We're working on it!","share-menu.upload-failed":"Sorry, we couldn't upload your project at the moment. Please try again or let us know if the problem persists.","people-menu.title":"People","people-menu.change-name":"Change name","people-menu.change-color":"Change color","people-menu.follow":"Following","people-menu.following":"Following","people-menu.leading":"Following You","people-menu.user":"(You)","people-menu.invite":"Invite others","help-menu.title":"Help and resources","help-menu.about":"About","help-menu.discord":"Discord","help-menu.github":"GitHub","help-menu.keyboard-shortcuts":"Keyboard shortcuts","help-menu.twitter":"Twitter","actions-menu.title":"Actions","edit-link-dialog.title":"Edit link","edit-link-dialog.invalid-url":"A link must be a valid URL.","edit-link-dialog.detail":"Links will open in a new tab.","edit-link-dialog.url":"URL","edit-link-dialog.clear":"Clear","edit-link-dialog.save":"Continue","edit-link-dialog.cancel":"Cancel","embed-dialog.title":"Insert embed","embed-dialog.back":"Back","embed-dialog.create":"Create","embed-dialog.cancel":"Cancel","embed-dialog.url":"URL","embed-dialog.instruction":"Paste in the site's URL to create the embed.","embed-dialog.invalid-url":"We could not create an embed from that URL.","edit-pages-dialog.move-down":"Move down","edit-pages-dialog.move-up":"Move up","shortcuts-dialog.title":"Keyboard shortcuts","shortcuts-dialog.edit":"Edit","shortcuts-dialog.file":"File","shortcuts-dialog.preferences":"Preferences","shortcuts-dialog.tools":"Tools","shortcuts-dialog.transform":"Transform","shortcuts-dialog.view":"View","shortcuts-dialog.collaboration":"Collaboration","home-project-dialog.title":"Home project","home-project-dialog.description":"This is your local home project. It's just for you!","rename-project-dialog.title":"Rename project","rename-project-dialog.cancel":"Cancel","rename-project-dialog.rename":"Rename","home-project-dialog.ok":"Ok","style-panel.title":"Styles","style-panel.align":"Align","style-panel.vertical-align":"Vertical align","style-panel.position":"Position","style-panel.arrowheads":"Arrowheads","style-panel.arrowhead-start":"Start","style-panel.arrowhead-end":"End","style-panel.color":"Color","style-panel.dash":"Dash","style-panel.fill":"Fill","style-panel.font":"Font","style-panel.geo":"Shape","style-panel.mixed":"Mixed","style-panel.opacity":"Opacity","style-panel.size":"Size","style-panel.spline":"Spline","tool-panel.drawing":"Drawing","tool-panel.shapes":"Shapes","tool-panel.more":"More","debug-panel.more":"More","navigation-zone.toggle-minimap":"Toggle minimap","navigation-zone.zoom":"Zoom","focus-mode.toggle-focus-mode":"Toggle focus mode","toast.close":"Close","file-system.file-open-error.title":"Could not open file","file-system.file-open-error.not-a-tldraw-file":"The file you tried to open doesn't look like a tldraw file.","file-system.file-open-error.file-format-version-too-new":"The file you tried to open is from a newer version of tldraw. Please reload the page and try again.","file-system.file-open-error.generic-corrupted-file":"The file you tried to open is corrupted.","file-system.confirm-open.title":"Overwrite current project?","file-system.confirm-open.description":"Opening a file will replace your current project and any unsaved changes will be lost. Are you sure you want to continue?","file-system.confirm-open.cancel":"Cancel","file-system.confirm-open.open":"Open file","file-system.confirm-open.dont-show-again":"Don't ask again","file-system.confirm-clear.title":"Clear current project?","file-system.confirm-clear.description":"Creating a new project will clear your current project and any unsaved changes will be lost. Are you sure you want to continue?","file-system.confirm-clear.cancel":"Cancel","file-system.confirm-clear.continue":"Continue","file-system.confirm-clear.dont-show-again":"Don't ask again","file-system.shared-document-file-open-error.title":"Could not open file","file-system.shared-document-file-open-error.description":"Opening files from shared projects is not supported.","sharing.confirm-leave.title":"Leave current project?","sharing.confirm-leave.description":"Are you sure you want to leave this shared project? You can return to it by navigating to its URL.","sharing.confirm-leave.cancel":"Cancel","sharing.confirm-leave.leave":"Leave","sharing.confirm-leave.dont-show-again":"Don't ask again","toast.error.export-fail.title":"Failed export","toast.error.export-fail.desc":"Failed to export image","toast.error.copy-fail.title":"Failed copy","toast.error.copy-fail.desc":"Failed to copy image","context.pages.new-page":"New page","vscode.file-open.desc":"We've updated this document to work with the current version of tldraw. If you'd like to keep the original version (which will work on old.tldraw.com), click below to create a backup.","vscode.file-open.open":"Continue","vscode.file-open.backup":"Backup","vscode.file-open.backup-saved":"Backup saved","vscode.file-open.backup-failed":"Backup failed: this is not a .tldr file.","vscode.file-open.dont-show-again":"Don't ask again","cursor-chat.type-to-chat":"Type to chat..."},ex={locale:"en",label:"English",messages:Zw};function tx(e,t){return nx.apply(this,arguments)}function nx(){return nx=na(ea().mark((function e(t,n){var r,i,o,a,s;return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(n.translations.en);case 2:if(e.sent.ok){e.next=6;break}return console.warn("No main translations found."),e.abrupt("return",ex);case 6:if("en"!==t){e.next=8;break}return e.abrupt("return",ex);case 8:if(r=Xo.find((function(e){return e.locale===t})),r){e.next=12;break}return console.warn("No translation found for locale ".concat(t)),e.abrupt("return",ex);case 12:return e.next=14,fetch(n.translations[r.locale]);case 14:return i=e.sent,e.next=17,i.json();case 17:if(o=e.sent){e.next=21;break}return console.warn("No messages found for locale ".concat(t)),e.abrupt("return",ex);case 21:for(s in a=[],ex)o[s]||a.push(s);return a.length,e.abrupt("return",{locale:t,label:r.label,messages:R(R({},ex.messages),o)});case 25:case"end":return e.stop()}}),e)}))),nx.apply(this,arguments)}var rx=t.createContext({}),ix=function(){return t.useContext(rx)},ox=ua((function(e){var n=e.overrides,r=e.children,i=da().locale,o=Jw(),a=L(t.useState((function(){return n&&n.en?{locale:"en",label:"English",messages:R(R({},Zw),n.en)}:{locale:"en",label:"English",messages:Zw}})),2),s=a[0],u=a[1];return t.useEffect((function(){var e=!1;function t(){return(t=na(ea().mark((function t(){var r;return ea().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,tx(i,o);case 2:(r=t.sent)&&!e&&(n&&n[i]?u(R(R({},r),{},{messages:R(R({},r.messages),n[i])})):u(r));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return function(){t.apply(this,arguments)}(),function(){e=!0}}),[o,i,n]),(0,Qo.jsx)(rx.Provider,{value:s,children:r})}));function ax(){var e=ix();return t.useCallback((function(t){var n;return null!==(n=e.messages[t])&&void 0!==n?n:t}),[e])}function sx(e){return(0,Qo.jsx)("svg",R(R({width:16,height:16,viewBox:"0 0 16 16"},e),{},{children:(0,Qo.jsxs)("g",{strokeWidth:2,fill:"none",fillRule:"evenodd",children:[(0,Qo.jsx)("circle",{strokeOpacity:.25,cx:8,cy:8,r:7,stroke:"currentColor"}),(0,Qo.jsx)("path",{strokeLinecap:"round",d:"M15 8c0-4.5-4.5-7-7-7",stroke:"currentColor",children:(0,Qo.jsx)("animateTransform",{attributeName:"transform",type:"rotate",from:"0 8 8",to:"360 8 8",dur:"1s",repeatCount:"indefinite"})})]})}))}var ux=["small","invertIcon","icon","color","className"],lx=(0,t.memo)((function(e){var n=e.small,r=e.invertIcon,i=e.icon,o=e.color,a=e.className,s=Jt(e,ux),u=Jw().icons[i],l=(0,t.useRef)(null);return(0,t.useLayoutEffect)((function(){null!==l&&void 0!==l&&l.current&&(l.current.style.webkitMask="url(".concat(u,") center 100% / 100% no-repeat"))}),[l,u]),(0,Qo.jsx)("div",R(R({},s),{},{ref:l,className:ra("tlui-icon",{"tlui-icon__small":n},a),style:{color:o,mask:"url(".concat(u,") center 100% / 100% no-repeat"),transform:r?"scale(-1, 1)":void 0}}))}));var cx="undefined"!==typeof window&&window.navigator.userAgent.toLowerCase().indexOf("mac")>-1,dx=cx?"\u2318":"Ctrl",fx=cx?"\u2325":"Alt";function hx(e){return"\u2014 "+e.split(",")[0].split("").map((function(e){var t=e.replace(/\$/g,dx).replace(/\?/g,fx).replace(/!/g,"\u21e7");return t[0].toUpperCase()+t.slice(1)})).join("\u2009")}function px(e){var t,n=e.children;return(0,Qo.jsx)("kbd",{className:"tlui-kbd",children:(t=n,t.split(",")[0].split("").map((function(e){var t=e.replace(/\$/g,dx).replace(/\?/g,fx).replace(/!/g,"\u21e7");return t[0].toUpperCase()+t.slice(1)}))).map((function(e,t){return(0,Qo.jsx)("span",{children:e},t)}))})}var vx=["label","icon","invertIcon","iconLeft","smallIcon","kbd","isChecked","type","children","spinner"],gx=t.forwardRef((function(e,t){var n,r=e.label,i=e.icon,o=e.invertIcon,a=e.iconLeft,s=e.smallIcon,u=e.kbd,l=e.isChecked,c=void 0!==l&&l,d=e.type,f=void 0===d?"normal":d,h=e.children,p=e.spinner,v=Jt(e,vx),g=ax(),m=r?g(r):"";return(0,Qo.jsxs)("button",R(R({ref:t,draggable:!1,type:"button"},v),{},{title:null!==(n=v.title)&&void 0!==n?n:m,className:ra("tlui-button","tlui-button__".concat(f),v.className),children:[a&&(0,Qo.jsx)(lx,{icon:a,className:"tlui-icon-left",small:!0}),h,r&&(0,Qo.jsxs)("span",{draggable:!1,children:[m,c&&(0,Qo.jsx)(lx,{icon:"check"})]}),u&&(0,Qo.jsx)(px,{children:u}),i&&!p&&(0,Qo.jsx)(lx,{icon:i,small:!!r||s,invertIcon:o}),p&&(0,Qo.jsx)(sx,{})]}))}));function mx(e){var t=e.className,n=e.children;return(0,Qo.jsx)("div",{className:ra("tlui-dialog__header",t),children:n})}function yx(e){var t=e.className,n=e.children;return(0,Qo.jsx)(Fw,{dir:"ltr",className:ra("tlui-dialog__header__title",t),children:n})}function bx(){return(0,Qo.jsx)("div",{className:"tlui-dialog__header__close",children:(0,Qo.jsx)(Kw,{"data-testid":"dialog.close",dir:"ltr",asChild:!0,children:(0,Qo.jsx)(gx,{"aria-label":"Close",onTouchEnd:function(e){return e.target.click()},children:(0,Qo.jsx)(lx,{small:!0,icon:"cross-2"})})})})}function wx(e){var t=e.className,n=e.children,r=e.style;return(0,Qo.jsx)("div",{className:ra("tlui-dialog__body",t),style:r,children:n})}function xx(e){var t=e.className,n=e.children;return(0,Qo.jsx)("div",{className:ra("tlui-dialog__footer",t),children:n})}var kx=["scope","children"];function Sx(e){var n=e+"CollectionProvider",r=L(Cy(n),2),i=r[0],o=r[1],a=L(i(n,{collectionRef:{current:null},itemMap:new Map}),2),s=a[0],u=a[1],l=function(e){var n=e.scope,r=e.children,i=t.useRef(null),o=t.useRef(new Map).current;return t.createElement(s,{scope:n,itemMap:o,collectionRef:i},r)},c=e+"CollectionSlot",d=t.forwardRef((function(e,n){var r=e.scope,i=e.children,o=Sy(n,u(c,r).collectionRef);return t.createElement(Ny,{ref:o},i)})),f=e+"CollectionItemSlot",h="data-radix-collection-item",p=t.forwardRef((function(e,n){var r,i=e.scope,o=e.children,a=Jt(e,kx),s=t.useRef(null),l=Sy(n,s),c=u(f,i);return t.useEffect((function(){return c.itemMap.set(s,R({ref:s},a)),function(){c.itemMap.delete(s)}})),t.createElement(Ny,(O(r={},h,""),O(r,"ref",l),r),o)}));return[{Provider:l,Slot:d,ItemSlot:p},function(n){var r=u(e+"CollectionConsumer",n),i=t.useCallback((function(){var e=r.collectionRef.current;if(!e)return[];var t=Array.from(e.querySelectorAll("[".concat(h,"]"))),n=Array.from(r.itemMap.values()).sort((function(e,n){return t.indexOf(e.ref.current)-t.indexOf(n.ref.current)}));return n}),[r.collectionRef,r.itemMap]);return i},o]}var _x=(0,t.createContext)(void 0);function Ex(e){var n=(0,t.useContext)(_x);return e||n||"ltr"}var Cx=["top","right","bottom","left"],Px=Math.min,Ix=Math.max,Tx=Math.round,Mx=Math.floor,Ax=function(e){return{x:e,y:e}},Ox={left:"right",right:"left",bottom:"top",top:"bottom"},jx={start:"end",end:"start"};function Rx(e,t,n){return Ix(e,Px(t,n))}function Lx(e,t){return"function"===typeof e?e(t):e}function Dx(e){return e.split("-")[0]}function Nx(e){return e.split("-")[1]}function zx(e){return"x"===e?"y":"x"}function Bx(e){return"y"===e?"height":"width"}function Fx(e){return["top","bottom"].includes(Dx(e))?"y":"x"}function Ux(e){return zx(Fx(e))}function Kx(e,t,n){void 0===n&&(n=!1);var r=Nx(e),i=Ux(e),o=Bx(i),a="x"===i?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[o]>t.floating[o]&&(a=Yx(a)),[a,Yx(a)]}function Vx(e){var t=Yx(e);return[Wx(e),t,Wx(t)]}function Wx(e){return e.replace(/start|end/g,(function(e){return jx[e]}))}function Hx(e,t,n,r){var i=Nx(e),o=function(e,t,n){var r=["left","right"],i=["right","left"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?["top","bottom"]:["bottom","top"];default:return[]}}(Dx(e),"start"===n,r);return i&&(o=o.map((function(e){return e+"-"+i})),t&&(o=o.concat(o.map(Wx)))),o}function Yx(e){return e.replace(/left|right|bottom|top/g,(function(e){return Ox[e]}))}function Xx(e){return"number"!==typeof e?function(e){return R({top:0,right:0,bottom:0,left:0},e)}(e):{top:e,right:e,bottom:e,left:e}}function qx(e){return R(R({},e),{},{top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height})}var $x=["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","fallbackAxisSideDirection","flipAlignment"],Gx=["strategy"],Qx=["mainAxis","crossAxis","limiter"],Jx=["apply"];function Zx(e,t,n){var r,i=e.reference,o=e.floating,a=Fx(t),s=Ux(t),u=Bx(s),l=Dx(t),c="y"===a,d=i.x+i.width/2-o.width/2,f=i.y+i.height/2-o.height/2,h=i[u]/2-o[u]/2;switch(l){case"top":r={x:d,y:i.y-o.height};break;case"bottom":r={x:d,y:i.y+i.height};break;case"right":r={x:i.x+i.width,y:f};break;case"left":r={x:i.x-o.width,y:f};break;default:r={x:i.x,y:i.y}}switch(Nx(t)){case"start":r[s]-=h*(n&&c?-1:1);break;case"end":r[s]+=h*(n&&c?-1:1)}return r}var ek=function(){var e=na(ea().mark((function e(t,n,r){var i,o,a,s,u,l,c,d,f,h,p,v,g,m,y,b,w,x,k,S,_,E,C,P,I,T;return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.placement,o=void 0===i?"bottom":i,a=r.strategy,s=void 0===a?"absolute":a,u=r.middleware,l=void 0===u?[]:u,c=r.platform,d=l.filter(Boolean),e.next=4,null==c.isRTL?void 0:c.isRTL(n);case 4:return f=e.sent,e.next=7,c.getElementRects({reference:t,floating:n,strategy:s});case 7:h=e.sent,p=Zx(h,o,f),v=p.x,g=p.y,m=o,y={},b=0,w=0;case 13:if(!(w<d.length)){e.next=46;break}return x=d[w],k=x.name,S=x.fn,e.next=17,S({x:v,y:g,initialPlacement:o,placement:m,strategy:s,middlewareData:y,rects:h,platform:c,elements:{reference:t,floating:n}});case 17:if(_=e.sent,E=_.x,C=_.y,P=_.data,I=_.reset,v=null!=E?E:v,g=null!=C?C:g,y=R(R({},y),{},O({},k,R(R({},y[k]),P))),!(I&&b<=50)){e.next=43;break}if(b++,"object"!==typeof I){e.next=41;break}if(I.placement&&(m=I.placement),!I.rects){e.next=38;break}if(!0!==I.rects){e.next=36;break}return e.next=33,c.getElementRects({reference:t,floating:n,strategy:s});case 33:e.t0=e.sent,e.next=37;break;case 36:e.t0=I.rects;case 37:h=e.t0;case 38:T=Zx(h,m,f),v=T.x,g=T.y;case 41:return w=-1,e.abrupt("continue",43);case 43:w++,e.next=13;break;case 46:return e.abrupt("return",{x:v,y:g,placement:m,strategy:s,middlewareData:y});case 47:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function tk(e,t){return nk.apply(this,arguments)}function nk(){return nk=na(ea().mark((function e(t,n){var r,i,o,a,s,u,l,c,d,f,h,p,v,g,m,y,b,w,x,k,S,_,E,C,P;return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n={}),i=t.x,o=t.y,a=t.platform,s=t.rects,u=t.elements,l=t.strategy,c=Lx(n,t),d=c.boundary,f=void 0===d?"clippingAncestors":d,h=c.rootBoundary,p=void 0===h?"viewport":h,v=c.elementContext,g=void 0===v?"floating":v,m=c.altBoundary,y=void 0!==m&&m,b=c.padding,w=Xx(void 0===b?0:b),x="floating"===g?"reference":"floating",k=u[y?x:g],e.t0=qx,e.t1=a,e.next=10,null==a.isElement?void 0:a.isElement(k);case 10:if(e.t2=r=e.sent,null==e.t2){e.next=15;break}e.t3=r,e.next=16;break;case 15:e.t3=!0;case 16:if(!e.t3){e.next=20;break}e.t4=k,e.next=26;break;case 20:if(e.t5=k.contextElement,e.t5){e.next=25;break}return e.next=24,null==a.getDocumentElement?void 0:a.getDocumentElement(u.floating);case 24:e.t5=e.sent;case 25:e.t4=e.t5;case 26:return e.t6=e.t4,e.t7=f,e.t8=p,e.t9=l,e.t10={element:e.t6,boundary:e.t7,rootBoundary:e.t8,strategy:e.t9},e.next=33,e.t1.getClippingRect.call(e.t1,e.t10);case 33:return e.t11=e.sent,S=(0,e.t0)(e.t11),_="floating"===g?R(R({},s.floating),{},{x:i,y:o}):s.reference,e.next=38,null==a.getOffsetParent?void 0:a.getOffsetParent(u.floating);case 38:return E=e.sent,e.next=41,null==a.isElement?void 0:a.isElement(E);case 41:if(!e.sent){e.next=50;break}return e.next=44,null==a.getScale?void 0:a.getScale(E);case 44:if(e.t13=e.sent,e.t13){e.next=47;break}e.t13={x:1,y:1};case 47:e.t12=e.t13,e.next=51;break;case 50:e.t12={x:1,y:1};case 51:if(C=e.t12,e.t14=qx,!a.convertOffsetParentRelativeRectToViewportRelativeRect){e.next=59;break}return e.next=56,a.convertOffsetParentRelativeRectToViewportRelativeRect({rect:_,offsetParent:E,strategy:l});case 56:e.t15=e.sent,e.next=60;break;case 59:e.t15=_;case 60:return e.t16=e.t15,P=(0,e.t14)(e.t16),e.abrupt("return",{top:(S.top-P.top+w.top)/C.y,bottom:(P.bottom-S.bottom+w.bottom)/C.y,left:(S.left-P.left+w.left)/C.x,right:(P.right-S.right+w.right)/C.x});case 63:case"end":return e.stop()}}),e)}))),nk.apply(this,arguments)}var rk=function(e){return{name:"arrow",options:e,fn:function(t){return na(ea().mark((function n(){var r,i,o,a,s,u,l,c,d,f,h,p,v,g,m,y,b,w,x,k,S,_,E,C,P,I,T,M,A,j,R,L,D,N,z;return ea().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=t.x,a=t.y,s=t.placement,u=t.rects,l=t.platform,c=t.elements,d=Lx(e,t)||{},f=d.element,h=d.padding,p=void 0===h?0:h,null!=f){n.next=4;break}return n.abrupt("return",{});case 4:return v=Xx(p),g={x:o,y:a},m=Ux(s),y=Bx(m),n.next=10,l.getDimensions(f);case 10:return b=n.sent,x=(w="y"===m)?"top":"left",k=w?"bottom":"right",S=w?"clientHeight":"clientWidth",_=u.reference[y]+u.reference[m]-g[m]-u.floating[y],E=g[m]-u.reference[m],n.next=19,null==l.getOffsetParent?void 0:l.getOffsetParent(f);case 19:if(C=n.sent,P=C?C[S]:0,n.t0=!P,n.t0){n.next=26;break}return n.next=25,null==l.isElement?void 0:l.isElement(C);case 25:n.t0=!n.sent;case 26:if(!n.t0){n.next=28;break}P=c.floating[S]||u.floating[y];case 28:return I=_/2-E/2,T=P/2-b[y]/2-1,M=Px(v[x],T),A=Px(v[k],T),j=M,R=P-b[y]-A,L=P/2-b[y]/2+I,D=Rx(j,L,R),N=null!=Nx(s)&&L!=D&&u.reference[y]/2-(L<j?M:A)-b[y]/2<0,z=N?L<j?j-L:R-L:0,n.abrupt("return",(O(i={},m,g[m]-z),O(i,"data",(O(r={},m,D),O(r,"centerOffset",L-D+z),r)),i));case 39:case"end":return n.stop()}}),n)})))()}}};var ik=function(e){return void 0===e&&(e={}),{name:"flip",options:e,fn:function(t){return na(ea().mark((function n(){var r,i,o,a,s,l,c,d,f,h,p,v,g,m,y,b,w,x,k,S,_,E,C,P,I,T,M,A,O,j,R,L,D,N,z,B;return ea().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.placement,o=t.middlewareData,a=t.rects,s=t.initialPlacement,l=t.platform,c=t.elements,d=Lx(e,t),f=d.mainAxis,h=void 0===f||f,p=d.crossAxis,v=void 0===p||p,g=d.fallbackPlacements,m=d.fallbackStrategy,y=void 0===m?"bestFit":m,b=d.fallbackAxisSideDirection,w=void 0===b?"none":b,x=d.flipAlignment,k=void 0===x||x,S=Jt(d,$x),_=Dx(i),E=Dx(s)===s,n.next=6,null==l.isRTL?void 0:l.isRTL(c.floating);case 6:return C=n.sent,P=g||(E||!k?[Yx(s)]:Vx(s)),g||"none"===w||P.push.apply(P,u(Hx(s,k,w,C))),I=[s].concat(u(P)),n.next=12,tk(t,S);case 12:if(T=n.sent,M=[],A=(null==(r=o.flip)?void 0:r.overflows)||[],h&&M.push(T[_]),v&&(O=Kx(i,a,C),M.push(T[O[0]],T[O[1]])),A=[].concat(u(A),[{placement:i,overflows:M}]),M.every((function(e){return e<=0}))){n.next=35;break}if(L=((null==(j=o.flip)?void 0:j.index)||0)+1,!(D=I[L])){n.next=23;break}return n.abrupt("return",{data:{index:L,overflows:A},reset:{placement:D}});case 23:if(N=null==(R=A.filter((function(e){return e.overflows[0]<=0})).sort((function(e,t){return e.overflows[1]-t.overflows[1]}))[0])?void 0:R.placement,N){n.next=33;break}n.t0=y,n.next="bestFit"===n.t0?28:"initialPlacement"===n.t0?31:33;break;case 28:return B=null==(z=A.map((function(e){return[e.placement,e.overflows.filter((function(e){return e>0})).reduce((function(e,t){return e+t}),0)]})).sort((function(e,t){return e[1]-t[1]}))[0])?void 0:z[0],B&&(N=B),n.abrupt("break",33);case 31:return N=s,n.abrupt("break",33);case 33:if(i===N){n.next=35;break}return n.abrupt("return",{reset:{placement:N}});case 35:return n.abrupt("return",{});case 36:case"end":return n.stop()}}),n)})))()}}};function ok(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function ak(e){return Cx.some((function(t){return e[t]>=0}))}var sk=function(e){return void 0===e&&(e={}),{name:"hide",options:e,fn:function(t){return na(ea().mark((function n(){var r,i,o,a,s,u,l,c,d;return ea().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=t.rects,i=Lx(e,t),o=i.strategy,a=void 0===o?"referenceHidden":o,s=Jt(i,Gx),n.t0=a,n.next="referenceHidden"===n.t0?5:"escaped"===n.t0?10:15;break;case 5:return n.next=7,tk(t,R(R({},s),{},{elementContext:"reference"}));case 7:return u=n.sent,l=ok(u,r.reference),n.abrupt("return",{data:{referenceHiddenOffsets:l,referenceHidden:ak(l)}});case 10:return n.next=12,tk(t,R(R({},s),{},{altBoundary:!0}));case 12:return c=n.sent,d=ok(c,r.floating),n.abrupt("return",{data:{escapedOffsets:d,escaped:ak(d)}});case 15:return n.abrupt("return",{});case 16:case"end":return n.stop()}}),n)})))()}}};function uk(e,t){return lk.apply(this,arguments)}function lk(){return lk=na(ea().mark((function e(t,n){var r,i,o,a,s,u,l,c,d,f,h,p,v,g;return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.placement,i=t.platform,o=t.elements,e.next=3,null==i.isRTL?void 0:i.isRTL(o.floating);case 3:return a=e.sent,s=Dx(r),u=Nx(r),l="y"===Fx(r),c=["left","top"].includes(s)?-1:1,d=a&&l?-1:1,f=Lx(n,t),h="number"===typeof f?{mainAxis:f,crossAxis:0,alignmentAxis:null}:R({mainAxis:0,crossAxis:0,alignmentAxis:null},f),p=h.mainAxis,v=h.crossAxis,g=h.alignmentAxis,u&&"number"===typeof g&&(v="end"===u?-1*g:g),e.abrupt("return",l?{x:v*d,y:p*c}:{x:p*c,y:v*d});case 13:case"end":return e.stop()}}),e)}))),lk.apply(this,arguments)}var ck=function(e){return void 0===e&&(e=0),{name:"offset",options:e,fn:function(t){return na(ea().mark((function n(){var r,i,o;return ea().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.x,i=t.y,n.next=3,uk(t,e);case 3:return o=n.sent,n.abrupt("return",{x:r+o.x,y:i+o.y,data:o});case 5:case"end":return n.stop()}}),n)})))()}}},dk=function(e){return void 0===e&&(e={}),{name:"shift",options:e,fn:function(t){return na(ea().mark((function n(){var r,i,o,a,s,u,l,c,d,f,h,p,v,g,m,y,b,w,x,k,S,_,E,C,P;return ea().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.x,o=t.y,a=t.placement,s=Lx(e,t),u=s.mainAxis,l=void 0===u||u,c=s.crossAxis,d=void 0!==c&&c,f=s.limiter,h=void 0===f?{fn:function(e){return{x:e.x,y:e.y}}}:f,p=Jt(s,Qx),v={x:i,y:o},n.next=5,tk(t,p);case 5:return g=n.sent,m=Fx(Dx(a)),y=zx(m),b=v[y],w=v[m],l&&(x="y"===y?"bottom":"right",k=b+g["y"===y?"top":"left"],S=b-g[x],b=Rx(k,b,S)),d&&(_="y"===m?"bottom":"right",E=w+g["y"===m?"top":"left"],C=w-g[_],w=Rx(E,w,C)),P=h.fn(R(R({},t),{},(O(r={},y,b),O(r,m,w),r))),n.abrupt("return",R(R({},P),{},{data:{x:P.x-i,y:P.y-o}}));case 14:case"end":return n.stop()}}),n)})))()}}},fk=function(e){return void 0===e&&(e={}),{options:e,fn:function(t){var n,r=t.x,i=t.y,o=t.placement,a=t.rects,s=t.middlewareData,u=Lx(e,t),l=u.offset,c=void 0===l?0:l,d=u.mainAxis,f=void 0===d||d,h=u.crossAxis,p=void 0===h||h,v={x:r,y:i},g=Fx(o),m=zx(g),y=v[m],b=v[g],w=Lx(c,t),x="number"===typeof w?{mainAxis:w,crossAxis:0}:R({mainAxis:0,crossAxis:0},w);if(f){var k="y"===m?"height":"width",S=a.reference[m]-a.floating[k]+x.mainAxis,_=a.reference[m]+a.reference[k]-x.mainAxis;y<S?y=S:y>_&&(y=_)}if(p){var E,C,P="y"===m?"width":"height",I=["top","left"].includes(Dx(o)),T=a.reference[g]-a.floating[P]+(I&&(null==(E=s.offset)?void 0:E[g])||0)+(I?0:x.crossAxis),M=a.reference[g]+a.reference[P]+(I?0:(null==(C=s.offset)?void 0:C[g])||0)-(I?x.crossAxis:0);b<T?b=T:b>M&&(b=M)}return O(n={},m,y),O(n,g,b),n}}},hk=function(e){return void 0===e&&(e={}),{name:"size",options:e,fn:function(t){return na(ea().mark((function n(){var r,i,o,a,s,u,l,c,d,f,h,p,v,g,m,y,b,w,x,k,S,_,E,C,P,I,T,M,A;return ea().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.placement,i=t.rects,o=t.platform,a=t.elements,s=Lx(e,t),u=s.apply,l=void 0===u?function(){}:u,c=Jt(s,Jx),n.next=4,tk(t,c);case 4:if(d=n.sent,f=Dx(r),h=Nx(r),p="y"===Fx(r),v=i.floating,g=v.width,m=v.height,"top"!==f&&"bottom"!==f){n.next=28;break}return y=f,n.t0=h,n.next=14,null==o.isRTL?void 0:o.isRTL(a.floating);case 14:if(!n.sent){n.next=18;break}n.t1="start",n.next=19;break;case 18:n.t1="end";case 19:if(n.t2=n.t1,n.t0!==n.t2){n.next=24;break}n.t3="left",n.next=25;break;case 24:n.t3="right";case 25:b=n.t3,n.next=30;break;case 28:b=f,y="end"===h?"top":"bottom";case 30:return w=m-d[y],x=g-d[b],k=!t.middlewareData.shift,S=w,_=x,p?(E=g-d.left-d.right,_=h||k?Px(x,E):E):(C=m-d.top-d.bottom,S=h||k?Px(w,C):C),k&&!h&&(P=Ix(d.left,0),I=Ix(d.right,0),T=Ix(d.top,0),M=Ix(d.bottom,0),p?_=g-2*(0!==P||0!==I?P+I:Ix(d.left,d.right)):S=m-2*(0!==T||0!==M?T+M:Ix(d.top,d.bottom))),n.next=39,l(R(R({},t),{},{availableWidth:_,availableHeight:S}));case 39:return n.next=41,o.getDimensions(a.floating);case 41:if(A=n.sent,g===A.width&&m===A.height){n.next=44;break}return n.abrupt("return",{reset:{rects:!0}});case 44:return n.abrupt("return",{});case 45:case"end":return n.stop()}}),n)})))()}}};function pk(e){return mk(e)?(e.nodeName||"").toLowerCase():"#document"}function vk(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function gk(e){var t;return null==(t=(mk(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function mk(e){return e instanceof Node||e instanceof vk(e).Node}function yk(e){return e instanceof Element||e instanceof vk(e).Element}function bk(e){return e instanceof HTMLElement||e instanceof vk(e).HTMLElement}function wk(e){return"undefined"!==typeof ShadowRoot&&(e instanceof ShadowRoot||e instanceof vk(e).ShadowRoot)}function xk(e){var t=Ck(e),n=t.overflow,r=t.overflowX,i=t.overflowY,o=t.display;return/auto|scroll|overlay|hidden|clip/.test(n+i+r)&&!["inline","contents"].includes(o)}function kk(e){return["table","td","th"].includes(pk(e))}function Sk(e){var t=_k(),n=Ck(e);return"none"!==n.transform||"none"!==n.perspective||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||["transform","perspective","filter"].some((function(e){return(n.willChange||"").includes(e)}))||["paint","layout","strict","content"].some((function(e){return(n.contain||"").includes(e)}))}function _k(){return!("undefined"===typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function Ek(e){return["html","body","#document"].includes(pk(e))}function Ck(e){return vk(e).getComputedStyle(e)}function Pk(e){return yk(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Ik(e){if("html"===pk(e))return e;var t=e.assignedSlot||e.parentNode||wk(e)&&e.host||gk(e);return wk(t)?t.host:t}function Tk(e){var t=Ik(e);return Ek(t)?e.ownerDocument?e.ownerDocument.body:e.body:bk(t)&&xk(t)?t:Tk(t)}function Mk(e,t){var n;void 0===t&&(t=[]);var r=Tk(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),o=vk(r);return i?t.concat(o,o.visualViewport||[],xk(r)?r:[]):t.concat(r,Mk(r))}function Ak(e){var t=Ck(e),n=parseFloat(t.width)||0,r=parseFloat(t.height)||0,i=bk(e),o=i?e.offsetWidth:n,a=i?e.offsetHeight:r,s=Tx(n)!==o||Tx(r)!==a;return s&&(n=o,r=a),{width:n,height:r,$:s}}function Ok(e){return yk(e)?e:e.contextElement}function jk(e){var t=Ok(e);if(!bk(t))return Ax(1);var n=t.getBoundingClientRect(),r=Ak(t),i=r.width,o=r.height,a=r.$,s=(a?Tx(n.width):n.width)/i,u=(a?Tx(n.height):n.height)/o;return s&&Number.isFinite(s)||(s=1),u&&Number.isFinite(u)||(u=1),{x:s,y:u}}var Rk=Ax(0);function Lk(e){var t=vk(e);return _k()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:Rk}function Dk(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1);var i=e.getBoundingClientRect(),o=Ok(e),a=Ax(1);t&&(r?yk(r)&&(a=jk(r)):a=jk(e));var s=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==vk(e))&&t}(o,n,r)?Lk(o):Ax(0),u=(i.left+s.x)/a.x,l=(i.top+s.y)/a.y,c=i.width/a.x,d=i.height/a.y;if(o)for(var f=vk(o),h=r&&yk(r)?vk(r):r,p=f.frameElement;p&&r&&h!==f;){var v=jk(p),g=p.getBoundingClientRect(),m=Ck(p),y=g.left+(p.clientLeft+parseFloat(m.paddingLeft))*v.x,b=g.top+(p.clientTop+parseFloat(m.paddingTop))*v.y;u*=v.x,l*=v.y,c*=v.x,d*=v.y,u+=y,l+=b,p=vk(p).frameElement}return qx({width:c,height:d,x:u,y:l})}function Nk(e){return Dk(gk(e)).left+Pk(e).scrollLeft}function zk(e,t,n){var r;if("viewport"===t)r=function(e,t){var n=vk(e),r=gk(e),i=n.visualViewport,o=r.clientWidth,a=r.clientHeight,s=0,u=0;if(i){o=i.width,a=i.height;var l=_k();(!l||l&&"fixed"===t)&&(s=i.offsetLeft,u=i.offsetTop)}return{width:o,height:a,x:s,y:u}}(e,n);else if("document"===t)r=function(e){var t=gk(e),n=Pk(e),r=e.ownerDocument.body,i=Ix(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=Ix(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight),a=-n.scrollLeft+Nk(e),s=-n.scrollTop;return"rtl"===Ck(r).direction&&(a+=Ix(t.clientWidth,r.clientWidth)-i),{width:i,height:o,x:a,y:s}}(gk(e));else if(yk(t))r=function(e,t){var n=Dk(e,!0,"fixed"===t),r=n.top+e.clientTop,i=n.left+e.clientLeft,o=bk(e)?jk(e):Ax(1);return{width:e.clientWidth*o.x,height:e.clientHeight*o.y,x:i*o.x,y:r*o.y}}(t,n);else{var i=Lk(e);r=R(R({},t),{},{x:t.x-i.x,y:t.y-i.y})}return qx(r)}function Bk(e,t){var n=Ik(e);return!(n===t||!yk(n)||Ek(n))&&("fixed"===Ck(n).position||Bk(n,t))}function Fk(e,t,n){var r=bk(t),i=gk(t),o="fixed"===n,a=Dk(e,!0,o,t),s={scrollLeft:0,scrollTop:0},u=Ax(0);if(r||!r&&!o)if(("body"!==pk(t)||xk(i))&&(s=Pk(t)),r){var l=Dk(t,!0,o,t);u.x=l.x+t.clientLeft,u.y=l.y+t.clientTop}else i&&(u.x=Nk(i));return{x:a.left+s.scrollLeft-u.x,y:a.top+s.scrollTop-u.y,width:a.width,height:a.height}}function Uk(e,t){return bk(e)&&"fixed"!==Ck(e).position?t?t(e):e.offsetParent:null}function Kk(e,t){var n=vk(e);if(!bk(e))return n;for(var r=Uk(e,t);r&&kk(r)&&"static"===Ck(r).position;)r=Uk(r,t);return r&&("html"===pk(r)||"body"===pk(r)&&"static"===Ck(r).position&&!Sk(r))?n:r||function(e){for(var t=Ik(e);bk(t)&&!Ek(t);){if(Sk(t))return t;t=Ik(t)}return null}(e)||n}var Vk=function(){var e=na(ea().mark((function e(t){var n,r,i,o,a;return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.reference,r=t.floating,i=t.strategy,o=this.getOffsetParent||Kk,a=this.getDimensions,e.t0=Fk,e.t1=n,e.next=7,o(r);case 7:return e.t2=e.sent,e.t3=i,e.t4=(0,e.t0)(e.t1,e.t2,e.t3),e.t5=R,e.t6={x:0,y:0},e.next=14,a(r);case 14:return e.t7=e.sent,e.t8=(0,e.t5)(e.t6,e.t7),e.abrupt("return",{reference:e.t4,floating:e.t8});case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();var Wk={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){var t=e.rect,n=e.offsetParent,r=e.strategy,i=bk(n),o=gk(n);if(n===o)return t;var a={scrollLeft:0,scrollTop:0},s=Ax(1),u=Ax(0);if((i||!i&&"fixed"!==r)&&(("body"!==pk(n)||xk(o))&&(a=Pk(n)),bk(n))){var l=Dk(n);s=jk(n),u.x=l.x+n.clientLeft,u.y=l.y+n.clientTop}return{width:t.width*s.x,height:t.height*s.y,x:t.x*s.x-a.scrollLeft*s.x+u.x,y:t.y*s.y-a.scrollTop*s.y+u.y}},getDocumentElement:gk,getClippingRect:function(e){var t=e.element,n=e.boundary,r=e.rootBoundary,i=e.strategy,o="clippingAncestors"===n?function(e,t){var n=t.get(e);if(n)return n;for(var r=Mk(e).filter((function(e){return yk(e)&&"body"!==pk(e)})),i=null,o="fixed"===Ck(e).position,a=o?Ik(e):e;yk(a)&&!Ek(a);){var s=Ck(a),u=Sk(a);u||"fixed"!==s.position||(i=null),(o?!u&&!i:!u&&"static"===s.position&&i&&["absolute","fixed"].includes(i.position)||xk(a)&&!u&&Bk(e,a))?r=r.filter((function(e){return e!==a})):i=s,a=Ik(a)}return t.set(e,r),r}(t,this._c):[].concat(n),a=[].concat(u(o),[r]),s=a[0],l=a.reduce((function(e,n){var r=zk(t,n,i);return e.top=Ix(r.top,e.top),e.right=Px(r.right,e.right),e.bottom=Px(r.bottom,e.bottom),e.left=Ix(r.left,e.left),e}),zk(t,s,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},getOffsetParent:Kk,getElementRects:Vk,getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){return Ak(e)},getScale:jk,isElement:yk,isRTL:function(e){return"rtl"===Ck(e).direction}};function Hk(e,t,n,r){void 0===r&&(r={});var i=r,o=i.ancestorScroll,a=void 0===o||o,s=i.ancestorResize,l=void 0===s||s,c=i.elementResize,d=void 0===c?"function"===typeof ResizeObserver:c,f=i.layoutShift,h=void 0===f?"function"===typeof IntersectionObserver:f,p=i.animationFrame,v=void 0!==p&&p,g=Ok(e),m=a||l?[].concat(u(g?Mk(g):[]),u(Mk(t))):[];m.forEach((function(e){a&&e.addEventListener("scroll",n,{passive:!0}),l&&e.addEventListener("resize",n)}));var y,b=g&&h?function(e,t){var n,r=null,i=gk(e);function o(){clearTimeout(n),r&&r.disconnect(),r=null}return function a(s,u){void 0===s&&(s=!1),void 0===u&&(u=1),o();var l=e.getBoundingClientRect(),c=l.left,d=l.top,f=l.width,h=l.height;if(s||t(),f&&h){var p={rootMargin:-Mx(d)+"px "+-Mx(i.clientWidth-(c+f))+"px "+-Mx(i.clientHeight-(d+h))+"px "+-Mx(c)+"px",threshold:Ix(0,Px(1,u))||1},v=!0;try{r=new IntersectionObserver(g,R(R({},p),{},{root:i.ownerDocument}))}catch(kM){r=new IntersectionObserver(g,p)}r.observe(e)}function g(e){var t=e[0].intersectionRatio;if(t!==u){if(!v)return a();t?a(!1,t):n=setTimeout((function(){a(!1,1e-7)}),100)}v=!1}}(!0),o}(g,n):null,w=-1,x=null;d&&(x=new ResizeObserver((function(e){var r=L(e,1)[0];r&&r.target===g&&x&&(x.unobserve(t),cancelAnimationFrame(w),w=requestAnimationFrame((function(){x&&x.observe(t)}))),n()})),g&&!v&&x.observe(g),x.observe(t));var k=v?Dk(e):null;return v&&function t(){var r=Dk(e);!k||r.x===k.x&&r.y===k.y&&r.width===k.width&&r.height===k.height||n();k=r,y=requestAnimationFrame(t)}(),n(),function(){m.forEach((function(e){a&&e.removeEventListener("scroll",n),l&&e.removeEventListener("resize",n)})),b&&b(),x&&x.disconnect(),x=null,v&&cancelAnimationFrame(y)}}var Yk=function(e,t,n){var r=new Map,i=R({platform:Wk},n),o=R(R({},i.platform),{},{_c:r});return ek(e,t,R(R({},i),{},{platform:o}))},Xk=function(e){return{name:"arrow",options:e,fn:function(t){var n,r="function"===typeof e?e(t):e,i=r.element,o=r.padding;return i&&(n=i,{}.hasOwnProperty.call(n,"current"))?null!=i.current?rk({element:i.current,padding:o}).fn(t):{}:i?rk({element:i,padding:o}).fn(t):{}}}},qk="undefined"!==typeof document?t.useLayoutEffect:t.useEffect;function $k(e,t){if(e===t)return!0;if(typeof e!==typeof t)return!1;if("function"===typeof e&&e.toString()===t.toString())return!0;var n,r,i;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if((n=e.length)!=t.length)return!1;for(r=n;0!==r--;)if(!$k(e[r],t[r]))return!1;return!0}if((n=(i=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(r=n;0!==r--;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;0!==r--;){var o=i[r];if(("_owner"!==o||!e.$$typeof)&&!$k(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function Gk(e){return"undefined"===typeof window?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Qk(e,t){var n=Gk(e);return Math.round(t*n)/n}function Jk(e){var n=t.useRef(e);return qk((function(){n.current=e})),n}function Zk(e){var n=L((0,t.useState)(void 0),2),r=n[0],i=n[1];return Iy((function(){if(e){i({width:e.offsetWidth,height:e.offsetHeight});var t=new ResizeObserver((function(t){if(Array.isArray(t)&&t.length){var n,r,o=t[0];if("borderBoxSize"in o){var a=o.borderBoxSize,s=Array.isArray(a)?a[0]:a;n=s.inlineSize,r=s.blockSize}else n=e.offsetWidth,r=e.offsetHeight;i({width:n,height:r})}}));return t.observe(e,{box:"border-box"}),function(){return t.unobserve(e)}}i(void 0)}),[e]),r}var eS=["__scopePopper","virtualRef"],tS=["__scopePopper","side","sideOffset","align","alignOffset","arrowPadding","collisionBoundary","collisionPadding","sticky","hideWhenDetached","avoidCollisions","onPlaced"],nS="Popper",rS=L(Cy(nS),2),iS=rS[0],oS=rS[1],aS=L(iS(nS),2),sS=aS[0],uS=aS[1],lS=function(e){var n=e.__scopePopper,r=e.children,i=L((0,t.useState)(null),2),o=i[0],a=i[1];return(0,t.createElement)(sS,{scope:n,anchor:o,onAnchorChange:a},r)},cS="PopperAnchor",dS=(0,t.forwardRef)((function(e,n){var r=e.__scopePopper,i=e.virtualRef,o=Jt(e,eS),a=uS(cS,r),s=(0,t.useRef)(null),u=Sy(n,s);return(0,t.useEffect)((function(){a.onAnchorChange((null===i||void 0===i?void 0:i.current)||s.current)})),i?null:(0,t.createElement)(Ky.div,wy({},o,{ref:u}))})),fS="PopperContent",hS=L(iS(fS),2),pS=hS[0],vS=(hS[1],(0,t.forwardRef)((function(e,n){var r,i,o,a,s,u,l,c,d=e.__scopePopper,f=e.side,h=void 0===f?"bottom":f,p=e.sideOffset,v=void 0===p?0:p,g=e.align,m=void 0===g?"center":g,y=e.alignOffset,b=void 0===y?0:y,w=e.arrowPadding,x=void 0===w?0:w,k=e.collisionBoundary,S=void 0===k?[]:k,_=e.collisionPadding,E=void 0===_?0:_,C=e.sticky,P=void 0===C?"partial":C,I=e.hideWhenDetached,T=void 0!==I&&I,M=e.avoidCollisions,A=void 0===M||M,j=e.onPlaced,D=Jt(e,tS),N=uS(fS,d),z=L((0,t.useState)(null),2),B=z[0],F=z[1],U=Sy(n,(function(e){return F(e)})),K=L((0,t.useState)(null),2),V=K[0],W=K[1],H=Zk(V),Y=null!==(r=null===H||void 0===H?void 0:H.width)&&void 0!==r?r:0,X=null!==(i=null===H||void 0===H?void 0:H.height)&&void 0!==i?i:0,q=h+("center"!==m?"-"+m:""),$="number"===typeof E?E:R({top:0,right:0,bottom:0,left:0},E),G=Array.isArray(S)?S:[S],Q=G.length>0,J={padding:$,boundary:G.filter(gS),altBoundary:Q},Z=function(e){void 0===e&&(e={});var n=e,r=n.placement,i=void 0===r?"bottom":r,o=n.strategy,a=void 0===o?"absolute":o,s=n.middleware,u=void 0===s?[]:s,l=n.platform,c=n.elements,d=void 0===c?{}:c,f=d.reference,h=d.floating,p=n.transform,v=void 0===p||p,g=n.whileElementsMounted,m=n.open,y=L(t.useState({x:0,y:0,strategy:a,placement:i,middlewareData:{},isPositioned:!1}),2),b=y[0],w=y[1],x=L(t.useState(u),2),k=x[0],S=x[1];$k(k,u)||S(u);var _=L(t.useState(null),2),E=_[0],C=_[1],P=L(t.useState(null),2),I=P[0],T=P[1],M=t.useCallback((function(e){e!=D.current&&(D.current=e,C(e))}),[C]),A=t.useCallback((function(e){e!==N.current&&(N.current=e,T(e))}),[T]),O=f||E,j=h||I,D=t.useRef(null),N=t.useRef(null),z=t.useRef(b),B=Jk(g),F=Jk(l),U=t.useCallback((function(){if(D.current&&N.current){var e={placement:i,strategy:a,middleware:k};F.current&&(e.platform=F.current),Yk(D.current,N.current,e).then((function(e){var t=R(R({},e),{},{isPositioned:!0});K.current&&!$k(z.current,t)&&(z.current=t,Ry.flushSync((function(){w(t)})))}))}}),[k,i,a,F]);qk((function(){!1===m&&z.current.isPositioned&&(z.current.isPositioned=!1,w((function(e){return R(R({},e),{},{isPositioned:!1})})))}),[m]);var K=t.useRef(!1);qk((function(){return K.current=!0,function(){K.current=!1}}),[]),qk((function(){if(O&&(D.current=O),j&&(N.current=j),O&&j){if(B.current)return B.current(O,j,U);U()}}),[O,j,U,B]);var V=t.useMemo((function(){return{reference:D,floating:N,setReference:M,setFloating:A}}),[M,A]),W=t.useMemo((function(){return{reference:O,floating:j}}),[O,j]),H=t.useMemo((function(){var e={position:a,left:0,top:0};if(!W.floating)return e;var t=Qk(W.floating,b.x),n=Qk(W.floating,b.y);return v?R(R({},e),{},{transform:"translate("+t+"px, "+n+"px)"},Gk(W.floating)>=1.5&&{willChange:"transform"}):{position:a,left:t,top:n}}),[a,v,W.floating,b.x,b.y]);return t.useMemo((function(){return R(R({},b),{},{update:U,refs:V,elements:W,floatingStyles:H})}),[b,U,V,W,H])}({strategy:"fixed",placement:q,whileElementsMounted:Hk,elements:{reference:N.anchor},middleware:[ck({mainAxis:v+X,alignmentAxis:b}),A&&dk(R({mainAxis:!0,crossAxis:!1,limiter:"partial"===P?fk():void 0},J)),A&&ik(R({},J)),hk(R(R({},J),{},{apply:function(e){var t=e.elements,n=e.rects,r=e.availableWidth,i=e.availableHeight,o=n.reference,a=o.width,s=o.height,u=t.floating.style;u.setProperty("--radix-popper-available-width","".concat(r,"px")),u.setProperty("--radix-popper-available-height","".concat(i,"px")),u.setProperty("--radix-popper-anchor-width","".concat(a,"px")),u.setProperty("--radix-popper-anchor-height","".concat(s,"px"))}})),V&&Xk({element:V,padding:x}),mS({arrowWidth:Y,arrowHeight:X}),T&&sk({strategy:"referenceHidden"})]}),ee=Z.refs,te=Z.floatingStyles,ne=Z.placement,re=Z.isPositioned,ie=Z.middlewareData,oe=L(yS(ne),2),ae=oe[0],se=oe[1],ue=Oy(j);Iy((function(){re&&(null===ue||void 0===ue||ue())}),[re,ue]);var le=null===(o=ie.arrow)||void 0===o?void 0:o.x,ce=null===(a=ie.arrow)||void 0===a?void 0:a.y,de=0!==(null===(s=ie.arrow)||void 0===s?void 0:s.centerOffset),fe=L((0,t.useState)(),2),he=fe[0],pe=fe[1];return Iy((function(){B&&pe(window.getComputedStyle(B).zIndex)}),[B]),(0,t.createElement)("div",{ref:ee.setFloating,"data-radix-popper-content-wrapper":"",style:R(R({},te),{},O({transform:re?te.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:he},"--radix-popper-transform-origin",[null===(u=ie.transformOrigin)||void 0===u?void 0:u.x,null===(l=ie.transformOrigin)||void 0===l?void 0:l.y].join(" "))),dir:e.dir},(0,t.createElement)(pS,{scope:d,placedSide:ae,onArrowChange:W,arrowX:le,arrowY:ce,shouldHideArrow:de},(0,t.createElement)(Ky.div,wy({"data-side":ae,"data-align":se},D,{ref:U,style:R(R({},D.style),{},{animation:re?void 0:"none",opacity:null!==(c=ie.hide)&&void 0!==c&&c.referenceHidden?0:void 0})}))))})));function gS(e){return null!==e}var mS=function(e){return{name:"transformOrigin",options:e,fn:function(t){var n,r,i,o,a,s=t.placement,u=t.rects,l=t.middlewareData,c=0!==(null===(n=l.arrow)||void 0===n?void 0:n.centerOffset),d=c?0:e.arrowWidth,f=c?0:e.arrowHeight,h=L(yS(s),2),p=h[0],v={start:"0%",center:"50%",end:"100%"}[h[1]],g=(null!==(r=null===(i=l.arrow)||void 0===i?void 0:i.x)&&void 0!==r?r:0)+d/2,m=(null!==(o=null===(a=l.arrow)||void 0===a?void 0:a.y)&&void 0!==o?o:0)+f/2,y="",b="";return"bottom"===p?(y=c?v:"".concat(g,"px"),b="".concat(-f,"px")):"top"===p?(y=c?v:"".concat(g,"px"),b="".concat(u.floating.height+f,"px")):"right"===p?(y="".concat(-f,"px"),b=c?v:"".concat(m,"px")):"left"===p&&(y="".concat(u.floating.width+f,"px"),b=c?v:"".concat(m,"px")),{data:{x:y,y:b}}}}};function yS(e){var t=L(e.split("-"),2),n=t[0],r=t[1];return[n,void 0===r?"center":r]}var bS=lS,wS=dS,xS=vS,kS=["__scopeRovingFocusGroup","orientation","loop","dir","currentTabStopId","defaultCurrentTabStopId","onCurrentTabStopIdChange","onEntryFocus"],SS=["__scopeRovingFocusGroup","focusable","active","tabStopId"],_S="rovingFocusGroup.onEntryFocus",ES={bubbles:!1,cancelable:!0},CS="RovingFocusGroup",PS=L(Sx(CS),3),IS=PS[0],TS=PS[1],MS=L(Cy(CS,[PS[2]]),2),AS=MS[0],OS=MS[1],jS=L(AS(CS),2),RS=jS[0],LS=jS[1],DS=(0,t.forwardRef)((function(e,n){return(0,t.createElement)(IS.Provider,{scope:e.__scopeRovingFocusGroup},(0,t.createElement)(IS.Slot,{scope:e.__scopeRovingFocusGroup},(0,t.createElement)(NS,wy({},e,{ref:n}))))})),NS=(0,t.forwardRef)((function(e,n){var r=e.__scopeRovingFocusGroup,i=e.orientation,o=e.loop,a=void 0!==o&&o,s=e.dir,l=e.currentTabStopId,c=e.defaultCurrentTabStopId,d=e.onCurrentTabStopIdChange,f=e.onEntryFocus,h=Jt(e,kS),p=(0,t.useRef)(null),v=Sy(n,p),g=Ex(s),m=L(jy({prop:l,defaultProp:c,onChange:d}),2),y=m[0],b=void 0===y?null:y,w=m[1],x=L((0,t.useState)(!1),2),k=x[0],S=x[1],_=Oy(f),E=TS(r),C=(0,t.useRef)(!1),P=L((0,t.useState)(0),2),I=P[0],T=P[1];return(0,t.useEffect)((function(){var e=p.current;if(e)return e.addEventListener(_S,_),function(){return e.removeEventListener(_S,_)}}),[_]),(0,t.createElement)(RS,{scope:r,orientation:i,dir:g,loop:a,currentTabStopId:b,onItemFocus:(0,t.useCallback)((function(e){return w(e)}),[w]),onItemShiftTab:(0,t.useCallback)((function(){return S(!0)}),[]),onFocusableItemAdd:(0,t.useCallback)((function(){return T((function(e){return e+1}))}),[]),onFocusableItemRemove:(0,t.useCallback)((function(){return T((function(e){return e-1}))}),[])},(0,t.createElement)(Ky.div,wy({tabIndex:k||0===I?-1:0,"data-orientation":i},h,{ref:v,style:R({outline:"none"},e.style),onMouseDown:xy(e.onMouseDown,(function(){C.current=!0})),onFocus:xy(e.onFocus,(function(e){var t=!C.current;if(e.target===e.currentTarget&&t&&!k){var n=new CustomEvent(_S,ES);if(e.currentTarget.dispatchEvent(n),!n.defaultPrevented){var r=E().filter((function(e){return e.focusable}));US([r.find((function(e){return e.active})),r.find((function(e){return e.id===b}))].concat(u(r)).filter(Boolean).map((function(e){return e.ref.current})))}}C.current=!1})),onBlur:xy(e.onBlur,(function(){return S(!1)}))})))})),zS="RovingFocusGroupItem",BS=(0,t.forwardRef)((function(e,n){var r=e.__scopeRovingFocusGroup,i=e.focusable,o=void 0===i||i,a=e.active,s=void 0!==a&&a,u=e.tabStopId,l=Jt(e,SS),c=Ay(),d=u||c,f=LS(zS,r),h=f.currentTabStopId===d,p=TS(r),v=f.onFocusableItemAdd,g=f.onFocusableItemRemove;return(0,t.useEffect)((function(){if(o)return v(),function(){return g()}}),[o,v,g]),(0,t.createElement)(IS.ItemSlot,{scope:r,id:d,focusable:o,active:s},(0,t.createElement)(Ky.span,wy({tabIndex:h?0:-1,"data-orientation":f.orientation},l,{ref:n,onMouseDown:xy(e.onMouseDown,(function(e){o?f.onItemFocus(d):e.preventDefault()})),onFocus:xy(e.onFocus,(function(){return f.onItemFocus(d)})),onKeyDown:xy(e.onKeyDown,(function(e){if("Tab"===e.key&&e.shiftKey)f.onItemShiftTab();else if(e.target===e.currentTarget){var t=function(e,t,n){var r=function(e,t){return"rtl"!==t?e:"ArrowLeft"===e?"ArrowRight":"ArrowRight"===e?"ArrowLeft":e}(e.key,n);return"vertical"===t&&["ArrowLeft","ArrowRight"].includes(r)||"horizontal"===t&&["ArrowUp","ArrowDown"].includes(r)?void 0:FS[r]}(e,f.orientation,f.dir);if(void 0!==t){e.preventDefault();var n=p().filter((function(e){return e.focusable})).map((function(e){return e.ref.current}));if("last"===t)n.reverse();else if("prev"===t||"next"===t){"prev"===t&&n.reverse();var r=n.indexOf(e.currentTarget);n=f.loop?function(e,t){return e.map((function(n,r){return e[(t+r)%e.length]}))}(n,r+1):n.slice(r+1)}setTimeout((function(){return US(n)}))}}}))})))})),FS={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function US(e){var t,n=document.activeElement,r=X(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(i===n)return;if(i.focus(),document.activeElement!==n)return}}catch(YK){r.e(YK)}finally{r.f()}}var KS=DS,VS=BS,WS=["__scopeMenu"],HS=["forceMount"],YS=["__scopeMenu","loop","trapFocus","onOpenAutoFocus","onCloseAutoFocus","disableOutsidePointerEvents","onEntryFocus","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss","disableOutsideScroll"],XS=["__scopeMenu"],qS=["disabled","onSelect"],$S=["__scopeMenu","disabled","textValue"],GS=["checked","onCheckedChange"],QS=["__scopeMenu","forceMount"],JS=["forceMount"],ZS=["Enter"," "],e_=["ArrowUp","PageDown","End"],t_=[].concat(["ArrowDown","PageUp","Home"],e_),n_={ltr:[].concat(ZS,["ArrowRight"]),rtl:[].concat(ZS,["ArrowLeft"])},r_={ltr:["ArrowLeft"],rtl:["ArrowRight"]},i_="Menu",o_=L(Sx(i_),3),a_=o_[0],s_=o_[1],u_=L(Cy(i_,[o_[2],oS,OS]),2),l_=u_[0],c_=u_[1],d_=oS(),f_=OS(),h_=L(l_(i_),2),p_=h_[0],v_=h_[1],g_=L(l_(i_),2),m_=g_[0],y_=g_[1],b_=function(e){var n=e.__scopeMenu,r=e.open,i=void 0!==r&&r,o=e.children,a=e.dir,s=e.onOpenChange,u=e.modal,l=void 0===u||u,c=d_(n),d=L((0,t.useState)(null),2),f=d[0],h=d[1],p=(0,t.useRef)(!1),v=Oy(s),g=Ex(a);return(0,t.useEffect)((function(){var e=function(){p.current=!0,document.addEventListener("pointerdown",t,{capture:!0,once:!0}),document.addEventListener("pointermove",t,{capture:!0,once:!0})},t=function(){return p.current=!1};return document.addEventListener("keydown",e,{capture:!0}),function(){document.removeEventListener("keydown",e,{capture:!0}),document.removeEventListener("pointerdown",t,{capture:!0}),document.removeEventListener("pointermove",t,{capture:!0})}}),[]),(0,t.createElement)(bS,c,(0,t.createElement)(p_,{scope:n,open:i,onOpenChange:v,content:f,onContentChange:h},(0,t.createElement)(m_,{scope:n,onClose:(0,t.useCallback)((function(){return v(!1)}),[v]),isUsingKeyboardRef:p,dir:g,modal:l},o)))},w_=(0,t.forwardRef)((function(e,n){var r=e.__scopeMenu,i=Jt(e,WS),o=d_(r);return(0,t.createElement)(wS,wy({},o,i,{ref:n}))})),x_="MenuPortal",k_=L(l_(x_,{forceMount:void 0}),2),S_=k_[0],__=k_[1],E_=function(e){var n=e.__scopeMenu,r=e.forceMount,i=e.children,o=e.container,a=v_(x_,n);return(0,t.createElement)(S_,{scope:n,forceMount:r},(0,t.createElement)(vb,{present:r||a.open},(0,t.createElement)(pb,{asChild:!0,container:o},i)))},C_="MenuContent",P_=L(l_(C_),2),I_=P_[0],T_=P_[1],M_=(0,t.forwardRef)((function(e,n){var r=__(C_,e.__scopeMenu),i=e.forceMount,o=void 0===i?r.forceMount:i,a=Jt(e,HS),s=v_(C_,e.__scopeMenu),u=y_(C_,e.__scopeMenu);return(0,t.createElement)(a_.Provider,{scope:e.__scopeMenu},(0,t.createElement)(vb,{present:o||s.open},(0,t.createElement)(a_.Slot,{scope:e.__scopeMenu},u.modal?(0,t.createElement)(A_,wy({},a,{ref:n})):(0,t.createElement)(O_,wy({},a,{ref:n})))))})),A_=(0,t.forwardRef)((function(e,n){var r=v_(C_,e.__scopeMenu),i=(0,t.useRef)(null),o=Sy(n,i);return(0,t.useEffect)((function(){var e=i.current;if(e)return fw(e)}),[]),(0,t.createElement)(j_,wy({},e,{ref:o,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:xy(e.onFocusOutside,(function(e){return e.preventDefault()}),{checkForDefaultPrevented:!1}),onDismiss:function(){return r.onOpenChange(!1)}}))})),O_=(0,t.forwardRef)((function(e,n){var r=v_(C_,e.__scopeMenu);return(0,t.createElement)(j_,wy({},e,{ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:function(){return r.onOpenChange(!1)}}))})),j_=(0,t.forwardRef)((function(e,n){var r=e.__scopeMenu,i=e.loop,o=void 0!==i&&i,a=e.trapFocus,s=e.onOpenAutoFocus,u=e.onCloseAutoFocus,l=e.disableOutsidePointerEvents,c=e.onEntryFocus,d=e.onEscapeKeyDown,f=e.onPointerDownOutside,h=e.onFocusOutside,p=e.onInteractOutside,v=e.onDismiss,g=e.disableOutsideScroll,m=Jt(e,YS),y=v_(C_,r),b=y_(C_,r),w=d_(r),x=f_(r),k=s_(r),S=L((0,t.useState)(null),2),_=S[0],E=S[1],C=(0,t.useRef)(null),P=Sy(n,C,y.onContentChange),I=(0,t.useRef)(0),T=(0,t.useRef)(""),M=(0,t.useRef)(0),A=(0,t.useRef)(null),O=(0,t.useRef)("right"),j=(0,t.useRef)(0),D=g?iw:t.Fragment,N=g?{as:Ny,allowPinchZoom:!0}:void 0,z=function(e){var t,n,r=T.current+e,i=k().filter((function(e){return!e.disabled})),o=document.activeElement,a=null===(t=i.find((function(e){return e.ref.current===o})))||void 0===t?void 0:t.textValue,s=function(e,t,n){var r=t.length>1&&Array.from(t).every((function(e){return e===t[0]})),i=r?t[0]:t,o=n?e.indexOf(n):-1,a=function(e,t){return e.map((function(n,r){return e[(t+r)%e.length]}))}(e,Math.max(o,0));1===i.length&&(a=a.filter((function(e){return e!==n})));var s=a.find((function(e){return e.toLowerCase().startsWith(i.toLowerCase())}));return s!==n?s:void 0}(i.map((function(e){return e.textValue})),r,a),u=null===(n=i.find((function(e){return e.textValue===s})))||void 0===n?void 0:n.ref.current;!function e(t){T.current=t,window.clearTimeout(I.current),""!==t&&(I.current=window.setTimeout((function(){return e("")}),1e3))}(r),u&&setTimeout((function(){return u.focus()}))};(0,t.useEffect)((function(){return function(){return window.clearTimeout(I.current)}}),[]),yb();var B=(0,t.useCallback)((function(e){var t,n;return O.current===(null===(t=A.current)||void 0===t?void 0:t.side)&&function(e,t){if(!t)return!1;var n={x:e.clientX,y:e.clientY};return function(e,t){for(var n=e.x,r=e.y,i=!1,o=0,a=t.length-1;o<t.length;a=o++){var s=t[o].x,u=t[o].y,l=t[a].x,c=t[a].y;u>r!==c>r&&n<(l-s)*(r-u)/(c-u)+s&&(i=!i)}return i}(n,t)}(e,null===(n=A.current)||void 0===n?void 0:n.area)}),[]);return(0,t.createElement)(I_,{scope:r,searchRef:T,onItemEnter:(0,t.useCallback)((function(e){B(e)&&e.preventDefault()}),[B]),onItemLeave:(0,t.useCallback)((function(e){var t;B(e)||(null===(t=C.current)||void 0===t||t.focus(),E(null))}),[B]),onTriggerLeave:(0,t.useCallback)((function(e){B(e)&&e.preventDefault()}),[B]),pointerGraceTimerRef:M,onPointerGraceIntentChange:(0,t.useCallback)((function(e){A.current=e}),[])},(0,t.createElement)(D,N,(0,t.createElement)(ab,{asChild:!0,trapped:a,onMountAutoFocus:xy(s,(function(e){var t;e.preventDefault(),null===(t=C.current)||void 0===t||t.focus()})),onUnmountAutoFocus:u},(0,t.createElement)(Gy,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:d,onPointerDownOutside:f,onFocusOutside:h,onInteractOutside:p,onDismiss:v},(0,t.createElement)(KS,wy({asChild:!0},x,{dir:b.dir,orientation:"vertical",loop:o,currentTabStopId:_,onCurrentTabStopIdChange:E,onEntryFocus:xy(c,(function(e){b.isUsingKeyboardRef.current||e.preventDefault()}))}),(0,t.createElement)(xS,wy({role:"menu","aria-orientation":"vertical","data-state":nE(y.open),"data-radix-menu-content":"",dir:b.dir},w,m,{ref:P,style:R({outline:"none"},m.style),onKeyDown:xy(m.onKeyDown,(function(e){var t=e.target.closest("[data-radix-menu-content]")===e.currentTarget,n=e.ctrlKey||e.altKey||e.metaKey,r=1===e.key.length;t&&("Tab"===e.key&&e.preventDefault(),!n&&r&&z(e.key));var i=C.current;if(e.target===i&&t_.includes(e.key)){e.preventDefault();var o=k().filter((function(e){return!e.disabled})).map((function(e){return e.ref.current}));e_.includes(e.key)&&o.reverse(),function(e){var t,n=document.activeElement,r=X(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(i===n)return;if(i.focus(),document.activeElement!==n)return}}catch(YK){r.e(YK)}finally{r.f()}}(o)}})),onBlur:xy(e.onBlur,(function(e){e.currentTarget.contains(e.target)||(window.clearTimeout(I.current),T.current="")})),onPointerMove:xy(e.onPointerMove,oE((function(e){var t=e.target,n=j.current!==e.clientX;if(e.currentTarget.contains(t)&&n){var r=e.clientX>j.current?"right":"left";O.current=r,j.current=e.clientX}})))})))))))})),R_=(0,t.forwardRef)((function(e,n){e.__scopeMenu;var r=Jt(e,XS);return(0,t.createElement)(Ky.div,wy({role:"group"},r,{ref:n}))})),L_="MenuItem",D_="menu.itemSelect",N_=(0,t.forwardRef)((function(e,n){var r=e.disabled,i=void 0!==r&&r,o=e.onSelect,a=Jt(e,qS),s=(0,t.useRef)(null),u=y_(L_,e.__scopeMenu),l=T_(L_,e.__scopeMenu),c=Sy(n,s),d=(0,t.useRef)(!1);return(0,t.createElement)(z_,wy({},a,{ref:c,disabled:i,onClick:xy(e.onClick,(function(){var e=s.current;if(!i&&e){var t=new CustomEvent(D_,{bubbles:!0,cancelable:!0});e.addEventListener(D_,(function(e){return null===o||void 0===o?void 0:o(e)}),{once:!0}),Vy(e,t),t.defaultPrevented?d.current=!1:u.onClose()}})),onPointerDown:function(t){var n;null===(n=e.onPointerDown)||void 0===n||n.call(e,t),d.current=!0},onPointerUp:xy(e.onPointerUp,(function(e){var t;d.current||null===(t=e.currentTarget)||void 0===t||t.click()})),onKeyDown:xy(e.onKeyDown,(function(e){var t=""!==l.searchRef.current;i||t&&" "===e.key||ZS.includes(e.key)&&(e.currentTarget.click(),e.preventDefault())}))}))})),z_=(0,t.forwardRef)((function(e,n){var r=e.__scopeMenu,i=e.disabled,o=void 0!==i&&i,a=e.textValue,s=Jt(e,$S),u=T_(L_,r),l=f_(r),c=(0,t.useRef)(null),d=Sy(n,c),f=L((0,t.useState)(!1),2),h=f[0],p=f[1],v=L((0,t.useState)(""),2),g=v[0],m=v[1];return(0,t.useEffect)((function(){var e,t=c.current;t&&m((null!==(e=t.textContent)&&void 0!==e?e:"").trim())}),[s.children]),(0,t.createElement)(a_.ItemSlot,{scope:r,disabled:o,textValue:null!==a&&void 0!==a?a:g},(0,t.createElement)(VS,wy({asChild:!0},l,{focusable:!o}),(0,t.createElement)(Ky.div,wy({role:"menuitem","data-highlighted":h?"":void 0,"aria-disabled":o||void 0,"data-disabled":o?"":void 0},s,{ref:d,onPointerMove:xy(e.onPointerMove,oE((function(e){o?u.onItemLeave(e):(u.onItemEnter(e),e.defaultPrevented||e.currentTarget.focus())}))),onPointerLeave:xy(e.onPointerLeave,oE((function(e){return u.onItemLeave(e)}))),onFocus:xy(e.onFocus,(function(){return p(!0)})),onBlur:xy(e.onBlur,(function(){return p(!1)}))}))))})),B_=(0,t.forwardRef)((function(e,n){var r=e.checked,i=void 0!==r&&r,o=e.onCheckedChange,a=Jt(e,GS);return(0,t.createElement)(W_,{scope:e.__scopeMenu,checked:i},(0,t.createElement)(N_,wy({role:"menuitemcheckbox","aria-checked":rE(i)?"mixed":i},a,{ref:n,"data-state":iE(i),onSelect:xy(a.onSelect,(function(){return null===o||void 0===o?void 0:o(!!rE(i)||!i)}),{checkForDefaultPrevented:!1})})))})),F_="MenuRadioGroup",U_=L(l_(F_,{value:void 0,onValueChange:function(){}}),2),K_=(U_[0],U_[1],"MenuItemIndicator"),V_=L(l_(K_,{checked:!1}),2),W_=V_[0],H_=V_[1],Y_=(0,t.forwardRef)((function(e,n){var r=e.__scopeMenu,i=e.forceMount,o=Jt(e,QS),a=H_(K_,r);return(0,t.createElement)(vb,{present:i||rE(a.checked)||!0===a.checked},(0,t.createElement)(Ky.span,wy({},o,{ref:n,"data-state":iE(a.checked)})))})),X_="MenuSub",q_=L(l_(X_),2),$_=q_[0],G_=q_[1],Q_=function(e){var n=e.__scopeMenu,r=e.children,i=e.open,o=void 0!==i&&i,a=e.onOpenChange,s=v_(X_,n),u=d_(n),l=L((0,t.useState)(null),2),c=l[0],d=l[1],f=L((0,t.useState)(null),2),h=f[0],p=f[1],v=Oy(a);return(0,t.useEffect)((function(){return!1===s.open&&v(!1),function(){return v(!1)}}),[s.open,v]),(0,t.createElement)(bS,u,(0,t.createElement)(p_,{scope:n,open:o,onOpenChange:v,content:h,onContentChange:p},(0,t.createElement)($_,{scope:n,contentId:Ay(),triggerId:Ay(),trigger:c,onTriggerChange:d},r)))},J_="MenuSubTrigger",Z_=(0,t.forwardRef)((function(e,n){var r=v_(J_,e.__scopeMenu),i=y_(J_,e.__scopeMenu),o=G_(J_,e.__scopeMenu),a=T_(J_,e.__scopeMenu),s=(0,t.useRef)(null),u=a.pointerGraceTimerRef,l=a.onPointerGraceIntentChange,c={__scopeMenu:e.__scopeMenu},d=(0,t.useCallback)((function(){s.current&&window.clearTimeout(s.current),s.current=null}),[]);return(0,t.useEffect)((function(){return d}),[d]),(0,t.useEffect)((function(){var e=u.current;return function(){window.clearTimeout(e),l(null)}}),[u,l]),(0,t.createElement)(w_,wy({asChild:!0},c),(0,t.createElement)(z_,wy({id:o.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":o.contentId,"data-state":nE(r.open)},e,{ref:ky(n,o.onTriggerChange),onClick:function(t){var n;null===(n=e.onClick)||void 0===n||n.call(e,t),e.disabled||t.defaultPrevented||(t.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:xy(e.onPointerMove,oE((function(t){a.onItemEnter(t),t.defaultPrevented||e.disabled||r.open||s.current||(a.onPointerGraceIntentChange(null),s.current=window.setTimeout((function(){r.onOpenChange(!0),d()}),100))}))),onPointerLeave:xy(e.onPointerLeave,oE((function(e){var t;d();var n=null===(t=r.content)||void 0===t?void 0:t.getBoundingClientRect();if(n){var i,o=null===(i=r.content)||void 0===i?void 0:i.dataset.side,s="right"===o,l=s?-5:5,c=n[s?"left":"right"],f=n[s?"right":"left"];a.onPointerGraceIntentChange({area:[{x:e.clientX+l,y:e.clientY},{x:c,y:n.top},{x:f,y:n.top},{x:f,y:n.bottom},{x:c,y:n.bottom}],side:o}),window.clearTimeout(u.current),u.current=window.setTimeout((function(){return a.onPointerGraceIntentChange(null)}),300)}else{if(a.onTriggerLeave(e),e.defaultPrevented)return;a.onPointerGraceIntentChange(null)}}))),onKeyDown:xy(e.onKeyDown,(function(t){var n,o=""!==a.searchRef.current;e.disabled||o&&" "===t.key||n_[i.dir].includes(t.key)&&(r.onOpenChange(!0),null===(n=r.content)||void 0===n||n.focus(),t.preventDefault())}))})))})),eE="MenuSubContent",tE=(0,t.forwardRef)((function(e,n){var r=__(C_,e.__scopeMenu),i=e.forceMount,o=void 0===i?r.forceMount:i,a=Jt(e,JS),s=v_(C_,e.__scopeMenu),u=y_(C_,e.__scopeMenu),l=G_(eE,e.__scopeMenu),c=(0,t.useRef)(null),d=Sy(n,c);return(0,t.createElement)(a_.Provider,{scope:e.__scopeMenu},(0,t.createElement)(vb,{present:o||s.open},(0,t.createElement)(a_.Slot,{scope:e.__scopeMenu},(0,t.createElement)(j_,wy({id:l.contentId,"aria-labelledby":l.triggerId},a,{ref:d,align:"start",side:"rtl"===u.dir?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:function(e){var t;u.isUsingKeyboardRef.current&&(null===(t=c.current)||void 0===t||t.focus()),e.preventDefault()},onCloseAutoFocus:function(e){return e.preventDefault()},onFocusOutside:xy(e.onFocusOutside,(function(e){e.target!==l.trigger&&s.onOpenChange(!1)})),onEscapeKeyDown:xy(e.onEscapeKeyDown,(function(e){u.onClose(),e.preventDefault()})),onKeyDown:xy(e.onKeyDown,(function(e){var t,n=e.currentTarget.contains(e.target),r=r_[u.dir].includes(e.key);n&&r&&(s.onOpenChange(!1),null===(t=l.trigger)||void 0===t||t.focus(),e.preventDefault())}))})))))}));function nE(e){return e?"open":"closed"}function rE(e){return"indeterminate"===e}function iE(e){return rE(e)?"indeterminate":e?"checked":"unchecked"}function oE(e){return function(t){return"mouse"===t.pointerType?e(t):void 0}}var aE=b_,sE=w_,uE=E_,lE=M_,cE=R_,dE=N_,fE=B_,hE=Y_,pE=Q_,vE=Z_,gE=tE,mE=["__scopeDropdownMenu","disabled"],yE=["__scopeDropdownMenu"],bE=["__scopeDropdownMenu"],wE=["__scopeDropdownMenu"],xE=["__scopeDropdownMenu"],kE=["__scopeDropdownMenu"],SE=["__scopeDropdownMenu"],_E=["__scopeDropdownMenu"],EE=["__scopeDropdownMenu"],CE="DropdownMenu",PE=L(Cy(CE,[c_]),2),IE=PE[0],TE=(PE[1],c_()),ME=L(IE(CE),2),AE=ME[0],OE=ME[1],jE=function(e){var n=e.__scopeDropdownMenu,r=e.children,i=e.dir,o=e.open,a=e.defaultOpen,s=e.onOpenChange,u=e.modal,l=void 0===u||u,c=TE(n),d=(0,t.useRef)(null),f=L(jy({prop:o,defaultProp:a,onChange:s}),2),h=f[0],p=void 0!==h&&h,v=f[1];return(0,t.createElement)(AE,{scope:n,triggerId:Ay(),triggerRef:d,contentId:Ay(),open:p,onOpenChange:v,onOpenToggle:(0,t.useCallback)((function(){return v((function(e){return!e}))}),[v]),modal:l},(0,t.createElement)(aE,wy({},c,{open:p,onOpenChange:v,dir:i,modal:l}),r))},RE="DropdownMenuTrigger",LE=(0,t.forwardRef)((function(e,n){var r=e.__scopeDropdownMenu,i=e.disabled,o=void 0!==i&&i,a=Jt(e,mE),s=OE(RE,r),u=TE(r);return(0,t.createElement)(sE,wy({asChild:!0},u),(0,t.createElement)(Ky.button,wy({type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":o?"":void 0,disabled:o},a,{ref:ky(n,s.triggerRef),onPointerDown:xy(e.onPointerDown,(function(e){o||0!==e.button||!1!==e.ctrlKey||(s.onOpenToggle(),s.open||e.preventDefault())})),onKeyDown:xy(e.onKeyDown,(function(e){o||(["Enter"," "].includes(e.key)&&s.onOpenToggle(),"ArrowDown"===e.key&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(e.key)&&e.preventDefault())}))})))})),DE=function(e){var n=e.__scopeDropdownMenu,r=Jt(e,yE),i=TE(n);return(0,t.createElement)(uE,wy({},i,r))},NE="DropdownMenuContent",zE=(0,t.forwardRef)((function(e,n){var r=e.__scopeDropdownMenu,i=Jt(e,bE),o=OE(NE,r),a=TE(r),s=(0,t.useRef)(!1);return(0,t.createElement)(lE,wy({id:o.contentId,"aria-labelledby":o.triggerId},a,i,{ref:n,onCloseAutoFocus:xy(e.onCloseAutoFocus,(function(e){var t;s.current||null===(t=o.triggerRef.current)||void 0===t||t.focus(),s.current=!1,e.preventDefault()})),onInteractOutside:xy(e.onInteractOutside,(function(e){var t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey,r=2===t.button||n;o.modal&&!r||(s.current=!0)})),style:R(R({},e.style),{},{"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"})}))})),BE=(0,t.forwardRef)((function(e,n){var r=e.__scopeDropdownMenu,i=Jt(e,wE),o=TE(r);return(0,t.createElement)(cE,wy({},o,i,{ref:n}))})),FE=(0,t.forwardRef)((function(e,n){var r=e.__scopeDropdownMenu,i=Jt(e,xE),o=TE(r);return(0,t.createElement)(dE,wy({},o,i,{ref:n}))})),UE=(0,t.forwardRef)((function(e,n){var r=e.__scopeDropdownMenu,i=Jt(e,kE),o=TE(r);return(0,t.createElement)(fE,wy({},o,i,{ref:n}))})),KE=(0,t.forwardRef)((function(e,n){var r=e.__scopeDropdownMenu,i=Jt(e,SE),o=TE(r);return(0,t.createElement)(hE,wy({},o,i,{ref:n}))})),VE=(0,t.forwardRef)((function(e,n){var r=e.__scopeDropdownMenu,i=Jt(e,_E),o=TE(r);return(0,t.createElement)(vE,wy({},o,i,{ref:n}))})),WE=(0,t.forwardRef)((function(e,n){var r=e.__scopeDropdownMenu,i=Jt(e,EE),o=TE(r);return(0,t.createElement)(gE,wy({},o,i,{ref:n,style:R(R({},e.style),{},{"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"})}))})),HE=jE,YE=LE,XE=DE,qE=zE,$E=BE,GE=FE,QE=UE,JE=KE,ZE=function(e){var n=e.__scopeDropdownMenu,r=e.children,i=e.open,o=e.onOpenChange,a=e.defaultOpen,s=TE(n),u=L(jy({prop:i,defaultProp:a,onChange:o}),2),l=u[0],c=void 0!==l&&l,d=u[1];return(0,t.createElement)(pE,wy({},s,{open:c,onOpenChange:d}),r)},eC=VE,tC=WE,nC=function(){},rC=t.createContext({});function iC(e){var t=e.onEvent,n=e.children;return(0,Qo.jsx)(rC.Provider,{value:null!==t&&void 0!==t?t:nC,children:n})}function oC(){return t.useContext(rC)}function aC(e,n){var r=da(),i=(0,t.useRef)(!1),o=oC(),a=(0,t.useCallback)((function(t){i.current=t,r.batch((function(){t?(r.complete(),r.addOpenMenu(e)):(r.deleteOpenMenu(e),r.openMenus.forEach((function(t){t.startsWith(e)&&r.deleteOpenMenu(t)}))),null===n||void 0===n||n(t)}))}),[r,e,n]);return(0,t.useEffect)((function(){return i.current&&(o("open-menu",{source:"unknown",id:e}),r.addOpenMenu(e)),function(){i.current&&(r.deleteOpenMenu(e),r.openMenus.forEach((function(t){t.startsWith(e)&&(o("close-menu",{source:"unknown",id:e}),r.deleteOpenMenu(t))})),i.current=!1)}}),[r,e,o]),[la("is menu open",(function(){return r.openMenus.includes(e)}),[r,e]),a]}var sC=["noClose"],uC=["children","onSelect"],lC=["children","onSelect"];function cC(e){var t=e.id,n=e.children,r=e.modal,i=void 0!==r&&r,o=L(aC(t),2),a=o[0],s=o[1];return(0,Qo.jsx)(HE,{open:a,dir:"ltr",modal:i,onOpenChange:s,children:n})}function dC(e){var t=e.children,n=e["data-testid"];return(0,Qo.jsx)(YE,{dir:"ltr","data-testid":n,asChild:!0,children:t})}function fC(e){var t=e.side,n=void 0===t?"bottom":t,r=e.align,i=void 0===r?"start":r,o=e.sideOffset,a=void 0===o?8:o,s=e.alignOffset,u=void 0===s?8:s,l=e.children,c=Hs();return(0,Qo.jsx)(XE,{dir:"ltr",container:c,children:(0,Qo.jsx)(qE,{className:"tlui-menu",align:i,sideOffset:a,side:n,alignOffset:u,collisionPadding:4,children:l})})}function hC(e){var t=e.id,n=e.children,r=L(aC(t),2),i=r[0],o=r[1];return(0,Qo.jsx)(ZE,{open:i,onOpenChange:o,children:n})}function pC(e){var t=e.label,n=e["data-testid"],r=e["data-direction"];return(0,Qo.jsx)(eC,{dir:"ltr","data-direction":r,"data-testid":n,asChild:!0,children:(0,Qo.jsx)(gx,{className:"tlui-menu__button tlui-menu__submenu__trigger",label:t,icon:"chevron-right"})})}function vC(e){var t=e.alignOffset,n=void 0===t?0:t,r=e.sideOffset,i=void 0===r?5:r,o=e.children,a=Hs();return(0,Qo.jsx)(XE,{container:a,dir:"ltr",children:(0,Qo.jsx)(tC,{className:"tlui-menu tlui-menu__submenu__content",alignOffset:n,sideOffset:i,collisionPadding:4,children:o})})}function gC(e){var t=e.children,n=e.size,r=void 0===n?"medium":n;return(0,Qo.jsx)($E,{dir:"ltr",className:"tlui-menu__group","data-size":r,children:t})}function mC(e){var t=e.noClose,n=Jt(e,sC);return(0,Qo.jsx)(GE,{dir:"ltr",asChild:!0,onClick:t||void 0!==n.isChecked?Ms:void 0,children:(0,Qo.jsx)(gx,R({className:"tlui-menu__button"},n))})}function yC(e){var t=e.children,n=e.onSelect,r=Jt(e,uC);return(0,Qo.jsxs)(QE,R(R({dir:"ltr",className:"tlui-button tlui-menu__button tlui-menu__checkbox-item",onSelect:function(e){null===n||void 0===n||n(e),Ms(e)}},r),{},{children:[(0,Qo.jsx)("div",{className:"tlui-menu__checkbox-item__check",style:{transformOrigin:"75% center",transform:"scale(".concat(r.checked?1:.5,")"),opacity:r.checked?1:.5},children:(0,Qo.jsx)(lx,{small:!0,icon:r.checked?"check":"checkbox-empty"})}),t]}))}function bC(e){var t=e.children,n=e.onSelect,r=Jt(e,lC);return(0,Qo.jsxs)(QE,R(R({dir:"ltr",className:"tlui-button tlui-menu__button tlui-menu__checkbox-item",onSelect:function(e){null===n||void 0===n||n(e),Ms(e)}},r),{},{children:[(0,Qo.jsx)(JE,{dir:"ltr",className:"tlui-menu__checkbox-item__check",children:(0,Qo.jsx)(lx,{icon:"check"})}),t]}))}var wC=(0,t.forwardRef)((function(e,n){return(0,t.createElement)(Ky.span,wy({},e,{ref:n,style:R({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"},e.style)}))})),xC=["__scopeToast","hotkey","label"],kC=["__scopeToast","onFocusFromOutsideViewport"],SC=["forceMount","open","defaultOpen","onOpenChange"],_C=["__scopeToast","type","duration","open","onClose","onEscapeKeyDown","onPause","onResume","onSwipeStart","onSwipeMove","onSwipeCancel","onSwipeEnd"],EC=["__scopeToast","children"],CC=["__scopeToast"],PC=["__scopeToast"],IC=["altText"],TC=["__scopeToast"],MC=["__scopeToast","altText"],AC="ToastProvider",OC=L(Sx("Toast"),3),jC=OC[0],RC=OC[1],LC=L(Cy("Toast",[OC[2]]),2),DC=LC[0],NC=(LC[1],L(DC(AC),2)),zC=NC[0],BC=NC[1],FC=function(e){var n=e.__scopeToast,r=e.label,i=void 0===r?"Notification":r,o=e.duration,a=void 0===o?5e3:o,s=e.swipeDirection,u=void 0===s?"right":s,l=e.swipeThreshold,c=void 0===l?50:l,d=e.children,f=L((0,t.useState)(null),2),h=f[0],p=f[1],v=L((0,t.useState)(0),2),g=v[0],m=v[1],y=(0,t.useRef)(!1),b=(0,t.useRef)(!1);return(0,t.createElement)(jC.Provider,{scope:n},(0,t.createElement)(zC,{scope:n,label:i,duration:a,swipeDirection:u,swipeThreshold:c,toastCount:g,viewport:h,onViewportChange:p,onToastAdd:(0,t.useCallback)((function(){return m((function(e){return e+1}))}),[]),onToastRemove:(0,t.useCallback)((function(){return m((function(e){return e-1}))}),[]),isFocusedToastEscapeKeyDownRef:y,isClosePausedRef:b},d))};FC.propTypes={label:function(e){if(e.label&&"string"===typeof e.label&&!e.label.trim()){var t="Invalid prop `label` supplied to `".concat(AC,"`. Expected non-empty `string`.");return new Error(t)}return null}};var UC="ToastViewport",KC=["F8"],VC="toast.viewportPause",WC="toast.viewportResume",HC=(0,t.forwardRef)((function(e,n){var r=e.__scopeToast,i=e.hotkey,o=void 0===i?KC:i,a=e.label,s=void 0===a?"Notifications ({hotkey})":a,l=Jt(e,xC),c=BC(UC,r),d=RC(r),f=(0,t.useRef)(null),h=(0,t.useRef)(null),p=(0,t.useRef)(null),v=(0,t.useRef)(null),g=Sy(n,v,c.onViewportChange),m=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=c.toastCount>0;(0,t.useEffect)((function(){var e=function(e){var t;o.every((function(t){return e[t]||e.code===t}))&&(null===(t=v.current)||void 0===t||t.focus())};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}),[o]),(0,t.useEffect)((function(){var e=f.current,t=v.current;if(y&&e&&t){var n=function(){if(!c.isClosePausedRef.current){var e=new CustomEvent(VC);t.dispatchEvent(e),c.isClosePausedRef.current=!0}},r=function(){if(c.isClosePausedRef.current){var e=new CustomEvent(WC);t.dispatchEvent(e),c.isClosePausedRef.current=!1}},i=function(t){!e.contains(t.relatedTarget)&&r()},o=function(){e.contains(document.activeElement)||r()};return e.addEventListener("focusin",n),e.addEventListener("focusout",i),e.addEventListener("pointermove",n),e.addEventListener("pointerleave",o),window.addEventListener("blur",n),window.addEventListener("focus",r),function(){e.removeEventListener("focusin",n),e.removeEventListener("focusout",i),e.removeEventListener("pointermove",n),e.removeEventListener("pointerleave",o),window.removeEventListener("blur",n),window.removeEventListener("focus",r)}}}),[y,c.isClosePausedRef]);var b=(0,t.useCallback)((function(e){var t=e.tabbingDirection,n=d().map((function(e){var n=e.ref.current,r=[n].concat(u(function(e){var t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:function(e){var t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}(n)));return"forwards"===t?r:r.reverse()}));return("forwards"===t?n.reverse():n).flat()}),[d]);return(0,t.useEffect)((function(){var e=v.current;if(e){var t=function(t){var n=t.altKey||t.ctrlKey||t.metaKey;if("Tab"===t.key&&!n){var r,i=document.activeElement,o=t.shiftKey;if(t.target===e&&o)return void(null===(r=h.current)||void 0===r||r.focus());var a,s,u=b({tabbingDirection:o?"backwards":"forwards"}),l=u.findIndex((function(e){return e===i}));if(dP(u.slice(l+1)))t.preventDefault();else o?null===(a=h.current)||void 0===a||a.focus():null===(s=p.current)||void 0===s||s.focus()}};return e.addEventListener("keydown",t),function(){return e.removeEventListener("keydown",t)}}}),[d,b]),(0,t.createElement)(tb,{ref:f,role:"region","aria-label":s.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:y?void 0:"none"}},y&&(0,t.createElement)(XC,{ref:h,onFocusFromOutsideViewport:function(){dP(b({tabbingDirection:"forwards"}))}}),(0,t.createElement)(jC.Slot,{scope:r},(0,t.createElement)(Ky.ol,wy({tabIndex:-1},l,{ref:g}))),y&&(0,t.createElement)(XC,{ref:p,onFocusFromOutsideViewport:function(){dP(b({tabbingDirection:"backwards"}))}}))})),YC="ToastFocusProxy",XC=(0,t.forwardRef)((function(e,n){var r=e.__scopeToast,i=e.onFocusFromOutsideViewport,o=Jt(e,kC),a=BC(YC,r);return(0,t.createElement)(wC,wy({"aria-hidden":!0,tabIndex:0},o,{ref:n,style:{position:"fixed"},onFocus:function(e){var t,n=e.relatedTarget;!(null!==(t=a.viewport)&&void 0!==t&&t.contains(n))&&i()}}))})),qC="Toast",$C=(0,t.forwardRef)((function(e,n){var r=e.forceMount,i=e.open,o=e.defaultOpen,a=e.onOpenChange,s=Jt(e,SC),u=L(jy({prop:i,defaultProp:o,onChange:a}),2),l=u[0],c=void 0===l||l,d=u[1];return(0,t.createElement)(vb,{present:r||c},(0,t.createElement)(ZC,wy({open:c},s,{ref:n,onClose:function(){return d(!1)},onPause:Oy(e.onPause),onResume:Oy(e.onResume),onSwipeStart:xy(e.onSwipeStart,(function(e){e.currentTarget.setAttribute("data-swipe","start")})),onSwipeMove:xy(e.onSwipeMove,(function(e){var t=e.detail.delta,n=t.x,r=t.y;e.currentTarget.setAttribute("data-swipe","move"),e.currentTarget.style.setProperty("--radix-toast-swipe-move-x","".concat(n,"px")),e.currentTarget.style.setProperty("--radix-toast-swipe-move-y","".concat(r,"px"))})),onSwipeCancel:xy(e.onSwipeCancel,(function(e){e.currentTarget.setAttribute("data-swipe","cancel"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")})),onSwipeEnd:xy(e.onSwipeEnd,(function(e){var t=e.detail.delta,n=t.x,r=t.y;e.currentTarget.setAttribute("data-swipe","end"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.setProperty("--radix-toast-swipe-end-x","".concat(n,"px")),e.currentTarget.style.setProperty("--radix-toast-swipe-end-y","".concat(r,"px")),d(!1)}))})))})),GC=L(DC(qC,{onClose:function(){}}),2),QC=GC[0],JC=GC[1],ZC=(0,t.forwardRef)((function(e,n){var r=e.__scopeToast,i=e.type,o=void 0===i?"foreground":i,a=e.duration,s=e.open,u=e.onClose,l=e.onEscapeKeyDown,c=e.onPause,d=e.onResume,f=e.onSwipeStart,h=e.onSwipeMove,p=e.onSwipeCancel,v=e.onSwipeEnd,g=Jt(e,_C),m=BC(qC,r),y=L((0,t.useState)(null),2),b=y[0],w=y[1],x=Sy(n,(function(e){return w(e)})),k=(0,t.useRef)(null),S=(0,t.useRef)(null),_=a||m.duration,E=(0,t.useRef)(0),C=(0,t.useRef)(_),P=(0,t.useRef)(0),I=m.onToastAdd,T=m.onToastRemove,M=Oy((function(){var e;(null===b||void 0===b?void 0:b.contains(document.activeElement))&&(null===(e=m.viewport)||void 0===e||e.focus()),u()})),A=(0,t.useCallback)((function(e){e&&e!==1/0&&(window.clearTimeout(P.current),E.current=(new Date).getTime(),P.current=window.setTimeout(M,e))}),[M]);(0,t.useEffect)((function(){var e=m.viewport;if(e){var t=function(){A(C.current),null===d||void 0===d||d()},n=function(){var e=(new Date).getTime()-E.current;C.current=C.current-e,window.clearTimeout(P.current),null===c||void 0===c||c()};return e.addEventListener(VC,n),e.addEventListener(WC,t),function(){e.removeEventListener(VC,n),e.removeEventListener(WC,t)}}}),[m.viewport,_,c,d,A]),(0,t.useEffect)((function(){s&&!m.isClosePausedRef.current&&A(_)}),[s,_,m.isClosePausedRef,A]),(0,t.useEffect)((function(){return I(),function(){return T()}}),[I,T]);var O=(0,t.useMemo)((function(){return b?uP(b):null}),[b]);return m.viewport?(0,t.createElement)(t.Fragment,null,O&&(0,t.createElement)(eP,{__scopeToast:r,role:"status","aria-live":"foreground"===o?"assertive":"polite","aria-atomic":!0},O),(0,t.createElement)(QC,{scope:r,onClose:M},(0,Ry.createPortal)((0,t.createElement)(jC.ItemSlot,{scope:r},(0,t.createElement)(eb,{asChild:!0,onEscapeKeyDown:xy(l,(function(){m.isFocusedToastEscapeKeyDownRef.current||M(),m.isFocusedToastEscapeKeyDownRef.current=!1}))},(0,t.createElement)(Ky.li,wy({role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":m.swipeDirection},g,{ref:x,style:R({userSelect:"none",touchAction:"none"},e.style),onKeyDown:xy(e.onKeyDown,(function(e){"Escape"===e.key&&(null===l||void 0===l||l(e.nativeEvent),e.nativeEvent.defaultPrevented||(m.isFocusedToastEscapeKeyDownRef.current=!0,M()))})),onPointerDown:xy(e.onPointerDown,(function(e){0===e.button&&(k.current={x:e.clientX,y:e.clientY})})),onPointerMove:xy(e.onPointerMove,(function(e){if(k.current){var t=e.clientX-k.current.x,n=e.clientY-k.current.y,r=Boolean(S.current),i=["left","right"].includes(m.swipeDirection),o=["left","up"].includes(m.swipeDirection)?Math.min:Math.max,a=i?o(0,t):0,s=i?0:o(0,n),u="touch"===e.pointerType?10:2,l={x:a,y:s},c={originalEvent:e,delta:l};r?(S.current=l,lP("toast.swipeMove",h,c,{discrete:!1})):cP(l,m.swipeDirection,u)?(S.current=l,lP("toast.swipeStart",f,c,{discrete:!1}),e.target.setPointerCapture(e.pointerId)):(Math.abs(t)>u||Math.abs(n)>u)&&(k.current=null)}})),onPointerUp:xy(e.onPointerUp,(function(e){var t=S.current,n=e.target;if(n.hasPointerCapture(e.pointerId)&&n.releasePointerCapture(e.pointerId),S.current=null,k.current=null,t){var r=e.currentTarget,i={originalEvent:e,delta:t};cP(t,m.swipeDirection,m.swipeThreshold)?lP("toast.swipeEnd",v,i,{discrete:!0}):lP("toast.swipeCancel",p,i,{discrete:!0}),r.addEventListener("click",(function(e){return e.preventDefault()}),{once:!0})}}))})))),m.viewport))):null}));ZC.propTypes={type:function(e){if(e.type&&!["foreground","background"].includes(e.type)){var t="Invalid prop `type` supplied to `".concat(qC,"`. Expected `foreground | background`.");return new Error(t)}return null}};var eP=function(e){var n=e.__scopeToast,r=e.children,i=Jt(e,EC),o=BC(qC,n),a=L((0,t.useState)(!1),2),s=a[0],u=a[1],l=L((0,t.useState)(!1),2),c=l[0],d=l[1];return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=Oy(e);Iy((function(){var e=0,n=0;return e=window.requestAnimationFrame((function(){return n=window.requestAnimationFrame(t)})),function(){window.cancelAnimationFrame(e),window.cancelAnimationFrame(n)}}),[t])}((function(){return u(!0)})),(0,t.useEffect)((function(){var e=window.setTimeout((function(){return d(!0)}),1e3);return function(){return window.clearTimeout(e)}}),[]),c?null:(0,t.createElement)(pb,{asChild:!0},(0,t.createElement)(wC,i,s&&(0,t.createElement)(t.Fragment,null,o.label," ",r)))},tP=(0,t.forwardRef)((function(e,n){e.__scopeToast;var r=Jt(e,CC);return(0,t.createElement)(Ky.div,wy({},r,{ref:n}))})),nP=(0,t.forwardRef)((function(e,n){e.__scopeToast;var r=Jt(e,PC);return(0,t.createElement)(Ky.div,wy({},r,{ref:n}))})),rP="ToastAction",iP=(0,t.forwardRef)((function(e,n){var r=e.altText,i=Jt(e,IC);return r?(0,t.createElement)(sP,{altText:r,asChild:!0},(0,t.createElement)(aP,wy({},i,{ref:n}))):null}));iP.propTypes={altText:function(e){return e.altText?null:new Error("Missing prop `altText` expected on `".concat(rP,"`"))}};var oP="ToastClose",aP=(0,t.forwardRef)((function(e,n){var r=e.__scopeToast,i=Jt(e,TC),o=JC(oP,r);return(0,t.createElement)(sP,{asChild:!0},(0,t.createElement)(Ky.button,wy({type:"button"},i,{ref:n,onClick:xy(e.onClick,o.onClose)})))})),sP=(0,t.forwardRef)((function(e,n){e.__scopeToast;var r=e.altText,i=Jt(e,MC);return(0,t.createElement)(Ky.div,wy({"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0},i,{ref:n}))}));function uP(e){var t=[];return Array.from(e.childNodes).forEach((function(e){if(e.nodeType===e.TEXT_NODE&&e.textContent&&t.push(e.textContent),function(e){return e.nodeType===e.ELEMENT_NODE}(e)){var n=e.ariaHidden||e.hidden||"none"===e.style.display,r=""===e.dataset.radixToastAnnounceExclude;if(!n)if(r){var i=e.dataset.radixToastAnnounceAlt;i&&t.push(i)}else t.push.apply(t,u(uP(e)))}})),t}function lP(e,t,n,r){var i=r.discrete,o=n.originalEvent.currentTarget,a=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&o.addEventListener(e,t,{once:!0}),i?Vy(o,a):o.dispatchEvent(a)}var cP=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Math.abs(e.x),i=Math.abs(e.y),o=r>i;return"left"===t||"right"===t?o&&r>n:!o&&i>n};function dP(e){var t=document.activeElement;return e.some((function(e){return e===t||(e.focus(),document.activeElement!==t)}))}var fP=$C,hP=tP,pP=nP,vP=iP,gP=aP,mP="2.0.0-canary.4b8491d388aa",yP=R(R({},Zo),{},{icons:Object.fromEntries(["align-bottom-center","align-bottom-left","align-bottom-right","align-bottom","align-center-center","align-center-horizontal","align-center-left","align-center-right","align-center-vertical","align-left","align-right","align-top-center","align-top-left","align-top-right","align-top","arrow-left","arrowhead-arrow","arrowhead-bar","arrowhead-diamond","arrowhead-dot","arrowhead-none","arrowhead-square","arrowhead-triangle-inverted","arrowhead-triangle","aspect-ratio","avatar","blob","bring-forward","bring-to-front","check","checkbox-checked","checkbox-empty","chevron-down","chevron-left","chevron-right","chevron-up","chevrons-ne","chevrons-sw","clipboard-copied","clipboard-copy","code","collab","color","comment","cross-2","cross","dash-dashed","dash-dotted","dash-draw","dash-solid","discord","distribute-horizontal","distribute-vertical","dot","dots-horizontal","dots-vertical","drag-handle-dots","duplicate","edit","external-link","file","fill-none","fill-pattern","fill-semi","fill-solid","follow","following","font-draw","font-mono","font-sans","font-serif","geo-arrow-down","geo-arrow-left","geo-arrow-right","geo-arrow-up","geo-check-box","geo-diamond","geo-ellipse","geo-hexagon","geo-octagon","geo-oval","geo-pentagon","geo-rectangle","geo-rhombus-2","geo-rhombus","geo-star","geo-trapezoid","geo-triangle","geo-x-box","github","group","hidden","image","info-circle","leading","link","lock-small","lock","menu","minus","mixed","pack","page","plus","question-mark-circle","question-mark","redo","reset-zoom","rotate-ccw","rotate-cw","ruler","search","send-backward","send-to-back","settings-horizontal","settings-vertical-1","settings-vertical","share-1","share-2","size-extra-large","size-large","size-medium","size-small","spline-cubic","spline-line","stack-horizontal","stack-vertical","stretch-horizontal","stretch-vertical","text-align-center","text-align-justify","text-align-left","text-align-right","tool-arrow","tool-embed","tool-eraser","tool-frame","tool-hand","tool-highlight","tool-laser","tool-line","tool-media","tool-note","tool-pencil","tool-pointer","tool-text","trash","triangle-down","triangle-up","twitter","undo","ungroup","unlock-small","unlock","vertical-align-center","vertical-align-end","vertical-align-start","visible","warning-triangle","zoom-in","zoom-out"].map((function(e){return[e,"https://unpkg.com/@tldraw/assets@".concat(mP,"/icons/icon/").concat(e,".svg")]}))),translations:Object.fromEntries(Xo.map((function(e){return[e.locale,"https://unpkg.com/@tldraw/assets@".concat(mP,"/translations/").concat(e.locale,".json")]}))),embedIcons:Object.fromEntries(Qi.map((function(e){return[e.type,"https://unpkg.com/@tldraw/assets@".concat(mP,"/embed-icons/").concat(e.type,".png")]})))});function bP(e){return e?{fonts:Object.assign(R({},yP.fonts),R({},null===e||void 0===e?void 0:e.fonts)),icons:Object.assign(R({},yP.icons),R({},null===e||void 0===e?void 0:e.icons)),embedIcons:Object.assign(R({},yP.embedIcons),R({},null===e||void 0===e?void 0:e.embedIcons)),translations:Object.assign(R({},yP.translations),R({},null===e||void 0===e?void 0:e.translations))}:yP}var wP=t.forwardRef((function(e,n){var r=e.className,i=e.label,o=e.icon,a=e.iconLeft,s=e.autoselect,u=void 0!==s&&s,l=e.autofocus,c=void 0!==l&&l,d=e.defaultValue,f=e.placeholder,h=e.onComplete,p=e.onValueChange,v=e.onCancel,g=e.onBlur,m=e.shouldManuallyMaintainScrollPositionWhenFocused,y=void 0!==m&&m,b=e.children,w=e.value,x=t.useRef(null);t.useImperativeHandle(n,(function(){return x.current}));var k=ax(),S=t.useRef(null!==d&&void 0!==d?d:""),_=t.useRef(null!==d&&void 0!==d?d:""),E=L(t.useState(!1),2),C=E[0],P=E[1],I=t.useCallback((function(e){P(!0);var t=e.currentTarget;_.current=t.value,requestAnimationFrame((function(){u&&t.select()}))}),[u]),T=t.useCallback((function(e){var t=e.currentTarget.value;_.current=t,null===p||void 0===p||p(t)}),[p]),M=t.useCallback((function(e){switch(e.key){case"Enter":e.currentTarget.blur(),e.stopPropagation(),null===h||void 0===h||h(e.currentTarget.value);break;case"Escape":e.currentTarget.value=S.current,e.currentTarget.blur(),e.stopPropagation(),null===v||void 0===v||v(e.currentTarget.value)}}),[h,v]),A=t.useCallback((function(e){P(!1);var t=e.currentTarget.value;null===g||void 0===g||g(t)}),[g]);return t.useEffect((function(){var e=window.visualViewport;if(C&&y&&e){var t=function(){var e;null===(e=x.current)||void 0===e||e.scrollIntoView({block:"center"})};return e.addEventListener("resize",t),e.addEventListener("scroll",t),requestAnimationFrame((function(){var e;null===(e=x.current)||void 0===e||e.scrollIntoView({block:"center"})})),function(){e.removeEventListener("resize",t),e.removeEventListener("scroll",t)}}}),[C,y]),(0,Qo.jsxs)("div",{draggable:!1,className:"tlui-input__wrapper",children:[b,i&&(0,Qo.jsx)("label",{children:k(i)}),a&&(0,Qo.jsx)(lx,{icon:a,className:"tlui-icon-left",small:!0}),(0,Qo.jsx)("input",{ref:x,className:ra("tlui-input",r),type:"text",defaultValue:d,onKeyUp:M,onChange:T,onFocus:I,onBlur:A,autoFocus:c,placeholder:f,value:w}),o&&(0,Qo.jsx)(lx,{icon:o,small:!!i})]})}));function xP(e){return kd(e)?{isValid:!0,hasProtocol:!0}:kd("https://"+e)?{isValid:!0,hasProtocol:!1}:{isValid:!1,hasProtocol:!1}}var kP=ua((function(e){var t=e.onClose,n=da().onlySelectedShape;return n&&"url"in n.props&&"string"===typeof n.props.url?(0,Qo.jsx)(SP,{onClose:t,selectedShape:n}):null})),SP=ua((function(e){var n=e.onClose,r=e.selectedShape,i=da(),o=ax(),a=(0,t.useRef)(null);(0,t.useEffect)((function(){requestAnimationFrame((function(){var e;return null===(e=a.current)||void 0===e?void 0:e.focus()}))}),[]);var s=(0,t.useRef)(r.props.url),u=L((0,t.useState)((function(){var e=xP(r.props.url),t=!0===e.isValid?e.hasProtocol?r.props.url:"https://"+r.props.url:"https://";return{actual:t,safe:t,valid:!0}})),2),l=u[0],c=u[1],d=(0,t.useCallback)((function(e){var t=e.replace(/https?:\/\/(https?:\/\/)/,(function(e,t){return t})),n=xP(t),r=!0===n.isValid?n.hasProtocol?t:"https://"+t:"https://";c({actual:t,safe:r,valid:n.isValid})}),[]),f=(0,t.useCallback)((function(){var e=i.onlySelectedShape;e&&(i.updateShapes([{id:e.id,type:e.type,props:{url:""}}]),n())}),[i,n]),h=(0,t.useCallback)((function(){var e=i.onlySelectedShape;e&&(e&&"url"in e.props&&e.props.url!==l.safe&&i.updateShapes([{id:e.id,type:e.type,props:{url:l.safe}}]),n())}),[i,n,l]),p=(0,t.useCallback)((function(){n()}),[n]);if(!r)return n(),null;var v=s.current&&!l.valid;return(0,Qo.jsxs)(Qo.Fragment,{children:[(0,Qo.jsxs)(mx,{children:[(0,Qo.jsx)(yx,{children:o("edit-link-dialog.title")}),(0,Qo.jsx)(bx,{})]}),(0,Qo.jsx)(wx,{children:(0,Qo.jsxs)("div",{className:"tlui-edit-link-dialog",children:[(0,Qo.jsx)(wP,{ref:a,className:"tlui-edit-link-dialog__input",label:"edit-link-dialog.url",autofocus:!0,value:l.actual,onValueChange:d,onComplete:h,onCancel:p}),(0,Qo.jsx)("div",{children:l.valid?o("edit-link-dialog.detail"):o("edit-link-dialog.invalid-url")})]})}),(0,Qo.jsxs)(xx,{className:"tlui-dialog__footer__actions",children:[(0,Qo.jsx)(gx,{onClick:p,onTouchEnd:p,children:o("edit-link-dialog.cancel")}),v?(0,Qo.jsx)(gx,{type:"danger",onTouchEnd:f,onClick:f,children:o("edit-link-dialog.clear")}):(0,Qo.jsx)(gx,{type:"primary",disabled:!l.valid,onTouchEnd:h,onClick:h,children:o("edit-link-dialog.save")})]})]})})),_P=ua((function(e){var n=e.onClose,r=da(),i=ax(),o=Jw(),a=L((0,t.useState)(null),2),s=a[0],u=a[1],l=L((0,t.useState)(""),2),c=l[0],d=l[1],f=L((0,t.useState)(null),2),h=f[0],p=f[1],v=L((0,t.useState)(!1),2),g=v[0],m=v[1],y=(0,t.useRef)(-1);return(0,Qo.jsxs)(Qo.Fragment,{children:[(0,Qo.jsxs)(mx,{children:[(0,Qo.jsx)(yx,{children:s?"".concat(i("embed-dialog.title")," \u2014 ").concat(s.title):i("embed-dialog.title")}),(0,Qo.jsx)(bx,{})]}),s?(0,Qo.jsxs)(Qo.Fragment,{children:[(0,Qo.jsxs)(wx,{className:"tlui-embed-dialog__enter",children:[(0,Qo.jsx)(wP,{className:"tlui-embed-dialog__input",label:"embed-dialog.url",placeholder:"http://example.com",autofocus:!0,onValueChange:function(e){d(e);var t=lc(e);p(t&&t.definition.type===s.type?t:null),m(!1),clearTimeout(y.current),y.current=setTimeout((function(){return m(!t)}),320)}}),""===c?(0,Qo.jsxs)("div",{className:"tlui-embed-dialog__instruction",children:[(0,Qo.jsx)("span",{children:i("embed-dialog.instruction")})," ",s.instructionLink&&(0,Qo.jsxs)("a",{target:"_blank",rel:"noopener noreferrer",href:s.instructionLink,className:"tlui-embed-dialog__instruction__link",children:["Learn more.",(0,Qo.jsx)(lx,{icon:"external-link",small:!0})]})]}):(0,Qo.jsx)("div",{className:"tlui-embed-dialog__warning",children:g?i("embed-dialog.invalid-url"):"\xa0"})]}),(0,Qo.jsxs)(xx,{className:"tlui-dialog__footer__actions",children:[(0,Qo.jsx)(gx,{onClick:function(){u(null),p(null),d("")},label:"embed-dialog.back"}),(0,Qo.jsx)("div",{className:"tlui-embed__spacer"}),(0,Qo.jsx)(gx,{label:"embed-dialog.cancel",onClick:n}),(0,Qo.jsx)(gx,{type:"primary",disabled:!h,label:"embed-dialog.create",onClick:function(){h&&(r.putExternalContent({type:"embed",url:c,point:r.viewportPageCenter,embed:h.definition}),n())}})]})]}):(0,Qo.jsxs)(Qo.Fragment,{children:[(0,Qo.jsx)(wx,{className:"tlui-embed-dialog__list",children:Qi.map((function(e){return(0,Qo.jsxs)("button",{className:"tlui-embed-dialog__item",onClick:function(){return u(e)},children:[(0,Qo.jsx)("div",{className:"tlui-embed-dialog__item__image",children:(0,Qo.jsx)("div",{className:"tlui-embed-dialog__item__image__img",style:{backgroundImage:"url(".concat(o.embedIcons[e.type],")")}})}),(0,Qo.jsx)("div",{className:"tlui-embed-dialog__item__title",children:e.title})]},e.type)}))}),(0,Qo.jsx)("div",{className:"tlui-dialog__scrim"})]})]})})),EP=n(4235);function CP(e,t,n){return PP.apply(this,arguments)}function PP(){return PP=na(ea().mark((function e(t,n,r){var i,o,a,s,u,l,c,d,f,h,p,v,g,m,y,b,w,x,k,S,_,E,C,T,M,A;return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=n.elements,o=n.files,a={shapes:[],rootShapeIds:[],assets:[],schema:t.store.schema.serialize()},s=new Map,u=new Map,l=t.currentPageId,c=new Map,d=[],f=new Set,i.forEach((function(e){if(c.set(e.id,li()),null!==e.boundElements){var t,n=X(e.boundElements);try{for(n.s();!(t=n.n()).done;){var r=t.value;"text"===r.type&&f.add(r.id)}}catch(YK){n.e(YK)}finally{n.f()}}})),h="a1",p=X(i),e.prev=11,g=ea().mark((function e(){var t,n,r,p,g,m,y,b,w,x,k,S,_,E,C,T,M,A,O,j,D,N,z,B,F,U,K,V,W,H,Y,q,$,G,Q,J,Z,ee,te,ne;return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=v.value,!f.has(t.id)){e.next=3;break}return e.abrupt("return",1);case 3:n=c.get(t.id),r={id:n,typeName:"shape",parentId:l,index:h,x:t.x,y:t.y,rotation:0,isLocked:t.locked,opacity:IP(t.opacity)},0!==t.angle&&u.set(n,t.angle),t.groupIds&&t.groupIds.length>0?s.has(t.groupIds[0])?null===(p=s.get(t.groupIds[0]))||void 0===p||p.push(n):s.set(t.groupIds[0],[n]):d.push(n),e.t0=t.type,e.next="rectangle"===e.t0||"ellipse"===e.t0||"diamond"===e.t0?10:"freedraw"===e.t0?32:"line"===e.t0?34:"arrow"===e.t0?39:"text"===e.t0?63:"image"===e.t0?66:72;break;case 10:if(b="",w="middle",null===t.boundElements){e.next=29;break}x=X(t.boundElements),e.prev=14,S=ea().mark((function e(){var t,n;return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"text"===(t=k.value).type&&(n=i.find((function(e){return e.id===t.id})))&&(b=n.text,w=DP[n.textAlign]);case 2:case"end":return e.stop()}}),e)})),x.s();case 17:if((k=x.n()).done){e.next=21;break}return e.delegateYield(S(),"t1",19);case 19:e.next=17;break;case 21:e.next=26;break;case 23:e.prev=23,e.t2=e.catch(14),x.e(e.t2);case 26:return e.prev=26,x.f(),e.finish(26);case 29:return _="transparent"===t.backgroundColor?t.strokeColor:t.backgroundColor,a.shapes.push(R(R({},r),{},{type:"geo",props:{geo:t.type,url:null!==(g=t.link)&&void 0!==g?g:"",w:t.width,h:t.height,size:null!==(m=TP[t.strokeWidth])&&void 0!==m?m:"draw",color:null!==(y=jP[_])&&void 0!==y?y:"black",text:b,align:w,dash:BP(t),fill:FP(t)}})),e.abrupt("break",72);case 32:return a.shapes.push(R(R({},r),{},{type:"draw",props:{dash:BP(t),size:TP[t.strokeWidth],color:null!==(E=jP[t.strokeColor])&&void 0!==E?E:"black",segments:[{type:"free",points:t.points.map((function(e){var t=L(e,3),n=t[0],r=t[1],i=t[2];return{x:n,y:r,z:void 0===i?.5:i}}))}]}})),e.abrupt("break",72);case 34:return T=t.points[0],M=t.points[t.points.length-1],A=I(t.points.length),a.shapes.push(R(R({},r),{},{type:"line",props:{dash:BP(t),size:TP[t.strokeWidth],color:null!==(C=jP[t.strokeColor])&&void 0!==C?C:"black",spline:t.roundness?"cubic":"line",handles:R({start:{id:"start",type:"vertex",index:A[0],x:T[0],y:T[1]},end:{id:"end",type:"vertex",index:A[A.length-1],x:M[0],y:M[1]}},Object.fromEntries(t.points.slice(1,-1).map((function(e,t){var n=L(e,2),r=n[0],i=n[1],o=bd();return[o,{id:o,type:"vertex",index:A[t+1],x:r,y:i}]}))))}})),e.abrupt("break",72);case 39:if(F="",null===t.boundElements){e.next=57;break}U=X(t.boundElements),e.prev=42,V=ea().mark((function e(){var t,n;return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"text"===(t=K.value).type&&(n=i.find((function(e){return e.id===t.id})))&&(F=n.text);case 2:case"end":return e.stop()}}),e)})),U.s();case 45:if((K=U.n()).done){e.next=49;break}return e.delegateYield(V(),"t3",47);case 47:e.next=45;break;case 49:e.next=54;break;case 51:e.prev=51,e.t4=e.catch(42),U.e(e.t4);case 54:return e.prev=54,U.f(),e.finish(54);case 57:return W=t.points[0],H=t.points[t.points.length-1],Y=c.get(null===(O=t.startBinding)||void 0===O?void 0:O.elementId),q=c.get(null===(j=t.endBinding)||void 0===j?void 0:j.elementId),a.shapes.push(R(R({},r),{},{type:"arrow",props:{text:F,bend:zP(t,W,H),dash:BP(t),size:null!==(D=TP[t.strokeWidth])&&void 0!==D?D:"m",color:null!==(N=jP[t.strokeColor])&&void 0!==N?N:"black",start:Y?{type:"binding",boundShapeId:Y,normalizedAnchor:{x:.5,y:.5},isExact:!1}:{type:"point",x:W[0],y:W[1]},end:q?{type:"binding",boundShapeId:q,normalizedAnchor:{x:.5,y:.5},isExact:!1}:{type:"point",x:H[0],y:H[1]},arrowheadEnd:null!==(z=NP[t.endArrowhead])&&void 0!==z?z:"none",arrowheadStart:null!==(B=NP[t.startArrowhead])&&void 0!==B?B:"none"}})),e.abrupt("break",72);case 63:return Q=AP(t.fontSize),J=Q.size,Z=Q.scale,a.shapes.push(R(R({},r),{},{type:"text",props:{size:J,scale:Z,font:null!==($=OP[t.fontFamily])&&void 0!==$?$:"draw",color:null!==(G=jP[t.strokeColor])&&void 0!==G?G:"black",text:t.text,align:DP[t.textAlign]}})),e.abrupt("break",72);case 66:if(te=o[t.fileId]){e.next=69;break}return e.abrupt("break",72);case 69:ne=Jr.createId(),a.assets.push({id:ne,typeName:"asset",type:"image",props:{w:t.width,h:t.height,name:null!==(ee=t.id)&&void 0!==ee?ee:"Untitled",isAnimated:!1,mimeType:te.mimeType,src:te.dataURL}}),a.shapes.push(R(R({},r),{},{type:"image",props:{w:t.width,h:t.height,assetId:ne}}));case 72:h=P(h);case 73:case"end":return e.stop()}}),e,null,[[14,23,26,29],[42,51,54,57]])})),p.s();case 14:if((v=p.n()).done){e.next=20;break}return e.delegateYield(g(),"t0",16);case 16:if(!e.t0){e.next=18;break}return e.abrupt("continue",18);case 18:e.next=14;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(11),p.e(e.t1);case 25:return e.prev=25,p.f(),e.finish(25);case 28:m=null!==r&&void 0!==r?r:t.inputs.shiftKey?t.inputs.currentPagePoint:void 0,t.mark("paste"),t.putContent(a,{point:m,select:!1,preserveIds:!0}),y=X(s.values());try{for(y.s();!(b=y.n()).done;)(w=b.value).length>1&&(t.groupShapes(w),null!==(x=t.getShapeById(w[0]))&&void 0!==x&&x.parentId&&ui(x.parentId)&&d.push(x.parentId))}catch(YK){y.e(YK)}finally{y.f()}k=X(u);try{for(k.s();!(S=k.n()).done;)_=L(S.value,2),E=_[0],C=_[1],t.select(E),t.rotateShapesBy([E],C)}catch(YK){k.e(YK)}finally{k.f()}T=$(d.map((function(e){return t.getShapeById(e)}))),M=Wa.Common(T.map((function(e){return t.getPageBounds(e)}))),A=t.viewportPageBounds.center,t.updateShapes(T.map((function(e){var t,n,r=(null!==(t=e.x)&&void 0!==t?t:0)-(M.x+M.w/2),i=(null!==(n=e.y)&&void 0!==n?n:0)-(M.y+M.h/2);return{id:e.id,type:e.type,x:A.x+r,y:A.y+i}}))),t.setSelectedIds(d);case 40:case"end":return e.stop()}}),e,null,[[11,22,25,28]])}))),PP.apply(this,arguments)}var IP=function(e){var t=e/100;return t<.2?.1:t<.4?.25:t<.6?.5:t<.8?.75:1},TP={1:"s",2:"m",3:"l",4:"xl"},MP={16:"s",20:"m",28:"l",36:"xl"};function AP(e){var t=MP[e];return t?{size:t,scale:1}:e<16?{size:"s",scale:e/16}:e>36?{size:"xl",scale:e/36}:{size:"m",scale:1}}var OP={1:"draw",2:"sans",3:"mono"},jP={"#ffffff":"grey","#000000":"black","#343a40":"black","#495057":"grey","#c92a2a":"red","#a61e4d":"light-red","#862e9c":"violet","#5f3dc4":"light-violet","#364fc7":"blue","#1864ab":"light-blue","#0b7285":"light-green","#087f5b":"light-green","#2b8a3e":"green","#5c940d":"light-green","#e67700":"yellow","#d9480f":"orange","#ced4da":"grey","#868e96":"grey","#fa5252":"light-red","#e64980":"red","#be4bdb":"light-violet","#7950f2":"violet","#4c6ef5":"blue","#228be6":"light-blue","#15aabf":"light-green","#12b886":"green","#40c057":"green","#82c91e":"light-green","#fab005":"yellow","#fd7e14":"orange","#212529":"grey"},RP={solid:"draw",dashed:"dashed",dotted:"dotted"},LP={"cross-hatch":"pattern",hachure:"pattern",solid:"solid"},DP={left:"start",center:"middle",right:"end"},NP={arrow:"arrow",dot:"dot",triangle:"triangle",bar:"pipe"};function zP(e,t,n){var r=0;if(e.points.length>2){var i=new va(t[0],t[1]),o=new va(n[0],n[1]),a=new va(e.points[1][0],e.points[1][1]),s=va.Sub(o,i),u=va.Per(s),l=va.Med(o,i),c=va.Sub(l,u),d=va.Add(l,u),f=va.NearestPointOnLineSegment(c,d,a,!1);r=va.Dist(f,l),va.Clockwise(f,o,l)&&(r*=-1)}return r}var BP=function(e){var t,n=null!==(t=RP[e.strokeStyle])&&void 0!==t?t:"draw";return"draw"===n&&0===e.roughness&&(n="solid"),n},FP=function(e){var t;return"transparent"===e.backgroundColor?"none":null!==(t=LP[e.fillStyle])&&void 0!==t?t:"solid"};function UP(e,t,n){return KP.apply(this,arguments)}function KP(){return KP=na(ea().mark((function e(t,n,r){var i,o;return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(n.map(function(){var e=na(ea().mark((function e(t){return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return e.next=4,e.sent.blob();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return i=e.sent,o=i.map((function(e){return new File([e],"tldrawFile",{type:e.type})})),t.mark("paste"),e.next=7,t.putExternalContent({type:"files",files:o,point:r,ignoreParent:!1});case 7:n.forEach((function(e){return URL.revokeObjectURL(e)}));case 8:case"end":return e.stop()}}),e)}))),KP.apply(this,arguments)}function VP(e,t,n){var r=null!==n&&void 0!==n?n:e.inputs.shiftKey?e.inputs.currentPagePoint:void 0;e.mark("paste"),e.putContent(t,{point:r,select:!0})}function WP(e,t,n){return HP.apply(this,arguments)}function HP(){return(HP=na(ea().mark((function e(t,n,r){var i,o;return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(n);case 3:if(o=e.sent,null===(i=o.headers.get("content-type"))||void 0===i||!i.match(/^image\//)){e.next=8;break}return t.mark("paste"),UP(t,[n]),e.abrupt("return");case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),"Failed to fetch"!==e.t0.message&&console.error(e.t0);case 13:return t.mark("paste"),e.next=16,t.putExternalContent({type:"url",point:r,url:n});case 16:return e.abrupt("return",e.sent);case 17:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function YP(){var e=da();return la("editor.isFocused",(function(){return e.isFocused}),[e])}var XP=["input","select","textarea"];function qP(e){var t=document.activeElement;return e.isMenuOpen||t&&(t.getAttribute("contenteditable")||XP.indexOf(t.tagName.toLowerCase())>-1)}function $P(e){return GP.apply(this,arguments)}function GP(){return GP=na(ea().mark((function e(t){return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new FileReader;r.addEventListener("loadend",(function(){var t=r.result;e(t)})),r.addEventListener("error",(function(){n(r.error)})),r.readAsText(t)})));case 1:case"end":return e.stop()}}),e)}))),GP.apply(this,arguments)}function QP(e){var t=document.implementation.createHTMLDocument("");return t.documentElement.innerHTML=e.trim(),t.body.textContent||t.body.innerText||""}var JP=function(e){return e.types.find((function(e){return e.match(/^image\//)}))},ZP=function(e,t,n){var r=function(e){var t,n=e.split(/[\n\s]/),r=X(n);try{for(r.s();!(t=r.n()).done;){var i=t.value;try{var o=new URL(i);if("http:"!==o.protocol&&"https:"!==o.protocol)return}catch(kM){return}}}catch(YK){r.e(YK)}finally{r.f()}return Ql(n)}(t);if(r){var i,o=X(r);try{for(o.s();!(i=o.n()).done;){WP(e,i.value,n)}}catch(YK){o.e(YK)}finally{o.f()}}else!function(e){try{var t=new URL(e);return"http:"===t.protocol||"https:"===t.protocol}catch(kM){return!1}}(t)?/^<svg/.test(t)?(e.mark("paste"),e.putExternalContent({type:"svg-text",text:t,point:n})):(e.mark("paste"),e.putExternalContent({type:"text",text:t,point:n})):WP(e,t,n)},eI=function(){var e=na(ea().mark((function e(t,n,r){var i,o,a,s;return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===t.editingId){e.next=2;break}return e.abrupt("return");case 2:if(n){e.next=4;break}throw Error("No clipboard data");case 4:i=[],o=ea().mark((function e(){var t;return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=s[a],e.t0=t.kind,e.next="file"===e.t0?4:"string"===e.t0?6:8;break;case 4:return i.push({type:"file",source:new Promise((function(e){return e(t.getAsFile())}))}),e.abrupt("break",8);case 6:return"text/html"===t.type?i.push({type:"html",source:new Promise((function(e){return t.getAsString(e)}))}):"text/plain"===t.type?i.push({type:"text",source:new Promise((function(e){return t.getAsString(e)}))}):i.push({type:t.type,source:new Promise((function(e){return t.getAsString(e)}))}),e.abrupt("break",8);case 8:case"end":return e.stop()}}),e)})),a=0,s=Object.values(n.items);case 7:if(!(a<s.length)){e.next=12;break}return e.delegateYield(o(),"t0",9);case 9:a++,e.next=7;break;case 12:nI(t,i,r);case 13:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),tI=function(){var e=na(ea().mark((function e(t,n,r){var i,o,a,s;return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=[],o=X(n),e.prev=2,s=ea().mark((function e(){var t,n,r,o;return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.value,JP(t)){n=X(t.types);try{for(n.s();!(r=n.n()).done;)(o=r.value).match(/^image\//)&&i.push({type:"blob",source:t.getType(o)})}catch(YK){n.e(YK)}finally{n.f()}}t.types.includes("text/html")&&i.push({type:"html",source:new Promise((function(e){return t.getType("text/html").then((function(t){return $P(t).then(e)}))}))}),t.types.includes("text/uri-list")&&i.push({type:"url",source:new Promise((function(e){return t.getType("text/uri-list").then((function(t){return $P(t).then(e)}))}))}),t.types.includes("text/plain")&&i.push({type:"text",source:new Promise((function(e){return t.getType("text/plain").then((function(t){return $P(t).then(e)}))}))});case 5:case"end":return e.stop()}}),e)})),o.s();case 5:if((a=o.n()).done){e.next=9;break}return e.delegateYield(s(),"t0",7);case 7:e.next=5;break;case 9:e.next=14;break;case 11:e.prev=11,e.t1=e.catch(2),o.e(e.t1);case 14:return e.prev=14,o.f(),e.finish(14);case 17:return e.next=19,nI(t,i,r);case 19:return e.abrupt("return",e.sent);case 20:case"end":return e.stop()}}),e,null,[[2,11,14,17]])})));return function(t,n,r){return e.apply(this,arguments)}}();function nI(e,t,n){return rI.apply(this,arguments)}function rI(){return rI=na(ea().mark((function e(t,n,r){var i,o,a,s,u,l,c,d,f,h,p,v,g,m,y,b,w,x,k,S,_,E;return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.filter((function(e){return("file"===e.type||"blob"===e.type)&&null!==e.source})),!i.length){e.next=9;break}return e.next=4,Promise.all(i.map((function(e){return e.source})));case 4:return o=e.sent,a=o.filter(Boolean).map((function(e){return URL.createObjectURL(e)})),e.next=8,UP(t,a,r);case 8:return e.abrupt("return",e.sent);case 9:return e.next=11,Promise.all(n.filter((function(e){return"file"!==e.type})).map((function(e){return new Promise((function(t){var n=e;"file"!==n.type?n.source.then((function(e){var r,i=null===(r=e.match(/<tldraw[^>]*>(.*)<\/tldraw>/))||void 0===r?void 0:r[1];if(i)try{var o=(0,EP.decompressFromBase64)(i);if(null===o)return void t({type:"error",data:o,reason:"found tldraw data comment but could not parse base64"});var a=JSON.parse(o);return"application/tldraw"!==a.type&&t({type:"error",data:a,reason:"found tldraw data comment but JSON was of a different type: ".concat(a.type)}),"string"===typeof a.data?void t({type:"error",data:a,reason:"found tldraw json but data was a string instead of a TLClipboardModel object"}):void t({type:"tldraw",data:a.data})}catch(kM){return void t({type:"error",data:i,reason:"found tldraw json but data was a string instead of a TLClipboardModel object"})}else{if("html"===n.type)return void t({type:"text",data:e,subtype:"html"});if("url"===n.type)return void t({type:"text",data:e,subtype:"url"});try{var s=JSON.parse(e);return"excalidraw/clipboard"===s.type?void t({type:"excalidraw",data:s}):void t({type:"text",data:e,subtype:"json"})}catch(kM){return void t({type:"text",data:e,subtype:"text"})}}t({type:"error",data:e,reason:"unhandled case"})})):t({type:"error",data:null,reason:"unexpected file"})}))})));case 11:s=e.sent,u=X(s),e.prev=13,u.s();case 15:if((l=u.n()).done){e.next=22;break}if("tldraw"!==(c=l.value).type){e.next=20;break}return VP(t,c.data,r),e.abrupt("return");case 20:e.next=15;break;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(13),u.e(e.t0);case 27:return e.prev=27,u.f(),e.finish(27);case 30:d=X(s),e.prev=31,d.s();case 33:if((f=d.n()).done){e.next=40;break}if("excalidraw"!==(h=f.value).type){e.next=38;break}return CP(t,h.data,r),e.abrupt("return");case 38:e.next=33;break;case 40:e.next=45;break;case 42:e.prev=42,e.t1=e.catch(31),d.e(e.t1);case 45:return e.prev=45,d.f(),e.finish(45);case 48:p=X(s),e.prev=49,p.s();case 51:if((v=p.n()).done){e.next=66;break}if("text"!==(g=v.value).type||"html"!==g.subtype){e.next=64;break}if(m=(new DOMParser).parseFromString(g.data,"text/html"),y=m.querySelector("body"),!(y&&1===Array.from(y.children).filter((function(e){return 1===e.nodeType})).length&&y.firstElementChild&&"A"===y.firstElementChild.tagName&&y.firstElementChild.hasAttribute("href")&&""!==y.firstElementChild.getAttribute("href"))){e.next=61;break}return b=y.firstElementChild.getAttribute("href"),ZP(t,b,r),e.abrupt("return");case 61:if(s.some((function(e){return"text"===e.type&&"html"!==e.subtype}))||!g.data.trim()){e.next=64;break}return ZP(t,QP(g.data),r),e.abrupt("return");case 64:e.next=51;break;case 66:e.next=71;break;case 68:e.prev=68,e.t2=e.catch(49),p.e(e.t2);case 71:return e.prev=71,p.f(),e.finish(71);case 74:w=X(s),e.prev=75,w.s();case 77:if((x=w.n()).done){e.next=84;break}if("text"!==(k=x.value).type||"url"!==k.subtype){e.next=82;break}return WP(t,k.data,r),e.abrupt("return");case 82:e.next=77;break;case 84:e.next=89;break;case 86:e.prev=86,e.t3=e.catch(75),w.e(e.t3);case 89:return e.prev=89,w.f(),e.finish(89);case 92:S=X(s),e.prev=93,S.s();case 95:if((_=S.n()).done){e.next=102;break}if("text"!==(E=_.value).type||"text"!==E.subtype||!E.data.trim()){e.next=100;break}return ZP(t,E.data,r),e.abrupt("return");case 100:e.next=95;break;case 102:e.next=107;break;case 104:e.prev=104,e.t4=e.catch(93),S.e(e.t4);case 107:return e.prev=107,S.f(),e.finish(107);case 110:case"end":return e.stop()}}),e,null,[[13,24,27,30],[31,42,45,48],[49,68,71,74],[75,86,89,92],[93,104,107,110]])}))),rI.apply(this,arguments)}var iI=function(e){var t=e.getContent();if(t){var n=(0,EP.compressToBase64)(JSON.stringify({type:"application/tldraw",kind:"content",data:t}));if("undefined"!==typeof navigator){var r,i=t.shapes.map((function(t){return e.isShapeOfType(t,Oc)||e.isShapeOfType(t,Mh)||e.isShapeOfType(t,wf)?t.props.text:e.isShapeOfType(t,Mf)||e.isShapeOfType(t,gc)?t.props.url:null})).filter(Se);if(null!==(r=navigator.clipboard)&&void 0!==r&&r.write){var o=new Blob(["<tldraw>".concat(n,"</tldraw>")],{type:"text/html"}),a=i.join(" ");""===a&&(a=" "),navigator.clipboard.write([new ClipboardItem({"text/html":o,"text/plain":new Blob([a],{type:"text/plain"})})])}else navigator.clipboard.writeText&&navigator.clipboard.writeText("<tldraw>".concat(n,"</tldraw>"))}}else navigator&&navigator.clipboard&&navigator.clipboard.writeText("")};var oI=(0,t.createContext)({});function aI(e){var n=e.children,r=L((0,t.useState)([]),2),i=r[0],o=r[1],a=(0,t.useCallback)((function(e){var t,n=null!==(t=e.id)&&void 0!==t?t:bd();return o((function(t){return[].concat(u(t.filter((function(t){return t.id!==e.id}))),[R(R({},e),{},{id:n})])})),n}),[]),s=(0,t.useCallback)((function(e){return o((function(t){return t.filter((function(t){return t.id!==e}))})),e}),[]),l=(0,t.useCallback)((function(){o((function(){return[]}))}),[]);return(0,Qo.jsx)(oI.Provider,{value:{toasts:i,addToast:a,removeToast:s,clearToasts:l},children:n})}function sI(){var e=(0,t.useContext)(oI);if(!e)throw new Error("useToasts must be used within a ToastsProvider");return e}function uI(){var e=da(),n=sI().addToast,r=ax();return(0,t.useCallback)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.selectedIds,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"svg";if(0===t.length&&(t=u(e.currentPageShapeIds)),0!==t.length)switch(i){case"svg":window.navigator.clipboard&&(window.navigator.clipboard.write?window.navigator.clipboard.write([new ClipboardItem({"text/plain":dI(e,t)})]):pI(na(ea().mark((function n(){return ea().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=fy,n.next=3,lI(e,t);case 3:return n.t1=n.sent,n.abrupt("return",(0,n.t0)(n.t1));case 5:case"end":return n.stop()}}),n)})))));break;case"jpeg":case"png":var o="jpeg"===i?"image/jpeg":"image/png",a=function(e,t,n){return hI.apply(this,arguments)}(e,t,i).then((function(e){if(e){if(window.navigator.clipboard)return e;throw new Error("Copy not supported")}throw n({id:"copy-fail",icon:"warning-triangle",title:r("toast.error.copy-fail.title"),description:r("toast.error.copy-fail.desc")}),new Error("Copy not possible")}));window.navigator.clipboard.write([new ClipboardItem(O({},o,a))]).catch((function(e){e.toString().match(/^TypeError: DOMString not supported/)||console.error(e),a.then((function(e){window.navigator.clipboard.write([new ClipboardItem(O({},o,e))])}))}));break;case"json":var s=e.getContent(t);if(window.navigator.clipboard){var l=JSON.stringify(s);window.navigator.clipboard.write?window.navigator.clipboard.write([new ClipboardItem({"text/plain":new Blob([l],{type:"text/plain"})})]):pI(na(ea().mark((function e(){return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l);case 1:case"end":return e.stop()}}),e)}))))}break;default:throw new Error("Copy type ".concat(i," not supported."))}}),[e,n,r])}function lI(e,t){return cI.apply(this,arguments)}function cI(){return(cI=na(ea().mark((function e(t,n){var r;return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getSvg(n,{scale:1,background:t.instanceState.exportBackground});case 2:if(r=e.sent){e.next=5;break}throw new Error("Could not construct SVG.");case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dI(e,t){return fI.apply(this,arguments)}function fI(){return(fI=na(ea().mark((function e(t,n){return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Blob,e.t1=fy,e.next=4,lI(t,n);case 4:return e.t2=e.sent,e.t3=(0,e.t1)(e.t2),e.t4=[e.t3],e.t5={type:"text/plain"},e.abrupt("return",new e.t0(e.t4,e.t5));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hI(){return(hI=na(ea().mark((function e(t,n,r){return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=hy,e.next=3,lI(t,n);case 3:return e.t1=e.sent,e.t2={type:r,quality:1,scale:2},e.next=7,(0,e.t0)(e.t1,e.t2);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pI(e){return vI.apply(this,arguments)}function vI(){return(vI=na(ea().mark((function e(t){return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator&&navigator.clipboard){e.next=2;break}return e.abrupt("return");case 2:return e.t0=navigator.clipboard,e.next=5,t();case 5:e.t1=e.sent,e.t0.writeText.call(e.t0,e.t1);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var gI=(0,t.createContext)({});function mI(e){var n=e.children,r=da(),i=oC(),o=L((0,t.useState)([]),2),a=o[0],s=o[1],l=(0,t.useCallback)((function(e){var t,n=null!==(t=e.id)&&void 0!==t?t:bd();return s((function(t){return[].concat(u(t.filter((function(t){return t.id!==e.id}))),[R(R({},e),{},{id:n})])})),i("open-menu",{source:"dialog",id:n}),r.addOpenMenu(n),n}),[r,i]),c=(0,t.useCallback)((function(e,t){return s((function(n){return n.map((function(n){return n.id===e?R(R({},n),t):n}))})),i("open-menu",{source:"dialog",id:e}),r.addOpenMenu(e),e}),[r,i]),d=(0,t.useCallback)((function(e){return s((function(t){return t.filter((function(t){var n;return t.id!==e||(null===(n=t.onClose)||void 0===n||n.call(t),!1)}))})),i("close-menu",{source:"dialog",id:e}),r.deleteOpenMenu(e),e}),[r,i]),f=(0,t.useCallback)((function(){s((function(e){return e.forEach((function(e){var t;null===(t=e.onClose)||void 0===t||t.call(e),i("close-menu",{source:"dialog",id:e.id}),r.deleteOpenMenu(e.id)})),[]}))}),[r,i]);return(0,Qo.jsx)(gI.Provider,{value:{dialogs:a,addDialog:l,removeDialog:d,clearDialogs:f,updateDialog:c},children:n})}function yI(){var e=(0,t.useContext)(gI);if(!e)throw new Error("useDialogs must be used within a DialogsProvider");return e}function bI(){var e=da(),n=(0,t.useRef)();return(0,t.useEffect)((function(){var t=window.document.createElement("input");function r(e){return i.apply(this,arguments)}function i(){return i=na(ea().mark((function n(r){var i;return ea().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((i=r.target.files)&&0!==i.length){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,e.putExternalContent({type:"files",files:Array.from(i),point:e.viewportPageBounds.center,ignoreParent:!1});case 5:t.value="";case 6:case"end":return n.stop()}}),n)}))),i.apply(this,arguments)}return t.type="file",t.accept=Wp,t.multiple=!0,n.current=t,t.addEventListener("change",r),function(){n.current=void 0,t.removeEventListener("change",r)}}),[e]),(0,t.useCallback)((function(){var e;null===(e=n.current)||void 0===e||e.click()}),[n])}var wI=t.createContext({});function xI(e){var n=e.overrides,r=e.children,i=da(),o=yI(),a=o.addDialog,s=o.clearDialogs,l=sI().clearToasts,c=bI(),d=function(){var e=da(),n=(0,t.useRef)(null),r=(0,t.useRef)(null);return(0,t.useCallback)(function(){var t=na(ea().mark((function t(){var i,o,a,s,u,l,c,d,f,h,p,v,g,m,y,b,w,x,k,S;return ea().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(f=function(){e.isChromeForIos?(l(),window.print()):e.isSafari?(l(),document.execCommand("print",!1)):window.print()},d=function(e,t,n){try{i.innerHTML+='<div class="'.concat(s,'__item">\n        <div class="').concat(s,'__item__header">\n          ').concat(e.replace(/</g,"&lt;").replace(/>/g,"&gt;"),'\n        </div>\n        <div class="').concat(s,'__item__main">\n          ').concat(n.outerHTML,'\n        </div>\n        <div class="').concat(s,"__item__footer ").concat(s,"__item__footer__").concat(t?"":"hide",'">\n          ').concat(null!==t&&void 0!==t?t:"","\n        </div>\n      </div>")}catch(kM){console.error(kM)}},i=document.createElement("div"),o=document.createElement("style"),(a=function(e,t){e&&(e.innerHTML=""),t&&document.head.contains(t)&&document.head.removeChild(t),e&&document.body.contains(e)&&document.body.removeChild(e)})(n.current,r.current),n.current=i,r.current=o,s="tl-print-surface-".concat(bd()),i.className=s,u=!1,o.innerHTML="\n\t\t\t.".concat(s," {\n\t\t\t\tdisplay: none;\n\t\t\t}\n\n\t\t\t.").concat(s," svg {\n\t\t\t\tmax-width: 100%;\n\t\t\t\theight: 100%;\n\t\t\t\tdisplay: block;\n\t\t\t}\n\n\t\t\t@media print {\t\t\t\t  \n\t\t\t\thtml, body {\n\t\t\t\t\tmin-height: 100%;\n\t\t\t\t\theight: 100%;\n\t\t\t\t\tmargin: 0;\n\t\t\t\t}\n\n\t\t\t\tbody {\n\t\t\t\t\tposition: relative;\n\t\t\t\t}\n\n\t\t\t\tbody > * {\n\t\t\t\t\tdisplay: none;\n\t\t\t\t}\n\n\t\t\t\t.").concat(s," {\n\t\t\t\t\tdisplay: block !important;\n\t\t\t\t\tbackground: white;\n\t\t\t\t\tmin-height: 100%;\n\t\t\t\t\theight: 100%;\n\t\t\t\t\tmax-width: 100%;\n\t\t\t\t}\n\n\t\t\t\t.").concat(s,"__item {\n\t\t\t\t\tpadding: 10mm;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tmin-height: 100%;\n\t\t\t\t\tflex-direction: column;\n\t\t\t\t\tpage-break-after: always;\n\t\t\t\t\tposition: relative;\n\t\t\t\t\toverflow: hidden;\n\t\t\t\t\theight: 100%;\n\t\t\t\t}\n\n\t\t\t\t.").concat(s,"__item__main {\n\t\t\t\t\tflex: 1;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tjustify-content: center;\n\t\t\t\t\tmax-height: 100%;\n\t\t\t\t}\n\n\t\t\t\t.").concat(s,"__item__header {\n\t\t\t\t\tdisplay: none;\n\t\t\t\t}\n\n\t\t\t\t.").concat(s,"__item__footer {\n\t\t\t\t\tdisplay: none;\n\t\t\t\t\ttext-align: right;\n\t\t\t\t}\n\n\t\t\t\t.").concat(s,"__item__footer__hide {\n\t\t\t\t\tdisplay: none;\n\t\t\t\t}\n\n\t\t\t\t").concat("","\n\t\t\t}\n\n\t\t"),l=function(){document.head.appendChild(o),document.body.appendChild(i)},c=function(){e.once("change-history",(function(){a(i,o)}))},window.addEventListener("beforeprint",l),window.addEventListener("afterprint",c),h=e.pages,p=e.currentPageId,v=e.selectedIds,g={scale:1,background:!1,darkMode:!1,preserveAspectRatio:"xMidYMid meet"},!(e.selectedIds.length>0)){t.next=27;break}return t.next=23,e.getSvg(v,g);case 23:(m=t.sent)&&(y=h.find((function(e){return e.id===p})),d("tldraw \u2014 ".concat(null===y||void 0===y?void 0:y.name),null,m),f()),t.next=46;break;case 27:if(!u){t.next=41;break}b=0;case 29:if(!(b<h.length)){t.next=38;break}return w=h[b],t.next=33,e.getSvg(e.getSortedChildIds(w.id),g);case 33:(x=t.sent)&&d("tldraw \u2014 ".concat(w.name),"".concat(b,"/").concat(h.length),x);case 35:b++,t.next=29;break;case 38:f(),t.next=46;break;case 41:return k=e.currentPage,t.next=44,e.getSvg(e.getSortedChildIds(k.id),g);case 44:(S=t.sent)&&(d("tldraw \u2014 ".concat(k.name),null,S),f());case 46:window.removeEventListener("beforeprint",l),window.removeEventListener("afterprint",c);case 48:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),[e])}(),f=function(){var e=da(),n=oC(),r=(0,t.useCallback)((function(t){0!==e.selectedIds.length&&(iI(e),n("copy",{source:t}))}),[e,n]),i=(0,t.useCallback)((function(t){0!==e.selectedIds.length&&(iI(e),e.deleteShapes(),n("cut",{source:t}))}),[e,n]),o=(0,t.useCallback)(function(){var t=na(ea().mark((function t(r,i,a){return ea().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===e.editingId&&!qP(e)){t.next=2;break}return t.abrupt("return");case 2:Array.isArray(r)&&r[0]instanceof ClipboardItem?(tI(e,r,a),n("paste",{source:"menu"})):navigator.clipboard.read().then((function(e){o(e,i,a)}));case 3:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),[e,n]);return{copy:r,cut:i,paste:o}}(),h=f.cut,p=f.copy,v=f.paste,g=uI(),m=function(){var e=da(),n=sI().addToast,r=ax();return(0,t.useCallback)(function(){var t=na(ea().mark((function t(){var i,o,a,s,l,c,d,f,h,p,v=arguments;return ea().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>0&&void 0!==v[0]?v[0]:e.selectedIds,o=v.length>1&&void 0!==v[1]?v[1]:"png",0===i.length&&(i=u(e.currentPageShapeIds)),0!==i.length){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,e.getSvg(i,{scale:1,background:e.instanceState.exportBackground});case 7:if(a=t.sent){t.next=10;break}throw new Error("Could not construct SVG.");case 10:s="shapes",1===i.length&&(l=e.getShapeById(i[0]),s=e.isShapeOfType(l,lh)?null!==(c=l.props.name)&&void 0!==c?c:"frame":l.id.replace(/:/,"_")),t.t0=o,t.next="svg"===t.t0?15:"webp"===t.t0||"png"===t.t0?20:"json"===t.t0?30:35;break;case 15:return t.next=17,vy(a);case 17:return yy(t.sent,"".concat(s||"shapes",".svg")),t.abrupt("return");case 20:return t.next=22,hy(a,{type:o,quality:1,scale:2});case 22:if(d=t.sent){t.next=26;break}return n({id:"export-fail",title:r("toast.error.export-fail.title"),description:r("toast.error.export-fail.desc")}),t.abrupt("return");case 26:return yy(f=URL.createObjectURL(d),"".concat(s||"shapes",".").concat(o)),URL.revokeObjectURL(f),t.abrupt("return");case 30:return h=e.getContent(i),yy(p=URL.createObjectURL(new Blob([JSON.stringify(h,null,4)],{type:"application/json"})),"".concat(s||"shapes",".json")),URL.revokeObjectURL(p),t.abrupt("return");case 35:throw new Error("Export type ".concat(o," not supported."));case 36:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),[e,n,r])}(),y=oC(),b=t.useMemo((function(){var e=function(e){return Object.fromEntries(e.map((function(e){return[e.id,e]})))}([{id:"edit-link",label:"action.edit-link",icon:"link",readonlyOk:!1,onSelect:function(e){y("edit-link",{source:e}),i.mark("edit-link"),a({component:kP})}},{id:"insert-embed",label:"action.insert-embed",readonlyOk:!1,kbd:"$i",onSelect:function(e){y("insert-embed",{source:e}),a({component:_P})}},{id:"insert-media",label:"action.insert-media",kbd:"$u",readonlyOk:!1,onSelect:function(e){y("insert-media",{source:e}),c()}},{id:"undo",label:"action.undo",icon:"undo",kbd:"$z",readonlyOk:!1,onSelect:function(e){y("undo",{source:e}),i.undo()}},{id:"redo",label:"action.redo",icon:"redo",kbd:"$!z",readonlyOk:!1,onSelect:function(e){y("redo",{source:e}),i.redo()}},{id:"export-as-svg",label:"action.export-as-svg",menuLabel:"action.export-as-svg.short",contextMenuLabel:"action.export-as-svg.short",readonlyOk:!0,onSelect:function(e){y("export-as",{format:"svg",source:e}),m(i.selectedIds,"svg")}},{id:"export-as-png",label:"action.export-as-png",menuLabel:"action.export-as-png.short",contextMenuLabel:"action.export-as-png.short",readonlyOk:!0,onSelect:function(e){y("export-as",{format:"png",source:e}),m(i.selectedIds,"png")}},{id:"export-as-json",label:"action.export-as-json",menuLabel:"action.export-as-json.short",contextMenuLabel:"action.export-as-json.short",readonlyOk:!0,onSelect:function(e){y("export-as",{format:"json",source:e}),m(i.selectedIds,"json")}},{id:"copy-as-svg",label:"action.copy-as-svg",menuLabel:"action.copy-as-svg.short",contextMenuLabel:"action.copy-as-svg.short",kbd:"$!c",readonlyOk:!0,onSelect:function(e){y("copy-as",{format:"svg",source:e}),g(i.selectedIds,"svg")}},{id:"copy-as-png",label:"action.copy-as-png",menuLabel:"action.copy-as-png.short",contextMenuLabel:"action.copy-as-png.short",readonlyOk:!0,onSelect:function(e){y("copy-as",{format:"png",source:e}),g(i.selectedIds,"png")}},{id:"copy-as-json",label:"action.copy-as-json",menuLabel:"action.copy-as-json.short",contextMenuLabel:"action.copy-as-json.short",readonlyOk:!0,onSelect:function(e){y("copy-as",{format:"json",source:e}),g(i.selectedIds,"json")}},{id:"toggle-auto-size",label:"action.toggle-auto-size",readonlyOk:!1,onSelect:function(e){y("toggle-auto-size",{source:e}),i.mark(),i.updateShapes(i.selectedShapes.filter((function(e){return i.isShapeOfType(e,Oc)&&!1===e.props.autoSize})).map((function(e){return{id:e.id,type:e.type,props:R(R({},e.props),{},{w:8,autoSize:!0})}})))}},{id:"open-embed-link",label:"action.open-embed-link",readonlyOk:!0,onSelect:function(e){y("open-embed-link",{source:e});var t=i.selectedIds,n="No embed shapes selected";if(1===t.length){var r=i.getShapeById(t[0]);r&&i.isShapeOfType(r,gc)?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_blank";fa.openWindow(e,t)}(r.props.url,"_blank"):console.error(n)}else console.error(n)}},{id:"convert-to-bookmark",label:"action.convert-to-bookmark",readonlyOk:!1,onSelect:function(e){y("convert-to-bookmark",{source:e});var t,n=[],r=[],o=X(i.selectedShapes);try{for(o.s();!(t=o.n()).done;){var a=t.value;if(a&&i.isShapeOfType(a,gc)&&a.props.url){var s=new va(a.x,a.y);s.rot(-a.rotation),s.add(new va(a.props.w/2-150,a.props.h/2-160)),s.rot(a.rotation),n.push({id:li(),type:"bookmark",rotation:a.rotation,x:s.x,y:s.y,props:{url:a.props.url,opacity:"1"}}),r.push(a.id)}}}catch(YK){o.e(YK)}finally{o.f()}i.mark("convert shapes to bookmark"),i.deleteShapes(r),i.createShapes(n)}},{id:"convert-to-embed",label:"action.convert-to-embed",readonlyOk:!1,onSelect:function(e){y("convert-to-embed",{source:e});var t,n=$(i.selectedIds.map((function(e){return i.getShapeById(e)}))),r=[],o=[],a=X(n);try{for(a.s();!(t=a.n()).done;){var s=t.value;if(i.isShapeOfType(s,Mf)){var u=s.props.url,l=lc(s.props.url);if(l&&l.definition){var c=l.definition,d=c.width,f=c.height,h=new va(s.x,s.y);h.rot(-s.rotation),h.add(new va(s.props.w/2-d/2,s.props.h/2-f/2)),h.rot(s.rotation);var p={id:li(),type:"embed",x:h.x,y:h.y,rotation:s.rotation,props:{url:u,w:d,h:f}};r.push(p),o.push(s.id)}}}}catch(YK){a.e(YK)}finally{a.f()}i.mark("convert shapes to embed"),i.deleteShapes(o),i.createShapes(r)}},{id:"duplicate",kbd:"$d",label:"action.duplicate",icon:"duplicate",readonlyOk:!1,onSelect:function(e){if("select"===i.currentToolId){y("duplicate-shapes",{source:e});var t=i.selectedIds,n=Wa.Common($(t.map((function(e){return i.getPageBoundsById(e)})))),r=i.canMoveCamera?{x:n.width+10,y:0}:{x:16/i.zoomLevel,y:16/i.zoomLevel};i.mark("duplicate shapes"),i.duplicateShapes(t,r)}}},{id:"ungroup",label:"action.ungroup",kbd:"$!g",icon:"ungroup",readonlyOk:!1,onSelect:function(e){y("ungroup-shapes",{source:e}),i.mark("ungroup"),i.ungroupShapes(i.selectedIds)}},{id:"group",label:"action.group",kbd:"$g",icon:"group",readonlyOk:!1,onSelect:function(e){y("group-shapes",{source:e});var t=i.onlySelectedShape;t&&i.isShapeOfType(t,ah)?(i.mark("ungroup"),i.ungroupShapes(i.selectedIds)):(i.mark("group"),i.groupShapes(i.selectedIds))}},{id:"align-left",label:"action.align-left",kbd:"?A",icon:"align-left",readonlyOk:!1,onSelect:function(e){y("align-shapes",{operation:"left",source:e}),i.mark("align left"),i.alignShapes("left",i.selectedIds)}},{id:"align-center-horizontal",label:"action.align-center-horizontal",contextMenuLabel:"action.align-center-horizontal.short",kbd:"?H",icon:"align-center-horizontal",readonlyOk:!1,onSelect:function(e){y("align-shapes",{operation:"center-horizontal",source:e}),i.mark("align center horizontal"),i.alignShapes("center-horizontal",i.selectedIds)}},{id:"align-right",label:"action.align-right",kbd:"?D",icon:"align-right",readonlyOk:!1,onSelect:function(e){y("align-shapes",{operation:"right",source:e}),i.mark("align right"),i.alignShapes("right",i.selectedIds)}},{id:"align-center-vertical",label:"action.align-center-vertical",contextMenuLabel:"action.align-center-vertical.short",kbd:"?V",icon:"align-center-vertical",readonlyOk:!1,onSelect:function(e){y("align-shapes",{operation:"center-vertical",source:e}),i.mark("align center vertical"),i.alignShapes("center-vertical",i.selectedIds)}},{id:"align-top",label:"action.align-top",icon:"align-top",kbd:"?W",readonlyOk:!1,onSelect:function(e){y("align-shapes",{operation:"top",source:e}),i.mark("align top"),i.alignShapes("top",i.selectedIds)}},{id:"align-bottom",label:"action.align-bottom",icon:"align-bottom",kbd:"?S",readonlyOk:!1,onSelect:function(e){y("align-shapes",{operation:"bottom",source:e}),i.mark("align bottom"),i.alignShapes("bottom",i.selectedIds)}},{id:"distribute-horizontal",label:"action.distribute-horizontal",contextMenuLabel:"action.distribute-horizontal.short",icon:"distribute-horizontal",kbd:"?!h",readonlyOk:!1,onSelect:function(e){y("distribute-shapes",{operation:"horizontal",source:e}),i.mark("distribute horizontal"),i.distributeShapes("horizontal",i.selectedIds)}},{id:"distribute-vertical",label:"action.distribute-vertical",contextMenuLabel:"action.distribute-vertical.short",icon:"distribute-vertical",kbd:"?!V",readonlyOk:!1,onSelect:function(e){y("distribute-shapes",{operation:"vertical",source:e}),i.mark("distribute vertical"),i.distributeShapes("vertical",i.selectedIds)}},{id:"stretch-horizontal",label:"action.stretch-horizontal",contextMenuLabel:"action.stretch-horizontal.short",icon:"stretch-horizontal",readonlyOk:!1,onSelect:function(e){y("stretch-shapes",{operation:"horizontal",source:e}),i.mark("stretch horizontal"),i.stretchShapes("horizontal",i.selectedIds)}},{id:"stretch-vertical",label:"action.stretch-vertical",contextMenuLabel:"action.stretch-vertical.short",icon:"stretch-vertical",readonlyOk:!1,onSelect:function(e){y("stretch-shapes",{operation:"vertical",source:e}),i.mark("stretch vertical"),i.stretchShapes("vertical",i.selectedIds)}},{id:"flip-horizontal",label:"action.flip-horizontal",contextMenuLabel:"action.flip-horizontal.short",kbd:"!h",readonlyOk:!1,onSelect:function(e){y("flip-shapes",{operation:"horizontal",source:e}),i.mark("flip horizontal"),i.flipShapes("horizontal",i.selectedIds)}},{id:"flip-vertical",label:"action.flip-vertical",contextMenuLabel:"action.flip-vertical.short",kbd:"!v",readonlyOk:!1,onSelect:function(e){y("flip-shapes",{operation:"vertical",source:e}),i.mark("flip vertical"),i.flipShapes("vertical",i.selectedIds)}},{id:"pack",label:"action.pack",icon:"pack",readonlyOk:!1,onSelect:function(e){y("pack-shapes",{source:e}),i.mark("pack"),i.packShapes(i.selectedIds)}},{id:"stack-vertical",label:"action.stack-vertical",contextMenuLabel:"action.stack-vertical.short",icon:"stack-vertical",readonlyOk:!1,onSelect:function(e){y("stack-shapes",{operation:"vertical",source:e}),i.mark("stack-vertical"),i.stackShapes("vertical",i.selectedIds)}},{id:"stack-horizontal",label:"action.stack-horizontal",contextMenuLabel:"action.stack-horizontal.short",icon:"stack-horizontal",readonlyOk:!1,onSelect:function(e){y("stack-shapes",{operation:"horizontal",source:e}),i.mark("stack-horizontal"),i.stackShapes("horizontal",i.selectedIds)}},{id:"bring-to-front",label:"action.bring-to-front",kbd:"]",icon:"bring-to-front",readonlyOk:!1,onSelect:function(e){y("reorder-shapes",{operation:"toFront",source:e}),i.mark("bring to front"),i.bringToFront()}},{id:"bring-forward",label:"action.bring-forward",icon:"bring-forward",kbd:"?]",readonlyOk:!1,onSelect:function(e){y("reorder-shapes",{operation:"forward",source:e}),i.mark("bring forward"),i.bringForward()}},{id:"send-backward",label:"action.send-backward",icon:"send-backward",kbd:"?[",readonlyOk:!1,onSelect:function(e){y("reorder-shapes",{operation:"backward",source:e}),i.mark("send backward"),i.sendBackward()}},{id:"send-to-back",label:"action.send-to-back",icon:"send-to-back",kbd:"[",readonlyOk:!1,onSelect:function(e){y("reorder-shapes",{operation:"toBack",source:e}),i.mark("send to back"),i.sendToBack()}},{id:"cut",label:"action.cut",kbd:"$x",readonlyOk:!1,onSelect:function(e){i.mark("cut"),h(e)}},{id:"copy",label:"action.copy",kbd:"$c",readonlyOk:!0,onSelect:function(e){p(e)}},{id:"paste",label:"action.paste",kbd:"$v",readonlyOk:!1,onSelect:function(e){var t;null===(t=navigator.clipboard)||void 0===t||t.read().then((function(t){v(t,e,"context-menu"===e?i.inputs.currentPagePoint:void 0)}))}},{id:"select-all",label:"action.select-all",kbd:"$a",readonlyOk:!0,onSelect:function(e){y("select-all-shapes",{source:e}),"select"!==i.currentToolId&&(i.cancel(),i.setSelectedTool("select")),i.mark("select all kbd"),i.selectAll()}},{id:"select-none",label:"action.select-none",readonlyOk:!0,onSelect:function(e){y("select-none-shapes",{source:e}),i.mark("select none"),i.selectNone()}},{id:"delete",label:"action.delete",kbd:"\u232b,del,backspace",icon:"trash",readonlyOk:!1,onSelect:function(e){"select"===i.currentToolId&&(y("delete-shapes",{source:e}),i.mark("delete"),i.deleteShapes())}},{id:"rotate-cw",label:"action.rotate-cw",icon:"rotate-cw",readonlyOk:!1,onSelect:function(e){if(0!==i.selectedIds.length){y("rotate-cw",{source:e}),i.mark("rotate-cw");var t=i.selectionRotation%(ya/2),n=_a(t,0)||_a(t,ya/2);i.rotateShapesBy(i.selectedIds,ya/2-(n?0:t))}}},{id:"rotate-ccw",label:"action.rotate-ccw",icon:"rotate-ccw",readonlyOk:!1,onSelect:function(e){if(0!==i.selectedIds.length){y("rotate-ccw",{source:e}),i.mark("rotate-ccw");var t=i.selectionRotation%(ya/2),n=_a(t,0);i.rotateShapesBy(i.selectedIds,n?-ya/2:-t)}}},{id:"zoom-in",label:"action.zoom-in",kbd:"$=,=",readonlyOk:!0,onSelect:function(e){y("zoom-in",{source:e}),i.zoomIn(i.viewportScreenCenter,{duration:eu})}},{id:"zoom-out",label:"action.zoom-out",kbd:"$-,-",readonlyOk:!0,onSelect:function(e){y("zoom-out",{source:e}),i.zoomOut(i.viewportScreenCenter,{duration:eu})}},{id:"zoom-to-100",label:"action.zoom-to-100",icon:"reset-zoom",kbd:"!0",readonlyOk:!0,onSelect:function(e){y("reset-zoom",{source:e}),i.resetZoom(i.viewportScreenCenter,{duration:eu})}},{id:"zoom-to-fit",label:"action.zoom-to-fit",kbd:"!1",readonlyOk:!0,onSelect:function(e){y("zoom-to-fit",{source:e}),i.zoomToFit({duration:eu})}},{id:"zoom-to-selection",label:"action.zoom-to-selection",kbd:"!2",readonlyOk:!0,onSelect:function(e){y("zoom-to-selection",{source:e}),i.zoomToSelection({duration:eu})}},{id:"toggle-snap-mode",label:"action.toggle-snap-mode",menuLabel:"action.toggle-snap-mode.menu",readonlyOk:!1,onSelect:function(e){y("toggle-snap-mode",{source:e}),i.setSnapMode(!i.isSnapMode)},checkbox:!0},{id:"toggle-dark-mode",label:"action.toggle-dark-mode",menuLabel:"action.toggle-dark-mode.menu",kbd:"$/",readonlyOk:!0,onSelect:function(e){y("toggle-dark-mode",{source:e}),i.setDarkMode(!i.isDarkMode)},checkbox:!0},{id:"toggle-reduce-motion",label:"action.toggle-reduce-motion",menuLabel:"action.toggle-reduce-motion.menu",readonlyOk:!0,onSelect:function(e){y("toggle-reduce-motion",{source:e}),i.setAnimationSpeed(0===i.animationSpeed?1:0)},checkbox:!0},{id:"toggle-transparent",label:"action.toggle-transparent",menuLabel:"action.toggle-transparent.menu",contextMenuLabel:"action.toggle-transparent.context-menu",readonlyOk:!0,onSelect:function(e){y("toggle-transparent",{source:e}),i.updateInstanceState({exportBackground:!i.instanceState.exportBackground},!0)},checkbox:!0},{id:"toggle-tool-lock",label:"action.toggle-tool-lock",menuLabel:"action.toggle-tool-lock.menu",readonlyOk:!1,kbd:"q",onSelect:function(e){y("toggle-tool-lock",{source:e}),i.setToolLocked(!i.isToolLocked)},checkbox:!0},{id:"toggle-focus-mode",label:"action.toggle-focus-mode",menuLabel:"action.toggle-focus-mode.menu",readonlyOk:!0,kbd:"$.",checkbox:!0,onSelect:function(e){requestAnimationFrame((function(){i.batch((function(){y("toggle-focus-mode",{source:e}),s(),l(),i.setFocusMode(!i.isFocusMode)}))}))}},{id:"toggle-grid",label:"action.toggle-grid",menuLabel:"action.toggle-grid.menu",readonlyOk:!0,kbd:"$'",onSelect:function(e){y("toggle-grid-mode",{source:e}),i.setGridMode(!i.isGridMode)},checkbox:!0},{id:"toggle-debug-mode",label:"action.toggle-debug-mode",menuLabel:"action.toggle-debug-mode.menu",readonlyOk:!0,onSelect:function(e){y("toggle-debug-mode",{source:e}),i.updateInstanceState({isDebugMode:!i.instanceState.isDebugMode},!0)},checkbox:!0},{id:"print",label:"action.print",kbd:"$p",readonlyOk:!0,onSelect:function(e){y("print",{source:e}),d()}},{id:"exit-pen-mode",label:"action.exit-pen-mode",icon:"cross-2",readonlyOk:!0,onSelect:function(e){y("exit-pen-mode",{source:e}),i.setPenMode(!1)}},{id:"stop-following",label:"action.stop-following",icon:"cross-2",readonlyOk:!0,onSelect:function(e){y("stop-following",{source:e}),i.stopFollowingUser()}},{id:"back-to-content",label:"action.back-to-content",icon:"arrow-left",readonlyOk:!0,onSelect:function(e){y("zoom-to-content",{source:e}),i.zoomToContent()}},{id:"toggle-lock",label:"action.toggle-lock",readonlyOk:!1,kbd:"!$l",onSelect:function(e){y("toggle-lock",{source:e}),i.toggleLock()}}]);return n?n(i,e,void 0):e}),[y,n,i,a,c,m,g,h,p,v,s,l,d]);return(0,Qo.jsx)(wI.Provider,{value:b,children:r})}function kI(){var e=t.useContext(wI);if(!e)throw new Error("useTools must be used within a ToolProvider");return e}function SI(e){return e.filter((function(e){return void 0!==e&&null!==e&&!1!==e}))}function _I(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=SI(n);return 0===i.length?null:{id:e,type:"group",checkbox:i.every((function(e){return"item"===e.type&&e.actionItem.checkbox})),disabled:i.every((function(e){return e.disabled})),readonlyOk:i.some((function(e){return e.readonlyOk})),children:i}}function EI(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=SI(r);return 0===o.length?null:{id:e,type:"submenu",label:t,children:o,disabled:o.every((function(e){return e.disabled})),readonlyOk:o.some((function(e){return e.readonlyOk}))}}function CI(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.readonlyOk,r=void 0===n||n,i=t.disabled;return{id:e,type:"custom",disabled:void 0!==i&&i,readonlyOk:r}}function PI(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)throw Error("No action item provided to menuItem");if(!e.label)throw Error("Trying to create menu item for action item that doesn't have a label");var n=t.checked,r=void 0!==n&&n,i=t.disabled,o=void 0!==i&&i;return{id:e.id,type:"item",actionItem:e,disabled:o,checked:r,readonlyOk:e.readonlyOk}}function II(e){var t=e.selectedIds.map((function(t){return e.getShapeById(t)}));return t.filter((function(t){return!!t&&((!e.isShapeOfType(t,wf)||"binding"!==t.props.start.type)&&(!e.isShapeOfType(t,wf)||"binding"!==t.props.end.type))}))}var TI=function(){var e=da();return la("threeStackableItems",(function(){return II(e).length>2}),[e])},MI=function(){var e=da();return la("allowGroup",(function(){return II(e).length>1}),[e])},AI=function(){var e=da();return la("allowUngroup",(function(){return e.selectedIds.some((function(t){var n;return"group"===(null===(n=e.getShapeById(t))||void 0===n?void 0:n.type)}))}),[])};var OI="undefined"!==typeof window&&"navigator"in window&&Boolean(navigator.clipboard)&&Boolean(navigator.clipboard.read),jI=[0,380,420,460,580,640,840,1023],RI=t.createContext(0);function LI(e){var t=e.children,n=da(),r=la("breakpoint",(function(){for(var e=n.viewportScreenBounds.width,t=jI,r=0;r<t.length-1;r++)if(e>t[r]&&e<=t[r+1])return r;return t.length}),[n]);return(0,Qo.jsx)(RI.Provider,{value:r,children:t})}function DI(){var e=(0,t.useContext)(RI),n=new URL(window.location.href).searchParams.get("layout");return"desktop"===n?e=7:"mobile"===n&&(e=1),e}function NI(){var e=da();return la("hasLinkShapeSelected",(function(){var t=e.selectedShapes;return 1===t.length&&"url"in t[0].props&&"embed"!==t[0].type}),[e])}var zI=t.createContext({}),BI=ua((function(e){var n=e.overrides,r=e.children,i=da(),o=kI(),a=i.selectedIds.length,s=a>0,u=a>1,l=a>2,c=TI(),d=MI(),f=AI(),h=NI(),p=DI(),v=1===i.zoomLevel,g=(0,t.useMemo)((function(){var e=[PI(o["align-left"],{disabled:!u}),PI(o["align-center-horizontal"],{disabled:!u}),PI(o["align-right"],{disabled:!u}),PI(o["stretch-horizontal"],{disabled:!u}),PI(o["align-top"],{disabled:!u}),PI(o["align-center-vertical"],{disabled:!u}),PI(o["align-bottom"],{disabled:!u}),PI(o["stretch-vertical"],{disabled:!u}),PI(o["distribute-horizontal"],{disabled:!l}),PI(o["distribute-vertical"],{disabled:!l}),PI(o["stack-horizontal"],{disabled:!c}),PI(o["stack-vertical"],{disabled:!c}),PI(o["send-to-back"],{disabled:!s}),PI(o["send-backward"],{disabled:!s}),PI(o["bring-forward"],{disabled:!s}),PI(o["bring-to-front"],{disabled:!s}),p<5?PI(o["zoom-to-100"],{disabled:!!v}):PI(o["rotate-ccw"],{disabled:!s}),PI(o["rotate-cw"],{disabled:!s}),PI(o["edit-link"],{disabled:!h}),d?PI(o.group,{disabled:!u}):f?PI(o.ungroup):PI(o.group,{disabled:!u})];return n?n(i,e,{actions:o,oneSelected:s,twoSelected:u,threeSelected:l}):e}),[i,v,d,n,o,s,u,l,c,f,h,p]);return(0,Qo.jsx)(zI.Provider,{value:g,children:r})}));function FI(){var e=da();return la("showAutoSizeToggle",(function(){var t=e.selectedShapes;return 1===t.length&&e.isShapeOfType(t[0],Oc)&&!1===t[0].props.autoSize}),[e])}var UI=t.createContext({}),KI=ua((function(e){var n,r=e.overrides,i=e.children,o=da(),a=kI(),s=FI(),u=function(){var e=da();return la("onlyFlippableShape",(function(){var t=e.selectedShapes;return 1===t.length&&t.every((function(t){return e.isShapeOfType(t,ah)||e.isShapeOfType(t,wf)||e.isShapeOfType(t,tp)||e.isShapeOfType(t,Kf)}))}),[e])}(),l=o.selectedIds.length,c=l>0,d=la("oneEmbedSelected",(function(){return 1===o.selectedIds.length&&o.selectedIds.some((function(e){var t=o.getShapeById(e);return t&&o.isShapeOfType(t,gc)&&t.props.url}))}),[]),f=la("oneEmbeddableBookmarkSelected",(function(){return 1===o.selectedIds.length&&o.selectedIds.some((function(e){var t=o.getShapeById(e);return t&&o.isShapeOfType(t,Mf)&&t.props.url&&lc(t.props.url)}))}),[]),h=l>1,p=l>2,v=TI(),g=la("atLeastOneShapeOnPage",(function(){return o.currentPageShapeIds.size>0}),[]),m=la("isTransparentBg",(function(){return o.instanceState.exportBackground}),[]),y=MI(),b=AI(),w=Boolean(null===(n=window.navigator.clipboard)||void 0===n?void 0:n.write),x=NI(),k=o.onlySelectedShape,S=k&&o.isShapeOrAncestorLocked(k),_=(0,t.useMemo)((function(){var e=SI([_I("selection",d&&PI(a["open-embed-link"]),d&&!S&&PI(a["convert-to-bookmark"]),f&&PI(a["convert-to-embed"]),s&&PI(a["toggle-auto-size"]),x&&!S&&PI(a["edit-link"]),c&&!S&&PI(a.duplicate),y&&!S&&PI(a.group),b&&!S&&PI(a.ungroup),c&&PI(a["toggle-lock"])),_I("modify",(h||u)&&EI("arrange","context-menu.arrange",h&&_I("align",PI(a["align-left"]),PI(a["align-center-horizontal"]),PI(a["align-right"]),PI(a["align-top"]),PI(a["align-center-vertical"]),PI(a["align-bottom"])),p&&_I("distribute",PI(a["distribute-horizontal"]),PI(a["distribute-vertical"])),h&&_I("stretch",PI(a["stretch-horizontal"]),PI(a["stretch-vertical"])),u&&!S&&_I("flip",PI(a["flip-horizontal"]),PI(a["flip-vertical"])),h&&_I("order",PI(a.pack,{disabled:!h}),v&&PI(a["stack-vertical"]),v&&PI(a["stack-horizontal"]))),c&&!S&&EI("reorder","context-menu.reorder",_I("reorder",PI(a["bring-to-front"]),PI(a["bring-forward"]),PI(a["send-backward"]),PI(a["send-to-back"]))),c&&!S&&CI("MOVE_TO_PAGE_MENU",{readonlyOk:!1})),_I("clipboard-group",c&&!S&&PI(a.cut),c&&PI(a.copy),OI&&PI(a.paste)),g&&_I("conversions",EI("copy-as","context-menu.copy-as",_I("copy-as-group",PI(a["copy-as-svg"]),w&&PI(a["copy-as-png"]),PI(a["copy-as-json"])),_I("export-bg",PI(a["toggle-transparent"],{checked:!m}))),EI("export-as","context-menu.export-as",_I("export-as-group",PI(a["export-as-svg"]),PI(a["export-as-png"]),PI(a["export-as-json"])),_I("export-bg,",PI(a["toggle-transparent"],{checked:!m})))),g&&_I("set-selection-group",PI(a["select-all"]),c&&PI(a["select-none"])),c&&!S&&_I("delete-group",PI(a.delete))]);return r&&(e=r(o,e,{actions:a,oneSelected:c,twoSelected:h,threeSelected:p,showAutoSizeToggle:s,showUngroup:b,onlyFlippableShapeSelected:u})),e}),[o,r,a,c,h,p,s,u,g,v,y,b,w,x,d,f,m,S]);return(0,Qo.jsx)(UI.Provider,{value:_,children:i})}));function VI(){var e=t.useContext(UI);if(!e)throw new Error("useContextMenuSchema must be used inside of a TLUiContextMenuSchemaProvider.");return e}var WI=t.createContext({});function HI(e){var n=e.overrides,r=e.children,i=da(),o=oC(),a=yI().addDialog,s=bI(),l=la(ks.highlighterTool),c=t.useMemo((function(){var e=[{id:"select",label:"tool.select",icon:"tool-pointer",kbd:"v",readonlyOk:!0,onSelect:function(e){i.setSelectedTool("select"),o("select-tool",{source:e,id:"select"})}},{id:"hand",label:"tool.hand",icon:"tool-hand",kbd:"h",readonlyOk:!0,onSelect:function(e){i.setSelectedTool("hand"),o("select-tool",{source:e,id:"hand"})}},{id:"eraser",label:"tool.eraser",icon:"tool-eraser",kbd:"e",readonlyOk:!1,onSelect:function(e){i.setSelectedTool("eraser"),o("select-tool",{source:e,id:"eraser"})}},{id:"draw",label:"tool.draw",readonlyOk:!1,icon:"tool-pencil",kbd:"d,b,x",onSelect:function(e){i.setSelectedTool("draw"),o("select-tool",{source:e,id:"draw"})}}].concat(u(u(fo.values).map((function(e){return{id:e,label:"tool.".concat(e),readonlyOk:!1,meta:{geo:e},kbd:"rectangle"===e?"r":"ellipse"===e?"o":void 0,icon:"geo-"+e,onSelect:function(t){i.batch((function(){i.updateInstanceState({stylesForNextShape:R(R({},i.instanceState.stylesForNextShape),{},O({},fo.id,e))},!0),i.setSelectedTool("geo"),o("select-tool",{source:t,id:"geo-".concat(e)})}))}}}))),[{id:"arrow",label:"tool.arrow",readonlyOk:!1,icon:"tool-arrow",kbd:"a",onSelect:function(e){i.setSelectedTool("arrow"),o("select-tool",{source:e,id:"arrow"})}},{id:"line",label:"tool.line",readonlyOk:!1,icon:"tool-line",kbd:"l",onSelect:function(e){i.setSelectedTool("line"),o("select-tool",{source:e,id:"line"})}},{id:"frame",label:"tool.frame",readonlyOk:!1,icon:"tool-frame",kbd:"f",onSelect:function(e){i.setSelectedTool("frame"),o("select-tool",{source:e,id:"frame"})}},{id:"text",label:"tool.text",readonlyOk:!1,icon:"tool-text",kbd:"t",onSelect:function(e){i.setSelectedTool("text"),o("select-tool",{source:e,id:"text"})}},{id:"asset",label:"tool.asset",readonlyOk:!1,icon:"tool-media",kbd:"$u",onSelect:function(e){s(),o("select-tool",{source:e,id:"media"})}},{id:"note",label:"tool.note",readonlyOk:!1,icon:"tool-note",kbd:"n",onSelect:function(e){i.setSelectedTool("note"),o("select-tool",{source:e,id:"note"})}},{id:"laser",label:"tool.laser",readonlyOk:!0,icon:"tool-laser",kbd:"k",onSelect:function(e){i.setSelectedTool("laser"),o("select-tool",{source:e,id:"laser"})}},{id:"embed",label:"tool.embed",readonlyOk:!1,icon:"tool-embed",onSelect:function(e){a({component:_P}),o("select-tool",{source:e,id:"embed"})}}]);l&&e.push({id:"highlight",label:"tool.highlight",readonlyOk:!0,icon:"tool-highlight",kbd:"!d",onSelect:function(e){i.setSelectedTool("highlight"),o("select-tool",{source:e,id:"highlight"})}});var t=Object.fromEntries(e.map((function(e){return[e.id,e]})));return n?n(i,t,{insertMedia:s}):t}),[l,n,i,o,s,a]);return(0,Qo.jsx)(WI.Provider,{value:c,children:r})}function YI(){var e=t.useContext(WI);if(!e)throw new Error("useTools must be used within a ToolProvider");return e}var XI=t.createContext({}),qI=ua((function(e){var n=e.overrides,r=e.children,i=da(),o=YI(),a=kI(),s=(0,t.useMemo)((function(){var e=$([_I("shortcuts-dialog.tools",PI(a["toggle-tool-lock"]),PI(o.select),PI(o.draw),PI(o.eraser),PI(o.hand),PI(o.rectangle),PI(o.ellipse),PI(o.arrow),PI(o.line),PI(o.text),PI(o.frame),PI(o.note),PI(o.laser)),_I("shortcuts-dialog.file",PI(a["insert-media"]),PI(a.print)),_I("shortcuts-dialog.preferences",PI(a["toggle-dark-mode"]),PI(a["toggle-focus-mode"]),PI(a["toggle-grid"])),_I("shortcuts-dialog.edit",PI(a.undo),PI(a.redo),PI(a.cut),PI(a.copy),PI(a.paste),PI(a["select-all"]),PI(a.delete),PI(a.duplicate),PI(a["export-as-svg"]),PI(a["export-as-png"])),_I("shortcuts-dialog.view",PI(a["zoom-in"]),PI(a["zoom-out"]),PI(a["zoom-to-100"]),PI(a["zoom-to-fit"]),PI(a["zoom-to-selection"])),_I("shortcuts-dialog.transform",PI(a["bring-to-front"]),PI(a["bring-forward"]),PI(a["send-backward"]),PI(a["send-to-back"]),PI(a.group),PI(a.ungroup),PI(a["flip-horizontal"]),PI(a["flip-vertical"]),PI(a["align-top"]),PI(a["align-center-vertical"]),PI(a["align-bottom"]),PI(a["align-left"]),PI(a["align-center-horizontal"]),PI(a["align-right"]))]);return n?n(i,e,{tools:o,actions:a}):e}),[i,n,a,o]);return(0,Qo.jsx)(XI.Provider,{value:s,children:r})}));function $I(){var e=da();return la("isReadOnlyMode",(function(){return e.isReadOnly}),[e])}var GI=function(){var e=ax(),n=$I(),r=function(){var e=t.useContext(XI);if(!e)throw new Error("Shortcuts must be used inside of a ShortcutsProvider.");return e}();return(0,Qo.jsxs)(Qo.Fragment,{children:[(0,Qo.jsxs)(mx,{className:"tlui-shortcuts-dialog__header",children:[(0,Qo.jsx)(yx,{children:e("shortcuts-dialog.title")}),(0,Qo.jsx)(bx,{})]}),(0,Qo.jsx)(wx,{className:"tlui-shortcuts-dialog__body",children:r.map((function t(r){if(n&&!r.readonlyOk)return null;switch(r.type){case"group":return(0,Qo.jsxs)("div",{className:"tlui-shortcuts-dialog__group",children:[(0,Qo.jsx)("h2",{className:"tlui-shortcuts-dialog__group__title",children:e(r.id)}),(0,Qo.jsx)("div",{className:"tlui-shortcuts-dialog__group__content",children:r.children.filter((function(e){return"item"===e.type&&e.actionItem.kbd})).map(t)})]},r.id);case"item":var i=r.actionItem,o=i.id,a=i.label,s=i.shortcutsLabel,u=i.kbd;return(0,Qo.jsxs)("div",{className:"tlui-shortcuts-dialog__key-pair",children:[(0,Qo.jsx)("div",{className:"tlui-shortcuts-dialog__key-pair__key",children:e(null!==s&&void 0!==s?s:a)}),(0,Qo.jsx)("div",{className:"tlui-shortcuts-dialog__key-pair__value",children:(0,Qo.jsx)(px,{children:u})})]},o)}}))}),(0,Qo.jsx)("div",{className:"tlui-dialog__scrim"})]})};function QI(){var e=da();return{languages:Xo,currentLanguage:e.locale}}var JI=t.createContext({}),ZI=ua((function(e){var n=e.overrides,r=e.children,i=da(),o=kI(),a=i.selectedIds.length,s=a>0,u=a>1,l=a>2,c=QI(),d=c.languages,f=c.currentLanguage,h=yI().addDialog,p=(0,t.useMemo)((function(){var e=$([_I("top",CI("LANGUAGE_MENU",{readonlyOk:!0}),PI({id:"keyboard-shortcuts",label:"help-menu.keyboard-shortcuts",readonlyOk:!0,onSelect:function(){h({component:GI})}}))]);return n?n(i,e,{actions:o,currentLanguage:f,languages:d,oneSelected:s,twoSelected:u,threeSelected:l}):e}),[i,n,d,o,s,u,l,f,h]);return(0,Qo.jsx)(JI.Provider,{value:p,children:r})}));function eT(){var e=da();return la("useCanRedo",(function(){return e.canRedo}),[e])}function tT(){var e=da();return la("useCanUndo",(function(){return e.canUndo}),[e])}var nT=t.createContext({});function rT(e){var n,r=e.overrides,i=e.children,o=da(),a=kI(),s=DI()<5,u=la("isDarkMode",(function(){return o.isDarkMode}),[o]),l=la("animationSpeed",(function(){return o.animationSpeed}),[o]),c=la("isGridMode",(function(){return o.isGridMode}),[o]),d=la("isSnapMode",(function(){return o.isSnapMode}),[o]),f=la("isToolLock",(function(){return o.instanceState.isToolLocked}),[o]),h=la("isFocusMode",(function(){return o.instanceState.isFocusMode}),[o]),p=la("isDebugMode",(function(){return o.instanceState.isDebugMode}),[o]),v=la("exportBackground",(function(){return o.instanceState.exportBackground}),[o]),g=la("emptyPage",(function(){return 0===o.currentPageShapeIds.size}),[o]),m=la("selectedCount",(function(){return o.selectedIds.length}),[o]),y=0===m,b=m>0,w=m>1,x=m>2,k=Boolean(null===(n=window.navigator.clipboard)||void 0===n?void 0:n.write),S=NI(),_=FI(),E=MI(),C=AI(),P=tT(),I=eT(),T=la("isZoomedTo100",(function(){return 1===o.zoomLevel}),[o]),M=(0,t.useMemo)((function(){var e=$([_I("menu",EI("file","menu.file",_I("print",PI(a.print,{disabled:g}))),EI("edit","menu.edit",_I("undo-actions",PI(a.undo,{disabled:!P}),PI(a.redo,{disabled:!I})),_I("clipboard-actions",PI(a.cut,{disabled:y}),PI(a.copy,{disabled:y}),PI(a.paste,{disabled:!OI})),_I("conversions",EI("copy-as","menu.copy-as",_I("copy-as-group",PI(a["copy-as-svg"],{disabled:g}),PI(a["copy-as-png"],{disabled:g||!k}),PI(a["copy-as-json"],{disabled:g})),_I("export-bg",PI(a["toggle-transparent"],{checked:!v}))),EI("export-as","menu.export-as",_I("export-as-group",PI(a["export-as-svg"],{disabled:g}),PI(a["export-as-png"],{disabled:g}),PI(a["export-as-json"],{disabled:g})),_I("export-bg",PI(a["toggle-transparent"],{checked:!v})))),_I("set-selection-group",PI(a["select-all"],{disabled:g}),PI(a["select-none"],{disabled:!b})),_I("selection",_&&PI(a["toggle-auto-size"]),S&&PI(a["edit-link"]),PI(a.duplicate,{disabled:!b}),E&&PI(a.group),C&&PI(a.ungroup)),_I("delete-group",PI(a.delete,{disabled:!b}))),EI("view","menu.view",_I("view-actions",PI(a["zoom-in"]),PI(a["zoom-out"]),PI(a["zoom-to-100"],{disabled:T}),PI(a["zoom-to-fit"],{disabled:g}),PI(a["zoom-to-selection"],{disabled:g||!b})))),_I("extras",PI(a["insert-embed"]),PI(a["insert-media"])),_I("preferences",EI("preferences","menu.preferences",_I("preferences-actions",PI(a["toggle-snap-mode"],{checked:d}),PI(a["toggle-tool-lock"],{checked:f}),PI(a["toggle-grid"],{checked:c}),PI(a["toggle-dark-mode"],{checked:u}),PI(a["toggle-focus-mode"],{checked:h}),PI(a["toggle-reduce-motion"],{checked:0===l}),PI(a["toggle-debug-mode"],{checked:p}))),s&&CI("LANGUAGE_MENU",{readonlyOk:!0}))]);return r?r(o,e,{actions:a,noneSelected:y,oneSelected:b,twoSelected:w,threeSelected:x}):e}),[o,r,a,b,w,x,g,s,E,C,S,k,_,y,P,I,l,u,c,d,f,h,v,p,T]);return(0,Qo.jsx)(nT.Provider,{value:M,children:i})}function iT(e){return{id:e.id,type:"item",readonlyOk:e.readonlyOk,toolItem:e}}var oT=t.createContext([]);function aT(e){var n=e.overrides,r=e.children,i=da(),o=YI(),a=la(ks.highlighterTool),s=t.useMemo((function(){var e=$([iT(o.select),iT(o.hand),iT(o.draw),iT(o.eraser),iT(o.arrow),iT(o.text),iT(o.note),iT(o.asset),iT(o.rectangle),iT(o.ellipse),iT(o.diamond),iT(o.triangle),iT(o.trapezoid),iT(o.rhombus),iT(o.pentagon),iT(o.hexagon),iT(o.star),iT(o.oval),iT(o["x-box"]),iT(o["check-box"]),iT(o["arrow-left"]),iT(o["arrow-up"]),iT(o["arrow-down"]),iT(o["arrow-right"]),iT(o.frame),iT(o.line),a?iT(o.highlight):null,iT(o.laser)]);return n?n(i,e,{tools:o}):e}),[i,a,n,o]);return(0,Qo.jsx)(oT.Provider,{value:s,children:r})}function sT(e){return(0,t.useMemo)((function(){return e}),e)}function uT(e){var n=sT(null==e?[]:Array.isArray(e)?e:[e]);return(0,t.useMemo)((function(){var e,t={},r=X(n);try{for(r.s();!(e=r.n()).done;){var i=e.value;if(i.translations){var o,a=X(he(i.translations));try{for(a.s();!(o=a.n()).done;){var s=L(o.value,2),u=s[0],l=s[1],c=t[u];c||(c=t[u]={}),Object.assign(c,l)}}catch(YK){a.e(YK)}finally{a.f()}}}}catch(YK){r.e(YK)}finally{r.f()}return t}),[n])}function lT(e){var n=function(){var e=sI(),n=e.addToast,r=e.removeToast,i=e.clearToasts,o=yI(),a=o.addDialog,s=o.clearDialogs,u=o.removeDialog,l=o.updateDialog,c=DI()<5,d=ax();return(0,t.useMemo)((function(){return{addToast:n,removeToast:r,clearToasts:i,addDialog:a,clearDialogs:s,removeDialog:u,updateDialog:l,msg:d,isMobile:c}}),[a,n,s,i,d,u,r,l,c])}(),r=sT(null==e?[]:Array.isArray(e)?e:[e]);return(0,t.useMemo)((function(){return function(e,t){var n,r={},i=X(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o.translations){var a,s=X(he(o.translations));try{for(s.s();!(a=s.n()).done;){var u=L(a.value,2),l=u[0],c=u[1],d=r[l];d||(d=r[l]={}),Object.assign(d,c)}}catch(YK){s.e(YK)}finally{s.f()}}}}catch(YK){i.e(YK)}finally{i.f()}return{actionsMenu:function(n,r,i){var o,a=X(e);try{for(a.s();!(o=a.n()).done;){var s=o.value;s.actionsMenu&&(r=s.actionsMenu(n,r,R(R({},t),i)))}}catch(YK){a.e(YK)}finally{a.f()}return r},actions:function(n,r){var i,o=X(e);try{for(o.s();!(i=o.n()).done;){var a=i.value;a.actions&&(r=a.actions(n,r,t))}}catch(YK){o.e(YK)}finally{o.f()}return r},contextMenu:function(n,r,i){var o,a=X(e);try{for(a.s();!(o=a.n()).done;){var s=o.value;s.contextMenu&&(r=s.contextMenu(n,r,R(R({},t),i)))}}catch(YK){a.e(YK)}finally{a.f()}return r},helpMenu:function(n,r,i){var o,a=X(e);try{for(a.s();!(o=a.n()).done;){var s=o.value;s.helpMenu&&(r=s.helpMenu(n,r,R(R({},t),i)))}}catch(YK){a.e(YK)}finally{a.f()}return r},menu:function(n,r,i){var o,a=X(e);try{for(a.s();!(o=a.n()).done;){var s=o.value;s.menu&&(r=s.menu(n,r,R(R({},t),i)))}}catch(YK){a.e(YK)}finally{a.f()}return r},toolbar:function(n,r,i){var o,a=X(e);try{for(a.s();!(o=a.n()).done;){var s=o.value;s.toolbar&&(r=s.toolbar(n,r,R(R({},t),i)))}}catch(YK){a.e(YK)}finally{a.f()}return r},keyboardShortcutsMenu:function(n,r,i){var o,a=X(e);try{for(a.s();!(o=a.n()).done;){var s=o.value;s.keyboardShortcutsMenu&&(r=s.keyboardShortcutsMenu(n,r,R(R({},t),i)))}}catch(YK){a.e(YK)}finally{a.f()}return r},tools:function(n,r,i){var o,a=X(e);try{for(a.s();!(o=a.n()).done;){var s=o.value;s.tools&&(r=s.tools(n,r,R(R({},t),i)))}}catch(YK){a.e(YK)}finally{a.f()}return r},translations:r}}(r,n)}),[r,n])}function cT(e){var t=e.overrides,n=e.assetUrls,r=e.onUiEvent,i=e.children;return(0,Qo.jsx)(Qw,{assetUrls:bP(n),children:(0,Qo.jsx)(ox,{overrides:uT(t),children:(0,Qo.jsx)(iC,{onEvent:r,children:(0,Qo.jsx)(aI,{children:(0,Qo.jsx)(mI,{children:(0,Qo.jsx)(LI,{children:(0,Qo.jsx)(dT,{overrides:t,children:i})})})})})})})}function dT(e){var t=e.overrides,n=e.children,r=lT(t);return(0,Qo.jsx)(xI,{overrides:r.actions,children:(0,Qo.jsx)(HI,{overrides:r.tools,children:(0,Qo.jsx)(aT,{overrides:r.toolbar,children:(0,Qo.jsx)(BI,{overrides:r.actionsMenu,children:(0,Qo.jsx)(qI,{overrides:r.keyboardShortcutsMenu,children:(0,Qo.jsx)(KI,{overrides:r.contextMenu,children:(0,Qo.jsx)(ZI,{overrides:r.helpMenu,children:(0,Qo.jsx)(rT,{overrides:r.menu,children:n})})})})})})})})}function fT(){var e=da(),n=kI()["back-to-content"],r=L((0,t.useState)(!1),2),i=r[0],o=r[1];return(0,t.useEffect)((function(){var t=!1,n=setInterval((function(){var n=e.renderingShapes.filter((function(e){return e.isInViewport})),r=0===n.length&&e.shapesArray.length>0;t!==r&&(o(r),t=r)}),1e3);return function(){clearInterval(n)}}),[e]),i?(0,Qo.jsx)(gx,{iconLeft:n.icon,label:n.label,onClick:function(){n.onSelect("helper-buttons"),o(!1)}}):null}var hT=0;var pT=t.memo((function(e){var t=e.renderDebugMenuItems,n=ax();return(0,Qo.jsxs)("div",{className:"tlui-debug-panel",children:[(0,Qo.jsx)(vT,{}),(0,Qo.jsx)(gT,{}),(0,Qo.jsxs)(cC,{id:"debug",children:[(0,Qo.jsx)(dC,{children:(0,Qo.jsx)(gx,{icon:"dots-horizontal",title:n("debug-panel.more")})}),(0,Qo.jsx)(fC,{side:"top",align:"end",alignOffset:0,children:(0,Qo.jsx)(mT,{renderDebugMenuItems:t})})]})]})})),vT=ua((function(){var e=da();return(0,Qo.jsx)("div",{className:"tlui-debug-panel__current-state",children:e.root.path.value})})),gT=function(){var e=da(),t=la("rendering shapes count",(function(){return e.renderingShapes.length}),[e]);return(0,Qo.jsxs)("div",{children:[t," Shapes"]})},mT=ua((function(e){var n=e.renderDebugMenuItems,r=da(),i=sI().addToast,o=yI().addDialog,a=L(t.useState(!1),2),s=a[0],l=a[1];return(0,Qo.jsxs)(Qo.Fragment,{children:[(0,Qo.jsxs)(gC,{children:[(0,Qo.jsx)(mC,{onClick:function(){i({id:bd(),title:"Something happened",description:"Hey, attend to this thing over here. It might be important!"})},children:(0,Qo.jsx)("span",{children:"Show toast"})}),(0,Qo.jsx)(mC,{onClick:function(){o({component:function(e){var t=e.onClose;return(0,Qo.jsx)(xT,{displayDontShowAgain:!0,onCancel:function(){t()},onContinue:function(){t()}})},onClose:function(){}})},children:(0,Qo.jsx)("span",{children:"Show dialog"})}),(0,Qo.jsx)(mC,{onClick:function(){return function(e,t){for(var n=Array(t),r=Math.floor(Math.sqrt(t)),i=0;i<t;i++)hT++,n[i]={id:li("box"+hT),type:"geo",x:i%r*132,y:132*Math.floor(i/r)};e.batch((function(){e.createShapes(n).setSelectedIds(n.map((function(e){return e.id})))}))}(r,100)},children:(0,Qo.jsx)("span",{children:"Create 100 shapes"})}),(0,Qo.jsx)(mC,{onClick:function(){function e(t){var n=t.children,r=0;if(!n.length)return 0;for(var i=0,o=u(n);i<o.length;i++){r++,r+=e(o[i])}return r}var t,n=r.selectedShapes,i=0===n.length?r.renderingShapes:n,o=i.map((function(e){return document.getElementById(e.id).parentElement})),a=o.length,s=X(o);try{for(s.s();!(t=s.n()).done;){a+=e(t.value)}}catch(YK){s.e(YK)}finally{s.f()}window.alert("Shapes ".concat(i.length,", DOM nodes:").concat(a))},children:(0,Qo.jsx)("span",{children:"Count shapes and nodes"})}),function(){if(s)throw Error("oh no!")}(),(0,Qo.jsx)(mC,{onClick:function(){l(!0)},children:(0,Qo.jsx)("span",{children:"Throw error"})}),(0,Qo.jsx)(mC,{onClick:function(){ha()},children:(0,Qo.jsx)("span",{children:"Hard reset"})})]}),(0,Qo.jsxs)(gC,{children:[(0,Qo.jsx)(yT,{label:"Read-only",value:r.isReadOnly,onChange:function(e){return r.setReadOnly(e)}}),(0,Qo.jsx)(bT,{flag:Ss.debugSvg}),(0,Qo.jsx)(bT,{flag:Ss.forceSrgb}),(0,Qo.jsx)(bT,{flag:Ss.debugCursors,onChange:function(e){if(e){var t=wT.map((function(e,t){return{id:li(),type:"geo",x:t%5*175,y:175*Math.floor(t/5),props:{text:e,w:150,h:150,fill:"semi"}}}));r.createShapes(t)}}})]}),(0,Qo.jsx)(gC,{children:Object.values(ks).map((function(e){return(0,Qo.jsx)(bT,{flag:e},e.name)}))}),null===n||void 0===n?void 0:n()]})}));function yT(e){var t=e.label,n=e.value,r=e.onChange;return(0,Qo.jsx)(yC,{title:t,checked:n,onSelect:function(){return r(!n)},children:t})}var bT=ua((function(e){var t=e.flag,n=e.onChange;return(0,Qo.jsx)(yT,{label:t.name.replace(/([a-z0-9])([A-Z])/g,(function(e){return"".concat(e[0]," ").concat(e[1].toLowerCase())})).replace(/^[a-z]/,(function(e){return e.toUpperCase()})),value:t.value,onChange:function(e){t.set(e),null===n||void 0===n||n(e)}})})),wT=["none","default","pointer","cross","move","grab","grabbing","text","ew-resize","ns-resize","nesw-resize","nwse-resize","nwse-rotate","nesw-rotate","senw-rotate","swne-rotate","zoom-in","zoom-out"];function xT(e){var n=e.title,r=void 0===n?"title":n,i=e.body,o=void 0===i?"hello hello hello":i,a=e.cancel,s=void 0===a?"Cancel":a,u=e.confirm,l=void 0===u?"Continue":u,c=e.displayDontShowAgain,d=void 0!==c&&c,f=e.onCancel,h=e.onContinue,p=L(t.useState(!1),2),v=p[0],g=p[1];return(0,Qo.jsxs)(Qo.Fragment,{children:[(0,Qo.jsxs)(mx,{children:[(0,Qo.jsx)(yx,{children:r}),(0,Qo.jsx)(bx,{})]}),(0,Qo.jsx)(wx,{style:{maxWidth:350},children:o}),(0,Qo.jsxs)(xx,{className:"tlui-dialog__footer__actions",children:[d&&(0,Qo.jsx)(gx,{onClick:function(){return g(!v)},iconLeft:v?"checkbox-checked":"checkbox-empty",style:{marginRight:"auto"},children:"Don't show again"}),(0,Qo.jsx)(gx,{onClick:f,children:s}),(0,Qo.jsx)(gx,{type:"primary",onClick:function(){var e=na(ea().mark((function e(){return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),children:l})]})]})}var kT=function(e){var n=e.id,r=e.component,i=e.onClose,o=yI().removeDialog,a=Hs(),s=(0,t.useCallback)((function(e){if(!e){if(i)try{i()}catch(YK){console.warn(YK)}o(n)}}),[n,i,o]);return(0,Qo.jsx)(Yw,{onOpenChange:s,defaultOpen:!0,children:(0,Qo.jsx)(Xw,{container:a,children:(0,Qo.jsx)(qw,{dir:"ltr",className:"tlui-dialog__overlay",children:(0,Qo.jsx)($w,{dir:"ltr",className:"tlui-dialog__content",children:(0,Qo.jsx)(r,{onClose:function(){return s(!1)}})})})})})};var ST=t.memo((function(){var e=yI().dialogs;return(0,Qo.jsx)(Qo.Fragment,{children:e.map((function(e){return(0,Qo.jsx)(kT,R({},e),e.id)}))})}));function _T(){var e=da(),t=la("follow",(function(){return e.instanceState.followingUserId}),[e]);return t?(0,Qo.jsx)(ET,{userId:t}):null}function ET(e){var t=Zl(e.userId);return t?(0,Qo.jsx)("div",{className:"tlui-following",style:{borderColor:t.color}}):null}function CT(){var e=da(),n=QI(),r=n.languages,i=n.currentLanguage,o=(0,t.useCallback)((function(t){return e.setLocale(t)}),[e]);return(0,Qo.jsxs)(hC,{id:"help menu language",children:[(0,Qo.jsx)(pC,{label:"menu.language","data-direction":"left"}),(0,Qo.jsx)(vC,{sideOffset:-4,children:(0,Qo.jsx)(gC,{children:r.map((function(e){var t=e.locale,n=e.label;return(0,Qo.jsx)(bC,{title:t,checked:t===i,onSelect:function(){return o(t)},children:(0,Qo.jsx)("span",{children:n})},t)}))})})]})}var PT=t.memo((function(){var e=Hs(),t=ax(),n=L(aC("help menu"),2),r=n[0],i=n[1];return(0,Qo.jsx)("div",{className:"tlui-help-menu",children:(0,Qo.jsxs)(HE,{dir:"ltr",open:r,onOpenChange:i,modal:!1,children:[(0,Qo.jsx)(YE,{className:"tlui-button tlui-help-menu__button",dir:"ltr",title:t("help-menu.title"),children:(0,Qo.jsx)(lx,{icon:"question-mark"})}),(0,Qo.jsx)(XE,{container:e,dir:"ltr",children:(0,Qo.jsx)(qE,{className:"tlui-menu",side:"top",sideOffset:8,align:"end",alignOffset:0,collisionPadding:4,children:(0,Qo.jsx)(IT,{})})})]})})}));function IT(){var e=function(){var e=t.useContext(JI);if(!e)throw new Error("useHelpMenuSchema must be used inside of a helpTLUiMenuSchemaProvider.");return e}(),n=$I();return(0,Qo.jsx)(Qo.Fragment,{children:e.map((function e(t){if(n&&!t.readonlyOk)return null;switch(t.type){case"custom":if("LANGUAGE_MENU"===t.id)return(0,Qo.jsx)(CT,{},"item");break;case"group":return(0,Qo.jsx)(gC,{size:"small",children:t.children.map(e)},t.id);case"submenu":return(0,Qo.jsxs)(hC,{id:"help menu ".concat(t.id),children:[(0,Qo.jsx)(pC,{label:t.label}),(0,Qo.jsx)(vC,{children:t.children.map(e)})]},t.id);case"item":var r=t.actionItem,i=r.id,o=r.kbd,a=r.label,s=r.onSelect,u=r.icon;return(0,Qo.jsx)(mC,{kbd:o,label:a,onClick:function(){return s("help-menu")},iconLeft:u},i)}}))})}function TT(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).checkForDefaultPrevented,r=void 0===n||n;return function(n){if(null===e||void 0===e||e(n),!1===r||!n.defaultPrevented)return null===t||void 0===t?void 0:t(n)}}function MT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.forEach((function(t){return function(e,t){"function"===typeof e?e(t):null!==e&&void 0!==e&&(e.current=t)}(t,e)}))}}function AT(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0,t.useCallback)(MT.apply(void 0,n),n)}var OT=["scope","children"];function jT(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=[];var i=function(){var n=r.map((function(e){return(0,t.createContext)(e)}));return function(r){var i=(null===r||void 0===r?void 0:r[e])||n;return(0,t.useMemo)((function(){return O({},"__scope".concat(e),R(R({},r),{},O({},e,i)))}),[r,i])}};return i.scopeName=e,[function(n,i){var o=(0,t.createContext)(i),a=r.length;function s(n){var r=n.scope,i=n.children,s=Jt(n,OT),u=(null===r||void 0===r?void 0:r[e][a])||o,l=(0,t.useMemo)((function(){return s}),Object.values(s));return(0,t.createElement)(u.Provider,{value:l},i)}return r=[].concat(u(r),[i]),s.displayName=n+"Provider",[s,function(r,s){var u=(null===s||void 0===s?void 0:s[e][a])||o,l=(0,t.useContext)(u);if(l)return l;if(void 0!==i)return i;throw new Error("`".concat(r,"` must be used within `").concat(n,"`"))}]},RT.apply(void 0,[i].concat(u(n)))]}function RT(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(1===n.length)return i;var o=function(){var e=n.map((function(e){return{useScope:e(),scopeName:e.scopeName}}));return function(n){var r=e.reduce((function(e,t){var r=t.useScope,i=t.scopeName,o=r(n)["__scope".concat(i)];return R(R({},e),o)}),{});return(0,t.useMemo)((function(){return O({},"__scope".concat(i.scopeName),r)}),[r])}};return o.scopeName=i.scopeName,o}var LT=["children"],DT=["children"],NT=(0,t.forwardRef)((function(e,n){var r=e.children,i=Jt(e,LT),o=t.Children.toArray(r),a=o.find(FT);if(a){var s=a.props.children,u=o.map((function(e){return e===a?t.Children.count(s)>1?t.Children.only(null):(0,t.isValidElement)(s)?s.props.children:null:e}));return(0,t.createElement)(zT,wy({},i,{ref:n}),(0,t.isValidElement)(s)?(0,t.cloneElement)(s,void 0,u):null)}return(0,t.createElement)(zT,wy({},i,{ref:n}),r)}));NT.displayName="Slot";var zT=(0,t.forwardRef)((function(e,n){var r=e.children,i=Jt(e,DT);return(0,t.isValidElement)(r)?(0,t.cloneElement)(r,R(R({},function(e,t){var n=R({},t),r=function(){var r=e[i],o=t[i];/^on[A-Z]/.test(i)?r&&o?n[i]=function(){o.apply(void 0,arguments),r.apply(void 0,arguments)}:r&&(n[i]=r):"style"===i?n[i]=R(R({},r),o):"className"===i&&(n[i]=[r,o].filter(Boolean).join(" "))};for(var i in t)r();return R(R({},e),n)}(i,r.props)),{},{ref:MT(n,r.ref)})):t.Children.count(r)>1?t.Children.only(null):null}));zT.displayName="SlotClone";var BT=function(e){var n=e.children;return(0,t.createElement)(t.Fragment,null,n)};function FT(e){return(0,t.isValidElement)(e)&&e.type===BT}var UT=["asChild"],KT=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((function(e,n){var r=(0,t.forwardRef)((function(e,r){var i=e.asChild,o=Jt(e,UT),a=i?NT:n;return(0,t.useEffect)((function(){window[Symbol.for("radix-ui")]=!0}),[]),(0,t.createElement)(a,wy({},o,{ref:r}))}));return r.displayName="Primitive.".concat(n),R(R({},e),{},O({},n,r))}),{});function VT(e){var n=(0,t.useRef)(e);return(0,t.useEffect)((function(){n.current=e})),(0,t.useMemo)((function(){return function(){for(var e,t,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return null===(t=n.current)||void 0===t?void 0:(e=t).call.apply(e,[n].concat(i))}}),[])}var WT,HT=["disableOutsidePointerEvents","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss"],YT="dismissableLayer.update",XT="dismissableLayer.pointerDownOutside",qT="dismissableLayer.focusOutside",$T=(0,t.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),GT=(0,t.forwardRef)((function(e,n){var r,i=e.disableOutsidePointerEvents,o=void 0!==i&&i,a=e.onEscapeKeyDown,s=e.onPointerDownOutside,l=e.onFocusOutside,c=e.onInteractOutside,d=e.onDismiss,f=Jt(e,HT),h=(0,t.useContext)($T),p=L((0,t.useState)(null),2),v=p[0],g=p[1],m=null!==(r=null===v||void 0===v?void 0:v.ownerDocument)&&void 0!==r?r:null===globalThis||void 0===globalThis?void 0:globalThis.document,y=L((0,t.useState)({}),2)[1],b=AT(n,(function(e){return g(e)})),w=Array.from(h.layers),x=L(u(h.layersWithOutsidePointerEventsDisabled).slice(-1),1)[0],k=w.indexOf(x),S=v?w.indexOf(v):-1,_=h.layersWithOutsidePointerEventsDisabled.size>0,E=S>=k,C=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document,r=VT(e),i=(0,t.useRef)(!1),o=(0,t.useRef)((function(){}));return(0,t.useEffect)((function(){var e=function(e){if(e.target&&!i.current){var t=function(){JT(XT,r,a,{discrete:!0})},a={originalEvent:e};"touch"===e.pointerType?(n.removeEventListener("click",o.current),o.current=t,n.addEventListener("click",o.current,{once:!0})):t()}i.current=!1},t=window.setTimeout((function(){n.addEventListener("pointerdown",e)}),0);return function(){window.clearTimeout(t),n.removeEventListener("pointerdown",e),n.removeEventListener("click",o.current)}}),[n,r]),{onPointerDownCapture:function(){return i.current=!0}}}((function(e){var t=e.target,n=u(h.branches).some((function(e){return e.contains(t)}));E&&!n&&(null===s||void 0===s||s(e),null===c||void 0===c||c(e),e.defaultPrevented||null===d||void 0===d||d())}),m),P=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document,r=VT(e),i=(0,t.useRef)(!1);return(0,t.useEffect)((function(){var e=function(e){e.target&&!i.current&&JT(qT,r,{originalEvent:e},{discrete:!1})};return n.addEventListener("focusin",e),function(){return n.removeEventListener("focusin",e)}}),[n,r]),{onFocusCapture:function(){return i.current=!0},onBlurCapture:function(){return i.current=!1}}}((function(e){var t=e.target;u(h.branches).some((function(e){return e.contains(t)}))||(null===l||void 0===l||l(e),null===c||void 0===c||c(e),e.defaultPrevented||null===d||void 0===d||d())}),m);return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document,r=VT(e);(0,t.useEffect)((function(){var e=function(e){"Escape"===e.key&&r(e)};return n.addEventListener("keydown",e),function(){return n.removeEventListener("keydown",e)}}),[r,n])}((function(e){S===h.layers.size-1&&(null===a||void 0===a||a(e),!e.defaultPrevented&&d&&(e.preventDefault(),d()))}),m),(0,t.useEffect)((function(){if(v)return o&&(0===h.layersWithOutsidePointerEventsDisabled.size&&(WT=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(v)),h.layers.add(v),QT(),function(){o&&1===h.layersWithOutsidePointerEventsDisabled.size&&(m.body.style.pointerEvents=WT)}}),[v,m,o,h]),(0,t.useEffect)((function(){return function(){v&&(h.layers.delete(v),h.layersWithOutsidePointerEventsDisabled.delete(v),QT())}}),[v,h]),(0,t.useEffect)((function(){var e=function(){return y({})};return document.addEventListener(YT,e),function(){return document.removeEventListener(YT,e)}}),[]),(0,t.createElement)(KT.div,wy({},f,{ref:b,style:R({pointerEvents:_?E?"auto":"none":void 0},e.style),onFocusCapture:TT(e.onFocusCapture,P.onFocusCapture),onBlurCapture:TT(e.onBlurCapture,P.onBlurCapture),onPointerDownCapture:TT(e.onPointerDownCapture,C.onPointerDownCapture)}))}));function QT(){var e=new CustomEvent(YT);document.dispatchEvent(e)}function JT(e,t,n,r){var i=r.discrete,o=n.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&o.addEventListener(e,t,{once:!0}),i?function(e,t){e&&(0,Ry.flushSync)((function(){return e.dispatchEvent(t)}))}(o,a):o.dispatchEvent(a)}var ZT=0;function eM(){(0,t.useEffect)((function(){var e,t,n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",null!==(e=n[0])&&void 0!==e?e:tM()),document.body.insertAdjacentElement("beforeend",null!==(t=n[1])&&void 0!==t?t:tM()),ZT++,function(){1===ZT&&document.querySelectorAll("[data-radix-focus-guard]").forEach((function(e){return e.remove()})),ZT--}}),[])}function tM(){var e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}var nM=["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"],rM="focusScope.autoFocusOnMount",iM="focusScope.autoFocusOnUnmount",oM={bubbles:!1,cancelable:!0},aM=(0,t.forwardRef)((function(e,n){var r=e.loop,i=void 0!==r&&r,o=e.trapped,a=void 0!==o&&o,s=e.onMountAutoFocus,u=e.onUnmountAutoFocus,l=Jt(e,nM),c=L((0,t.useState)(null),2),d=c[0],f=c[1],h=VT(s),p=VT(u),v=(0,t.useRef)(null),g=AT(n,(function(e){return f(e)})),m=(0,t.useRef)({paused:!1,pause:function(){this.paused=!0},resume:function(){this.paused=!1}}).current;(0,t.useEffect)((function(){if(a){var e=function(e){if(!m.paused&&d){var t=e.target;d.contains(t)?v.current=t:cM(v.current,{select:!0})}},t=function(e){!m.paused&&d&&(d.contains(e.relatedTarget)||cM(v.current,{select:!0}))};return document.addEventListener("focusin",e),document.addEventListener("focusout",t),function(){document.removeEventListener("focusin",e),document.removeEventListener("focusout",t)}}}),[a,d,m.paused]),(0,t.useEffect)((function(){if(d){dM.add(m);var e=document.activeElement;if(!d.contains(e)){var t=new CustomEvent(rM,oM);d.addEventListener(rM,h),d.dispatchEvent(t),t.defaultPrevented||(!function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.select,i=void 0!==r&&r,o=document.activeElement,a=X(e);try{for(a.s();!(t=a.n()).done;){if(cM(t.value,{select:i}),document.activeElement!==o)return}}catch(YK){a.e(YK)}finally{a.f()}}((n=sM(d),n.filter((function(e){return"A"!==e.tagName}))),{select:!0}),document.activeElement===e&&cM(d))}return function(){d.removeEventListener(rM,h),setTimeout((function(){var t=new CustomEvent(iM,oM);d.addEventListener(iM,p),d.dispatchEvent(t),t.defaultPrevented||cM(null!==e&&void 0!==e?e:document.body,{select:!0}),d.removeEventListener(iM,p),dM.remove(m)}),0)}}var n}),[d,h,p,m]);var y=(0,t.useCallback)((function(e){if((i||a)&&!m.paused){var t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,n=document.activeElement;if(t&&n){var r=e.currentTarget,o=function(e){var t=sM(e),n=uM(t,e),r=uM(t.reverse(),e);return[n,r]}(r),s=L(o,2),u=s[0],l=s[1];u&&l?e.shiftKey||n!==l?e.shiftKey&&n===u&&(e.preventDefault(),i&&cM(l,{select:!0})):(e.preventDefault(),i&&cM(u,{select:!0})):n===r&&e.preventDefault()}}}),[i,a,m.paused]);return(0,t.createElement)(KT.div,wy({tabIndex:-1},l,{ref:g,onKeyDown:y}))}));function sM(e){for(var t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:function(e){var t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});n.nextNode();)t.push(n.currentNode);return t}function uM(e,t){var n,r=X(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!lM(i,{upTo:t}))return i}}catch(YK){r.e(YK)}finally{r.f()}}function lM(e,t){var n=t.upTo;if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==n&&e===n)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function cM(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).select,n=void 0!==t&&t;if(e&&e.focus){var r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&function(e){return e instanceof HTMLInputElement&&"select"in e}(e)&&n&&e.select()}}var dM=function(){var e=[];return{add:function(t){var n=e[0];t!==n&&(null===n||void 0===n||n.pause()),(e=fM(e,t)).unshift(t)},remove:function(t){var n;null===(n=(e=fM(e,t))[0])||void 0===n||n.resume()}}}();function fM(e,t){var n=u(e),r=n.indexOf(t);return-1!==r&&n.splice(r,1),n}var hM=Boolean(null===globalThis||void 0===globalThis?void 0:globalThis.document)?t.useLayoutEffect:function(){},pM=r["useId".toString()]||function(){},vM=0;function gM(e){var n=L(t.useState(pM()),2),r=n[0],i=n[1];return hM((function(){e||i((function(e){return null!==e&&void 0!==e?e:String(vM++)}))}),[e]),e||(r?"radix-".concat(r):"")}var mM=["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","flipAlignment"],yM=["strategy"],bM=["mainAxis","crossAxis","limiter"],wM=["apply"];function xM(e){return e.split("-")[0]}function kM(e){return e.split("-")[1]}function SM(e){return["top","bottom"].includes(xM(e))?"x":"y"}function _M(e){return"y"===e?"height":"width"}function EM(e,t,n){var r,i=e.reference,o=e.floating,a=i.x+i.width/2-o.width/2,s=i.y+i.height/2-o.height/2,u=SM(t),l=_M(u),c=i[l]/2-o[l]/2,d="x"===u;switch(xM(t)){case"top":r={x:a,y:i.y-o.height};break;case"bottom":r={x:a,y:i.y+i.height};break;case"right":r={x:i.x+i.width,y:s};break;case"left":r={x:i.x-o.width,y:s};break;default:r={x:i.x,y:i.y}}switch(kM(t)){case"start":r[u]-=c*(n&&d?-1:1);break;case"end":r[u]+=c*(n&&d?-1:1)}return r}var CM=function(){var e=na(ea().mark((function e(t,n,r){var i,o,a,s,u,l,c,d,f,h,p,v,g,m,y,b,w,x,k,S,_,E,C,P,I;return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.placement,o=void 0===i?"bottom":i,a=r.strategy,s=void 0===a?"absolute":a,u=r.middleware,l=void 0===u?[]:u,c=r.platform,e.next=9,null==c.isRTL?void 0:c.isRTL(n);case 9:return d=e.sent,e.next=12,c.getElementRects({reference:t,floating:n,strategy:s});case 12:f=e.sent,h=EM(f,o,d),p=h.x,v=h.y,g=o,m={},y=0,b=0;case 20:if(!(b<l.length)){e.next=55;break}return x=l[b],k=x.name,S=x.fn,e.next=26,S({x:p,y:v,initialPlacement:o,placement:g,strategy:s,middlewareData:m,rects:f,platform:c,elements:{reference:t,floating:n}});case 26:if(_=e.sent,E=_.x,C=_.y,P=_.data,I=_.reset,p=null!=E?E:p,v=null!=C?C:v,m=R(R({},m),{},O({},k,R(R({},m[k]),P))),e.t0=I&&y<=50,!e.t0){e.next=52;break}if(y++,e.t1="object"==typeof I,!e.t1){e.next=51;break}if(I.placement&&(g=I.placement),e.t2=I.rects,!e.t2){e.next=50;break}if(!0!==I.rects){e.next=48;break}return e.next=45,c.getElementRects({reference:t,floating:n,strategy:s});case 45:e.t3=e.sent,e.next=49;break;case 48:e.t3=I.rects;case 49:f=e.t3;case 50:w=EM(f,g,d),p=w.x,v=w.y;case 51:b=-1;case 52:b++,e.next=20;break;case 55:return e.abrupt("return",{x:p,y:v,placement:g,strategy:s,middlewareData:m});case 56:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function PM(e){return"number"!=typeof e?function(e){return R({top:0,right:0,bottom:0,left:0},e)}(e):{top:e,right:e,bottom:e,left:e}}function IM(e){return R(R({},e),{},{top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height})}function TM(e,t){return MM.apply(this,arguments)}function MM(){return MM=na(ea().mark((function e(t,n){var r,i,o,a,s,u,l,c,d,f,h,p,v,g,m,y,b,w,x,k,S;return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n={}),i=t.x,o=t.y,a=t.platform,s=t.rects,u=t.elements,l=t.strategy,d=(c=n).boundary,f=void 0===d?"clippingAncestors":d,h=c.rootBoundary,p=void 0===h?"viewport":h,v=c.elementContext,g=void 0===v?"floating":v,m=c.altBoundary,y=void 0!==m&&m,b=c.padding,w=PM(void 0===b?0:b),x=u[y?"floating"===g?"reference":"floating":g],e.t0=IM,e.t1=a,e.next=24,null==a.isElement?void 0:a.isElement(x);case 24:if(e.t3=r=e.sent,e.t2=null==e.t3,e.t2){e.next=28;break}e.t2=r;case 28:if(!e.t2){e.next=32;break}e.t4=x,e.next=38;break;case 32:if(e.t5=x.contextElement,e.t5){e.next=37;break}return e.next=36,null==a.getDocumentElement?void 0:a.getDocumentElement(u.floating);case 36:e.t5=e.sent;case 37:e.t4=e.t5;case 38:return e.t6=e.t4,e.t7=f,e.t8=p,e.t9=l,e.t10={element:e.t6,boundary:e.t7,rootBoundary:e.t8,strategy:e.t9},e.next=45,e.t1.getClippingRect.call(e.t1,e.t10);case 45:if(e.t11=e.sent,k=(0,e.t0)(e.t11),e.t12=IM,!a.convertOffsetParentRelativeRectToViewportRelativeRect){e.next=61;break}return e.t14=a,e.t15="floating"===g?R(R({},s.floating),{},{x:i,y:o}):s.reference,e.next=53,null==a.getOffsetParent?void 0:a.getOffsetParent(u.floating);case 53:return e.t16=e.sent,e.t17=l,e.t18={rect:e.t15,offsetParent:e.t16,strategy:e.t17},e.next=58,e.t14.convertOffsetParentRelativeRectToViewportRelativeRect.call(e.t14,e.t18);case 58:e.t13=e.sent,e.next=62;break;case 61:e.t13=s[g];case 62:return e.t19=e.t13,S=(0,e.t12)(e.t19),e.abrupt("return",{top:k.top-S.top+w.top,bottom:S.bottom-k.bottom+w.bottom,left:k.left-S.left+w.left,right:S.right-k.right+w.right});case 65:case"end":return e.stop()}}),e)}))),MM.apply(this,arguments)}var AM=Math.min,OM=Math.max;function jM(e,t,n){return OM(e,AM(t,n))}var RM=function(e){return{name:"arrow",options:e,fn:function(t){return na(ea().mark((function n(){var r,i,o,a,s,u,l,c,d,f,h,p,v,g,m,y,b,w,x,k,S,_,E,C,P,I,T,M,A;return ea().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=(o=null!=e?e:{}).element,s=o.padding,u=void 0===s?0:s,l=t.x,c=t.y,d=t.placement,f=t.rects,h=t.platform,null!=a){n.next=3;break}return n.abrupt("return",{});case 3:return p=PM(u),v={x:l,y:c},g=SM(d),m=kM(d),y=_M(g),n.next=10,h.getDimensions(a);case 10:return b=n.sent,w="y"===g?"top":"left",x="y"===g?"bottom":"right",k=f.reference[y]+f.reference[g]-v[g]-f.floating[y],S=v[g]-f.reference[g],n.next=17,null==h.getOffsetParent?void 0:h.getOffsetParent(a);case 17:return _=n.sent,0===(E=_?"y"===g?_.clientHeight||0:_.clientWidth||0:0)&&(E=f.floating[y]),C=k/2-S/2,P=p[w],I=E-b[y]-p[x],T=E/2-b[y]/2+C,M=jM(P,T,I),A=("start"===m?p[w]:p[x])>0&&T!==M&&f.reference[y]<=f.floating[y],n.abrupt("return",(O(i={},g,v[g]-(A?T<P?P-T:I-T:0)),O(i,"data",(O(r={},g,M),O(r,"centerOffset",T-M),r)),i));case 22:case"end":return n.stop()}}),n)})))()}}},LM={left:"right",right:"left",bottom:"top",top:"bottom"};function DM(e){return e.replace(/left|right|bottom|top/g,(function(e){return LM[e]}))}function NM(e,t,n){void 0===n&&(n=!1);var r=kM(e),i=SM(e),o=_M(i),a="x"===i?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[o]>t.floating[o]&&(a=DM(a)),{main:a,cross:DM(a)}}var zM={start:"end",end:"start"};function BM(e){return e.replace(/start|end/g,(function(e){return zM[e]}))}var FM=["top","right","bottom","left"],UM=(FM.reduce((function(e,t){return e.concat(t,t+"-start",t+"-end")}),[]),function(e){return void 0===e&&(e={}),{name:"flip",options:e,fn:function(t){return na(ea().mark((function n(){var r,i,o,a,s,l,c,d,f,h,p,v,g,m,y,b,w,x,k,S,_,E,C,P,I,T,M,A,O,j,R,L,D,N;return ea().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.placement,o=t.middlewareData,a=t.rects,s=t.initialPlacement,l=t.platform,c=t.elements,f=(d=e).mainAxis,h=void 0===f||f,p=d.crossAxis,v=void 0===p||p,g=d.fallbackPlacements,m=d.fallbackStrategy,y=void 0===m?"bestFit":m,b=d.flipAlignment,w=void 0===b||b,x=Jt(d,mM),k=xM(i),S=g||(k!==s&&w?function(e){var t=DM(e);return[BM(e),t,BM(t)]}(s):[DM(s)]),_=[s].concat(u(S)),n.next=22,TM(t,x);case 22:if(E=n.sent,C=[],P=(null==(r=o.flip)?void 0:r.overflows)||[],h&&C.push(E[k]),!v){n.next=36;break}return n.t0=NM,n.t1=i,n.t2=a,n.next=31,null==l.isRTL?void 0:l.isRTL(c.floating);case 31:n.t3=n.sent,I=(0,n.t0)(n.t1,n.t2,n.t3),T=I.main,M=I.cross,C.push(E[T],E[M]);case 36:if(P=[].concat(u(P),[{placement:i,overflows:C}]),C.every((function(e){return e<=0}))){n.next=50;break}if(j=(null!=(A=null==(O=o.flip)?void 0:O.index)?A:0)+1,!(R=_[j])){n.next=40;break}return n.abrupt("return",{data:{index:j,overflows:P},reset:{placement:R}});case 40:L="bottom",n.t4=y,n.next="bestFit"===n.t4?44:"initialPlacement"===n.t4?47:48;break;case 44:return N=null==(D=P.map((function(e){return[e,e.overflows.filter((function(e){return e>0})).reduce((function(e,t){return e+t}),0)]})).sort((function(e,t){return e[1]-t[1]}))[0])?void 0:D[0].placement,N&&(L=N),n.abrupt("break",48);case 47:L=s;case 48:if(i===L){n.next=50;break}return n.abrupt("return",{reset:{placement:L}});case 50:return n.abrupt("return",{});case 51:case"end":return n.stop()}}),n)})))()}}});function KM(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function VM(e){return FM.some((function(t){return e[t]>=0}))}var WM=function(e){var t=void 0===e?{}:e,n=t.strategy,r=void 0===n?"referenceHidden":n,i=Jt(t,yM);return{name:"hide",fn:function(e){return na(ea().mark((function t(){var n,o,a;return ea().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.rects,t.t0=r,t.next="referenceHidden"===t.t0?4:"escaped"===t.t0?11:18;break;case 4:return t.t1=KM,t.next=7,TM(e,R(R({},i),{},{elementContext:"reference"}));case 7:return t.t2=t.sent,t.t3=n.reference,o=(0,t.t1)(t.t2,t.t3),t.abrupt("return",{data:{referenceHiddenOffsets:o,referenceHidden:VM(o)}});case 11:return t.t4=KM,t.next=14,TM(e,R(R({},i),{},{altBoundary:!0}));case 14:return t.t5=t.sent,t.t6=n.floating,a=(0,t.t4)(t.t5,t.t6),t.abrupt("return",{data:{escapedOffsets:a,escaped:VM(a)}});case 18:return t.abrupt("return",{});case 19:case"end":return t.stop()}}),t)})))()}}},HM=function(e){return void 0===e&&(e=0),{name:"offset",options:e,fn:function(t){return na(ea().mark((function n(){var r,i,o;return ea().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.x,i=t.y,n.next=4,function(){var e=na(ea().mark((function e(t,n){var r,i,o,a,s,u,l,c,d,f,h,p,v,g;return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.placement,i=t.platform,o=t.elements,e.next=5,null==i.isRTL?void 0:i.isRTL(o.floating);case 5:return a=e.sent,s=xM(r),u=kM(r),l="x"===SM(r),c=["left","top"].includes(s)?-1:1,d=a&&l?-1:1,f="function"==typeof n?n(t):n,h="number"==typeof f?{mainAxis:f,crossAxis:0,alignmentAxis:null}:R({mainAxis:0,crossAxis:0,alignmentAxis:null},f),p=h.mainAxis,v=h.crossAxis,g=h.alignmentAxis,e.abrupt("return",(u&&"number"==typeof g&&(v="end"===u?-1*g:g),l?{x:v*d,y:p*c}:{x:p*c,y:v*d}));case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,e);case 4:return o=n.sent,n.abrupt("return",{x:r+o.x,y:i+o.y,data:o});case 6:case"end":return n.stop()}}),n)})))()}}};function YM(e){return"x"===e?"y":"x"}var XM=function(e){return void 0===e&&(e={}),{name:"shift",options:e,fn:function(t){return na(ea().mark((function n(){var r,i,o,a,s,u,l,c,d,f,h,p,v,g,m,y,b,w,x,k,S;return ea().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.x,o=t.y,a=t.placement,u=(s=e).mainAxis,l=void 0===u||u,c=s.crossAxis,d=void 0!==c&&c,f=s.limiter,h=void 0===f?{fn:function(e){return{x:e.x,y:e.y}}}:f,p=Jt(s,bM),v={x:i,y:o},n.next=14,TM(t,p);case 14:return g=n.sent,m=SM(xM(a)),y=YM(m),b=v[m],w=v[y],l&&(x="y"===m?"bottom":"right",b=jM(b+g["y"===m?"top":"left"],b,b-g[x])),d&&(k="y"===y?"bottom":"right",w=jM(w+g["y"===y?"top":"left"],w,w-g[k])),S=h.fn(R(R({},t),{},(O(r={},m,b),O(r,y,w),r))),n.abrupt("return",R(R({},S),{},{data:{x:S.x-i,y:S.y-o}}));case 22:case"end":return n.stop()}}),n)})))()}}},qM=function(e){return void 0===e&&(e={}),{options:e,fn:function(t){var n,r=t.x,i=t.y,o=t.placement,a=t.rects,s=t.middlewareData,u=e,l=u.offset,c=void 0===l?0:l,d=u.mainAxis,f=void 0===d||d,h=u.crossAxis,p=void 0===h||h,v={x:r,y:i},g=SM(o),m=YM(g),y=v[g],b=v[m],w="function"==typeof c?c(R(R({},a),{},{placement:o})):c,x="number"==typeof w?{mainAxis:w,crossAxis:0}:R({mainAxis:0,crossAxis:0},w);if(f){var k="y"===g?"height":"width",S=a.reference[g]-a.floating[k]+x.mainAxis,_=a.reference[g]+a.reference[k]-x.mainAxis;y<S?y=S:y>_&&(y=_)}if(p){var E,C,P,I,T="y"===g?"width":"height",M=["top","left"].includes(xM(o)),A=a.reference[m]-a.floating[T]+(M&&null!=(E=null==(C=s.offset)?void 0:C[m])?E:0)+(M?0:x.crossAxis),j=a.reference[m]+a.reference[T]+(M?0:null!=(P=null==(I=s.offset)?void 0:I[m])?P:0)-(M?x.crossAxis:0);b<A?b=A:b>j&&(b=j)}return O(n={},g,y),O(n,m,b),n}}},$M=function(e){return void 0===e&&(e={}),{name:"size",options:e,fn:function(t){return na(ea().mark((function n(){var r,i,o,a,s,u,l,c,d,f,h,p,v,g,m,y,b,w,x;return ea().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.placement,i=t.rects,o=t.platform,a=t.elements,u=(s=e).apply,l=Jt(s,wM),n.next=9,TM(t,l);case 9:if(c=n.sent,d=xM(r),f=kM(r),"top"!==d&&"bottom"!==d){n.next=31;break}return h=d,n.t0=f,n.next=17,null==o.isRTL?void 0:o.isRTL(a.floating);case 17:if(!n.sent){n.next=21;break}n.t1="start",n.next=22;break;case 21:n.t1="end";case 22:if(n.t2=n.t1,n.t0!==n.t2){n.next=27;break}n.t3="left",n.next=28;break;case 27:n.t3="right";case 28:p=n.t3,n.next=32;break;case 31:p=d,h="end"===f?"top":"bottom";case 32:return v=OM(c.left,0),g=OM(c.right,0),m=OM(c.top,0),y=OM(c.bottom,0),b={availableHeight:i.floating.height-(["left","right"].includes(r)?2*(0!==m||0!==y?m+y:OM(c.top,c.bottom)):c[h]),availableWidth:i.floating.width-(["top","bottom"].includes(r)?2*(0!==v||0!==g?v+g:OM(c.left,c.right)):c[p])},n.next=39,o.getDimensions(a.floating);case 39:return w=n.sent,null==u||u(R(R({},t),b)),n.next=43,o.getDimensions(a.floating);case 43:return x=n.sent,n.abrupt("return",w.width!==x.width||w.height!==x.height?{reset:{rects:!0}}:{});case 45:case"end":return n.stop()}}),n)})))()}}};function GM(e){return e&&e.document&&e.location&&e.alert&&e.setInterval}function QM(e){if(null==e)return window;if(!GM(e)){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function JM(e){return QM(e).getComputedStyle(e)}function ZM(e){return GM(e)?"":e?(e.nodeName||"").toLowerCase():""}function eA(){var e=navigator.userAgentData;return null!=e&&e.brands?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}function tA(e){return e instanceof QM(e).HTMLElement}function nA(e){return e instanceof QM(e).Element}function rA(e){return"undefined"!=typeof ShadowRoot&&(e instanceof QM(e).ShadowRoot||e instanceof ShadowRoot)}function iA(e){var t=JM(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function oA(e){return["table","td","th"].includes(ZM(e))}function aA(e){var t=/firefox/i.test(eA()),n=JM(e);return"none"!==n.transform||"none"!==n.perspective||"paint"===n.contain||["transform","perspective"].includes(n.willChange)||t&&"filter"===n.willChange||t&&!!n.filter&&"none"!==n.filter}function sA(){return!/^((?!chrome|android).)*safari/i.test(eA())}var uA=Math.min,lA=Math.max,cA=Math.round;function dA(e,t,n){var r,i,o,a;void 0===t&&(t=!1),void 0===n&&(n=!1);var s=e.getBoundingClientRect(),u=1,l=1;t&&tA(e)&&(u=e.offsetWidth>0&&cA(s.width)/e.offsetWidth||1,l=e.offsetHeight>0&&cA(s.height)/e.offsetHeight||1);var c=nA(e)?QM(e):window,d=!sA()&&n,f=(s.left+(d&&null!=(r=null==(i=c.visualViewport)?void 0:i.offsetLeft)?r:0))/u,h=(s.top+(d&&null!=(o=null==(a=c.visualViewport)?void 0:a.offsetTop)?o:0))/l,p=s.width/u,v=s.height/l;return{width:p,height:v,top:h,right:f+p,bottom:h+v,left:f,x:f,y:h}}function fA(e){return(t=e,(t instanceof QM(t).Node?e.ownerDocument:e.document)||window.document).documentElement;var t}function hA(e){return nA(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function pA(e){return dA(fA(e)).left+hA(e).scrollLeft}function vA(e,t,n){var r=tA(t),i=fA(t),o=dA(e,r&&function(e){var t=dA(e);return cA(t.width)!==e.offsetWidth||cA(t.height)!==e.offsetHeight}(t),"fixed"===n),a={scrollLeft:0,scrollTop:0},s={x:0,y:0};if(r||!r&&"fixed"!==n)if(("body"!==ZM(t)||iA(i))&&(a=hA(t)),tA(t)){var u=dA(t,!0);s.x=u.x+t.clientLeft,s.y=u.y+t.clientTop}else i&&(s.x=pA(i));return{x:o.left+a.scrollLeft-s.x,y:o.top+a.scrollTop-s.y,width:o.width,height:o.height}}function gA(e){return"html"===ZM(e)?e:e.assignedSlot||e.parentNode||(rA(e)?e.host:null)||fA(e)}function mA(e){return tA(e)&&"fixed"!==getComputedStyle(e).position?e.offsetParent:null}function yA(e){for(var t=QM(e),n=mA(e);n&&oA(n)&&"static"===getComputedStyle(n).position;)n=mA(n);return n&&("html"===ZM(n)||"body"===ZM(n)&&"static"===getComputedStyle(n).position&&!aA(n))?t:n||function(e){var t=gA(e);for(rA(t)&&(t=t.host);tA(t)&&!["html","body"].includes(ZM(t));){if(aA(t))return t;t=t.parentNode}return null}(e)||t}function bA(e){if(tA(e))return{width:e.offsetWidth,height:e.offsetHeight};var t=dA(e);return{width:t.width,height:t.height}}function wA(e){var t=gA(e);return["html","body","#document"].includes(ZM(t))?e.ownerDocument.body:tA(t)&&iA(t)?t:wA(t)}function xA(e,t){var n;void 0===t&&(t=[]);var r=wA(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),o=QM(r),a=i?[o].concat(o.visualViewport||[],iA(r)?r:[]):r,s=t.concat(a);return i?s:s.concat(xA(a))}function kA(e,t,n){return"viewport"===t?IM(function(e,t){var n=QM(e),r=fA(e),i=n.visualViewport,o=r.clientWidth,a=r.clientHeight,s=0,u=0;if(i){o=i.width,a=i.height;var l=sA();(l||!l&&"fixed"===t)&&(s=i.offsetLeft,u=i.offsetTop)}return{width:o,height:a,x:s,y:u}}(e,n)):nA(t)?function(e,t){var n=dA(e,!1,"fixed"===t),r=n.top+e.clientTop,i=n.left+e.clientLeft;return{top:r,left:i,x:i,y:r,right:i+e.clientWidth,bottom:r+e.clientHeight,width:e.clientWidth,height:e.clientHeight}}(t,n):IM(function(e){var t,n=fA(e),r=hA(e),i=null==(t=e.ownerDocument)?void 0:t.body,o=lA(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),a=lA(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),s=-r.scrollLeft+pA(e),u=-r.scrollTop;return"rtl"===JM(i||n).direction&&(s+=lA(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:a,x:s,y:u}}(fA(e)))}var SA={getClippingRect:function(e){var t=e.element,n=e.boundary,r=e.rootBoundary,i=e.strategy,o=[].concat(u("clippingAncestors"===n?function(e){var t=xA(e),n=["absolute","fixed"].includes(JM(e).position)&&tA(e)?yA(e):e;return nA(n)?t.filter((function(e){return nA(e)&&function(e,t){var n=null==t.getRootNode?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&rA(n)){var r=t;do{if(r&&e===r)return!0;r=r.parentNode||r.host}while(r)}return!1}(e,n)&&"body"!==ZM(e)})):[]}(t):[].concat(n)),[r]),a=o[0],s=o.reduce((function(e,n){var r=kA(t,n,i);return e.top=lA(r.top,e.top),e.right=uA(r.right,e.right),e.bottom=uA(r.bottom,e.bottom),e.left=lA(r.left,e.left),e}),kA(t,a,i));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(e){var t=e.rect,n=e.offsetParent,r=e.strategy,i=tA(n),o=fA(n);if(n===o)return t;var a={scrollLeft:0,scrollTop:0},s={x:0,y:0};if((i||!i&&"fixed"!==r)&&(("body"!==ZM(n)||iA(o))&&(a=hA(n)),tA(n))){var u=dA(n,!0);s.x=u.x+n.clientLeft,s.y=u.y+n.clientTop}return R(R({},t),{},{x:t.x-a.scrollLeft+s.x,y:t.y-a.scrollTop+s.y})},isElement:nA,getDimensions:bA,getOffsetParent:yA,getDocumentElement:fA,getElementRects:function(e){var t=e.reference,n=e.floating,r=e.strategy;return{reference:vA(t,yA(n),r),floating:R(R({},bA(n)),{},{x:0,y:0})}},getClientRects:function(e){return Array.from(e.getClientRects())},isRTL:function(e){return"rtl"===JM(e).direction}};function _A(e,t,n,r){void 0===r&&(r={});var i=r,o=i.ancestorScroll,a=void 0===o||o,s=i.ancestorResize,l=void 0===s||s,c=i.elementResize,d=void 0===c||c,f=i.animationFrame,h=void 0!==f&&f,p=a&&!h,v=l&&!h,g=p||v?[].concat(u(nA(e)?xA(e):[]),u(xA(t))):[];g.forEach((function(e){p&&e.addEventListener("scroll",n,{passive:!0}),v&&e.addEventListener("resize",n)}));var m,y=null;if(d){var b=!0;y=new ResizeObserver((function(){b||n(),b=!1})),nA(e)&&!h&&y.observe(e),y.observe(t)}var w=h?dA(e):null;return h&&function t(){var r=dA(e);!w||r.x===w.x&&r.y===w.y&&r.width===w.width&&r.height===w.height||n(),w=r,m=requestAnimationFrame(t)}(),n(),function(){var e;g.forEach((function(e){p&&e.removeEventListener("scroll",n),v&&e.removeEventListener("resize",n)})),null==(e=y)||e.disconnect(),y=null,h&&cancelAnimationFrame(m)}}var EA="undefined"!==typeof document?t.useLayoutEffect:t.useEffect;function CA(e,t){if(e===t)return!0;if(typeof e!==typeof t)return!1;if("function"===typeof e&&e.toString()===t.toString())return!0;var n,r,i;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if((n=e.length)!=t.length)return!1;for(r=n;0!==r--;)if(!CA(e[r],t[r]))return!1;return!0}if((n=(i=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(r=n;0!==r--;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;0!==r--;){var o=i[r];if(("_owner"!==o||!e.$$typeof)&&!CA(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function PA(e){var n=void 0===e?{}:e,r=n.middleware,i=n.placement,o=void 0===i?"bottom":i,a=n.strategy,s=void 0===a?"absolute":a,u=n.whileElementsMounted,l=t.useRef(null),c=t.useRef(null),d=function(e){var n=t.useRef(e);return EA((function(){n.current=e})),n}(u),f=t.useRef(null),h=L(t.useState({x:null,y:null,strategy:s,placement:o,middlewareData:{}}),2),p=h[0],v=h[1],g=L(t.useState(r),2),m=g[0],y=g[1];CA(null==m?void 0:m.map((function(e){return e.options})),null==r?void 0:r.map((function(e){return e.options})))||y(r);var b=t.useCallback((function(){l.current&&c.current&&function(e,t,n){return CM(e,t,R({platform:SA},n))}(l.current,c.current,{middleware:m,placement:o,strategy:s}).then((function(e){w.current&&Ry.flushSync((function(){v(e)}))}))}),[m,o,s]);EA((function(){w.current&&b()}),[b]);var w=t.useRef(!1);EA((function(){return w.current=!0,function(){w.current=!1}}),[]);var x=t.useCallback((function(){if("function"===typeof f.current&&(f.current(),f.current=null),l.current&&c.current)if(d.current){var e=d.current(l.current,c.current,b);f.current=e}else b()}),[b,d]),k=t.useCallback((function(e){l.current=e,x()}),[x]),S=t.useCallback((function(e){c.current=e,x()}),[x]),_=t.useMemo((function(){return{reference:l,floating:c}}),[]);return t.useMemo((function(){return R(R({},p),{},{update:b,refs:_,reference:k,floating:S})}),[p,b,_,k,S])}var IA=function(e){var t=e.element,n=e.padding;return{name:"arrow",options:e,fn:function(e){return r=t,Object.prototype.hasOwnProperty.call(r,"current")?null!=t.current?RM({element:t.current,padding:n}).fn(e):{}:t?RM({element:t,padding:n}).fn(e):{};var r}}};var TA=["__scopePopper","virtualRef"],MA=["__scopePopper","side","sideOffset","align","alignOffset","arrowPadding","collisionBoundary","collisionPadding","sticky","hideWhenDetached","avoidCollisions","onPlaced"],AA="Popper",OA=L(jT(AA),2),jA=OA[0],RA=OA[1],LA=L(jA(AA),2),DA=LA[0],NA=LA[1],zA=function(e){var n=e.__scopePopper,r=e.children,i=L((0,t.useState)(null),2),o=i[0],a=i[1];return(0,t.createElement)(DA,{scope:n,anchor:o,onAnchorChange:a},r)},BA="PopperAnchor",FA=(0,t.forwardRef)((function(e,n){var r=e.__scopePopper,i=e.virtualRef,o=Jt(e,TA),a=NA(BA,r),s=(0,t.useRef)(null),u=AT(n,s);return(0,t.useEffect)((function(){a.onAnchorChange((null===i||void 0===i?void 0:i.current)||s.current)})),i?null:(0,t.createElement)(KT.div,wy({},o,{ref:u}))})),UA="PopperContent",KA=L(jA(UA),2),VA=KA[0],WA=(KA[1],L(jA(UA,{hasParent:!1,positionUpdateFns:new Set}),2)),HA=WA[0],YA=WA[1],XA=(0,t.forwardRef)((function(e,n){var r,i,o,a,s,u,l,c,d=e.__scopePopper,f=e.side,h=void 0===f?"bottom":f,p=e.sideOffset,v=void 0===p?0:p,g=e.align,m=void 0===g?"center":g,y=e.alignOffset,b=void 0===y?0:y,w=e.arrowPadding,x=void 0===w?0:w,k=e.collisionBoundary,S=void 0===k?[]:k,_=e.collisionPadding,E=void 0===_?0:_,C=e.sticky,P=void 0===C?"partial":C,I=e.hideWhenDetached,T=void 0!==I&&I,M=e.avoidCollisions,A=void 0===M||M,j=e.onPlaced,D=Jt(e,MA),N=NA(UA,d),z=L((0,t.useState)(null),2),B=z[0],F=z[1],U=AT(n,(function(e){return F(e)})),K=L((0,t.useState)(null),2),V=K[0],W=K[1],H=function(e){var n=L((0,t.useState)(void 0),2),r=n[0],i=n[1];return hM((function(){if(e){i({width:e.offsetWidth,height:e.offsetHeight});var t=new ResizeObserver((function(t){if(Array.isArray(t)&&t.length){var n,r,o=t[0];if("borderBoxSize"in o){var a=o.borderBoxSize,s=Array.isArray(a)?a[0]:a;n=s.inlineSize,r=s.blockSize}else n=e.offsetWidth,r=e.offsetHeight;i({width:n,height:r})}}));return t.observe(e,{box:"border-box"}),function(){return t.unobserve(e)}}i(void 0)}),[e]),r}(V),Y=null!==(r=null===H||void 0===H?void 0:H.width)&&void 0!==r?r:0,X=null!==(i=null===H||void 0===H?void 0:H.height)&&void 0!==i?i:0,q=h+("center"!==m?"-"+m:""),$="number"===typeof E?E:R({top:0,right:0,bottom:0,left:0},E),G=Array.isArray(S)?S:[S],Q=G.length>0,J={padding:$,boundary:G.filter($A),altBoundary:Q},Z=PA({strategy:"fixed",placement:q,whileElementsMounted:_A,middleware:[HM({mainAxis:v+X,alignmentAxis:b}),A?XM(R({mainAxis:!0,crossAxis:!1,limiter:"partial"===P?qM():void 0},J)):void 0,A?UM(R({},J)):void 0,$M(R(R({},J),{},{apply:function(e){var t=e.elements,n=e.rects,r=e.availableWidth,i=e.availableHeight,o=n.reference,a=o.width,s=o.height,u=t.floating.style;u.setProperty("--radix-popper-available-width","".concat(r,"px")),u.setProperty("--radix-popper-available-height","".concat(i,"px")),u.setProperty("--radix-popper-anchor-width","".concat(a,"px")),u.setProperty("--radix-popper-anchor-height","".concat(s,"px"))}})),V?IA({element:V,padding:x}):void 0,GA({arrowWidth:Y,arrowHeight:X}),T?WM({strategy:"referenceHidden"}):void 0].filter(qA)}),ee=Z.reference,te=Z.floating,ne=Z.strategy,re=Z.x,ie=Z.y,oe=Z.placement,ae=Z.middlewareData,se=Z.update;hM((function(){ee(N.anchor)}),[ee,N.anchor]);var ue=null!==re&&null!==ie,le=L(QA(oe),2),ce=le[0],de=le[1],fe=VT(j);hM((function(){ue&&(null===fe||void 0===fe||fe())}),[ue,fe]);var he=null===(o=ae.arrow)||void 0===o?void 0:o.x,pe=null===(a=ae.arrow)||void 0===a?void 0:a.y,ve=0!==(null===(s=ae.arrow)||void 0===s?void 0:s.centerOffset),ge=L((0,t.useState)(),2),me=ge[0],ye=ge[1];hM((function(){B&&ye(window.getComputedStyle(B).zIndex)}),[B]);var be=YA(UA,d),we=be.hasParent,xe=be.positionUpdateFns,ke=!we;(0,t.useLayoutEffect)((function(){if(!ke)return xe.add(se),function(){xe.delete(se)}}),[ke,xe,se]),hM((function(){ke&&ue&&Array.from(xe).reverse().forEach((function(e){return requestAnimationFrame(e)}))}),[ke,ue,xe]);var Se=R(R({"data-side":ce,"data-align":de},D),{},{ref:U,style:R(R({},D.style),{},{animation:ue?void 0:"none",opacity:null!==(u=ae.hide)&&void 0!==u&&u.referenceHidden?0:void 0})});return(0,t.createElement)("div",{ref:te,"data-radix-popper-content-wrapper":"",style:O({position:ne,left:0,top:0,transform:ue?"translate3d(".concat(Math.round(re),"px, ").concat(Math.round(ie),"px, 0)"):"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:me},"--radix-popper-transform-origin",[null===(l=ae.transformOrigin)||void 0===l?void 0:l.x,null===(c=ae.transformOrigin)||void 0===c?void 0:c.y].join(" ")),dir:e.dir},(0,t.createElement)(VA,{scope:d,placedSide:ce,onArrowChange:W,arrowX:he,arrowY:pe,shouldHideArrow:ve},ke?(0,t.createElement)(HA,{scope:d,hasParent:!0,positionUpdateFns:xe},(0,t.createElement)(KT.div,Se)):(0,t.createElement)(KT.div,Se)))}));function qA(e){return void 0!==e}function $A(e){return null!==e}var GA=function(e){return{name:"transformOrigin",options:e,fn:function(t){var n,r,i,o,a,s=t.placement,u=t.rects,l=t.middlewareData,c=0!==(null===(n=l.arrow)||void 0===n?void 0:n.centerOffset),d=c?0:e.arrowWidth,f=c?0:e.arrowHeight,h=L(QA(s),2),p=h[0],v={start:"0%",center:"50%",end:"100%"}[h[1]],g=(null!==(r=null===(i=l.arrow)||void 0===i?void 0:i.x)&&void 0!==r?r:0)+d/2,m=(null!==(o=null===(a=l.arrow)||void 0===a?void 0:a.y)&&void 0!==o?o:0)+f/2,y="",b="";return"bottom"===p?(y=c?v:"".concat(g,"px"),b="".concat(-f,"px")):"top"===p?(y=c?v:"".concat(g,"px"),b="".concat(u.floating.height+f,"px")):"right"===p?(y="".concat(-f,"px"),b=c?v:"".concat(m,"px")):"left"===p&&(y="".concat(u.floating.width+f,"px"),b=c?v:"".concat(m,"px")),{data:{x:y,y:b}}}}};function QA(e){var t=L(e.split("-"),2),n=t[0],r=t[1];return[n,void 0===r?"center":r]}var JA=zA,ZA=FA,eO=XA,tO=["container"],nO=(0,t.forwardRef)((function(e,n){var r,i=e.container,o=void 0===i?null===globalThis||void 0===globalThis||null===(r=globalThis.document)||void 0===r?void 0:r.body:i,a=Jt(e,tO);return o?Ry.createPortal((0,t.createElement)(KT.div,wy({},a,{ref:n})),o):null}));var rO=function(e){var n=e.present,r=e.children,i=function(e){var n=L((0,t.useState)(),2),r=n[0],i=n[1],o=(0,t.useRef)({}),a=(0,t.useRef)(e),s=(0,t.useRef)("none"),u=e?"mounted":"unmounted",l=function(e,n){return(0,t.useReducer)((function(e,t){var r=n[e][t];return null!==r&&void 0!==r?r:e}),e)}(u,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}}),c=L(l,2),d=c[0],f=c[1];return(0,t.useEffect)((function(){var e=iO(o.current);s.current="mounted"===d?e:"none"}),[d]),hM((function(){var t=o.current,n=a.current;if(n!==e){var r=s.current,i=iO(t);if(e)f("MOUNT");else if("none"===i||"none"===(null===t||void 0===t?void 0:t.display))f("UNMOUNT");else{f(n&&r!==i?"ANIMATION_OUT":"UNMOUNT")}a.current=e}}),[e,f]),hM((function(){if(r){var e=function(e){var t=iO(o.current).includes(e.animationName);e.target===r&&t&&(0,Ry.flushSync)((function(){return f("ANIMATION_END")}))},t=function(e){e.target===r&&(s.current=iO(o.current))};return r.addEventListener("animationstart",t),r.addEventListener("animationcancel",e),r.addEventListener("animationend",e),function(){r.removeEventListener("animationstart",t),r.removeEventListener("animationcancel",e),r.removeEventListener("animationend",e)}}f("ANIMATION_END")}),[r,f]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:(0,t.useCallback)((function(e){e&&(o.current=getComputedStyle(e)),i(e)}),[])}}(n),o="function"===typeof r?r({present:i.isPresent}):t.Children.only(r),a=AT(i.ref,o.ref);return"function"===typeof r||i.isPresent?(0,t.cloneElement)(o,{ref:a}):null};function iO(e){return(null===e||void 0===e?void 0:e.animationName)||"none"}function oO(e){var n=e.prop,r=e.defaultProp,i=e.onChange,o=void 0===i?function(){}:i,a=function(e){var n=e.defaultProp,r=e.onChange,i=(0,t.useState)(n),o=L(i,1)[0],a=(0,t.useRef)(o),s=VT(r);return(0,t.useEffect)((function(){a.current!==o&&(s(o),a.current=o)}),[o,a,s]),i}({defaultProp:r,onChange:o}),s=L(a,2),u=s[0],l=s[1],c=void 0!==n,d=c?n:u,f=VT(o);return[d,(0,t.useCallback)((function(e){if(c){var t="function"===typeof e?e(n):e;t!==n&&f(t)}else l(e)}),[c,n,l,f])]}rO.displayName="Presence";var aO=["__scopePopover"],sO=["forceMount"],uO=["__scopePopover","trapFocus","onOpenAutoFocus","onCloseAutoFocus","disableOutsidePointerEvents","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside"],lO="Popover",cO=L(jT(lO,[RA]),2),dO=cO[0],fO=(cO[1],RA()),hO=L(dO(lO),2),pO=hO[0],vO=hO[1],gO=function(e){var n=e.__scopePopover,r=e.children,i=e.open,o=e.defaultOpen,a=e.onOpenChange,s=e.modal,u=void 0!==s&&s,l=fO(n),c=(0,t.useRef)(null),d=L((0,t.useState)(!1),2),f=d[0],h=d[1],p=L(oO({prop:i,defaultProp:o,onChange:a}),2),v=p[0],g=void 0!==v&&v,m=p[1];return(0,t.createElement)(JA,l,(0,t.createElement)(pO,{scope:n,contentId:gM(),triggerRef:c,open:g,onOpenChange:m,onOpenToggle:(0,t.useCallback)((function(){return m((function(e){return!e}))}),[m]),hasCustomAnchor:f,onCustomAnchorAdd:(0,t.useCallback)((function(){return h(!0)}),[]),onCustomAnchorRemove:(0,t.useCallback)((function(){return h(!1)}),[]),modal:u},r))},mO="PopoverTrigger",yO=(0,t.forwardRef)((function(e,n){var r=e.__scopePopover,i=Jt(e,aO),o=vO(mO,r),a=fO(r),s=AT(n,o.triggerRef),u=(0,t.createElement)(KT.button,wy({type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":TO(o.open)},i,{ref:s,onClick:TT(e.onClick,o.onOpenToggle)}));return o.hasCustomAnchor?u:(0,t.createElement)(ZA,wy({asChild:!0},a),u)})),bO="PopoverPortal",wO=L(dO(bO,{forceMount:void 0}),2),xO=wO[0],kO=wO[1],SO=function(e){var n=e.__scopePopover,r=e.forceMount,i=e.children,o=e.container,a=vO(bO,n);return(0,t.createElement)(xO,{scope:n,forceMount:r},(0,t.createElement)(rO,{present:r||a.open},(0,t.createElement)(nO,{asChild:!0,container:o},i)))},_O="PopoverContent",EO=(0,t.forwardRef)((function(e,n){var r=kO(_O,e.__scopePopover),i=e.forceMount,o=void 0===i?r.forceMount:i,a=Jt(e,sO),s=vO(_O,e.__scopePopover);return(0,t.createElement)(rO,{present:o||s.open},s.modal?(0,t.createElement)(CO,wy({},a,{ref:n})):(0,t.createElement)(PO,wy({},a,{ref:n})))})),CO=(0,t.forwardRef)((function(e,n){var r=vO(_O,e.__scopePopover),i=(0,t.useRef)(null),o=AT(n,i),a=(0,t.useRef)(!1);return(0,t.useEffect)((function(){var e=i.current;if(e)return fw(e)}),[]),(0,t.createElement)(iw,{as:NT,allowPinchZoom:!0},(0,t.createElement)(IO,wy({},e,{ref:o,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:TT(e.onCloseAutoFocus,(function(e){var t;e.preventDefault(),a.current||null===(t=r.triggerRef.current)||void 0===t||t.focus()})),onPointerDownOutside:TT(e.onPointerDownOutside,(function(e){var t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey,r=2===t.button||n;a.current=r}),{checkForDefaultPrevented:!1}),onFocusOutside:TT(e.onFocusOutside,(function(e){return e.preventDefault()}),{checkForDefaultPrevented:!1})})))})),PO=(0,t.forwardRef)((function(e,n){var r=vO(_O,e.__scopePopover),i=(0,t.useRef)(!1),o=(0,t.useRef)(!1);return(0,t.createElement)(IO,wy({},e,{ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:function(t){var n,a;(null===(n=e.onCloseAutoFocus)||void 0===n||n.call(e,t),t.defaultPrevented)||(i.current||null===(a=r.triggerRef.current)||void 0===a||a.focus(),t.preventDefault());i.current=!1,o.current=!1},onInteractOutside:function(t){var n,a;null===(n=e.onInteractOutside)||void 0===n||n.call(e,t),t.defaultPrevented||(i.current=!0,"pointerdown"===t.detail.originalEvent.type&&(o.current=!0));var s=t.target;(null===(a=r.triggerRef.current)||void 0===a?void 0:a.contains(s))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&o.current&&t.preventDefault()}}))})),IO=(0,t.forwardRef)((function(e,n){var r=e.__scopePopover,i=e.trapFocus,o=e.onOpenAutoFocus,a=e.onCloseAutoFocus,s=e.disableOutsidePointerEvents,u=e.onEscapeKeyDown,l=e.onPointerDownOutside,c=e.onFocusOutside,d=e.onInteractOutside,f=Jt(e,uO),h=vO(_O,r),p=fO(r);return eM(),(0,t.createElement)(aM,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:o,onUnmountAutoFocus:a},(0,t.createElement)(GT,{asChild:!0,disableOutsidePointerEvents:s,onInteractOutside:d,onEscapeKeyDown:u,onPointerDownOutside:l,onFocusOutside:c,onDismiss:function(){return h.onOpenChange(!1)}},(0,t.createElement)(eO,wy({"data-state":TO(h.open),role:"dialog",id:h.contentId},p,f,{ref:n,style:R(R({},f.style),{},{"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"})}))))}));function TO(e){return e?"open":"closed"}var MO=gO,AO=yO,OO=SO,jO=EO,RO=function(e){var t=e.id,n=e.children,r=L(aC(t,e.onOpenChange),2),i=r[0],o=r[1];return(0,Qo.jsx)(MO,{onOpenChange:o,open:i,children:(0,Qo.jsx)("div",{className:"tlui-popover",children:n})})},LO=function(e){var t=e.children,n=e.disabled,r=e["data-testid"];return(0,Qo.jsx)(AO,{"data-testid":r,disabled:n,asChild:!0,dir:"ltr",children:t})},DO=function(e){var t=e.side,n=e.children,r=e.align,i=void 0===r?"center":r,o=e.sideOffset,a=void 0===o?8:o,s=e.alignOffset,u=void 0===s?0:s,l=Hs();return(0,Qo.jsx)(OO,{dir:"ltr",container:l,children:(0,Qo.jsx)(jO,{className:"tlui-popover__content",side:t,sideOffset:a,align:i,alignOffset:u,dir:"ltr",children:n})})},NO=(0,t.memo)((function(){var e=ax(),n=Hs(),r=function(){var e=t.useContext(zI);if(!e)throw new Error("useActionsMenuSchema must be used inside of a ActionsMenuSchemaProvider.");return e}(),i=$I();return(0,Qo.jsxs)(RO,{id:"actions menu",children:[(0,Qo.jsx)(LO,{children:(0,Qo.jsx)(gx,{className:"tlui-menu__trigger","data-testid":"main.action-menu",icon:"dots-vertical",title:e("actions-menu.title"),smallIcon:!0})}),(0,Qo.jsx)(OO,{dir:"ltr",container:n,children:(0,Qo.jsx)(jO,{className:"tlui-popover__content",side:"bottom",dir:"ltr",sideOffset:6,children:(0,Qo.jsx)("div",{className:"tlui-actions-menu tlui-button-grid__four",children:r.map((function(t){if(i&&!t.readonlyOk)return null;if("item"===t.type){var n=t.actionItem,r=n.id,o=n.icon,a=n.label,s=n.kbd,u=n.onSelect;return(0,Qo.jsx)(gx,{className:"tlui-button-grid__button","data-testid":"menu-item.".concat(t.id),icon:o,title:a?s?"".concat(e(a)," ").concat(hx(s)):"".concat(e(a)):s?"".concat(hx(s)):"",onClick:function(){return u("actions-menu")},disabled:t.disabled},r)}}))})})})]})})),zO=ua((function(){var e=da(),t=kI(),n=ax(),r=t.duplicate,i=e.selectedIds.length<=0;return(0,Qo.jsx)(gx,{icon:r.icon,onClick:function(){return r.onSelect("quick-actions")},disabled:i,title:"".concat(n(r.label)," ").concat(hx(r.kbd)),smallIcon:!0})})),BO=t.memo((function(){var e=ax();return(0,Qo.jsxs)(cC,{id:"main menu",children:[(0,Qo.jsx)(dC,{children:(0,Qo.jsx)(gx,{className:"tlui-menu__trigger","data-testid":"main.menu",title:e("menu.title"),icon:"menu"})}),(0,Qo.jsx)(fC,{alignOffset:0,sideOffset:6,children:(0,Qo.jsx)(FO,{})})]})}));function FO(){var e=da(),n=ax(),r=function(){var e=t.useContext(nT);if(!e)throw new Error("useMenuSchema must be used inside of a TLUiMenuSchemaProvider.");return e}(),i=DI(),o=$I();function a(e,t,r,s){switch(t.type){case"custom":return o&&!t.readonlyOk?null:"LANGUAGE_MENU"===t.id?(0,Qo.jsx)(CT,{},"item"):null;case"group":return o&&!t.readonlyOk?null:(0,Qo.jsx)(gC,{size:s<=1?"medium":i<3||"submenu"===(null===r||void 0===r?void 0:r.type)&&s>2?"tiny":"medium",children:t.children.map((function(n){return a(e,n,t,s+1)}))},t.id);case"submenu":return o&&!t.readonlyOk?null:(0,Qo.jsxs)(hC,{id:"main menu ".concat(r?r.id+" ":"").concat(t.id),children:[(0,Qo.jsx)(pC,{label:t.label,"data-testid":"menu-item.".concat(t.id)}),(0,Qo.jsx)(vC,{sideOffset:-4,alignOffset:-1,children:t.children.map((function(n){return a(e,n,t,s+1)}))})]},t.id);case"item":if(o&&!t.readonlyOk)return null;var u=t.actionItem,l=u.id,c=u.checkbox,d=u.menuLabel,f=u.label,h=u.onSelect,p=u.kbd,v=null!==d&&void 0!==d?d:f,g=v?n(v):void 0;return c?(0,Qo.jsxs)(yC,{onSelect:function(){return h("menu")},title:g||"",checked:t.checked,disabled:t.disabled,children:[g&&(0,Qo.jsx)("span",{children:g}),p&&(0,Qo.jsx)(px,{children:p})]},l):(0,Qo.jsx)(mC,{"data-testid":"menu-item.".concat(t.id),kbd:p,label:v,onClick:function(){return h("menu")},disabled:t.disabled},l)}}return(0,Qo.jsx)(Qo.Fragment,{children:r.map((function(t){return a(e,t,null,0)}))})}var UO=function(e){var n=e.name,r=e.id,i=e.isCurrentPage,o=da(),a=(0,t.useRef)(null),s=(0,t.useCallback)((function(e){o.renamePage(r,e||"New Page",!0)}),[o,r]),u=(0,t.useCallback)((function(e){o.mark("rename page"),o.renamePage(r,e||"New Page",!1)}),[o,r]);return(0,Qo.jsx)(wP,{className:"tlui-page-menu__item__input",ref:function(e){return a.current=e},defaultValue:n,onValueChange:s,onComplete:u,onCancel:u,shouldManuallyMaintainScrollPositionWhenFocused:!0,autofocus:i,autoselect:!0})},KO=function(e,t,n,r){var i,o=e.pages,a=n>r?o[r-1]:o[r],s=n>r?o[r]:o[r+1];(i=a&&!s?P(a.index):!a&&s?function(e){return S(void 0,e,1)[0]}(o[0].index):C(a.index,s.index))!==o[n].index&&(e.mark("moving page"),e.updatePage({id:t,index:i}))},VO=ua((function(e){var n=e.index,r=e.listSize,i=e.item,o=e.onRename,a=da(),s=ax(),u=a.pages,l=(0,t.useCallback)((function(){a.mark("creating page");var e=yn.createId();a.duplicatePage(i.id,e)}),[a,i]),c=(0,t.useCallback)((function(){KO(a,i.id,n,n-1)}),[a,i,n]),d=(0,t.useCallback)((function(){KO(a,i.id,n,n+1)}),[a,i,n]),f=(0,t.useCallback)((function(){a.mark("deleting page"),a.deletePage(i.id)}),[a,i]);return(0,Qo.jsxs)(cC,{id:"page item submenu ".concat(n),children:[(0,Qo.jsx)(dC,{children:(0,Qo.jsx)(gx,{title:s("page-menu.submenu.title"),icon:"dots-vertical"})}),(0,Qo.jsxs)(fC,{alignOffset:0,children:[(0,Qo.jsxs)(gC,{children:[o&&(0,Qo.jsx)(GE,{dir:"ltr",onSelect:o,asChild:!0,children:(0,Qo.jsx)(gx,{className:"tlui-menu__button",label:"page-menu.submenu.rename"})}),(0,Qo.jsx)(GE,{dir:"ltr",onSelect:l,disabled:u.length>=40,asChild:!0,children:(0,Qo.jsx)(gx,{className:"tlui-menu__button",label:"page-menu.submenu.duplicate-page"})}),n>0&&(0,Qo.jsx)(GE,{dir:"ltr",onSelect:c,asChild:!0,children:(0,Qo.jsx)(gx,{className:"tlui-menu__button",label:"page-menu.submenu.move-up"})}),n<r-1&&(0,Qo.jsx)(GE,{dir:"ltr",onSelect:d,asChild:!0,children:(0,Qo.jsx)(gx,{className:"tlui-menu__button",label:"page-menu.submenu.move-down"})})]}),r>1&&(0,Qo.jsx)(gC,{children:(0,Qo.jsx)(GE,{dir:"ltr",onSelect:f,asChild:!0,children:(0,Qo.jsx)(gx,{className:"tlui-menu__button",label:"page-menu.submenu.delete"})})})]})]})})),WO=function(){var e=da(),n=ax(),r=DI(),i=L(aC("page-menu",(0,t.useCallback)((function(){return g(!1)}),[])),2),o=i[0],a=i[1],s=r<5?36:40,u=(0,t.useRef)(null),l=la("pages",(function(){return e.pages}),[e]),c=la("currentPage",(function(){return e.currentPage}),[e]),d=la("isReadonlyMode",(function(){return e.isReadOnly}),[e]),f=la("maxPageCountReached",(function(){return e.pages.length>=40}),[e]),h=la("isCoarsePointer",(function(){return e.isCoarsePointer}),[e]),p=L((0,t.useState)(!1),2),v=p[0],g=p[1],m=(0,t.useCallback)((function(){d||g((function(e){return!e}))}),[d]),y=(0,t.useRef)({isPointing:!1,status:"idle",pointing:null,startY:0,startIndex:0,dragIndex:0}),b=(0,t.useState)(Object.fromEntries(l.map((function(e,t){return[e.id,{y:t*s,offsetY:0,isSelected:!1}]})))),w=L(b,2),x=w[0],k=w[1];(0,t.useLayoutEffect)((function(){k(Object.fromEntries(l.map((function(e,t){return[e.id,{y:t*s,offsetY:0,isSelected:!1}]}))))}),[s,l]),(0,t.useEffect)((function(){o&&requestAnimationFrame((function(){var e=document.querySelector('[data-testid="page-menu-item-'.concat(c.id,'"]'));if(e){var t=u.current;if(!t)return;var n=e.offsetTop;n<t.scrollTop&&t.scrollTo({top:n});var r=n+s;r>t.scrollTop+t.offsetHeight&&t.scrollTo({top:r-t.offsetHeight})}}))}),[s,c,o]);var S=(0,t.useCallback)((function(e){var t=e.clientY,n=e.currentTarget.dataset,r=n.id,i=n.index;if(r&&i){var o=y.current;e.currentTarget.setPointerCapture(e.pointerId),o.status="pointing",o.pointing={id:r,index:+i};var a=x[r].y;o.startY=t,o.startIndex=Math.max(0,Math.min(Math.round(a/s),l.length-1))}}),[s,l.length,x]),_=(0,t.useCallback)((function(e){var t=y.current;if("pointing"===t.status){var n=e.clientY-t.startY;Math.abs(n)>5&&(t.status="dragging")}if("dragging"===t.status){var r=e.clientY-t.startY,i=x[t.pointing.id],o=t.startIndex,a=t.pointing,u=i.y+r,c=Math.max(0,Math.min(Math.round(u/s),l.length-1)),d=R({},x);if(d[a.id]={y:i.y,offsetY:r,isSelected:!0},c!==t.dragIndex){t.dragIndex=c;for(var f=0;f<l.length;f++){var h=l[f];if(h.id!==t.pointing.id){var p=d[h.id].y;c===o?p=f*s:c<o?p=c<=f&&f<o?(f+1)*s:f*s:c>o&&(p=c>=f&&f>o?(f-1)*s:f*s),p!==d[h.id].y&&(d[h.id]={y:p,offsetY:0,isSelected:!0})}}}k(d)}}),[s,l,x]),E=(0,t.useCallback)((function(t){var n=y.current;if("dragging"===n.status){var r=n.pointing,i=r.id,o=r.index;KO(e,i,o,n.dragIndex)}t.currentTarget.releasePointerCapture(t.pointerId),n.status="idle"}),[e]),C=(0,t.useCallback)((function(e){var t=y.current;"Escape"===e.key&&("dragging"===t.status&&k(Object.fromEntries(l.map((function(e,t){return[e.id,{y:t*s,offsetY:0,isSelected:!1}]})))),t.status="idle")}),[s,l]),P=(0,t.useCallback)((function(){if(!d){e.mark("creating page");var t=yn.createId();e.createPage(n("page-menu.new-page-initial-name"),t),g(!0)}}),[e,n,d]);return(0,Qo.jsxs)(RO,{id:"page menu",onOpenChange:a,open:o,children:[(0,Qo.jsx)(LO,{children:(0,Qo.jsx)(gx,{className:"tlui-page-menu__trigger tlui-menu__trigger","data-testid":"main.page-menu",icon:"chevron-down",title:c.name,children:(0,Qo.jsx)("div",{className:"tlui-page-menu__name",children:c.name})})}),(0,Qo.jsx)(DO,{side:"bottom",align:"start",sideOffset:6,children:(0,Qo.jsxs)("div",{className:"tlui-page-menu__wrapper",children:[(0,Qo.jsxs)("div",{className:"tlui-page-menu__header",children:[(0,Qo.jsx)("div",{className:"tlui-page-menu__header__title",children:n("page-menu.title")}),!d&&(0,Qo.jsxs)(Qo.Fragment,{children:[(0,Qo.jsx)(gx,{"data-testid":"page-menu.edit",title:n(v?"page-menu.edit-done":"page-menu.edit-start"),icon:v?"check":"edit",onClick:m}),(0,Qo.jsx)(gx,{"data-testid":"page-menu.create",icon:"plus",title:n(f?"page-menu.max-page-count-reached":"page-menu.create-new-page"),disabled:f,onClick:P})]})]}),(0,Qo.jsx)("div",{className:"tlui-page-menu__list tlui-menu__group",style:{height:s*l.length+4},ref:u,children:l.map((function(t,i){var o,a=null!==(o=x[t.id])&&void 0!==o?o:{position:40*i,offsetY:0};return v?(0,Qo.jsxs)("div",{"data-testid":"page-menu-item-".concat(t.id),className:"tlui-page_menu__item__sortable",style:{zIndex:t.id===c.id?888:i,transform:"translate(0px, ".concat(a.y+a.offsetY,"px)")},children:[(0,Qo.jsx)(gx,{tabIndex:-1,className:"tlui-page_menu__item__sortable__handle",icon:"drag-handle-dots",onPointerDown:S,onPointerUp:E,onPointerMove:_,onKeyDown:C,"data-id":t.id,"data-index":i}),r<5&&h?(0,Qo.jsx)(gx,{className:"tlui-page-menu__item__button",onClick:function(){var n=window.prompt("Rename page",t.name);n&&n!==t.name&&e.renamePage(t.id,n)},onDoubleClick:m,isChecked:t.id===c.id,children:(0,Qo.jsx)("span",{children:t.name})}):(0,Qo.jsx)("div",{id:"page-menu-item-".concat(t.id),"data-testid":"page-menu-item-".concat(t.id),className:"tlui-page_menu__item__sortable__title",style:{height:s},children:(0,Qo.jsx)(UO,{id:t.id,name:t.name,isCurrentPage:t.id===c.id})}),!d&&(0,Qo.jsx)("div",{className:"tlui-page_menu__item__submenu","data-isediting":v,children:(0,Qo.jsx)(VO,{index:i,item:t,listSize:l.length})})]},t.id+"_editing"):(0,Qo.jsxs)("div",{"data-testid":"page-menu-item-".concat(t.id),className:"tlui-page-menu__item",children:[(0,Qo.jsxs)(gx,{className:"tlui-page-menu__item__button tlui-page-menu__item__button__checkbox",onClick:function(){return e.setCurrentPageId(t.id)},onDoubleClick:m,isChecked:t.id===c.id,title:n("page-menu.go-to-page"),children:[(0,Qo.jsx)("div",{className:"tlui-page-menu__item__button__check",children:t.id===c.id&&(0,Qo.jsx)(lx,{icon:"check"})}),(0,Qo.jsx)("span",{children:t.name})]}),!d&&(0,Qo.jsx)("div",{className:"tlui-page_menu__item__submenu",children:(0,Qo.jsx)(VO,{index:i,item:t,listSize:l.length,onRename:function(){if(e.isIos){var n=window.prompt("Rename page",t.name);n&&n!==t.name&&e.renamePage(t.id,n)}else g(!0),e.setCurrentPageId(t.id)}})})]},t.id)}))})]})})]})},HO=(0,t.memo)((function(){var e=ax(),t=eT(),n=kI().redo;return(0,Qo.jsx)(gx,{"data-testid":"main.redo",icon:n.icon,title:"".concat(e(n.label)," ").concat(hx(n.kbd)),disabled:!t,onClick:function(){return n.onSelect("quick-actions")},smallIcon:!0})})),YO=ua((function(){var e=da(),t=kI(),n=ax(),r=t.delete;if($I())return null;var i=e.selectedIds.length<=0;return(0,Qo.jsx)(gx,{icon:r.icon,onClick:function(){return r.onSelect("quick-actions")},disabled:i,title:"".concat(n(r.label)," ").concat(hx(r.kbd)),smallIcon:!0})})),XO=(0,t.memo)((function(){var e=ax(),t=tT(),n=kI().undo;return(0,Qo.jsx)(gx,{"data-testid":"main.undo",icon:n.icon,title:"".concat(e(n.label)," ").concat(hx(n.kbd)),disabled:!t,onClick:function(){return n.onSelect("quick-actions")},smallIcon:!0})})),qO=ua((function(){var e=da(),t=DI(),n=!$I()&&!e.isInAny("hand","zoom","eraser");return(0,Qo.jsx)("div",{className:"tlui-menu-zone",children:(0,Qo.jsxs)("div",{className:"tlui-menu-zone__controls",children:[(0,Qo.jsx)(BO,{}),(0,Qo.jsx)("div",{className:"tlui-menu-zone__divider"}),(0,Qo.jsx)(WO,{}),t>=6&&n&&(0,Qo.jsxs)(Qo.Fragment,{children:[(0,Qo.jsx)("div",{className:"tlui-menu-zone__divider"}),(0,Qo.jsx)(XO,{}),(0,Qo.jsx)(HO,{}),(0,Qo.jsx)(YO,{}),(0,Qo.jsx)(zO,{}),(0,Qo.jsx)(NO,{})]})]})})}));var $O=function(){function e(t,n){var r=this;z(this,e),O(this,"colors",{shapeFill:"rgba(144, 144, 144, .1)",selectFill:"#2f80ed",viewportFill:"rgba(144, 144, 144, .1)"}),O(this,"id",bd()),O(this,"cvs",null),O(this,"pageBounds",[]),O(this,"collaborators",[]),O(this,"canvasScreenBounds",new Wa),O(this,"canvasPageBounds",new Wa),O(this,"contentPageBounds",new Wa),O(this,"contentScreenBounds",new Wa),O(this,"originPagePoint",new va),O(this,"originPageCenter",new va),O(this,"isInViewport",!1),O(this,"debug",!1),O(this,"updateContentScreenBounds",(function(){var e=r.contentScreenBounds,t=r.contentPageBounds,n=r.canvasScreenBounds,i=e.x,o=e.y,a=e.w,s=e.h;if(t.w>t.h){var u=n.w/(t.w/t.h);u>n.h?(i=(n.w-n.w*(n.h/u))/2,o=0,a=n.w*(n.h/u),s=n.h):(i=0,o=(n.h-u)/2,a=n.w,s=u)}else if(t.w<t.h){var l=n.h/(t.h/t.w);i=(n.w-l)/2,o=0,a=l,s=n.h}else i=n.h/2,o=0,a=n.h,s=n.h;e.set(i,o,a,s)})),O(this,"updateCanvasPageBounds",(function(){var e=r.canvasPageBounds,t=r.canvasScreenBounds,n=r.contentPageBounds,i=r.contentScreenBounds;e.set(0,0,n.width/(i.width/t.width),n.height/(i.height/t.height)),e.center=n.center})),O(this,"getScreenPoint",(function(e,t){var n=r.canvasScreenBounds;return{x:(e-n.minX)*r.dpr,y:(t-n.minY)*r.dpr}})),O(this,"getPagePoint",(function(e,t){var n=r.contentPageBounds,i=r.contentScreenBounds,o=r.canvasPageBounds,a=r.getScreenPoint(e,t),s=a.x,u=a.y;return{x:o.minX+s*n.width/i.width,y:o.minY+u*n.height/i.height,z:1}})),O(this,"minimapScreenPointToPagePoint",(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=r.editor.viewportPageBounds,a=r.getPagePoint(e,t),s=a.x,u=a.y;if(i){var l,c,d,f,h=r.editor.allShapesCommonBounds,p=o,v=(null!==(l=null===h||void 0===h?void 0:h.minX)&&void 0!==l?l:0)-p.width/2,g=(null!==(c=null===h||void 0===h?void 0:h.maxX)&&void 0!==c?c:0)+p.width/2,m=(null!==(d=null===h||void 0===h?void 0:h.minY)&&void 0!==d?d:0)-p.height/2,y=(null!==(f=null===h||void 0===h?void 0:h.maxY)&&void 0!==f?f:0)+p.height/2,b=Math.max(0,v+p.width-s),w=Math.max(0,-(g-p.width-s)),x=Math.max(0,m+p.height-u),k=Math.max(0,-(y-p.height-u)),S=Math.max(0,b-w),_=Math.max(0,w-b),E=Math.max(0,x-k),C=Math.max(0,k-x);S&&S>_?s+=S/2:_&&(s-=_/2),E&&E>C?u+=E/2:C&&(u-=C/2),s=ka(s,v,g),u=ka(u,m,y)}if(n){var P=r.originPagePoint;Math.abs(s-P.x)>Math.abs(u-P.y)?u=P.y:s=P.x}return{x:s,y:u}})),O(this,"render",(function(){var t=r.cvs,n=r.pageBounds;r.updateCanvasPageBounds();var i=r.editor,o=r.canvasScreenBounds,a=r.canvasPageBounds,s=r.contentPageBounds,u=r.contentScreenBounds,l=o.width,c=o.height,d=i.viewportPageBounds,f=i.selectedIds;if(t&&n){var h=t.getContext("2d");if(!h)throw new Error("Minimap (shapes): Could not get context");h.resetTransform(),h.globalAlpha=1,h.clearRect(0,0,l,c);var p=u.width/s.width,v=u.height/s.height;h.translate((l-u.width)/2,(c-u.height)/2),h.scale(p,v),h.translate(-s.minX,-s.minY);for(var g,m=8/p,y=8/p,b=1/p,w=1/p,x=m/4,k=y/4,S=new Path2D,_=new Path2D,E=r.colors,C=E.shapeFill,P=E.selectFill,I=E.viewportFill,T=0,M=n.length;T<M;T++)g=n[T],e.roundedRect(f.includes(g.id)?_:S,g.minX,g.minY,g.width,g.height,ka(m,b,g.width/x),ka(y,w,g.height/k));if(h.fillStyle=C,h.fill(S),h.fillStyle=P,h.fill(_),r.debug){var A=Wa.Common(n),O=A.minX,j=A.minY,R=A.width,L=A.height;h.strokeStyle="green",h.lineWidth=2/p,h.strokeRect(O+1/p,j+1/v,R-2/p,L-2/v)}var D=i.brush;if(D){var N=D.x,z=D.y,B=D.w,F=D.h;h.beginPath(),e.sharpRect(h,N,z,B,F),h.closePath(),h.fillStyle=I,h.fill()}var U=d.minX,K=d.minY,V=d.width,W=d.height;h.beginPath();var H=12/p,Y=12/p;e.roundedRect(h,U,K,V,W,Math.min(V/4,H),Math.min(W/4,Y)),h.closePath(),h.fillStyle=I,h.fill(),r.debug&&(h.strokeStyle="orange",h.strokeRect(U+1/p,K+1/v,V-2/p,W-2/v));for(var X,q=2.5/p,$=2.5/v,G=i.currentPageId,Q=0;Q<r.collaborators.length;Q++)(X=r.collaborators[Q]).currentPageId===G&&(h.beginPath(),h.ellipse(ka(X.cursor.x,a.minX+q,a.maxX-q),ka(X.cursor.y,a.minY+$,a.maxY-$),5/p,5/v,0,0,ba),h.fillStyle=X.color,h.fill());if(r.debug){h.lineWidth=2/p;var J=s.minX,Z=s.minY,ee=s.width,te=s.height;h.strokeStyle="red",h.strokeRect(J+1/p,Z+1/v,ee-2/p,te-2/v);var ne=a.minX,re=a.minY,ie=a.width,oe=a.height;h.strokeStyle="blue",h.strokeRect(ne+1/p,re+1/v,ie-2/p,oe-2/v)}}})),this.editor=t,this.dpr=n}return N(e,[{key:"setDpr",value:function(e){this.dpr=+e.toFixed(2)}}],[{key:"roundedRect",value:function(e,t,n,r,i,o,a){o<1&&a<1?e.rect(t,n,r,i):(e.moveTo(t+o,n),e.lineTo(t+r-o,n),e.quadraticCurveTo(t+r,n,t+r,n+a),e.lineTo(t+r,n+i-a),e.quadraticCurveTo(t+r,n+i,t+r-o,n+i),e.lineTo(t+o,n+i),e.quadraticCurveTo(t,n+i,t,n+i-a),e.lineTo(t,n+a),e.quadraticCurveTo(t,n,t+o,n))}},{key:"sharpRect",value:function(e,t,n,r,i,o,a){e.rect(t,n,r,i)}}]),e}(),GO=ua((function(e){var n=e.shapeFill,r=e.selectFill,i=e.viewportFill,o=da(),a=t.useRef(null),s=Hs(),u=t.useRef(!1),l=t.useMemo((function(){return new $O(o,o.devicePixelRatio)}),[o]),c=o.isDarkMode;t.useEffect((function(){var e=requestAnimationFrame((function(){var e=getComputedStyle(s);l.colors={shapeFill:e.getPropertyValue(n).trim(),selectFill:e.getPropertyValue(r).trim(),viewportFill:e.getPropertyValue(i).trim()},l.render()}));return function(){cancelAnimationFrame(e)}}),[s,r,n,i,l,c]);var d=t.useCallback((function(e){if(o.currentPageShapeIds.size){var t=l.minimapScreenPointToPagePoint(e.clientX,e.clientY,!1,!1),n=t.x,r=t.y,i=l.minimapScreenPointToPagePoint(e.clientX,e.clientY,!1,!0);l.originPagePoint.setTo(i),l.originPageCenter.setTo(o.viewportPageBounds.center),o.centerOnPoint(n,r,{duration:eu})}}),[o,l]),f=t.useCallback((function(e){if(e.currentTarget.setPointerCapture(e.pointerId),o.currentPageShapeIds.size){u.current=!0,l.isInViewport=!1;var t=l.minimapScreenPointToPagePoint(e.clientX,e.clientY,!1,!1),n=t.x,r=t.y,i=l.minimapScreenPointToPagePoint(e.clientX,e.clientY,!1,!0),a=o.viewportPageBounds;l.originPagePoint.setTo(i),l.originPageCenter.setTo(a.center),l.isInViewport=a.containsPoint(i),l.isInViewport||o.centerOnPoint(n,r,{duration:eu})}}),[o,l]),h=t.useCallback((function(e){if(u.current){var t=l.minimapScreenPointToPagePoint(e.clientX,e.clientY,e.shiftKey,!0),n=t.x,r=t.y;if(l.isInViewport){var i=va.Sub({x:n,y:r},l.originPagePoint),a=va.Add(l.originPageCenter,i);return void o.centerOnPoint(a.x,a.y)}o.centerOnPoint(n,r)}var s=l.getPagePoint(e.clientX,e.clientY),c=o.pageToScreen(s.x,s.y),d=R(R({type:"pointer",target:"canvas",name:"pointer_move"},function(e){return e.isKilled=!0,{point:{x:e.clientX,y:e.clientY,z:e.pressure},shiftKey:e.shiftKey,altKey:e.altKey,ctrlKey:e.metaKey||e.ctrlKey,pointerId:e.pointerId,button:e.button,isPen:"pen"===e.pointerType}}(e)),{},{point:c,isPen:o.isPenMode});o.dispatch(d)}),[o,l]),p=t.useCallback((function(e){u.current=!1}),[]),v=t.useCallback((function(e){var t=Fl(e);o.dispatch({type:"wheel",name:"wheel",delta:t,shiftKey:e.shiftKey,altKey:e.altKey,ctrlKey:e.metaKey||e.ctrlKey})}),[o]);Gl("update dpr",(function(){var e=o.devicePixelRatio;l.setDpr(e);var t=a.current,n=t.getBoundingClientRect(),r=n.width*e,i=n.height*e;t.width=r,t.height=i,l.canvasScreenBounds.set(n.x,n.y,r,i),l.cvs=a.current}),[o,l]);var g=t.useMemo((function(){return o.store.query.records("instance_presence")}),[o]);return Gl("minimap render when pagebounds or collaborators changes",(function(){o.devicePixelRatio;var e=o.viewportPageBounds,t=o.allShapesCommonBounds;l.contentPageBounds=t?Wa.Expand(t,e):e,l.updateContentScreenBounds();var n=[];o.currentPageShapeIds.forEach((function(e){var t=o.getPageBoundsById(e),r=o.getPageMaskById(e);if(r){var i=gs(r,t.corners);if(!i)return;t=Wa.FromPoints(i)}t&&(t.id=e,n.push(t))})),l.pageBounds=n,l.collaborators=g.value,l.render()}),[o,l]),(0,Qo.jsx)("div",{className:"tlui-minimap",children:(0,Qo.jsx)("canvas",{ref:a,className:"tlui-minimap__canvas",onDoubleClick:d,onPointerMove:h,onPointerDown:f,onPointerUp:p,onWheel:v})})}));var QO=ua((function(){var e=da(),n=ax(),r=DI(),i=e.zoomLevel,o=e.currentPageShapeIds.size>0,a=e.selectedIds.length>0,s=1===e.zoomLevel,u=t.useCallback((function(){e.resetZoom(e.viewportScreenCenter,{duration:eu})}),[e]);return(0,Qo.jsxs)(cC,{id:"zoom",children:[(0,Qo.jsx)(dC,{children:(0,Qo.jsx)(gx,{title:"".concat(n("navigation-zone.zoom")),"data-testid":"minimap.zoom-menu",className:r<5?"tlui-zoom-menu__button":"tlui-zoom-menu__button__pct",onDoubleClick:u,icon:r<4?"zoom-in":void 0,children:r<4?null:(0,Qo.jsxs)("span",{style:{flexGrow:0,textAlign:"center"},children:[Math.floor(100*i),"%"]})})}),(0,Qo.jsx)(fC,{side:"top",align:"start",alignOffset:0,children:(0,Qo.jsxs)(gC,{children:[(0,Qo.jsx)(JO,{action:"zoom-in","data-testid":"minimap.zoom-menu.zoom-in",noClose:!0}),(0,Qo.jsx)(JO,{action:"zoom-out","data-testid":"minimap.zoom-menu.zoom-out",noClose:!0}),(0,Qo.jsx)(JO,{action:"zoom-to-100","data-testid":"minimap.zoom-menu.zoom-to-100",noClose:!0,disabled:s}),(0,Qo.jsx)(JO,{action:"zoom-to-fit",disabled:!o,"data-testid":"minimap.zoom-menu.zoom-to-fit",noClose:!0}),(0,Qo.jsx)(JO,{action:"zoom-to-selection",disabled:!a,"data-testid":"minimap.zoom-menu.zoom-to-selection",noClose:!0})]})})]})}));function JO(e){var t=e.action,n=e.disabled,r=void 0!==n&&n,i=e.noClose,o=void 0!==i&&i,a=kI();return(0,Qo.jsx)(mC,{label:a[t].label,kbd:a[t].kbd,"data-testid":e["data-testid"],onClick:function(){return a[t].onSelect("zoom-menu")},noClose:o,disabled:r})}var ZO=(0,t.memo)((function(){var e=kI(),n=ax(),r=DI(),i=function(e,n){var r=L(t.useState(n),2),i=r[0],o=r[1];t.useLayoutEffect((function(){var t=localStorage.getItem(e);if(t)try{o(JSON.parse(t))}catch(kM){console.error("Could not restore value ".concat(e," from local storage."))}}),[e]);var a=t.useCallback((function(t){o((function(n){var r="function"===typeof t?t(n):t;return localStorage.setItem(e,JSON.stringify(r)),r}))}),[e]);return[i,a]}("minimap",!0),o=L(i,2),a=o[0],s=o[1],u=(0,t.useCallback)((function(){s((function(e){return!e}))}),[s]);return r<4?null:(0,Qo.jsxs)("div",{className:"tlui-navigation-zone",children:[(0,Qo.jsx)("div",{className:"tlui-navigation-zone__controls",children:r<6?(0,Qo.jsx)(QO,{}):a?(0,Qo.jsxs)(Qo.Fragment,{children:[(0,Qo.jsx)(QO,{}),(0,Qo.jsx)(gx,{title:n("navigation-zone.toggle-minimap"),className:"tlui-navigation-zone__toggle","data-testid":"minimap.toggle",onClick:u,icon:a?"chevrons-ne":"chevrons-sw"})]}):(0,Qo.jsxs)(Qo.Fragment,{children:[(0,Qo.jsx)(gx,{icon:"minus","data-testid":"minimap.zoom-out",title:"".concat(n(e["zoom-out"].label)," ").concat(hx(e["zoom-out"].kbd)),onClick:function(){return e["zoom-out"].onSelect("navigation-zone")}}),(0,Qo.jsx)(QO,{}),(0,Qo.jsx)(gx,{icon:"plus","data-testid":"minimap.zoom-in",title:"".concat(n(e["zoom-in"].label)," ").concat(hx(e["zoom-in"].kbd)),onClick:function(){return e["zoom-in"].onSelect("navigation-zone")}}),(0,Qo.jsx)(gx,{title:n("navigation-zone.toggle-minimap"),className:"tlui-navigation-zone__toggle",onClick:u,icon:a?"chevrons-ne":"chevrons-sw"})]})}),r>=6&&!a&&(0,Qo.jsx)(GO,{viewportFill:"--color-muted-1",selectFill:"--color-selected",shapeFill:"--color-text-3"})]})})),ej=ua((function(){var e=da().isPenMode,t=kI();if(!e)return null;var n=t["exit-pen-mode"];return(0,Qo.jsx)(gx,{label:n.label,iconLeft:n.icon,onClick:function(){return n.onSelect("helper-buttons")}})})),tj=ua((function(){var e=da(),t=kI();if(!e.instanceState.followingUserId)return null;var n=t["stop-following"];return(0,Qo.jsx)(gx,{label:n.label,iconLeft:n.icon,onClick:function(){return n.onSelect("people-menu")}})}));var nj=t.memo((function(e){var n=e.uiType,r=e.items,i=e.title,o=e.style,a=e.value,s=e.columns,u=void 0===s?ka(r.length,2,4):s,l=e.onValueChange,c=da(),d=ax(),f=(0,t.useRef)(!1),h=t.useMemo((function(){var e=function e(){f.current=!1,window.removeEventListener("pointerup",e)};return{handleButtonClick:function(e){var t=e.currentTarget.dataset.id;"shared"===a.type&&a.value===t||(c.mark("point picker item"),l(o,t,!1))},handleButtonPointerDown:function(t){var n=t.currentTarget.dataset.id;c.mark("point picker item"),l(o,n,!0),f.current=!0,window.addEventListener("pointerup",e)},handleButtonPointerEnter:function(e){if(f.current){var t=e.currentTarget.dataset.id;l(o,t,!0)}},handleButtonPointerUp:function(e){var t=e.currentTarget.dataset.id;l(o,t,!1)}}}),[a,c,l,o]),p=h.handleButtonClick,v=h.handleButtonPointerDown,g=h.handleButtonPointerEnter,m=h.handleButtonPointerUp;return(0,Qo.jsx)("div",{className:ra("tlui-button-grid",{"tlui-button-grid__two":2===u,"tlui-button-grid__three":3===u,"tlui-button-grid__four":4===u}),children:r.map((function(e){return(0,Qo.jsx)(gx,{"data-id":e.value,"data-testid":"style.".concat(n,".").concat(e.value),"aria-label":e.value,"data-state":"shared"===a.type&&a.value===e.value?"hinted":void 0,title:i+" \u2014 "+d("".concat(n,"-style.").concat(e.value)),className:ra("tlui-button-grid__button"),style:o===ki?{color:"var(--palette-".concat(e.value,")")}:void 0,onPointerEnter:g,onPointerDown:v,onPointerUp:m,onClick:p,icon:e.icon},e.value)}))})}));function rj(e,t){var n=L(t,2),r=n[0],i=n[1];return Math.min(i,Math.max(r,e))}var ij=["name","min","max","step","orientation","disabled","minStepsBetweenThumbs","defaultValue","value","onValueChange","onValueCommit","inverted"],oj=["min","max","dir","inverted","onSlideStart","onSlideMove","onSlideEnd","onStepKeyDown"],aj=["min","max","inverted","onSlideStart","onSlideMove","onSlideEnd","onStepKeyDown"],sj=["__scopeSlider","onSlideStart","onSlideMove","onSlideEnd","onHomeKeyDown","onEndKeyDown","onStepKeyDown"],uj=["__scopeSlider"],lj=["__scopeSlider"],cj=["__scopeSlider","index"],dj=["value"],fj=["PageUp","PageDown"],hj=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],pj={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},vj="Slider",gj=L(Sx(vj),3),mj=gj[0],yj=gj[1],bj=gj[2],wj=L(Cy(vj,[bj]),2),xj=wj[0],kj=(wj[1],L(xj(vj),2)),Sj=kj[0],_j=kj[1],Ej=(0,t.forwardRef)((function(e,n){var r=e.name,i=e.min,o=void 0===i?0:i,a=e.max,s=void 0===a?100:a,l=e.step,c=void 0===l?1:l,d=e.orientation,f=void 0===d?"horizontal":d,h=e.disabled,p=void 0!==h&&h,v=e.minStepsBetweenThumbs,g=void 0===v?0:v,m=e.defaultValue,y=void 0===m?[o]:m,b=e.value,w=e.onValueChange,x=void 0===w?function(){}:w,k=e.onValueCommit,S=void 0===k?function(){}:k,_=e.inverted,E=void 0!==_&&_,C=Jt(e,ij),P=L((0,t.useState)(null),2),I=P[0],T=P[1],M=Sy(n,(function(e){return T(e)})),A=(0,t.useRef)(new Set),O=(0,t.useRef)(0),j="horizontal"===f,R=!I||Boolean(I.closest("form")),D=j?Tj:Mj,N=L(jy({prop:b,defaultProp:y,onChange:function(e){var t;null===(t=u(A.current)[O.current])||void 0===t||t.focus(),x(e)}}),2),z=N[0],B=void 0===z?[]:z,F=N[1],U=(0,t.useRef)(B);function K(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{commit:!1}).commit,r=function(e){return(String(e).split(".")[1]||"").length}(c),i=function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n}(Math.round((e-o)/c)*c+o,r),a=rj(i,[o,s]);F((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=u(e);return r[n]=t,r.sort((function(e,t){return e-t}))}(e,a,t);if(function(e,t){if(t>0){var n=function(e){return e.slice(0,-1).map((function(t,n){return e[n+1]-t}))}(e);return Math.min.apply(Math,u(n))>=t}return!0}(r,g*c)){O.current=r.indexOf(a);var i=String(r)!==String(e);return i&&n&&S(r),i?r:e}return e}))}return(0,t.createElement)(Sj,{scope:e.__scopeSlider,disabled:p,min:o,max:s,valueIndexToChangeRef:O,thumbs:A.current,values:B,orientation:f},(0,t.createElement)(mj.Provider,{scope:e.__scopeSlider},(0,t.createElement)(mj.Slot,{scope:e.__scopeSlider},(0,t.createElement)(D,wy({"aria-disabled":p,"data-disabled":p?"":void 0},C,{ref:M,onPointerDown:xy(C.onPointerDown,(function(){p||(U.current=B)})),min:o,max:s,inverted:E,onSlideStart:p?void 0:function(e){var t=function(e,t){if(1===e.length)return 0;var n=e.map((function(e){return Math.abs(e-t)})),r=Math.min.apply(Math,u(n));return n.indexOf(r)}(B,e);K(e,t)},onSlideMove:p?void 0:function(e){K(e,O.current)},onSlideEnd:p?void 0:function(){var e=U.current[O.current];B[O.current]!==e&&S(B)},onHomeKeyDown:function(){return!p&&K(o,0,{commit:!0})},onEndKeyDown:function(){return!p&&K(s,B.length-1,{commit:!0})},onStepKeyDown:function(e){var t=e.event,n=e.direction;if(!p){var r=fj.includes(t.key)||t.shiftKey&&hj.includes(t.key)?10:1,i=O.current;K(B[i]+c*r*n,i,{commit:!0})}}})))),R&&B.map((function(e,n){return(0,t.createElement)(Bj,{key:n,name:r?r+(B.length>1?"[]":""):void 0,value:e})})))})),Cj=L(xj(vj,{startEdge:"left",endEdge:"right",size:"width",direction:1}),2),Pj=Cj[0],Ij=Cj[1],Tj=(0,t.forwardRef)((function(e,n){var r=e.min,i=e.max,o=e.dir,a=e.inverted,s=e.onSlideStart,u=e.onSlideMove,l=e.onSlideEnd,c=e.onStepKeyDown,d=Jt(e,oj),f=L((0,t.useState)(null),2),h=f[0],p=f[1],v=Sy(n,(function(e){return p(e)})),g=(0,t.useRef)(),m=Ex(o),y="ltr"===m,b=y&&!a||!y&&a;function w(e){var t=g.current||h.getBoundingClientRect(),n=Uj([0,t.width],b?[r,i]:[i,r]);return g.current=t,n(e-t.left)}return(0,t.createElement)(Pj,{scope:e.__scopeSlider,startEdge:b?"left":"right",endEdge:b?"right":"left",direction:b?1:-1,size:"width"},(0,t.createElement)(Aj,wy({dir:m,"data-orientation":"horizontal"},d,{ref:v,style:R(R({},d.style),{},O({},"--radix-slider-thumb-transform","translateX(-50%)")),onSlideStart:function(e){var t=w(e.clientX);null===s||void 0===s||s(t)},onSlideMove:function(e){var t=w(e.clientX);null===u||void 0===u||u(t)},onSlideEnd:function(){g.current=void 0,null===l||void 0===l||l()},onStepKeyDown:function(e){var t=pj[b?"from-left":"from-right"].includes(e.key);null===c||void 0===c||c({event:e,direction:t?-1:1})}})))})),Mj=(0,t.forwardRef)((function(e,n){var r=e.min,i=e.max,o=e.inverted,a=e.onSlideStart,s=e.onSlideMove,u=e.onSlideEnd,l=e.onStepKeyDown,c=Jt(e,aj),d=(0,t.useRef)(null),f=Sy(n,d),h=(0,t.useRef)(),p=!o;function v(e){var t=h.current||d.current.getBoundingClientRect(),n=Uj([0,t.height],p?[i,r]:[r,i]);return h.current=t,n(e-t.top)}return(0,t.createElement)(Pj,{scope:e.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1},(0,t.createElement)(Aj,wy({"data-orientation":"vertical"},c,{ref:f,style:R(R({},c.style),{},O({},"--radix-slider-thumb-transform","translateY(50%)")),onSlideStart:function(e){var t=v(e.clientY);null===a||void 0===a||a(t)},onSlideMove:function(e){var t=v(e.clientY);null===s||void 0===s||s(t)},onSlideEnd:function(){h.current=void 0,null===u||void 0===u||u()},onStepKeyDown:function(e){var t=pj[p?"from-bottom":"from-top"].includes(e.key);null===l||void 0===l||l({event:e,direction:t?-1:1})}})))})),Aj=(0,t.forwardRef)((function(e,n){var r=e.__scopeSlider,i=e.onSlideStart,o=e.onSlideMove,a=e.onSlideEnd,s=e.onHomeKeyDown,u=e.onEndKeyDown,l=e.onStepKeyDown,c=Jt(e,sj),d=_j(vj,r);return(0,t.createElement)(Ky.span,wy({},c,{ref:n,onKeyDown:xy(e.onKeyDown,(function(e){"Home"===e.key?(s(e),e.preventDefault()):"End"===e.key?(u(e),e.preventDefault()):fj.concat(hj).includes(e.key)&&(l(e),e.preventDefault())})),onPointerDown:xy(e.onPointerDown,(function(e){var t=e.target;t.setPointerCapture(e.pointerId),e.preventDefault(),d.thumbs.has(t)?t.focus():i(e)})),onPointerMove:xy(e.onPointerMove,(function(e){e.target.hasPointerCapture(e.pointerId)&&o(e)})),onPointerUp:xy(e.onPointerUp,(function(e){var t=e.target;t.hasPointerCapture(e.pointerId)&&(t.releasePointerCapture(e.pointerId),a(e))}))}))})),Oj="SliderTrack",jj=(0,t.forwardRef)((function(e,n){var r=e.__scopeSlider,i=Jt(e,uj),o=_j(Oj,r);return(0,t.createElement)(Ky.span,wy({"data-disabled":o.disabled?"":void 0,"data-orientation":o.orientation},i,{ref:n}))})),Rj="SliderRange",Lj=(0,t.forwardRef)((function(e,n){var r,i=e.__scopeSlider,o=Jt(e,lj),a=_j(Rj,i),s=Ij(Rj,i),l=Sy(n,(0,t.useRef)(null)),c=a.values.length,d=a.values.map((function(e){return Fj(e,a.min,a.max)})),f=c>1?Math.min.apply(Math,u(d)):0,h=100-Math.max.apply(Math,u(d));return(0,t.createElement)(Ky.span,wy({"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0},o,{ref:l,style:R(R({},e.style),{},(r={},O(r,s.startEdge,f+"%"),O(r,s.endEdge,h+"%"),r))}))})),Dj="SliderThumb",Nj=(0,t.forwardRef)((function(e,n){var r=yj(e.__scopeSlider),i=L((0,t.useState)(null),2),o=i[0],a=i[1],s=Sy(n,(function(e){return a(e)})),u=(0,t.useMemo)((function(){return o?r().findIndex((function(e){return e.ref.current===o})):-1}),[r,o]);return(0,t.createElement)(zj,wy({},e,{ref:s,index:u}))})),zj=(0,t.forwardRef)((function(e,n){var r=e.__scopeSlider,i=e.index,o=Jt(e,cj),a=_j(Dj,r),s=Ij(Dj,r),u=L((0,t.useState)(null),2),l=u[0],c=u[1],d=Sy(n,(function(e){return c(e)})),f=Zk(l),h=a.values[i],p=void 0===h?0:Fj(h,a.min,a.max),v=function(e,t){return t>2?"Value ".concat(e+1," of ").concat(t):2===t?["Minimum","Maximum"][e]:void 0}(i,a.values.length),g=null===f||void 0===f?void 0:f[s.size],m=g?function(e,t,n){var r=e/2,i=Uj([0,50],[0,r]);return(r-i(t)*n)*n}(g,p,s.direction):0;return(0,t.useEffect)((function(){if(l)return a.thumbs.add(l),function(){a.thumbs.delete(l)}}),[l,a.thumbs]),(0,t.createElement)("span",{style:O({transform:"var(--radix-slider-thumb-transform)",position:"absolute"},s.startEdge,"calc(".concat(p,"% + ").concat(m,"px)"))},(0,t.createElement)(mj.ItemSlot,{scope:e.__scopeSlider},(0,t.createElement)(Ky.span,wy({role:"slider","aria-label":e["aria-label"]||v,"aria-valuemin":a.min,"aria-valuenow":h,"aria-valuemax":a.max,"aria-orientation":a.orientation,"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,tabIndex:a.disabled?void 0:0},o,{ref:d,style:void 0===h?{display:"none"}:e.style,onFocus:xy(e.onFocus,(function(){a.valueIndexToChangeRef.current=i}))}))))})),Bj=function(e){var n=e.value,r=Jt(e,dj),i=(0,t.useRef)(null),o=function(e){var n=(0,t.useRef)({value:e,previous:e});return(0,t.useMemo)((function(){return n.current.value!==e&&(n.current.previous=n.current.value,n.current.value=e),n.current.previous}),[e])}(n);return(0,t.useEffect)((function(){var e=i.current,t=window.HTMLInputElement.prototype,r=Object.getOwnPropertyDescriptor(t,"value").set;if(o!==n&&r){var a=new Event("input",{bubbles:!0});r.call(e,n),e.dispatchEvent(a)}}),[o,n]),(0,t.createElement)("input",wy({style:{display:"none"}},r,{ref:i,defaultValue:n}))};function Fj(e,t,n){return rj(100/(n-t)*(e-t),[0,100])}function Uj(e,t){return function(n){if(e[0]===e[1]||t[0]===t[1])return t[0];var r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}var Kj=Ej,Vj=jj,Wj=Lj,Hj=Nj;function Yj(e){var n=e.title,r=e.steps,i=e.value,o=e.label,a=e.onValueChange,s=da(),u=ax(),l=(0,t.useCallback)((function(e){a(e[0],!0)}),[a]),c=(0,t.useCallback)((function(){s.mark("click slider")}),[s]),d=(0,t.useCallback)((function(){i&&a(i,!1)}),[i,a]);return(0,Qo.jsx)("div",{className:"tlui-slider__container",children:(0,Qo.jsxs)(Kj,{"data-testid":e["data-testid"],className:"tlui-slider","area-label":"Opacity",dir:"ltr",min:0,max:r,step:1,value:i?[i]:void 0,onPointerDown:c,onValueChange:l,onPointerUp:d,title:n+" \u2014 "+u(o),children:[(0,Qo.jsx)(Vj,{className:"tlui-slider__track",dir:"ltr",children:null!==i&&(0,Qo.jsx)(Wj,{className:"tlui-slider__range",dir:"ltr"})}),null!==i&&(0,Qo.jsx)(Hj,{className:"tlui-slider__thumb",dir:"ltr"})]})})}var Xj=t.memo((function(e){var n=e.label,r=e.uiTypeA,i=e.uiTypeB,o=e.labelA,a=e.labelB,s=e.itemsA,u=e.itemsB,l=e.styleA,c=e.styleB,d=e.valueA,f=e.valueB,h=e.onValueChange,p=ax(),v=t.useMemo((function(){var e,t;return null!==(e=null===(t=s.find((function(e){return"shared"===d.type&&d.value===e.value})))||void 0===t?void 0:t.icon)&&void 0!==e?e:"mixed"}),[s,d]),g=t.useMemo((function(){var e,t;return null!==(e=null===(t=u.find((function(e){return"shared"===f.type&&f.value===e.value})))||void 0===t?void 0:t.icon)&&void 0!==e?e:"mixed"}),[u,f]);return void 0===d&&void 0===f?null:(0,Qo.jsxs)("div",{className:"tlui-style-panel__double-select-picker",children:[(0,Qo.jsx)("div",{title:p(n),className:"tlui-style-panel__double-select-picker-label",children:p(n)}),(0,Qo.jsxs)(cC,{id:"style panel ".concat(r," A"),children:[(0,Qo.jsx)(YE,{asChild:!0,children:(0,Qo.jsx)(gx,{"data-testid":"style.".concat(r),title:p(o)+" \u2014 "+p(null===d?"style-panel.mixed":"".concat(r,"-style.").concat(d)),icon:v,invertIcon:!0,smallIcon:!0})}),(0,Qo.jsx)(fC,{side:"bottom",align:"end",sideOffset:0,alignOffset:-2,children:(0,Qo.jsx)("div",{className:ra("tlui-button-grid",{"tlui-button-grid__two":s.length<4,"tlui-button-grid__four":s.length>=4}),children:s.map((function(e){return(0,Qo.jsx)(mC,{className:"tlui-button-grid__button",title:p(o)+" \u2014 "+p("".concat(r,"-style.").concat(e.value)),"data-testid":"style.".concat(r,".").concat(e.value),icon:e.icon,onClick:function(){return h(l,e.value,!1)},invertIcon:!0},e.value)}))})})]}),(0,Qo.jsxs)(cC,{id:"style panel ".concat(i),children:[(0,Qo.jsx)(YE,{asChild:!0,children:(0,Qo.jsx)(gx,{"data-testid":"style.".concat(i),title:p(a)+" \u2014 "+p(null===f?"style-panel.mixed":"".concat(i,"-style.").concat(f)),icon:g,smallIcon:!0})}),(0,Qo.jsx)(fC,{side:"bottom",align:"end",sideOffset:0,alignOffset:-2,children:(0,Qo.jsx)("div",{className:ra("tlui-button-grid",{"tlui-button-grid__two":s.length<4,"tlui-button-grid__four":s.length>=4}),children:u.map((function(e){return(0,Qo.jsx)(mC,{className:"tlui-button-grid__button",title:p(a)+" \u2014 "+p("".concat(i,"-style.").concat(e.value)),"data-testid":"style.".concat(i,".").concat(e.value),icon:e.icon,onClick:function(){return h(c,e.value,!1)}},e.value)}))})})]})]})})),qj=t.memo((function(e){var n=e.id,r=e.label,i=e.uiType,o=e.style,a=e.items,s=e.value,u=e.onValueChange,l=ax(),c=t.useMemo((function(){var e;return null===(e=a.find((function(e){return"shared"===s.type&&e.value===s.value})))||void 0===e?void 0:e.icon}),[a,s]);return(0,Qo.jsxs)(cC,{id:"style panel ".concat(n),children:[(0,Qo.jsx)(YE,{asChild:!0,children:(0,Qo.jsx)(gx,{"data-testid":"style.".concat(i),title:"mixed"===s.type?l("style-panel.mixed"):l("".concat(i,"-style.").concat(s.value)),label:r,icon:null!==c&&void 0!==c?c:"mixed"})}),(0,Qo.jsx)(fC,{side:"left",align:"center",alignOffset:0,children:(0,Qo.jsx)("div",{className:ra("tlui-button-grid",{"tlui-button-grid__two":a.length<3,"tlui-button-grid__three":3==a.length,"tlui-button-grid__four":a.length>=4}),children:a.map((function(e){return(0,Qo.jsx)(mC,{className:"tlui-button-grid__button","data-testid":"style.".concat(i,".").concat(e.value),title:l("".concat(i,"-style.").concat(e.value)),icon:e.icon,onClick:function(){return u(o,e.value,!1)}},e.value)}))})})]})})),$j={color:[{value:"black",icon:"color"},{value:"grey",icon:"color"},{value:"light-violet",icon:"color"},{value:"violet",icon:"color"},{value:"blue",icon:"color"},{value:"light-blue",icon:"color"},{value:"yellow",icon:"color"},{value:"orange",icon:"color"},{value:"green",icon:"color"},{value:"light-green",icon:"color"},{value:"light-red",icon:"color"},{value:"red",icon:"color"}],fill:[{value:"none",icon:"fill-none"},{value:"semi",icon:"fill-semi"},{value:"solid",icon:"fill-solid"},{value:"pattern",icon:"fill-pattern"}],dash:[{value:"draw",icon:"dash-draw"},{value:"dashed",icon:"dash-dashed"},{value:"dotted",icon:"dash-dotted"},{value:"solid",icon:"dash-solid"}],size:[{value:"s",icon:"size-small"},{value:"m",icon:"size-medium"},{value:"l",icon:"size-large"},{value:"xl",icon:"size-extra-large"}],font:[{value:"draw",icon:"font-draw"},{value:"sans",icon:"font-sans"},{value:"serif",icon:"font-serif"},{value:"mono",icon:"font-mono"}],horizontalAlign:[{value:"start",icon:"text-align-left"},{value:"middle",icon:"text-align-center"},{value:"end",icon:"text-align-right"}],verticalAlign:[{value:"start",icon:"vertical-align-start"},{value:"middle",icon:"vertical-align-center"},{value:"end",icon:"vertical-align-end"}],geo:[{value:"rectangle",icon:"geo-rectangle"},{value:"ellipse",icon:"geo-ellipse"},{value:"triangle",icon:"geo-triangle"},{value:"diamond",icon:"geo-diamond"},{value:"pentagon",icon:"geo-pentagon"},{value:"hexagon",icon:"geo-hexagon"},{value:"octagon",icon:"geo-octagon"},{value:"star",icon:"geo-star"},{value:"rhombus",icon:"geo-rhombus"},{value:"rhombus-2",icon:"geo-rhombus-2"},{value:"oval",icon:"geo-oval"},{value:"trapezoid",icon:"geo-trapezoid"},{value:"arrow-right",icon:"geo-arrow-right"},{value:"arrow-left",icon:"geo-arrow-left"},{value:"arrow-up",icon:"geo-arrow-up"},{value:"arrow-down",icon:"geo-arrow-down"},{value:"x-box",icon:"geo-x-box"},{value:"check-box",icon:"geo-check-box"}],arrowheadStart:[{value:"none",icon:"arrowhead-none"},{value:"arrow",icon:"arrowhead-arrow"},{value:"triangle",icon:"arrowhead-triangle"},{value:"square",icon:"arrowhead-square"},{value:"dot",icon:"arrowhead-dot"},{value:"diamond",icon:"arrowhead-diamond"},{value:"inverted",icon:"arrowhead-triangle-inverted"},{value:"bar",icon:"arrowhead-bar"}],arrowheadEnd:[{value:"none",icon:"arrowhead-none"},{value:"arrow",icon:"arrowhead-arrow"},{value:"triangle",icon:"arrowhead-triangle"},{value:"square",icon:"arrowhead-square"},{value:"dot",icon:"arrowhead-dot"},{value:"diamond",icon:"arrowhead-diamond"},{value:"inverted",icon:"arrowhead-triangle-inverted"},{value:"bar",icon:"arrowhead-bar"}],spline:[{value:"line",icon:"spline-line"},{value:"cubic",icon:"spline-cubic"}]},Gj=[ki,_i,Ei,Pi];var Qj=function(e){var n=e.isMobile,r=da(),i=la("getRelevantStyles",(function(){return function(e){var t,n=new Pp(e.sharedStyles),r=e.selectedIds.length>0||!(null===(t=e.root.current.value)||void 0===t||!t.shapeType);if(0===n.size&&e.isIn("select")&&0===e.selectedIds.length)for(var i=0,o=Gj;i<o.length;i++){var a=o[i];n.applyValue(a,e.getStyleForNextShape(a))}return 0!==n.size||r?{styles:n,opacity:e.sharedOpacity}:null}(r)}),[r]),o=(0,t.useCallback)((function(){n||(r.isChangingStyle=!1)}),[r,n]);if(!i)return null;var a=i.styles,s=i.opacity,u=a.get(fo),l=a.get(Ai),c=a.get(Mi),d=void 0===u,f=void 0===l&&void 0===c,h=void 0===a.get(Mo),p=void 0===a.get(Ci);return(0,Qo.jsxs)("div",{className:"tlui-style-panel","data-ismobile":n,onPointerLeave:o,children:[(0,Qo.jsx)(eR,{styles:a,opacity:s}),!p&&(0,Qo.jsx)(tR,{styles:a}),!(d&&f&&h)&&(0,Qo.jsxs)("div",{className:"tlui-style-panel__section","aria-label":"style panel styles",children:[(0,Qo.jsx)(nR,{styles:a}),(0,Qo.jsx)(iR,{styles:a}),(0,Qo.jsx)(rR,{styles:a})]})]})};function Jj(){var e=da();return t.useMemo((function(){return function(t,n,r){e.setStyle(t,n,r),e.isChangingStyle=!0}}),[e])}var Zj=[.1,.25,.5,.75,1];function eR(e){var n=e.styles,r=e.opacity,i=da(),o=ax(),a=Jj(),s=t.useCallback((function(e,t){var n=Zj[e];i.setOpacity(n,t),i.isChangingStyle=!0}),[i]),u=n.get(ki),l=n.get(Ei),c=n.get(_i),d=n.get(Pi),f=void 0!==l||void 0!==c||void 0!==d,h="mixed"===r.type?-1:Zj.indexOf(Q(Zj,(function(e){return Math.abs(e-r.value)})));return(0,Qo.jsxs)(Qo.Fragment,{children:[(0,Qo.jsxs)("div",{className:"tlui-style-panel__section__common","aria-label":"style panel styles",children:[void 0===u?null:(0,Qo.jsx)(nj,{title:o("style-panel.color"),uiType:"color",style:ki,items:$j.color,value:u,onValueChange:a}),void 0===r?null:(0,Qo.jsx)(Yj,{"data-testid":"style.opacity",value:h>=0?h:Zj.length-1,label:"mixed"===r.type?"style-panel.mixed":"opacity-style.".concat(r),onValueChange:s,steps:Zj.length-1,title:o("style-panel.opacity")})]}),f&&(0,Qo.jsxs)("div",{className:"tlui-style-panel__section","aria-label":"style panel styles",children:[void 0===l?null:(0,Qo.jsx)(nj,{title:o("style-panel.fill"),uiType:"fill",style:Ei,items:$j.fill,value:l,onValueChange:a}),void 0===c?null:(0,Qo.jsx)(nj,{title:o("style-panel.dash"),uiType:"dash",style:_i,items:$j.dash,value:c,onValueChange:a}),void 0===d?null:(0,Qo.jsx)(nj,{title:o("style-panel.size"),uiType:"size",style:Pi,items:$j.size,value:d,onValueChange:a})]})]})}function tR(e){var t=e.styles,n=ax(),r=Jj(),i=t.get(Ci),o=t.get(ao),a=t.get(so);return void 0===i&&void 0===o?null:(0,Qo.jsxs)("div",{className:"tlui-style-panel__section","aria-label":"style panel text",children:[void 0===i?null:(0,Qo.jsx)(nj,{title:n("style-panel.font"),uiType:"font",style:Ci,items:$j.font,value:i,onValueChange:r}),void 0===o?null:(0,Qo.jsxs)("div",{className:"tlui-style-panel__row",children:[(0,Qo.jsx)(nj,{title:n("style-panel.align"),uiType:"align",style:ao,items:$j.horizontalAlign,value:o,onValueChange:r}),void 0===a?(0,Qo.jsx)(gx,{title:n("style-panel.vertical-align"),"data-testid":"vertical-align",icon:"vertical-align-center",disabled:!0}):(0,Qo.jsx)(qj,{id:"geo-vertical-alignment",uiType:"verticalAlign",style:so,items:$j.verticalAlign,value:a,onValueChange:r})]})]})}function nR(e){var t=e.styles,n=Jj(),r=t.get(fo);return void 0===r?null:(0,Qo.jsx)(qj,{id:"geo",label:"style-panel.geo",uiType:"geo",style:fo,items:$j.geo,value:r,onValueChange:n})}function rR(e){var t=e.styles,n=Jj(),r=t.get(Mo);return void 0===r?null:(0,Qo.jsx)(qj,{id:"spline",label:"style-panel.spline",uiType:"spline",style:Mo,items:$j.spline,value:r,onValueChange:n})}function iR(e){var t=e.styles,n=Jj(),r=t.get(Ai),i=t.get(Mi);return r&&i?(0,Qo.jsx)(Xj,{label:"style-panel.arrowheads",uiTypeA:"arrowheadStart",styleA:Mi,itemsA:$j.arrowheadStart,valueA:i,uiTypeB:"arrowheadEnd",styleB:Ai,itemsB:$j.arrowheadEnd,valueB:r,onValueChange:n,labelA:"style-panel.arrowhead-start",labelB:"style-panel.arrowhead-end"}):null}function oR(e){var t,n,r=e.toast,i=sI().removeToast,o=ax(),a=r.actions&&r.actions.length>0;return(0,Qo.jsxs)(fP,{onOpenChange:function(e){e||i(r.id)},className:"tlui-toast__container",duration:r.keepOpen?1/0:5e3,children:[r.icon&&(0,Qo.jsx)("div",{className:"tlui-toast__icon",children:(0,Qo.jsx)(lx,{icon:r.icon})}),(0,Qo.jsxs)("div",{className:"tlui-toast__main",children:[(0,Qo.jsxs)("div",{className:"tlui-toast__content",children:[(0,Qo.jsx)(hP,{className:"tlui-toast__title",children:r.title}),(0,Qo.jsx)(pP,{className:"tlui-toast__description",children:r.description})]}),r.actions&&(0,Qo.jsxs)("div",{className:"tlui-toast__actions",children:[r.actions.map((function(e,t){return(0,Qo.jsx)(vP,{altText:e.label,asChild:!0,onClick:e.onClick,children:(0,Qo.jsx)(gx,{className:"warn"===e.type?"tlui-button__warning":"tlui-button__primary",children:e.label})},t)})),a&&(0,Qo.jsx)(gP,{asChild:!0,children:(0,Qo.jsx)(gx,{className:"tlui-toast__close",style:{marginLeft:"auto"},children:null!==(t=r.closeLabel)&&void 0!==t?t:o("toast.close")})})]})]}),!a&&(0,Qo.jsx)(gP,{asChild:!0,children:(0,Qo.jsx)(gx,{className:"tlui-toast__close",children:null!==(n=r.closeLabel)&&void 0!==n?n:o("toast.close")})})]})}var aR=t.memo((function(){var e=sI().toasts;return(0,Qo.jsx)(Qo.Fragment,{children:e.map((function(e){return(0,Qo.jsx)(oR,{toast:e},e.id)}))})}));function sR(){var e=sI().toasts,n=L(t.useState(!1),2),r=n[0],i=n[1];return t.useEffect((function(){var t=!1;return e.length?i(!0):setTimeout((function(){t||i(!1)}),1e3),function(){t=!0}}),[e.length,i]),r?(0,Qo.jsx)(HC,{className:"tlui-toast__viewport"}):null}function uR(){var e=da(),n=ax(),r=la("current color",(function(){var t=e.sharedStyles.get(ki);return t?"mixed"===t.type?null:"var(--palette-".concat(t,")"):"var(--color-muted-1)"}),[e]),i=la("isHandOrEraserToolActive",(function(){return e.isInAny("hand","zoom","eraser")}),[e]),o=(0,t.useCallback)((function(t){t||(e.isChangingStyle=!1)}),[e]);return(0,Qo.jsxs)(RO,{id:"style menu",onOpenChange:o,children:[(0,Qo.jsx)(LO,{disabled:i,children:(0,Qo.jsx)(gx,{className:"tlui-toolbar__tools__button tlui-toolbar__styles__button","data-testid":"mobile.styles",style:{color:null!==r&&void 0!==r?r:"var(--color-text)"},title:n("style-panel.title"),children:(0,Qo.jsx)(lx,{icon:r?"blob":"mixed"})})}),(0,Qo.jsx)(DO,{side:"top",align:"end",children:(0,Qo.jsx)(Qj,{isMobile:!0})})]})}var lR=["select","hand","draw","eraser","text","zoom","laser"];function cR(e){var t=e.activeToolId,n=da(),r=DI(),i=ax(),o=la("is tool locked",(function(){return n.instanceState.isToolLocked}),[n]);return!t||lR.includes(t)?null:(0,Qo.jsx)(gx,{title:i("action.toggle-tool-lock"),className:ra("tlui-toolbar__lock-button",{"tlui-toolbar__lock-button__mobile":r<5}),icon:o?"lock":"unlock",onClick:function(){return n.updateInstanceState({isToolLocked:!o})},smallIcon:!0})}var dR=function(){var e=da(),n=ax(),r=DI(),i=t.useRef(void 0),o=$I(),a=function(){var e=t.useContext(oT);if(!e)throw new Error("useToolbarSchema must be used within a ToolbarSchemaProvider");return e}(),s=a.find((function(e){return"laser"===e.toolItem.id})),u=la("current tool id",(function(){return e.currentToolId}),[e]),l="hand"===u,c=la("geo",(function(){return e.sharedStyles.getAsKnownValue(fo)}),[e]),d=!o,f=!(o||l),h=function(e){return e.label?"".concat(n(e.label)," ").concat(e.kbd?hx(e.kbd):""):""},p=a.find((function(e){return pR(e.toolItem,u,c)})),v=t.useMemo((function(){for(var e,t=[],n=[],o=Math.min(8,5+r),s=4;s<a.length;s++){var u=a[s];s<o?t.push(u):(u===p&&(e=u),n.push(u))}return e||(i.current||(i.current=n[0]),e=i.current,n.includes(e)||(e=n[0])),i.current=e,n.length<=2&&(t.push.apply(t,n),n.length=0),{itemsInPanel:t,itemsInDropdown:n,dropdownFirstItem:e}}),[a,p,r]),g=v.itemsInPanel,m=v.itemsInDropdown,y=v.dropdownFirstItem;return(0,Qo.jsx)("div",{className:"tlui-toolbar",children:(0,Qo.jsxs)("div",{className:"tlui-toolbar__inner",children:[(0,Qo.jsxs)("div",{className:"tlui-toolbar__left",children:[!o&&(0,Qo.jsxs)("div",{className:ra("tlui-toolbar__extras",{"tlui-toolbar__extras__hidden":!f}),children:[r<6&&(0,Qo.jsxs)("div",{className:"tlui-toolbar__extras__controls",children:[(0,Qo.jsx)(XO,{}),(0,Qo.jsx)(HO,{}),(0,Qo.jsx)(YO,{}),(0,Qo.jsx)(zO,{}),(0,Qo.jsx)(NO,{})]}),(0,Qo.jsx)(cR,{activeToolId:u})]}),(0,Qo.jsxs)("div",{className:ra("tlui-toolbar__tools",{"tlui-toolbar__tools__mobile":r<5}),children:[a.slice(0,2).map((function(e){var t=e.toolItem;return(0,Qo.jsx)(hR,{item:t,title:h(t),isSelected:pR(t,u,c)},t.id)})),o&&s&&(0,Qo.jsx)(hR,{item:s.toolItem,title:h(s.toolItem),isSelected:pR(s.toolItem,u,c)},s.toolItem.id),d&&(0,Qo.jsxs)(Qo.Fragment,{children:[(0,Qo.jsx)("div",{className:"tlui-toolbar__divider"}),a.slice(2,4).map((function(e){var t=e.toolItem;return(0,Qo.jsx)(hR,{item:t,title:h(t),isSelected:pR(t,u,c)},t.id)})),(0,Qo.jsx)("div",{className:"tlui-toolbar__divider"}),g.map((function(e){var t=e.toolItem;return(0,Qo.jsx)(hR,{item:t,title:h(t),isSelected:pR(t,u,c)},t.id)})),m.length?(0,Qo.jsxs)(Qo.Fragment,{children:[(0,Qo.jsx)(hR,{item:y.toolItem,title:h(y.toolItem),isSelected:pR(y.toolItem,u,c)},y.toolItem.id),(0,Qo.jsxs)(cC,{id:"toolbar overflow",modal:!1,children:[(0,Qo.jsx)(dC,{children:(0,Qo.jsx)(gx,{className:"tlui-toolbar__tools__button tlui-toolbar__overflow",icon:"chevron-up","data-testid":"tools.more",title:n("tool-panel.more")})}),(0,Qo.jsx)(fC,{side:"top",align:"center",children:(0,Qo.jsx)(fR,{toolbarItems:m})})]})]}):null]})]})]}),r<5&&!o&&(0,Qo.jsx)("div",{className:"tlui-toolbar__tools",children:(0,Qo.jsx)(uR,{})})]})})},fR=ua((function(e){var t=e.toolbarItems,n=ax();return(0,Qo.jsx)("div",{className:"tlui-button-grid__four tlui-button-grid__reverse",children:t.map((function(e){var t,r=e.toolItem,i=r.id,o=r.meta,a=r.kbd,s=r.label,u=r.onSelect,l=r.icon;return(0,Qo.jsx)(mC,{className:"tlui-button-grid__button","data-testid":"tools.".concat(i),"data-tool":i,"data-geo":null!==(t=null===o||void 0===o?void 0:o.geo)&&void 0!==t?t:"","aria-label":s,onClick:function(){return u("toolbar")},title:s?"".concat(n(s)," ").concat(a?hx(a):""):"",icon:l},i)}))})}));function hR(e){var t,n,r=e.item,i=e.title,o=e.isSelected;return(0,Qo.jsx)(gx,{className:"tlui-toolbar__tools__button","data-testid":"tools.".concat(r.id),"data-tool":r.id,"data-geo":null!==(t=null===(n=r.meta)||void 0===n?void 0:n.geo)&&void 0!==t?t:"","aria-label":r.label,title:i,icon:r.icon,"data-state":o?"selected":void 0,onClick:function(){return r.onSelect("toolbar")},onTouchStart:function(e){Ms(e),r.onSelect("toolbar")}})}var pR=function(e,t,n){var r,i;return null!==(r=e.meta)&&void 0!==r&&r.geo?"geo"===t&&n===(null===(i=e.meta)||void 0===i?void 0:i.geo):t===e.id};var vR="undefined"!==typeof navigator&&navigator.userAgent.toLowerCase().indexOf("firefox")>0;function gR(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r):e.attachEvent&&e.attachEvent("on".concat(t),(function(){n(window.event)}))}function mR(e,t){for(var n=t.slice(0,t.length-1),r=0;r<n.length;r++)n[r]=e[n[r].toLowerCase()];return n}function yR(e){"string"!==typeof e&&(e="");for(var t=(e=e.replace(/\s/g,"")).split(","),n=t.lastIndexOf("");n>=0;)t[n-1]+=",",t.splice(n,1),n=t.lastIndexOf("");return t}for(var bR={backspace:8,"\u232b":8,tab:9,clear:12,enter:13,"\u21a9":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"\u21ea":20,",":188,".":190,"/":191,"`":192,"-":vR?173:189,"=":vR?61:187,";":vR?59:186,"'":222,"[":219,"]":221,"\\":220},wR={"\u21e7":16,shift:16,"\u2325":18,alt:18,option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91,cmd:91,command:91},xR={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},kR={16:!1,18:!1,17:!1,91:!1},SR={},_R=1;_R<20;_R++)bR["f".concat(_R)]=111+_R;var ER=[],CR=!1,PR="all",IR=[],TR=function(e){return bR[e.toLowerCase()]||wR[e.toLowerCase()]||e.toUpperCase().charCodeAt(0)};function MR(e){PR=e||"all"}function AR(){return PR||"all"}var OR=function(e){var t=e.key,n=e.scope,r=e.method,i=e.splitKey,o=void 0===i?"+":i;yR(t).forEach((function(e){var t=e.split(o),i=t.length,a=t[i-1],s="*"===a?"*":TR(a);if(SR[s]){n||(n=AR());var u=i>1?mR(wR,t):[];SR[s]=SR[s].filter((function(e){return!((!r||e.method===r)&&e.scope===n&&function(e,t){for(var n=e.length>=t.length?e:t,r=e.length>=t.length?t:e,i=!0,o=0;o<n.length;o++)-1===r.indexOf(n[o])&&(i=!1);return i}(e.mods,u))}))}}))};function jR(e,t,n,r){var i;if(t.element===r&&(t.scope===n||"all"===t.scope)){for(var o in i=t.mods.length>0,kR)Object.prototype.hasOwnProperty.call(kR,o)&&(!kR[o]&&t.mods.indexOf(+o)>-1||kR[o]&&-1===t.mods.indexOf(+o))&&(i=!1);(0!==t.mods.length||kR[16]||kR[18]||kR[17]||kR[91])&&!i&&"*"!==t.shortcut||(t.keys=[],t.keys=t.keys.concat(ER),!1===t.method(e,t)&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0)))}}function RR(e,t){var n=SR["*"],r=e.keyCode||e.which||e.charCode;if(LR.filter.call(this,e)){if(93!==r&&224!==r||(r=91),-1===ER.indexOf(r)&&229!==r&&ER.push(r),["ctrlKey","altKey","shiftKey","metaKey"].forEach((function(t){var n=xR[t];e[t]&&-1===ER.indexOf(n)?ER.push(n):!e[t]&&ER.indexOf(n)>-1?ER.splice(ER.indexOf(n),1):"metaKey"===t&&e[t]&&3===ER.length&&(e.ctrlKey||e.shiftKey||e.altKey||(ER=ER.slice(ER.indexOf(n))))})),r in kR){for(var i in kR[r]=!0,wR)wR[i]===r&&(LR[i]=!0);if(!n)return}for(var o in kR)Object.prototype.hasOwnProperty.call(kR,o)&&(kR[o]=e[xR[o]]);e.getModifierState&&(!e.altKey||e.ctrlKey)&&e.getModifierState("AltGraph")&&(-1===ER.indexOf(17)&&ER.push(17),-1===ER.indexOf(18)&&ER.push(18),kR[17]=!0,kR[18]=!0);var a=AR();if(n)for(var s=0;s<n.length;s++)n[s].scope===a&&("keydown"===e.type&&n[s].keydown||"keyup"===e.type&&n[s].keyup)&&jR(e,n[s],a,t);if(r in SR)for(var u=0;u<SR[r].length;u++)if(("keydown"===e.type&&SR[r][u].keydown||"keyup"===e.type&&SR[r][u].keyup)&&SR[r][u].key){for(var l=SR[r][u],c=l.splitKey,d=l.key.split(c),f=[],h=0;h<d.length;h++)f.push(TR(d[h]));f.sort().join("")===ER.sort().join("")&&jR(e,l,a,t)}}}function LR(e,t,n){ER=[];var r=yR(e),i=[],o="all",a=document,s=0,u=!1,l=!0,c="+",d=!1;for(void 0===n&&"function"===typeof t&&(n=t),"[object Object]"===Object.prototype.toString.call(t)&&(t.scope&&(o=t.scope),t.element&&(a=t.element),t.keyup&&(u=t.keyup),void 0!==t.keydown&&(l=t.keydown),void 0!==t.capture&&(d=t.capture),"string"===typeof t.splitKey&&(c=t.splitKey)),"string"===typeof t&&(o=t);s<r.length;s++)i=[],(e=r[s].split(c)).length>1&&(i=mR(wR,e)),(e="*"===(e=e[e.length-1])?"*":TR(e))in SR||(SR[e]=[]),SR[e].push({keyup:u,keydown:l,scope:o,mods:i,shortcut:r[s],method:n,key:r[s],splitKey:c,element:a});"undefined"!==typeof a&&!function(e){return IR.indexOf(e)>-1}(a)&&window&&(IR.push(a),gR(a,"keydown",(function(e){RR(e,a)}),d),CR||(CR=!0,gR(window,"focus",(function(){ER=[]}),d)),gR(a,"keyup",(function(e){RR(e,a),function(e){var t=e.keyCode||e.which||e.charCode,n=ER.indexOf(t);if(n>=0&&ER.splice(n,1),e.key&&"meta"===e.key.toLowerCase()&&ER.splice(0,ER.length),93!==t&&224!==t||(t=91),t in kR)for(var r in kR[t]=!1,wR)wR[r]===t&&(LR[r]=!1)}(e)}),d))}var DR={getPressedKeyString:function(){return ER.map((function(e){return function(e){return Object.keys(bR).find((function(t){return bR[t]===e}))}(e)||function(e){return Object.keys(wR).find((function(t){return wR[t]===e}))}(e)||String.fromCharCode(e)}))},setScope:MR,getScope:AR,deleteScope:function(e,t){var n,r;for(var i in e||(e=AR()),SR)if(Object.prototype.hasOwnProperty.call(SR,i))for(n=SR[i],r=0;r<n.length;)n[r].scope===e?n.splice(r,1):r++;AR()===e&&MR(t||"all")},getPressedKeyCodes:function(){return ER.slice(0)},getAllKeyCodes:function(){var e=[];return Object.keys(SR).forEach((function(t){SR[t].forEach((function(t){var n=t.key,r=t.scope,i=t.mods,o=t.shortcut;e.push({scope:r,shortcut:o,mods:i,keys:n.split("+").map((function(e){return TR(e)}))})}))})),e},isPressed:function(e){return"string"===typeof e&&(e=TR(e)),-1!==ER.indexOf(e)},filter:function(e){var t=e.target||e.srcElement,n=t.tagName,r=!0;return!t.isContentEditable&&("INPUT"!==n&&"TEXTAREA"!==n&&"SELECT"!==n||t.readOnly)||(r=!1),r},trigger:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";Object.keys(SR).forEach((function(n){SR[n].filter((function(n){return n.scope===t&&n.shortcut===e})).forEach((function(e){e&&e.method&&e.method()}))}))},unbind:function(e){if("undefined"===typeof e)Object.keys(SR).forEach((function(e){return delete SR[e]}));else if(Array.isArray(e))e.forEach((function(e){e.key&&OR(e)}));else if("object"===typeof e)e.key&&OR(e);else if("string"===typeof e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n[0],o=n[1];"function"===typeof i&&(o=i,i=""),OR({key:e,scope:i,method:o,splitKey:"+"})}},keyMap:bR,modifier:wR,modifierMap:xR};for(var NR in DR)Object.prototype.hasOwnProperty.call(DR,NR)&&(LR[NR]=DR[NR]);if("undefined"!==typeof window){var zR=window.hotkeys;LR.noConflict=function(e){return e&&window.hotkeys===LR&&(window.hotkeys=zR),LR},window.hotkeys=LR}var BR=["copy","cut","paste","asset"];function FR(e){return function(e){"string"!==typeof e&&(e="");for(var t=(e=e.replace(/\s/g,"")).split(","),n=t.lastIndexOf("");n>=0;)t[n-1]+=",",t.splice(n,1),n=t.lastIndexOf("");return t}(e).map((function(e){var t=e.split("");return 1===t.length?t[0]:"!"===t[0]?"shift+".concat(t[1]):"?"===t[0]?"alt+".concat(t[1]):"$"===t[0]?"!"===t[1]?"cmd+shift+".concat(t[2],",ctrl+shift+").concat(t[2]):"?"===t[1]?"cmd+\u2325+".concat(t[2],",ctrl+alt+").concat(t[2]):"cmd+".concat(t[1],",ctrl+").concat(t[1]):e})).join(",")}var UR=["shareZone","topZone","renderDebugMenuItems","children","hideUi"],KR=["children","hideUi"],VR=t.memo((function(e){var t=e.shareZone,n=e.topZone,r=e.renderDebugMenuItems,i=e.children,o=e.hideUi,a=Jt(e,UR);return(0,Qo.jsx)(cT,R(R({},a),{},{children:(0,Qo.jsx)(WR,{hideUi:o,shareZone:t,topZone:n,renderDebugMenuItems:r,children:i})}))})),WR=t.memo((function(e){var t=e.children,n=e.hideUi,r=Jt(e,KR);return(0,Qo.jsxs)(Qo.Fragment,{children:[t,n?null:(0,Qo.jsx)(HR,R({},r))]})})),HR=t.memo((function(e){var n=e.shareZone,r=e.topZone,i=e.renderDebugMenuItems,o=da(),a=ax(),s=DI(),u=la("isReadOnlyMode",(function(){return o.isReadOnly}),[o]),l=la("focus",(function(){return o.instanceState.isFocusMode}),[o]),c=la("debug",(function(){return o.instanceState.isDebugMode}),[o]);!function(){var e=da(),n=YP(),r=$I(),i=kI(),o=YI();(0,t.useEffect)((function(){if(n){for(var t=e.getContainer(),a=function(n,r){LR(n,{element:t,scope:e.store.id},r)},s=function(){return e.isMenuOpen||null!==e.editingId||e.crashingError},u=function(){var e=c[l];return e.kbd?r&&!e.readonlyOk||BR.includes(e.id)?0:void a(FR(e.kbd),(function(t){s()||(Ms(t),e.onSelect("kbd"))})):0},l=0,c=Object.values(i);l<c.length;l++)u();for(var d=function(){var t=h[f];return!t.kbd||!t.readonlyOk&&e.isReadOnly||BR.includes(t.id)?0:void a(FR(t.kbd),(function(e){s()||(Ms(e),t.onSelect("kbd"))}))},f=0,h=Object.values(o);f<h.length;f++)d();return LR.setScope(e.store.id),function(){LR.deleteScope(e.store.id)}}}),[i,o,r,e,n])}(),function(){var e=da(),n=oC(),r=YP();(0,t.useEffect)((function(){if(r){var t=function(){0===e.selectedIds.length||null!==e.editingId||qP(e)||(iI(e),n("copy",{source:"kbd"}))},i=!1,o=function(e){1===e.button&&(i=!0,requestAnimationFrame((function(){i=!1})))},a=function(t){i?t.stopPropagation():null!==e.editingId||qP(e)||(t.clipboardData&&!e.inputs.shiftKey?eI(e,t.clipboardData):navigator.clipboard.read().then((function(t){Array.isArray(t)&&t[0]instanceof ClipboardItem&&tI(e,t,e.inputs.currentPagePoint)})),n("paste",{source:"kbd"}))};return document.addEventListener("copy",t),document.addEventListener("cut",s),document.addEventListener("paste",a),document.addEventListener("pointerup",o),function(){document.removeEventListener("copy",t),document.removeEventListener("cut",s),document.removeEventListener("paste",a),document.removeEventListener("pointerup",o)}}function s(){0===e.selectedIds.length||null!==e.editingId||qP(e)||(iI(e),e.deleteShapes(),n("cut",{source:"kbd"}))}}),[e,n,r])}(),function(){var e=da(),n=sI().addToast;(0,t.useEffect)((function(){function t(e){var t=e.name,r=e.count;n({title:"Maximum Shapes Reached",description:"You've reached the maximum number of shapes allowed on ".concat(t," (").concat(r,"). Please delete some shapes or move to a different page to continue.")})}return e.addListener("max-shapes",t),function(){e.removeListener("max-shapes",t)}}),[e,n])}();var d=kI()["toggle-focus-mode"];return(0,Qo.jsx)(FC,{children:(0,Qo.jsxs)("main",{"data-tldraw-area":"active-drawing",className:ra("tlui-layout",{"tlui-layout__mobile":s<5}),children:[l?(0,Qo.jsx)("div",{className:"tlui-layout__top",children:(0,Qo.jsx)(gx,{className:"tlui-focus-button",title:"".concat(a("focus-mode.toggle-focus-mode")),icon:"dot",onClick:function(){return d.onSelect("menu")}})}):(0,Qo.jsxs)(Qo.Fragment,{children:[(0,Qo.jsxs)("div",{className:"tlui-layout__top",children:[(0,Qo.jsxs)("div",{className:"tlui-layout__top__left",children:[(0,Qo.jsx)(qO,{}),(0,Qo.jsxs)("div",{className:"tlui-helper-buttons",children:[(0,Qo.jsx)(ej,{}),(0,Qo.jsx)(fT,{}),(0,Qo.jsx)(tj,{})]})]}),(0,Qo.jsx)("div",{className:"tlui-layout__top__center",children:r}),(0,Qo.jsxs)("div",{className:"tlui-layout__top__right",children:[n,s>=5&&!u&&(0,Qo.jsx)("div",{className:"tlui-style-panel__wrapper",children:(0,Qo.jsx)(Qj,{})})]})]}),(0,Qo.jsxs)("div",{className:"tlui-layout__bottom",children:[(0,Qo.jsxs)("div",{className:"tlui-layout__bottom__main",children:[(0,Qo.jsx)(ZO,{}),(0,Qo.jsx)(dR,{}),s>=4&&(0,Qo.jsx)(PT,{})]}),c&&(0,Qo.jsx)(pT,{renderDebugMenuItems:null!==i&&void 0!==i?i:null})]})]}),(0,Qo.jsx)(aR,{}),(0,Qo.jsx)(ST,{}),(0,Qo.jsx)(sR,{}),(0,Qo.jsx)(_T,{})]})})})),YR=["__scopeContextMenu","disabled"],XR=["__scopeContextMenu"],qR=["__scopeContextMenu"],$R=["__scopeContextMenu"],GR=["__scopeContextMenu"],QR=["__scopeContextMenu"],JR=["__scopeContextMenu"],ZR=["__scopeContextMenu"],eL="ContextMenu",tL=L(Cy(eL,[c_]),2),nL=tL[0],rL=(tL[1],c_()),iL=L(nL(eL),2),oL=iL[0],aL=iL[1],sL=function(e){var n=e.__scopeContextMenu,r=e.children,i=e.onOpenChange,o=e.dir,a=e.modal,s=void 0===a||a,u=L((0,t.useState)(!1),2),l=u[0],c=u[1],d=rL(n),f=Oy(i),h=(0,t.useCallback)((function(e){c(e),f(e)}),[f]);return(0,t.createElement)(oL,{scope:n,open:l,onOpenChange:h,modal:s},(0,t.createElement)(aE,wy({},d,{dir:o,open:l,onOpenChange:h,modal:s}),r))},uL="ContextMenuTrigger",lL=(0,t.forwardRef)((function(e,n){var r=e.__scopeContextMenu,i=e.disabled,o=void 0!==i&&i,a=Jt(e,YR),s=aL(uL,r),u=rL(r),l=(0,t.useRef)({x:0,y:0}),c=(0,t.useRef)({getBoundingClientRect:function(){return DOMRect.fromRect(R({width:0,height:0},l.current))}}),d=(0,t.useRef)(0),f=(0,t.useCallback)((function(){return window.clearTimeout(d.current)}),[]),h=function(e){l.current={x:e.clientX,y:e.clientY},s.onOpenChange(!0)};return(0,t.useEffect)((function(){return f}),[f]),(0,t.useEffect)((function(){o&&f()}),[o,f]),(0,t.createElement)(t.Fragment,null,(0,t.createElement)(sE,wy({},u,{virtualRef:c})),(0,t.createElement)(Ky.span,wy({"data-state":s.open?"open":"closed","data-disabled":o?"":void 0},a,{ref:n,style:R({WebkitTouchCallout:"none"},e.style),onContextMenu:o?e.onContextMenu:xy(e.onContextMenu,(function(e){f(),h(e),e.preventDefault()})),onPointerDown:o?e.onPointerDown:xy(e.onPointerDown,bL((function(e){f(),d.current=window.setTimeout((function(){return h(e)}),700)}))),onPointerMove:o?e.onPointerMove:xy(e.onPointerMove,bL(f)),onPointerCancel:o?e.onPointerCancel:xy(e.onPointerCancel,bL(f)),onPointerUp:o?e.onPointerUp:xy(e.onPointerUp,bL(f))})))})),cL=function(e){var n=e.__scopeContextMenu,r=Jt(e,XR),i=rL(n);return(0,t.createElement)(uE,wy({},i,r))},dL="ContextMenuContent",fL=(0,t.forwardRef)((function(e,n){var r=e.__scopeContextMenu,i=Jt(e,qR),o=aL(dL,r),a=rL(r),s=(0,t.useRef)(!1);return(0,t.createElement)(lE,wy({},a,i,{ref:n,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:function(t){var n;null===(n=e.onCloseAutoFocus)||void 0===n||n.call(e,t),!t.defaultPrevented&&s.current&&t.preventDefault(),s.current=!1},onInteractOutside:function(t){var n;null===(n=e.onInteractOutside)||void 0===n||n.call(e,t),t.defaultPrevented||o.modal||(s.current=!0)},style:R(R({},e.style),{},{"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"})}))})),hL=(0,t.forwardRef)((function(e,n){var r=e.__scopeContextMenu,i=Jt(e,$R),o=rL(r);return(0,t.createElement)(cE,wy({},o,i,{ref:n}))})),pL=(0,t.forwardRef)((function(e,n){var r=e.__scopeContextMenu,i=Jt(e,GR),o=rL(r);return(0,t.createElement)(dE,wy({},o,i,{ref:n}))})),vL=(0,t.forwardRef)((function(e,n){var r=e.__scopeContextMenu,i=Jt(e,QR),o=rL(r);return(0,t.createElement)(fE,wy({},o,i,{ref:n}))})),gL=function(e){var n=e.__scopeContextMenu,r=e.children,i=e.onOpenChange,o=e.open,a=e.defaultOpen,s=rL(n),u=L(jy({prop:o,defaultProp:a,onChange:i}),2),l=u[0],c=u[1];return(0,t.createElement)(pE,wy({},s,{open:l,onOpenChange:c}),r)},mL=(0,t.forwardRef)((function(e,n){var r=e.__scopeContextMenu,i=Jt(e,JR),o=rL(r);return(0,t.createElement)(vE,wy({},o,i,{ref:n}))})),yL=(0,t.forwardRef)((function(e,n){var r=e.__scopeContextMenu,i=Jt(e,ZR),o=rL(r);return(0,t.createElement)(gE,wy({},o,i,{ref:n,style:R(R({},e.style),{},{"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"})}))}));function bL(e){return function(t){return"mouse"!==t.pointerType?e(t):void 0}}var wL=sL,xL=lL,kL=cL,SL=fL,_L=hL,EL=pL,CL=vL,PL=gL,IL=mL,TL=yL,ML=ua((function(){var e=da(),t=Hs(),n=e.pages,r=e.currentPageId,i=ax(),o=sI().addToast;return(0,Qo.jsxs)(PL,{children:[(0,Qo.jsx)(IL,{dir:"ltr",asChild:!0,children:(0,Qo.jsx)(gx,{className:"tlui-menu__button",label:"context-menu.move-to-page","data-testid":"menu-item.move-to-page",icon:"chevron-right"})}),(0,Qo.jsx)(kL,{container:t,dir:"ltr",children:(0,Qo.jsxs)(TL,{className:"tlui-menu",sideOffset:-4,collisionPadding:4,children:[(0,Qo.jsx)(_L,{dir:"ltr",className:"tlui-menu__group","data-testid":"menu-item.pages",children:n.map((function(t){return(0,Qo.jsx)(EL,{disabled:r===t.id,onSelect:function(){e.mark("move_shapes_to_page"),e.moveShapesToPage(e.selectedIds,t.id);var n=e.getPageById(t.id);n&&o({title:"Changed Page",description:"Moved to ".concat(n.name,"."),actions:[{label:"Go Back",type:"primary",onClick:function(){e.mark("change-page"),e.setCurrentPageId(r)}}]})},asChild:!0,children:(0,Qo.jsx)(gx,{title:t.name,className:"tlui-menu__button tlui-context-menu__move-to-page__name",children:(0,Qo.jsx)("span",{children:t.name})})},t.id)}))},"pages"),(0,Qo.jsx)(_L,{dir:"ltr",className:"tlui-menu__group","data-testid":"menu-item.new-page",children:(0,Qo.jsx)(EL,{onSelect:function(){e.mark("move_shapes_to_page");var t=yn.createId(),n=e.selectedIds,r=e.currentPageId;e.batch((function(){e.createPage("Page 1",t),e.setCurrentPageId(r),e.moveShapesToPage(n,t)}))},asChild:!0,children:(0,Qo.jsx)(gx,{title:i("context.pages.new-page"),className:"tlui-menu__button tlui-context-menu__move-to-page__name",children:i("context.pages.new-page")})},"new-page")},"new-page")]})})]})})),AL=function(e){var n=e.children,r=da(),i=VI(),o=(0,t.useCallback)((function(e){if(e){if(r.isCoarsePointer){var t=r.selectedShapes,n=r.inputs.currentPagePoint,i=r.getShapesAtPoint(n);if(!r.selectedShapes.length||!i.some((function(e){return t.includes(e)}))){var o=i.filter((function(e){return r.isShapeOrAncestorLocked(e)}));o.length&&r.select.apply(r,u(o.map((function(e){return e.id}))))}}}else{var a=r.onlySelectedShape;a&&r.isShapeOrAncestorLocked(a)&&r.setSelectedIds([])}}),[r]),a=L(aC("context menu",o),2),s=(a[0],a[1]),l=$I(),c=0===i.length||l&&i.every((function(e){return!e.readonlyOk})),d=!la("isSelectToolActive",(function(){return"select"===r.currentToolId}),[r])||c;return(0,Qo.jsxs)(wL,{dir:"ltr",onOpenChange:s,children:[(0,Qo.jsx)(xL,{onContextMenu:d?Ms:void 0,dir:"ltr",disabled:d,children:n}),(0,Qo.jsx)(OL,{})]})};function OL(){var e=da(),n=ax(),r=VI(),i=L(aC("context menu sub"),2),o=(i[0],i[1]),a=$I(),s=DI(),u=Hs(),l=L((0,t.useState)(!1),2),c=l[0],d=l[1];function f(e,t,r,i){if(a&&!t.readonlyOk)return null;switch(t.type){case"custom":if("MOVE_TO_PAGE_MENU"===t.id)return(0,Qo.jsx)(ML,{},t.id);break;case"group":return(0,Qo.jsx)(_L,{dir:"ltr",className:ra("tlui-menu__group",{"tlui-menu__group__small":"submenu"===(null===r||void 0===r?void 0:r.type)}),"data-testid":"menu-item.".concat(t.id),children:t.children.map((function(n){return f(e,n,t,i+1)}))},t.id);case"submenu":return(0,Qo.jsxs)(PL,{onOpenChange:o,children:[(0,Qo.jsx)(IL,{dir:"ltr",disabled:t.disabled,asChild:!0,children:(0,Qo.jsx)(gx,{className:"tlui-menu__button",label:t.label,"data-testid":"menu-item.".concat(t.id),icon:"chevron-right"})}),(0,Qo.jsx)(kL,{container:u,dir:"ltr",children:(0,Qo.jsx)(TL,{className:"tlui-menu",sideOffset:-4,collisionPadding:4,children:t.children.map((function(n){return f(e,n,t,i+1)}))})})]},t.id);case"item":if(a&&!t.readonlyOk)return null;var l=t.actionItem,h=l.id,p=l.checkbox,v=l.contextMenuLabel,g=l.label,m=l.onSelect,y=l.kbd,b=l.icon,w=null!==v&&void 0!==v?v:g,x=w?n(w):void 0;return p?(0,Qo.jsxs)(CL,{className:"tlui-button tlui-menu__button tlui-menu__checkbox-item",dir:"ltr",disabled:t.disabled,onSelect:function(e){m("context-menu"),Ms(e)},title:x||void 0,checked:t.checked,children:[(0,Qo.jsx)("div",{className:"tlui-menu__checkbox-item__check",style:{transformOrigin:"75% center",transform:"scale(".concat(t.checked?1:.5,")"),opacity:t.checked?1:.5},children:(0,Qo.jsx)(lx,{small:!0,icon:t.checked?"check":"checkbox-empty"})}),x&&(0,Qo.jsx)("span",{children:x}),y&&(0,Qo.jsx)(px,{children:y})]},h):(0,Qo.jsx)(EL,{dir:"ltr",asChild:!0,children:(0,Qo.jsx)(gx,{className:"tlui-menu__button","data-testid":"menu-item.".concat(h),kbd:y,label:w,disabled:t.disabled,iconLeft:s<3&&i>2?b:void 0,onClick:function(){c?d(!1):m("context-menu")}})},h)}}return(0,Qo.jsx)(kL,{dir:"ltr",container:u,children:(0,Qo.jsx)(SL,{className:"tlui-menu scrollable",alignOffset:-4,collisionPadding:4,onContextMenu:Ms,children:r.map((function(t){return f(e,t,null,0)}))})})}var jL=["children"];function RL(e){var n=e.children,r=Jt(e,jL),i=R(R({},r),{},{shapes:(0,t.useMemo)((function(){var e;return[].concat(u(Sp),u(null!==(e=r.shapes)&&void 0!==e?e:[]))}),[r.shapes]),tools:(0,t.useMemo)((function(){var e;return[].concat(u(Wm),u(null!==(e=r.tools)&&void 0!==e?e:[]))}),[r.tools])});return(0,Qo.jsx)(Em,R(R({},i),{},{children:(0,Qo.jsxs)(VR,R(R({},i),{},{children:[(0,Qo.jsx)(AL,{children:(0,Qo.jsx)(Zc,{})}),n]}))}))}var LL=function(){return new Map},DL=function(e){var t=LL();return e.forEach((function(e,n){t.set(n,e)})),t},NL=function(e,t,n){var r=e.get(t);return void 0===r&&e.set(t,r=n()),r},zL=function(){return new Set},BL=String.fromCharCode,FL=(String.fromCodePoint,BL(65535),/^\s*/g),UL=/([A-Z])/g,KL=function(e,t){return function(e){return e.replace(FL,"")}(e.replace(UL,(function(e){return"".concat(t).concat(function(e){return e.toLowerCase()}(e))})))},VL="undefined"!==typeof TextEncoder?new TextEncoder:null,WL=VL?function(e){return VL.encode(e)}:function(e){for(var t=unescape(encodeURIComponent(e)),n=t.length,r=new Uint8Array(n),i=0;i<n;i++)r[i]=t.codePointAt(i);return r},HL="undefined"===typeof TextDecoder?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});HL&&1===HL.decode(new Uint8Array).length&&(HL=null);var YL=function(e){return void 0===e?null:e},XL=new(function(){function e(){z(this,e),this.map=new Map}return N(e,[{key:"setItem",value:function(e,t){this.map.set(e,t)}},{key:"getItem",value:function(e){return this.map.get(e)}}]),e}()),qL=!0;try{"undefined"!==typeof localStorage&&(XL=localStorage,qL=!1)}catch(kM){}var $L,GL,QL,JL=XL,ZL=function(e){return e[e.length-1]},eD=function(e,t){for(var n=0;n<t.length;n++)e.push(t[n])},tD=Array.from,nD=Array.isArray,rD=(Object.assign,Object.keys),iD=function(e){return rD(e).length},oD=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},aD=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;try{for(;r<t.length;r++)t[r].apply(t,u(n))}finally{r<t.length&&e(t,n,r+1)}},sD=function e(t,n){if(null==t||null==n)return function(e,t){return e===t}(t,n);if(t.constructor!==n.constructor)return!1;if(t===n)return!0;switch(t.constructor){case ArrayBuffer:t=new Uint8Array(t),n=new Uint8Array(n);case Uint8Array:if(t.byteLength!==n.byteLength)return!1;for(var r=0;r<t.length;r++)if(t[r]!==n[r])return!1;break;case Set:if(t.size!==n.size)return!1;var i,o=X(t);try{for(o.s();!(i=o.n()).done;){var a=i.value;if(!n.has(a))return!1}}catch(YK){o.e(YK)}finally{o.f()}break;case Map:if(t.size!==n.size)return!1;var s,u=X(t.keys());try{for(u.s();!(s=u.n()).done;){var l=s.value;if(!n.has(l)||!e(t.get(l),n.get(l)))return!1}}catch(YK){u.e(YK)}finally{u.f()}break;case Object:if(iD(t)!==iD(n))return!1;for(var c in t)if(!oD(t,c)||!e(t[c],n[c]))return!1;break;case Array:if(t.length!==n.length)return!1;for(var d=0;d<t.length;d++)if(!e(t[d],n[d]))return!1;break;default:return!1}return!0},uD="undefined"!==typeof process&&process.release&&/node|io\.js/.test(process.release.name),lD="undefined"!==typeof window&&"undefined"!==typeof document&&!uD,cD=("undefined"!==typeof navigator&&/Mac/.test(navigator.platform),[]),dD=function(){if(void 0===$L)if(uD){$L=LL();for(var e=process.argv,t=null,n=0;n<e.length;n++){var r=e[n];"-"===r[0]?(null!==t&&$L.set(t,""),t=r):null!==t?($L.set(t,r),t=null):cD.push(r)}null!==t&&$L.set(t,"")}else"object"===typeof location?($L=LL(),(location.search||"?").slice(1).split("&").forEach((function(e){if(0!==e.length){var t=L(e.split("="),2),n=t[0],r=t[1];$L.set("--".concat(KL(n,"-")),r),$L.set("-".concat(KL(n,"-")),r)}}))):$L=LL();return $L},fD=function(e){return dD().has(e)},hD=function(e){return YL(uD?{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}[e.toUpperCase()]:JL.getItem(e))},pD=(GL="production",fD("--"+GL)||hD(GL),uD&&function(e,t){return t.includes(e)}({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FORCE_COLOR,["true","1","2"])),vD=!fD("no-colors")&&(!uD||process.stdout.isTTY||pD)&&(!uD||fD("color")||pD||null!==hD("COLORTERM")||(hD("TERM")||"").includes("color")),gD=function(e){return new Uint8Array(e)},mD=function(e,t,n){return new Uint8Array(e,t,n)},yD=lD?function(e){for(var t="",n=0;n<e.byteLength;n++)t+=BL(e[n]);return btoa(t)}:function(e){return Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("base64")},bD=lD?function(e){for(var t=atob(e),n=gD(t.length),r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}:function(e){var t=Buffer.from(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)},wD=new Map,xD=function(){function e(t){var n=this;z(this,e),this.room=t,this.onmessage=null,this._onChange=function(e){return e.key===t&&null!==n.onmessage&&n.onmessage({data:bD(e.newValue||"")})},function(e){qL||addEventListener("storage",e)}(this._onChange)}return N(e,[{key:"postMessage",value:function(e){JL.setItem(this.room,yD(function(e){return new Uint8Array(e)}(e)))}},{key:"close",value:function(){!function(e){qL||removeEventListener("storage",e)}(this._onChange)}}]),e}(),kD="undefined"===typeof BroadcastChannel?xD:BroadcastChannel,SD=function(e){return NL(wD,e,(function(){var t=zL(),n=new kD(e);return n.onmessage=function(e){return t.forEach((function(t){return t(e.data,"broadcastchannel")}))},{bc:n,subs:t}}))},_D=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=SD(e);r.bc.postMessage(t),r.subs.forEach((function(e){return e(t,n)}))},ED=Date.now,CD=Math.floor,PD=(Math.ceil,Math.abs),ID=(Math.imul,Math.round,Math.log10,Math.log2,Math.log,Math.sqrt,function(e,t){return e<t?e:t}),TD=function(e,t){return e>t?e:t},MD=(Number.isNaN,Math.pow),AD=(Math.sign,function(e){return 0!==e?e<0:1/e<0}),OD=64,jD=128,RD=127,LD=2147483647,DD=Number.MAX_SAFE_INTEGER,ND=(Number.MIN_SAFE_INTEGER,Number.isInteger||function(e){return"number"===typeof e&&isFinite(e)&&CD(e)===e}),zD=(Number.isNaN,Number.parseInt,N((function e(){z(this,e),this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}))),BD=function(){return new zD},FD=function(e){for(var t=e.cpos,n=0;n<e.bufs.length;n++)t+=e.bufs[n].length;return t},UD=function(e){for(var t=new Uint8Array(FD(e)),n=0,r=0;r<e.bufs.length;r++){var i=e.bufs[r];t.set(i,n),n+=i.length}return t.set(mD(e.cbuf.buffer,0,e.cpos),n),t},KD=function(e,t){var n=e.cbuf.length;e.cpos===n&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(2*n),e.cpos=0),e.cbuf[e.cpos++]=t},VD=KD,WD=function(e,t){for(;t>RD;)KD(e,jD|RD&t),t=CD(t/128);KD(e,RD&t)},HD=function(e,t){var n=AD(t);for(n&&(t=-t),KD(e,(t>63?jD:0)|(n?OD:0)|63&t),t=CD(t/64);t>0;)KD(e,(t>RD?jD:0)|RD&t),t=CD(t/128)},YD=new Uint8Array(3e4),XD=YD.length/3,qD=VL&&VL.encodeInto?function(e,t){if(t.length<XD){var n=VL.encodeInto(t,YD).written||0;WD(e,n);for(var r=0;r<n;r++)KD(e,YD[r])}else GD(e,WL(t))}:function(e,t){var n=unescape(encodeURIComponent(t)),r=n.length;WD(e,r);for(var i=0;i<r;i++)KD(e,n.codePointAt(i))},$D=function(e,t){var n=e.cbuf.length,r=e.cpos,i=ID(n-r,t.length),o=t.length-i;e.cbuf.set(t.subarray(0,i),r),e.cpos+=i,o>0&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(TD(2*n,o)),e.cbuf.set(t.subarray(i)),e.cpos=o)},GD=function(e,t){WD(e,t.byteLength),$D(e,t)},QD=function(e,t){!function(e,t){var n=e.cbuf.length;n-e.cpos<t&&(e.bufs.push(mD(e.cbuf.buffer,0,e.cpos)),e.cbuf=new Uint8Array(2*TD(n,t)),e.cpos=0)}(e,t);var n=new DataView(e.cbuf.buffer,e.cpos,t);return e.cpos+=t,n},JD=new DataView(new ArrayBuffer(4)),ZD=function e(t,n){switch(typeof n){case"string":KD(t,119),qD(t,n);break;case"number":ND(n)&&PD(n)<=LD?(KD(t,125),HD(t,n)):(s=n,JD.setFloat32(0,s),JD.getFloat32(0)===s?(KD(t,124),function(e,t){QD(e,4).setFloat32(0,t,!1)}(t,n)):(KD(t,123),function(e,t){QD(e,8).setFloat64(0,t,!1)}(t,n)));break;case"bigint":KD(t,122),function(e,t){QD(e,8).setBigInt64(0,t,!1)}(t,n);break;case"object":if(null===n)KD(t,126);else if(nD(n)){KD(t,117),WD(t,n.length);for(var r=0;r<n.length;r++)e(t,n[r])}else if(n instanceof Uint8Array)KD(t,116),GD(t,n);else{KD(t,118);var i=Object.keys(n);WD(t,i.length);for(var o=0;o<i.length;o++){var a=i[o];qD(t,a),e(t,n[a])}}break;case"boolean":KD(t,n?120:121);break;default:KD(t,127)}var s},eN=function(e){U(n,e);var t=W(n);function n(e){var r;return z(this,n),(r=t.call(this)).w=e,r.s=null,r.count=0,r}return N(n,[{key:"write",value:function(e){this.s===e?this.count++:(this.count>0&&WD(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}]),n}(zD),tN=function(e){e.count>0&&(HD(e.encoder,1===e.count?e.s:-e.s),e.count>1&&WD(e.encoder,e.count-2))},nN=function(){function e(){z(this,e),this.encoder=new zD,this.s=0,this.count=0}return N(e,[{key:"write",value:function(e){this.s===e?this.count++:(tN(this),this.count=1,this.s=e)}},{key:"toUint8Array",value:function(){return tN(this),UD(this.encoder)}}]),e}(),rN=function(e){if(e.count>0){var t=2*e.diff+(1===e.count?0:1);HD(e.encoder,t),e.count>1&&WD(e.encoder,e.count-2)}},iN=function(){function e(){z(this,e),this.encoder=new zD,this.s=0,this.count=0,this.diff=0}return N(e,[{key:"write",value:function(e){this.diff===e-this.s?(this.s=e,this.count++):(rN(this),this.count=1,this.diff=e-this.s,this.s=e)}},{key:"toUint8Array",value:function(){return rN(this),UD(this.encoder)}}]),e}(),oN=function(){function e(){z(this,e),this.sarr=[],this.s="",this.lensE=new nN}return N(e,[{key:"write",value:function(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}},{key:"toUint8Array",value:function(){var e=new zD;return this.sarr.push(this.s),this.s="",qD(e,this.sarr.join("")),$D(e,this.lensE.toUint8Array()),UD(e)}}]),e}(),aN=function(e){return new Error(e)},sN=function(){throw aN("Method unimplemented")},uN=function(){throw aN("Unexpected case")},lN=aN("Unexpected end of array"),cN=aN("Integer out of Range"),dN=N((function e(t){z(this,e),this.arr=t,this.pos=0})),fN=function(e){return new dN(e)},hN=function(e){return e.pos!==e.arr.length},pN=function(e,t){var n=mD(e.arr.buffer,e.pos+e.arr.byteOffset,t);return e.pos+=t,n},vN=function(e){return pN(e,mN(e))},gN=function(e){return e.arr[e.pos++]},mN=function(e){for(var t=0,n=1,r=e.arr.length;e.pos<r;){var i=e.arr[e.pos++];if(t+=(i&RD)*n,n*=128,i<jD)return t;if(t>DD)throw cN}throw lN},yN=function(e){var t=e.arr[e.pos++],n=63&t,r=64,i=(t&OD)>0?-1:1;if(0===(t&jD))return i*n;for(var o=e.arr.length;e.pos<o;){if(n+=((t=e.arr[e.pos++])&RD)*r,r*=128,t<jD)return i*n;if(n>DD)throw cN}throw lN},bN=HL?function(e){return HL.decode(vN(e))}:function(e){var t=mN(e);if(0===t)return"";var n=String.fromCodePoint(gN(e));if(--t<100)for(;t--;)n+=String.fromCodePoint(gN(e));else for(;t>0;){var r=t<1e4?t:1e4,i=e.arr.subarray(e.pos,e.pos+r);e.pos+=r,n+=String.fromCodePoint.apply(null,i),t-=r}return decodeURIComponent(escape(n))},wN=function(e,t){var n=new DataView(e.arr.buffer,e.arr.byteOffset+e.pos,t);return e.pos+=t,n},xN=[function(e){},function(e){return null},yN,function(e){return wN(e,4).getFloat32(0,!1)},function(e){return wN(e,8).getFloat64(0,!1)},function(e){return wN(e,8).getBigInt64(0,!1)},function(e){return!1},function(e){return!0},bN,function(e){for(var t=mN(e),n={},r=0;r<t;r++){n[bN(e)]=kN(e)}return n},function(e){for(var t=mN(e),n=[],r=0;r<t;r++)n.push(kN(e));return n},vN],kN=function(e){return xN[127-gN(e)](e)},SN=function(e){U(n,e);var t=W(n);function n(e,r){var i;return z(this,n),(i=t.call(this,e)).reader=r,i.s=null,i.count=0,i}return N(n,[{key:"read",value:function(){return 0===this.count&&(this.s=this.reader(this),hN(this)?this.count=mN(this)+1:this.count=-1),this.count--,this.s}}]),n}(dN),_N=function(e){U(n,e);var t=W(n);function n(e){var r;return z(this,n),(r=t.call(this,e)).s=0,r.count=0,r}return N(n,[{key:"read",value:function(){if(0===this.count){this.s=yN(this);var e=AD(this.s);this.count=1,e&&(this.s=-this.s,this.count=mN(this)+2)}return this.count--,this.s}}]),n}(dN),EN=function(e){U(n,e);var t=W(n);function n(e){var r;return z(this,n),(r=t.call(this,e)).s=0,r.count=0,r.diff=0,r}return N(n,[{key:"read",value:function(){if(0===this.count){var e=yN(this),t=1&e;this.diff=CD(e/2),this.count=1,t&&(this.count=mN(this)+2)}return this.s+=this.diff,this.count--,this.s}}]),n}(dN),CN=function(){function e(t){z(this,e),this.decoder=new _N(t),this.str=bN(this.decoder),this.spos=0}return N(e,[{key:"read",value:function(){var e=this.spos+this.decoder.read(),t=this.str.slice(this.spos,e);return this.spos=e,t}}]),e}(),PN=function(){function e(){z(this,e),this._observers=LL()}return N(e,[{key:"on",value:function(e,t){NL(this._observers,e,zL).add(t)}},{key:"once",value:function(e,t){var n=this;this.on(e,(function r(){n.off(e,r),t.apply(void 0,arguments)}))}},{key:"off",value:function(e,t){var n=this._observers.get(e);void 0!==n&&(n.delete(t),0===n.size&&this._observers.delete(e))}},{key:"emit",value:function(e,t){return tD((this._observers.get(e)||LL()).values()).forEach((function(e){return e.apply(void 0,u(t))}))}},{key:"destroy",value:function(){this._observers=LL()}}]),e}(),IN=(crypto.subtle,crypto.getRandomValues.bind(crypto)),TN=(Math.random,function(){return IN(new Uint32Array(1))[0]}),MN=[1e7]+-1e3+-4e3+-8e3+-1e11,AN=function(e){return new Promise(e)},ON=(Promise.all.bind(Promise),N((function e(t,n){z(this,e),this.left=t,this.right=n}))),jN=function(e,t){return new ON(e,t)},RN="undefined"!==typeof document?document:{},LN=("undefined"!==typeof DOMParser&&new DOMParser,function(e){return function(e,t){var n,r=[],i=X(e);try{for(i.s();!(n=i.n()).done;){var o=L(n.value,2),a=o[0],s=o[1];r.push(t(s,a))}}catch(YK){i.e(YK)}finally{i.f()}return r}(e,(function(e,t){return"".concat(t,":").concat(e,";")})).join("")}),DN=(RN.ELEMENT_NODE,RN.TEXT_NODE,RN.CDATA_SECTION_NODE,RN.COMMENT_NODE,RN.DOCUMENT_NODE,RN.DOCUMENT_TYPE_NODE,RN.DOCUMENT_FRAGMENT_NODE,Symbol),NN=DN(),zN=DN(),BN=DN(),FN=DN(),UN=DN(),KN=DN(),VN=DN(),WN=DN(),HN=DN(),YN=(ED(),O(QL={},NN,jN("font-weight","bold")),O(QL,zN,jN("font-weight","normal")),O(QL,BN,jN("color","blue")),O(QL,UN,jN("color","green")),O(QL,FN,jN("color","grey")),O(QL,KN,jN("color","red")),O(QL,VN,jN("color","purple")),O(QL,WN,jN("color","orange")),O(QL,HN,jN("color","black")),QL),XN=vD?function(e){for(var t=[],n=[],r=LL(),i=[],o=0;o<e.length;o++){var a=e[o],s=YN[a];if(void 0!==s)r.set(s.left,s.right);else{if(a.constructor!==String&&a.constructor!==Number)break;var u=LN(r);o>0||u.length>0?(t.push("%c"+a),n.push(u)):t.push(a)}}for(o>0&&(i=n).unshift(t.join(""));o<e.length;o++){var l=e[o];l instanceof Symbol||i.push(l)}return i}:function(e){for(var t=[],n=[],r=0;r<e.length;r++){var i=e[r];i.constructor===String||i.constructor===Number?t.push(i):i.constructor===Object&&n.push(JSON.stringify(i))}return n},qN=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).log.apply(e,u(XN(n))),$N.forEach((function(e){return e.print(n)}))},$N=zL(),GN=function(e){var t;return O(t={},Symbol.iterator,(function(){return this})),O(t,"next",e),t},QN=function(e,t){return GN((function(){var n=e.next(),r=n.done,i=n.value;return{done:r,value:r?void 0:t(i)}}))},JN=ea().mark(aB),ZN=N((function e(t,n){z(this,e),this.clock=t,this.len=n})),ez=N((function e(){z(this,e),this.clients=new Map})),tz=function(e,t,n){return t.clients.forEach((function(t,r){for(var i=e.doc.store.clients.get(r),o=0;o<t.length;o++){var a=t[o];Qz(e,i,a.clock,a.len,n)}}))},nz=function(e,t){var n=e.clients.get(t.client);return void 0!==n&&null!==function(e,t){for(var n=0,r=e.length-1;n<=r;){var i=CD((n+r)/2),o=e[i],a=o.clock;if(a<=t){if(t<a+o.len)return i;n=i+1}else r=i-1}return null}(n,t.clock)},rz=function(e){e.clients.forEach((function(e){var t,n;for(e.sort((function(e,t){return e.clock-t.clock})),t=1,n=1;t<e.length;t++){var r=e[n-1],i=e[t];r.clock+r.len>=i.clock?r.len=TD(r.len,i.clock+i.len-r.clock):(n<t&&(e[n]=i),n++)}e.length=n}))},iz=function(e){for(var t=new ez,n=function(n){e[n].clients.forEach((function(r,i){if(!t.clients.has(i)){for(var o=r.slice(),a=n+1;a<e.length;a++)eD(o,e[a].clients.get(i)||[]);t.clients.set(i,o)}}))},r=0;r<e.length;r++)n(r);return rz(t),t},oz=function(e,t,n,r){NL(e.clients,t,(function(){return[]})).push(new ZN(n,r))},az=function(){return new ez},sz=function(e){var t=az();return e.clients.forEach((function(e,n){for(var r=[],i=0;i<e.length;i++){var o=e[i];if(o.deleted){var a=o.id.clock,s=o.length;if(i+1<e.length)for(var u=e[i+1];i+1<e.length&&u.deleted;u=e[1+ ++i])s+=u.length;r.push(new ZN(a,s))}}r.length>0&&t.clients.set(n,r)})),t},uz=function(e,t){WD(e.restEncoder,t.clients.size),tD(t.clients.entries()).sort((function(e,t){return t[0]-e[0]})).forEach((function(t){var n=L(t,2),r=n[0],i=n[1];e.resetDsCurVal(),WD(e.restEncoder,r);var o=i.length;WD(e.restEncoder,o);for(var a=0;a<o;a++){var s=i[a];e.writeDsClock(s.clock),e.writeDsLen(s.len)}}))},lz=function(e){for(var t=new ez,n=mN(e.restDecoder),r=0;r<n;r++){e.resetDsCurVal();var i=mN(e.restDecoder),o=mN(e.restDecoder);if(o>0)for(var a=NL(t.clients,i,(function(){return[]})),s=0;s<o;s++)a.push(new ZN(e.readDsClock(),e.readDsLen()))}return t},cz=function(e,t,n){for(var r=new ez,i=mN(e.restDecoder),o=0;o<i;o++){e.resetDsCurVal();for(var a=mN(e.restDecoder),s=mN(e.restDecoder),u=n.clients.get(a)||[],l=Wz(n,a),c=0;c<s;c++){var d=e.readDsClock(),f=d+e.readDsLen();if(d<l){l<f&&oz(r,a,l,f-l);var h=Yz(u,d),p=u[h];for(!p.deleted&&p.id.clock<d&&(u.splice(h+1,0,OF(t,p,d-p.id.clock)),h++);h<u.length&&(p=u[h++]).id.clock<f;)p.deleted||(f<p.id.clock+p.length&&u.splice(h,0,OF(t,p,f-p.id.clock)),p.delete(t))}else oz(r,a,d,f-d)}}if(r.clients.size>0){var v=new wz;return WD(v.restEncoder,0),uz(v,r),v.toUint8Array()}return null},dz=TN,fz=function(e){U(n,e);var t=W(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.guid,o=void 0===i?MN.replace(/[018]/g,(function(e){return(e^TN()&15>>e/4).toString(16)})):i,a=r.collectionid,s=void 0===a?null:a,u=r.gc,l=void 0===u||u,c=r.gcFilter,d=void 0===c?function(){return!0}:c,f=r.meta,h=void 0===f?null:f,p=r.autoLoad,v=void 0!==p&&p,g=r.shouldLoad,m=void 0===g||g;z(this,n),(e=t.call(this)).gc=l,e.gcFilter=d,e.clientID=dz(),e.guid=o,e.collectionid=s,e.share=new Map,e.store=new Kz,e._transaction=null,e._transactionCleanups=[],e.subdocs=new Set,e._item=null,e.shouldLoad=m,e.autoLoad=v,e.meta=h,e.isLoaded=!1,e.isSynced=!1,e.whenLoaded=AN((function(t){e.on("load",(function(){e.isLoaded=!0,t(B(e))}))}));var y=function(){return AN((function(t){e.on("sync",(function n(r){void 0!==r&&!0!==r||(e.off("sync",n),t())}))}))};return e.on("sync",(function(t){!1===t&&e.isSynced&&(e.whenSynced=y()),e.isSynced=void 0===t||!0===t,e.isLoaded||e.emit("load",[])})),e.whenSynced=y(),e}return N(n,[{key:"load",value:function(){var e=this,t=this._item;null===t||this.shouldLoad||oB(t.parent.doc,(function(t){t.subdocsLoaded.add(e)}),null,!0),this.shouldLoad=!0}},{key:"getSubdocs",value:function(){return this.subdocs}},{key:"getSubdocGuids",value:function(){return new Set(tD(this.subdocs).map((function(e){return e.guid})))}},{key:"transact",value:function(e){return oB(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)}},{key:"get",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:CB,r=NL(this.share,e,(function(){var e=new n;return e._integrate(t,null),e})),i=r.constructor;if(n!==CB&&i!==n){if(i===CB){var o=new n;o._map=r._map,r._map.forEach((function(e){for(;null!==e;e=e.left)e.parent=o})),o._start=r._start;for(var a=o._start;null!==a;a=a.right)a.parent=o;return o._length=r._length,this.share.set(e,o),o._integrate(this,null),o}throw new Error("Type with the name ".concat(e," has already been defined with a different constructor"))}return r}},{key:"getArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.get(e,VB)}},{key:"getText",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.get(e,oF)}},{key:"getMap",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.get(e,HB)}},{key:"getXmlFragment",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.get(e,sF)}},{key:"toJSON",value:function(){var e={};return this.share.forEach((function(t,n){e[n]=t.toJSON()})),e}},{key:"destroy",value:function(){var e=this;tD(this.subdocs).forEach((function(e){return e.destroy()}));var t=this._item;if(null!==t){this._item=null;var r=t.content;r.doc=new n(R(R({guid:this.guid},r.opts),{},{shouldLoad:!1})),r.doc._item=t,oB(t.parent.doc,(function(n){var i=r.doc;t.deleted||n.subdocsAdded.add(i),n.subdocsRemoved.add(e)}),null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),Au(K(n.prototype),"destroy",this).call(this)}},{key:"on",value:function(e,t){Au(K(n.prototype),"on",this).call(this,e,t)}},{key:"off",value:function(e,t){Au(K(n.prototype),"off",this).call(this,e,t)}}]),n}(PN),hz=function(){function e(t){z(this,e),this.restDecoder=t}return N(e,[{key:"resetDsCurVal",value:function(){}},{key:"readDsClock",value:function(){return mN(this.restDecoder)}},{key:"readDsLen",value:function(){return mN(this.restDecoder)}}]),e}(),pz=function(e){U(n,e);var t=W(n);function n(){return z(this,n),t.apply(this,arguments)}return N(n,[{key:"readLeftID",value:function(){return Dz(mN(this.restDecoder),mN(this.restDecoder))}},{key:"readRightID",value:function(){return Dz(mN(this.restDecoder),mN(this.restDecoder))}},{key:"readClient",value:function(){return mN(this.restDecoder)}},{key:"readInfo",value:function(){return gN(this.restDecoder)}},{key:"readString",value:function(){return bN(this.restDecoder)}},{key:"readParentInfo",value:function(){return 1===mN(this.restDecoder)}},{key:"readTypeRef",value:function(){return mN(this.restDecoder)}},{key:"readLen",value:function(){return mN(this.restDecoder)}},{key:"readAny",value:function(){return kN(this.restDecoder)}},{key:"readBuf",value:function(){return function(e){var t=gD(e.byteLength);return t.set(e),t}(vN(this.restDecoder))}},{key:"readJSON",value:function(){return JSON.parse(bN(this.restDecoder))}},{key:"readKey",value:function(){return bN(this.restDecoder)}}]),n}(hz),vz=function(){function e(t){z(this,e),this.dsCurrVal=0,this.restDecoder=t}return N(e,[{key:"resetDsCurVal",value:function(){this.dsCurrVal=0}},{key:"readDsClock",value:function(){return this.dsCurrVal+=mN(this.restDecoder),this.dsCurrVal}},{key:"readDsLen",value:function(){var e=mN(this.restDecoder)+1;return this.dsCurrVal+=e,e}}]),e}(),gz=function(e){U(n,e);var t=W(n);function n(e){var r;return z(this,n),(r=t.call(this,e)).keys=[],mN(e),r.keyClockDecoder=new EN(vN(e)),r.clientDecoder=new _N(vN(e)),r.leftClockDecoder=new EN(vN(e)),r.rightClockDecoder=new EN(vN(e)),r.infoDecoder=new SN(vN(e),gN),r.stringDecoder=new CN(vN(e)),r.parentInfoDecoder=new SN(vN(e),gN),r.typeRefDecoder=new _N(vN(e)),r.lenDecoder=new _N(vN(e)),r}return N(n,[{key:"readLeftID",value:function(){return new Rz(this.clientDecoder.read(),this.leftClockDecoder.read())}},{key:"readRightID",value:function(){return new Rz(this.clientDecoder.read(),this.rightClockDecoder.read())}},{key:"readClient",value:function(){return this.clientDecoder.read()}},{key:"readInfo",value:function(){return this.infoDecoder.read()}},{key:"readString",value:function(){return this.stringDecoder.read()}},{key:"readParentInfo",value:function(){return 1===this.parentInfoDecoder.read()}},{key:"readTypeRef",value:function(){return this.typeRefDecoder.read()}},{key:"readLen",value:function(){return this.lenDecoder.read()}},{key:"readAny",value:function(){return kN(this.restDecoder)}},{key:"readBuf",value:function(){return vN(this.restDecoder)}},{key:"readJSON",value:function(){return kN(this.restDecoder)}},{key:"readKey",value:function(){var e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];var t=this.stringDecoder.read();return this.keys.push(t),t}}]),n}(vz),mz=function(){function e(){z(this,e),this.restEncoder=BD()}return N(e,[{key:"toUint8Array",value:function(){return UD(this.restEncoder)}},{key:"resetDsCurVal",value:function(){}},{key:"writeDsClock",value:function(e){WD(this.restEncoder,e)}},{key:"writeDsLen",value:function(e){WD(this.restEncoder,e)}}]),e}(),yz=function(e){U(n,e);var t=W(n);function n(){return z(this,n),t.apply(this,arguments)}return N(n,[{key:"writeLeftID",value:function(e){WD(this.restEncoder,e.client),WD(this.restEncoder,e.clock)}},{key:"writeRightID",value:function(e){WD(this.restEncoder,e.client),WD(this.restEncoder,e.clock)}},{key:"writeClient",value:function(e){WD(this.restEncoder,e)}},{key:"writeInfo",value:function(e){VD(this.restEncoder,e)}},{key:"writeString",value:function(e){qD(this.restEncoder,e)}},{key:"writeParentInfo",value:function(e){WD(this.restEncoder,e?1:0)}},{key:"writeTypeRef",value:function(e){WD(this.restEncoder,e)}},{key:"writeLen",value:function(e){WD(this.restEncoder,e)}},{key:"writeAny",value:function(e){ZD(this.restEncoder,e)}},{key:"writeBuf",value:function(e){GD(this.restEncoder,e)}},{key:"writeJSON",value:function(e){qD(this.restEncoder,JSON.stringify(e))}},{key:"writeKey",value:function(e){qD(this.restEncoder,e)}}]),n}(mz),bz=function(){function e(){z(this,e),this.restEncoder=BD(),this.dsCurrVal=0}return N(e,[{key:"toUint8Array",value:function(){return UD(this.restEncoder)}},{key:"resetDsCurVal",value:function(){this.dsCurrVal=0}},{key:"writeDsClock",value:function(e){var t=e-this.dsCurrVal;this.dsCurrVal=e,WD(this.restEncoder,t)}},{key:"writeDsLen",value:function(e){0===e&&uN(),WD(this.restEncoder,e-1),this.dsCurrVal+=e}}]),e}(),wz=function(e){U(n,e);var t=W(n);function n(){var e;return z(this,n),(e=t.call(this)).keyMap=new Map,e.keyClock=0,e.keyClockEncoder=new iN,e.clientEncoder=new nN,e.leftClockEncoder=new iN,e.rightClockEncoder=new iN,e.infoEncoder=new eN(VD),e.stringEncoder=new oN,e.parentInfoEncoder=new eN(VD),e.typeRefEncoder=new nN,e.lenEncoder=new nN,e}return N(n,[{key:"toUint8Array",value:function(){var e=BD();return WD(e,0),GD(e,this.keyClockEncoder.toUint8Array()),GD(e,this.clientEncoder.toUint8Array()),GD(e,this.leftClockEncoder.toUint8Array()),GD(e,this.rightClockEncoder.toUint8Array()),GD(e,UD(this.infoEncoder)),GD(e,this.stringEncoder.toUint8Array()),GD(e,UD(this.parentInfoEncoder)),GD(e,this.typeRefEncoder.toUint8Array()),GD(e,this.lenEncoder.toUint8Array()),$D(e,UD(this.restEncoder)),UD(e)}},{key:"writeLeftID",value:function(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}},{key:"writeRightID",value:function(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}},{key:"writeClient",value:function(e){this.clientEncoder.write(e)}},{key:"writeInfo",value:function(e){this.infoEncoder.write(e)}},{key:"writeString",value:function(e){this.stringEncoder.write(e)}},{key:"writeParentInfo",value:function(e){this.parentInfoEncoder.write(e?1:0)}},{key:"writeTypeRef",value:function(e){this.typeRefEncoder.write(e)}},{key:"writeLen",value:function(e){this.lenEncoder.write(e)}},{key:"writeAny",value:function(e){ZD(this.restEncoder,e)}},{key:"writeBuf",value:function(e){GD(this.restEncoder,e)}},{key:"writeJSON",value:function(e){ZD(this.restEncoder,e)}},{key:"writeKey",value:function(e){var t=this.keyMap.get(e);void 0===t?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(t)}}]),n}(bz),xz=function(e,t,n){var r=new Map;n.forEach((function(e,n){Wz(t,n)>e&&r.set(n,e)})),Vz(t).forEach((function(e,t){n.has(t)||r.set(t,0)})),WD(e.restEncoder,r.size),tD(r.entries()).sort((function(e,t){return t[0]-e[0]})).forEach((function(n){var r=L(n,2),i=r[0],o=r[1];!function(e,t,n,r){r=TD(r,t[0].id.clock);var i=Yz(t,r);WD(e.restEncoder,t.length-i),e.writeClient(n),WD(e.restEncoder,r);var o=t[i];o.write(e,r-o.id.clock);for(var a=i+1;a<t.length;a++)t[a].write(e,0)}(e,t.clients.get(i),i,o)}))},kz=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new gz(e);return oB(t,(function(e){e.local=!1;var t=!1,n=e.doc,i=n.store,o=function(e,t){for(var n=LL(),r=mN(e.restDecoder),i=0;i<r;i++){var o=mN(e.restDecoder),a=new Array(o),s=e.readClient(),u=mN(e.restDecoder);n.set(s,{i:0,refs:a});for(var l=0;l<o;l++){var c=e.readInfo();switch(31&c){case 0:var d=e.readLen();a[l]=new hF(Dz(s,u),d),u+=d;break;case 10:var f=mN(e.restDecoder);a[l]=new DF(Dz(s,u),f),u+=f;break;default:var h=0===(192&c),p=new jF(Dz(s,u),null,(c&jD)===jD?e.readLeftID():null,null,(c&OD)===OD?e.readRightID():null,h?e.readParentInfo()?t.get(e.readString()):e.readLeftID():null,h&&32===(32&c)?e.readString():null,RF(e,c));a[l]=p,u+=p.length}}}return n}(r,n),a=function(e,t,n){var r=[],i=tD(n.keys()).sort((function(e,t){return e-t}));if(0===i.length)return null;var o=function(){if(0===i.length)return null;for(var e=n.get(i[i.length-1]);e.refs.length===e.i;){if(i.pop(),!(i.length>0))return null;e=n.get(i[i.length-1])}return e},a=o();if(null===a&&0===r.length)return null;for(var s=new Kz,u=new Map,l=function(e,t){var n=u.get(e);(null==n||n>t)&&u.set(e,t)},c=a.refs[a.i++],d=new Map,f=function(){for(var e=function(){var e=o[t],r=e.id.client,a=n.get(r);a?(a.i--,s.clients.set(r,a.refs.slice(a.i)),n.delete(r),a.i=0,a.refs=[]):s.clients.set(r,[e]),i=i.filter((function(e){return e!==r}))},t=0,o=r;t<o.length;t++)e();r.length=0};;){if(c.constructor!==DF){var h=NL(d,c.id.client,(function(){return Wz(t,c.id.client)}))-c.id.clock;if(h<0)r.push(c),l(c.id.client,c.id.clock-1),f();else{var p=c.getMissing(e,t);if(null!==p){r.push(c);var v=n.get(p)||{refs:[],i:0};if(v.refs.length!==v.i){c=v.refs[v.i++];continue}l(p,Wz(t,p)),f()}else(0===h||h<c.length)&&(c.integrate(e,h),d.set(c.id.client,c.id.clock+c.length))}}if(r.length>0)c=r.pop();else if(null!==a&&a.i<a.refs.length)c=a.refs[a.i++];else{if(null===(a=o()))break;c=a.refs[a.i++]}}if(s.clients.size>0){var g=new wz;return xz(g,s,new Map),WD(g.restEncoder,0),{missing:u,update:g.toUint8Array()}}return null}(e,i,o),s=i.pendingStructs;if(s){var u,l=X(s.missing);try{for(l.s();!(u=l.n()).done;){var c=L(u.value,2),d=c[0];if(c[1]<Wz(i,d)){t=!0;break}}}catch(YK){l.e(YK)}finally{l.f()}if(a){var f,h=X(a.missing);try{for(h.s();!(f=h.n()).done;){var p=L(f.value,2),v=p[0],g=p[1],m=s.missing.get(v);(null==m||m>g)&&s.missing.set(v,g)}}catch(YK){h.e(YK)}finally{h.f()}s.update=dB([s.update,a.update])}}else i.pendingStructs=a;var y=cz(r,e,i);if(i.pendingDs){var b=new gz(fN(i.pendingDs));mN(b.restDecoder);var w=cz(b,e,i);i.pendingDs=y&&w?dB([y,w]):y||w}else i.pendingDs=y;if(t){var x=i.pendingStructs.update;i.pendingStructs=null,Sz(e.doc,x)}}),n,!1)},Sz=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:gz,i=fN(t);kz(i,e,n,new r(i))},_z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint8Array([0]),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new wz;!function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map;xz(e,t.store,n),uz(e,sz(t.store))}(n,e,Cz(t));var r=[n.toUint8Array()];if(e.store.pendingDs&&r.push(e.store.pendingDs),e.store.pendingStructs&&r.push(fB(e.store.pendingStructs.update,t)),r.length>1){if(n.constructor===yz)return lB(r.map((function(e,t){return 0===t?e:mB(e)})));if(n.constructor===wz)return dB(r)}return r[0]},Ez=function(e){for(var t=new Map,n=mN(e.restDecoder),r=0;r<n;r++){var i=mN(e.restDecoder),o=mN(e.restDecoder);t.set(i,o)}return t},Cz=function(e){return Ez(new hz(fN(e)))},Pz=function(e,t){return WD(e.restEncoder,t.size),tD(t.entries()).sort((function(e,t){return t[0]-e[0]})).forEach((function(t){var n=L(t,2),r=n[0],i=n[1];WD(e.restEncoder,r),WD(e.restEncoder,i)})),e},Iz=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new bz;return e instanceof Map?Pz(t,e):function(e,t){Pz(e,Vz(t.store))}(t,e),t.toUint8Array()},Tz=N((function e(){z(this,e),this.l=[]})),Mz=function(){return new Tz},Az=function(e,t){return e.l.push(t)},Oz=function(e,t){var n=e.l,r=n.length;e.l=n.filter((function(e){return t!==e})),r===e.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},jz=function(e,t,n){return aD(e.l,[t,n])},Rz=N((function e(t,n){z(this,e),this.client=t,this.clock=n})),Lz=function(e,t){return e===t||null!==e&&null!==t&&e.client===t.client&&e.clock===t.clock},Dz=function(e,t){return new Rz(e,t)},Nz=function(e){var t,n=X(e.doc.share.entries());try{for(n.s();!(t=n.n()).done;){var r=L(t.value,2),i=r[0];if(r[1]===e)return i}}catch(YK){n.e(YK)}finally{n.f()}throw uN()},zz=N((function e(t,n){z(this,e),this.ds=t,this.sv=n})),Bz=function(e,t){return new zz(e,t)},Fz=(Bz(az(),new Map),function(e,t){return void 0===t?!e.deleted:t.sv.has(e.id.client)&&(t.sv.get(e.id.client)||0)>e.id.clock&&!nz(t.ds,e.id)}),Uz=function e(t,n){var r=NL(t.meta,e,zL),i=t.doc.store;r.has(n)||(n.sv.forEach((function(e,n){e<Wz(i,n)&&$z(t,Dz(n,e))})),tz(t,n.ds,(function(e){})),r.add(n))},Kz=N((function e(){z(this,e),this.clients=new Map,this.pendingStructs=null,this.pendingDs=null})),Vz=function(e){var t=new Map;return e.clients.forEach((function(e,n){var r=e[e.length-1];t.set(n,r.id.clock+r.length)})),t},Wz=function(e,t){var n=e.clients.get(t);if(void 0===n)return 0;var r=n[n.length-1];return r.id.clock+r.length},Hz=function(e,t){var n=e.clients.get(t.id.client);if(void 0===n)n=[],e.clients.set(t.id.client,n);else{var r=n[n.length-1];if(r.id.clock+r.length!==t.id.clock)throw uN()}n.push(t)},Yz=function(e,t){var n=0,r=e.length-1,i=e[r],o=i.id.clock;if(o===t)return r;for(var a=CD(t/(o+i.length-1)*r);n<=r;){if((o=(i=e[a]).id.clock)<=t){if(t<o+i.length)return a;n=a+1}else r=a-1;a=CD((n+r)/2)}throw uN()},Xz=function(e,t){var n=e.clients.get(t.client);return n[Yz(n,t.clock)]},qz=function(e,t,n){var r=Yz(t,n),i=t[r];return i.id.clock<n&&i instanceof jF?(t.splice(r+1,0,OF(e,i,n-i.id.clock)),r+1):r},$z=function(e,t){var n=e.doc.store.clients.get(t.client);return n[qz(e,n,t.clock)]},Gz=function(e,t,n){var r=t.clients.get(n.client),i=Yz(r,n.clock),o=r[i];return n.clock!==o.id.clock+o.length-1&&o.constructor!==hF&&r.splice(i+1,0,OF(e,o,n.clock-o.id.clock+1)),o},Qz=function(e,t,n,r,i){if(0!==r){var o,a=n+r,s=qz(e,t,n);do{a<(o=t[s++]).id.clock+o.length&&qz(e,t,a),i(o)}while(s<t.length&&t[s].id.clock<a)}},Jz=N((function e(t,n,r){z(this,e),this.doc=t,this.deleteSet=new ez,this.beforeState=Vz(t.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=n,this.meta=new Map,this.local=r,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set})),Zz=function(e,t){return!(0===t.deleteSet.clients.size&&!function(e,t){var n,r=X(e);try{for(r.s();!(n=r.n()).done;){var i=L(n.value,2),o=i[0];if(t(i[1],o))return!0}}catch(YK){r.e(YK)}finally{r.f()}return!1}(t.afterState,(function(e,n){return t.beforeState.get(n)!==e})))&&(rz(t.deleteSet),function(e,t){xz(e,t.doc.store,t.beforeState)}(e,t),uz(e,t.deleteSet),!0)},eB=function(e,t,n){var r=t._item;(null===r||r.id.clock<(e.beforeState.get(r.id.client)||0)&&!r.deleted)&&NL(e.changed,t,zL).add(n)},tB=function(e,t){var n=e[t-1],r=e[t];n.deleted===r.deleted&&n.constructor===r.constructor&&n.mergeWith(r)&&(e.splice(t,1),r instanceof jF&&null!==r.parentSub&&r.parent._map.get(r.parentSub)===r&&r.parent._map.set(r.parentSub,n))},nB=function(e,t,n){var r,i=X(e.clients.entries());try{for(i.s();!(r=i.n()).done;)for(var o=L(r.value,2),a=o[0],s=o[1],u=t.clients.get(a),l=s.length-1;l>=0;l--)for(var c=s[l],d=c.clock+c.len,f=Yz(u,c.clock),h=u[f];f<u.length&&h.id.clock<d;h=u[++f]){var p=u[f];if(c.clock+c.len<=p.id.clock)break;p instanceof jF&&p.deleted&&!p.keep&&n(p)&&p.gc(t,!1)}}catch(YK){i.e(YK)}finally{i.f()}},rB=function(e,t){e.clients.forEach((function(e,n){for(var r=t.clients.get(n),i=e.length-1;i>=0;i--)for(var o=e[i],a=ID(r.length-1,1+Yz(r,o.clock+o.len-1)),s=r[a];a>0&&s.id.clock>=o.clock;s=r[--a])tB(r,a)}))},iB=function e(t,n){if(n<t.length){var r=t[n],i=r.doc,o=i.store,a=r.deleteSet,s=r._mergeStructs;try{rz(a),r.afterState=Vz(r.doc.store),i.emit("beforeObserverCalls",[r,i]);var u=[];r.changed.forEach((function(e,t){return u.push((function(){null!==t._item&&t._item.deleted||t._callObserver(r,e)}))})),u.push((function(){r.changedParentTypes.forEach((function(e,t){return u.push((function(){null!==t._item&&t._item.deleted||((e=e.filter((function(e){return null===e.target._item||!e.target._item.deleted}))).forEach((function(e){e.currentTarget=t})),e.sort((function(e,t){return e.path.length-t.path.length})),jz(t._dEH,e,r))}))})),u.push((function(){return i.emit("afterTransaction",[r,i])}))})),aD(u,[])}finally{i.gc&&nB(a,o,i.gcFilter),rB(a,o),r.afterState.forEach((function(e,t){var n=r.beforeState.get(t)||0;if(n!==e)for(var i=o.clients.get(t),a=TD(Yz(i,n),1),s=i.length-1;s>=a;s--)tB(i,s)}));for(var l=0;l<s.length;l++){var c=s[l].id,d=c.client,f=c.clock,h=o.clients.get(d),p=Yz(h,f);p+1<h.length&&tB(h,p+1),p>0&&tB(h,p)}if(r.local||r.afterState.get(i.clientID)===r.beforeState.get(i.clientID)||(qN(WN,NN,"[yjs] ",zN,KN,"Changed the client-id because another client seems to be using it."),i.clientID=dz()),i.emit("afterTransactionCleanup",[r,i]),i._observers.has("update")){var v=new yz;Zz(v,r)&&i.emit("update",[v.toUint8Array(),r.origin,i,r])}if(i._observers.has("updateV2")){var g=new wz;Zz(g,r)&&i.emit("updateV2",[g.toUint8Array(),r.origin,i,r])}var m=r.subdocsAdded,y=r.subdocsLoaded,b=r.subdocsRemoved;(m.size>0||b.size>0||y.size>0)&&(m.forEach((function(e){e.clientID=i.clientID,null==e.collectionid&&(e.collectionid=i.collectionid),i.subdocs.add(e)})),b.forEach((function(e){return i.subdocs.delete(e)})),i.emit("subdocs",[{loaded:y,added:m,removed:b},i,r]),b.forEach((function(e){return e.destroy()}))),t.length<=n+1?(i._transactionCleanups=[],i.emit("afterAllTransactions",[i,t])):e(t,n+1)}}},oB=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=e._transactionCleanups,o=!1,a=null;null===e._transaction&&(o=!0,e._transaction=new Jz(e,n,r),i.push(e._transaction),1===i.length&&e.emit("beforeAllTransactions",[e]),e.emit("beforeTransaction",[e._transaction,e]));try{a=t(e._transaction)}finally{if(o){var s=e._transaction===i[0];e._transaction=null,s&&iB(i,0)}}return a};function aB(e){var t,n,r,i,o,a,s,u,l,c,d;return ea().wrap((function(f){for(;;)switch(f.prev=f.next){case 0:t=mN(e.restDecoder),n=0;case 2:if(!(n<t)){f.next=34;break}r=mN(e.restDecoder),i=e.readClient(),o=mN(e.restDecoder),a=0;case 7:if(!(a<r)){f.next=31;break}if(10!==(s=e.readInfo())){f.next=16;break}return u=mN(e.restDecoder),f.next=13,new DF(Dz(i,o),u);case 13:o+=u,f.next=28;break;case 16:if(0===(31&s)){f.next=24;break}return l=0===(192&s),c=new jF(Dz(i,o),null,(s&jD)===jD?e.readLeftID():null,null,(s&OD)===OD?e.readRightID():null,l?e.readParentInfo()?e.readString():e.readLeftID():null,l&&32===(32&s)?e.readString():null,RF(e,s)),f.next=21,c;case 21:o+=c.length,f.next=28;break;case 24:return d=e.readLen(),f.next=27,new hF(Dz(i,o),d);case 27:o+=d;case 28:a++,f.next=7;break;case 31:n++,f.next=2;break;case 34:case"end":return f.stop()}}),JN)}var sB=function(){function e(t,n){z(this,e),this.gen=aB(t),this.curr=null,this.done=!1,this.filterSkips=n,this.next()}return N(e,[{key:"next",value:function(){do{this.curr=this.gen.next().value||null}while(this.filterSkips&&null!==this.curr&&this.curr.constructor===DF);return this.curr}}]),e}(),uB=N((function e(t){z(this,e),this.currClient=0,this.startClock=0,this.written=0,this.encoder=t,this.clientStructs=[]})),lB=function(e){return dB(e,pz,yz)},cB=function(e,t){if(e.constructor===hF){var n=e.id,r=n.client,i=n.clock;return new hF(Dz(r,i+t),e.length-t)}if(e.constructor===DF){var o=e.id,a=o.client,s=o.clock;return new DF(Dz(a,s+t),e.length-t)}var u=e,l=u.id,c=l.client,d=l.clock;return new jF(Dz(c,d+t),null,Dz(c,d+t-1),null,u.rightOrigin,u.parent,u.parentSub,u.content.splice(t))},dB=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:gz,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:wz;if(1===e.length)return e[0];for(var r=e.map((function(e){return new t(fN(e))})),i=r.map((function(e){return new sB(e,!0)})),o=null,a=new n,s=new uB(a);(i=i.filter((function(e){return null!==e.curr}))).sort((function(e,t){if(e.curr.id.client===t.curr.id.client){var n=e.curr.id.clock-t.curr.id.clock;return 0===n?e.curr.constructor===t.curr.constructor?0:e.curr.constructor===DF?1:-1:n}return t.curr.id.client-e.curr.id.client})),0!==i.length;){var u=i[0],l=u.curr.id.client;if(null!==o){for(var c=u.curr,d=!1;null!==c&&c.id.clock+c.length<=o.struct.id.clock+o.struct.length&&c.id.client>=o.struct.id.client;)c=u.next(),d=!0;if(null===c||c.id.client!==l||d&&c.id.clock>o.struct.id.clock+o.struct.length)continue;if(l!==o.struct.id.client)pB(s,o.struct,o.offset),o={struct:c,offset:0},u.next();else if(o.struct.id.clock+o.struct.length<c.id.clock)if(o.struct.constructor===DF)o.struct.length=c.id.clock+c.length-o.struct.id.clock;else{pB(s,o.struct,o.offset);var f=c.id.clock-o.struct.id.clock-o.struct.length;o={struct:new DF(Dz(l,o.struct.id.clock+o.struct.length),f),offset:0}}else{var h=o.struct.id.clock+o.struct.length-c.id.clock;h>0&&(o.struct.constructor===DF?o.struct.length-=h:c=cB(c,h)),o.struct.mergeWith(c)||(pB(s,o.struct,o.offset),o={struct:c,offset:0},u.next())}}else o={struct:u.curr,offset:0},u.next();for(var p=u.curr;null!==p&&p.id.client===l&&p.id.clock===o.struct.id.clock+o.struct.length&&p.constructor!==DF;p=u.next())pB(s,o.struct,o.offset),o={struct:p,offset:0}}null!==o&&(pB(s,o.struct,o.offset),o=null),vB(s);var v=r.map((function(e){return lz(e)})),g=iz(v);return uz(a,g),a.toUint8Array()},fB=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:gz,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:wz,i=Cz(t),o=new r,a=new uB(o),s=new n(fN(e)),u=new sB(s,!1);u.curr;){var l=u.curr,c=l.id.client,d=i.get(c)||0;if(u.curr.constructor!==DF)if(l.id.clock+l.length>d)for(pB(a,l,TD(d-l.id.clock,0)),u.next();u.curr&&u.curr.id.client===c;)pB(a,u.curr,0),u.next();else for(;u.curr&&u.curr.id.client===c&&u.curr.id.clock+u.curr.length<=d;)u.next();else u.next()}vB(a);var f=lz(s);return uz(o,f),o.toUint8Array()},hB=function(e){e.written>0&&(e.clientStructs.push({written:e.written,restEncoder:UD(e.encoder.restEncoder)}),e.encoder.restEncoder=BD(),e.written=0)},pB=function(e,t,n){e.written>0&&e.currClient!==t.id.client&&hB(e),0===e.written&&(e.currClient=t.id.client,e.encoder.writeClient(t.id.client),WD(e.encoder.restEncoder,t.id.clock+n)),t.write(e.encoder,n),e.written++},vB=function(e){hB(e);var t=e.encoder.restEncoder;WD(t,e.clientStructs.length);for(var n=0;n<e.clientStructs.length;n++){var r=e.clientStructs[n];WD(t,r.written),$D(t,r.restEncoder)}},gB=function(e,t,n){for(var r=new t(fN(e)),i=new sB(r,!1),o=new n,a=new uB(o),s=i.curr;null!==s;s=i.next())pB(a,s,0);vB(a);var u=lz(r);return uz(o,u),o.toUint8Array()},mB=function(e){return gB(e,gz,yz)},yB=function(){function e(t,n){z(this,e),this.target=t,this.currentTarget=t,this.transaction=n,this._changes=null,this._keys=null,this._delta=null}return N(e,[{key:"path",get:function(){return bB(this.currentTarget,this.target)}},{key:"deletes",value:function(e){return nz(this.transaction.deleteSet,e.id)}},{key:"keys",get:function(){var e=this;if(null===this._keys){var t=new Map,n=this.target;this.transaction.changed.get(n).forEach((function(r){if(null!==r){var i,o,a=n._map.get(r);if(e.adds(a)){for(var s=a.left;null!==s&&e.adds(s);)s=s.left;if(e.deletes(a)){if(null===s||!e.deletes(s))return;i="delete",o=ZL(s.content.getContent())}else null!==s&&e.deletes(s)?(i="update",o=ZL(s.content.getContent())):(i="add",o=void 0)}else{if(!e.deletes(a))return;i="delete",o=ZL(a.content.getContent())}t.set(r,{action:i,oldValue:o})}})),this._keys=t}return this._keys}},{key:"delta",get:function(){return this.changes.delta}},{key:"adds",value:function(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}},{key:"changes",get:function(){var e=this._changes;if(null===e){var t=this.target,n=zL(),r=zL(),i=[];if(e={added:n,deleted:r,delta:i,keys:this.keys},this.transaction.changed.get(t).has(null)){for(var o=null,a=function(){o&&i.push(o)},s=t._start;null!==s;s=s.right)s.deleted?this.deletes(s)&&!this.adds(s)&&(null!==o&&void 0!==o.delete||(a(),o={delete:0}),o.delete+=s.length,r.add(s)):this.adds(s)?(null!==o&&void 0!==o.insert||(a(),o={insert:[]}),o.insert=o.insert.concat(s.content.getContent()),n.add(s)):(null!==o&&void 0!==o.retain||(a(),o={retain:0}),o.retain+=s.length);null!==o&&void 0===o.retain&&a()}this._changes=e}return e}}]),e}(),bB=function(e,t){for(var n=[];null!==t._item&&t!==e;){if(null!==t._item.parentSub)n.unshift(t._item.parentSub);else{for(var r=0,i=t._item.parent._start;i!==t._item&&null!==i;)i.deleted||r++,i=i.right;n.unshift(r)}t=t._item.parent}return n},wB=0,xB=N((function e(t,n){z(this,e),t.marker=!0,this.p=t,this.index=n,this.timestamp=wB++})),kB=function(e,t,n){e.p.marker=!1,e.p=t,t.marker=!0,e.index=n,e.timestamp=wB++},SB=function(e,t){if(null===e._start||0===t||null===e._searchMarker)return null;var n=0===e._searchMarker.length?null:e._searchMarker.reduce((function(e,n){return PD(t-e.index)<PD(t-n.index)?e:n})),r=e._start,i=0;for(null!==n&&(r=n.p,i=n.index,function(e){e.timestamp=wB++}(n));null!==r.right&&i<t;){if(!r.deleted&&r.countable){if(t<i+r.length)break;i+=r.length}r=r.right}for(;null!==r.left&&i>t;)!(r=r.left).deleted&&r.countable&&(i-=r.length);for(;null!==r.left&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)!(r=r.left).deleted&&r.countable&&(i-=r.length);return null!==n&&PD(n.index-i)<r.parent.length/80?(kB(n,r,i),n):function(e,t,n){if(e.length>=80){var r=e.reduce((function(e,t){return e.timestamp<t.timestamp?e:t}));return kB(r,t,n),r}var i=new xB(t,n);return e.push(i),i}(e._searchMarker,r,i)},_B=function(e,t,n){for(var r=e.length-1;r>=0;r--){var i=e[r];if(n>0){var o=i.p;for(o.marker=!1;o&&(o.deleted||!o.countable);)(o=o.left)&&!o.deleted&&o.countable&&(i.index-=o.length);if(null===o||!0===o.marker){e.splice(r,1);continue}i.p=o,o.marker=!0}(t<i.index||n>0&&t===i.index)&&(i.index=TD(t,i.index+n))}},EB=function(e,t,n){for(var r=e,i=t.changedParentTypes;NL(i,e,(function(){return[]})).push(n),null!==e._item;)e=e._item.parent;jz(r._eH,n,t)},CB=function(){function e(){z(this,e),this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=Mz(),this._dEH=Mz(),this._searchMarker=null}return N(e,[{key:"parent",get:function(){return this._item?this._item.parent:null}},{key:"_integrate",value:function(e,t){this.doc=e,this._item=t}},{key:"_copy",value:function(){throw sN()}},{key:"clone",value:function(){throw sN()}},{key:"_write",value:function(e){}},{key:"_first",get:function(){for(var e=this._start;null!==e&&e.deleted;)e=e.right;return e}},{key:"_callObserver",value:function(e,t){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}},{key:"observe",value:function(e){Az(this._eH,e)}},{key:"observeDeep",value:function(e){Az(this._dEH,e)}},{key:"unobserve",value:function(e){Oz(this._eH,e)}},{key:"unobserveDeep",value:function(e){Oz(this._dEH,e)}},{key:"toJSON",value:function(){}}]),e}(),PB=function(e,t,n){t<0&&(t=e._length+t),n<0&&(n=e._length+n);for(var r=n-t,i=[],o=e._start;null!==o&&r>0;){if(o.countable&&!o.deleted){var a=o.content.getContent();if(a.length<=t)t-=a.length;else{for(var s=t;s<a.length&&r>0;s++)i.push(a[s]),r--;t=0}}o=o.right}return i},IB=function(e){for(var t=[],n=e._start;null!==n;){if(n.countable&&!n.deleted)for(var r=n.content.getContent(),i=0;i<r.length;i++)t.push(r[i]);n=n.right}return t},TB=function(e,t){for(var n=0,r=e._start;null!==r;){if(r.countable&&!r.deleted)for(var i=r.content.getContent(),o=0;o<i.length;o++)t(i[o],n++,e);r=r.right}},MB=function(e,t){var n=[];return TB(e,(function(r,i){n.push(t(r,i,e))})),n},AB=function(e,t){var n=SB(e,t),r=e._start;for(null!==n&&(r=n.p,t-=n.index);null!==r;r=r.right)if(!r.deleted&&r.countable){if(t<r.length)return r.content.getContent()[t];t-=r.length}},OB=function(e,t,n,r){var i=n,o=e.doc,a=o.clientID,s=o.store,u=null===n?t._start:n.right,l=[],c=function(){l.length>0&&((i=new jF(Dz(a,Wz(s,a)),i,i&&i.lastId,u,u&&u.id,t,null,new xF(l))).integrate(e,0),l=[])};r.forEach((function(n){if(null===n)l.push(n);else switch(n.constructor){case Number:case Object:case Boolean:case Array:case String:l.push(n);break;default:switch(c(),n.constructor){case Uint8Array:case ArrayBuffer:(i=new jF(Dz(a,Wz(s,a)),i,i&&i.lastId,u,u&&u.id,t,null,new pF(new Uint8Array(n)))).integrate(e,0);break;case fz:(i=new jF(Dz(a,Wz(s,a)),i,i&&i.lastId,u,u&&u.id,t,null,new mF(n))).integrate(e,0);break;default:if(!(n instanceof CB))throw new Error("Unexpected content type in insert operation");(i=new jF(Dz(a,Wz(s,a)),i,i&&i.lastId,u,u&&u.id,t,null,new AF(n))).integrate(e,0)}}})),c()},jB=aN("Length exceeded!"),RB=function(e,t,n,r){if(n>t._length)throw jB;if(0===n)return t._searchMarker&&_B(t._searchMarker,n,r.length),OB(e,t,null,r);var i=n,o=SB(t,n),a=t._start;for(null!==o&&(a=o.p,0===(n-=o.index)&&(n+=(a=a.prev)&&a.countable&&!a.deleted?a.length:0));null!==a;a=a.right)if(!a.deleted&&a.countable){if(n<=a.length){n<a.length&&$z(e,Dz(a.id.client,a.id.clock+n));break}n-=a.length}return t._searchMarker&&_B(t._searchMarker,i,r.length),OB(e,t,a,r)},LB=function(e,t,n,r){if(0!==r){var i=n,o=r,a=SB(t,n),s=t._start;for(null!==a&&(s=a.p,n-=a.index);null!==s&&n>0;s=s.right)!s.deleted&&s.countable&&(n<s.length&&$z(e,Dz(s.id.client,s.id.clock+n)),n-=s.length);for(;r>0&&null!==s;)s.deleted||(r<s.length&&$z(e,Dz(s.id.client,s.id.clock+r)),s.delete(e),r-=s.length),s=s.right;if(r>0)throw jB;t._searchMarker&&_B(t._searchMarker,i,-o+r)}},DB=function(e,t,n){var r=t._map.get(n);void 0!==r&&r.delete(e)},NB=function(e,t,n,r){var i,o=t._map.get(n)||null,a=e.doc,s=a.clientID;if(null==r)i=new xF([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:i=new xF([r]);break;case Uint8Array:i=new pF(r);break;case fz:i=new mF(r);break;default:if(!(r instanceof CB))throw new Error("Unexpected content type");i=new AF(r)}new jF(Dz(s,Wz(a.store,s)),o,o&&o.lastId,null,null,t,n,i).integrate(e,0)},zB=function(e,t){var n=e._map.get(t);return void 0===n||n.deleted?void 0:n.content.getContent()[n.length-1]},BB=function(e){var t={};return e._map.forEach((function(e,n){e.deleted||(t[n]=e.content.getContent()[e.length-1])})),t},FB=function(e,t){var n=e._map.get(t);return void 0!==n&&!n.deleted},UB=function(e){return function(e,t){return GN((function(){var n;do{n=e.next()}while(!n.done&&!t(n.value));return n}))}(e.entries(),(function(e){return!e[1].deleted}))},KB=function(e){U(n,e);var t=W(n);function n(e,r){var i;return z(this,n),(i=t.call(this,e,r))._transaction=r,i}return N(n)}(yB),VB=function(e,t){U(r,e);var n=W(r);function r(){var e;return z(this,r),(e=n.call(this))._prelimContent=[],e._searchMarker=[],e}return N(r,[{key:"_integrate",value:function(e,t){Au(K(r.prototype),"_integrate",this).call(this,e,t),this.insert(0,this._prelimContent),this._prelimContent=null}},{key:"_copy",value:function(){return new r}},{key:"clone",value:function(){var e=new r;return e.insert(0,this.toArray().map((function(e){return e instanceof CB?e.clone():e}))),e}},{key:"length",get:function(){return null===this._prelimContent?this._length:this._prelimContent.length}},{key:"_callObserver",value:function(e,t){Au(K(r.prototype),"_callObserver",this).call(this,e,t),EB(this,e,new KB(this,e))}},{key:"insert",value:function(e,t){var n,r=this;null!==this.doc?oB(this.doc,(function(n){RB(n,r,e,t)})):(n=this._prelimContent).splice.apply(n,[e,0].concat(u(t)))}},{key:"push",value:function(e){var t,n=this;null!==this.doc?oB(this.doc,(function(t){!function(e,t,n){var r=(t._searchMarker||[]).reduce((function(e,t){return t.index>e.index?t:e}),{index:0,p:t._start}).p;if(r)for(;r.right;)r=r.right;OB(e,t,r,n)}(t,n,e)})):(t=this._prelimContent).push.apply(t,u(e))}},{key:"unshift",value:function(e){this.insert(0,e)}},{key:"delete",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;null!==this.doc?oB(this.doc,(function(r){LB(r,t,e,n)})):this._prelimContent.splice(e,n)}},{key:"get",value:function(e){return AB(this,e)}},{key:"toArray",value:function(){return IB(this)}},{key:"slice",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;return PB(this,e,t)}},{key:"toJSON",value:function(){return this.map((function(e){return e instanceof CB?e.toJSON():e}))}},{key:"map",value:function(e){return MB(this,e)}},{key:"forEach",value:function(e){TB(this,e)}},{key:t,value:function(){return function(e){var t,n=e._start,r=null,i=0;return O(t={},Symbol.iterator,(function(){return this})),O(t,"next",(function(){if(null===r){for(;null!==n&&n.deleted;)n=n.right;if(null===n)return{done:!0,value:void 0};r=n.content.getContent(),i=0,n=n.right}var e=r[i++];return r.length<=i&&(r=null),{done:!1,value:e}})),t}(this)}},{key:"_write",value:function(e){e.writeTypeRef(_F)}}],[{key:"from",value:function(e){var t=new r;return t.push(e),t}}]),r}(CB,Symbol.iterator),WB=function(e){U(n,e);var t=W(n);function n(e,r,i){var o;return z(this,n),(o=t.call(this,e,r)).keysChanged=i,o}return N(n)}(yB),HB=function(e,t){U(r,e);var n=W(r);function r(e){var t;return z(this,r),(t=n.call(this))._prelimContent=null,t._prelimContent=void 0===e?new Map:new Map(e),t}return N(r,[{key:"_integrate",value:function(e,t){var n=this;Au(K(r.prototype),"_integrate",this).call(this,e,t),this._prelimContent.forEach((function(e,t){n.set(t,e)})),this._prelimContent=null}},{key:"_copy",value:function(){return new r}},{key:"clone",value:function(){var e=new r;return this.forEach((function(t,n){e.set(n,t instanceof CB?t.clone():t)})),e}},{key:"_callObserver",value:function(e,t){EB(this,e,new WB(this,e,t))}},{key:"toJSON",value:function(){var e={};return this._map.forEach((function(t,n){if(!t.deleted){var r=t.content.getContent()[t.length-1];e[n]=r instanceof CB?r.toJSON():r}})),e}},{key:"size",get:function(){return u(UB(this._map)).length}},{key:"keys",value:function(){return QN(UB(this._map),(function(e){return e[0]}))}},{key:"values",value:function(){return QN(UB(this._map),(function(e){return e[1].content.getContent()[e[1].length-1]}))}},{key:"entries",value:function(){return QN(UB(this._map),(function(e){return[e[0],e[1].content.getContent()[e[1].length-1]]}))}},{key:"forEach",value:function(e){var t=this;this._map.forEach((function(n,r){n.deleted||e(n.content.getContent()[n.length-1],r,t)}))}},{key:t,value:function(){return this.entries()}},{key:"delete",value:function(e){var t=this;null!==this.doc?oB(this.doc,(function(n){DB(n,t,e)})):this._prelimContent.delete(e)}},{key:"set",value:function(e,t){var n=this;return null!==this.doc?oB(this.doc,(function(r){NB(r,n,e,t)})):this._prelimContent.set(e,t),t}},{key:"get",value:function(e){return zB(this,e)}},{key:"has",value:function(e){return FB(this,e)}},{key:"clear",value:function(){var e=this;null!==this.doc?oB(this.doc,(function(t){e.forEach((function(e,n,r){DB(t,r,n)}))})):this._prelimContent.clear()}},{key:"_write",value:function(e){e.writeTypeRef(EF)}}]),r}(CB,Symbol.iterator),YB=function(e,t){return e===t||"object"===typeof e&&"object"===typeof t&&e&&t&&function(e,t){return e===t||iD(e)===iD(t)&&function(e,t){for(var n in e)if(!t(e[n],n))return!1;return!0}(e,(function(e,n){return(void 0!==e||oD(t,n))&&t[n]===e}))}(e,t)},XB=function(){function e(t,n,r,i){z(this,e),this.left=t,this.right=n,this.index=r,this.currentAttributes=i}return N(e,[{key:"forward",value:function(){if(null===this.right&&uN(),this.right.content.constructor===bF)this.right.deleted||QB(this.currentAttributes,this.right.content);else this.right.deleted||(this.index+=this.right.length);this.left=this.right,this.right=this.right.right}}]),e}(),qB=function(e,t,n){for(;null!==t.right&&n>0;){if(t.right.content.constructor===bF)t.right.deleted||QB(t.currentAttributes,t.right.content);else t.right.deleted||(n<t.right.length&&$z(e,Dz(t.right.id.client,t.right.id.clock+n)),t.index+=t.right.length,n-=t.right.length);t.left=t.right,t.right=t.right.right}return t},$B=function(e,t,n){var r=new Map,i=SB(t,n);if(i){var o=new XB(i.p.left,i.p,i.index,r);return qB(e,o,n-i.index)}var a=new XB(null,t._start,0,r);return qB(e,a,n)},GB=function(e,t,n,r){for(;null!==n.right&&(!0===n.right.deleted||n.right.content.constructor===bF&&YB(r.get(n.right.content.key),n.right.content.value));)n.right.deleted||r.delete(n.right.content.key),n.forward();var i=e.doc,o=i.clientID;r.forEach((function(r,a){var s=n.left,u=n.right,l=new jF(Dz(o,Wz(i.store,o)),s,s&&s.lastId,u,u&&u.id,t,null,new bF(a,r));l.integrate(e,0),n.right=l,n.forward()}))},QB=function(e,t){var n=t.key,r=t.value;null===r?e.delete(n):e.set(n,r)},JB=function(e,t){for(;null!==e.right&&(e.right.deleted||e.right.content.constructor===bF&&YB(t[e.right.content.key]||null,e.right.content.value));)e.forward()},ZB=function(e,t,n,r){var i=e.doc,o=i.clientID,a=new Map;for(var s in r){var u=r[s],l=n.currentAttributes.get(s)||null;if(!YB(l,u)){a.set(s,l);var c=n.left,d=n.right;n.right=new jF(Dz(o,Wz(i.store,o)),c,c&&c.lastId,d,d&&d.id,t,null,new bF(s,u)),n.right.integrate(e,0),n.forward()}}return a},eF=function(e,t,n,r,i){n.currentAttributes.forEach((function(e,t){void 0===i[t]&&(i[t]=null)}));var o=e.doc,a=o.clientID;JB(n,i);var s=ZB(e,t,n,i),u=r.constructor===String?new kF(r):r instanceof CB?new AF(r):new yF(r),l=n.left,c=n.right,d=n.index;t._searchMarker&&_B(t._searchMarker,n.index,u.getLength()),(c=new jF(Dz(a,Wz(o.store,a)),l,l&&l.lastId,c,c&&c.id,t,null,u)).integrate(e,0),n.right=c,n.index=d,n.forward(),GB(e,t,n,s)},tF=function(e,t,n,r,i){var o=e.doc,a=o.clientID;JB(n,i);var s=ZB(e,t,n,i);e:for(;null!==n.right&&(r>0||s.size>0&&(n.right.deleted||n.right.content.constructor===bF));){if(!n.right.deleted)if(n.right.content.constructor===bF){var u=n.right.content,l=u.key,c=u.value,d=i[l];if(void 0!==d){if(YB(d,c))s.delete(l);else{if(0===r)break e;s.set(l,c)}n.right.delete(e)}else n.currentAttributes.set(l,c)}else r<n.right.length&&$z(e,Dz(n.right.id.client,n.right.id.clock+r)),r-=n.right.length;n.forward()}if(r>0){for(var f="";r>0;r--)f+="\n";n.right=new jF(Dz(a,Wz(o.store,a)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,t,null,new kF(f)),n.right.integrate(e,0),n.forward()}GB(e,t,n,s)},nF=function(e,t,n,r,i){for(var o=t,a=LL();o&&(!o.countable||o.deleted);){if(!o.deleted&&o.content.constructor===bF){var s=o.content;a.set(s.key,s)}o=o.right}for(var u=0,l=!1;t!==o;){if(n===t&&(l=!0),!t.deleted){var c=t.content;if(c.constructor===bF){var d=c.key,f=c.value,h=r.get(d)||null;a.get(d)===c&&h!==f||(t.delete(e),u++,l||(i.get(d)||null)!==f||h===f||(null===h?i.delete(d):i.set(d,h))),l||t.deleted||QB(i,c)}}t=t.right}return u},rF=function(e,t,n){for(var r=n,i=DL(t.currentAttributes),o=t.right;n>0&&null!==t.right;){if(!1===t.right.deleted)switch(t.right.content.constructor){case AF:case yF:case kF:n<t.right.length&&$z(e,Dz(t.right.id.client,t.right.id.clock+n)),n-=t.right.length,t.right.delete(e)}t.forward()}o&&nF(e,o,t.right,i,t.currentAttributes);var a=(t.left||t.right).parent;return a._searchMarker&&_B(a._searchMarker,t.index,-r+n),t},iF=function(e){U(n,e);var t=W(n);function n(e,r,i){var o;return z(this,n),(o=t.call(this,e,r)).childListChanged=!1,o.keysChanged=new Set,i.forEach((function(e){null===e?o.childListChanged=!0:o.keysChanged.add(e)})),o}return N(n,[{key:"changes",get:function(){if(null===this._changes){var e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}},{key:"delta",get:function(){var e=this;if(null===this._delta){var t=this.target.doc,n=[];oB(t,(function(t){for(var r=new Map,i=new Map,o=e.target._start,a=null,s={},u="",l=0,c=0,d=function(){if(null!==a){var e;switch(a){case"delete":e={delete:c},c=0;break;case"insert":e={insert:u},r.size>0&&(e.attributes={},r.forEach((function(t,n){null!==t&&(e.attributes[n]=t)}))),u="";break;case"retain":if(e={retain:l},Object.keys(s).length>0)for(var t in e.attributes={},s)e.attributes[t]=s[t];l=0}n.push(e),a=null}};null!==o;){switch(o.content.constructor){case AF:case yF:e.adds(o)?e.deletes(o)||(d(),a="insert",u=o.content.getContent()[0],d()):e.deletes(o)?("delete"!==a&&(d(),a="delete"),c+=1):o.deleted||("retain"!==a&&(d(),a="retain"),l+=1);break;case kF:e.adds(o)?e.deletes(o)||("insert"!==a&&(d(),a="insert"),u+=o.content.str):e.deletes(o)?("delete"!==a&&(d(),a="delete"),c+=o.length):o.deleted||("retain"!==a&&(d(),a="retain"),l+=o.length);break;case bF:var f=o.content,h=f.key,p=f.value;if(e.adds(o)){if(!e.deletes(o)){var v=r.get(h)||null;YB(v,p)?null!==p&&o.delete(t):("retain"===a&&d(),YB(p,i.get(h)||null)?delete s[h]:s[h]=p)}}else if(e.deletes(o)){i.set(h,p);var g=r.get(h)||null;YB(g,p)||("retain"===a&&d(),s[h]=g)}else if(!o.deleted){i.set(h,p);var m=s[h];void 0!==m&&(YB(m,p)?null!==m&&o.delete(t):("retain"===a&&d(),null===p?delete s[h]:s[h]=p))}o.deleted||("insert"===a&&d(),QB(r,o.content))}o=o.right}for(d();n.length>0;){var y=n[n.length-1];if(void 0===y.retain||void 0!==y.attributes)break;n.pop()}})),this._delta=n}return this._delta}}]),n}(yB),oF=function(e){U(n,e);var t=W(n);function n(e){var r;return z(this,n),(r=t.call(this))._pending=void 0!==e?[function(){return r.insert(0,e)}]:[],r._searchMarker=[],r}return N(n,[{key:"length",get:function(){return this._length}},{key:"_integrate",value:function(e,t){Au(K(n.prototype),"_integrate",this).call(this,e,t);try{this._pending.forEach((function(e){return e()}))}catch(kM){console.error(kM)}this._pending=null}},{key:"_copy",value:function(){return new n}},{key:"clone",value:function(){var e=new n;return e.applyDelta(this.toDelta()),e}},{key:"_callObserver",value:function(e,t){var r=this;Au(K(n.prototype),"_callObserver",this).call(this,e,t);var i=new iF(this,e,t),o=e.doc;if(EB(this,e,i),!e.local){var a,s=!1,u=X(e.afterState.entries());try{for(u.s();!(a=u.n()).done;){var l=L(a.value,2),c=l[0],d=l[1],f=e.beforeState.get(c)||0;if(d!==f&&(Qz(e,o.store.clients.get(c),f,d,(function(e){e.deleted||e.content.constructor!==bF||(s=!0)})),s))break}}catch(YK){u.e(YK)}finally{u.f()}s||tz(e,e.deleteSet,(function(e){e instanceof hF||s||e.parent===r&&e.content.constructor===bF&&(s=!0)})),oB(o,(function(e){s?function(e){var t=0;oB(e.doc,(function(n){for(var r=e._start,i=e._start,o=LL(),a=DL(o);i;)!1===i.deleted&&(i.content.constructor===bF?QB(a,i.content):(t+=nF(n,r,i,o,a),o=DL(a),r=i)),i=i.right}))}(r):tz(e,e.deleteSet,(function(t){t instanceof hF||t.parent===r&&function(e,t){for(;t&&t.right&&(t.right.deleted||!t.right.countable);)t=t.right;for(var n=new Set;t&&(t.deleted||!t.countable);){if(!t.deleted&&t.content.constructor===bF){var r=t.content.key;n.has(r)?t.delete(e):n.add(r)}t=t.left}}(e,t)}))}))}}},{key:"toString",value:function(){for(var e="",t=this._start;null!==t;)!t.deleted&&t.countable&&t.content.constructor===kF&&(e+=t.content.str),t=t.right;return e}},{key:"toJSON",value:function(){return this.toString()}},{key:"applyDelta",value:function(e){var t=this,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).sanitize,r=void 0===n||n;null!==this.doc?oB(this.doc,(function(n){for(var i=new XB(null,t._start,0,new Map),o=0;o<e.length;o++){var a=e[o];if(void 0!==a.insert){var s=r||"string"!==typeof a.insert||o!==e.length-1||null!==i.right||"\n"!==a.insert.slice(-1)?a.insert:a.insert.slice(0,-1);("string"!==typeof s||s.length>0)&&eF(n,t,i,s,a.attributes||{})}else void 0!==a.retain?tF(n,t,i,a.retain,a.attributes||{}):void 0!==a.delete&&rF(n,i,a.delete)}})):this._pending.push((function(){return t.applyDelta(e)}))}},{key:"toDelta",value:function(e,t,n){var r=[],i=new Map,o=this.doc,a="",s=this._start;function u(){if(a.length>0){var e={},t=!1;i.forEach((function(n,r){t=!0,e[r]=n}));var n={insert:a};t&&(n.attributes=e),r.push(n),a=""}}var l=function(){for(var o=function(){if(Fz(s,e)||void 0!==t&&Fz(s,t))switch(s.content.constructor){case kF:var o=i.get("ychange");void 0===e||Fz(s,e)?void 0===t||Fz(s,t)?void 0!==o&&(u(),i.delete("ychange")):void 0!==o&&o.user===s.id.client&&"added"===o.type||(u(),i.set("ychange",n?n("added",s.id):{type:"added"})):void 0!==o&&o.user===s.id.client&&"removed"===o.type||(u(),i.set("ychange",n?n("removed",s.id):{type:"removed"})),a+=s.content.str;break;case AF:case yF:u();var l={insert:s.content.getContent()[0]};if(i.size>0){var c={};l.attributes=c,i.forEach((function(e,t){c[t]=e}))}r.push(l);break;case bF:Fz(s,e)&&(u(),QB(i,s.content))}s=s.right};null!==s;)o();u()};return e||t?oB(o,(function(n){e&&Uz(n,e),t&&Uz(n,t),l()}),"cleanup"):l(),r}},{key:"insert",value:function(e,t,n){var r=this;if(!(t.length<=0)){var i=this.doc;null!==i?oB(i,(function(i){var o=$B(i,r,e);n||(n={},o.currentAttributes.forEach((function(e,t){n[t]=e}))),eF(i,r,o,t,n)})):this._pending.push((function(){return r.insert(e,t,n)}))}}},{key:"insertEmbed",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.doc;null!==i?oB(i,(function(i){var o=$B(i,n,e);eF(i,n,o,t,r)})):this._pending.push((function(){return n.insertEmbed(e,t,r)}))}},{key:"delete",value:function(e,t){var n=this;if(0!==t){var r=this.doc;null!==r?oB(r,(function(r){rF(r,$B(r,n,e),t)})):this._pending.push((function(){return n.delete(e,t)}))}}},{key:"format",value:function(e,t,n){var r=this;if(0!==t){var i=this.doc;null!==i?oB(i,(function(i){var o=$B(i,r,e);null!==o.right&&tF(i,r,o,t,n)})):this._pending.push((function(){return r.format(e,t,n)}))}}},{key:"removeAttribute",value:function(e){var t=this;null!==this.doc?oB(this.doc,(function(n){DB(n,t,e)})):this._pending.push((function(){return t.removeAttribute(e)}))}},{key:"setAttribute",value:function(e,t){var n=this;null!==this.doc?oB(this.doc,(function(r){NB(r,n,e,t)})):this._pending.push((function(){return n.setAttribute(e,t)}))}},{key:"getAttribute",value:function(e){return zB(this,e)}},{key:"getAttributes",value:function(){return BB(this)}},{key:"_write",value:function(e){e.writeTypeRef(CF)}}]),n}(CB),aF=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0};z(this,t),this._filter=n,this._root=e,this._currentNode=e._start,this._firstCall=!0}return N(t,[{key:Symbol.iterator,value:function(){return this}},{key:"next",value:function(){var e=this._currentNode,t=e&&e.content&&e.content.type;if(null!==e&&(!this._firstCall||e.deleted||!this._filter(t)))do{if(t=e.content.type,e.deleted||t.constructor!==uF&&t.constructor!==sF||null===t._start)for(;null!==e;){if(null!==e.right){e=e.right;break}e=e.parent===this._root?null:e.parent._item}else e=t._start}while(null!==e&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,null===e?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}]),t}(),sF=function(e){U(n,e);var t=W(n);function n(){var e;return z(this,n),(e=t.call(this))._prelimContent=[],e}return N(n,[{key:"firstChild",get:function(){var e=this._first;return e?e.content.getContent()[0]:null}},{key:"_integrate",value:function(e,t){Au(K(n.prototype),"_integrate",this).call(this,e,t),this.insert(0,this._prelimContent),this._prelimContent=null}},{key:"_copy",value:function(){return new n}},{key:"clone",value:function(){var e=new n;return e.insert(0,this.toArray().map((function(e){return e instanceof CB?e.clone():e}))),e}},{key:"length",get:function(){return null===this._prelimContent?this._length:this._prelimContent.length}},{key:"createTreeWalker",value:function(e){return new aF(this,e)}},{key:"querySelector",value:function(e){e=e.toUpperCase();var t=new aF(this,(function(t){return t.nodeName&&t.nodeName.toUpperCase()===e})).next();return t.done?null:t.value}},{key:"querySelectorAll",value:function(e){return e=e.toUpperCase(),tD(new aF(this,(function(t){return t.nodeName&&t.nodeName.toUpperCase()===e})))}},{key:"_callObserver",value:function(e,t){EB(this,e,new lF(this,t,e))}},{key:"toString",value:function(){return MB(this,(function(e){return e.toString()})).join("")}},{key:"toJSON",value:function(){return this.toString()}},{key:"toDOM",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=e.createDocumentFragment();return void 0!==n&&n._createAssociation(r,this),TB(this,(function(i){r.insertBefore(i.toDOM(e,t,n),null)})),r}},{key:"insert",value:function(e,t){var n,r=this;null!==this.doc?oB(this.doc,(function(n){RB(n,r,e,t)})):(n=this._prelimContent).splice.apply(n,[e,0].concat(u(t)))}},{key:"insertAfter",value:function(e,t){var n=this;if(null!==this.doc)oB(this.doc,(function(r){var i=e&&e instanceof CB?e._item:e;OB(r,n,i,t)}));else{var r=this._prelimContent,i=null===e?0:r.findIndex((function(t){return t===e}))+1;if(0===i&&null!==e)throw aN("Reference item not found");r.splice.apply(r,[i,0].concat(u(t)))}}},{key:"delete",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;null!==this.doc?oB(this.doc,(function(r){LB(r,t,e,n)})):this._prelimContent.splice(e,n)}},{key:"toArray",value:function(){return IB(this)}},{key:"push",value:function(e){this.insert(this.length,e)}},{key:"unshift",value:function(e){this.insert(0,e)}},{key:"get",value:function(e){return AB(this,e)}},{key:"slice",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;return PB(this,e,t)}},{key:"forEach",value:function(e){TB(this,e)}},{key:"_write",value:function(e){e.writeTypeRef(IF)}}]),n}(CB),uF=function(e){U(n,e);var t=W(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"UNDEFINED";return z(this,n),(e=t.call(this)).nodeName=r,e._prelimAttrs=new Map,e}return N(n,[{key:"nextSibling",get:function(){var e=this._item?this._item.next:null;return e?e.content.type:null}},{key:"prevSibling",get:function(){var e=this._item?this._item.prev:null;return e?e.content.type:null}},{key:"_integrate",value:function(e,t){var r=this;Au(K(n.prototype),"_integrate",this).call(this,e,t),this._prelimAttrs.forEach((function(e,t){r.setAttribute(t,e)})),this._prelimAttrs=null}},{key:"_copy",value:function(){return new n(this.nodeName)}},{key:"clone",value:function(){var e=new n(this.nodeName),t=this.getAttributes();for(var r in t)e.setAttribute(r,t[r]);return e.insert(0,this.toArray().map((function(e){return e instanceof CB?e.clone():e}))),e}},{key:"toString",value:function(){var e=this.getAttributes(),t=[],r=[];for(var i in e)r.push(i);r.sort();for(var o=r.length,a=0;a<o;a++){var s=r[a];t.push(s+'="'+e[s]+'"')}var u=this.nodeName.toLocaleLowerCase(),l=t.length>0?" "+t.join(" "):"";return"<".concat(u).concat(l,">").concat(Au(K(n.prototype),"toString",this).call(this),"</").concat(u,">")}},{key:"removeAttribute",value:function(e){var t=this;null!==this.doc?oB(this.doc,(function(n){DB(n,t,e)})):this._prelimAttrs.delete(e)}},{key:"setAttribute",value:function(e,t){var n=this;null!==this.doc?oB(this.doc,(function(r){NB(r,n,e,t)})):this._prelimAttrs.set(e,t)}},{key:"getAttribute",value:function(e){return zB(this,e)}},{key:"hasAttribute",value:function(e){return FB(this,e)}},{key:"getAttributes",value:function(){return BB(this)}},{key:"toDOM",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=e.createElement(this.nodeName),i=this.getAttributes();for(var o in i)r.setAttribute(o,i[o]);return TB(this,(function(i){r.appendChild(i.toDOM(e,t,n))})),void 0!==n&&n._createAssociation(r,this),r}},{key:"_write",value:function(e){e.writeTypeRef(PF),e.writeKey(this.nodeName)}}]),n}(sF),lF=function(e){U(n,e);var t=W(n);function n(e,r,i){var o;return z(this,n),(o=t.call(this,e,i)).childListChanged=!1,o.attributesChanged=new Set,r.forEach((function(e){null===e?o.childListChanged=!0:o.attributesChanged.add(e)})),o}return N(n)}(yB),cF=function(e){U(n,e);var t=W(n);function n(e){var r;return z(this,n),(r=t.call(this)).hookName=e,r}return N(n,[{key:"_copy",value:function(){return new n(this.hookName)}},{key:"clone",value:function(){var e=new n(this.hookName);return this.forEach((function(t,n){e.set(n,t)})),e}},{key:"toDOM",value:function(){arguments.length>0&&void 0!==arguments[0]||document;var e,t=arguments.length>2?arguments[2]:void 0,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})[this.hookName];return(e=void 0!==n?n.createDom(this):document.createElement(this.hookName)).setAttribute("data-yjs-hook",this.hookName),void 0!==t&&t._createAssociation(e,this),e}},{key:"_write",value:function(e){e.writeTypeRef(TF),e.writeKey(this.hookName)}}]),n}(HB),dF=function(e){U(n,e);var t=W(n);function n(){return z(this,n),t.apply(this,arguments)}return N(n,[{key:"nextSibling",get:function(){var e=this._item?this._item.next:null;return e?e.content.type:null}},{key:"prevSibling",get:function(){var e=this._item?this._item.prev:null;return e?e.content.type:null}},{key:"_copy",value:function(){return new n}},{key:"clone",value:function(){var e=new n;return e.applyDelta(this.toDelta()),e}},{key:"toDOM",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=arguments.length>2?arguments[2]:void 0,n=e.createTextNode(this.toString());return void 0!==t&&t._createAssociation(n,this),n}},{key:"toString",value:function(){return this.toDelta().map((function(e){var t=[];for(var n in e.attributes){var r=[];for(var i in e.attributes[n])r.push({key:i,value:e.attributes[n][i]});r.sort((function(e,t){return e.key<t.key?-1:1})),t.push({nodeName:n,attrs:r})}t.sort((function(e,t){return e.nodeName<t.nodeName?-1:1}));for(var o="",a=0;a<t.length;a++){var s=t[a];o+="<".concat(s.nodeName);for(var u=0;u<s.attrs.length;u++){var l=s.attrs[u];o+=" ".concat(l.key,'="').concat(l.value,'"')}o+=">"}o+=e.insert;for(var c=t.length-1;c>=0;c--)o+="</".concat(t[c].nodeName,">");return o})).join("")}},{key:"toJSON",value:function(){return this.toString()}},{key:"_write",value:function(e){e.writeTypeRef(MF)}}]),n}(oF),fF=function(){function e(t,n){z(this,e),this.id=t,this.length=n}return N(e,[{key:"deleted",get:function(){throw sN()}},{key:"mergeWith",value:function(e){return!1}},{key:"write",value:function(e,t,n){throw sN()}},{key:"integrate",value:function(e,t){throw sN()}}]),e}(),hF=function(e){U(n,e);var t=W(n);function n(){return z(this,n),t.apply(this,arguments)}return N(n,[{key:"deleted",get:function(){return!0}},{key:"delete",value:function(){}},{key:"mergeWith",value:function(e){return this.constructor===e.constructor&&(this.length+=e.length,!0)}},{key:"integrate",value:function(e,t){t>0&&(this.id.clock+=t,this.length-=t),Hz(e.doc.store,this)}},{key:"write",value:function(e,t){e.writeInfo(0),e.writeLen(this.length-t)}},{key:"getMissing",value:function(e,t){return null}}]),n}(fF),pF=function(){function e(t){z(this,e),this.content=t}return N(e,[{key:"getLength",value:function(){return 1}},{key:"getContent",value:function(){return[this.content]}},{key:"isCountable",value:function(){return!0}},{key:"copy",value:function(){return new e(this.content)}},{key:"splice",value:function(e){throw sN()}},{key:"mergeWith",value:function(e){return!1}},{key:"integrate",value:function(e,t){}},{key:"delete",value:function(e){}},{key:"gc",value:function(e){}},{key:"write",value:function(e,t){e.writeBuf(this.content)}},{key:"getRef",value:function(){return 3}}]),e}(),vF=function(){function e(t){z(this,e),this.len=t}return N(e,[{key:"getLength",value:function(){return this.len}},{key:"getContent",value:function(){return[]}},{key:"isCountable",value:function(){return!1}},{key:"copy",value:function(){return new e(this.len)}},{key:"splice",value:function(t){var n=new e(this.len-t);return this.len=t,n}},{key:"mergeWith",value:function(e){return this.len+=e.len,!0}},{key:"integrate",value:function(e,t){oz(e.deleteSet,t.id.client,t.id.clock,this.len),t.markDeleted()}},{key:"delete",value:function(e){}},{key:"gc",value:function(e){}},{key:"write",value:function(e,t){e.writeLen(this.len-t)}},{key:"getRef",value:function(){return 1}}]),e}(),gF=function(e,t){return new fz(R(R({guid:e},t),{},{shouldLoad:t.shouldLoad||t.autoLoad||!1}))},mF=function(){function e(t){z(this,e),t._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=t;var n={};this.opts=n,t.gc||(n.gc=!1),t.autoLoad&&(n.autoLoad=!0),null!==t.meta&&(n.meta=t.meta)}return N(e,[{key:"getLength",value:function(){return 1}},{key:"getContent",value:function(){return[this.doc]}},{key:"isCountable",value:function(){return!0}},{key:"copy",value:function(){return new e(gF(this.doc.guid,this.opts))}},{key:"splice",value:function(e){throw sN()}},{key:"mergeWith",value:function(e){return!1}},{key:"integrate",value:function(e,t){this.doc._item=t,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}},{key:"delete",value:function(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}},{key:"gc",value:function(e){}},{key:"write",value:function(e,t){e.writeString(this.doc.guid),e.writeAny(this.opts)}},{key:"getRef",value:function(){return 9}}]),e}(),yF=function(){function e(t){z(this,e),this.embed=t}return N(e,[{key:"getLength",value:function(){return 1}},{key:"getContent",value:function(){return[this.embed]}},{key:"isCountable",value:function(){return!0}},{key:"copy",value:function(){return new e(this.embed)}},{key:"splice",value:function(e){throw sN()}},{key:"mergeWith",value:function(e){return!1}},{key:"integrate",value:function(e,t){}},{key:"delete",value:function(e){}},{key:"gc",value:function(e){}},{key:"write",value:function(e,t){e.writeJSON(this.embed)}},{key:"getRef",value:function(){return 5}}]),e}(),bF=function(){function e(t,n){z(this,e),this.key=t,this.value=n}return N(e,[{key:"getLength",value:function(){return 1}},{key:"getContent",value:function(){return[]}},{key:"isCountable",value:function(){return!1}},{key:"copy",value:function(){return new e(this.key,this.value)}},{key:"splice",value:function(e){throw sN()}},{key:"mergeWith",value:function(e){return!1}},{key:"integrate",value:function(e,t){t.parent._searchMarker=null}},{key:"delete",value:function(e){}},{key:"gc",value:function(e){}},{key:"write",value:function(e,t){e.writeKey(this.key),e.writeJSON(this.value)}},{key:"getRef",value:function(){return 6}}]),e}(),wF=function(){function e(t){z(this,e),this.arr=t}return N(e,[{key:"getLength",value:function(){return this.arr.length}},{key:"getContent",value:function(){return this.arr}},{key:"isCountable",value:function(){return!0}},{key:"copy",value:function(){return new e(this.arr)}},{key:"splice",value:function(t){var n=new e(this.arr.slice(t));return this.arr=this.arr.slice(0,t),n}},{key:"mergeWith",value:function(e){return this.arr=this.arr.concat(e.arr),!0}},{key:"integrate",value:function(e,t){}},{key:"delete",value:function(e){}},{key:"gc",value:function(e){}},{key:"write",value:function(e,t){var n=this.arr.length;e.writeLen(n-t);for(var r=t;r<n;r++){var i=this.arr[r];e.writeString(void 0===i?"undefined":JSON.stringify(i))}}},{key:"getRef",value:function(){return 2}}]),e}(),xF=function(){function e(t){z(this,e),this.arr=t}return N(e,[{key:"getLength",value:function(){return this.arr.length}},{key:"getContent",value:function(){return this.arr}},{key:"isCountable",value:function(){return!0}},{key:"copy",value:function(){return new e(this.arr)}},{key:"splice",value:function(t){var n=new e(this.arr.slice(t));return this.arr=this.arr.slice(0,t),n}},{key:"mergeWith",value:function(e){return this.arr=this.arr.concat(e.arr),!0}},{key:"integrate",value:function(e,t){}},{key:"delete",value:function(e){}},{key:"gc",value:function(e){}},{key:"write",value:function(e,t){var n=this.arr.length;e.writeLen(n-t);for(var r=t;r<n;r++){var i=this.arr[r];e.writeAny(i)}}},{key:"getRef",value:function(){return 8}}]),e}(),kF=function(){function e(t){z(this,e),this.str=t}return N(e,[{key:"getLength",value:function(){return this.str.length}},{key:"getContent",value:function(){return this.str.split("")}},{key:"isCountable",value:function(){return!0}},{key:"copy",value:function(){return new e(this.str)}},{key:"splice",value:function(t){var n=new e(this.str.slice(t));this.str=this.str.slice(0,t);var r=this.str.charCodeAt(t-1);return r>=55296&&r<=56319&&(this.str=this.str.slice(0,t-1)+"\ufffd",n.str="\ufffd"+n.str.slice(1)),n}},{key:"mergeWith",value:function(e){return this.str+=e.str,!0}},{key:"integrate",value:function(e,t){}},{key:"delete",value:function(e){}},{key:"gc",value:function(e){}},{key:"write",value:function(e,t){e.writeString(0===t?this.str:this.str.slice(t))}},{key:"getRef",value:function(){return 4}}]),e}(),SF=[function(e){return new VB},function(e){return new HB},function(e){return new oF},function(e){return new uF(e.readKey())},function(e){return new sF},function(e){return new cF(e.readKey())},function(e){return new dF}],_F=0,EF=1,CF=2,PF=3,IF=4,TF=5,MF=6,AF=function(){function e(t){z(this,e),this.type=t}return N(e,[{key:"getLength",value:function(){return 1}},{key:"getContent",value:function(){return[this.type]}},{key:"isCountable",value:function(){return!0}},{key:"copy",value:function(){return new e(this.type._copy())}},{key:"splice",value:function(e){throw sN()}},{key:"mergeWith",value:function(e){return!1}},{key:"integrate",value:function(e,t){this.type._integrate(e.doc,t)}},{key:"delete",value:function(e){for(var t=this.type._start;null!==t;)t.deleted?e._mergeStructs.push(t):t.delete(e),t=t.right;this.type._map.forEach((function(t){t.deleted?e._mergeStructs.push(t):t.delete(e)})),e.changed.delete(this.type)}},{key:"gc",value:function(e){for(var t=this.type._start;null!==t;)t.gc(e,!0),t=t.right;this.type._start=null,this.type._map.forEach((function(t){for(;null!==t;)t.gc(e,!0),t=t.left})),this.type._map=new Map}},{key:"write",value:function(e,t){this.type._write(e)}},{key:"getRef",value:function(){return 7}}]),e}(),OF=function(e,t,n){var r=t.id,i=r.client,o=r.clock,a=new jF(Dz(i,o+n),t,Dz(i,o+n-1),t.right,t.rightOrigin,t.parent,t.parentSub,t.content.splice(n));return t.deleted&&a.markDeleted(),t.keep&&(a.keep=!0),null!==t.redone&&(a.redone=Dz(t.redone.client,t.redone.clock+n)),t.right=a,null!==a.right&&(a.right.left=a),e._mergeStructs.push(a),null!==a.parentSub&&null===a.right&&a.parent._map.set(a.parentSub,a),t.length=n,a},jF=function(e){U(n,e);var t=W(n);function n(e,r,i,o,a,s,u,l){var c;return z(this,n),(c=t.call(this,e,l.getLength())).origin=i,c.left=r,c.right=o,c.rightOrigin=a,c.parent=s,c.parentSub=u,c.redone=null,c.content=l,c.info=c.content.isCountable()?2:0,c}return N(n,[{key:"marker",get:function(){return(8&this.info)>0},set:function(e){(8&this.info)>0!==e&&(this.info^=8)}},{key:"keep",get:function(){return(1&this.info)>0},set:function(e){this.keep!==e&&(this.info^=1)}},{key:"countable",get:function(){return(2&this.info)>0}},{key:"deleted",get:function(){return(4&this.info)>0},set:function(e){this.deleted!==e&&(this.info^=4)}},{key:"markDeleted",value:function(){this.info|=4}},{key:"getMissing",value:function(e,t){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=Wz(t,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=Wz(t,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===Rz&&this.id.client!==this.parent.client&&this.parent.clock>=Wz(t,this.parent.client))return this.parent.client;if(this.origin&&(this.left=Gz(e,t,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=$z(e,this.rightOrigin),this.rightOrigin=this.right.id),(this.left&&this.left.constructor===hF||this.right&&this.right.constructor===hF)&&(this.parent=null),this.parent){if(this.parent.constructor===Rz){var r=Xz(t,this.parent);r.constructor===hF?this.parent=null:this.parent=r.content.type}}else this.left&&this.left.constructor===n&&(this.parent=this.left.parent,this.parentSub=this.left.parentSub),this.right&&this.right.constructor===n&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);return null}},{key:"integrate",value:function(e,t){if(t>0&&(this.id.clock+=t,this.left=Gz(e,e.doc.store,Dz(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(t),this.length-=t),this.parent){if(!this.left&&(!this.right||null!==this.right.left)||this.left&&this.left.right!==this.right){var n,r=this.left;if(null!==r)n=r.right;else if(null!==this.parentSub)for(n=this.parent._map.get(this.parentSub)||null;null!==n&&null!==n.left;)n=n.left;else n=this.parent._start;for(var i=new Set,o=new Set;null!==n&&n!==this.right;){if(o.add(n),i.add(n),Lz(this.origin,n.origin)){if(n.id.client<this.id.client)r=n,i.clear();else if(Lz(this.rightOrigin,n.rightOrigin))break}else{if(null===n.origin||!o.has(Xz(e.doc.store,n.origin)))break;i.has(Xz(e.doc.store,n.origin))||(r=n,i.clear())}n=n.right}this.left=r}if(null!==this.left){var a=this.left.right;this.right=a,this.left.right=this}else{var s;if(null!==this.parentSub)for(s=this.parent._map.get(this.parentSub)||null;null!==s&&null!==s.left;)s=s.left;else s=this.parent._start,this.parent._start=this;this.right=s}null!==this.right?this.right.left=this:null!==this.parentSub&&(this.parent._map.set(this.parentSub,this),null!==this.left&&this.left.delete(e)),null===this.parentSub&&this.countable&&!this.deleted&&(this.parent._length+=this.length),Hz(e.doc.store,this),this.content.integrate(e,this),eB(e,this.parent,this.parentSub),(null!==this.parent._item&&this.parent._item.deleted||null!==this.parentSub&&null!==this.right)&&this.delete(e)}else new hF(this.id,this.length).integrate(e,0)}},{key:"next",get:function(){for(var e=this.right;null!==e&&e.deleted;)e=e.right;return e}},{key:"prev",get:function(){for(var e=this.left;null!==e&&e.deleted;)e=e.left;return e}},{key:"lastId",get:function(){return 1===this.length?this.id:Dz(this.id.client,this.id.clock+this.length-1)}},{key:"mergeWith",value:function(e){var t=this;if(this.constructor===e.constructor&&Lz(e.origin,this.lastId)&&this.right===e&&Lz(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&null===this.redone&&null===e.redone&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){var n=this.parent._searchMarker;return n&&n.forEach((function(n){n.p===e&&(n.p=t,!t.deleted&&t.countable&&(n.index-=t.length))})),e.keep&&(this.keep=!0),this.right=e.right,null!==this.right&&(this.right.left=this),this.length+=e.length,!0}return!1}},{key:"delete",value:function(e){if(!this.deleted){var t=this.parent;this.countable&&null===this.parentSub&&(t._length-=this.length),this.markDeleted(),oz(e.deleteSet,this.id.client,this.id.clock,this.length),eB(e,t,this.parentSub),this.content.delete(e)}}},{key:"gc",value:function(e,t){if(!this.deleted)throw uN();this.content.gc(e),t?function(e,t,n){var r=e.clients.get(t.id.client);r[Yz(r,t.id.clock)]=n}(e,this,new hF(this.id,this.length)):this.content=new vF(this.length)}},{key:"write",value:function(e,t){var n=t>0?Dz(this.id.client,this.id.clock+t-1):this.origin,r=this.rightOrigin,i=this.parentSub,o=31&this.content.getRef()|(null===n?0:jD)|(null===r?0:OD)|(null===i?0:32);if(e.writeInfo(o),null!==n&&e.writeLeftID(n),null!==r&&e.writeRightID(r),null===n&&null===r){var a=this.parent;if(void 0!==a._item){var s=a._item;if(null===s){var u=Nz(a);e.writeParentInfo(!0),e.writeString(u)}else e.writeParentInfo(!1),e.writeLeftID(s.id)}else a.constructor===String?(e.writeParentInfo(!0),e.writeString(a)):a.constructor===Rz?(e.writeParentInfo(!1),e.writeLeftID(a)):uN();null!==i&&e.writeString(i)}this.content.write(e,t)}}]),n}(fF),RF=function(e,t){return LF[31&t](e)},LF=[function(){uN()},function(e){return new vF(e.readLen())},function(e){for(var t=e.readLen(),n=[],r=0;r<t;r++){var i=e.readString();"undefined"===i?n.push(void 0):n.push(JSON.parse(i))}return new wF(n)},function(e){return new pF(e.readBuf())},function(e){return new kF(e.readString())},function(e){return new yF(e.readJSON())},function(e){return new bF(e.readKey(),e.readJSON())},function(e){return new AF(SF[e.readTypeRef()](e))},function(e){for(var t=e.readLen(),n=[],r=0;r<t;r++)n.push(e.readAny());return new xF(n)},function(e){return new mF(gF(e.readString(),e.readAny()))},function(){uN()}],DF=function(e){U(n,e);var t=W(n);function n(){return z(this,n),t.apply(this,arguments)}return N(n,[{key:"deleted",get:function(){return!0}},{key:"delete",value:function(){}},{key:"mergeWith",value:function(e){return this.constructor===e.constructor&&(this.length+=e.length,!0)}},{key:"integrate",value:function(e,t){uN()}},{key:"write",value:function(e,t){e.writeInfo(10),WD(e.restEncoder,this.length-t)}},{key:"getMissing",value:function(e,t){return null}}]),n}(fF),NF="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{},zF="__ $YJS$ __";!0===NF[zF]&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438"),NF[zF]=!0;var BF=function(e,t){WD(e,0);var n=function(e){return Iz(e,new mz)}(t);GD(e,n)},FF=function(e,t,n){WD(e,1),GD(e,function(e,t){return _z(e,t,new yz)}(t,n))},UF=function(e,t,n){try{!function(e,t,n){Sz(e,t,n,pz)}(t,vN(e),n)}catch(r){console.error("Caught error while handling a Yjs update",r)}},KF=UF,VF=function(e,t,n,r){var i=mN(e);switch(i){case 0:!function(e,t,n){FF(t,n,vN(e))}(e,t,n);break;case 1:UF(e,n,r);break;case 2:KF(e,n,r);break;default:throw new Error("Unknown message type")}return i},WF=3e4,HF=function(e){U(n,e);var t=W(n);function n(e){var r;return z(this,n),(r=t.call(this)).doc=e,r.clientID=e.clientID,r.states=new Map,r.meta=new Map,r._checkInterval=setInterval((function(){var e=ED();null!==r.getLocalState()&&15e3<=e-r.meta.get(r.clientID).lastUpdated&&r.setLocalState(r.getLocalState());var t=[];r.meta.forEach((function(n,i){i!==r.clientID&&WF<=e-n.lastUpdated&&r.states.has(i)&&t.push(i)})),t.length>0&&YF(B(r),t,"timeout")}),CD(3e3)),e.on("destroy",(function(){r.destroy()})),r.setLocalState({}),r}return N(n,[{key:"destroy",value:function(){this.emit("destroy",[this]),this.setLocalState(null),Au(K(n.prototype),"destroy",this).call(this),clearInterval(this._checkInterval)}},{key:"getLocalState",value:function(){return this.states.get(this.clientID)||null}},{key:"setLocalState",value:function(e){var t=this.clientID,n=this.meta.get(t),r=void 0===n?0:n.clock+1,i=this.states.get(t);null===e?this.states.delete(t):this.states.set(t,e),this.meta.set(t,{clock:r,lastUpdated:ED()});var o=[],a=[],s=[],u=[];null===e?u.push(t):null==i?null!=e&&o.push(t):(a.push(t),sD(i,e)||s.push(t)),(o.length>0||s.length>0||u.length>0)&&this.emit("change",[{added:o,updated:s,removed:u},"local"]),this.emit("update",[{added:o,updated:a,removed:u},"local"])}},{key:"setLocalStateField",value:function(e,t){var n=this.getLocalState();null!==n&&this.setLocalState(R(R({},n),{},O({},e,t)))}},{key:"getStates",value:function(){return this.states}}]),n}(PN),YF=function(e,t,n){for(var r=[],i=0;i<t.length;i++){var o=t[i];if(e.states.has(o)){if(e.states.delete(o),o===e.clientID){var a=e.meta.get(o);e.meta.set(o,{clock:a.clock+1,lastUpdated:ED()})}r.push(o)}}r.length>0&&(e.emit("change",[{added:[],updated:[],removed:r},n]),e.emit("update",[{added:[],updated:[],removed:r},n]))},XF=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.states,r=t.length,i=BD();WD(i,r);for(var o=0;o<r;o++){var a=t[o],s=n.get(a)||null,u=e.meta.get(a).clock;WD(i,a),WD(i,u),qD(i,JSON.stringify(s))}return UD(i)};var qF=[];qF[0]=function(e,t,n,r,i){WD(e,0);var o=VF(t,e,n.doc,n);r&&1===o&&!n.synced&&(n.synced=!0)},qF[3]=function(e,t,n,r,i){WD(e,1),GD(e,XF(n.awareness,Array.from(n.awareness.getStates().keys())))},qF[1]=function(e,t,n,r,i){!function(e,t,n){for(var r=fN(t),i=ED(),o=[],a=[],s=[],u=[],l=mN(r),c=0;c<l;c++){var d=mN(r),f=mN(r),h=JSON.parse(bN(r)),p=e.meta.get(d),v=e.states.get(d),g=void 0===p?0:p.clock;(g<f||g===f&&null===h&&e.states.has(d))&&(null===h?d===e.clientID&&null!=e.getLocalState()?f++:e.states.delete(d):e.states.set(d,h),e.meta.set(d,{clock:f,lastUpdated:i}),void 0===p&&null!==h?o.push(d):void 0!==p&&null===h?u.push(d):null!==h&&(sD(h,v)||s.push(d),a.push(d)))}(o.length>0||s.length>0||u.length>0)&&e.emit("change",[{added:o,updated:s,removed:u},n]),(o.length>0||a.length>0||u.length>0)&&e.emit("update",[{added:o,updated:a,removed:u},n])}(n.awareness,vN(t),n)},qF[2]=function(e,t,n,r,i){!function(e,t,n){0===mN(e)&&n(t,bN(e))}(t,n.doc,(function(e,t){return function(e,t){console.warn("Permission denied to access ".concat(e.url,".\n").concat(t))}(n,t)}))};function $F(e,t,n){var r=fN(t),i=BD(),o=mN(r),a=e.messageHandlers[o];return a?a(i,r,e,n,o):console.error("Unable to compute message"),i}function GF(e){if(e.shouldConnect&&null===e.ws){var t=new e._WS(e.url);t.binaryType="arraybuffer",e.ws=t,e.wsconnecting=!0,e.wsconnected=!1,e.synced=!1,t.onmessage=function(n){if("ping"!==n.data){e.wsLastMessageReceived=ED();var r=$F(e,new Uint8Array(n.data),!0);FD(r)>1&&t.send(UD(r))}else t.send("pong")},t.onerror=function(t){e.emit("connection-error",[t,e])},t.onclose=function(t){e.emit("connection-close",[t,e]),e.ws=null,e.wsconnecting=!1,e.wsconnected?(e.wsconnected=!1,e.synced=!1,YF(e.awareness,Array.from(e.awareness.getStates().keys()).filter((function(t){return t!==e.doc.clientID})),e),e.emit("status",[{status:"disconnected"}])):e.wsUnsuccessfulReconnects++,setTimeout(GF,ID(100*MD(2,e.wsUnsuccessfulReconnects),e.maxBackoffTime),e)},t.onopen=function(){e.wsLastMessageReceived=ED(),e.wsconnecting=!1,e.wsconnected=!0,e.wsUnsuccessfulReconnects=0,e.emit("status",[{status:"connected"}]);var n=BD();if(WD(n,0),BF(n,e.doc),t.send(UD(n)),null!==e.awareness.getLocalState()){var r=BD();WD(r,1),GD(r,XF(e.awareness,[e.doc.clientID])),t.send(UD(r))}},e.emit("status",[{status:"connecting"}])}}function QF(e,t){var n=e.ws;e.wsconnected&&n&&n.readyState===n.OPEN&&n.send(t),e.bcconnected&&_D(e.bcChannel,t,e)}var JF=function(e){U(n,e);var t=W(n);function n(e,r,i){var o,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=a.connect,u=void 0===s||s,l=a.awareness,c=void 0===l?new HF(i):l,d=a.params,f=void 0===d?{}:d,h=a.WebSocketPolyfill,p=void 0===h?WebSocket:h,v=a.resyncInterval,g=void 0===v?-1:v,m=a.maxBackoffTime,y=void 0===m?2500:m,b=a.disableBc,w=void 0!==b&&b;for(z(this,n),O(B(o=t.call(this)),"maxBackoffTime",void 0),O(B(o),"bcChannel",void 0),O(B(o),"url",void 0),O(B(o),"roomname",void 0),O(B(o),"doc",void 0),O(B(o),"_WS",void 0),O(B(o),"awareness",void 0),O(B(o),"wsconnected",void 0),O(B(o),"wsconnecting",void 0),O(B(o),"bcconnected",void 0),O(B(o),"disableBc",void 0),O(B(o),"wsUnsuccessfulReconnects",void 0),O(B(o),"messageHandlers",void 0),O(B(o),"_synced",void 0),O(B(o),"ws",void 0),O(B(o),"wsLastMessageReceived",void 0),O(B(o),"shouldConnect",void 0),O(B(o),"_resyncInterval",void 0),O(B(o),"_bcSubscriber",void 0),O(B(o),"_updateHandler",void 0),O(B(o),"_awarenessUpdateHandler",void 0),O(B(o),"_unloadHandler",void 0),O(B(o),"_checkInterval",void 0);"/"===e[e.length-1];)e=e.slice(0,e.length-1);var x=function(e){return function(e,t){var n=[];for(var r in e)n.push(t(e[r],r));return n}(e,(function(e,t){return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e))})).join("&")}(f);return o.maxBackoffTime=y,o.bcChannel=e+"/"+r,o.url=e+"/"+r+(0===x.length?"":"?"+x),o.roomname=r,o.doc=i,o._WS=p,o.awareness=c,o.wsconnected=!1,o.wsconnecting=!1,o.bcconnected=!1,o.disableBc=w,o.wsUnsuccessfulReconnects=0,o.messageHandlers=qF.slice(),o._synced=!1,o.ws=null,o.wsLastMessageReceived=0,o.shouldConnect=u,o._resyncInterval=0,g>0&&(o._resyncInterval=setInterval((function(){if(o.ws&&o.ws.readyState===WebSocket.OPEN){var e=BD();WD(e,0),BF(e,i),o.ws.send(UD(e))}}),g)),o._bcSubscriber=function(e,t){if(t!==B(o)){var n=$F(B(o),new Uint8Array(e),!1);FD(n)>1&&_D(o.bcChannel,UD(n),B(o))}},o._updateHandler=function(e,t){if(t!==B(o)){var n=BD();WD(n,0),function(e,t){WD(e,2),GD(e,t)}(n,e),QF(B(o),UD(n))}},o.doc.on("update",o._updateHandler),o._awarenessUpdateHandler=function(e,t){var n=e.added,r=e.updated,i=e.removed,a=n.concat(r).concat(i),s=BD();WD(s,1),GD(s,XF(c,a)),QF(B(o),UD(s))},o._unloadHandler=function(){YF(o.awareness,[i.clientID],"window unload")},"undefined"!==typeof window?window.addEventListener("unload",o._unloadHandler):"undefined"!==typeof process&&process.on("exit",o._unloadHandler),c.on("update",o._awarenessUpdateHandler),o._checkInterval=setInterval((function(){o.wsconnected&&3e4<ED()-o.wsLastMessageReceived&&(!function(e,t){if(!e)throw new Error(t)}(null!==o.ws,"ws must not be null"),o.ws.close())}),3e3),u&&o.connect(),o}return N(n,[{key:"synced",get:function(){return this._synced},set:function(e){this._synced!==e&&(this._synced=e,this.emit("synced",[e]),this.emit("sync",[e]))}},{key:"destroy",value:function(){0!==this._resyncInterval&&clearInterval(this._resyncInterval),clearInterval(this._checkInterval),this.disconnect(),"undefined"!==typeof window?window.removeEventListener("unload",this._unloadHandler):"undefined"!==typeof process&&process.off("exit",this._unloadHandler),this.awareness.off("update",this._awarenessUpdateHandler),this.doc.off("update",this._updateHandler),Au(K(n.prototype),"destroy",this).call(this)}},{key:"connectBc",value:function(){if(!this.disableBc){this.bcconnected||(!function(e,t){SD(e).subs.add(t)}(this.bcChannel,this._bcSubscriber),this.bcconnected=!0);var e=BD();WD(e,0),BF(e,this.doc),_D(this.bcChannel,UD(e),this);var t=BD();WD(t,0),FF(t,this.doc),_D(this.bcChannel,UD(t),this);var n=BD();WD(n,3),_D(this.bcChannel,UD(n),this);var r=BD();WD(r,1),GD(r,XF(this.awareness,[this.doc.clientID])),_D(this.bcChannel,UD(r),this)}}},{key:"disconnectBc",value:function(){var e=BD();WD(e,1),GD(e,XF(this.awareness,[this.doc.clientID],new Map)),QF(this,UD(e)),this.bcconnected&&(!function(e,t){var n=SD(e),r=n.subs.delete(t);r&&0===n.subs.size&&(n.bc.close(),wD.delete(e))}(this.bcChannel,this._bcSubscriber),this.bcconnected=!1)}},{key:"disconnect",value:function(){this.shouldConnect=!1,this.disconnectBc(),null!==this.ws&&this.ws.close()}},{key:"connect",value:function(){this.shouldConnect=!0,this.wsconnected||null!==this.ws||(GF(this),this.connectBc())}}]),n}(PN);function ZF(){if(crypto.randomUUID)return crypto.randomUUID();var e=(new Date).getTime(),t="undefined"!==typeof performance&&performance.now&&1e3*performance.now()||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(n){var r=16*Math.random();return e>0?(r=(e+r)%16|0,e=Math.floor(e/16)):(r=(t+r)%16|0,t=Math.floor(t/16)),("x"===n?r:3&r|8).toString(16)}))}var eU=function(e){U(n,e);var t=W(n);function n(e,r,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};z(this,n);var a="".concat(e.startsWith("localhost:")||e.startsWith("127.0.0.1:")?"ws":"wss","://").concat(e,"/party");return void 0===o.params?o.params={_pk:ZF()}:o.params._pk=ZF(),t.call(this,a,r,i,o)}return N(n)}(JF);function tU(e,t){return function(){return e.apply(t,arguments)}}var nU,rU=Object.prototype.toString,iU=Object.getPrototypeOf,oU=(nU=Object.create(null),function(e){var t=rU.call(e);return nU[t]||(nU[t]=t.slice(8,-1).toLowerCase())}),aU=function(e){return e=e.toLowerCase(),function(t){return oU(t)===e}},sU=function(e){return function(t){return typeof t===e}},uU=Array.isArray,lU=sU("undefined");var cU=aU("ArrayBuffer");var dU=sU("string"),fU=sU("function"),hU=sU("number"),pU=function(e){return null!==e&&"object"===typeof e},vU=function(e){if("object"!==oU(e))return!1;var t=iU(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},gU=aU("Date"),mU=aU("File"),yU=aU("Blob"),bU=aU("FileList"),wU=aU("URLSearchParams");function xU(e,t){var n,r,i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).allOwnKeys,o=void 0!==i&&i;if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),uU(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{var a,s=o?Object.getOwnPropertyNames(e):Object.keys(e),u=s.length;for(n=0;n<u;n++)a=s[n],t.call(null,e[a],a,e)}}function kU(e,t){t=t.toLowerCase();for(var n,r=Object.keys(e),i=r.length;i-- >0;)if(t===(n=r[i]).toLowerCase())return n;return null}var SU="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,_U=function(e){return!lU(e)&&e!==SU};var EU,CU=(EU="undefined"!==typeof Uint8Array&&iU(Uint8Array),function(e){return EU&&e instanceof EU}),PU=aU("HTMLFormElement"),IU=function(e){var t=Object.prototype.hasOwnProperty;return function(e,n){return t.call(e,n)}}(),TU=aU("RegExp"),MU=function(e,t){var n=Object.getOwnPropertyDescriptors(e),r={};xU(n,(function(n,i){var o;!1!==(o=t(n,i,e))&&(r[i]=o||n)})),Object.defineProperties(e,r)},AU="abcdefghijklmnopqrstuvwxyz",OU="0123456789",jU={DIGIT:OU,ALPHA:AU,ALPHA_DIGIT:AU+AU.toUpperCase()+OU};var RU=aU("AsyncFunction"),LU={isArray:uU,isArrayBuffer:cU,isBuffer:function(e){return null!==e&&!lU(e)&&null!==e.constructor&&!lU(e.constructor)&&fU(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:function(e){var t;return e&&("function"===typeof FormData&&e instanceof FormData||fU(e.append)&&("formdata"===(t=oU(e))||"object"===t&&fU(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&cU(e.buffer)},isString:dU,isNumber:hU,isBoolean:function(e){return!0===e||!1===e},isObject:pU,isPlainObject:vU,isUndefined:lU,isDate:gU,isFile:mU,isBlob:yU,isRegExp:TU,isFunction:fU,isStream:function(e){return pU(e)&&fU(e.pipe)},isURLSearchParams:wU,isTypedArray:CU,isFileList:bU,forEach:xU,merge:function e(){for(var t=(_U(this)&&this||{}).caseless,n={},r=function(r,i){var o=t&&kU(n,i)||i;vU(n[o])&&vU(r)?n[o]=e(n[o],r):vU(r)?n[o]=e({},r):uU(r)?n[o]=r.slice():n[o]=r},i=0,o=arguments.length;i<o;i++)arguments[i]&&xU(arguments[i],r);return n},extend:function(e,t,n){return xU(t,(function(t,r){n&&fU(t)?e[r]=tU(t,n):e[r]=t}),{allOwnKeys:(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).allOwnKeys}),e},trim:function(e){return e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,n,r){e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:function(e,t,n,r){var i,o,a,s={};if(t=t||{},null==e)return t;do{for(o=(i=Object.getOwnPropertyNames(e)).length;o-- >0;)a=i[o],r&&!r(a,e,t)||s[a]||(t[a]=e[a],s[a]=!0);e=!1!==n&&iU(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:oU,kindOfTest:aU,endsWith:function(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var r=e.indexOf(t,n);return-1!==r&&r===n},toArray:function(e){if(!e)return null;if(uU(e))return e;var t=e.length;if(!hU(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n},forEachEntry:function(e,t){for(var n,r=(e&&e[Symbol.iterator]).call(e);(n=r.next())&&!n.done;){var i=n.value;t.call(e,i[0],i[1])}},matchAll:function(e,t){for(var n,r=[];null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:PU,hasOwnProperty:IU,hasOwnProp:IU,reduceDescriptors:MU,freezeMethods:function(e){MU(e,(function(t,n){if(fU(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;var r=e[n];fU(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=function(){throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:function(e,t){var n={},r=function(e){e.forEach((function(e){n[e]=!0}))};return uU(e)?r(e):r(String(e).split(t)),n},toCamelCase:function(e){return e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n}))},noop:function(){},toFiniteNumber:function(e,t){return e=+e,Number.isFinite(e)?e:t},findKey:kU,global:SU,isContextDefined:_U,ALPHABET:jU,generateString:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:jU.ALPHA_DIGIT,n="",r=t.length;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&fU(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:function(e){var t=new Array(10);return function e(n,r){if(pU(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[r]=n;var i=uU(n)?[]:{};return xU(n,(function(t,n){var o=e(t,r+1);!lU(o)&&(i[n]=o)})),t[r]=void 0,i}}return n}(e,0)},isAsyncFn:RU,isThenable:function(e){return e&&(pU(e)||fU(e))&&fU(e.then)&&fU(e.catch)}};function DU(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}LU.inherits(DU,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:LU.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var NU=DU.prototype,zU={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((function(e){zU[e]={value:e}})),Object.defineProperties(DU,zU),Object.defineProperty(NU,"isAxiosError",{value:!0}),DU.from=function(e,t,n,r,i,o){var a=Object.create(NU);return LU.toFlatObject(e,a,(function(e){return e!==Error.prototype}),(function(e){return"isAxiosError"!==e})),DU.call(a,e.message,t,n,r,i),a.cause=e,a.name=e.name,o&&Object.assign(a,o),a};var BU=DU;function FU(e){return LU.isPlainObject(e)||LU.isArray(e)}function UU(e){return LU.endsWith(e,"[]")?e.slice(0,-2):e}function KU(e,t,n){return e?e.concat(t).map((function(e,t){return e=UU(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}var VU=LU.toFlatObject(LU,{},null,(function(e){return/^is[A-Z]/.test(e)}));var WU=function(e,t,n){if(!LU.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;var r=(n=LU.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!LU.isUndefined(t[e])}))).metaTokens,i=n.visitor||l,o=n.dots,a=n.indexes,s=(n.Blob||"undefined"!==typeof Blob&&Blob)&&LU.isSpecCompliantForm(t);if(!LU.isFunction(i))throw new TypeError("visitor must be a function");function u(e){if(null===e)return"";if(LU.isDate(e))return e.toISOString();if(!s&&LU.isBlob(e))throw new BU("Blob is not supported. Use a Buffer instead.");return LU.isArrayBuffer(e)||LU.isTypedArray(e)?s&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function l(e,n,i){var s=e;if(e&&!i&&"object"===typeof e)if(LU.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(LU.isArray(e)&&function(e){return LU.isArray(e)&&!e.some(FU)}(e)||(LU.isFileList(e)||LU.endsWith(n,"[]"))&&(s=LU.toArray(e)))return n=UU(n),s.forEach((function(e,r){!LU.isUndefined(e)&&null!==e&&t.append(!0===a?KU([n],r,o):null===a?n:n+"[]",u(e))})),!1;return!!FU(e)||(t.append(KU(i,n,o),u(e)),!1)}var c=[],d=Object.assign(VU,{defaultVisitor:l,convertValue:u,isVisitable:FU});if(!LU.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!LU.isUndefined(n)){if(-1!==c.indexOf(n))throw Error("Circular reference detected in "+r.join("."));c.push(n),LU.forEach(n,(function(n,o){!0===(!(LU.isUndefined(n)||null===n)&&i.call(t,n,LU.isString(o)?o.trim():o,r,d))&&e(n,r?r.concat(o):[o])})),c.pop()}}(e),t};function HU(e){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function YU(e,t){this._pairs=[],e&&WU(e,this,t)}var XU=YU.prototype;XU.append=function(e,t){this._pairs.push([e,t])},XU.toString=function(e){var t=e?function(t){return e.call(this,t,HU)}:HU;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};var qU=YU;function $U(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function GU(e,t,n){if(!t)return e;var r,i=n&&n.encode||$U,o=n&&n.serialize;if(r=o?o(t,n):LU.isURLSearchParams(t)?t.toString():new qU(t,n).toString(i)){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}var QU=function(){function e(){z(this,e),this.handlers=[]}return N(e,[{key:"use",value:function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}},{key:"eject",value:function(e){this.handlers[e]&&(this.handlers[e]=null)}},{key:"clear",value:function(){this.handlers&&(this.handlers=[])}},{key:"forEach",value:function(e){LU.forEach(this.handlers,(function(t){null!==t&&e(t)}))}}]),e}(),JU=QU,ZU={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},eK={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:qU,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},isStandardBrowserEnv:function(){var e;return("undefined"===typeof navigator||"ReactNative"!==(e=navigator.product)&&"NativeScript"!==e&&"NS"!==e)&&("undefined"!==typeof window&&"undefined"!==typeof document)}(),isStandardBrowserWebWorkerEnv:"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,protocols:["http","https","file","blob","url","data"]};var tK=function(e){function t(e,n,r,i){var o=e[i++],a=Number.isFinite(+o),s=i>=e.length;return o=!o&&LU.isArray(r)?r.length:o,s?(LU.hasOwnProp(r,o)?r[o]=[r[o],n]:r[o]=n,!a):(r[o]&&LU.isObject(r[o])||(r[o]=[]),t(e,n,r[o],i)&&LU.isArray(r[o])&&(r[o]=function(e){var t,n,r={},i=Object.keys(e),o=i.length;for(t=0;t<o;t++)r[n=i[t]]=e[n];return r}(r[o])),!a)}if(LU.isFormData(e)&&LU.isFunction(e.entries)){var n={};return LU.forEachEntry(e,(function(e,r){t(function(e){return LU.matchAll(/\w+|\[(\w*)]/g,e).map((function(e){return"[]"===e[0]?"":e[1]||e[0]}))}(e),r,n,0)})),n}return null};var nK={transitional:ZU,adapter:eK.isNode?"http":"xhr",transformRequest:[function(e,t){var n,r=t.getContentType()||"",i=r.indexOf("application/json")>-1,o=LU.isObject(e);if(o&&LU.isHTMLForm(e)&&(e=new FormData(e)),LU.isFormData(e))return i&&i?JSON.stringify(tK(e)):e;if(LU.isArrayBuffer(e)||LU.isBuffer(e)||LU.isStream(e)||LU.isFile(e)||LU.isBlob(e))return e;if(LU.isArrayBufferView(e))return e.buffer;if(LU.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return WU(e,new eK.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return eK.isNode&&LU.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((n=LU.isFileList(e))||r.indexOf("multipart/form-data")>-1){var a=this.env&&this.env.FormData;return WU(n?{"files[]":e}:e,a&&new a,this.formSerializer)}}return o||i?(t.setContentType("application/json",!1),function(e,t,n){if(LU.isString(e))try{return(t||JSON.parse)(e),LU.trim(e)}catch(kM){if("SyntaxError"!==kM.name)throw kM}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||nK.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(e&&LU.isString(e)&&(n&&!this.responseType||r)){var i=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(kM){if(i){if("SyntaxError"===kM.name)throw BU.from(kM,BU.ERR_BAD_RESPONSE,this,null,this.response);throw kM}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:eK.classes.FormData,Blob:eK.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};LU.forEach(["delete","get","head","post","put","patch"],(function(e){nK.headers[e]={}}));var rK=nK,iK=LU.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),oK=Symbol("internals");function aK(e){return e&&String(e).trim().toLowerCase()}function sK(e){return!1===e||null==e?e:LU.isArray(e)?e.map(sK):String(e)}function uK(e,t,n,r,i){return LU.isFunction(r)?r.call(this,t,n):(i&&(t=n),LU.isString(t)?LU.isString(r)?-1!==t.indexOf(r):LU.isRegExp(r)?r.test(t):void 0:void 0)}var lK=function(e,t){function n(e){z(this,n),e&&this.set(e)}return N(n,[{key:"set",value:function(e,t,n){var r=this;function i(e,t,n){var i=aK(t);if(!i)throw new Error("header name must be a non-empty string");var o=LU.findKey(r,i);(!o||void 0===r[o]||!0===n||void 0===n&&!1!==r[o])&&(r[o||t]=sK(e))}var o=function(e,t){return LU.forEach(e,(function(e,n){return i(e,n,t)}))};return LU.isPlainObject(e)||e instanceof this.constructor?o(e,t):LU.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?o(function(e){var t,n,r,i={};return e&&e.split("\n").forEach((function(e){r=e.indexOf(":"),t=e.substring(0,r).trim().toLowerCase(),n=e.substring(r+1).trim(),!t||i[t]&&iK[t]||("set-cookie"===t?i[t]?i[t].push(n):i[t]=[n]:i[t]=i[t]?i[t]+", "+n:n)})),i}(e),t):null!=e&&i(t,e,n),this}},{key:"get",value:function(e,t){if(e=aK(e)){var n=LU.findKey(this,e);if(n){var r=this[n];if(!t)return r;if(!0===t)return function(e){for(var t,n=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;t=r.exec(e);)n[t[1]]=t[2];return n}(r);if(LU.isFunction(t))return t.call(this,r,n);if(LU.isRegExp(t))return t.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}},{key:"has",value:function(e,t){if(e=aK(e)){var n=LU.findKey(this,e);return!(!n||void 0===this[n]||t&&!uK(0,this[n],n,t))}return!1}},{key:"delete",value:function(e,t){var n=this,r=!1;function i(e){if(e=aK(e)){var i=LU.findKey(n,e);!i||t&&!uK(0,n[i],i,t)||(delete n[i],r=!0)}}return LU.isArray(e)?e.forEach(i):i(e),r}},{key:"clear",value:function(e){for(var t=Object.keys(this),n=t.length,r=!1;n--;){var i=t[n];e&&!uK(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}},{key:"normalize",value:function(e){var t=this,n={};return LU.forEach(this,(function(r,i){var o=LU.findKey(n,i);if(o)return t[o]=sK(r),void delete t[i];var a=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n}))}(i):String(i).trim();a!==i&&delete t[i],t[a]=sK(r),n[a]=!0})),this}},{key:"concat",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this.constructor).concat.apply(e,[this].concat(n))}},{key:"toJSON",value:function(e){var t=Object.create(null);return LU.forEach(this,(function(n,r){null!=n&&!1!==n&&(t[r]=e&&LU.isArray(n)?n.join(", "):n)})),t}},{key:Symbol.iterator,value:function(){return Object.entries(this.toJSON())[Symbol.iterator]()}},{key:"toString",value:function(){return Object.entries(this.toJSON()).map((function(e){var t=L(e,2);return t[0]+": "+t[1]})).join("\n")}},{key:Symbol.toStringTag,get:function(){return"AxiosHeaders"}}],[{key:"from",value:function(e){return e instanceof this?e:new this(e)}},{key:"concat",value:function(e){for(var t=new this(e),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((function(e){return t.set(e)})),t}},{key:"accessor",value:function(e){var t=(this[oK]=this[oK]={accessors:{}}).accessors,n=this.prototype;function r(e){var r=aK(e);t[r]||(!function(e,t){var n=LU.toCamelCase(" "+t);["get","set","has"].forEach((function(r){Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return LU.isArray(e)?e.forEach(r):r(e),this}}]),n}();lK.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),LU.reduceDescriptors(lK.prototype,(function(e,t){var n=e.value,r=t[0].toUpperCase()+t.slice(1);return{get:function(){return n},set:function(e){this[r]=e}}})),LU.freezeMethods(lK);var cK=lK;function dK(e,t){var n=this||rK,r=t||n,i=cK.from(r.headers),o=r.data;return LU.forEach(e,(function(e){o=e.call(n,o,i.normalize(),t?t.status:void 0)})),i.normalize(),o}function fK(e){return!(!e||!e.__CANCEL__)}function hK(e,t,n){BU.call(this,null==e?"canceled":e,BU.ERR_CANCELED,t,n),this.name="CanceledError"}LU.inherits(hK,BU,{__CANCEL__:!0});var pK=hK;var vK=eK.isStandardBrowserEnv?{write:function(e,t,n,r,i,o){var a=[];a.push(e+"="+encodeURIComponent(t)),LU.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),LU.isString(r)&&a.push("path="+r),LU.isString(i)&&a.push("domain="+i),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function gK(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}var mK=eK.isStandardBrowserEnv?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=LU.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0};var yK=function(e,t){e=e||10;var n,r=new Array(e),i=new Array(e),o=0,a=0;return t=void 0!==t?t:1e3,function(s){var u=Date.now(),l=i[a];n||(n=u),r[o]=s,i[o]=u;for(var c=a,d=0;c!==o;)d+=r[c++],c%=e;if((o=(o+1)%e)===a&&(a=(a+1)%e),!(u-n<t)){var f=l&&u-l;return f?Math.round(1e3*d/f):void 0}}};function bK(e,t){var n=0,r=yK(50,250);return function(i){var o=i.loaded,a=i.lengthComputable?i.total:void 0,s=o-n,u=r(s);n=o;var l={loaded:o,total:a,progress:a?o/a:void 0,bytes:s,rate:u||void 0,estimated:u&&a&&o<=a?(a-o)/u:void 0,event:i};l[t?"download":"upload"]=!0,e(l)}}var wK="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){var r,i=e.data,o=cK.from(e.headers).normalize(),a=e.responseType;function s(){e.cancelToken&&e.cancelToken.unsubscribe(r),e.signal&&e.signal.removeEventListener("abort",r)}LU.isFormData(i)&&(eK.isStandardBrowserEnv||eK.isStandardBrowserWebWorkerEnv?o.setContentType(!1):o.setContentType("multipart/form-data;",!1));var u=new XMLHttpRequest;if(e.auth){var l=e.auth.username||"",c=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.set("Authorization","Basic "+btoa(l+":"+c))}var d=gK(e.baseURL,e.url);function f(){if(u){var r=cK.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders());!function(e,t,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new BU("Request failed with status code "+n.status,[BU.ERR_BAD_REQUEST,BU.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}((function(e){t(e),s()}),(function(e){n(e),s()}),{data:a&&"text"!==a&&"json"!==a?u.response:u.responseText,status:u.status,statusText:u.statusText,headers:r,config:e,request:u}),u=null}}if(u.open(e.method.toUpperCase(),GU(d,e.params,e.paramsSerializer),!0),u.timeout=e.timeout,"onloadend"in u?u.onloadend=f:u.onreadystatechange=function(){u&&4===u.readyState&&(0!==u.status||u.responseURL&&0===u.responseURL.indexOf("file:"))&&setTimeout(f)},u.onabort=function(){u&&(n(new BU("Request aborted",BU.ECONNABORTED,e,u)),u=null)},u.onerror=function(){n(new BU("Network Error",BU.ERR_NETWORK,e,u)),u=null},u.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||ZU;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new BU(t,r.clarifyTimeoutError?BU.ETIMEDOUT:BU.ECONNABORTED,e,u)),u=null},eK.isStandardBrowserEnv){var h=(e.withCredentials||mK(d))&&e.xsrfCookieName&&vK.read(e.xsrfCookieName);h&&o.set(e.xsrfHeaderName,h)}void 0===i&&o.setContentType(null),"setRequestHeader"in u&&LU.forEach(o.toJSON(),(function(e,t){u.setRequestHeader(t,e)})),LU.isUndefined(e.withCredentials)||(u.withCredentials=!!e.withCredentials),a&&"json"!==a&&(u.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&u.addEventListener("progress",bK(e.onDownloadProgress,!0)),"function"===typeof e.onUploadProgress&&u.upload&&u.upload.addEventListener("progress",bK(e.onUploadProgress)),(e.cancelToken||e.signal)&&(r=function(t){u&&(n(!t||t.type?new pK(null,e,u):t),u.abort(),u=null)},e.cancelToken&&e.cancelToken.subscribe(r),e.signal&&(e.signal.aborted?r():e.signal.addEventListener("abort",r)));var p=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(d);p&&-1===eK.protocols.indexOf(p)?n(new BU("Unsupported protocol "+p+":",BU.ERR_BAD_REQUEST,e)):u.send(i||null)}))},xK={http:null,xhr:wK};LU.forEach(xK,(function(e,t){if(e){try{Object.defineProperty(e,"name",{value:t})}catch(kM){}Object.defineProperty(e,"adapterName",{value:t})}}));var kK=function(e){for(var t,n,r=(e=LU.isArray(e)?e:[e]).length,i=0;i<r&&(t=e[i],!(n=LU.isString(t)?xK[t.toLowerCase()]:t));i++);if(!n){if(!1===n)throw new BU("Adapter ".concat(t," is not supported by the environment"),"ERR_NOT_SUPPORT");throw new Error(LU.hasOwnProp(xK,t)?"Adapter '".concat(t,"' is not available in the build"):"Unknown adapter '".concat(t,"'"))}if(!LU.isFunction(n))throw new TypeError("adapter is not a function");return n};function SK(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new pK(null,e)}function _K(e){return SK(e),e.headers=cK.from(e.headers),e.data=dK.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),kK(e.adapter||rK.adapter)(e).then((function(t){return SK(e),t.data=dK.call(e,e.transformResponse,t),t.headers=cK.from(t.headers),t}),(function(t){return fK(t)||(SK(e),t&&t.response&&(t.response.data=dK.call(e,e.transformResponse,t.response),t.response.headers=cK.from(t.response.headers))),Promise.reject(t)}))}var EK=function(e){return e instanceof cK?e.toJSON():e};function CK(e,t){t=t||{};var n={};function r(e,t,n){return LU.isPlainObject(e)&&LU.isPlainObject(t)?LU.merge.call({caseless:n},e,t):LU.isPlainObject(t)?LU.merge({},t):LU.isArray(t)?t.slice():t}function i(e,t,n){return LU.isUndefined(t)?LU.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function o(e,t){if(!LU.isUndefined(t))return r(void 0,t)}function a(e,t){return LU.isUndefined(t)?LU.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function s(n,i,o){return o in t?r(n,i):o in e?r(void 0,n):void 0}var u={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:function(e,t){return i(EK(e),EK(t),!0)}};return LU.forEach(Object.keys(Object.assign({},e,t)),(function(r){var o=u[r]||i,a=o(e[r],t[r],r);LU.isUndefined(a)&&o!==s||(n[r]=a)})),n}var PK="1.5.0",IK={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){IK[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var TK={};IK.transitional=function(e,t,n){function r(e,t){return"[Axios v1.5.0] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,i,o){if(!1===e)throw new BU(r(i," has been removed"+(t?" in "+t:"")),BU.ERR_DEPRECATED);return t&&!TK[i]&&(TK[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,o)}};var MK={assertOptions:function(e,t,n){if("object"!==typeof e)throw new BU("options must be an object",BU.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(e),i=r.length;i-- >0;){var o=r[i],a=t[o];if(a){var s=e[o],u=void 0===s||a(s,o,e);if(!0!==u)throw new BU("option "+o+" must be "+u,BU.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new BU("Unknown option "+o,BU.ERR_BAD_OPTION)}},validators:IK},AK=MK.validators,OK=function(){function e(t){z(this,e),this.defaults=t,this.interceptors={request:new JU,response:new JU}}return N(e,[{key:"request",value:function(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{};var n=t=CK(this.defaults,t),r=n.transitional,i=n.paramsSerializer,o=n.headers;void 0!==r&&MK.assertOptions(r,{silentJSONParsing:AK.transitional(AK.boolean),forcedJSONParsing:AK.transitional(AK.boolean),clarifyTimeoutError:AK.transitional(AK.boolean)},!1),null!=i&&(LU.isFunction(i)?t.paramsSerializer={serialize:i}:MK.assertOptions(i,{encode:AK.function,serialize:AK.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();var a=o&&LU.merge(o.common,o[t.method]);o&&LU.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete o[e]})),t.headers=cK.concat(a,o);var s=[],u=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(u=u&&e.synchronous,s.unshift(e.fulfilled,e.rejected))}));var l,c=[];this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));var d,f=0;if(!u){var h=[_K.bind(this),void 0];for(h.unshift.apply(h,s),h.push.apply(h,c),d=h.length,l=Promise.resolve(t);f<d;)l=l.then(h[f++],h[f++]);return l}d=s.length;var p=t;for(f=0;f<d;){var v=s[f++],g=s[f++];try{p=v(p)}catch(m){g.call(this,m);break}}try{l=_K.call(this,p)}catch(m){return Promise.reject(m)}for(f=0,d=c.length;f<d;)l=l.then(c[f++],c[f++]);return l}},{key:"getUri",value:function(e){return GU(gK((e=CK(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}]),e}();LU.forEach(["delete","get","head","options"],(function(e){OK.prototype[e]=function(t,n){return this.request(CK(n||{},{method:e,url:t,data:(n||{}).data}))}})),LU.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(CK(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}OK.prototype[e]=t(),OK.prototype[e+"Form"]=t(!0)}));var jK=OK,RK=function(){function e(t){if(z(this,e),"function"!==typeof t)throw new TypeError("executor must be a function.");var n;this.promise=new Promise((function(e){n=e}));var r=this;this.promise.then((function(e){if(r._listeners){for(var t=r._listeners.length;t-- >0;)r._listeners[t](e);r._listeners=null}})),this.promise.then=function(e){var t,n=new Promise((function(e){r.subscribe(e),t=e})).then(e);return n.cancel=function(){r.unsubscribe(t)},n},t((function(e,t,i){r.reason||(r.reason=new pK(e,t,i),n(r.reason))}))}return N(e,[{key:"throwIfRequested",value:function(){if(this.reason)throw this.reason}},{key:"subscribe",value:function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}},{key:"unsubscribe",value:function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}}}],[{key:"source",value:function(){var t,n=new e((function(e){t=e}));return{token:n,cancel:t}}}]),e}(),LK=RK;var DK={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(DK).forEach((function(e){var t=L(e,2),n=t[0],r=t[1];DK[r]=n}));var NK=DK;var zK=function e(t){var n=new jK(t),r=tU(jK.prototype.request,n);return LU.extend(r,jK.prototype,n,{allOwnKeys:!0}),LU.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(CK(t,n))},r}(rK);zK.Axios=jK,zK.CanceledError=pK,zK.CancelToken=LK,zK.isCancel=fK,zK.VERSION=PK,zK.toFormData=WU,zK.AxiosError=BU,zK.Cancel=zK.CanceledError,zK.all=function(e){return Promise.all(e)},zK.spread=function(e){return function(t){return e.apply(null,t)}},zK.isAxiosError=function(e){return LU.isObject(e)&&!0===e.isAxiosError},zK.mergeConfig=CK,zK.AxiosHeaders=cK,zK.formToJSON=function(e){return tK(LU.isHTMLForm(e)?new FormData(e):e)},zK.getAdapter=kK,zK.HttpStatusCode=NK,zK.default=zK;var BK=zK,FK=n(5778);var UK=function(e){var n=e.activityName,r=L((0,t.useState)(0),2),i=r[0],o=r[1],a=L((0,t.useState)(!1),2),s=a[0],u=a[1],l=function(){var e=na(ea().mark((function e(){return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,BK.post("http://localhost:5009/api/ratings",{activityName:n,totalRating:i});case 3:e.sent,u(!0),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error submitting rating:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return(0,Qo.jsxs)("div",{className:"Ratings",children:[(0,Qo.jsxs)("p",{children:["how did you find the ",n," activity?"]}),(0,Qo.jsx)(FK.Z,{rating:i,starRatedColor:s?"rgb(203, 211, 227)":"gold",changeRating:function(e){o(e),u(!1)},numberOfStars:5,name:"rating"}),(0,Qo.jsx)("br",{}),(0,Qo.jsx)("button",{onClick:l,children:"Submit Rating"})]})},KK=ua((function(){var e=da(),t=e.user,n=t.color,r=t.name,i=e.currentPage.name;return console.log("Page ID test"+e.currentPage.name),(0,Qo.jsx)(Qo.Fragment,{children:(0,Qo.jsxs)("div",{style:{pointerEvents:"all",display:"flex"},children:[(0,Qo.jsx)("div",{className:"Ratings",children:(0,Qo.jsx)(UK,{activityName:i})}),(0,Qo.jsx)("input",{type:"color",value:n,onChange:function(t){e.user.updateUserPreferences({color:t.currentTarget.value})}}),(0,Qo.jsx)("input",{value:r,onChange:function(t){e.user.updateUserPreferences({name:t.currentTarget.value})}})]})})}));var VK=function(){var e=L((0,t.useState)(0),2),n=e[0],r=e[1],i=L((0,t.useState)(null),2),o=i[0],a=i[1],s=L((0,t.useState)(!1),2),u=s[0],l=s[1],c=function(){if(0!==n){var e=setInterval((function(){r((function(e){return e-1}))}),1e3);a(e),l(!0)}},d=function(){clearInterval(o),a(null),l(!1)};return(0,t.useEffect)((function(){0===n&&u&&d()}),[n,u]),(0,Qo.jsxs)("div",{className:"timer",children:[(0,Qo.jsx)("span",{className:"timer__part timer__part--minutes",children:function(){var e=Math.floor(n/60),t=n%60;return"".concat(e.toString().padStart(2,"0"),":").concat(t.toString().padStart(2,"0"))}()}),(0,Qo.jsx)("span",{className:"timer__part",children:":"}),(0,Qo.jsx)("span",{className:"timer__part timer__part--seconds"}),u?(0,Qo.jsx)("button",{type:"button",className:"timer__btn timer__btn--control timer__btn--stop",onClick:d,children:(0,Qo.jsx)("span",{className:"material-icons",children:"pause"})}):(0,Qo.jsx)("button",{type:"button",className:"timer__btn timer__btn--control timer__btn--start",onClick:c,children:(0,Qo.jsx)("span",{className:"material-icons",children:"play_arrow"})}),(0,Qo.jsx)("button",{type:"button",className:"timer__btn timer__btn--reset",onClick:function(){var e=prompt("Enter number of minutes:");e<60&&(d(),r(60*e))},children:(0,Qo.jsx)("span",{className:"material-icons",children:"timer"})})]})};function WK(){var e=function(e){var n=e.roomId,r=void 0===n?"example":n,i=e.hostUrl,o=void 0===i?"yjs.threepointone.partykit.dev":i,a=L((0,t.useState)((function(){return hm({shapes:Sp})})),1)[0],s=L((0,t.useState)({status:"loading"}),2),u=s[0],l=s[1],c=(0,t.useMemo)((function(){var e=new fz({gc:!0});return{doc:e,room:new eU(o,r,e,{connect:!0}),yRecords:e.getMap("tl_".concat(r))}}),[o,r]),d=c.doc,f=c.room,h=c.yRecords,p=(0,t.useRef)(!1);return(0,t.useEffect)((function(){var e=[];return f.on("status",(function(t){var n=t.status;if("connecting"!==n&&"disconnected"!==n){if("connected"===n)if(p.current)l({store:a,status:"synced-remote",connectionStatus:"online"});else{p.current=!0,0===h.size?(It((function(){a.clear(),a.put([Pr.create({id:"document:document"}),yn.create({id:"page:page",name:"Page 1",index:"a1"})])})),d.transact((function(){var e,t=X(a.allRecords());try{for(t.s();!(e=t.n()).done;){var n=e.value;h.set(n.id,n)}}catch(YK){t.e(YK)}finally{t.f()}}))):It((function(){a.clear(),a.put(Array.from(h.values()))})),e.push(a.listen((function(e){var t=e.changes;d.transact((function(){Object.values(t.added).forEach((function(e){h.set(e.id,e)})),Object.values(t.updated).forEach((function(e){var t=L(e,2),n=(t[0],t[1]);h.set(n.id,n)})),Object.values(t.removed).forEach((function(e){h.delete(e.id)}))}))}),{source:"user",scope:"document"}));var r=function(e,t){if(!t.local){var n=[],r=[];e.forEach((function(e){e.changes.keys.forEach((function(e,t){switch(e.action){case"add":case"update":r.push(h.get(t));break;case"delete":n.push(t)}}))})),a.mergeRemoteChanges((function(){n.length&&a.remove(n),r.length&&a.put(r)}))}};h.observeDeep(r),e.push((function(){return h.unobserveDeep(r)}));var i=f.awareness.clientID.toString(),o=xr.createId(i),s=Nt("ok",(function(){return zd()})),u=kr(s,o)(a);f.awareness.setLocalStateField("presence",u.value),e.push(Bt("when presence changes",(function(){var e=u.value;requestAnimationFrame((function(){f.awareness.setLocalStateField("presence",e)}))})));var c=function(e){var t,n=f.awareness.getStates(),r=[],i=[],s=X(e.added);try{for(s.s();!(t=s.n()).done;){var u=t.value,l=n.get(u);null!==l&&void 0!==l&&l.presence&&l.presence.id!==o&&i.push(l.presence)}}catch(YK){s.e(YK)}finally{s.f()}var c,d=X(e.updated);try{for(d.s();!(c=d.n()).done;){var h=c.value,p=n.get(h);null!==p&&void 0!==p&&p.presence&&p.presence.id!==o&&i.push(p.presence)}}catch(YK){d.e(YK)}finally{d.f()}var v,g=X(e.removed);try{for(g.s();!(v=g.n()).done;){var m=v.value;r.push(xr.createId(m.toString()))}}catch(YK){g.e(YK)}finally{g.f()}a.mergeRemoteChanges((function(){r.length&&a.remove(r),i.length&&a.put(i)}))};f.awareness.on("update",c),e.push((function(){return f.awareness.off("update",c)})),l({store:a,status:"synced-remote",connectionStatus:"online"})}}else l({store:a,status:"synced-remote",connectionStatus:"offline"})})),function(){e.forEach((function(e){return e()})),e.length=0}}),[f,d,a,h]),u}({roomId:"MENTKNOW"});return(0,Qo.jsxs)(Qo.Fragment,{children:[(0,Qo.jsx)("div",{className:"tldraw__editor",children:(0,Qo.jsx)(RL,{store:e,autoFocus:!0,shareZone:(0,Qo.jsx)(KK,{})})}),(0,Qo.jsx)("div",{id:"Timer",children:(0,Qo.jsx)(VK,{})})]})}var HK=document.getElementById("root");i.createRoot(HK).render((0,Qo.jsxs)(t.StrictMode,{children:[(0,Qo.jsx)("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/icon?family=Material+Icons"}),(0,Qo.jsx)(WK,{})]}))}()}();
//# sourceMappingURL=main.ad130eea.js.map