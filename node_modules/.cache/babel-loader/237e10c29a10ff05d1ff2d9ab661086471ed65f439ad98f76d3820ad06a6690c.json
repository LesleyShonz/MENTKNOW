{"ast":null,"code":"import _objectSpread from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _createClass from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _classCallCheck from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _assertThisInitialized from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _inherits from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport _defineProperty from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport { StateNode } from \"../../../tools/StateNode.mjs\";\nimport { GeoShapeUtil } from \"../../geo/GeoShapeUtil.mjs\";\nimport { TextShapeUtil } from \"../TextShapeUtil.mjs\";\nvar Idle = /*#__PURE__*/function (_StateNode) {\n  _inherits(Idle, _StateNode);\n  var _super = _createSuper(Idle);\n  function Idle() {\n    var _this;\n    _classCallCheck(this, Idle);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _super.call.apply(_super, [this].concat(args));\n    _defineProperty(_assertThisInitialized(_this), \"onPointerEnter\", function (info) {\n      switch (info.target) {\n        case \"canvas\":\n          {\n            break;\n          }\n        case \"shape\":\n          {\n            var _this$editor = _this.editor,\n              selectedIds = _this$editor.selectedIds,\n              focusLayerId = _this$editor.focusLayerId;\n            var hoveringShape = _this.editor.getOutermostSelectableShape(info.shape, function (parent) {\n              return !selectedIds.includes(parent.id);\n            });\n            if (hoveringShape.id !== focusLayerId) {\n              if (_this.editor.isShapeOfType(hoveringShape, TextShapeUtil)) {\n                _this.editor.setHoveredId(hoveringShape.id);\n              }\n            }\n            break;\n          }\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onPointerLeave\", function (info) {\n      switch (info.target) {\n        case \"shape\":\n          {\n            _this.editor.setHoveredId(null);\n            break;\n          }\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onPointerDown\", function (info) {\n      var hoveredId = _this.editor.hoveredId;\n      if (hoveredId) {\n        var shape = _this.editor.getShapeById(hoveredId);\n        if (_this.editor.isShapeOfType(shape, TextShapeUtil)) {\n          requestAnimationFrame(function () {\n            _this.editor.setSelectedIds([shape.id]);\n            _this.editor.setEditingId(shape.id);\n            _this.editor.setSelectedTool(\"select.editing_shape\", _objectSpread(_objectSpread({}, info), {}, {\n              target: \"shape\",\n              shape: shape\n            }));\n          });\n          return;\n        }\n      }\n      _this.parent.transition(\"pointing\", info);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onEnter\", function () {\n      _this.editor.setCursor({\n        type: \"cross\"\n      });\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onKeyDown\", function (info) {\n      if (info.key === \"Enter\") {\n        var shape = _this.editor.selectedShapes[0];\n        if (shape && _this.editor.isShapeOfType(shape, GeoShapeUtil)) {\n          _this.editor.setSelectedTool(\"select\");\n          _this.editor.setEditingId(shape.id);\n          _this.editor.root.current.value.transition(\"editing_shape\", _objectSpread(_objectSpread({}, info), {}, {\n            target: \"shape\",\n            shape: shape\n          }));\n        }\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onCancel\", function () {\n      _this.editor.setSelectedTool(\"select\");\n    });\n    return _this;\n  }\n  return _createClass(Idle);\n}(StateNode);\n_defineProperty(Idle, \"id\", \"idle\");\nexport { Idle };","map":{"version":3,"names":["StateNode","GeoShapeUtil","TextShapeUtil","Idle","_StateNode","_inherits","_super","_createSuper","_this","_classCallCheck","_len","arguments","length","args","Array","_key","call","apply","concat","_defineProperty","_assertThisInitialized","info","target","_this$editor","editor","selectedIds","focusLayerId","hoveringShape","getOutermostSelectableShape","shape","parent","includes","id","isShapeOfType","setHoveredId","hoveredId","getShapeById","requestAnimationFrame","setSelectedIds","setEditingId","setSelectedTool","_objectSpread","transition","setCursor","type","key","selectedShapes","root","current","value","_createClass"],"sources":["/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@tldraw/editor/src/lib/editor/shapes/text/toolStates/Idle.ts"],"sourcesContent":["import { StateNode } from '../../../tools/StateNode'\nimport { TLEventHandlers } from '../../../types/event-types'\nimport { GeoShapeUtil } from '../../geo/GeoShapeUtil'\nimport { TextShapeUtil } from '../TextShapeUtil'\n\nexport class Idle extends StateNode {\n\tstatic override id = 'idle'\n\n\tonPointerEnter: TLEventHandlers['onPointerEnter'] = (info) => {\n\t\tswitch (info.target) {\n\t\t\tcase 'canvas': {\n\t\t\t\t// noop\n\t\t\t\tbreak\n\t\t\t}\n\t\t\tcase 'shape': {\n\t\t\t\tconst { selectedIds, focusLayerId } = this.editor\n\t\t\t\tconst hoveringShape = this.editor.getOutermostSelectableShape(\n\t\t\t\t\tinfo.shape,\n\t\t\t\t\t(parent) => !selectedIds.includes(parent.id)\n\t\t\t\t)\n\t\t\t\tif (hoveringShape.id !== focusLayerId) {\n\t\t\t\t\tif (this.editor.isShapeOfType(hoveringShape, TextShapeUtil)) {\n\t\t\t\t\t\tthis.editor.setHoveredId(hoveringShape.id)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t}\n\n\tonPointerLeave: TLEventHandlers['onPointerLeave'] = (info) => {\n\t\tswitch (info.target) {\n\t\t\tcase 'shape': {\n\t\t\t\tthis.editor.setHoveredId(null)\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t}\n\n\tonPointerDown: TLEventHandlers['onPointerDown'] = (info) => {\n\t\tconst { hoveredId } = this.editor\n\t\tif (hoveredId) {\n\t\t\tconst shape = this.editor.getShapeById(hoveredId)!\n\t\t\tif (this.editor.isShapeOfType(shape, TextShapeUtil)) {\n\t\t\t\trequestAnimationFrame(() => {\n\t\t\t\t\tthis.editor.setSelectedIds([shape.id])\n\t\t\t\t\tthis.editor.setEditingId(shape.id)\n\t\t\t\t\tthis.editor.setSelectedTool('select.editing_shape', {\n\t\t\t\t\t\t...info,\n\t\t\t\t\t\ttarget: 'shape',\n\t\t\t\t\t\tshape,\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t}\n\t\t}\n\n\t\tthis.parent.transition('pointing', info)\n\t}\n\n\tonEnter = () => {\n\t\tthis.editor.setCursor({ type: 'cross' })\n\t}\n\n\tonKeyDown: TLEventHandlers['onKeyDown'] = (info) => {\n\t\tif (info.key === 'Enter') {\n\t\t\tconst shape = this.editor.selectedShapes[0]\n\t\t\tif (shape && this.editor.isShapeOfType(shape, GeoShapeUtil)) {\n\t\t\t\tthis.editor.setSelectedTool('select')\n\t\t\t\tthis.editor.setEditingId(shape.id)\n\t\t\t\tthis.editor.root.current.value!.transition('editing_shape', {\n\t\t\t\t\t...info,\n\t\t\t\t\ttarget: 'shape',\n\t\t\t\t\tshape,\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n\n\tonCancel = () => {\n\t\tthis.editor.setSelectedTool('select')\n\t}\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}