{"ast":null,"code":"import _classCallCheck from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _assertThisInitialized from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _inherits from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport _defineProperty from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport { StateNode } from \"../../../../StateNode.mjs\";\nimport { getTranslateCroppedImageChange } from \"./crop_helpers.mjs\";\nvar TranslatingCrop = /*#__PURE__*/function (_StateNode) {\n  _inherits(TranslatingCrop, _StateNode);\n  var _super = _createSuper(TranslatingCrop);\n  function TranslatingCrop() {\n    var _this;\n    _classCallCheck(this, TranslatingCrop);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _super.call.apply(_super, [this].concat(args));\n    _defineProperty(_assertThisInitialized(_this), \"info\", {});\n    _defineProperty(_assertThisInitialized(_this), \"markId\", \"translating crop\");\n    _defineProperty(_assertThisInitialized(_this), \"snapshot\", {});\n    _defineProperty(_assertThisInitialized(_this), \"onEnter\", function (info) {\n      _this.info = info;\n      _this.snapshot = _this.createSnapshot();\n      _this.editor.mark(_this.markId);\n      _this.editor.setCursor({\n        type: \"move\"\n      });\n      _this.updateShapes();\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onExit\", function () {\n      _this.editor.setCursor({\n        type: \"default\"\n      });\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onPointerMove\", function () {\n      _this.updateShapes();\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onPointerUp\", function () {\n      _this.complete();\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onComplete\", function () {\n      _this.complete();\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onCancel\", function () {\n      _this.cancel();\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onKeyDown\", function (info) {\n      switch (info.key) {\n        case \"Alt\":\n        case \"Shift\":\n          {\n            _this.updateShapes();\n            return;\n          }\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onKeyUp\", function (info) {\n      switch (info.key) {\n        case \"Enter\":\n          {\n            _this.complete();\n            return;\n          }\n        case \"Alt\":\n        case \"Shift\":\n          {\n            _this.updateShapes();\n          }\n      }\n    });\n    return _this;\n  }\n  _createClass(TranslatingCrop, [{\n    key: \"complete\",\n    value: function complete() {\n      this.updateShapes();\n      this.editor.setSelectedTool(\"select.crop.idle\", this.info);\n    }\n  }, {\n    key: \"cancel\",\n    value: function cancel() {\n      this.editor.bailToMark(this.markId);\n      this.editor.setSelectedTool(\"select.crop.idle\", this.info);\n    }\n  }, {\n    key: \"createSnapshot\",\n    value: function createSnapshot() {\n      var shape = this.editor.onlySelectedShape;\n      return {\n        shape: shape\n      };\n    }\n  }, {\n    key: \"updateShapes\",\n    value: function updateShapes() {\n      var shape = this.snapshot.shape;\n      if (!shape) return;\n      var _this$editor$inputs = this.editor.inputs,\n        originPagePoint = _this$editor$inputs.originPagePoint,\n        currentPagePoint = _this$editor$inputs.currentPagePoint;\n      var delta = currentPagePoint.clone().sub(originPagePoint);\n      var partial = getTranslateCroppedImageChange(this.editor, shape, delta);\n      if (partial) {\n        this.editor.updateShapes([partial], true);\n      }\n    }\n  }]);\n  return TranslatingCrop;\n}(StateNode);\n_defineProperty(TranslatingCrop, \"id\", \"translating_crop\");\nexport { TranslatingCrop };","map":{"version":3,"names":["StateNode","getTranslateCroppedImageChange","TranslatingCrop","_StateNode","_inherits","_super","_createSuper","_this","_classCallCheck","_len","arguments","length","args","Array","_key","call","apply","concat","_defineProperty","_assertThisInitialized","info","snapshot","createSnapshot","editor","mark","markId","setCursor","type","updateShapes","complete","cancel","key","_createClass","value","setSelectedTool","bailToMark","shape","onlySelectedShape","_this$editor$inputs","inputs","originPagePoint","currentPagePoint","delta","clone","sub","partial"],"sources":["/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@tldraw/editor/src/lib/editor/tools/SelectTool/children/Crop/children/TranslatingCrop.ts"],"sourcesContent":["import { TLEventHandlers, TLPointerEventInfo } from '../../../../../types/event-types'\nimport { StateNode } from '../../../../StateNode'\nimport { ShapeWithCrop, getTranslateCroppedImageChange } from './crop_helpers'\n\ntype Snapshot = ReturnType<TranslatingCrop['createSnapshot']>\n\nexport class TranslatingCrop extends StateNode {\n\tstatic override id = 'translating_crop'\n\n\tinfo = {} as TLPointerEventInfo & {\n\t\ttarget: 'shape'\n\t\tisCreating?: boolean\n\t\tonInteractionEnd?: string\n\t}\n\n\tmarkId = 'translating crop'\n\n\tprivate snapshot = {} as any as Snapshot\n\n\tonEnter = (\n\t\tinfo: TLPointerEventInfo & {\n\t\t\ttarget: 'shape'\n\t\t\tisCreating?: boolean\n\t\t\tonInteractionEnd?: string\n\t\t}\n\t) => {\n\t\tthis.info = info\n\t\tthis.snapshot = this.createSnapshot()\n\n\t\tthis.editor.mark(this.markId)\n\t\tthis.editor.setCursor({ type: 'move' })\n\t\tthis.updateShapes()\n\t}\n\n\tonExit = () => {\n\t\tthis.editor.setCursor({ type: 'default' })\n\t}\n\n\tonPointerMove = () => {\n\t\tthis.updateShapes()\n\t}\n\n\tonPointerUp: TLEventHandlers['onPointerUp'] = () => {\n\t\tthis.complete()\n\t}\n\n\tonComplete: TLEventHandlers['onComplete'] = () => {\n\t\tthis.complete()\n\t}\n\n\tonCancel: TLEventHandlers['onCancel'] = () => {\n\t\tthis.cancel()\n\t}\n\n\tonKeyDown: TLEventHandlers['onKeyDown'] = (info) => {\n\t\tswitch (info.key) {\n\t\t\tcase 'Alt':\n\t\t\tcase 'Shift': {\n\t\t\t\tthis.updateShapes()\n\t\t\t\treturn\n\t\t\t}\n\t\t}\n\t}\n\n\tonKeyUp: TLEventHandlers['onKeyUp'] = (info) => {\n\t\tswitch (info.key) {\n\t\t\tcase 'Enter': {\n\t\t\t\tthis.complete()\n\t\t\t\treturn\n\t\t\t}\n\t\t\tcase 'Alt':\n\t\t\tcase 'Shift': {\n\t\t\t\tthis.updateShapes()\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected complete() {\n\t\tthis.updateShapes()\n\t\tthis.editor.setSelectedTool('select.crop.idle', this.info)\n\t}\n\n\tprivate cancel() {\n\t\tthis.editor.bailToMark(this.markId)\n\t\tthis.editor.setSelectedTool('select.crop.idle', this.info)\n\t}\n\n\tprivate createSnapshot() {\n\t\tconst shape = this.editor.onlySelectedShape as ShapeWithCrop\n\t\treturn { shape }\n\t}\n\n\tprotected updateShapes() {\n\t\tconst shape = this.snapshot.shape as ShapeWithCrop\n\n\t\tif (!shape) return\n\n\t\tconst { originPagePoint, currentPagePoint } = this.editor.inputs\n\t\tconst delta = currentPagePoint.clone().sub(originPagePoint)\n\t\tconst partial = getTranslateCroppedImageChange(this.editor, shape, delta)\n\n\t\tif (partial) {\n\t\t\tthis.editor.updateShapes([partial], true)\n\t\t}\n\t}\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}