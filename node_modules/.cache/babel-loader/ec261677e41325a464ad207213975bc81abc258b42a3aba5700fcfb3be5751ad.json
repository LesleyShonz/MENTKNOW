{"ast":null,"code":"import _createClass from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _classCallCheck from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _defineProperty from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _objectSpread from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport { atom } from \"signia\";\nvar DEFAULT_OFFSETS = {\n  top: 10,\n  left: 10,\n  bottom: 10,\n  right: 10\n};\nfunction getActiveAreaScreenSpace(editor) {\n  var containerEl = editor.getContainer();\n  var el = containerEl.querySelector('*[data-tldraw-area=\"active-drawing\"]');\n  var out = _objectSpread(_objectSpread({}, DEFAULT_OFFSETS), {}, {\n    width: 0,\n    height: 0\n  });\n  if (el && containerEl) {\n    var cBbbox = containerEl.getBoundingClientRect();\n    var bbox = el.getBoundingClientRect();\n    out.top = bbox.top;\n    out.left = bbox.left;\n    out.bottom = cBbbox.height - bbox.bottom;\n    out.right = cBbbox.width - bbox.right;\n  }\n  out.width = editor.viewportScreenBounds.width - out.left - out.right;\n  out.height = editor.viewportScreenBounds.height - out.top - out.bottom;\n  return out;\n}\nfunction getActiveAreaPageSpace(editor) {\n  var out = getActiveAreaScreenSpace(editor);\n  var z = editor.zoomLevel;\n  out.left /= z;\n  out.right /= z;\n  out.top /= z;\n  out.bottom /= z;\n  out.width /= z;\n  out.height /= z;\n  return out;\n}\nvar ActiveAreaManager = /*#__PURE__*/_createClass(function ActiveAreaManager(editor) {\n  var _this = this;\n  _classCallCheck(this, ActiveAreaManager);\n  _defineProperty(this, \"offsets\", atom(\"activeAreaOffsets\", DEFAULT_OFFSETS));\n  _defineProperty(this, \"updateOffsets\", function () {\n    var offsets = getActiveAreaPageSpace(_this.editor);\n    _this.offsets.set(offsets);\n  });\n  // Clear the listener\n  _defineProperty(this, \"dispose\", function () {\n    window.addEventListener(\"resize\", _this.updateOffsets);\n  });\n  this.editor = editor;\n  window.addEventListener(\"resize\", this.updateOffsets);\n  this.editor.disposables.add(this.dispose);\n});\nexport { ActiveAreaManager, getActiveAreaPageSpace, getActiveAreaScreenSpace };","map":{"version":3,"names":["atom","DEFAULT_OFFSETS","top","left","bottom","right","getActiveAreaScreenSpace","editor","containerEl","getContainer","el","querySelector","out","_objectSpread","width","height","cBbbox","getBoundingClientRect","bbox","viewportScreenBounds","getActiveAreaPageSpace","z","zoomLevel","ActiveAreaManager","_createClass","_this","_classCallCheck","_defineProperty","offsets","set","window","addEventListener","updateOffsets","disposables","add","dispose"],"sources":["/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@tldraw/editor/src/lib/editor/managers/ActiveAreaManager.ts"],"sourcesContent":["import { atom } from 'signia'\nimport { Editor } from '../Editor'\n\ntype Offsets = {\n\ttop: number\n\tleft: number\n\tbottom: number\n\tright: number\n}\nconst DEFAULT_OFFSETS = {\n\ttop: 10,\n\tleft: 10,\n\tbottom: 10,\n\tright: 10,\n}\n\nexport function getActiveAreaScreenSpace(editor: Editor) {\n\tconst containerEl = editor.getContainer()\n\tconst el = containerEl.querySelector('*[data-tldraw-area=\"active-drawing\"]')\n\tconst out = {\n\t\t...DEFAULT_OFFSETS,\n\t\twidth: 0,\n\t\theight: 0,\n\t}\n\tif (el && containerEl) {\n\t\tconst cBbbox = containerEl.getBoundingClientRect()\n\t\tconst bbox = el.getBoundingClientRect()\n\t\tout.top = bbox.top\n\t\tout.left = bbox.left\n\t\tout.bottom = cBbbox.height - bbox.bottom\n\t\tout.right = cBbbox.width - bbox.right\n\t}\n\n\tout.width = editor.viewportScreenBounds.width - out.left - out.right\n\tout.height = editor.viewportScreenBounds.height - out.top - out.bottom\n\treturn out\n}\n\nexport function getActiveAreaPageSpace(editor: Editor) {\n\tconst out = getActiveAreaScreenSpace(editor)\n\tconst z = editor.zoomLevel\n\tout.left /= z\n\tout.right /= z\n\tout.top /= z\n\tout.bottom /= z\n\tout.width /= z\n\tout.height /= z\n\treturn out\n}\n\nexport class ActiveAreaManager {\n\tconstructor(public editor: Editor) {\n\t\twindow.addEventListener('resize', this.updateOffsets)\n\t\tthis.editor.disposables.add(this.dispose)\n\t}\n\n\toffsets = atom<Offsets>('activeAreaOffsets', DEFAULT_OFFSETS)\n\n\tupdateOffsets = () => {\n\t\tconst offsets = getActiveAreaPageSpace(this.editor)\n\t\tthis.offsets.set(offsets)\n\t}\n\n\t// Clear the listener\n\tdispose = () => {\n\t\twindow.addEventListener('resize', this.updateOffsets)\n\t}\n}\n"],"mappings":";;;;AAAA,SAASA,IAAA,QAAY;AASrB,IAAMC,eAAA,GAAkB;EACvBC,GAAA,EAAK;EACLC,IAAA,EAAM;EACNC,MAAA,EAAQ;EACRC,KAAA,EAAO;AACR;AAEO,SAASC,yBAAyBC,MAAA,EAAgB;EACxD,IAAMC,WAAA,GAAcD,MAAA,CAAOE,YAAA,CAAa;EACxC,IAAMC,EAAA,GAAKF,WAAA,CAAYG,aAAA,CAAc,sCAAsC;EAC3E,IAAMC,GAAA,GAAAC,aAAA,CAAAA,aAAA,KACFZ,eAAA;IACHa,KAAA,EAAO;IACPC,MAAA,EAAQ;EAAA,EACT;EACA,IAAIL,EAAA,IAAMF,WAAA,EAAa;IACtB,IAAMQ,MAAA,GAASR,WAAA,CAAYS,qBAAA,CAAsB;IACjD,IAAMC,IAAA,GAAOR,EAAA,CAAGO,qBAAA,CAAsB;IACtCL,GAAA,CAAIV,GAAA,GAAMgB,IAAA,CAAKhB,GAAA;IACfU,GAAA,CAAIT,IAAA,GAAOe,IAAA,CAAKf,IAAA;IAChBS,GAAA,CAAIR,MAAA,GAASY,MAAA,CAAOD,MAAA,GAASG,IAAA,CAAKd,MAAA;IAClCQ,GAAA,CAAIP,KAAA,GAAQW,MAAA,CAAOF,KAAA,GAAQI,IAAA,CAAKb,KAAA;EACjC;EAEAO,GAAA,CAAIE,KAAA,GAAQP,MAAA,CAAOY,oBAAA,CAAqBL,KAAA,GAAQF,GAAA,CAAIT,IAAA,GAAOS,GAAA,CAAIP,KAAA;EAC/DO,GAAA,CAAIG,MAAA,GAASR,MAAA,CAAOY,oBAAA,CAAqBJ,MAAA,GAASH,GAAA,CAAIV,GAAA,GAAMU,GAAA,CAAIR,MAAA;EAChE,OAAOQ,GAAA;AACR;AAEO,SAASQ,uBAAuBb,MAAA,EAAgB;EACtD,IAAMK,GAAA,GAAMN,wBAAA,CAAyBC,MAAM;EAC3C,IAAMc,CAAA,GAAId,MAAA,CAAOe,SAAA;EACjBV,GAAA,CAAIT,IAAA,IAAQkB,CAAA;EACZT,GAAA,CAAIP,KAAA,IAASgB,CAAA;EACbT,GAAA,CAAIV,GAAA,IAAOmB,CAAA;EACXT,GAAA,CAAIR,MAAA,IAAUiB,CAAA;EACdT,GAAA,CAAIE,KAAA,IAASO,CAAA;EACbT,GAAA,CAAIG,MAAA,IAAUM,CAAA;EACd,OAAOT,GAAA;AACR;AAAA,IAEaW,iBAAA,gBAAAC,YAAA,CACZ,SAAAD,kBAAmBhB,MAAA,EAAgB;EAAA,IAAAkB,KAAA;EAAAC,eAAA,OAAAH,iBAAA;EAAAI,eAAA,kBAKzB3B,IAAA,CAAc,qBAAqBC,eAAe;EAAA0B,eAAA,wBAE5C,YAAM;IACrB,IAAMC,OAAA,GAAUR,sBAAA,CAAuBK,KAAA,CAAKlB,MAAM;IAClDkB,KAAA,CAAKG,OAAA,CAAQC,GAAA,CAAID,OAAO;EACzB;EAAA;EAAAD,eAAA,kBAGU,YAAM;IACfG,MAAA,CAAOC,gBAAA,CAAiB,UAAUN,KAAA,CAAKO,aAAa;EACrD;EAfmB,KAAAzB,MAAA,GAAAA,MAAA;EAClBuB,MAAA,CAAOC,gBAAA,CAAiB,UAAU,KAAKC,aAAa;EACpD,KAAKzB,MAAA,CAAO0B,WAAA,CAAYC,GAAA,CAAI,KAAKC,OAAO;AACzC"},"metadata":{},"sourceType":"module","externalDependencies":[]}