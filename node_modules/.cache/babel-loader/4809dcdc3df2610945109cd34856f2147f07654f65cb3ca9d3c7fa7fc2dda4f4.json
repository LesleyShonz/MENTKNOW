{"ast":null,"code":"import _defineProperty from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _objectWithoutProperties from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";\nimport _objectSpread from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nvar _migrators;\nvar _excluded = [\"croppingId\"],\n  _excluded2 = [\"instanceId\", \"cameraId\"];\nimport { createRecordType, defineMigrations } from \"@tldraw/store\";\nimport { T } from \"@tldraw/validate\";\nimport { idValidator } from \"../misc/id-validator.mjs\";\nimport { shapeIdValidator } from \"../shapes/TLBaseShape.mjs\";\nimport { CameraRecordType } from \"./TLCamera.mjs\";\nimport { TLINSTANCE_ID } from \"./TLInstance.mjs\";\nimport { pageIdValidator } from \"./TLPage.mjs\";\nvar instancePageStateValidator = T.model(\"instance_page_state\", T.object({\n  typeName: T.literal(\"instance_page_state\"),\n  id: idValidator(\"instance_page_state\"),\n  pageId: pageIdValidator,\n  selectedIds: T.arrayOf(shapeIdValidator),\n  hintingIds: T.arrayOf(shapeIdValidator),\n  erasingIds: T.arrayOf(shapeIdValidator),\n  hoveredId: shapeIdValidator.nullable(),\n  editingId: shapeIdValidator.nullable(),\n  croppingId: shapeIdValidator.nullable(),\n  focusLayerId: shapeIdValidator.nullable()\n}));\nvar Versions = {\n  AddCroppingId: 1,\n  RemoveInstanceIdAndCameraId: 2\n};\nvar instancePageStateMigrations = defineMigrations({\n  currentVersion: Versions.RemoveInstanceIdAndCameraId,\n  migrators: (_migrators = {}, _defineProperty(_migrators, Versions.AddCroppingId, {\n    up: function up(instance) {\n      return _objectSpread(_objectSpread({}, instance), {}, {\n        croppingId: null\n      });\n    },\n    down: function down(_ref) {\n      var _croppingId = _ref.croppingId,\n        instance = _objectWithoutProperties(_ref, _excluded);\n      return instance;\n    }\n  }), _defineProperty(_migrators, Versions.RemoveInstanceIdAndCameraId, {\n    up: function up(_ref2) {\n      var _ = _ref2.instanceId,\n        __ = _ref2.cameraId,\n        instance = _objectWithoutProperties(_ref2, _excluded2);\n      return instance;\n    },\n    down: function down(instance) {\n      return _objectSpread(_objectSpread({}, instance), {}, {\n        instanceId: TLINSTANCE_ID,\n        cameraId: CameraRecordType.createId(\"void\")\n      });\n    }\n  }), _migrators)\n});\nvar InstancePageStateRecordType = createRecordType(\"instance_page_state\", {\n  migrations: instancePageStateMigrations,\n  validator: instancePageStateValidator,\n  scope: \"session\"\n}).withDefaultProperties(function () {\n  return {\n    editingId: null,\n    croppingId: null,\n    selectedIds: [],\n    hoveredId: null,\n    erasingIds: [],\n    hintingIds: [],\n    focusLayerId: null\n  };\n});\nexport { InstancePageStateRecordType, instancePageStateMigrations, instancePageStateValidator, Versions as instancePageStateVersions };","map":{"version":3,"names":["createRecordType","defineMigrations","T","idValidator","shapeIdValidator","CameraRecordType","TLINSTANCE_ID","pageIdValidator","instancePageStateValidator","model","object","typeName","literal","id","pageId","selectedIds","arrayOf","hintingIds","erasingIds","hoveredId","nullable","editingId","croppingId","focusLayerId","Versions","AddCroppingId","RemoveInstanceIdAndCameraId","instancePageStateMigrations","currentVersion","migrators","_migrators","_defineProperty","up","instance","_objectSpread","down","_ref","_croppingId","_objectWithoutProperties","_excluded","_ref2","_","instanceId","__","cameraId","_excluded2","createId","InstancePageStateRecordType","migrations","validator","scope","withDefaultProperties"],"sources":["/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@tldraw/tlschema/src/records/TLPageState.ts"],"sourcesContent":["import { BaseRecord, createRecordType, defineMigrations, RecordId } from '@tldraw/store'\nimport { T } from '@tldraw/validate'\nimport { idValidator } from '../misc/id-validator'\nimport { shapeIdValidator } from '../shapes/TLBaseShape'\nimport { CameraRecordType } from './TLCamera'\nimport { TLINSTANCE_ID } from './TLInstance'\nimport { pageIdValidator, TLPage } from './TLPage'\nimport { TLShapeId } from './TLShape'\n\n/**\n * TLInstancePageState\n *\n * State that is unique to a particular page of the document in a particular browser tab\n *\n * @public\n */\nexport interface TLInstancePageState\n\textends BaseRecord<'instance_page_state', TLInstancePageStateId> {\n\tpageId: RecordId<TLPage>\n\tselectedIds: TLShapeId[]\n\thintingIds: TLShapeId[]\n\terasingIds: TLShapeId[]\n\thoveredId: TLShapeId | null\n\teditingId: TLShapeId | null\n\tcroppingId: TLShapeId | null\n\tfocusLayerId: TLShapeId | null\n}\n\n/** @internal */\nexport const instancePageStateValidator: T.Validator<TLInstancePageState> = T.model(\n\t'instance_page_state',\n\tT.object({\n\t\ttypeName: T.literal('instance_page_state'),\n\t\tid: idValidator<TLInstancePageStateId>('instance_page_state'),\n\t\tpageId: pageIdValidator,\n\t\tselectedIds: T.arrayOf(shapeIdValidator),\n\t\thintingIds: T.arrayOf(shapeIdValidator),\n\t\terasingIds: T.arrayOf(shapeIdValidator),\n\t\thoveredId: shapeIdValidator.nullable(),\n\t\teditingId: shapeIdValidator.nullable(),\n\t\tcroppingId: shapeIdValidator.nullable(),\n\t\tfocusLayerId: shapeIdValidator.nullable(),\n\t})\n)\n\nconst Versions = {\n\tAddCroppingId: 1,\n\tRemoveInstanceIdAndCameraId: 2,\n} as const\n\n/** @internal */\nexport { Versions as instancePageStateVersions }\n\n/** @public */\nexport const instancePageStateMigrations = defineMigrations({\n\tcurrentVersion: Versions.RemoveInstanceIdAndCameraId,\n\tmigrators: {\n\t\t[Versions.AddCroppingId]: {\n\t\t\tup(instance) {\n\t\t\t\treturn { ...instance, croppingId: null }\n\t\t\t},\n\t\t\tdown({ croppingId: _croppingId, ...instance }) {\n\t\t\t\treturn instance\n\t\t\t},\n\t\t},\n\t\t[Versions.RemoveInstanceIdAndCameraId]: {\n\t\t\tup({ instanceId: _, cameraId: __, ...instance }) {\n\t\t\t\treturn instance\n\t\t\t},\n\t\t\tdown(instance) {\n\t\t\t\t// this should never be called since we bump the schema version\n\t\t\t\treturn {\n\t\t\t\t\t...instance,\n\t\t\t\t\tinstanceId: TLINSTANCE_ID,\n\t\t\t\t\tcameraId: CameraRecordType.createId('void'),\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t},\n})\n\n/** @public */\nexport const InstancePageStateRecordType = createRecordType<TLInstancePageState>(\n\t'instance_page_state',\n\t{\n\t\tmigrations: instancePageStateMigrations,\n\t\tvalidator: instancePageStateValidator,\n\t\tscope: 'session',\n\t}\n).withDefaultProperties(\n\t(): Omit<TLInstancePageState, 'id' | 'typeName' | 'pageId'> => ({\n\t\teditingId: null,\n\t\tcroppingId: null,\n\t\tselectedIds: [],\n\t\thoveredId: null,\n\t\terasingIds: [],\n\t\thintingIds: [],\n\t\tfocusLayerId: null,\n\t})\n)\n\n/** @public */\nexport type TLInstancePageStateId = RecordId<TLInstancePageState>\n"],"mappings":";;;;;;AAAA,SAAqBA,gBAAA,EAAkBC,gBAAA,QAAkC;AACzE,SAASC,CAAA,QAAS;AAClB,SAASC,WAAA,QAAmB;AAC5B,SAASC,gBAAA,QAAwB;AACjC,SAASC,gBAAA,QAAwB;AACjC,SAASC,aAAA,QAAqB;AAC9B,SAASC,eAAA,QAA+B;AAuBjC,IAAMC,0BAAA,GAA+DN,CAAA,CAAEO,KAAA,CAC7E,uBACAP,CAAA,CAAEQ,MAAA,CAAO;EACRC,QAAA,EAAUT,CAAA,CAAEU,OAAA,CAAQ,qBAAqB;EACzCC,EAAA,EAAIV,WAAA,CAAmC,qBAAqB;EAC5DW,MAAA,EAAQP,eAAA;EACRQ,WAAA,EAAab,CAAA,CAAEc,OAAA,CAAQZ,gBAAgB;EACvCa,UAAA,EAAYf,CAAA,CAAEc,OAAA,CAAQZ,gBAAgB;EACtCc,UAAA,EAAYhB,CAAA,CAAEc,OAAA,CAAQZ,gBAAgB;EACtCe,SAAA,EAAWf,gBAAA,CAAiBgB,QAAA,CAAS;EACrCC,SAAA,EAAWjB,gBAAA,CAAiBgB,QAAA,CAAS;EACrCE,UAAA,EAAYlB,gBAAA,CAAiBgB,QAAA,CAAS;EACtCG,YAAA,EAAcnB,gBAAA,CAAiBgB,QAAA,CAAS;AACzC,CAAC,CACF;AAEA,IAAMI,QAAA,GAAW;EAChBC,aAAA,EAAe;EACfC,2BAAA,EAA6B;AAC9B;AAMO,IAAMC,2BAAA,GAA8B1B,gBAAA,CAAiB;EAC3D2B,cAAA,EAAgBJ,QAAA,CAASE,2BAAA;EACzBG,SAAA,GAAAC,UAAA,OAAAC,eAAA,CAAAD,UAAA,EACEN,QAAA,CAASC,aAAa,EAAG;IACzBO,EAAA,WAAAA,GAAGC,QAAA,EAAU;MACZ,OAAAC,aAAA,CAAAA,aAAA,KAAYD,QAAA;QAAUX,UAAA,EAAY;MAAA;IACnC;IACAa,IAAA,WAAAA,KAAAC,IAAA,EAA+C;MAAA,IAA5BC,WAAA,GAAAD,IAAA,CAAZd,UAAA;QAA4BW,QAAA,GAAAK,wBAAA,CAAAF,IAAA,EAAAG,SAAA;MAClC,OAAON,QAAA;IACR;EACD,IAAAF,eAAA,CAAAD,UAAA,EACCN,QAAA,CAASE,2BAA2B,EAAG;IACvCM,EAAA,WAAAA,GAAAQ,KAAA,EAAiD;MAAA,IAAhCC,CAAA,GAAAD,KAAA,CAAZE,UAAA;QAAyBC,EAAA,GAAAH,KAAA,CAAVI,QAAA;QAAiBX,QAAA,GAAAK,wBAAA,CAAAE,KAAA,EAAAK,UAAA;MACpC,OAAOZ,QAAA;IACR;IACAE,IAAA,WAAAA,KAAKF,QAAA,EAAU;MAEd,OAAAC,aAAA,CAAAA,aAAA,KACID,QAAA;QACHS,UAAA,EAAYpC,aAAA;QACZsC,QAAA,EAAUvC,gBAAA,CAAiByC,QAAA,CAAS,MAAM;MAAA;IAE5C;EACD,IAAAhB,UAAA;AAEF,CAAC;AAGM,IAAMiB,2BAAA,GAA8B/C,gBAAA,CAC1C,uBACA;EACCgD,UAAA,EAAYrB,2BAAA;EACZsB,SAAA,EAAWzC,0BAAA;EACX0C,KAAA,EAAO;AACR,CACD,EAAEC,qBAAA,CACD;EAAA,OAAgE;IAC/D9B,SAAA,EAAW;IACXC,UAAA,EAAY;IACZP,WAAA,EAAa,EAAC;IACdI,SAAA,EAAW;IACXD,UAAA,EAAY,EAAC;IACbD,UAAA,EAAY,EAAC;IACbM,YAAA,EAAc;EACf;AAAA,CACD"},"metadata":{},"sourceType":"module","externalDependencies":[]}