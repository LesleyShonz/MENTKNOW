/*! For license information please see main.445e208a.js.LICENSE.txt */
!function(){var e={2009:function(e,t){"use strict";t.byteLength=function(e){var t=s(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,o=s(e),a=o[0],u=o[1],l=new i(function(e,t,n){return 3*(t+n)/4-n}(0,a,u)),c=0,d=u>0?a-4:a;for(n=0;n<d;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],l[c++]=t>>16&255,l[c++]=t>>8&255,l[c++]=255&t;2===u&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,l[c++]=255&t);1===u&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,l[c++]=t>>8&255,l[c++]=255&t);return l},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,o=[],a=16383,s=0,l=r-i;s<l;s+=a)o.push(u(e,s,s+a>l?l:s+a));1===i?(t=e[r-1],o.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return o.join("")};for(var n=[],r=[],i="undefined"!==typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)n[a]=o[a],r[o.charCodeAt(a)]=a;function s(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function u(e,t,r){for(var i,o,a=[],s=t;s<r;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return a.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},9778:function(e,t,n){"use strict";var r=n(6690).default,i=n(9728).default,o=n(6115).default,a=n(1655).default,s=n(6389).default,u=n(2009),l=n(4038),c="function"===typeof Symbol&&"function"===typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.lW=h,t.h2=50;var d=2147483647;function f(e){if(e>d)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,h.prototype),t}function h(e,t,n){if("number"===typeof e){if("string"===typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return g(e)}return p(e,t,n)}function p(e,t,n){if("string"===typeof e)return function(e,t){"string"===typeof t&&""!==t||(t="utf8");if(!h.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|w(e,t),r=f(n),i=r.write(e,t);i!==n&&(r=r.slice(0,i));return r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(ee(e,Uint8Array)){var t=new Uint8Array(e);return y(t.buffer,t.byteOffset,t.byteLength)}return m(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(ee(e,ArrayBuffer)||e&&ee(e.buffer,ArrayBuffer))return y(e,t,n);if("undefined"!==typeof SharedArrayBuffer&&(ee(e,SharedArrayBuffer)||e&&ee(e.buffer,SharedArrayBuffer)))return y(e,t,n);if("number"===typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return h.from(r,t,n);var i=function(e){if(h.isBuffer(e)){var t=0|b(e.length),n=f(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!==typeof e.length||te(e.length)?f(0):m(e);if("Buffer"===e.type&&Array.isArray(e.data))return m(e.data)}(e);if(i)return i;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof e[Symbol.toPrimitive])return h.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function v(e){if("number"!==typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function g(e){return v(e),f(e<0?0:0|b(e))}function m(e){for(var t=e.length<0?0:0|b(e.length),n=f(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function y(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,h.prototype),r}function b(e){if(e>=d)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+d.toString(16)+" bytes");return 0|e}function w(e,t){if(h.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||ee(e,ArrayBuffer))return e.byteLength;if("string"!==typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return Q(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return J(e).length;default:if(i)return r?-1:Q(e).length;t=(""+t).toLowerCase(),i=!0}}function x(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return R(this,t,n);case"utf8":case"utf-8":return A(this,t,n);case"ascii":return O(this,t,n);case"latin1":case"binary":return N(this,t,n);case"base64":return M(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function k(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function S(e,t,n,r,i){if(0===e.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),te(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"===typeof t&&(t=h.from(t,r)),h.isBuffer(t))return 0===t.length?-1:_(e,t,n,r,i);if("number"===typeof t)return t&=255,"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):_(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function _(e,t,n,r,i){var o,a=1,s=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,n/=2}function l(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var c=-1;for(o=n;o<s;o++)if(l(e,o)===l(t,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===u)return c*a}else-1!==c&&(o-=o-c),c=-1}else for(n+u>s&&(n=s-u),o=n;o>=0;o--){for(var d=!0,f=0;f<u;f++)if(l(e,o+f)!==l(t,f)){d=!1;break}if(d)return o}return-1}function E(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o,a=t.length;for(r>a/2&&(r=a/2),o=0;o<r;++o){var s=parseInt(t.substr(2*o,2),16);if(te(s))return o;e[n+o]=s}return o}function C(e,t,n,r){return Z(Q(t,e.length-n),e,n,r)}function P(e,t,n,r){return Z(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function I(e,t,n,r){return Z(J(t),e,n,r)}function j(e,t,n,r){return Z(function(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function M(e,t,n){return 0===t&&n===e.length?u.fromByteArray(e):u.fromByteArray(e.slice(t,n))}function A(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o=e[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s<=n){var u=void 0,l=void 0,c=void 0,d=void 0;switch(s){case 1:o<128&&(a=o);break;case 2:128===(192&(u=e[i+1]))&&(d=(31&o)<<6|63&u)>127&&(a=d);break;case 3:u=e[i+1],l=e[i+2],128===(192&u)&&128===(192&l)&&(d=(15&o)<<12|(63&u)<<6|63&l)>2047&&(d<55296||d>57343)&&(a=d);break;case 4:u=e[i+1],l=e[i+2],c=e[i+3],128===(192&u)&&128===(192&l)&&128===(192&c)&&(d=(15&o)<<18|(63&u)<<12|(63&l)<<6|63&c)>65535&&d<1114112&&(a=d)}}null===a?(a=65533,s=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),i+=s}return function(e){var t=e.length;if(t<=T)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=T));return n}(r)}h.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(n){return!1}}(),h.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}}),h.poolSize=8192,h.from=function(e,t,n){return p(e,t,n)},Object.setPrototypeOf(h.prototype,Uint8Array.prototype),Object.setPrototypeOf(h,Uint8Array),h.alloc=function(e,t,n){return function(e,t,n){return v(e),e<=0?f(e):void 0!==t?"string"===typeof n?f(e).fill(t,n):f(e).fill(t):f(e)}(e,t,n)},h.allocUnsafe=function(e){return g(e)},h.allocUnsafeSlow=function(e){return g(e)},h.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==h.prototype},h.compare=function(e,t){if(ee(e,Uint8Array)&&(e=h.from(e,e.offset,e.byteLength)),ee(t,Uint8Array)&&(t=h.from(t,t.offset,t.byteLength)),!h.isBuffer(e)||!h.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},h.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return h.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=h.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(ee(o,Uint8Array))i+o.length>r.length?(h.isBuffer(o)||(o=h.from(o)),o.copy(r,i)):Uint8Array.prototype.set.call(r,o,i);else{if(!h.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i)}i+=o.length}return r},h.byteLength=w,h.prototype._isBuffer=!0,h.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)k(this,t,t+1);return this},h.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)k(this,t,t+3),k(this,t+1,t+2);return this},h.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)k(this,t,t+7),k(this,t+1,t+6),k(this,t+2,t+5),k(this,t+3,t+4);return this},h.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?A(this,0,e):x.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(e){if(!h.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===h.compare(this,e)},h.prototype.inspect=function(){var e="",n=t.h2;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},c&&(h.prototype[c]=h.prototype.inspect),h.prototype.compare=function(e,t,n,r,i){if(ee(e,Uint8Array)&&(e=h.from(e,e.offset,e.byteLength)),!h.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(o,a),u=this.slice(r,i),l=e.slice(t,n),c=0;c<s;++c)if(u[c]!==l[c]){o=u[c],a=l[c];break}return o<a?-1:a<o?1:0},h.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},h.prototype.indexOf=function(e,t,n){return S(this,e,t,n,!0)},h.prototype.lastIndexOf=function(e,t,n){return S(this,e,t,n,!1)},h.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"===typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return E(this,e,t,n);case"utf8":case"utf-8":return C(this,e,t,n);case"ascii":case"latin1":case"binary":return P(this,e,t,n);case"base64":return I(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var T=4096;function O(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function N(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function R(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=ne[e[o]];return i}function L(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length-1;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function D(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function z(e,t,n,r,i,o){if(!h.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function B(e,t,n,r,i){q(t,r,i,e,n,7);var o=Number(t&BigInt(4294967295));e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o;var a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,n}function F(e,t,n,r,i){q(t,r,i,e,n,7);var o=Number(t&BigInt(4294967295));e[n+7]=o,o>>=8,e[n+6]=o,o>>=8,e[n+5]=o,o>>=8,e[n+4]=o;var a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=a,a>>=8,e[n+2]=a,a>>=8,e[n+1]=a,a>>=8,e[n]=a,n+8}function U(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function K(e,t,n,r,i){return t=+t,n>>>=0,i||U(e,0,n,4),l.write(e,t,n,r,23,4),n+4}function V(e,t,n,r,i){return t=+t,n>>>=0,i||U(e,0,n,8),l.write(e,t,n,r,52,8),n+8}h.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return Object.setPrototypeOf(r,h.prototype),r},h.prototype.readUintLE=h.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||D(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},h.prototype.readUintBE=h.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||D(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},h.prototype.readUint8=h.prototype.readUInt8=function(e,t){return e>>>=0,t||D(e,1,this.length),this[e]},h.prototype.readUint16LE=h.prototype.readUInt16LE=function(e,t){return e>>>=0,t||D(e,2,this.length),this[e]|this[e+1]<<8},h.prototype.readUint16BE=h.prototype.readUInt16BE=function(e,t){return e>>>=0,t||D(e,2,this.length),this[e]<<8|this[e+1]},h.prototype.readUint32LE=h.prototype.readUInt32LE=function(e,t){return e>>>=0,t||D(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},h.prototype.readUint32BE=h.prototype.readUInt32BE=function(e,t){return e>>>=0,t||D(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},h.prototype.readBigUInt64LE=re((function(e){X(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||$(e,this.length-8);var r=t+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,24),i=this[++e]+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+n*Math.pow(2,24);return BigInt(r)+(BigInt(i)<<BigInt(32))})),h.prototype.readBigUInt64BE=re((function(e){X(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||$(e,this.length-8);var r=t*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+this[++e],i=this[++e]*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+n;return(BigInt(r)<<BigInt(32))+BigInt(i)})),h.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||D(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},h.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||D(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},h.prototype.readInt8=function(e,t){return e>>>=0,t||D(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},h.prototype.readInt16LE=function(e,t){e>>>=0,t||D(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},h.prototype.readInt16BE=function(e,t){e>>>=0,t||D(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},h.prototype.readInt32LE=function(e,t){return e>>>=0,t||D(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},h.prototype.readInt32BE=function(e,t){return e>>>=0,t||D(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},h.prototype.readBigInt64LE=re((function(e){X(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||$(e,this.length-8);var r=this[e+4]+this[e+5]*Math.pow(2,8)+this[e+6]*Math.pow(2,16)+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,24))})),h.prototype.readBigInt64BE=re((function(e){X(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||$(e,this.length-8);var r=(t<<24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+n)})),h.prototype.readFloatLE=function(e,t){return e>>>=0,t||D(e,4,this.length),l.read(this,e,!0,23,4)},h.prototype.readFloatBE=function(e,t){return e>>>=0,t||D(e,4,this.length),l.read(this,e,!1,23,4)},h.prototype.readDoubleLE=function(e,t){return e>>>=0,t||D(e,8,this.length),l.read(this,e,!0,52,8)},h.prototype.readDoubleBE=function(e,t){return e>>>=0,t||D(e,8,this.length),l.read(this,e,!1,52,8)},h.prototype.writeUintLE=h.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||z(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},h.prototype.writeUintBE=h.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||z(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},h.prototype.writeUint8=h.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||z(this,e,t,1,255,0),this[t]=255&e,t+1},h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||z(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||z(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||z(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||z(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},h.prototype.writeBigUInt64LE=re((function(e){return B(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),h.prototype.writeBigUInt64BE=re((function(e){return F(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),h.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);z(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},h.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);z(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},h.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||z(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},h.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||z(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},h.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||z(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},h.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||z(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},h.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||z(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},h.prototype.writeBigInt64LE=re((function(e){return B(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),h.prototype.writeBigInt64BE=re((function(e){return F(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),h.prototype.writeFloatLE=function(e,t,n){return K(this,e,t,!0,n)},h.prototype.writeFloatBE=function(e,t,n){return K(this,e,t,!1,n)},h.prototype.writeDoubleLE=function(e,t,n){return V(this,e,t,!0,n)},h.prototype.writeDoubleBE=function(e,t,n){return V(this,e,t,!1,n)},h.prototype.copy=function(e,t,n,r){if(!h.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i=r-n;return this===e&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},h.prototype.fill=function(e,t,n,r){if("string"===typeof e){if("string"===typeof t?(r=t,t=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!h.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var i=e.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(e=i)}}else"number"===typeof e?e&=255:"boolean"===typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"===typeof e)for(o=t;o<n;++o)this[o]=e;else{var a=h.isBuffer(e)?e:h.from(e,r),s=a.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=a[o%s]}return this};var W={};function H(e,t,n){W[e]=function(n){a(l,n);var u=s(l);function l(){var n;return r(this,l),n=u.call(this),Object.defineProperty(o(n),"message",{value:t.apply(o(n),arguments),writable:!0,configurable:!0}),n.name="".concat(n.name," [").concat(e,"]"),n.stack,delete n.name,n}return i(l,[{key:"code",get:function(){return e},set:function(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(e,"]: ").concat(this.message)}}]),l}(n)}function Y(e){for(var t="",n=e.length,r="-"===e[0]?1:0;n>=r+4;n-=3)t="_".concat(e.slice(n-3,n)).concat(t);return"".concat(e.slice(0,n)).concat(t)}function q(e,t,n,r,i,o){if(e>n||e<t){var a,s="bigint"===typeof t?"n":"";throw a=o>3?0===t||t===BigInt(0)?">= 0".concat(s," and < 2").concat(s," ** ").concat(8*(o+1)).concat(s):">= -(2".concat(s," ** ").concat(8*(o+1)-1).concat(s,") and < 2 ** ")+"".concat(8*(o+1)-1).concat(s):">= ".concat(t).concat(s," and <= ").concat(n).concat(s),new W.ERR_OUT_OF_RANGE("value",a,e)}!function(e,t,n){X(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||$(t,e.length-(n+1))}(r,i,o)}function X(e,t){if("number"!==typeof e)throw new W.ERR_INVALID_ARG_TYPE(t,"number",e)}function $(e,t,n){if(Math.floor(e)!==e)throw X(e,n),new W.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new W.ERR_BUFFER_OUT_OF_BOUNDS;throw new W.ERR_OUT_OF_RANGE(n||"offset",">= ".concat(n?1:0," and <= ").concat(t),e)}H("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?"".concat(e," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"}),RangeError),H("ERR_INVALID_ARG_TYPE",(function(e,t){return'The "'.concat(e,'" argument must be of type number. Received type ').concat(typeof t)}),TypeError),H("ERR_OUT_OF_RANGE",(function(e,t,n){var r='The value of "'.concat(e,'" is out of range.'),i=n;return Number.isInteger(n)&&Math.abs(n)>Math.pow(2,32)?i=Y(String(n)):"bigint"===typeof n&&(i=String(n),(n>Math.pow(BigInt(2),BigInt(32))||n<-Math.pow(BigInt(2),BigInt(32)))&&(i=Y(i)),i+="n"),r+=" It must be ".concat(t,". Received ").concat(i)}),RangeError);var G=/[^+/0-9A-Za-z-_]/g;function Q(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function J(e){return u.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(G,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function Z(e,t,n,r){var i;for(i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function ee(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function te(e){return e!==e}var ne=function(){for(var e="0123456789abcdef",t=new Array(256),n=0;n<16;++n)for(var r=16*n,i=0;i<16;++i)t[r+i]=e[n]+e[i];return t}();function re(e){return"undefined"===typeof BigInt?ie:e}function ie(){throw new Error("BigInt not supported")}},1694:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var o=typeof n;if("string"===o||"number"===o)e.push(n);else if(Array.isArray(n)){if(n.length){var a=i.apply(null,n);a&&e.push(a)}}else if("object"===o){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var s in n)r.call(n,s)&&n[s]&&e.push(s)}}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},6724:function(e,t,n){"use strict";var r=n(9218),i=n(1772),o=TypeError;e.exports=function(e){if(r(e))return e;throw o(i(e)+" is not a function")}},5715:function(e,t,n){"use strict";var r=n(5028),i=n(4385),o=n(1592).f,a=r("unscopables"),s=Array.prototype;void 0===s[a]&&o(s,a,{configurable:!0,value:i(null)}),e.exports=function(e){s[a][e]=!0}},5466:function(e,t,n){"use strict";var r=n(8424).charAt;e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},5884:function(e,t,n){"use strict";var r=n(3931),i=String,o=TypeError;e.exports=function(e){if(r(e))return e;throw o(i(e)+" is not an object")}},488:function(e,t,n){"use strict";var r=n(5770),i=n(1823),o=n(3385),a=function(e){return function(t,n,a){var s,u=r(t),l=o(u),c=i(a,l);if(e&&n!==n){for(;l>c;)if((s=u[c++])!==s)return!0}else for(;l>c;c++)if((e||c in u)&&u[c]===n)return e||c||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},9026:function(e,t,n){"use strict";var r=n(1941),i=n(1219),o=n(3931),a=n(5028)("species"),s=Array;e.exports=function(e){var t;return r(e)&&(t=e.constructor,(i(t)&&(t===s||r(t.prototype))||o(t)&&null===(t=t[a]))&&(t=void 0)),void 0===t?s:t}},5491:function(e,t,n){"use strict";var r=n(9026);e.exports=function(e,t){return new(r(e))(0===t?0:t)}},2933:function(e,t,n){"use strict";var r=n(4932),i=r({}.toString),o=r("".slice);e.exports=function(e){return o(i(e),8,-1)}},7205:function(e,t,n){"use strict";var r=n(6042),i=n(9218),o=n(2933),a=n(5028)("toStringTag"),s=Object,u="Arguments"===o(function(){return arguments}());e.exports=r?o:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(n){}}(t=s(e),a))?n:u?o(t):"Object"===(r=o(t))&&i(t.callee)?"Arguments":r}},189:function(e,t,n){"use strict";var r=n(3013),i=n(7273),o=n(2573),a=n(1592);e.exports=function(e,t,n){for(var s=i(t),u=a.f,l=o.f,c=0;c<s.length;c++){var d=s[c];r(e,d)||n&&r(n,d)||u(e,d,l(t,d))}}},3873:function(e,t,n){"use strict";var r=n(1196),i=n(1592),o=n(2037);e.exports=r?function(e,t,n){return i.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},2037:function(e){"use strict";e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},7543:function(e,t,n){"use strict";var r=n(9218),i=n(1592),o=n(2557),a=n(9131);e.exports=function(e,t,n,s){s||(s={});var u=s.enumerable,l=void 0!==s.name?s.name:t;if(r(n)&&o(n,l,s),s.global)u?e[t]=n:a(t,n);else{try{s.unsafe?e[t]&&(u=!0):delete e[t]}catch(c){}u?e[t]=n:i.f(e,t,{value:n,enumerable:!1,configurable:!s.nonConfigurable,writable:!s.nonWritable})}return e}},9131:function(e,t,n){"use strict";var r=n(6840),i=Object.defineProperty;e.exports=function(e,t){try{i(r,e,{value:t,configurable:!0,writable:!0})}catch(n){r[e]=t}return t}},1196:function(e,t,n){"use strict";var r=n(2837);e.exports=!r((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},4363:function(e){"use strict";var t="object"==typeof document&&document.all,n="undefined"==typeof t&&void 0!==t;e.exports={all:t,IS_HTMLDDA:n}},937:function(e,t,n){"use strict";var r=n(6840),i=n(3931),o=r.document,a=i(o)&&i(o.createElement);e.exports=function(e){return a?o.createElement(e):{}}},6117:function(e){"use strict";var t=TypeError;e.exports=function(e){if(e>9007199254740991)throw t("Maximum allowed index exceeded");return e}},4839:function(e){"use strict";e.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},5372:function(e,t,n){"use strict";var r,i,o=n(6840),a=n(4839),s=o.process,u=o.Deno,l=s&&s.versions||u&&u.version,c=l&&l.v8;c&&(i=(r=c.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!i&&a&&(!(r=a.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/))&&(i=+r[1]),e.exports=i},2080:function(e){"use strict";e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},7768:function(e,t,n){"use strict";var r=n(6840),i=n(2573).f,o=n(3873),a=n(7543),s=n(9131),u=n(189),l=n(6673);e.exports=function(e,t){var n,c,d,f,h,p=e.target,v=e.global,g=e.stat;if(n=v?r:g?r[p]||s(p,{}):(r[p]||{}).prototype)for(c in t){if(f=t[c],d=e.dontCallGetSet?(h=i(n,c))&&h.value:n[c],!l(v?c:p+(g?".":"#")+c,e.forced)&&void 0!==d){if(typeof f==typeof d)continue;u(f,d)}(e.sham||d&&d.sham)&&o(f,"sham",!0),a(n,c,f,e)}}},2837:function(e){"use strict";e.exports=function(e){try{return!!e()}catch(t){return!0}}},8093:function(e,t,n){"use strict";n(447);var r=n(7926),i=n(7543),o=n(4087),a=n(2837),s=n(5028),u=n(3873),l=s("species"),c=RegExp.prototype;e.exports=function(e,t,n,d){var f=s(e),h=!a((function(){var t={};return t[f]=function(){return 7},7!==""[e](t)})),p=h&&!a((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[l]=function(){return n},n.flags="",n[f]=/./[f]),n.exec=function(){return t=!0,null},n[f](""),!t}));if(!h||!p||n){var v=r(/./[f]),g=t(f,""[e],(function(e,t,n,i,a){var s=r(e),u=t.exec;return u===o||u===c.exec?h&&!a?{done:!0,value:v(t,n,i)}:{done:!0,value:s(n,t,i)}:{done:!1}}));i(String.prototype,e,g[0]),i(c,f,g[1])}d&&u(c[f],"sham",!0)}},8264:function(e,t,n){"use strict";var r=n(1941),i=n(3385),o=n(6117),a=n(5851);e.exports=function e(t,n,s,u,l,c,d,f){for(var h,p=l,v=0,g=!!d&&a(d,f);v<u;)v in s&&(h=g?g(s[v],v,n):s[v],c>0&&r(h)?p=e(t,n,h,i(h),p,c-1)-1:(o(p+1),t[p]=h),p++),v++;return p}},6339:function(e,t,n){"use strict";var r=n(4138),i=Function.prototype,o=i.apply,a=i.call;e.exports="object"==typeof Reflect&&Reflect.apply||(r?a.bind(o):function(){return a.apply(o,arguments)})},5851:function(e,t,n){"use strict";var r=n(7926),i=n(6724),o=n(4138),a=r(r.bind);e.exports=function(e,t){return i(e),void 0===t?e:o?a(e,t):function(){return e.apply(t,arguments)}}},4138:function(e,t,n){"use strict";var r=n(2837);e.exports=!r((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},8513:function(e,t,n){"use strict";var r=n(4138),i=Function.prototype.call;e.exports=r?i.bind(i):function(){return i.apply(i,arguments)}},3211:function(e,t,n){"use strict";var r=n(1196),i=n(3013),o=Function.prototype,a=r&&Object.getOwnPropertyDescriptor,s=i(o,"name"),u=s&&"something"===function(){}.name,l=s&&(!r||r&&a(o,"name").configurable);e.exports={EXISTS:s,PROPER:u,CONFIGURABLE:l}},7926:function(e,t,n){"use strict";var r=n(2933),i=n(4932);e.exports=function(e){if("Function"===r(e))return i(e)}},4932:function(e,t,n){"use strict";var r=n(4138),i=Function.prototype,o=i.call,a=r&&i.bind.bind(o,o);e.exports=r?a:function(e){return function(){return o.apply(e,arguments)}}},1240:function(e,t,n){"use strict";var r=n(6840),i=n(9218);e.exports=function(e,t){return arguments.length<2?(n=r[e],i(n)?n:void 0):r[e]&&r[e][t];var n}},3863:function(e,t,n){"use strict";var r=n(6724),i=n(9055);e.exports=function(e,t){var n=e[t];return i(n)?void 0:r(n)}},7794:function(e,t,n){"use strict";var r=n(4932),i=n(8385),o=Math.floor,a=r("".charAt),s=r("".replace),u=r("".slice),l=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,c=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,r,d,f){var h=n+e.length,p=r.length,v=c;return void 0!==d&&(d=i(d),v=l),s(f,v,(function(i,s){var l;switch(a(s,0)){case"$":return"$";case"&":return e;case"`":return u(t,0,n);case"'":return u(t,h);case"<":l=d[u(s,1,-1)];break;default:var c=+s;if(0===c)return i;if(c>p){var f=o(c/10);return 0===f?i:f<=p?void 0===r[f-1]?a(s,1):r[f-1]+a(s,1):i}l=r[c-1]}return void 0===l?"":l}))}},6840:function(e,t,n){"use strict";var r=function(e){return e&&e.Math===Math&&e};e.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||function(){return this}()||this||Function("return this")()},3013:function(e,t,n){"use strict";var r=n(4932),i=n(8385),o=r({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return o(i(e),t)}},6196:function(e){"use strict";e.exports={}},2012:function(e,t,n){"use strict";var r=n(1240);e.exports=r("document","documentElement")},6707:function(e,t,n){"use strict";var r=n(1196),i=n(2837),o=n(937);e.exports=!r&&!i((function(){return 7!==Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},1036:function(e,t,n){"use strict";var r=n(4932),i=n(2837),o=n(2933),a=Object,s=r("".split);e.exports=i((function(){return!a("z").propertyIsEnumerable(0)}))?function(e){return"String"===o(e)?s(e,""):a(e)}:a},8589:function(e,t,n){"use strict";var r=n(4932),i=n(9218),o=n(4460),a=r(Function.toString);i(o.inspectSource)||(o.inspectSource=function(e){return a(e)}),e.exports=o.inspectSource},9671:function(e,t,n){"use strict";var r,i,o,a=n(1615),s=n(6840),u=n(3931),l=n(3873),c=n(3013),d=n(4460),f=n(9378),h=n(6196),p="Object already initialized",v=s.TypeError,g=s.WeakMap;if(a||d.state){var m=d.state||(d.state=new g);m.get=m.get,m.has=m.has,m.set=m.set,r=function(e,t){if(m.has(e))throw v(p);return t.facade=e,m.set(e,t),t},i=function(e){return m.get(e)||{}},o=function(e){return m.has(e)}}else{var y=f("state");h[y]=!0,r=function(e,t){if(c(e,y))throw v(p);return t.facade=e,l(e,y,t),t},i=function(e){return c(e,y)?e[y]:{}},o=function(e){return c(e,y)}}e.exports={set:r,get:i,has:o,enforce:function(e){return o(e)?i(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!u(t)||(n=i(t)).type!==e)throw v("Incompatible receiver, "+e+" required");return n}}}},1941:function(e,t,n){"use strict";var r=n(2933);e.exports=Array.isArray||function(e){return"Array"===r(e)}},9218:function(e,t,n){"use strict";var r=n(4363),i=r.all;e.exports=r.IS_HTMLDDA?function(e){return"function"==typeof e||e===i}:function(e){return"function"==typeof e}},1219:function(e,t,n){"use strict";var r=n(4932),i=n(2837),o=n(9218),a=n(7205),s=n(1240),u=n(8589),l=function(){},c=[],d=s("Reflect","construct"),f=/^\s*(?:class|function)\b/,h=r(f.exec),p=!f.exec(l),v=function(e){if(!o(e))return!1;try{return d(l,c,e),!0}catch(t){return!1}},g=function(e){if(!o(e))return!1;switch(a(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return p||!!h(f,u(e))}catch(t){return!0}};g.sham=!0,e.exports=!d||i((function(){var e;return v(v.call)||!v(Object)||!v((function(){e=!0}))||e}))?g:v},6673:function(e,t,n){"use strict";var r=n(2837),i=n(9218),o=/#|\.prototype\./,a=function(e,t){var n=u[s(e)];return n===c||n!==l&&(i(t)?r(t):!!t)},s=a.normalize=function(e){return String(e).replace(o,".").toLowerCase()},u=a.data={},l=a.NATIVE="N",c=a.POLYFILL="P";e.exports=a},9055:function(e){"use strict";e.exports=function(e){return null===e||void 0===e}},3931:function(e,t,n){"use strict";var r=n(9218),i=n(4363),o=i.all;e.exports=i.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:r(e)||e===o}:function(e){return"object"==typeof e?null!==e:r(e)}},3608:function(e){"use strict";e.exports=!1},8287:function(e,t,n){"use strict";var r=n(1240),i=n(9218),o=n(8946),a=n(7611),s=Object;e.exports=a?function(e){return"symbol"==typeof e}:function(e){var t=r("Symbol");return i(t)&&o(t.prototype,s(e))}},3385:function(e,t,n){"use strict";var r=n(2347);e.exports=function(e){return r(e.length)}},2557:function(e,t,n){"use strict";var r=n(4932),i=n(2837),o=n(9218),a=n(3013),s=n(1196),u=n(3211).CONFIGURABLE,l=n(8589),c=n(9671),d=c.enforce,f=c.get,h=String,p=Object.defineProperty,v=r("".slice),g=r("".replace),m=r([].join),y=s&&!i((function(){return 8!==p((function(){}),"length",{value:8}).length})),b=String(String).split("String"),w=e.exports=function(e,t,n){"Symbol("===v(h(t),0,7)&&(t="["+g(h(t),/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!a(e,"name")||u&&e.name!==t)&&(s?p(e,"name",{value:t,configurable:!0}):e.name=t),y&&n&&a(n,"arity")&&e.length!==n.arity&&p(e,"length",{value:n.arity});try{n&&a(n,"constructor")&&n.constructor?s&&p(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(i){}var r=d(e);return a(r,"source")||(r.source=m(b,"string"==typeof t?t:"")),e};Function.prototype.toString=w((function(){return o(this)&&f(this).source||l(this)}),"toString")},1246:function(e){"use strict";var t=Math.ceil,n=Math.floor;e.exports=Math.trunc||function(e){var r=+e;return(r>0?n:t)(r)}},4385:function(e,t,n){"use strict";var r,i=n(5884),o=n(1697),a=n(2080),s=n(6196),u=n(2012),l=n(937),c=n(9378),d="prototype",f="script",h=c("IE_PROTO"),p=function(){},v=function(e){return"<"+f+">"+e+"</"+f+">"},g=function(e){e.write(v("")),e.close();var t=e.parentWindow.Object;return e=null,t},m=function(){try{r=new ActiveXObject("htmlfile")}catch(t){}m="undefined"!=typeof document?document.domain&&r?g(r):function(){var e,t=l("iframe"),n="java"+f+":";return t.style.display="none",u.appendChild(t),t.src=String(n),(e=t.contentWindow.document).open(),e.write(v("document.F=Object")),e.close(),e.F}():g(r);for(var e=a.length;e--;)delete m[d][a[e]];return m()};s[h]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(p[d]=i(e),n=new p,p[d]=null,n[h]=e):n=m(),void 0===t?n:o.f(n,t)}},1697:function(e,t,n){"use strict";var r=n(1196),i=n(6056),o=n(1592),a=n(5884),s=n(5770),u=n(8084);t.f=r&&!i?Object.defineProperties:function(e,t){a(e);for(var n,r=s(t),i=u(t),l=i.length,c=0;l>c;)o.f(e,n=i[c++],r[n]);return e}},1592:function(e,t,n){"use strict";var r=n(1196),i=n(6707),o=n(6056),a=n(5884),s=n(4655),u=TypeError,l=Object.defineProperty,c=Object.getOwnPropertyDescriptor,d="enumerable",f="configurable",h="writable";t.f=r?o?function(e,t,n){if(a(e),t=s(t),a(n),"function"===typeof e&&"prototype"===t&&"value"in n&&h in n&&!n[h]){var r=c(e,t);r&&r[h]&&(e[t]=n.value,n={configurable:f in n?n[f]:r[f],enumerable:d in n?n[d]:r[d],writable:!1})}return l(e,t,n)}:l:function(e,t,n){if(a(e),t=s(t),a(n),i)try{return l(e,t,n)}catch(r){}if("get"in n||"set"in n)throw u("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},2573:function(e,t,n){"use strict";var r=n(1196),i=n(8513),o=n(8306),a=n(2037),s=n(5770),u=n(4655),l=n(3013),c=n(6707),d=Object.getOwnPropertyDescriptor;t.f=r?d:function(e,t){if(e=s(e),t=u(t),c)try{return d(e,t)}catch(n){}if(l(e,t))return a(!i(o.f,e,t),e[t])}},3772:function(e,t,n){"use strict";var r=n(3080),i=n(2080).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},400:function(e,t){"use strict";t.f=Object.getOwnPropertySymbols},8946:function(e,t,n){"use strict";var r=n(4932);e.exports=r({}.isPrototypeOf)},3080:function(e,t,n){"use strict";var r=n(4932),i=n(3013),o=n(5770),a=n(488).indexOf,s=n(6196),u=r([].push);e.exports=function(e,t){var n,r=o(e),l=0,c=[];for(n in r)!i(s,n)&&i(r,n)&&u(c,n);for(;t.length>l;)i(r,n=t[l++])&&(~a(c,n)||u(c,n));return c}},8084:function(e,t,n){"use strict";var r=n(3080),i=n(2080);e.exports=Object.keys||function(e){return r(e,i)}},8306:function(e,t){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,i=r&&!n.call({1:2},1);t.f=i?function(e){var t=r(this,e);return!!t&&t.enumerable}:n},7772:function(e,t,n){"use strict";var r=n(8513),i=n(9218),o=n(3931),a=TypeError;e.exports=function(e,t){var n,s;if("string"===t&&i(n=e.toString)&&!o(s=r(n,e)))return s;if(i(n=e.valueOf)&&!o(s=r(n,e)))return s;if("string"!==t&&i(n=e.toString)&&!o(s=r(n,e)))return s;throw a("Can't convert object to primitive value")}},7273:function(e,t,n){"use strict";var r=n(1240),i=n(4932),o=n(3772),a=n(400),s=n(5884),u=i([].concat);e.exports=r("Reflect","ownKeys")||function(e){var t=o.f(s(e)),n=a.f;return n?u(t,n(e)):t}},2781:function(e,t,n){"use strict";var r=n(8513),i=n(5884),o=n(9218),a=n(2933),s=n(4087),u=TypeError;e.exports=function(e,t){var n=e.exec;if(o(n)){var l=r(n,e,t);return null!==l&&i(l),l}if("RegExp"===a(e))return r(s,e,t);throw u("RegExp#exec called on incompatible receiver")}},4087:function(e,t,n){"use strict";var r=n(8513),i=n(4932),o=n(6124),a=n(7687),s=n(8596),u=n(1778),l=n(4385),c=n(9671).get,d=n(2047),f=n(2063),h=u("native-string-replace",String.prototype.replace),p=RegExp.prototype.exec,v=p,g=i("".charAt),m=i("".indexOf),y=i("".replace),b=i("".slice),w=function(){var e=/a/,t=/b*/g;return r(p,e,"a"),r(p,t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),x=s.BROKEN_CARET,k=void 0!==/()??/.exec("")[1];(w||k||x||d||f)&&(v=function(e){var t,n,i,s,u,d,f,S=this,_=c(S),E=o(e),C=_.raw;if(C)return C.lastIndex=S.lastIndex,t=r(v,C,E),S.lastIndex=C.lastIndex,t;var P=_.groups,I=x&&S.sticky,j=r(a,S),M=S.source,A=0,T=E;if(I&&(j=y(j,"y",""),-1===m(j,"g")&&(j+="g"),T=b(E,S.lastIndex),S.lastIndex>0&&(!S.multiline||S.multiline&&"\n"!==g(E,S.lastIndex-1))&&(M="(?: "+M+")",T=" "+T,A++),n=new RegExp("^(?:"+M+")",j)),k&&(n=new RegExp("^"+M+"$(?!\\s)",j)),w&&(i=S.lastIndex),s=r(p,I?n:S,T),I?s?(s.input=b(s.input,A),s[0]=b(s[0],A),s.index=S.lastIndex,S.lastIndex+=s[0].length):S.lastIndex=0:w&&s&&(S.lastIndex=S.global?s.index+s[0].length:i),k&&s&&s.length>1&&r(h,s[0],n,(function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(s[u]=void 0)})),s&&P)for(s.groups=d=l(null),u=0;u<P.length;u++)d[(f=P[u])[0]]=s[f[1]];return s}),e.exports=v},7687:function(e,t,n){"use strict";var r=n(5884);e.exports=function(){var e=r(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},8596:function(e,t,n){"use strict";var r=n(2837),i=n(6840).RegExp,o=r((function(){var e=i("a","y");return e.lastIndex=2,null!==e.exec("abcd")})),a=o||r((function(){return!i("a","y").sticky})),s=o||r((function(){var e=i("^r","gy");return e.lastIndex=2,null!==e.exec("str")}));e.exports={BROKEN_CARET:s,MISSED_STICKY:a,UNSUPPORTED_Y:o}},2047:function(e,t,n){"use strict";var r=n(2837),i=n(6840).RegExp;e.exports=r((function(){var e=i(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))},2063:function(e,t,n){"use strict";var r=n(2837),i=n(6840).RegExp;e.exports=r((function(){var e=i("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},2244:function(e,t,n){"use strict";var r=n(9055),i=TypeError;e.exports=function(e){if(r(e))throw i("Can't call method on "+e);return e}},9378:function(e,t,n){"use strict";var r=n(1778),i=n(6520),o=r("keys");e.exports=function(e){return o[e]||(o[e]=i(e))}},4460:function(e,t,n){"use strict";var r=n(6840),i=n(9131),o="__core-js_shared__",a=r[o]||i(o,{});e.exports=a},1778:function(e,t,n){"use strict";var r=n(3608),i=n(4460);(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.32.1",mode:r?"pure":"global",copyright:"\xa9 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.32.1/LICENSE",source:"https://github.com/zloirock/core-js"})},8424:function(e,t,n){"use strict";var r=n(4932),i=n(2128),o=n(6124),a=n(2244),s=r("".charAt),u=r("".charCodeAt),l=r("".slice),c=function(e){return function(t,n){var r,c,d=o(a(t)),f=i(n),h=d.length;return f<0||f>=h?e?"":void 0:(r=u(d,f))<55296||r>56319||f+1===h||(c=u(d,f+1))<56320||c>57343?e?s(d,f):r:e?l(d,f,f+2):c-56320+(r-55296<<10)+65536}};e.exports={codeAt:c(!1),charAt:c(!0)}},166:function(e,t,n){"use strict";var r=n(5372),i=n(2837),o=n(6840).String;e.exports=!!Object.getOwnPropertySymbols&&!i((function(){var e=Symbol("symbol detection");return!o(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},1823:function(e,t,n){"use strict";var r=n(2128),i=Math.max,o=Math.min;e.exports=function(e,t){var n=r(e);return n<0?i(n+t,0):o(n,t)}},5770:function(e,t,n){"use strict";var r=n(1036),i=n(2244);e.exports=function(e){return r(i(e))}},2128:function(e,t,n){"use strict";var r=n(1246);e.exports=function(e){var t=+e;return t!==t||0===t?0:r(t)}},2347:function(e,t,n){"use strict";var r=n(2128),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},8385:function(e,t,n){"use strict";var r=n(2244),i=Object;e.exports=function(e){return i(r(e))}},6740:function(e,t,n){"use strict";var r=n(8513),i=n(3931),o=n(8287),a=n(3863),s=n(7772),u=n(5028),l=TypeError,c=u("toPrimitive");e.exports=function(e,t){if(!i(e)||o(e))return e;var n,u=a(e,c);if(u){if(void 0===t&&(t="default"),n=r(u,e,t),!i(n)||o(n))return n;throw l("Can't convert object to primitive value")}return void 0===t&&(t="number"),s(e,t)}},4655:function(e,t,n){"use strict";var r=n(6740),i=n(8287);e.exports=function(e){var t=r(e,"string");return i(t)?t:t+""}},6042:function(e,t,n){"use strict";var r={};r[n(5028)("toStringTag")]="z",e.exports="[object z]"===String(r)},6124:function(e,t,n){"use strict";var r=n(7205),i=String;e.exports=function(e){if("Symbol"===r(e))throw TypeError("Cannot convert a Symbol value to a string");return i(e)}},1772:function(e){"use strict";var t=String;e.exports=function(e){try{return t(e)}catch(n){return"Object"}}},6520:function(e,t,n){"use strict";var r=n(4932),i=0,o=Math.random(),a=r(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+a(++i+o,36)}},7611:function(e,t,n){"use strict";var r=n(166);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},6056:function(e,t,n){"use strict";var r=n(1196),i=n(2837);e.exports=r&&i((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},1615:function(e,t,n){"use strict";var r=n(6840),i=n(9218),o=r.WeakMap;e.exports=i(o)&&/native code/.test(String(o))},5028:function(e,t,n){"use strict";var r=n(6840),i=n(1778),o=n(3013),a=n(6520),s=n(166),u=n(7611),l=r.Symbol,c=i("wks"),d=u?l.for||l:l&&l.withoutSetter||a;e.exports=function(e){return o(c,e)||(c[e]=s&&o(l,e)?l[e]:d("Symbol."+e)),c[e]}},5470:function(e,t,n){"use strict";var r=n(7768),i=n(8264),o=n(6724),a=n(8385),s=n(3385),u=n(5491);r({target:"Array",proto:!0},{flatMap:function(e){var t,n=a(this),r=s(n);return o(e),(t=u(n,0)).length=i(t,n,n,r,0,1,e,arguments.length>1?arguments[1]:void 0),t}})},8624:function(e,t,n){"use strict";var r=n(7768),i=n(8264),o=n(8385),a=n(3385),s=n(2128),u=n(5491);r({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=o(this),n=a(t),r=u(t,0);return r.length=i(r,t,t,n,0,void 0===e?1:s(e)),r}})},2330:function(e,t,n){"use strict";n(5715)("flatMap")},9743:function(e,t,n){"use strict";n(5715)("flat")},447:function(e,t,n){"use strict";var r=n(7768),i=n(4087);r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},4178:function(e,t,n){"use strict";var r=n(6339),i=n(8513),o=n(4932),a=n(8093),s=n(2837),u=n(5884),l=n(9218),c=n(9055),d=n(2128),f=n(2347),h=n(6124),p=n(2244),v=n(5466),g=n(3863),m=n(7794),y=n(2781),b=n(5028)("replace"),w=Math.max,x=Math.min,k=o([].concat),S=o([].push),_=o("".indexOf),E=o("".slice),C="$0"==="a".replace(/./,"$0"),P=!!/./[b]&&""===/./[b]("a","$0");a("replace",(function(e,t,n){var o=P?"$":"$0";return[function(e,n){var r=p(this),o=c(e)?void 0:g(e,b);return o?i(o,e,r,n):i(t,h(r),e,n)},function(e,i){var a=u(this),s=h(e);if("string"==typeof i&&-1===_(i,o)&&-1===_(i,"$<")){var c=n(t,a,s,i);if(c.done)return c.value}var p=l(i);p||(i=h(i));var g,b=a.global;b&&(g=a.unicode,a.lastIndex=0);for(var C,P=[];null!==(C=y(a,s))&&(S(P,C),b);){""===h(C[0])&&(a.lastIndex=v(s,f(a.lastIndex),g))}for(var I,j="",M=0,A=0;A<P.length;A++){for(var T,O=h((C=P[A])[0]),N=w(x(d(C.index),s.length),0),R=[],L=1;L<C.length;L++)S(R,void 0===(I=C[L])?I:String(I));var D=C.groups;if(p){var z=k([O],R,N,s);void 0!==D&&S(z,D),T=h(r(i,void 0,z))}else T=m(O,s,N,R,D,i);N>=M&&(j+=E(s,M,N)+T,M=N+O.length)}return j+E(s,M)}]}),!!s((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!C||P)},7143:function(e){"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,r,o,a){if("function"!==typeof r)throw new TypeError("The listener must be a function");var s=new i(r,o||e,a),u=n?n+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],s]:e._events[u].push(s):(e._events[u]=s,e._eventsCount++),e}function a(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=new Array(o);i<o;i++)a[i]=r[i].fn;return a},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,i,o,a){var s=n?n+e:e;if(!this._events[s])return!1;var u,l,c=this._events[s],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,r),!0;case 4:return c.fn.call(c.context,t,r,i),!0;case 5:return c.fn.call(c.context,t,r,i,o),!0;case 6:return c.fn.call(c.context,t,r,i,o,a),!0}for(l=1,u=new Array(d-1);l<d;l++)u[l-1]=arguments[l];c.fn.apply(c.context,u)}else{var f,h=c.length;for(l=0;l<h;l++)switch(c[l].once&&this.removeListener(e,c[l].fn,void 0,!0),d){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,t);break;case 3:c[l].fn.call(c[l].context,t,r);break;case 4:c[l].fn.call(c[l].context,t,r,i);break;default:if(!u)for(f=1,u=new Array(d-1);f<d;f++)u[f-1]=arguments[f];c[l].fn.apply(c[l].context,u)}}return!0},s.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,i){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==t||i&&!s.once||r&&s.context!==r||a(this,o);else{for(var u=0,l=[],c=s.length;u<c;u++)(s[u].fn!==t||i&&!s[u].once||r&&s[u].context!==r)&&l.push(s[u]);l.length?this._events[o]=1===l.length?l[0]:l:a(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s},4038:function(e,t){t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,d=n?i-1:0,f=n?-1:1,h=e[t+d];for(d+=f,o=h&(1<<-c)-1,h>>=-c,c+=s;c>0;o=256*o+e[t+d],d+=f,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+e[t+d],d+=f,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),o-=l}return(h?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,u,l=8*o-i-1,c=(1<<l)-1,d=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,p=r?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),(t+=a+d>=1?f/u:f*Math.pow(2,1-d))*u>=2&&(a++,u/=2),a+d>=c?(s=0,a=c):a+d>=1?(s=(t*u-1)*Math.pow(2,i),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;e[n+h]=255&s,h+=p,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;e[n+h]=255&a,h+=p,a/=256,l-=8);e[n+h-p]|=128*v}},2467:function(e,t,n){e=n.nmd(e);var r="__lodash_hash_undefined__",i=1,o=2,a=9007199254740991,s="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",c="[object Boolean]",d="[object Date]",f="[object Error]",h="[object Function]",p="[object GeneratorFunction]",v="[object Map]",g="[object Number]",m="[object Null]",y="[object Object]",b="[object Promise]",w="[object Proxy]",x="[object RegExp]",k="[object Set]",S="[object String]",_="[object Symbol]",E="[object Undefined]",C="[object WeakMap]",P="[object ArrayBuffer]",I="[object DataView]",j=/^\[object .+?Constructor\]$/,M=/^(?:0|[1-9]\d*)$/,A={};A["[object Float32Array]"]=A["[object Float64Array]"]=A["[object Int8Array]"]=A["[object Int16Array]"]=A["[object Int32Array]"]=A["[object Uint8Array]"]=A["[object Uint8ClampedArray]"]=A["[object Uint16Array]"]=A["[object Uint32Array]"]=!0,A[s]=A[u]=A[P]=A[c]=A[I]=A[d]=A[f]=A[h]=A[v]=A[g]=A[y]=A[x]=A[k]=A[S]=A[C]=!1;var T="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,O="object"==typeof self&&self&&self.Object===Object&&self,N=T||O||Function("return this")(),R=t&&!t.nodeType&&t,L=R&&e&&!e.nodeType&&e,D=L&&L.exports===R,z=D&&T.process,B=function(){try{return z&&z.binding&&z.binding("util")}catch(e){}}(),F=B&&B.isTypedArray;function U(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function K(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function V(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var W=Array.prototype,H=Function.prototype,Y=Object.prototype,q=N["__core-js_shared__"],X=H.toString,$=Y.hasOwnProperty,G=function(){var e=/[^.]+$/.exec(q&&q.keys&&q.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Q=Y.toString,J=RegExp("^"+X.call($).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Z=D?N.Buffer:void 0,ee=N.Symbol,te=N.Uint8Array,ne=Y.propertyIsEnumerable,re=W.splice,ie=ee?ee.toStringTag:void 0,oe=Object.getOwnPropertySymbols,ae=Z?Z.isBuffer:void 0,se=function(e,t){return function(n){return e(t(n))}}(Object.keys,Object),ue=Le(N,"DataView"),le=Le(N,"Map"),ce=Le(N,"Promise"),de=Le(N,"Set"),fe=Le(N,"WeakMap"),he=Le(Object,"create"),pe=Fe(ue),ve=Fe(le),ge=Fe(ce),me=Fe(de),ye=Fe(fe),be=ee?ee.prototype:void 0,we=be?be.valueOf:void 0;function xe(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ke(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Se(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function _e(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Se;++t<n;)this.add(e[t])}function Ee(e){var t=this.__data__=new ke(e);this.size=t.size}function Ce(e,t){var n=Ve(e),r=!n&&Ke(e),i=!n&&!r&&We(e),o=!n&&!r&&!i&&$e(e),a=n||r||i||o,s=a?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],u=s.length;for(var l in e)!t&&!$.call(e,l)||a&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Be(l,u))||s.push(l);return s}function Pe(e,t){for(var n=e.length;n--;)if(Ue(e[n][0],t))return n;return-1}function Ie(e){return null==e?void 0===e?E:m:ie&&ie in Object(e)?function(e){var t=$.call(e,ie),n=e[ie];try{e[ie]=void 0;var r=!0}catch(o){}var i=Q.call(e);r&&(t?e[ie]=n:delete e[ie]);return i}(e):function(e){return Q.call(e)}(e)}function je(e){return Xe(e)&&Ie(e)==s}function Me(e,t,n,r,a){return e===t||(null==e||null==t||!Xe(e)&&!Xe(t)?e!==e&&t!==t:function(e,t,n,r,a,l){var h=Ve(e),p=Ve(t),m=h?u:ze(e),b=p?u:ze(t),w=(m=m==s?y:m)==y,E=(b=b==s?y:b)==y,C=m==b;if(C&&We(e)){if(!We(t))return!1;h=!0,w=!1}if(C&&!w)return l||(l=new Ee),h||$e(e)?Oe(e,t,n,r,a,l):function(e,t,n,r,a,s,u){switch(n){case I:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case P:return!(e.byteLength!=t.byteLength||!s(new te(e),new te(t)));case c:case d:case g:return Ue(+e,+t);case f:return e.name==t.name&&e.message==t.message;case x:case S:return e==t+"";case v:var l=K;case k:var h=r&i;if(l||(l=V),e.size!=t.size&&!h)return!1;var p=u.get(e);if(p)return p==t;r|=o,u.set(e,t);var m=Oe(l(e),l(t),r,a,s,u);return u.delete(e),m;case _:if(we)return we.call(e)==we.call(t)}return!1}(e,t,m,n,r,a,l);if(!(n&i)){var j=w&&$.call(e,"__wrapped__"),M=E&&$.call(t,"__wrapped__");if(j||M){var A=j?e.value():e,T=M?t.value():t;return l||(l=new Ee),a(A,T,n,r,l)}}if(!C)return!1;return l||(l=new Ee),function(e,t,n,r,o,a){var s=n&i,u=Ne(e),l=u.length,c=Ne(t),d=c.length;if(l!=d&&!s)return!1;var f=l;for(;f--;){var h=u[f];if(!(s?h in t:$.call(t,h)))return!1}var p=a.get(e);if(p&&a.get(t))return p==t;var v=!0;a.set(e,t),a.set(t,e);var g=s;for(;++f<l;){var m=e[h=u[f]],y=t[h];if(r)var b=s?r(y,m,h,t,e,a):r(m,y,h,e,t,a);if(!(void 0===b?m===y||o(m,y,n,r,a):b)){v=!1;break}g||(g="constructor"==h)}if(v&&!g){var w=e.constructor,x=t.constructor;w==x||!("constructor"in e)||!("constructor"in t)||"function"==typeof w&&w instanceof w&&"function"==typeof x&&x instanceof x||(v=!1)}return a.delete(e),a.delete(t),v}(e,t,n,r,a,l)}(e,t,n,r,Me,a))}function Ae(e){return!(!qe(e)||function(e){return!!G&&G in e}(e))&&(He(e)?J:j).test(Fe(e))}function Te(e){if(!function(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||Y;return e===n}(e))return se(e);var t=[];for(var n in Object(e))$.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Oe(e,t,n,r,a,s){var u=n&i,l=e.length,c=t.length;if(l!=c&&!(u&&c>l))return!1;var d=s.get(e);if(d&&s.get(t))return d==t;var f=-1,h=!0,p=n&o?new _e:void 0;for(s.set(e,t),s.set(t,e);++f<l;){var v=e[f],g=t[f];if(r)var m=u?r(g,v,f,t,e,s):r(v,g,f,e,t,s);if(void 0!==m){if(m)continue;h=!1;break}if(p){if(!U(t,(function(e,t){if(i=t,!p.has(i)&&(v===e||a(v,e,n,r,s)))return p.push(t);var i}))){h=!1;break}}else if(v!==g&&!a(v,g,n,r,s)){h=!1;break}}return s.delete(e),s.delete(t),h}function Ne(e){return function(e,t,n){var r=t(e);return Ve(e)?r:function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}(r,n(e))}(e,Ge,De)}function Re(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function Le(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return Ae(n)?n:void 0}xe.prototype.clear=function(){this.__data__=he?he(null):{},this.size=0},xe.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},xe.prototype.get=function(e){var t=this.__data__;if(he){var n=t[e];return n===r?void 0:n}return $.call(t,e)?t[e]:void 0},xe.prototype.has=function(e){var t=this.__data__;return he?void 0!==t[e]:$.call(t,e)},xe.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=he&&void 0===t?r:t,this},ke.prototype.clear=function(){this.__data__=[],this.size=0},ke.prototype.delete=function(e){var t=this.__data__,n=Pe(t,e);return!(n<0)&&(n==t.length-1?t.pop():re.call(t,n,1),--this.size,!0)},ke.prototype.get=function(e){var t=this.__data__,n=Pe(t,e);return n<0?void 0:t[n][1]},ke.prototype.has=function(e){return Pe(this.__data__,e)>-1},ke.prototype.set=function(e,t){var n=this.__data__,r=Pe(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Se.prototype.clear=function(){this.size=0,this.__data__={hash:new xe,map:new(le||ke),string:new xe}},Se.prototype.delete=function(e){var t=Re(this,e).delete(e);return this.size-=t?1:0,t},Se.prototype.get=function(e){return Re(this,e).get(e)},Se.prototype.has=function(e){return Re(this,e).has(e)},Se.prototype.set=function(e,t){var n=Re(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},_e.prototype.add=_e.prototype.push=function(e){return this.__data__.set(e,r),this},_e.prototype.has=function(e){return this.__data__.has(e)},Ee.prototype.clear=function(){this.__data__=new ke,this.size=0},Ee.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Ee.prototype.get=function(e){return this.__data__.get(e)},Ee.prototype.has=function(e){return this.__data__.has(e)},Ee.prototype.set=function(e,t){var n=this.__data__;if(n instanceof ke){var r=n.__data__;if(!le||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Se(r)}return n.set(e,t),this.size=n.size,this};var De=oe?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}(oe(e),(function(t){return ne.call(e,t)})))}:function(){return[]},ze=Ie;function Be(e,t){return!!(t=null==t?a:t)&&("number"==typeof e||M.test(e))&&e>-1&&e%1==0&&e<t}function Fe(e){if(null!=e){try{return X.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Ue(e,t){return e===t||e!==e&&t!==t}(ue&&ze(new ue(new ArrayBuffer(1)))!=I||le&&ze(new le)!=v||ce&&ze(ce.resolve())!=b||de&&ze(new de)!=k||fe&&ze(new fe)!=C)&&(ze=function(e){var t=Ie(e),n=t==y?e.constructor:void 0,r=n?Fe(n):"";if(r)switch(r){case pe:return I;case ve:return v;case ge:return b;case me:return k;case ye:return C}return t});var Ke=je(function(){return arguments}())?je:function(e){return Xe(e)&&$.call(e,"callee")&&!ne.call(e,"callee")},Ve=Array.isArray;var We=ae||function(){return!1};function He(e){if(!qe(e))return!1;var t=Ie(e);return t==h||t==p||t==l||t==w}function Ye(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=a}function qe(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Xe(e){return null!=e&&"object"==typeof e}var $e=F?function(e){return function(t){return e(t)}}(F):function(e){return Xe(e)&&Ye(e.length)&&!!A[Ie(e)]};function Ge(e){return null!=(t=e)&&Ye(t.length)&&!He(t)?Ce(e):Te(e);var t}e.exports=function(e,t){return Me(e,t)}},3881:function(e,t,n){var r="Expected a function",i=NaN,o="[object Symbol]",a=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt,d="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,f="object"==typeof self&&self&&self.Object===Object&&self,h=d||f||Function("return this")(),p=Object.prototype.toString,v=Math.max,g=Math.min,m=function(){return h.Date.now()};function y(e,t,n){var i,o,a,s,u,l,c=0,d=!1,f=!1,h=!0;if("function"!=typeof e)throw new TypeError(r);function p(t){var n=i,r=o;return i=o=void 0,c=t,s=e.apply(r,n)}function y(e){var n=e-l;return void 0===l||n>=t||n<0||f&&e-c>=a}function x(){var e=m();if(y(e))return k(e);u=setTimeout(x,function(e){var n=t-(e-l);return f?g(n,a-(e-c)):n}(e))}function k(e){return u=void 0,h&&i?p(e):(i=o=void 0,s)}function S(){var e=m(),n=y(e);if(i=arguments,o=this,l=e,n){if(void 0===u)return function(e){return c=e,u=setTimeout(x,t),d?p(e):s}(l);if(f)return u=setTimeout(x,t),p(l)}return void 0===u&&(u=setTimeout(x,t)),s}return t=w(t)||0,b(n)&&(d=!!n.leading,a=(f="maxWait"in n)?v(w(n.maxWait)||0,t):a,h="trailing"in n?!!n.trailing:h),S.cancel=function(){void 0!==u&&clearTimeout(u),c=0,i=l=o=u=void 0},S.flush=function(){return void 0===u?s:k(m())},S}function b(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function w(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&p.call(e)==o}(e))return i;if(b(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=b(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(a,"");var n=u.test(e);return n||l.test(e)?c(e.slice(2),n?2:8):s.test(e)?i:+e}e.exports=function(e,t,n){var i=!0,o=!0;if("function"!=typeof e)throw new TypeError(r);return b(n)&&(i="leading"in n?!!n.leading:i,o="trailing"in n?!!n.trailing:o),y(e,t,{leading:i,maxWait:t,trailing:o})}},9409:function(e,t,n){var r=200,i="__lodash_hash_undefined__",o="[object Function]",a="[object GeneratorFunction]",s=/^\[object .+?Constructor\]$/,u="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,l="object"==typeof self&&self&&self.Object===Object&&self,c=u||l||Function("return this")();function d(e,t){return!!(e?e.length:0)&&function(e,t,n){if(t!==t)return function(e,t,n,r){var i=e.length,o=n+(r?1:-1);for(;r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}(e,h,n);var r=n-1,i=e.length;for(;++r<i;)if(e[r]===t)return r;return-1}(e,t,0)>-1}function f(e,t,n){for(var r=-1,i=e?e.length:0;++r<i;)if(n(t,e[r]))return!0;return!1}function h(e){return e!==e}function p(e,t){return e.has(t)}function v(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var g=Array.prototype,m=Function.prototype,y=Object.prototype,b=c["__core-js_shared__"],w=function(){var e=/[^.]+$/.exec(b&&b.keys&&b.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),x=m.toString,k=y.hasOwnProperty,S=y.toString,_=RegExp("^"+x.call(k).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),E=g.splice,C=D(c,"Map"),P=D(c,"Set"),I=D(Object,"create");function j(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function M(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function A(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function T(e){var t=-1,n=e?e.length:0;for(this.__data__=new A;++t<n;)this.add(e[t])}function O(e,t){for(var n,r,i=e.length;i--;)if((n=e[i][0])===(r=t)||n!==n&&r!==r)return i;return-1}function N(e){if(!z(e)||function(e){return!!w&&w in e}(e))return!1;var t=function(e){var t=z(e)?S.call(e):"";return t==o||t==a}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(n){}return t}(e)?_:s;return t.test(function(e){if(null!=e){try{return x.call(e)}catch(t){}try{return e+""}catch(t){}}return""}(e))}j.prototype.clear=function(){this.__data__=I?I(null):{}},j.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},j.prototype.get=function(e){var t=this.__data__;if(I){var n=t[e];return n===i?void 0:n}return k.call(t,e)?t[e]:void 0},j.prototype.has=function(e){var t=this.__data__;return I?void 0!==t[e]:k.call(t,e)},j.prototype.set=function(e,t){return this.__data__[e]=I&&void 0===t?i:t,this},M.prototype.clear=function(){this.__data__=[]},M.prototype.delete=function(e){var t=this.__data__,n=O(t,e);return!(n<0)&&(n==t.length-1?t.pop():E.call(t,n,1),!0)},M.prototype.get=function(e){var t=this.__data__,n=O(t,e);return n<0?void 0:t[n][1]},M.prototype.has=function(e){return O(this.__data__,e)>-1},M.prototype.set=function(e,t){var n=this.__data__,r=O(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},A.prototype.clear=function(){this.__data__={hash:new j,map:new(C||M),string:new j}},A.prototype.delete=function(e){return L(this,e).delete(e)},A.prototype.get=function(e){return L(this,e).get(e)},A.prototype.has=function(e){return L(this,e).has(e)},A.prototype.set=function(e,t){return L(this,e).set(e,t),this},T.prototype.add=T.prototype.push=function(e){return this.__data__.set(e,i),this},T.prototype.has=function(e){return this.__data__.has(e)};var R=P&&1/v(new P([,-0]))[1]==1/0?function(e){return new P(e)}:function(){};function L(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function D(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return N(n)?n:void 0}function z(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=function(e){return e&&e.length?function(e,t,n){var i=-1,o=d,a=e.length,s=!0,u=[],l=u;if(n)s=!1,o=f;else if(a>=r){var c=t?null:R(e);if(c)return v(c);s=!1,o=p,l=new T}else l=t?[]:u;e:for(;++i<a;){var h=e[i],g=t?t(h):h;if(h=n||0!==h?h:0,s&&g===g){for(var m=l.length;m--;)if(l[m]===g)continue e;t&&l.push(g),u.push(h)}else o(l,g,n)||(l!==u&&l.push(g),u.push(h))}return u}(e):[]}},4235:function(e,t,n){var r,i=function(){var e=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",r={};function i(e,t){if(!r[e]){r[e]={};for(var n=0;n<e.length;n++)r[e][e.charAt(n)]=n}return r[e][t]}var o={compressToBase64:function(e){if(null==e)return"";var n=o._compress(e,6,(function(e){return t.charAt(e)}));switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:o._decompress(e.length,32,(function(n){return i(t,e.charAt(n))}))},compressToUTF16:function(t){return null==t?"":o._compress(t,15,(function(t){return e(t+32)}))+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:o._decompress(e.length,16384,(function(t){return e.charCodeAt(t)-32}))},compressToUint8Array:function(e){for(var t=o.compress(e),n=new Uint8Array(2*t.length),r=0,i=t.length;r<i;r++){var a=t.charCodeAt(r);n[2*r]=a>>>8,n[2*r+1]=a%256}return n},decompressFromUint8Array:function(t){if(null===t||void 0===t)return o.decompress(t);for(var n=new Array(t.length/2),r=0,i=n.length;r<i;r++)n[r]=256*t[2*r]+t[2*r+1];var a=[];return n.forEach((function(t){a.push(e(t))})),o.decompress(a.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":o._compress(e,6,(function(e){return n.charAt(e)}))},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),o._decompress(e.length,32,(function(t){return i(n,e.charAt(t))})))},compress:function(t){return o._compress(t,16,(function(t){return e(t)}))},_compress:function(e,t,n){if(null==e)return"";var r,i,o,a={},s={},u="",l="",c="",d=2,f=3,h=2,p=[],v=0,g=0;for(o=0;o<e.length;o+=1)if(u=e.charAt(o),Object.prototype.hasOwnProperty.call(a,u)||(a[u]=f++,s[u]=!0),l=c+u,Object.prototype.hasOwnProperty.call(a,l))c=l;else{if(Object.prototype.hasOwnProperty.call(s,c)){if(c.charCodeAt(0)<256){for(r=0;r<h;r++)v<<=1,g==t-1?(g=0,p.push(n(v)),v=0):g++;for(i=c.charCodeAt(0),r=0;r<8;r++)v=v<<1|1&i,g==t-1?(g=0,p.push(n(v)),v=0):g++,i>>=1}else{for(i=1,r=0;r<h;r++)v=v<<1|i,g==t-1?(g=0,p.push(n(v)),v=0):g++,i=0;for(i=c.charCodeAt(0),r=0;r<16;r++)v=v<<1|1&i,g==t-1?(g=0,p.push(n(v)),v=0):g++,i>>=1}0==--d&&(d=Math.pow(2,h),h++),delete s[c]}else for(i=a[c],r=0;r<h;r++)v=v<<1|1&i,g==t-1?(g=0,p.push(n(v)),v=0):g++,i>>=1;0==--d&&(d=Math.pow(2,h),h++),a[l]=f++,c=String(u)}if(""!==c){if(Object.prototype.hasOwnProperty.call(s,c)){if(c.charCodeAt(0)<256){for(r=0;r<h;r++)v<<=1,g==t-1?(g=0,p.push(n(v)),v=0):g++;for(i=c.charCodeAt(0),r=0;r<8;r++)v=v<<1|1&i,g==t-1?(g=0,p.push(n(v)),v=0):g++,i>>=1}else{for(i=1,r=0;r<h;r++)v=v<<1|i,g==t-1?(g=0,p.push(n(v)),v=0):g++,i=0;for(i=c.charCodeAt(0),r=0;r<16;r++)v=v<<1|1&i,g==t-1?(g=0,p.push(n(v)),v=0):g++,i>>=1}0==--d&&(d=Math.pow(2,h),h++),delete s[c]}else for(i=a[c],r=0;r<h;r++)v=v<<1|1&i,g==t-1?(g=0,p.push(n(v)),v=0):g++,i>>=1;0==--d&&(d=Math.pow(2,h),h++)}for(i=2,r=0;r<h;r++)v=v<<1|1&i,g==t-1?(g=0,p.push(n(v)),v=0):g++,i>>=1;for(;;){if(v<<=1,g==t-1){p.push(n(v));break}g++}return p.join("")},decompress:function(e){return null==e?"":""==e?null:o._decompress(e.length,32768,(function(t){return e.charCodeAt(t)}))},_decompress:function(t,n,r){var i,o,a,s,u,l,c,d=[],f=4,h=4,p=3,v="",g=[],m={val:r(0),position:n,index:1};for(i=0;i<3;i+=1)d[i]=i;for(a=0,u=Math.pow(2,2),l=1;l!=u;)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=r(m.index++)),a|=(s>0?1:0)*l,l<<=1;switch(a){case 0:for(a=0,u=Math.pow(2,8),l=1;l!=u;)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=r(m.index++)),a|=(s>0?1:0)*l,l<<=1;c=e(a);break;case 1:for(a=0,u=Math.pow(2,16),l=1;l!=u;)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=r(m.index++)),a|=(s>0?1:0)*l,l<<=1;c=e(a);break;case 2:return""}for(d[3]=c,o=c,g.push(c);;){if(m.index>t)return"";for(a=0,u=Math.pow(2,p),l=1;l!=u;)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=r(m.index++)),a|=(s>0?1:0)*l,l<<=1;switch(c=a){case 0:for(a=0,u=Math.pow(2,8),l=1;l!=u;)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=r(m.index++)),a|=(s>0?1:0)*l,l<<=1;d[h++]=e(a),c=h-1,f--;break;case 1:for(a=0,u=Math.pow(2,16),l=1;l!=u;)s=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=r(m.index++)),a|=(s>0?1:0)*l,l<<=1;d[h++]=e(a),c=h-1,f--;break;case 2:return g.join("")}if(0==f&&(f=Math.pow(2,p),p++),d[c])v=d[c];else{if(c!==h)return null;v=o+o.charAt(0)}g.push(v),d[h++]=o+v.charAt(0),o=v,0==--f&&(f=Math.pow(2,p),p++)}}};return o}();void 0===(r=function(){return i}.call(t,n,t,e))||(e.exports=r)},1725:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,i){for(var o,a,s=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),u=1;u<arguments.length;u++){for(var l in o=Object(arguments[u]))n.call(o,l)&&(s[l]=o[l]);if(t){a=t(o);for(var c=0;c<a.length;c++)r.call(o,a[c])&&(s[a[c]]=o[a[c]])}}return s}},888:function(e,t,n){"use strict";var r=n(9047);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},2007:function(e,t,n){e.exports=n(888)()},9047:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},4463:function(e,t,n){"use strict";var r=n(2791),i=n(5296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function u(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(s[e]=t,e=0;e<t.length;e++)a.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},p={};function v(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(p,e)||!d.call(h,e)&&(f.test(e)?p[e]=!0:(h[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,y);g[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,y);g[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,y);g[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),k=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),P=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),T=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var N=Symbol.iterator;function R(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=N&&e[N]||e["@@iterator"])?e:null}var L,D=Object.assign;function z(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var B=!1;function F(e,t){if(!e||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var i=l.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s]){var u="\n"+i[a].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=a&&0<=s);break}}}finally{B=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function U(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=F(e.type,!1);case 11:return e=F(e.type.render,!1);case 1:return e=F(e.type,!0);default:return""}}function K(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case k:return"Portal";case E:return"Profiler";case _:return"StrictMode";case j:return"Suspense";case M:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case P:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:K(e.type)||"Memo";case T:t=e._payload,e=e._init;try{return K(e(t))}catch(n){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return K(t);case 8:return t===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function X(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return D({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function G(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){Q(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return D({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function oe(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ce,de=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||he.hasOwnProperty(e)&&he[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(he).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),he[t]=he[e]}))}));var me=D({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,Se=null,_e=null;function Ee(e){if(e=bi(e)){if("function"!==typeof ke)throw Error(o(280));var t=e.stateNode;t&&(t=xi(t),ke(e.stateNode,e.type,t))}}function Ce(e){Se?_e?_e.push(e):_e=[e]:Se=e}function Pe(){if(Se){var e=Se,t=_e;if(_e=Se=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ie(e,t){return e(t)}function je(){}var Me=!1;function Ae(e,t,n){if(Me)return e(t,n);Me=!0;try{return Ie(e,t,n)}finally{Me=!1,(null!==Se||null!==_e)&&(je(),Pe())}}function Te(e,t){var n=e.stateNode;if(null===n)return null;var r=xi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Oe=!1;if(c)try{var Ne={};Object.defineProperty(Ne,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",Ne,Ne),window.removeEventListener("test",Ne,Ne)}catch(ce){Oe=!1}function Re(e,t,n,r,i,o,a,s,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var Le=!1,De=null,ze=!1,Be=null,Fe={onError:function(e){Le=!0,De=e}};function Ue(e,t,n,r,i,o,a,s,u){Le=!1,De=null,Re.apply(Fe,arguments)}function Ke(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Ke(e)!==e)throw Error(o(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ke(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return We(i),e;if(a===r)return We(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=a;break}if(u===r){s=!0,r=i,n=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===n){s=!0,n=a,r=i;break}if(u===r){s=!0,r=a,n=i;break}u=u.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?Ye(e):null}function Ye(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ye(e);if(null!==t)return t;e=e.sibling}return null}var qe=i.unstable_scheduleCallback,Xe=i.unstable_cancelCallback,$e=i.unstable_shouldYield,Ge=i.unstable_requestPaint,Qe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,ot=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/ut|0)|0},st=Math.log,ut=Math.LN2;var lt=64,ct=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,a=268435455&n;if(0!==a){var s=a&~i;0!==s?r=dt(s):0!==(o&=a)&&(r=dt(o))}else 0!==(a=n&~i)?r=dt(a):0!==o&&(r=dt(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function ht(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,kt,St,_t,Et,Ct=!1,Pt=[],It=null,jt=null,Mt=null,At=new Map,Tt=new Map,Ot=[],Nt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rt(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":jt=null;break;case"mouseover":case"mouseout":Mt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tt.delete(t.pointerId)}}function Lt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&kt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Dt(e){var t=yi(e.target);if(null!==t){var n=Ke(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ve(n)))return e.blockedOn=t,void Et(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function zt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&kt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Bt(e,t,n){zt(e)&&n.delete(t)}function Ft(){Ct=!1,null!==It&&zt(It)&&(It=null),null!==jt&&zt(jt)&&(jt=null),null!==Mt&&zt(Mt)&&(Mt=null),At.forEach(Bt),Tt.forEach(Bt)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ft)))}function Kt(e){function t(t){return Ut(t,e)}if(0<Pt.length){Ut(Pt[0],e);for(var n=1;n<Pt.length;n++){var r=Pt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&Ut(It,e),null!==jt&&Ut(jt,e),null!==Mt&&Ut(Mt,e),At.forEach(t),Tt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Dt(n),null===n.blockedOn&&Ot.shift()}var Vt=w.ReactCurrentBatchConfig,Wt=!0;function Ht(e,t,n,r){var i=bt,o=Vt.transition;Vt.transition=null;try{bt=1,qt(e,t,n,r)}finally{bt=i,Vt.transition=o}}function Yt(e,t,n,r){var i=bt,o=Vt.transition;Vt.transition=null;try{bt=4,qt(e,t,n,r)}finally{bt=i,Vt.transition=o}}function qt(e,t,n,r){if(Wt){var i=$t(e,t,n,r);if(null===i)Wr(e,t,r,Xt,n),Rt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return It=Lt(It,e,t,n,r,i),!0;case"dragenter":return jt=Lt(jt,e,t,n,r,i),!0;case"mouseover":return Mt=Lt(Mt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return At.set(o,Lt(At.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Tt.set(o,Lt(Tt.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Rt(e,r),4&t&&-1<Nt.indexOf(e)){for(;null!==i;){var o=bi(i);if(null!==o&&xt(o),null===(o=$t(e,t,n,r))&&Wr(e,t,r,Xt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Xt=null;function $t(e,t,n,r){if(Xt=null,null!==(e=yi(e=xe(r))))if(null===(t=Ke(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xt=e,null}function Gt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Qt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Qt?Qt.value:Qt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return D(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,sn,un,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=on(ln),dn=D({},ln,{view:0,detail:0}),fn=on(dn),hn=D({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(an=e.screenX-un.screenX,sn=e.screenY-un.screenY):sn=an=0,un=e),an)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=on(hn),vn=on(D({},hn,{dataTransfer:0})),gn=on(D({},dn,{relatedTarget:0})),mn=on(D({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=D({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=on(yn),wn=on(D({},ln,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _n(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function En(){return _n}var Cn=D({},dn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Pn=on(Cn),In=on(D({},hn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),jn=on(D({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Mn=on(D({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=D({},hn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Tn=on(An),On=[9,13,27,32],Nn=c&&"CompositionEvent"in window,Rn=null;c&&"documentMode"in document&&(Rn=document.documentMode);var Ln=c&&"TextEvent"in window&&!Rn,Dn=c&&(!Nn||Rn&&8<Rn&&11>=Rn),zn=String.fromCharCode(32),Bn=!1;function Fn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Kn=!1;var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vn[e.type]:"textarea"===t}function Hn(e,t,n,r){Ce(r),0<(t=Yr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Yn=null,qn=null;function Xn(e){zr(e,0)}function $n(e){if(q(wi(e)))return e}function Gn(e,t){if("change"===e)return t}var Qn=!1;if(c){var Jn;if(c){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Qn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Yn&&(Yn.detachEvent("onpropertychange",nr),qn=Yn=null)}function nr(e){if("value"===e.propertyName&&$n(qn)){var t=[];Hn(t,qn,e,xe(e)),Ae(Xn,t)}}function rr(e,t,n){"focusin"===e?(tr(),qn=n,(Yn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(qn)}function or(e,t){if("click"===e)return $n(t)}function ar(e,t){if("input"===e||"change"===e)return $n(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&hr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=cr(n,o);var a=cr(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=c&&"documentMode"in document&&11>=document.documentMode,gr=null,mr=null,yr=null,br=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==X(r)||("selectionStart"in(r=gr)&&hr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&ur(yr,r)||(yr=r,0<(r=Yr(mr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var kr={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},Sr={},_r={};function Er(e){if(Sr[e])return Sr[e];if(!kr[e])return e;var t,n=kr[e];for(t in n)if(n.hasOwnProperty(t)&&t in _r)return Sr[e]=n[t];return e}c&&(_r=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);var Cr=Er("animationend"),Pr=Er("animationiteration"),Ir=Er("animationstart"),jr=Er("transitionend"),Mr=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Tr(e,t){Mr.set(e,t),u(t,[e])}for(var Or=0;Or<Ar.length;Or++){var Nr=Ar[Or];Tr(Nr.toLowerCase(),"on"+(Nr[0].toUpperCase()+Nr.slice(1)))}Tr(Cr,"onAnimationEnd"),Tr(Pr,"onAnimationIteration"),Tr(Ir,"onAnimationStart"),Tr("dblclick","onDoubleClick"),Tr("focusin","onFocus"),Tr("focusout","onBlur"),Tr(jr,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rr));function Dr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,s,u,l){if(Ue.apply(this,arguments),Le){if(!Le)throw Error(o(198));var c=De;Le=!1,De=null,ze||(ze=!0,Be=c)}}(r,t,void 0,e),e.currentTarget=null}function zr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==o&&i.isPropagationStopped())break e;Dr(i,s,l),o=u}else for(a=0;a<r.length;a++){if(u=(s=r[a]).instance,l=s.currentTarget,s=s.listener,u!==o&&i.isPropagationStopped())break e;Dr(i,s,l),o=u}}}if(ze)throw e=Be,ze=!1,Be=null,e}function Br(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(Vr(t,e,2,!1),n.add(r))}function Fr(e,t,n){var r=0;t&&(r|=4),Vr(n,e,r,t)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function Kr(e){if(!e[Ur]){e[Ur]=!0,a.forEach((function(t){"selectionchange"!==t&&(Lr.has(t)||Fr(t,!1,e),Fr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ur]||(t[Ur]=!0,Fr("selectionchange",!1,t))}}function Vr(e,t,n,r){switch(Gt(t)){case 1:var i=Ht;break;case 4:i=Yt;break;default:i=qt}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var u=a.tag;if((3===u||4===u)&&((u=a.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=yi(s)))return;if(5===(u=a.tag)||6===u){r=o=a;continue e}s=s.parentNode}}r=r.return}Ae((function(){var r=o,i=xe(n),a=[];e:{var s=Mr.get(e);if(void 0!==s){var u=cn,l=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=Pn;break;case"focusin":l="focus",u=gn;break;case"focusout":l="blur",u=gn;break;case"beforeblur":case"afterblur":u=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=jn;break;case Cr:case Pr:case Ir:u=mn;break;case jr:u=Mn;break;case"scroll":u=fn;break;case"wheel":u=Tn;break;case"copy":case"cut":case"paste":u=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=In}var c=0!==(4&t),d=!c&&"scroll"===e,f=c?null!==s?s+"Capture":null:s;c=[];for(var h,p=r;null!==p;){var v=(h=p).stateNode;if(5===h.tag&&null!==v&&(h=v,null!==f&&(null!=(v=Te(p,f))&&c.push(Hr(p,v,h)))),d)break;p=p.return}0<c.length&&(s=new u(s,l,null,n,i),a.push({event:s,listeners:c}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===we||!(l=n.relatedTarget||n.fromElement)||!yi(l)&&!l[pi])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(l=(l=n.relatedTarget||n.toElement)?yi(l):null)&&(l!==(d=Ke(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(u=null,l=r),u!==l)){if(c=pn,v="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=In,v="onPointerLeave",f="onPointerEnter",p="pointer"),d=null==u?s:wi(u),h=null==l?s:wi(l),(s=new c(v,p+"leave",u,n,i)).target=d,s.relatedTarget=h,v=null,yi(i)===r&&((c=new c(f,p+"enter",l,n,i)).target=h,c.relatedTarget=d,v=c),d=v,u&&l)e:{for(f=l,p=0,h=c=u;h;h=qr(h))p++;for(h=0,v=f;v;v=qr(v))h++;for(;0<p-h;)c=qr(c),p--;for(;0<h-p;)f=qr(f),h--;for(;p--;){if(c===f||null!==f&&c===f.alternate)break e;c=qr(c),f=qr(f)}c=null}else c=null;null!==u&&Xr(a,s,u,c,!1),null!==l&&null!==d&&Xr(a,d,l,c,!0)}if("select"===(u=(s=r?wi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var g=Gn;else if(Wn(s))if(Qn)g=ar;else{g=ir;var m=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=or);switch(g&&(g=g(e,r))?Hn(a,g,n,i):(m&&m(e,s,r),"focusout"===e&&(m=s._wrapperState)&&m.controlled&&"number"===s.type&&ee(s,"number",s.value)),m=r?wi(r):window,e){case"focusin":(Wn(m)||"true"===m.contentEditable)&&(gr=m,mr=r,yr=null);break;case"focusout":yr=mr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(a,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":wr(a,n,i)}var y;if(Nn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Kn?Fn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Dn&&"ko"!==n.locale&&(Kn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Kn&&(y=en()):(Jt="value"in(Qt=i)?Qt.value:Qt.textContent,Kn=!0)),0<(m=Yr(r,b)).length&&(b=new wn(b,e,null,n,i),a.push({event:b,listeners:m}),y?b.data=y:null!==(y=Un(n))&&(b.data=y))),(y=Ln?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(Bn=!0,zn);case"textInput":return(e=t.data)===zn&&Bn?null:e;default:return null}}(e,n):function(e,t){if(Kn)return"compositionend"===e||!Nn&&Fn(e,t)?(e=en(),Zt=Jt=Qt=null,Kn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Dn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Yr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=y))}zr(a,t)}))}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Yr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Te(e,n))&&r.unshift(Hr(e,o,i)),null!=(o=Te(e,t))&&r.push(Hr(e,o,i))),e=e.return}return r}function qr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Xr(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,u=s.alternate,l=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==l&&(s=l,i?null!=(u=Te(n,o))&&a.unshift(Hr(n,u,s)):i||null!=(u=Te(n,o))&&a.push(Hr(n,u,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var $r=/\r\n?/g,Gr=/\u0000|\uFFFD/g;function Qr(e){return("string"===typeof e?e:""+e).replace($r,"\n").replace(Gr,"")}function Jr(e,t,n){if(t=Qr(t),Qr(e)!==t&&n)throw Error(o(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function ui(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Kt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Kt(t)}function li(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ci(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),fi="__reactFiber$"+di,hi="__reactProps$"+di,pi="__reactContainer$"+di,vi="__reactEvents$"+di,gi="__reactListeners$"+di,mi="__reactHandles$"+di;function yi(e){var t=e[fi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[fi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ci(e);null!==e;){if(n=e[fi])return n;e=ci(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[fi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function xi(e){return e[hi]||null}var ki=[],Si=-1;function _i(e){return{current:e}}function Ei(e){0>Si||(e.current=ki[Si],ki[Si]=null,Si--)}function Ci(e,t){Si++,ki[Si]=e.current,e.current=t}var Pi={},Ii=_i(Pi),ji=_i(!1),Mi=Pi;function Ai(e,t){var n=e.type.contextTypes;if(!n)return Pi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Ti(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){Ei(ji),Ei(Ii)}function Ni(e,t,n){if(Ii.current!==Pi)throw Error(o(168));Ci(Ii,t),Ci(ji,n)}function Ri(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,V(e)||"Unknown",i));return D({},n,r)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Pi,Mi=Ii.current,Ci(Ii,e),Ci(ji,ji.current),!0}function Di(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Ri(e,t,Mi),r.__reactInternalMemoizedMergedChildContext=e,Ei(ji),Ei(Ii),Ci(Ii,e)):Ei(ji),Ci(ji,n)}var zi=null,Bi=!1,Fi=!1;function Ui(e){null===zi?zi=[e]:zi.push(e)}function Ki(){if(!Fi&&null!==zi){Fi=!0;var e=0,t=bt;try{var n=zi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}zi=null,Bi=!1}catch(i){throw null!==zi&&(zi=zi.slice(e+1)),qe(Ze,Ki),i}finally{bt=t,Fi=!1}}return null}var Vi=[],Wi=0,Hi=null,Yi=0,qi=[],Xi=0,$i=null,Gi=1,Qi="";function Ji(e,t){Vi[Wi++]=Yi,Vi[Wi++]=Hi,Hi=e,Yi=t}function Zi(e,t,n){qi[Xi++]=Gi,qi[Xi++]=Qi,qi[Xi++]=$i,$i=e;var r=Gi;e=Qi;var i=32-at(r)-1;r&=~(1<<i),n+=1;var o=32-at(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Gi=1<<32-at(t)+i|n<<i|r,Qi=o+e}else Gi=1<<o|n<<i|r,Qi=e}function eo(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function to(e){for(;e===Hi;)Hi=Vi[--Wi],Vi[Wi]=null,Yi=Vi[--Wi],Vi[Wi]=null;for(;e===$i;)$i=qi[--Xi],qi[Xi]=null,Qi=qi[--Xi],qi[Xi]=null,Gi=qi[--Xi],qi[Xi]=null}var no=null,ro=null,io=!1,oo=null;function ao(e,t){var n=Tl(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function so(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=li(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==$i?{id:Gi,overflow:Qi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Tl(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function uo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function lo(e){if(io){var t=ro;if(t){var n=t;if(!so(e,t)){if(uo(e))throw Error(o(418));t=li(n.nextSibling);var r=no;t&&so(e,t)?ao(r,n):(e.flags=-4097&e.flags|2,io=!1,no=e)}}else{if(uo(e))throw Error(o(418));e.flags=-4097&e.flags|2,io=!1,no=e}}}function co(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function fo(e){if(e!==no)return!1;if(!io)return co(e),io=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ro)){if(uo(e))throw ho(),Error(o(418));for(;t;)ao(e,t),t=li(t.nextSibling)}if(co(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=li(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?li(e.stateNode.nextSibling):null;return!0}function ho(){for(var e=ro;e;)e=li(e.nextSibling)}function po(){ro=no=null,io=!1}function vo(e){null===oo?oo=[e]:oo.push(e)}var go=w.ReactCurrentBatchConfig;function mo(e,t){if(e&&e.defaultProps){for(var n in t=D({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var yo=_i(null),bo=null,wo=null,xo=null;function ko(){xo=wo=bo=null}function So(e){var t=yo.current;Ei(yo),e._currentValue=t}function _o(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Eo(e,t){bo=e,xo=wo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ws=!0),e.firstContext=null)}function Co(e){var t=e._currentValue;if(xo!==e)if(e={context:e,memoizedValue:t,next:null},null===wo){if(null===bo)throw Error(o(308));wo=e,bo.dependencies={lanes:0,firstContext:e}}else wo=wo.next=e;return t}var Po=null;function Io(e){null===Po?Po=[e]:Po.push(e)}function jo(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Io(t)):(n.next=i.next,i.next=n),t.interleaved=n,Mo(e,r)}function Mo(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ao=!1;function To(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Oo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function No(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ro(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&ju)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Mo(e,n)}return null===(i=r.interleaved)?(t.next=t,Io(r)):(t.next=i.next,i.next=t),r.interleaved=t,Mo(e,n)}function Lo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Do(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function zo(e,t,n,r){var i=e.updateQueue;Ao=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var u=s,l=u.next;u.next=null,null===a?o=l:a.next=l,a=u;var c=e.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==a&&(null===s?c.firstBaseUpdate=l:s.next=l,c.lastBaseUpdate=u))}if(null!==o){var d=i.baseState;for(a=0,c=l=u=null,s=o;;){var f=s.lane,h=s.eventTime;if((r&f)===f){null!==c&&(c=c.next={eventTime:h,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,v=s;switch(f=t,h=n,v.tag){case 1:if("function"===typeof(p=v.payload)){d=p.call(h,d,f);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(f="function"===typeof(p=v.payload)?p.call(h,d,f):p)||void 0===f)break e;d=D({},d,f);break e;case 2:Ao=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(f=i.effects)?i.effects=[s]:f.push(s))}else h={eventTime:h,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(l=c=h,u=d):c=c.next=h,a|=f;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(f=s).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===c&&(u=d),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);Du|=a,e.lanes=a,e.memoizedState=d}}function Bo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var Fo=(new r.Component).refs;function Uo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:D({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Ko={isMounted:function(e){return!!(e=e._reactInternals)&&Ke(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tl(),i=nl(e),o=No(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Ro(e,o,i))&&(rl(t,e,i,r),Lo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tl(),i=nl(e),o=No(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Ro(e,o,i))&&(rl(t,e,i,r),Lo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tl(),r=nl(e),i=No(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Ro(e,i,r))&&(rl(t,e,r,n),Lo(t,e,r))}};function Vo(e,t,n,r,i,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(i,o))}function Wo(e,t,n){var r=!1,i=Pi,o=t.contextType;return"object"===typeof o&&null!==o?o=Co(o):(i=Ti(t)?Mi:Ii.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ai(e,i):Pi),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ko,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Ho(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ko.enqueueReplaceState(t,t.state,null)}function Yo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Fo,To(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=Co(o):(o=Ti(t)?Mi:Ii.current,i.context=Ai(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(Uo(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Ko.enqueueReplaceState(i,i.state,null),zo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function qo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;t===Fo&&(t=i.refs={}),null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Xo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function $o(e){return(0,e._init)(e._payload)}function Go(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Nl(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=zl(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){var o=n.type;return o===S?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===T&&$o(o)===t.type)?((r=i(t,n.props)).ref=qo(e,t,n),r.return=e,r):((r=Rl(n.type,n.key,n.props,null,e.mode,r)).ref=qo(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Bl(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=Ll(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=zl(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Rl(t.type,t.key,t.props,null,e.mode,n)).ref=qo(e,null,t),n.return=e,n;case k:return(t=Bl(t,e.mode,n)).return=e,t;case T:return f(e,(0,t._init)(t._payload),n)}if(te(t)||R(t))return(t=Ll(t,e.mode,n,null)).return=e,t;Xo(e,t)}return null}function h(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?l(e,t,n,r):null;case k:return n.key===i?c(e,t,n,r):null;case T:return h(e,t,(i=n._init)(n._payload),r)}if(te(n)||R(n))return null!==i?null:d(e,t,n,r,null);Xo(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case k:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case T:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||R(r))return d(t,e=e.get(n)||null,r,i,null);Xo(t,r)}return null}function v(i,o,s,u){for(var l=null,c=null,d=o,v=o=0,g=null;null!==d&&v<s.length;v++){d.index>v?(g=d,d=null):g=d.sibling;var m=h(i,d,s[v],u);if(null===m){null===d&&(d=g);break}e&&d&&null===m.alternate&&t(i,d),o=a(m,o,v),null===c?l=m:c.sibling=m,c=m,d=g}if(v===s.length)return n(i,d),io&&Ji(i,v),l;if(null===d){for(;v<s.length;v++)null!==(d=f(i,s[v],u))&&(o=a(d,o,v),null===c?l=d:c.sibling=d,c=d);return io&&Ji(i,v),l}for(d=r(i,d);v<s.length;v++)null!==(g=p(d,i,v,s[v],u))&&(e&&null!==g.alternate&&d.delete(null===g.key?v:g.key),o=a(g,o,v),null===c?l=g:c.sibling=g,c=g);return e&&d.forEach((function(e){return t(i,e)})),io&&Ji(i,v),l}function g(i,s,u,l){var c=R(u);if("function"!==typeof c)throw Error(o(150));if(null==(u=c.call(u)))throw Error(o(151));for(var d=c=null,v=s,g=s=0,m=null,y=u.next();null!==v&&!y.done;g++,y=u.next()){v.index>g?(m=v,v=null):m=v.sibling;var b=h(i,v,y.value,l);if(null===b){null===v&&(v=m);break}e&&v&&null===b.alternate&&t(i,v),s=a(b,s,g),null===d?c=b:d.sibling=b,d=b,v=m}if(y.done)return n(i,v),io&&Ji(i,g),c;if(null===v){for(;!y.done;g++,y=u.next())null!==(y=f(i,y.value,l))&&(s=a(y,s,g),null===d?c=y:d.sibling=y,d=y);return io&&Ji(i,g),c}for(v=r(i,v);!y.done;g++,y=u.next())null!==(y=p(v,i,g,y.value,l))&&(e&&null!==y.alternate&&v.delete(null===y.key?g:y.key),s=a(y,s,g),null===d?c=y:d.sibling=y,d=y);return e&&v.forEach((function(e){return t(i,e)})),io&&Ji(i,g),c}return function e(r,o,a,u){if("object"===typeof a&&null!==a&&a.type===S&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case x:e:{for(var l=a.key,c=o;null!==c;){if(c.key===l){if((l=a.type)===S){if(7===c.tag){n(r,c.sibling),(o=i(c,a.props.children)).return=r,r=o;break e}}else if(c.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===T&&$o(l)===c.type){n(r,c.sibling),(o=i(c,a.props)).ref=qo(r,c,a),o.return=r,r=o;break e}n(r,c);break}t(r,c),c=c.sibling}a.type===S?((o=Ll(a.props.children,r.mode,u,a.key)).return=r,r=o):((u=Rl(a.type,a.key,a.props,null,r.mode,u)).ref=qo(r,o,a),u.return=r,r=u)}return s(r);case k:e:{for(c=a.key;null!==o;){if(o.key===c){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){n(r,o.sibling),(o=i(o,a.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=Bl(a,r.mode,u)).return=r,r=o}return s(r);case T:return e(r,o,(c=a._init)(a._payload),u)}if(te(a))return v(r,o,a,u);if(R(a))return g(r,o,a,u);Xo(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,a)).return=r,r=o):(n(r,o),(o=zl(a,r.mode,u)).return=r,r=o),s(r)):n(r,o)}}var Qo=Go(!0),Jo=Go(!1),Zo={},ea=_i(Zo),ta=_i(Zo),na=_i(Zo);function ra(e){if(e===Zo)throw Error(o(174));return e}function ia(e,t){switch(Ci(na,t),Ci(ta,e),Ci(ea,Zo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(ea),Ci(ea,t)}function oa(){Ei(ea),Ei(ta),Ei(na)}function aa(e){ra(na.current);var t=ra(ea.current),n=ue(t,e.type);t!==n&&(Ci(ta,e),Ci(ea,n))}function sa(e){ta.current===e&&(Ei(ea),Ei(ta))}var ua=_i(0);function la(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ca=[];function da(){for(var e=0;e<ca.length;e++)ca[e]._workInProgressVersionPrimary=null;ca.length=0}var fa=w.ReactCurrentDispatcher,ha=w.ReactCurrentBatchConfig,pa=0,va=null,ga=null,ma=null,ya=!1,ba=!1,wa=0,xa=0;function ka(){throw Error(o(321))}function Sa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function _a(e,t,n,r,i,a){if(pa=a,va=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fa.current=null===e||null===e.memoizedState?ss:us,e=n(r,i),ba){a=0;do{if(ba=!1,wa=0,25<=a)throw Error(o(301));a+=1,ma=ga=null,t.updateQueue=null,fa.current=ls,e=n(r,i)}while(ba)}if(fa.current=as,t=null!==ga&&null!==ga.next,pa=0,ma=ga=va=null,ya=!1,t)throw Error(o(300));return e}function Ea(){var e=0!==wa;return wa=0,e}function Ca(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ma?va.memoizedState=ma=e:ma=ma.next=e,ma}function Pa(){if(null===ga){var e=va.alternate;e=null!==e?e.memoizedState:null}else e=ga.next;var t=null===ma?va.memoizedState:ma.next;if(null!==t)ma=t,ga=e;else{if(null===e)throw Error(o(310));e={memoizedState:(ga=e).memoizedState,baseState:ga.baseState,baseQueue:ga.baseQueue,queue:ga.queue,next:null},null===ma?va.memoizedState=ma=e:ma=ma.next=e}return ma}function Ia(e,t){return"function"===typeof t?t(e):t}function ja(e){var t=Pa(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=ga,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var u=s=null,l=null,c=a;do{var d=c.lane;if((pa&d)===d)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var f={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(u=l=f,s=r):l=l.next=f,va.lanes|=d,Du|=d}c=c.next}while(null!==c&&c!==a);null===l?s=r:l.next=u,sr(r,t.memoizedState)||(ws=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,va.lanes|=a,Du|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ma(e){var t=Pa(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);sr(a,t.memoizedState)||(ws=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Aa(){}function Ta(e,t){var n=va,r=Pa(),i=t(),a=!sr(r.memoizedState,i);if(a&&(r.memoizedState=i,ws=!0),r=r.queue,Wa(Ra.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==ma&&1&ma.memoizedState.tag){if(n.flags|=2048,Ba(9,Na.bind(null,n,r,i,t),void 0,null),null===Mu)throw Error(o(349));0!==(30&pa)||Oa(n,t,i)}return i}function Oa(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=va.updateQueue)?(t={lastEffect:null,stores:null},va.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Na(e,t,n,r){t.value=n,t.getSnapshot=r,La(t)&&Da(e)}function Ra(e,t,n){return n((function(){La(t)&&Da(e)}))}function La(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Da(e){var t=Mo(e,1);null!==t&&rl(t,e,1,-1)}function za(e){var t=Ca();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ia,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,va,e),[t.memoizedState,e]}function Ba(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=va.updateQueue)?(t={lastEffect:null,stores:null},va.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Fa(){return Pa().memoizedState}function Ua(e,t,n,r){var i=Ca();va.flags|=e,i.memoizedState=Ba(1|t,n,void 0,void 0===r?null:r)}function Ka(e,t,n,r){var i=Pa();r=void 0===r?null:r;var o=void 0;if(null!==ga){var a=ga.memoizedState;if(o=a.destroy,null!==r&&Sa(r,a.deps))return void(i.memoizedState=Ba(t,n,o,r))}va.flags|=e,i.memoizedState=Ba(1|t,n,o,r)}function Va(e,t){return Ua(8390656,8,e,t)}function Wa(e,t){return Ka(2048,8,e,t)}function Ha(e,t){return Ka(4,2,e,t)}function Ya(e,t){return Ka(4,4,e,t)}function qa(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Xa(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ka(4,4,qa.bind(null,t,e),n)}function $a(){}function Ga(e,t){var n=Pa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Sa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Qa(e,t){var n=Pa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Sa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ja(e,t,n){return 0===(21&pa)?(e.baseState&&(e.baseState=!1,ws=!0),e.memoizedState=n):(sr(n,t)||(n=vt(),va.lanes|=n,Du|=n,e.baseState=!0),t)}function Za(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=ha.transition;ha.transition={};try{e(!1),t()}finally{bt=n,ha.transition=r}}function es(){return Pa().memoizedState}function ts(e,t,n){var r=nl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))is(t,n);else if(null!==(n=jo(e,t,n,r))){rl(n,e,r,tl()),os(n,t,r)}}function ns(e,t,n){var r=nl(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))is(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,a)){var u=t.interleaved;return null===u?(i.next=i,Io(t)):(i.next=u.next,u.next=i),void(t.interleaved=i)}}catch(l){}null!==(n=jo(e,t,i,r))&&(rl(n,e,r,i=tl()),os(n,t,r))}}function rs(e){var t=e.alternate;return e===va||null!==t&&t===va}function is(e,t){ba=ya=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function os(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var as={readContext:Co,useCallback:ka,useContext:ka,useEffect:ka,useImperativeHandle:ka,useInsertionEffect:ka,useLayoutEffect:ka,useMemo:ka,useReducer:ka,useRef:ka,useState:ka,useDebugValue:ka,useDeferredValue:ka,useTransition:ka,useMutableSource:ka,useSyncExternalStore:ka,useId:ka,unstable_isNewReconciler:!1},ss={readContext:Co,useCallback:function(e,t){return Ca().memoizedState=[e,void 0===t?null:t],e},useContext:Co,useEffect:Va,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ua(4194308,4,qa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ua(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ua(4,2,e,t)},useMemo:function(e,t){var n=Ca();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ca();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,va,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Ca().memoizedState=e},useState:za,useDebugValue:$a,useDeferredValue:function(e){return Ca().memoizedState=e},useTransition:function(){var e=za(!1),t=e[0];return e=Za.bind(null,e[1]),Ca().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=va,i=Ca();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Mu)throw Error(o(349));0!==(30&pa)||Oa(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Va(Ra.bind(null,r,a,e),[e]),r.flags|=2048,Ba(9,Na.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=Ca(),t=Mu.identifierPrefix;if(io){var n=Qi;t=":"+t+"R"+(n=(Gi&~(1<<32-at(Gi)-1)).toString(32)+n),0<(n=wa++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=xa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},us={readContext:Co,useCallback:Ga,useContext:Co,useEffect:Wa,useImperativeHandle:Xa,useInsertionEffect:Ha,useLayoutEffect:Ya,useMemo:Qa,useReducer:ja,useRef:Fa,useState:function(){return ja(Ia)},useDebugValue:$a,useDeferredValue:function(e){return Ja(Pa(),ga.memoizedState,e)},useTransition:function(){return[ja(Ia)[0],Pa().memoizedState]},useMutableSource:Aa,useSyncExternalStore:Ta,useId:es,unstable_isNewReconciler:!1},ls={readContext:Co,useCallback:Ga,useContext:Co,useEffect:Wa,useImperativeHandle:Xa,useInsertionEffect:Ha,useLayoutEffect:Ya,useMemo:Qa,useReducer:Ma,useRef:Fa,useState:function(){return Ma(Ia)},useDebugValue:$a,useDeferredValue:function(e){var t=Pa();return null===ga?t.memoizedState=e:Ja(t,ga.memoizedState,e)},useTransition:function(){return[Ma(Ia)[0],Pa().memoizedState]},useMutableSource:Aa,useSyncExternalStore:Ta,useId:es,unstable_isNewReconciler:!1};function cs(e,t){try{var n="",r=t;do{n+=U(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function ds(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var hs="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=No(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hu||(Hu=!0,Yu=r),fs(0,t)},n}function vs(e,t,n){(n=No(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){fs(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){fs(0,t),"function"!==typeof r&&(null===qu?qu=new Set([this]):qu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function gs(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new hs;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Cl.bind(null,e,t,n),t.then(e,e))}function ms(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ys(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=No(-1,1)).tag=2,Ro(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var bs=w.ReactCurrentOwner,ws=!1;function xs(e,t,n,r){t.child=null===e?Jo(t,null,n,r):Qo(t,e.child,n,r)}function ks(e,t,n,r,i){n=n.render;var o=t.ref;return Eo(t,i),r=_a(e,t,n,r,o,i),n=Ea(),null===e||ws?(io&&n&&eo(t),t.flags|=1,xs(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hs(e,t,i))}function Ss(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Ol(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Rl(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,_s(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(a,r)&&e.ref===t.ref)return Hs(e,t,i)}return t.flags|=1,(e=Nl(o,r)).ref=t.ref,e.return=t,t.child=e}function _s(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(ur(o,r)&&e.ref===t.ref){if(ws=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,Hs(e,t,i);0!==(131072&e.flags)&&(ws=!0)}}return Ps(e,t,n,r,i)}function Es(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ci(Nu,Ou),Ou|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ci(Nu,Ou),Ou|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Ci(Nu,Ou),Ou|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ci(Nu,Ou),Ou|=r;return xs(e,t,i,n),t.child}function Cs(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ps(e,t,n,r,i){var o=Ti(n)?Mi:Ii.current;return o=Ai(t,o),Eo(t,i),n=_a(e,t,n,r,o,i),r=Ea(),null===e||ws?(io&&r&&eo(t),t.flags|=1,xs(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hs(e,t,i))}function Is(e,t,n,r,i){if(Ti(n)){var o=!0;Li(t)}else o=!1;if(Eo(t,i),null===t.stateNode)Ws(e,t),Wo(t,n,r),Yo(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var u=a.context,l=n.contextType;"object"===typeof l&&null!==l?l=Co(l):l=Ai(t,l=Ti(n)?Mi:Ii.current);var c=n.getDerivedStateFromProps,d="function"===typeof c||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||u!==l)&&Ho(t,a,r,l),Ao=!1;var f=t.memoizedState;a.state=f,zo(t,r,a,i),u=t.memoizedState,s!==r||f!==u||ji.current||Ao?("function"===typeof c&&(Uo(t,n,c,r),u=t.memoizedState),(s=Ao||Vo(t,n,s,r,f,u,l))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=l,r=s):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Oo(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:mo(t.type,s),a.props=l,d=t.pendingProps,f=a.context,"object"===typeof(u=n.contextType)&&null!==u?u=Co(u):u=Ai(t,u=Ti(n)?Mi:Ii.current);var h=n.getDerivedStateFromProps;(c="function"===typeof h||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==d||f!==u)&&Ho(t,a,r,u),Ao=!1,f=t.memoizedState,a.state=f,zo(t,r,a,i);var p=t.memoizedState;s!==d||f!==p||ji.current||Ao?("function"===typeof h&&(Uo(t,n,h,r),p=t.memoizedState),(l=Ao||Vo(t,n,l,r,f,p,u)||!1)?(c||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,u),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=u,r=l):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return js(e,t,n,r,o,i)}function js(e,t,n,r,i,o){Cs(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&Di(t,n,!1),Hs(e,t,o);r=t.stateNode,bs.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Qo(t,e.child,null,o),t.child=Qo(t,null,s,o)):xs(e,t,s,o),t.memoizedState=r.state,i&&Di(t,n,!0),t.child}function Ms(e){var t=e.stateNode;t.pendingContext?Ni(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ni(0,t.context,!1),ia(e,t.containerInfo)}function As(e,t,n,r,i){return po(),vo(i),t.flags|=256,xs(e,t,n,r),t.child}var Ts,Os,Ns,Rs,Ls={dehydrated:null,treeContext:null,retryLane:0};function Ds(e){return{baseLanes:e,cachePool:null,transitions:null}}function zs(e,t,n){var r,i=t.pendingProps,a=ua.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Ci(ua,1&a),null===e)return lo(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=i.children,e=i.fallback,s?(i=t.mode,s=t.child,u={mode:"hidden",children:u},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=u):s=Dl(u,i,0,null),e=Ll(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ds(n),t.memoizedState=Ls,e):Bs(t,u));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,s){if(n)return 256&t.flags?(t.flags&=-257,Fs(e,t,s,r=ds(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Dl({mode:"visible",children:r.children},i,0,null),(a=Ll(a,i,s,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&Qo(t,e.child,null,s),t.child.memoizedState=Ds(s),t.memoizedState=Ls,a);if(0===(1&t.mode))return Fs(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var u=r.dgst;return r=u,Fs(e,t,s,r=ds(a=Error(o(419)),r,void 0))}if(u=0!==(s&e.childLanes),ws||u){if(null!==(r=Mu)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Mo(e,i),rl(r,e,i,-1))}return gl(),Fs(e,t,s,r=ds(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Il.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,ro=li(i.nextSibling),no=t,io=!0,oo=null,null!==e&&(qi[Xi++]=Gi,qi[Xi++]=Qi,qi[Xi++]=$i,Gi=e.id,Qi=e.overflow,$i=t),t=Bs(t,r.children),t.flags|=4096,t)}(e,t,u,i,r,a,n);if(s){s=i.fallback,u=t.mode,r=(a=e.child).sibling;var l={mode:"hidden",children:i.children};return 0===(1&u)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=l,t.deletions=null):(i=Nl(a,l)).subtreeFlags=14680064&a.subtreeFlags,null!==r?s=Nl(r,s):(s=Ll(s,u,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,u=null===(u=e.child.memoizedState)?Ds(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=e.childLanes&~n,t.memoizedState=Ls,i}return e=(s=e.child).sibling,i=Nl(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Bs(e,t){return(t=Dl({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Fs(e,t,n,r){return null!==r&&vo(r),Qo(t,e.child,null,n),(e=Bs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Us(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),_o(e.return,t,n)}function Ks(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Vs(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(xs(e,t,r.children,n),0!==(2&(r=ua.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Us(e,n,t);else if(19===e.tag)Us(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ci(ua,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===la(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ks(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===la(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ks(t,!0,n,null,o);break;case"together":Ks(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ws(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Du|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Nl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Nl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ys(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function qs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Xs(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qs(t),null;case 1:case 17:return Ti(t.type)&&Oi(),qs(t),null;case 3:return r=t.stateNode,oa(),Ei(ji),Ei(Ii),da(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fo(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(sl(oo),oo=null))),Os(e,t),qs(t),null;case 5:sa(t);var i=ra(na.current);if(n=t.type,null!==e&&null!=t.stateNode)Ns(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return qs(t),null}if(e=ra(ea.current),fo(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[fi]=t,r[hi]=a,e=0!==(1&t.mode),n){case"dialog":Br("cancel",r),Br("close",r);break;case"iframe":case"object":case"embed":Br("load",r);break;case"video":case"audio":for(i=0;i<Rr.length;i++)Br(Rr[i],r);break;case"source":Br("error",r);break;case"img":case"image":case"link":Br("error",r),Br("load",r);break;case"details":Br("toggle",r);break;case"input":G(r,a),Br("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Br("invalid",r);break;case"textarea":ie(r,a),Br("invalid",r)}for(var u in ye(n,a),i=null,a)if(a.hasOwnProperty(u)){var l=a[u];"children"===u?"string"===typeof l?r.textContent!==l&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,l,e),i=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,l,e),i=["children",""+l]):s.hasOwnProperty(u)&&null!=l&&"onScroll"===u&&Br("scroll",r)}switch(n){case"input":Y(r),Z(r,a,!0);break;case"textarea":Y(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[fi]=t,e[hi]=r,Ts(e,t,!1,!1),t.stateNode=e;e:{switch(u=be(n,r),n){case"dialog":Br("cancel",e),Br("close",e),i=r;break;case"iframe":case"object":case"embed":Br("load",e),i=r;break;case"video":case"audio":for(i=0;i<Rr.length;i++)Br(Rr[i],e);i=r;break;case"source":Br("error",e),i=r;break;case"img":case"image":case"link":Br("error",e),Br("load",e),i=r;break;case"details":Br("toggle",e),i=r;break;case"input":G(e,r),i=$(e,r),Br("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=D({},r,{value:void 0}),Br("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Br("invalid",e)}for(a in ye(n,i),l=i)if(l.hasOwnProperty(a)){var c=l[a];"style"===a?ge(e,c):"dangerouslySetInnerHTML"===a?null!=(c=c?c.__html:void 0)&&de(e,c):"children"===a?"string"===typeof c?("textarea"!==n||""!==c)&&fe(e,c):"number"===typeof c&&fe(e,""+c):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=c&&"onScroll"===a&&Br("scroll",e):null!=c&&b(e,a,c,u))}switch(n){case"input":Y(e),Z(e,r,!1);break;case"textarea":Y(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return qs(t),null;case 6:if(e&&null!=t.stateNode)Rs(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=ra(na.current),ra(ea.current),fo(t)){if(r=t.stateNode,n=t.memoizedProps,r[fi]=t,(a=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fi]=t,t.stateNode=r}return qs(t),null;case 13:if(Ei(ua),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))ho(),po(),t.flags|=98560,a=!1;else if(a=fo(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(o(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(o(317));a[fi]=t}else po(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;qs(t),a=!1}else null!==oo&&(sl(oo),oo=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ua.current)?0===Ru&&(Ru=3):gl())),null!==t.updateQueue&&(t.flags|=4),qs(t),null);case 4:return oa(),Os(e,t),null===e&&Kr(t.stateNode.containerInfo),qs(t),null;case 10:return So(t.type._context),qs(t),null;case 19:if(Ei(ua),null===(a=t.memoizedState))return qs(t),null;if(r=0!==(128&t.flags),null===(u=a.rendering))if(r)Ys(a,!1);else{if(0!==Ru||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=la(e))){for(t.flags|=128,Ys(a,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(u=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=u.childLanes,a.lanes=u.lanes,a.child=u.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=u.memoizedProps,a.memoizedState=u.memoizedState,a.updateQueue=u.updateQueue,a.type=u.type,e=u.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ci(ua,1&ua.current|2),t.child}e=e.sibling}null!==a.tail&&Qe()>Vu&&(t.flags|=128,r=!0,Ys(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=la(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ys(a,!0),null===a.tail&&"hidden"===a.tailMode&&!u.alternate&&!io)return qs(t),null}else 2*Qe()-a.renderingStartTime>Vu&&1073741824!==n&&(t.flags|=128,r=!0,Ys(a,!1),t.lanes=4194304);a.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=a.last)?n.sibling=u:t.child=u,a.last=u)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Qe(),t.sibling=null,n=ua.current,Ci(ua,r?1&n|2:1&n),t):(qs(t),null);case 22:case 23:return fl(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ou)&&(qs(t),6&t.subtreeFlags&&(t.flags|=8192)):qs(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function $s(e,t){switch(to(t),t.tag){case 1:return Ti(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return oa(),Ei(ji),Ei(Ii),da(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return sa(t),null;case 13:if(Ei(ua),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));po()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(ua),null;case 4:return oa(),null;case 10:return So(t.type._context),null;case 22:case 23:return fl(),null;default:return null}}Ts=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Os=function(){},Ns=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,ra(ea.current);var o,a=null;switch(n){case"input":i=$(e,i),r=$(e,r),a=[];break;case"select":i=D({},i,{value:void 0}),r=D({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(c in ye(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var u=i[c];for(o in u)u.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in r){var l=r[c];if(u=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&l!==u&&(null!=l||null!=u))if("style"===c)if(u){for(o in u)!u.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&u[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(a||(a=[]),a.push(c,n)),n=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,u=u?u.__html:void 0,null!=l&&u!==l&&(a=a||[]).push(c,l)):"children"===c?"string"!==typeof l&&"number"!==typeof l||(a=a||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&Br("scroll",e),a||u===l||(a=[])):(a=a||[]).push(c,l))}n&&(a=a||[]).push("style",n);var c=a;(t.updateQueue=c)&&(t.flags|=4)}},Rs=function(e,t,n,r){n!==r&&(t.flags|=4)};var Gs=!1,Qs=!1,Js="function"===typeof WeakSet?WeakSet:Set,Zs=null;function eu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){El(e,t,r)}else n.current=null}function tu(e,t,n){try{n()}catch(r){El(e,t,r)}}var nu=!1;function ru(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&tu(t,n,o)}i=i.next}while(i!==r)}}function iu(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ou(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function au(e){var t=e.alternate;null!==t&&(e.alternate=null,au(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fi],delete t[hi],delete t[vi],delete t[gi],delete t[mi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function su(e){return 5===e.tag||3===e.tag||4===e.tag}function uu(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||su(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function lu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(lu(e,t,n),e=e.sibling;null!==e;)lu(e,t,n),e=e.sibling}function cu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cu(e,t,n),e=e.sibling;null!==e;)cu(e,t,n),e=e.sibling}var du=null,fu=!1;function hu(e,t,n){for(n=n.child;null!==n;)pu(e,t,n),n=n.sibling}function pu(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Qs||eu(n,t);case 6:var r=du,i=fu;du=null,hu(e,t,n),fu=i,null!==(du=r)&&(fu?(e=du,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):du.removeChild(n.stateNode));break;case 18:null!==du&&(fu?(e=du,n=n.stateNode,8===e.nodeType?ui(e.parentNode,n):1===e.nodeType&&ui(e,n),Kt(e)):ui(du,n.stateNode));break;case 4:r=du,i=fu,du=n.stateNode.containerInfo,fu=!0,hu(e,t,n),du=r,fu=i;break;case 0:case 11:case 14:case 15:if(!Qs&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,void 0!==a&&(0!==(2&o)||0!==(4&o))&&tu(n,t,a),i=i.next}while(i!==r)}hu(e,t,n);break;case 1:if(!Qs&&(eu(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){El(n,t,s)}hu(e,t,n);break;case 21:hu(e,t,n);break;case 22:1&n.mode?(Qs=(r=Qs)||null!==n.memoizedState,hu(e,t,n),Qs=r):hu(e,t,n);break;default:hu(e,t,n)}}function vu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Js),t.forEach((function(t){var r=jl.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function gu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:du=u.stateNode,fu=!1;break e;case 3:case 4:du=u.stateNode.containerInfo,fu=!0;break e}u=u.return}if(null===du)throw Error(o(160));pu(a,s,i),du=null,fu=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(c){El(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)mu(t,e),t=t.sibling}function mu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gu(t,e),yu(e),4&r){try{ru(3,e,e.return),iu(3,e)}catch(g){El(e,e.return,g)}try{ru(5,e,e.return)}catch(g){El(e,e.return,g)}}break;case 1:gu(t,e),yu(e),512&r&&null!==n&&eu(n,n.return);break;case 5:if(gu(t,e),yu(e),512&r&&null!==n&&eu(n,n.return),32&e.flags){var i=e.stateNode;try{fe(i,"")}catch(g){El(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,s=null!==n?n.memoizedProps:a,u=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===u&&"radio"===a.type&&null!=a.name&&Q(i,a),be(u,s);var c=be(u,a);for(s=0;s<l.length;s+=2){var d=l[s],f=l[s+1];"style"===d?ge(i,f):"dangerouslySetInnerHTML"===d?de(i,f):"children"===d?fe(i,f):b(i,d,f,c)}switch(u){case"input":J(i,a);break;case"textarea":oe(i,a);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(i,!!a.multiple,p,!1):h!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[hi]=a}catch(g){El(e,e.return,g)}}break;case 6:if(gu(t,e),yu(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(g){El(e,e.return,g)}}break;case 3:if(gu(t,e),yu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Kt(t.containerInfo)}catch(g){El(e,e.return,g)}break;case 4:default:gu(t,e),yu(e);break;case 13:gu(t,e),yu(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(Ku=Qe())),4&r&&vu(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Qs=(c=Qs)||d,gu(t,e),Qs=c):gu(t,e),yu(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!d&&0!==(1&e.mode))for(Zs=e,d=e.child;null!==d;){for(f=Zs=d;null!==Zs;){switch(p=(h=Zs).child,h.tag){case 0:case 11:case 14:case 15:ru(4,h,h.return);break;case 1:eu(h,h.return);var v=h.stateNode;if("function"===typeof v.componentWillUnmount){r=h,n=h.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(g){El(r,n,g)}}break;case 5:eu(h,h.return);break;case 22:if(null!==h.memoizedState){ku(f);continue}}null!==p?(p.return=h,Zs=p):ku(f)}d=d.sibling}e:for(d=null,f=e;;){if(5===f.tag){if(null===d){d=f;try{i=f.stateNode,c?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(u=f.stateNode,s=void 0!==(l=f.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,u.style.display=ve("display",s))}catch(g){El(e,e.return,g)}}}else if(6===f.tag){if(null===d)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(g){El(e,e.return,g)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:gu(t,e),yu(e),4&r&&vu(e);case 21:}}function yu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(su(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(fe(i,""),r.flags&=-33),cu(e,uu(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;lu(e,uu(e),a);break;default:throw Error(o(161))}}catch(s){El(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bu(e,t,n){Zs=e,wu(e,t,n)}function wu(e,t,n){for(var r=0!==(1&e.mode);null!==Zs;){var i=Zs,o=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Gs;if(!a){var s=i.alternate,u=null!==s&&null!==s.memoizedState||Qs;s=Gs;var l=Qs;if(Gs=a,(Qs=u)&&!l)for(Zs=i;null!==Zs;)u=(a=Zs).child,22===a.tag&&null!==a.memoizedState?Su(i):null!==u?(u.return=a,Zs=u):Su(i);for(;null!==o;)Zs=o,wu(o,t,n),o=o.sibling;Zs=i,Gs=s,Qs=l}xu(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,Zs=o):xu(e)}}function xu(e){for(;null!==Zs;){var t=Zs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qs||iu(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Qs)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:mo(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Bo(t,a,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Bo(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var d=c.memoizedState;if(null!==d){var f=d.dehydrated;null!==f&&Kt(f)}}}break;default:throw Error(o(163))}Qs||512&t.flags&&ou(t)}catch(h){El(t,t.return,h)}}if(t===e){Zs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zs=n;break}Zs=t.return}}function ku(e){for(;null!==Zs;){var t=Zs;if(t===e){Zs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zs=n;break}Zs=t.return}}function Su(e){for(;null!==Zs;){var t=Zs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{iu(4,t)}catch(u){El(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(u){El(t,i,u)}}var o=t.return;try{ou(t)}catch(u){El(t,o,u)}break;case 5:var a=t.return;try{ou(t)}catch(u){El(t,a,u)}}}catch(u){El(t,t.return,u)}if(t===e){Zs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Zs=s;break}Zs=t.return}}var _u,Eu=Math.ceil,Cu=w.ReactCurrentDispatcher,Pu=w.ReactCurrentOwner,Iu=w.ReactCurrentBatchConfig,ju=0,Mu=null,Au=null,Tu=0,Ou=0,Nu=_i(0),Ru=0,Lu=null,Du=0,zu=0,Bu=0,Fu=null,Uu=null,Ku=0,Vu=1/0,Wu=null,Hu=!1,Yu=null,qu=null,Xu=!1,$u=null,Gu=0,Qu=0,Ju=null,Zu=-1,el=0;function tl(){return 0!==(6&ju)?Qe():-1!==Zu?Zu:Zu=Qe()}function nl(e){return 0===(1&e.mode)?1:0!==(2&ju)&&0!==Tu?Tu&-Tu:null!==go.transition?(0===el&&(el=vt()),el):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Gt(e.type)}function rl(e,t,n,r){if(50<Qu)throw Qu=0,Ju=null,Error(o(185));mt(e,n,r),0!==(2&ju)&&e===Mu||(e===Mu&&(0===(2&ju)&&(zu|=n),4===Ru&&ul(e,Tu)),il(e,r),1===n&&0===ju&&0===(1&t.mode)&&(Vu=Qe()+500,Bi&&Ki()))}function il(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-at(o),s=1<<a,u=i[a];-1===u?0!==(s&n)&&0===(s&r)||(i[a]=ht(s,t)):u<=t&&(e.expiredLanes|=s),o&=~s}}(e,t);var r=ft(e,e===Mu?Tu:0);if(0===r)null!==n&&Xe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Xe(n),1===t)0===e.tag?function(e){Bi=!0,Ui(e)}(ll.bind(null,e)):Ui(ll.bind(null,e)),ai((function(){0===(6&ju)&&Ki()})),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ml(n,ol.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ol(e,t){if(Zu=-1,el=0,0!==(6&ju))throw Error(o(327));var n=e.callbackNode;if(Sl()&&e.callbackNode!==n)return null;var r=ft(e,e===Mu?Tu:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=ml(e,r);else{t=r;var i=ju;ju|=2;var a=vl();for(Mu===e&&Tu===t||(Wu=null,Vu=Qe()+500,hl(e,t));;)try{bl();break}catch(u){pl(e,u)}ko(),Cu.current=a,ju=i,null!==Au?t=0:(Mu=null,Tu=0,t=Ru)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=al(e,i))),1===t)throw n=Lu,hl(e,0),ul(e,r),il(e,Qe()),n;if(6===t)ul(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!sr(o(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=ml(e,r))&&(0!==(a=pt(e))&&(r=a,t=al(e,a))),1===t))throw n=Lu,hl(e,0),ul(e,r),il(e,Qe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:kl(e,Uu,Wu);break;case 3:if(ul(e,r),(130023424&r)===r&&10<(t=Ku+500-Qe())){if(0!==ft(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(kl.bind(null,e,Uu,Wu),t);break}kl(e,Uu,Wu);break;case 4:if(ul(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-at(r);a=1<<s,(s=t[s])>i&&(i=s),r&=~a}if(r=i,10<(r=(120>(r=Qe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Eu(r/1960))-r)){e.timeoutHandle=ri(kl.bind(null,e,Uu,Wu),r);break}kl(e,Uu,Wu);break;default:throw Error(o(329))}}}return il(e,Qe()),e.callbackNode===n?ol.bind(null,e):null}function al(e,t){var n=Fu;return e.current.memoizedState.isDehydrated&&(hl(e,t).flags|=256),2!==(e=ml(e,t))&&(t=Uu,Uu=n,null!==t&&sl(t)),e}function sl(e){null===Uu?Uu=e:Uu.push.apply(Uu,e)}function ul(e,t){for(t&=~Bu,t&=~zu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function ll(e){if(0!==(6&ju))throw Error(o(327));Sl();var t=ft(e,0);if(0===(1&t))return il(e,Qe()),null;var n=ml(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=al(e,r))}if(1===n)throw n=Lu,hl(e,0),ul(e,t),il(e,Qe()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,kl(e,Uu,Wu),il(e,Qe()),null}function cl(e,t){var n=ju;ju|=1;try{return e(t)}finally{0===(ju=n)&&(Vu=Qe()+500,Bi&&Ki())}}function dl(e){null!==$u&&0===$u.tag&&0===(6&ju)&&Sl();var t=ju;ju|=1;var n=Iu.transition,r=bt;try{if(Iu.transition=null,bt=1,e)return e()}finally{bt=r,Iu.transition=n,0===(6&(ju=t))&&Ki()}}function fl(){Ou=Nu.current,Ei(Nu)}function hl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Au)for(n=Au.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:oa(),Ei(ji),Ei(Ii),da();break;case 5:sa(r);break;case 4:oa();break;case 13:case 19:Ei(ua);break;case 10:So(r.type._context);break;case 22:case 23:fl()}n=n.return}if(Mu=e,Au=e=Nl(e.current,null),Tu=Ou=t,Ru=0,Lu=null,Bu=zu=Du=0,Uu=Fu=null,null!==Po){for(t=0;t<Po.length;t++)if(null!==(r=(n=Po[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var a=o.next;o.next=i,r.next=a}n.pending=r}Po=null}return e}function pl(e,t){for(;;){var n=Au;try{if(ko(),fa.current=as,ya){for(var r=va.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ya=!1}if(pa=0,ma=ga=va=null,ba=!1,wa=0,Pu.current=null,null===n||null===n.return){Ru=1,Lu=t,Au=null;break}e:{var a=e,s=n.return,u=n,l=t;if(t=Tu,u.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var c=l,d=u,f=d.tag;if(0===(1&d.mode)&&(0===f||11===f||15===f)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=ms(s);if(null!==p){p.flags&=-257,ys(p,s,u,0,t),1&p.mode&&gs(a,c,t),l=c;var v=(t=p).updateQueue;if(null===v){var g=new Set;g.add(l),t.updateQueue=g}else v.add(l);break e}if(0===(1&t)){gs(a,c,t),gl();break e}l=Error(o(426))}else if(io&&1&u.mode){var m=ms(s);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),ys(m,s,u,0,t),vo(cs(l,u));break e}}a=l=cs(l,u),4!==Ru&&(Ru=2),null===Fu?Fu=[a]:Fu.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Do(a,ps(0,l,t));break e;case 1:u=l;var y=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===qu||!qu.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,Do(a,vs(a,u,t));break e}}a=a.return}while(null!==a)}xl(n)}catch(w){t=w,Au===n&&null!==n&&(Au=n=n.return);continue}break}}function vl(){var e=Cu.current;return Cu.current=as,null===e?as:e}function gl(){0!==Ru&&3!==Ru&&2!==Ru||(Ru=4),null===Mu||0===(268435455&Du)&&0===(268435455&zu)||ul(Mu,Tu)}function ml(e,t){var n=ju;ju|=2;var r=vl();for(Mu===e&&Tu===t||(Wu=null,hl(e,t));;)try{yl();break}catch(i){pl(e,i)}if(ko(),ju=n,Cu.current=r,null!==Au)throw Error(o(261));return Mu=null,Tu=0,Ru}function yl(){for(;null!==Au;)wl(Au)}function bl(){for(;null!==Au&&!$e();)wl(Au)}function wl(e){var t=_u(e.alternate,e,Ou);e.memoizedProps=e.pendingProps,null===t?xl(e):Au=t,Pu.current=null}function xl(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Xs(n,t,Ou)))return void(Au=n)}else{if(null!==(n=$s(n,t)))return n.flags&=32767,void(Au=n);if(null===e)return Ru=6,void(Au=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Au=t);Au=t=e}while(null!==t);0===Ru&&(Ru=5)}function kl(e,t,n){var r=bt,i=Iu.transition;try{Iu.transition=null,bt=1,function(e,t,n,r){do{Sl()}while(null!==$u);if(0!==(6&ju))throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,a),e===Mu&&(Au=Mu=null,Tu=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Xu||(Xu=!0,Ml(tt,(function(){return Sl(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Iu.transition,Iu.transition=null;var s=bt;bt=1;var u=ju;ju|=4,Pu.current=null,function(e,t){if(ei=Wt,hr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(x){n=null;break e}var s=0,u=-1,l=-1,c=0,d=0,f=e,h=null;t:for(;;){for(var p;f!==n||0!==i&&3!==f.nodeType||(u=s+i),f!==a||0!==r&&3!==f.nodeType||(l=s+r),3===f.nodeType&&(s+=f.nodeValue.length),null!==(p=f.firstChild);)h=f,f=p;for(;;){if(f===e)break t;if(h===n&&++c===i&&(u=s),h===a&&++d===r&&(l=s),null!==(p=f.nextSibling))break;h=(f=h).parentNode}f=p}n=-1===u||-1===l?null:{start:u,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Zs=t;null!==Zs;)if(e=(t=Zs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zs=e;else for(;null!==Zs;){t=Zs;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var g=v.memoizedProps,m=v.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:mo(t.type,g),m);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(o(163))}}catch(x){El(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Zs=e;break}Zs=t.return}v=nu,nu=!1}(e,n),mu(n,e),pr(ti),Wt=!!ei,ti=ei=null,e.current=n,bu(n,e,i),Ge(),ju=u,bt=s,Iu.transition=a}else e.current=n;if(Xu&&(Xu=!1,$u=e,Gu=i),a=e.pendingLanes,0===a&&(qu=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),il(e,Qe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hu)throw Hu=!1,e=Yu,Yu=null,e;0!==(1&Gu)&&0!==e.tag&&Sl(),a=e.pendingLanes,0!==(1&a)?e===Ju?Qu++:(Qu=0,Ju=e):Qu=0,Ki()}(e,t,n,r)}finally{Iu.transition=i,bt=r}return null}function Sl(){if(null!==$u){var e=wt(Gu),t=Iu.transition,n=bt;try{if(Iu.transition=null,bt=16>e?16:e,null===$u)var r=!1;else{if(e=$u,$u=null,Gu=0,0!==(6&ju))throw Error(o(331));var i=ju;for(ju|=4,Zs=e.current;null!==Zs;){var a=Zs,s=a.child;if(0!==(16&Zs.flags)){var u=a.deletions;if(null!==u){for(var l=0;l<u.length;l++){var c=u[l];for(Zs=c;null!==Zs;){var d=Zs;switch(d.tag){case 0:case 11:case 15:ru(8,d,a)}var f=d.child;if(null!==f)f.return=d,Zs=f;else for(;null!==Zs;){var h=(d=Zs).sibling,p=d.return;if(au(d),d===c){Zs=null;break}if(null!==h){h.return=p,Zs=h;break}Zs=p}}}var v=a.alternate;if(null!==v){var g=v.child;if(null!==g){v.child=null;do{var m=g.sibling;g.sibling=null,g=m}while(null!==g)}}Zs=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,Zs=s;else e:for(;null!==Zs;){if(0!==(2048&(a=Zs).flags))switch(a.tag){case 0:case 11:case 15:ru(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,Zs=y;break e}Zs=a.return}}var b=e.current;for(Zs=b;null!==Zs;){var w=(s=Zs).child;if(0!==(2064&s.subtreeFlags)&&null!==w)w.return=s,Zs=w;else e:for(s=b;null!==Zs;){if(0!==(2048&(u=Zs).flags))try{switch(u.tag){case 0:case 11:case 15:iu(9,u)}}catch(k){El(u,u.return,k)}if(u===s){Zs=null;break e}var x=u.sibling;if(null!==x){x.return=u.return,Zs=x;break e}Zs=u.return}}if(ju=i,Ki(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(k){}r=!0}return r}finally{bt=n,Iu.transition=t}}return!1}function _l(e,t,n){e=Ro(e,t=ps(0,t=cs(n,t),1),1),t=tl(),null!==e&&(mt(e,1,t),il(e,t))}function El(e,t,n){if(3===e.tag)_l(e,e,n);else for(;null!==t;){if(3===t.tag){_l(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===qu||!qu.has(r))){t=Ro(t,e=vs(t,e=cs(n,e),1),1),e=tl(),null!==t&&(mt(t,1,e),il(t,e));break}}t=t.return}}function Cl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tl(),e.pingedLanes|=e.suspendedLanes&n,Mu===e&&(Tu&n)===n&&(4===Ru||3===Ru&&(130023424&Tu)===Tu&&500>Qe()-Ku?hl(e,0):Bu|=n),il(e,t)}function Pl(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=tl();null!==(e=Mo(e,t))&&(mt(e,t,n),il(e,n))}function Il(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Pl(e,n)}function jl(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),Pl(e,n)}function Ml(e,t){return qe(e,t)}function Al(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tl(e,t,n,r){return new Al(e,t,n,r)}function Ol(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Nl(e,t){var n=e.alternate;return null===n?((n=Tl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Rl(e,t,n,r,i,a){var s=2;if(r=e,"function"===typeof e)Ol(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case S:return Ll(n.children,i,a,t);case _:s=8,i|=8;break;case E:return(e=Tl(12,n,t,2|i)).elementType=E,e.lanes=a,e;case j:return(e=Tl(13,n,t,i)).elementType=j,e.lanes=a,e;case M:return(e=Tl(19,n,t,i)).elementType=M,e.lanes=a,e;case O:return Dl(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:s=10;break e;case P:s=9;break e;case I:s=11;break e;case A:s=14;break e;case T:s=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Tl(s,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Ll(e,t,n,r){return(e=Tl(7,e,r,t)).lanes=n,e}function Dl(e,t,n,r){return(e=Tl(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function zl(e,t,n){return(e=Tl(6,e,null,t)).lanes=n,e}function Bl(e,t,n){return(t=Tl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fl(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Ul(e,t,n,r,i,o,a,s,u){return e=new Fl(e,t,n,s,u),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Tl(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},To(o),e}function Kl(e){if(!e)return Pi;e:{if(Ke(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ti(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Ti(n))return Ri(e,n,t)}return t}function Vl(e,t,n,r,i,o,a,s,u){return(e=Ul(n,r,!0,e,0,o,0,s,u)).context=Kl(null),n=e.current,(o=No(r=tl(),i=nl(n))).callback=void 0!==t&&null!==t?t:null,Ro(n,o,i),e.current.lanes=i,mt(e,i,r),il(e,r),e}function Wl(e,t,n,r){var i=t.current,o=tl(),a=nl(i);return n=Kl(n),null===t.context?t.context=n:t.pendingContext=n,(t=No(o,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ro(i,t,a))&&(rl(e,i,a,o),Lo(e,i,a)),a}function Hl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Yl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function ql(e,t){Yl(e,t),(e=e.alternate)&&Yl(e,t)}_u=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||ji.current)ws=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ws=!1,function(e,t,n){switch(t.tag){case 3:Ms(t),po();break;case 5:aa(t);break;case 1:Ti(t.type)&&Li(t);break;case 4:ia(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ci(yo,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ci(ua,1&ua.current),t.flags|=128,null):0!==(n&t.child.childLanes)?zs(e,t,n):(Ci(ua,1&ua.current),null!==(e=Hs(e,t,n))?e.sibling:null);Ci(ua,1&ua.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Vs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ci(ua,ua.current),r)break;return null;case 22:case 23:return t.lanes=0,Es(e,t,n)}return Hs(e,t,n)}(e,t,n);ws=0!==(131072&e.flags)}else ws=!1,io&&0!==(1048576&t.flags)&&Zi(t,Yi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ws(e,t),e=t.pendingProps;var i=Ai(t,Ii.current);Eo(t,n),i=_a(null,t,r,e,i,n);var a=Ea();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ti(r)?(a=!0,Li(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,To(t),i.updater=Ko,t.stateNode=i,i._reactInternals=t,Yo(t,r,e,n),t=js(null,t,r,!0,a,n)):(t.tag=0,io&&a&&eo(t),xs(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ws(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Ol(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===A)return 14}return 2}(r),e=mo(r,e),i){case 0:t=Ps(null,t,r,e,n);break e;case 1:t=Is(null,t,r,e,n);break e;case 11:t=ks(null,t,r,e,n);break e;case 14:t=Ss(null,t,r,mo(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ps(e,t,r,i=t.elementType===r?i:mo(r,i),n);case 1:return r=t.type,i=t.pendingProps,Is(e,t,r,i=t.elementType===r?i:mo(r,i),n);case 3:e:{if(Ms(t),null===e)throw Error(o(387));r=t.pendingProps,i=(a=t.memoizedState).element,Oo(e,t),zo(t,r,null,n);var s=t.memoizedState;if(r=s.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=As(e,t,r,n,i=cs(Error(o(423)),t));break e}if(r!==i){t=As(e,t,r,n,i=cs(Error(o(424)),t));break e}for(ro=li(t.stateNode.containerInfo.firstChild),no=t,io=!0,oo=null,n=Jo(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(po(),r===i){t=Hs(e,t,n);break e}xs(e,t,r,n)}t=t.child}return t;case 5:return aa(t),null===e&&lo(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==a&&ni(r,a)&&(t.flags|=32),Cs(e,t),xs(e,t,s,n),t.child;case 6:return null===e&&lo(t),null;case 13:return zs(e,t,n);case 4:return ia(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Qo(t,null,r,n):xs(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ks(e,t,r,i=t.elementType===r?i:mo(r,i),n);case 7:return xs(e,t,t.pendingProps,n),t.child;case 8:case 12:return xs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value,Ci(yo,r._currentValue),r._currentValue=s,null!==a)if(sr(a.value,s)){if(a.children===i.children&&!ji.current){t=Hs(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var u=a.dependencies;if(null!==u){s=a.child;for(var l=u.firstContext;null!==l;){if(l.context===r){if(1===a.tag){(l=No(-1,n&-n)).tag=2;var c=a.updateQueue;if(null!==c){var d=(c=c.shared).pending;null===d?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),_o(a.return,n,t),u.lanes|=n;break}l=l.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),_o(s,n,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}xs(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Eo(t,n),r=r(i=Co(i)),t.flags|=1,xs(e,t,r,n),t.child;case 14:return i=mo(r=t.type,t.pendingProps),Ss(e,t,r,i=mo(r.type,i),n);case 15:return _s(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:mo(r,i),Ws(e,t),t.tag=1,Ti(r)?(e=!0,Li(t)):e=!1,Eo(t,n),Wo(t,r,i),Yo(t,r,i,n),js(null,t,r,!0,e,n);case 19:return Vs(e,t,n);case 22:return Es(e,t,n)}throw Error(o(156,t.tag))};var Xl="function"===typeof reportError?reportError:function(e){console.error(e)};function $l(e){this._internalRoot=e}function Gl(e){this._internalRoot=e}function Ql(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zl(){}function ec(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if("function"===typeof i){var s=i;i=function(){var e=Hl(a);s.call(e)}}Wl(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=Hl(a);o.call(e)}}var a=Vl(t,r,e,0,null,!1,0,"",Zl);return e._reactRootContainer=a,e[pi]=a.current,Kr(8===e.nodeType?e.parentNode:e),dl(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Hl(u);s.call(e)}}var u=Ul(e,0,!1,null,0,!1,0,"",Zl);return e._reactRootContainer=u,e[pi]=u.current,Kr(8===e.nodeType?e.parentNode:e),dl((function(){Wl(t,u,n,r)})),u}(n,t,e,i,r);return Hl(a)}Gl.prototype.render=$l.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Wl(e,t,null,null)},Gl.prototype.unmount=$l.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dl((function(){Wl(null,e,null,null)})),t[pi]=null}},Gl.prototype.unstable_scheduleHydration=function(e){if(e){var t=_t();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Dt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),il(t,Qe()),0===(6&ju)&&(Vu=Qe()+500,Ki()))}break;case 13:dl((function(){var t=Mo(e,1);if(null!==t){var n=tl();rl(t,e,1,n)}})),ql(e,1)}},kt=function(e){if(13===e.tag){var t=Mo(e,134217728);if(null!==t)rl(t,e,134217728,tl());ql(e,134217728)}},St=function(e){if(13===e.tag){var t=nl(e),n=Mo(e,t);if(null!==n)rl(n,e,t,tl());ql(e,t)}},_t=function(){return bt},Et=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},ke=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=xi(r);if(!i)throw Error(o(90));q(r),J(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=cl,je=dl;var tc={usingClientEntryPoint:!1,Events:[bi,wi,xi,Ce,Pe,cl]},nc={findFiberByHostInstance:yi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rc={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{it=ic.inject(rc),ot=ic}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Ql(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Ql(e))throw Error(o(299));var n=!1,r="",i=Xl;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Ul(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Kr(8===e.nodeType?e.parentNode:e),new $l(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return dl(e)},t.hydrate=function(e,t,n){if(!Jl(t))throw Error(o(200));return ec(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Ql(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",s=Xl;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Vl(t,null,e,1,null!=n?n:null,i,0,a,s),e[pi]=t.current,Kr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Gl(t)},t.render=function(e,t,n){if(!Jl(t))throw Error(o(200));return ec(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jl(e))throw Error(o(40));return!!e._reactRootContainer&&(dl((function(){ec(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cl,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jl(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return ec(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},1250:function(e,t,n){"use strict";var r=n(4164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},4164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},5778:function(e,t,n){"use strict";var r,i=n(8810),o=(r=i)&&r.__esModule?r:{default:r};Number.isInteger=Number.isInteger||function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e},t.Z=o.default},8810:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=s(n(6600)),o=s(n(2007)),a=s(n(4683));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var l=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={highestStarHovered:-1/0},r.fillId="starGrad"+Math.random().toFixed(15).slice(2),r.hoverOverStar=function(e){return function(){r.setState({highestStarHovered:e})}},r.unHoverOverStar=function(){r.setState({highestStarHovered:-1/0})},u(r,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"stopColorStyle",value:function(e){var t={stopColor:e,stopOpacity:"1"};return this.props.ignoreInlineStyles?{}:t}},{key:"render",value:function(){var e=this.props,t=e.starRatedColor,n=e.starEmptyColor;return i.default.createElement("div",{className:"star-ratings",title:this.titleText,style:this.starRatingsStyle},i.default.createElement("svg",{className:"star-grad",style:this.starGradientStyle},i.default.createElement("defs",null,i.default.createElement("linearGradient",{id:this.fillId,x1:"0%",y1:"0%",x2:"100%",y2:"0%"},i.default.createElement("stop",{offset:"0%",className:"stop-color-first",style:this.stopColorStyle(t)}),i.default.createElement("stop",{offset:this.offsetValue,className:"stop-color-first",style:this.stopColorStyle(t)}),i.default.createElement("stop",{offset:this.offsetValue,className:"stop-color-final",style:this.stopColorStyle(n)}),i.default.createElement("stop",{offset:"100%",className:"stop-color-final",style:this.stopColorStyle(n)})))),this.renderStars)}},{key:"starRatingsStyle",get:function(){return this.props.ignoreInlineStyles?{}:{position:"relative",boxSizing:"border-box",display:"inline-block"}}},{key:"starGradientStyle",get:function(){return this.props.ignoreInlineStyles?{}:{position:"absolute",zIndex:"0",width:"0",height:"0",visibility:"hidden"}}},{key:"titleText",get:function(){var e=this.props,t=e.typeOfWidget,n=e.rating,r=this.state.highestStarHovered,i=r>0?r:n,o=parseFloat(i.toFixed(2)).toString();Number.isInteger(i)&&(o=String(i));var a=t+"s";return"1"===o&&(a=t),o+" "+a}},{key:"offsetValue",get:function(){var e=this.props.rating,t="0%";Number.isInteger(e)||(t=e.toFixed(2).split(".")[1].slice(0,2)+"%");return t}},{key:"renderStars",get:function(){var e=this,t=this.props,n=t.changeRating,r=t.rating,o=t.numberOfStars,s=t.starDimension,u=t.starSpacing,l=t.starRatedColor,c=t.starEmptyColor,d=t.starHoverColor,f=t.gradientPathName,h=t.ignoreInlineStyles,p=t.svgIconPath,v=t.svgIconViewBox,g=t.name,m=this.state.highestStarHovered;return Array.apply(null,Array(o)).map((function(t,y){var b=y+1,w=b<=r,x=m>0,k=b<=m,S=b===m,_=b>r&&b-1<r,E=1===b,C=b===o;return i.default.createElement(a.default,{key:b,fillId:e.fillId,changeRating:n?function(){return n(b,g)}:null,hoverOverStar:n?e.hoverOverStar(b):null,unHoverOverStar:n?e.unHoverOverStar:null,isStarred:w,isPartiallyFullStar:_,isHovered:k,hoverMode:x,isCurrentHoveredStar:S,isFirstStar:E,isLastStar:C,starDimension:s,starSpacing:u,starHoverColor:d,starRatedColor:l,starEmptyColor:c,gradientPathName:f,ignoreInlineStyles:h,svgIconPath:p,svgIconViewBox:v})}))}}]),t}(i.default.Component);l.propTypes={rating:o.default.number.isRequired,numberOfStars:o.default.number.isRequired,changeRating:o.default.func,starHoverColor:o.default.string.isRequired,starRatedColor:o.default.string.isRequired,starEmptyColor:o.default.string.isRequired,starDimension:o.default.string.isRequired,starSpacing:o.default.string.isRequired,gradientPathName:o.default.string.isRequired,ignoreInlineStyles:o.default.bool.isRequired,svgIconPath:o.default.string.isRequired,svgIconViewBox:o.default.string.isRequired,name:o.default.string},l.defaultProps={rating:0,typeOfWidget:"Star",numberOfStars:5,changeRating:null,starHoverColor:"rgb(230, 67, 47)",starRatedColor:"rgb(109, 122, 130)",starEmptyColor:"rgb(203, 211, 227)",starDimension:"50px",starSpacing:"7px",gradientPathName:"",ignoreInlineStyles:!1,svgIconPath:"m25,1 6,17h18l-14,11 5,17-15-10-15,10 5-17-14-11h18z",svgIconViewBox:"0 0 51 48"},t.default=l},4683:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=s(n(6600)),o=s(n(1694)),a=s(n(2007));function s(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"render",value:function(){var e=this.props,t=e.changeRating,n=e.hoverOverStar,r=e.unHoverOverStar,o=e.svgIconViewBox,a=e.svgIconPath;return i.default.createElement("div",{className:"star-container",style:this.starContainerStyle,onMouseEnter:n,onMouseLeave:r,onClick:t},i.default.createElement("svg",{viewBox:o,className:this.starClasses,style:this.starSvgStyle},i.default.createElement("path",{className:"star",style:this.pathStyle,d:a})))}},{key:"starContainerStyle",get:function(){var e=this.props,t=e.changeRating,n=e.starSpacing,r=e.isFirstStar,i=e.isLastStar;return e.ignoreInlineStyles?{}:{position:"relative",display:"inline-block",verticalAlign:"middle",paddingLeft:r?void 0:n,paddingRight:i?void 0:n,cursor:t?"pointer":void 0}}},{key:"starSvgStyle",get:function(){var e=this.props,t=e.ignoreInlineStyles,n=e.isCurrentHoveredStar,r=e.starDimension;return t?{}:{width:r,height:r,transition:"transform .2s ease-in-out",transform:n?"scale(1.1)":void 0}}},{key:"pathStyle",get:function(){var e=this.props,t=e.isStarred,n=e.isPartiallyFullStar,r=e.isHovered,i=e.hoverMode,o=e.starEmptyColor,a=e.starRatedColor,s=e.starHoverColor,u=e.gradientPathName,l=e.fillId,c=void 0;return c=i?r?s:o:n?"url('"+u+"#"+l+"')":t?a:o,e.ignoreInlineStyles?{}:{fill:c,transition:"fill .2s ease-in-out"}}},{key:"starClasses",get:function(){var e=this.props,t=e.isSelected,n=e.isPartiallyFullStar,r=e.isHovered,i=e.isCurrentHoveredStar,a=e.ignoreInlineStyles,s=(0,o.default)({"widget-svg":!0,"widget-selected":t,"multi-widget-selected":n,hovered:r,"current-hovered":i});return a?{}:s}}]),t}(i.default.Component);u.propTypes={fillId:a.default.string.isRequired,changeRating:a.default.func,hoverOverStar:a.default.func,unHoverOverStar:a.default.func,isStarred:a.default.bool.isRequired,isPartiallyFullStar:a.default.bool.isRequired,isHovered:a.default.bool.isRequired,hoverMode:a.default.bool.isRequired,isCurrentHoveredStar:a.default.bool.isRequired,isFirstStar:a.default.bool.isRequired,isLastStar:a.default.bool.isRequired,starDimension:a.default.string.isRequired,starSpacing:a.default.string.isRequired,starHoverColor:a.default.string.isRequired,starRatedColor:a.default.string.isRequired,starEmptyColor:a.default.string.isRequired,gradientPathName:a.default.string.isRequired,ignoreInlineStyles:a.default.bool.isRequired,svgIconPath:a.default.string.isRequired,svgIconViewBox:a.default.string.isRequired},t.default=u},7381:function(e,t,n){"use strict";var r=n(1725),i="function"===typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,a=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,u=i?Symbol.for("react.strict_mode"):60108,l=i?Symbol.for("react.profiler"):60114,c=i?Symbol.for("react.provider"):60109,d=i?Symbol.for("react.context"):60110,f=i?Symbol.for("react.forward_ref"):60112,h=i?Symbol.for("react.suspense"):60113,p=i?Symbol.for("react.memo"):60115,v=i?Symbol.for("react.lazy"):60116,g="function"===typeof Symbol&&Symbol.iterator;function m(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b={};function w(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||y}function x(){}function k(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||y}w.prototype.isReactComponent={},w.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(m(85));this.updater.enqueueSetState(this,e,t,"setState")},w.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},x.prototype=w.prototype;var S=k.prototype=new x;S.constructor=k,r(S,w.prototype),S.isPureReactComponent=!0;var _={current:null},E=Object.prototype.hasOwnProperty,C={key:!0,ref:!0,__self:!0,__source:!0};function P(e,t,n){var r,i={},a=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)E.call(t,r)&&!C.hasOwnProperty(r)&&(i[r]=t[r]);var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}if(e&&e.defaultProps)for(r in u=e.defaultProps)void 0===i[r]&&(i[r]=u[r]);return{$$typeof:o,type:e,key:a,ref:s,props:i,_owner:_.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===o}var j=/\/+/g,M=[];function A(e,t,n,r){if(M.length){var i=M.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function T(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>M.length&&M.push(e)}function O(e,t,n,r){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var s=!1;if(null===e)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case o:case a:s=!0}}if(s)return n(r,e,""===t?"."+R(e,0):t),1;if(s=0,t=""===t?".":t+":",Array.isArray(e))for(var u=0;u<e.length;u++){var l=t+R(i=e[u],u);s+=O(i,l,n,r)}else if(null===e||"object"!==typeof e?l=null:l="function"===typeof(l=g&&e[g]||e["@@iterator"])?l:null,"function"===typeof l)for(e=l.call(e),u=0;!(i=e.next()).done;)s+=O(i=i.value,l=t+R(i,u++),n,r);else if("object"===i)throw n=""+e,Error(m(31,"[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n,""));return s}function N(e,t,n){return null==e?0:O(e,"",t,n)}function R(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function L(e,t){e.func.call(e.context,t,e.count++)}function D(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?z(e,r,n,(function(e){return e})):null!=e&&(I(e)&&(e=function(e,t){return{$$typeof:o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(j,"$&/")+"/")+n)),r.push(e))}function z(e,t,n,r,i){var o="";null!=n&&(o=(""+n).replace(j,"$&/")+"/"),N(e,D,t=A(t,o,r,i)),T(t)}var B={current:null};function F(){var e=B.current;if(null===e)throw Error(m(321));return e}var U={ReactCurrentDispatcher:B,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:_,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:function(e,t,n){if(null==e)return e;var r=[];return z(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;N(e,L,t=A(null,null,t,n)),T(t)},count:function(e){return N(e,(function(){return null}),null)},toArray:function(e){var t=[];return z(e,t,null,(function(e){return e})),t},only:function(e){if(!I(e))throw Error(m(143));return e}},t.Component=w,t.Fragment=s,t.Profiler=l,t.PureComponent=k,t.StrictMode=u,t.Suspense=h,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(m(267,e));var i=r({},e.props),a=e.key,s=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,u=_.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)E.call(t,c)&&!C.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];i.children=l}return{$$typeof:o,type:e.type,key:a,ref:s,props:i,_owner:u}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:d,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:c,_context:e},e.Consumer=e},t.createElement=P,t.createFactory=function(e){var t=P.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:f,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:v,_ctor:e,_status:-1,_result:null}},t.memo=function(e,t){return{$$typeof:p,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return F().useCallback(e,t)},t.useContext=function(e,t){return F().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return F().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return F().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return F().useLayoutEffect(e,t)},t.useMemo=function(e,t){return F().useMemo(e,t)},t.useReducer=function(e,t,n){return F().useReducer(e,t,n)},t.useRef=function(e){return F().useRef(e)},t.useState=function(e){return F().useState(e)},t.version="16.14.0"},6600:function(e,t,n){"use strict";e.exports=n(7381)},6374:function(e,t,n){"use strict";var r=n(2791),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,o={},l=null,c=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(c=t.ref),t)a.call(t,r)&&!u.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:l,ref:c,props:o,_owner:s.current}}t.Fragment=o,t.jsx=l,t.jsxs=l},9117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,g={};function m(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=m.prototype;var w=b.prototype=new y;w.constructor=b,v(w,m.prototype),w.isPureReactComponent=!0;var x=Array.isArray,k=Object.prototype.hasOwnProperty,S={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,o={},a=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)k.call(t,i)&&!_.hasOwnProperty(i)&&(o[i]=t[i]);var u=arguments.length-2;if(1===u)o.children=r;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];o.children=l}if(e&&e.defaultProps)for(i in u=e.defaultProps)void 0===o[i]&&(o[i]=u[i]);return{$$typeof:n,type:e,key:a,ref:s,props:o,_owner:S.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var P=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function j(e,t,i,o,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return a=a(u=e),e=""===o?"."+I(u,0):o,x(a)?(i="",null!=e&&(i=e.replace(P,"$&/")+"/"),j(a,t,i,"",(function(e){return e}))):null!=a&&(C(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||u&&u.key===a.key?"":(""+a.key).replace(P,"$&/")+"/")+e)),t.push(a)),1;if(u=0,o=""===o?".":o+":",x(e))for(var l=0;l<e.length;l++){var c=o+I(s=e[l],l);u+=j(s,t,i,c,a)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),l=0;!(s=e.next()).done;)u+=j(s=s.value,t,i,c=o+I(s,l++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function M(e,t,n){if(null==e)return e;var r=[],i=0;return j(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var T={current:null},O={transition:null},N={ReactCurrentDispatcher:T,ReactCurrentBatchConfig:O,ReactCurrentOwner:S};t.Children={map:M,forEach:function(e,t,n){M(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return M(e,(function(){t++})),t},toArray:function(e){return M(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=a,t.PureComponent=b,t.StrictMode=o,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),o=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=S.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(l in t)k.call(t,l)&&!_.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==u?u[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){u=Array(l);for(var c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}return{$$typeof:n,type:e.type,key:o,ref:a,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return T.current.useCallback(e,t)},t.useContext=function(e){return T.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return T.current.useDeferredValue(e)},t.useEffect=function(e,t){return T.current.useEffect(e,t)},t.useId=function(){return T.current.useId()},t.useImperativeHandle=function(e,t,n){return T.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return T.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return T.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return T.current.useMemo(e,t)},t.useReducer=function(e,t,n){return T.current.useReducer(e,t,n)},t.useRef=function(e){return T.current.useRef(e)},t.useState=function(e){return T.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return T.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return T.current.useTransition()},t.version="18.2.0"},2791:function(e,t,n){"use strict";e.exports=n(9117)},184:function(e,t,n){"use strict";e.exports=n(6374)},6813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var s=2*(r+1)-1,u=e[s],l=s+1,c=e[l];if(0>o(u,n))l<i&&0>o(c,u)?(e[r]=c,e[l]=n,r=l):(e[r]=u,e[s]=n,r=s);else{if(!(l<i&&0>o(c,n)))break e;e[r]=c,e[l]=n,r=l}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var l=[],c=[],d=1,f=null,h=3,p=!1,v=!1,g=!1,m="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(l,t)}t=r(c)}}function x(e){if(g=!1,w(e),!v)if(null!==r(l))v=!0,O(k);else{var t=r(c);null!==t&&N(x,t.startTime-e)}}function k(e,n){v=!1,g&&(g=!1,y(C),C=-1),p=!0;var o=h;try{for(w(n),f=r(l);null!==f&&(!(f.expirationTime>n)||e&&!j());){var a=f.callback;if("function"===typeof a){f.callback=null,h=f.priorityLevel;var s=a(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?f.callback=s:f===r(l)&&i(l),w(n)}else i(l);f=r(l)}if(null!==f)var u=!0;else{var d=r(c);null!==d&&N(x,d.startTime-n),u=!1}return u}finally{f=null,h=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,_=!1,E=null,C=-1,P=5,I=-1;function j(){return!(t.unstable_now()-I<P)}function M(){if(null!==E){var e=t.unstable_now();I=e;var n=!0;try{n=E(!0,e)}finally{n?S():(_=!1,E=null)}}else _=!1}if("function"===typeof b)S=function(){b(M)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,T=A.port2;A.port1.onmessage=M,S=function(){T.postMessage(null)}}else S=function(){m(M,0)};function O(e){E=e,_||(_=!0,S())}function N(e,n){C=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,O(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},t.unstable_scheduleCallback=function(e,i,o){var a=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(e.sortIndex=o,n(c,e),null===r(l)&&e===r(c)&&(g?(y(C),C=-1):g=!0,N(x,o-a))):(e.sortIndex=s,n(l,e),v||p||(v=!0,O(k))),e},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}},5296:function(e,t,n){"use strict";e.exports=n(6813)},6115:function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},6690:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},9728:function(e,t,n){var r=n(4062);function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,r(i.key),i)}}e.exports=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},6389:function(e,t,n){var r=n(3808),i=n(9617),o=n(4993);e.exports=function(e){var t=i();return function(){var n,i=r(e);if(t){var a=r(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return o(this,n)}},e.exports.__esModule=!0,e.exports.default=e.exports},3808:function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},1655:function(e,t,n){var r=n(6015);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},9617:function(e){e.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},e.exports.__esModule=!0,e.exports.default=e.exports},4993:function(e,t,n){var r=n(8698).default,i=n(6115);e.exports=function(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return i(e)},e.exports.__esModule=!0,e.exports.default=e.exports},6015:function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},5036:function(e,t,n){var r=n(8698).default;e.exports=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},4062:function(e,t,n){var r=n(8698).default,i=n(5036);e.exports=function(e){var t=i(e,"string");return"symbol"===r(t)?t:String(t)},e.exports.__esModule=!0,e.exports.default=e.exports},8698:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}!function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){a[e]=function(){return r[e]}}));return a.default=function(){return r},n.d(o,a),o}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},n.p="/",n.nc=void 0,function(){"use strict";var e={};n.r(e),n.d(e,{ArrayOfValidator:function(){return Zr},DictValidator:function(){return ni},ObjectValidator:function(){return ei},UnionValidator:function(){return ti},ValidationError:function(){return $r},Validator:function(){return Jr},any:function(){return oi},array:function(){return gi},arrayOf:function(){return mi},bigint:function(){return pi},boolean:function(){return hi},dict:function(){return wi},integer:function(){return ci},literal:function(){return vi},literalEnum:function(){return Ci},model:function(){return ki},nonZeroInteger:function(){return fi},nonZeroNumber:function(){return li},nullable:function(){return Ei},number:function(){return si},object:function(){return bi},optional:function(){return _i},positiveInteger:function(){return di},positiveNumber:function(){return ui},setEnum:function(){return Si},string:function(){return ai},union:function(){return xi},unknown:function(){return ii},unknownObject:function(){return yi}});var t=n(2791),r=n.t(t,2),i=n(1250);function o(e){if(Array.isArray(e))return e}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){if(e){if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){return o(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(e,t)||s(e,t)||u()}function c(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function d(e){return function(e){if(Array.isArray(e))return a(e)}(e)||c(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var f=n(184);var h=function(){var e=l((0,t.useState)(0),2),n=e[0],r=e[1],i=l((0,t.useState)(null),2),o=i[0],a=i[1],s=l((0,t.useState)(!1),2),u=s[0],c=s[1],d=function(){if(0!==n){var e=setInterval((function(){r((function(e){return e-1}))}),1e3);a(e),c(!0)}},h=function(){clearInterval(o),a(null),c(!1)};return(0,t.useEffect)((function(){0===n&&u&&h()}),[n,u]),(0,f.jsxs)("div",{className:"Timer",children:[(0,f.jsx)("span",{className:"timer__part timer__part--minutes",children:function(){var e=Math.floor(n/60),t=n%60;return"".concat(e.toString().padStart(2,"0"),":").concat(t.toString().padStart(2,"0"))}()}),(0,f.jsx)("span",{className:"timer__part"}),(0,f.jsx)("span",{className:"timer__part timer__part--seconds"}),u?(0,f.jsx)("button",{type:"button",className:"timer__btn timer__btn--control timer__btn--stop",onClick:h,children:(0,f.jsx)("span",{className:"material-icons",children:"pause"})}):(0,f.jsx)("button",{type:"button",className:"timer__btn timer__btn--control timer__btn--start",onClick:d,children:(0,f.jsx)("span",{className:"material-icons",children:"play_arrow"})}),(0,f.jsx)("button",{type:"button",className:"timer__btn timer__btn--reset",onClick:function(){var e=prompt("Enter number of minutes:");if(null!==e){var t=parseInt(e,10);!isNaN(t)&&t<60?(h(),r(60*t)):alert("Invalid input. Please enter a valid number of minutes less than 60.")}},children:(0,f.jsx)("span",{className:"material-icons",children:"timer"})})]})};var p=n.p+"static/media/polling_icon.a929312dbd181f5d977e5adfec83bc74.svg";var v=n.p+"static/media/Timer_icon.39576acf955e0d6642e00a3c51a59de7.svg";function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function m(){m=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var o=t&&t.prototype instanceof b?t:b,a=Object.create(o.prototype),s=new T(r||[]);return i(a,"_invoke",{value:I(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var f="suspendedStart",h="suspendedYield",p="executing",v="completed",y={};function b(){}function w(){}function x(){}var k={};l(k,a,(function(){return this}));var S=Object.getPrototypeOf,_=S&&S(S(O([])));_&&_!==n&&r.call(_,a)&&(k=_);var E=x.prototype=b.prototype=Object.create(k);function C(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function P(e,t){function n(i,o,a,s){var u=d(e[i],e,o);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==g(c)&&r.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(c).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function I(t,n,r){var i=f;return function(o,a){if(i===p)throw new Error("Generator is already running");if(i===v){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var u=j(s,r);if(u){if(u===y)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var l=d(t,n,r);if("normal"===l.type){if(i=r.done?v:h,l.arg===y)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=v,r.method="throw",r.arg=l.arg)}}}function j(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,j(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var o=d(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,y;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function M(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(M,this),this.reset(!0)}function O(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(g(t)+" is not iterable")}return w.prototype=x,i(E,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:w,configurable:!0}),w.displayName=l(x,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,l(e,u,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},C(P.prototype),l(P.prototype,s,(function(){return this})),t.AsyncIterator=P,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new P(c(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},C(E),l(E,u,"Generator"),l(E,a,(function(){return this})),l(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=O,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),A(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;A(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function y(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(l){return void n(l)}s.done?t(u):Promise.resolve(u).then(r,i)}function b(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){y(o,r,i,a,s,"next",e)}function s(e){y(o,r,i,a,s,"throw",e)}a(void 0)}))}}function w(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function x(e,t){return function(){return e.apply(t,arguments)}}var k,S=Object.prototype.toString,_=Object.getPrototypeOf,E=(k=Object.create(null),function(e){var t=S.call(e);return k[t]||(k[t]=t.slice(8,-1).toLowerCase())}),C=function(e){return e=e.toLowerCase(),function(t){return E(t)===e}},P=function(e){return function(t){return typeof t===e}},I=Array.isArray,j=P("undefined");var M=C("ArrayBuffer");var A=P("string"),T=P("function"),O=P("number"),N=function(e){return null!==e&&"object"===typeof e},R=function(e){if("object"!==E(e))return!1;var t=_(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},L=C("Date"),D=C("File"),z=C("Blob"),B=C("FileList"),F=C("URLSearchParams");function U(e,t){var n,r,i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).allOwnKeys,o=void 0!==i&&i;if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),I(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{var a,s=o?Object.getOwnPropertyNames(e):Object.keys(e),u=s.length;for(n=0;n<u;n++)a=s[n],t.call(null,e[a],a,e)}}function K(e,t){t=t.toLowerCase();for(var n,r=Object.keys(e),i=r.length;i-- >0;)if(t===(n=r[i]).toLowerCase())return n;return null}var V="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,W=function(e){return!j(e)&&e!==V};var H,Y=(H="undefined"!==typeof Uint8Array&&_(Uint8Array),function(e){return H&&e instanceof H}),q=C("HTMLFormElement"),X=function(e){var t=Object.prototype.hasOwnProperty;return function(e,n){return t.call(e,n)}}(),$=C("RegExp"),G=function(e,t){var n=Object.getOwnPropertyDescriptors(e),r={};U(n,(function(n,i){var o;!1!==(o=t(n,i,e))&&(r[i]=o||n)})),Object.defineProperties(e,r)},Q="abcdefghijklmnopqrstuvwxyz",J="0123456789",Z={DIGIT:J,ALPHA:Q,ALPHA_DIGIT:Q+Q.toUpperCase()+J};var ee=C("AsyncFunction"),te={isArray:I,isArrayBuffer:M,isBuffer:function(e){return null!==e&&!j(e)&&null!==e.constructor&&!j(e.constructor)&&T(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:function(e){var t;return e&&("function"===typeof FormData&&e instanceof FormData||T(e.append)&&("formdata"===(t=E(e))||"object"===t&&T(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&M(e.buffer)},isString:A,isNumber:O,isBoolean:function(e){return!0===e||!1===e},isObject:N,isPlainObject:R,isUndefined:j,isDate:L,isFile:D,isBlob:z,isRegExp:$,isFunction:T,isStream:function(e){return N(e)&&T(e.pipe)},isURLSearchParams:F,isTypedArray:Y,isFileList:B,forEach:U,merge:function e(){for(var t=(W(this)&&this||{}).caseless,n={},r=function(r,i){var o=t&&K(n,i)||i;R(n[o])&&R(r)?n[o]=e(n[o],r):R(r)?n[o]=e({},r):I(r)?n[o]=r.slice():n[o]=r},i=0,o=arguments.length;i<o;i++)arguments[i]&&U(arguments[i],r);return n},extend:function(e,t,n){return U(t,(function(t,r){n&&T(t)?e[r]=x(t,n):e[r]=t}),{allOwnKeys:(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).allOwnKeys}),e},trim:function(e){return e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,n,r){e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:function(e,t,n,r){var i,o,a,s={};if(t=t||{},null==e)return t;do{for(o=(i=Object.getOwnPropertyNames(e)).length;o-- >0;)a=i[o],r&&!r(a,e,t)||s[a]||(t[a]=e[a],s[a]=!0);e=!1!==n&&_(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:E,kindOfTest:C,endsWith:function(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var r=e.indexOf(t,n);return-1!==r&&r===n},toArray:function(e){if(!e)return null;if(I(e))return e;var t=e.length;if(!O(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n},forEachEntry:function(e,t){for(var n,r=(e&&e[Symbol.iterator]).call(e);(n=r.next())&&!n.done;){var i=n.value;t.call(e,i[0],i[1])}},matchAll:function(e,t){for(var n,r=[];null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:q,hasOwnProperty:X,hasOwnProp:X,reduceDescriptors:G,freezeMethods:function(e){G(e,(function(t,n){if(T(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;var r=e[n];T(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=function(){throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:function(e,t){var n={},r=function(e){e.forEach((function(e){n[e]=!0}))};return I(e)?r(e):r(String(e).split(t)),n},toCamelCase:function(e){return e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n}))},noop:function(){},toFiniteNumber:function(e,t){return e=+e,Number.isFinite(e)?e:t},findKey:K,global:V,isContextDefined:W,ALPHABET:Z,generateString:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Z.ALPHA_DIGIT,n="",r=t.length;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&T(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:function(e){var t=new Array(10);return function e(n,r){if(N(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[r]=n;var i=I(n)?[]:{};return U(n,(function(t,n){var o=e(t,r+1);!j(o)&&(i[n]=o)})),t[r]=void 0,i}}return n}(e,0)},isAsyncFn:ee,isThenable:function(e){return e&&(N(e)||T(e))&&T(e.then)&&T(e.catch)}};function ne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function re(e){var t=function(e,t){if("object"!==g(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===g(t)?t:String(t)}function ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,re(r.key),r)}}function oe(e,t,n){return t&&ie(e.prototype,t),n&&ie(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ae(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}te.inherits(ae,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:te.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var se=ae.prototype,ue={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((function(e){ue[e]={value:e}})),Object.defineProperties(ae,ue),Object.defineProperty(se,"isAxiosError",{value:!0}),ae.from=function(e,t,n,r,i,o){var a=Object.create(se);return te.toFlatObject(e,a,(function(e){return e!==Error.prototype}),(function(e){return"isAxiosError"!==e})),ae.call(a,e.message,t,n,r,i),a.cause=e,a.name=e.name,o&&Object.assign(a,o),a};var le=ae;function ce(e){return te.isPlainObject(e)||te.isArray(e)}function de(e){return te.endsWith(e,"[]")?e.slice(0,-2):e}function fe(e,t,n){return e?e.concat(t).map((function(e,t){return e=de(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}var he=te.toFlatObject(te,{},null,(function(e){return/^is[A-Z]/.test(e)}));var pe=function(e,t,n){if(!te.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;var r=(n=te.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!te.isUndefined(t[e])}))).metaTokens,i=n.visitor||l,o=n.dots,a=n.indexes,s=(n.Blob||"undefined"!==typeof Blob&&Blob)&&te.isSpecCompliantForm(t);if(!te.isFunction(i))throw new TypeError("visitor must be a function");function u(e){if(null===e)return"";if(te.isDate(e))return e.toISOString();if(!s&&te.isBlob(e))throw new le("Blob is not supported. Use a Buffer instead.");return te.isArrayBuffer(e)||te.isTypedArray(e)?s&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function l(e,n,i){var s=e;if(e&&!i&&"object"===typeof e)if(te.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(te.isArray(e)&&function(e){return te.isArray(e)&&!e.some(ce)}(e)||(te.isFileList(e)||te.endsWith(n,"[]"))&&(s=te.toArray(e)))return n=de(n),s.forEach((function(e,r){!te.isUndefined(e)&&null!==e&&t.append(!0===a?fe([n],r,o):null===a?n:n+"[]",u(e))})),!1;return!!ce(e)||(t.append(fe(i,n,o),u(e)),!1)}var c=[],d=Object.assign(he,{defaultVisitor:l,convertValue:u,isVisitable:ce});if(!te.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!te.isUndefined(n)){if(-1!==c.indexOf(n))throw Error("Circular reference detected in "+r.join("."));c.push(n),te.forEach(n,(function(n,o){!0===(!(te.isUndefined(n)||null===n)&&i.call(t,n,te.isString(o)?o.trim():o,r,d))&&e(n,r?r.concat(o):[o])})),c.pop()}}(e),t};function ve(e){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function ge(e,t){this._pairs=[],e&&pe(e,this,t)}var me=ge.prototype;me.append=function(e,t){this._pairs.push([e,t])},me.toString=function(e){var t=e?function(t){return e.call(this,t,ve)}:ve;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};var ye=ge;function be(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function we(e,t,n){if(!t)return e;var r,i=n&&n.encode||be,o=n&&n.serialize;if(r=o?o(t,n):te.isURLSearchParams(t)?t.toString():new ye(t,n).toString(i)){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}var xe=function(){function e(){ne(this,e),this.handlers=[]}return oe(e,[{key:"use",value:function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}},{key:"eject",value:function(e){this.handlers[e]&&(this.handlers[e]=null)}},{key:"clear",value:function(){this.handlers&&(this.handlers=[])}},{key:"forEach",value:function(e){te.forEach(this.handlers,(function(t){null!==t&&e(t)}))}}]),e}(),ke=xe,Se={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},_e={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:ye,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},isStandardBrowserEnv:function(){var e;return("undefined"===typeof navigator||"ReactNative"!==(e=navigator.product)&&"NativeScript"!==e&&"NS"!==e)&&("undefined"!==typeof window&&"undefined"!==typeof document)}(),isStandardBrowserWebWorkerEnv:"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,protocols:["http","https","file","blob","url","data"]};var Ee=function(e){function t(e,n,r,i){var o=e[i++],a=Number.isFinite(+o),s=i>=e.length;return o=!o&&te.isArray(r)?r.length:o,s?(te.hasOwnProp(r,o)?r[o]=[r[o],n]:r[o]=n,!a):(r[o]&&te.isObject(r[o])||(r[o]=[]),t(e,n,r[o],i)&&te.isArray(r[o])&&(r[o]=function(e){var t,n,r={},i=Object.keys(e),o=i.length;for(t=0;t<o;t++)r[n=i[t]]=e[n];return r}(r[o])),!a)}if(te.isFormData(e)&&te.isFunction(e.entries)){var n={};return te.forEachEntry(e,(function(e,r){t(function(e){return te.matchAll(/\w+|\[(\w*)]/g,e).map((function(e){return"[]"===e[0]?"":e[1]||e[0]}))}(e),r,n,0)})),n}return null};var Ce={transitional:Se,adapter:_e.isNode?"http":"xhr",transformRequest:[function(e,t){var n,r=t.getContentType()||"",i=r.indexOf("application/json")>-1,o=te.isObject(e);if(o&&te.isHTMLForm(e)&&(e=new FormData(e)),te.isFormData(e))return i&&i?JSON.stringify(Ee(e)):e;if(te.isArrayBuffer(e)||te.isBuffer(e)||te.isStream(e)||te.isFile(e)||te.isBlob(e))return e;if(te.isArrayBufferView(e))return e.buffer;if(te.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return pe(e,new _e.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return _e.isNode&&te.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((n=te.isFileList(e))||r.indexOf("multipart/form-data")>-1){var a=this.env&&this.env.FormData;return pe(n?{"files[]":e}:e,a&&new a,this.formSerializer)}}return o||i?(t.setContentType("application/json",!1),function(e,t,n){if(te.isString(e))try{return(t||JSON.parse)(e),te.trim(e)}catch(VO){if("SyntaxError"!==VO.name)throw VO}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||Ce.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(e&&te.isString(e)&&(n&&!this.responseType||r)){var i=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(VO){if(i){if("SyntaxError"===VO.name)throw le.from(VO,le.ERR_BAD_RESPONSE,this,null,this.response);throw VO}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:_e.classes.FormData,Blob:_e.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};te.forEach(["delete","get","head","post","put","patch"],(function(e){Ce.headers[e]={}}));var Pe=Ce,Ie=te.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),je=Symbol("internals");function Me(e){return e&&String(e).trim().toLowerCase()}function Ae(e){return!1===e||null==e?e:te.isArray(e)?e.map(Ae):String(e)}function Te(e,t,n,r,i){return te.isFunction(r)?r.call(this,t,n):(i&&(t=n),te.isString(t)?te.isString(r)?-1!==t.indexOf(r):te.isRegExp(r)?r.test(t):void 0:void 0)}var Oe=function(e,t){function n(e){ne(this,n),e&&this.set(e)}return oe(n,[{key:"set",value:function(e,t,n){var r=this;function i(e,t,n){var i=Me(t);if(!i)throw new Error("header name must be a non-empty string");var o=te.findKey(r,i);(!o||void 0===r[o]||!0===n||void 0===n&&!1!==r[o])&&(r[o||t]=Ae(e))}var o=function(e,t){return te.forEach(e,(function(e,n){return i(e,n,t)}))};return te.isPlainObject(e)||e instanceof this.constructor?o(e,t):te.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?o(function(e){var t,n,r,i={};return e&&e.split("\n").forEach((function(e){r=e.indexOf(":"),t=e.substring(0,r).trim().toLowerCase(),n=e.substring(r+1).trim(),!t||i[t]&&Ie[t]||("set-cookie"===t?i[t]?i[t].push(n):i[t]=[n]:i[t]=i[t]?i[t]+", "+n:n)})),i}(e),t):null!=e&&i(t,e,n),this}},{key:"get",value:function(e,t){if(e=Me(e)){var n=te.findKey(this,e);if(n){var r=this[n];if(!t)return r;if(!0===t)return function(e){for(var t,n=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;t=r.exec(e);)n[t[1]]=t[2];return n}(r);if(te.isFunction(t))return t.call(this,r,n);if(te.isRegExp(t))return t.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}},{key:"has",value:function(e,t){if(e=Me(e)){var n=te.findKey(this,e);return!(!n||void 0===this[n]||t&&!Te(0,this[n],n,t))}return!1}},{key:"delete",value:function(e,t){var n=this,r=!1;function i(e){if(e=Me(e)){var i=te.findKey(n,e);!i||t&&!Te(0,n[i],i,t)||(delete n[i],r=!0)}}return te.isArray(e)?e.forEach(i):i(e),r}},{key:"clear",value:function(e){for(var t=Object.keys(this),n=t.length,r=!1;n--;){var i=t[n];e&&!Te(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}},{key:"normalize",value:function(e){var t=this,n={};return te.forEach(this,(function(r,i){var o=te.findKey(n,i);if(o)return t[o]=Ae(r),void delete t[i];var a=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n}))}(i):String(i).trim();a!==i&&delete t[i],t[a]=Ae(r),n[a]=!0})),this}},{key:"concat",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this.constructor).concat.apply(e,[this].concat(n))}},{key:"toJSON",value:function(e){var t=Object.create(null);return te.forEach(this,(function(n,r){null!=n&&!1!==n&&(t[r]=e&&te.isArray(n)?n.join(", "):n)})),t}},{key:Symbol.iterator,value:function(){return Object.entries(this.toJSON())[Symbol.iterator]()}},{key:"toString",value:function(){return Object.entries(this.toJSON()).map((function(e){var t=l(e,2);return t[0]+": "+t[1]})).join("\n")}},{key:Symbol.toStringTag,get:function(){return"AxiosHeaders"}}],[{key:"from",value:function(e){return e instanceof this?e:new this(e)}},{key:"concat",value:function(e){for(var t=new this(e),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((function(e){return t.set(e)})),t}},{key:"accessor",value:function(e){var t=(this[je]=this[je]={accessors:{}}).accessors,n=this.prototype;function r(e){var r=Me(e);t[r]||(!function(e,t){var n=te.toCamelCase(" "+t);["get","set","has"].forEach((function(r){Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return te.isArray(e)?e.forEach(r):r(e),this}}]),n}();Oe.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),te.reduceDescriptors(Oe.prototype,(function(e,t){var n=e.value,r=t[0].toUpperCase()+t.slice(1);return{get:function(){return n},set:function(e){this[r]=e}}})),te.freezeMethods(Oe);var Ne=Oe;function Re(e,t){var n=this||Pe,r=t||n,i=Ne.from(r.headers),o=r.data;return te.forEach(e,(function(e){o=e.call(n,o,i.normalize(),t?t.status:void 0)})),i.normalize(),o}function Le(e){return!(!e||!e.__CANCEL__)}function De(e,t,n){le.call(this,null==e?"canceled":e,le.ERR_CANCELED,t,n),this.name="CanceledError"}te.inherits(De,le,{__CANCEL__:!0});var ze=De;var Be=_e.isStandardBrowserEnv?{write:function(e,t,n,r,i,o){var a=[];a.push(e+"="+encodeURIComponent(t)),te.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),te.isString(r)&&a.push("path="+r),te.isString(i)&&a.push("domain="+i),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function Fe(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}var Ue=_e.isStandardBrowserEnv?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=te.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0};var Ke=function(e,t){e=e||10;var n,r=new Array(e),i=new Array(e),o=0,a=0;return t=void 0!==t?t:1e3,function(s){var u=Date.now(),l=i[a];n||(n=u),r[o]=s,i[o]=u;for(var c=a,d=0;c!==o;)d+=r[c++],c%=e;if((o=(o+1)%e)===a&&(a=(a+1)%e),!(u-n<t)){var f=l&&u-l;return f?Math.round(1e3*d/f):void 0}}};function Ve(e,t){var n=0,r=Ke(50,250);return function(i){var o=i.loaded,a=i.lengthComputable?i.total:void 0,s=o-n,u=r(s);n=o;var l={loaded:o,total:a,progress:a?o/a:void 0,bytes:s,rate:u||void 0,estimated:u&&a&&o<=a?(a-o)/u:void 0,event:i};l[t?"download":"upload"]=!0,e(l)}}var We="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){var r,i=e.data,o=Ne.from(e.headers).normalize(),a=e.responseType;function s(){e.cancelToken&&e.cancelToken.unsubscribe(r),e.signal&&e.signal.removeEventListener("abort",r)}te.isFormData(i)&&(_e.isStandardBrowserEnv||_e.isStandardBrowserWebWorkerEnv?o.setContentType(!1):o.setContentType("multipart/form-data;",!1));var u=new XMLHttpRequest;if(e.auth){var l=e.auth.username||"",c=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.set("Authorization","Basic "+btoa(l+":"+c))}var d=Fe(e.baseURL,e.url);function f(){if(u){var r=Ne.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders());!function(e,t,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new le("Request failed with status code "+n.status,[le.ERR_BAD_REQUEST,le.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}((function(e){t(e),s()}),(function(e){n(e),s()}),{data:a&&"text"!==a&&"json"!==a?u.response:u.responseText,status:u.status,statusText:u.statusText,headers:r,config:e,request:u}),u=null}}if(u.open(e.method.toUpperCase(),we(d,e.params,e.paramsSerializer),!0),u.timeout=e.timeout,"onloadend"in u?u.onloadend=f:u.onreadystatechange=function(){u&&4===u.readyState&&(0!==u.status||u.responseURL&&0===u.responseURL.indexOf("file:"))&&setTimeout(f)},u.onabort=function(){u&&(n(new le("Request aborted",le.ECONNABORTED,e,u)),u=null)},u.onerror=function(){n(new le("Network Error",le.ERR_NETWORK,e,u)),u=null},u.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||Se;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new le(t,r.clarifyTimeoutError?le.ETIMEDOUT:le.ECONNABORTED,e,u)),u=null},_e.isStandardBrowserEnv){var h=(e.withCredentials||Ue(d))&&e.xsrfCookieName&&Be.read(e.xsrfCookieName);h&&o.set(e.xsrfHeaderName,h)}void 0===i&&o.setContentType(null),"setRequestHeader"in u&&te.forEach(o.toJSON(),(function(e,t){u.setRequestHeader(t,e)})),te.isUndefined(e.withCredentials)||(u.withCredentials=!!e.withCredentials),a&&"json"!==a&&(u.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&u.addEventListener("progress",Ve(e.onDownloadProgress,!0)),"function"===typeof e.onUploadProgress&&u.upload&&u.upload.addEventListener("progress",Ve(e.onUploadProgress)),(e.cancelToken||e.signal)&&(r=function(t){u&&(n(!t||t.type?new ze(null,e,u):t),u.abort(),u=null)},e.cancelToken&&e.cancelToken.subscribe(r),e.signal&&(e.signal.aborted?r():e.signal.addEventListener("abort",r)));var p=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(d);p&&-1===_e.protocols.indexOf(p)?n(new le("Unsupported protocol "+p+":",le.ERR_BAD_REQUEST,e)):u.send(i||null)}))},He={http:null,xhr:We};te.forEach(He,(function(e,t){if(e){try{Object.defineProperty(e,"name",{value:t})}catch(VO){}Object.defineProperty(e,"adapterName",{value:t})}}));var Ye=function(e){for(var t,n,r=(e=te.isArray(e)?e:[e]).length,i=0;i<r&&(t=e[i],!(n=te.isString(t)?He[t.toLowerCase()]:t));i++);if(!n){if(!1===n)throw new le("Adapter ".concat(t," is not supported by the environment"),"ERR_NOT_SUPPORT");throw new Error(te.hasOwnProp(He,t)?"Adapter '".concat(t,"' is not available in the build"):"Unknown adapter '".concat(t,"'"))}if(!te.isFunction(n))throw new TypeError("adapter is not a function");return n};function qe(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ze(null,e)}function Xe(e){return qe(e),e.headers=Ne.from(e.headers),e.data=Re.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Ye(e.adapter||Pe.adapter)(e).then((function(t){return qe(e),t.data=Re.call(e,e.transformResponse,t),t.headers=Ne.from(t.headers),t}),(function(t){return Le(t)||(qe(e),t&&t.response&&(t.response.data=Re.call(e,e.transformResponse,t.response),t.response.headers=Ne.from(t.response.headers))),Promise.reject(t)}))}var $e=function(e){return e instanceof Ne?e.toJSON():e};function Ge(e,t){t=t||{};var n={};function r(e,t,n){return te.isPlainObject(e)&&te.isPlainObject(t)?te.merge.call({caseless:n},e,t):te.isPlainObject(t)?te.merge({},t):te.isArray(t)?t.slice():t}function i(e,t,n){return te.isUndefined(t)?te.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function o(e,t){if(!te.isUndefined(t))return r(void 0,t)}function a(e,t){return te.isUndefined(t)?te.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function s(n,i,o){return o in t?r(n,i):o in e?r(void 0,n):void 0}var u={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:function(e,t){return i($e(e),$e(t),!0)}};return te.forEach(Object.keys(Object.assign({},e,t)),(function(r){var o=u[r]||i,a=o(e[r],t[r],r);te.isUndefined(a)&&o!==s||(n[r]=a)})),n}var Qe="1.5.0",Je={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){Je[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var Ze={};Je.transitional=function(e,t,n){function r(e,t){return"[Axios v1.5.0] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,i,o){if(!1===e)throw new le(r(i," has been removed"+(t?" in "+t:"")),le.ERR_DEPRECATED);return t&&!Ze[i]&&(Ze[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,o)}};var et={assertOptions:function(e,t,n){if("object"!==typeof e)throw new le("options must be an object",le.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(e),i=r.length;i-- >0;){var o=r[i],a=t[o];if(a){var s=e[o],u=void 0===s||a(s,o,e);if(!0!==u)throw new le("option "+o+" must be "+u,le.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new le("Unknown option "+o,le.ERR_BAD_OPTION)}},validators:Je},tt=et.validators,nt=function(){function e(t){ne(this,e),this.defaults=t,this.interceptors={request:new ke,response:new ke}}return oe(e,[{key:"request",value:function(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{};var n=t=Ge(this.defaults,t),r=n.transitional,i=n.paramsSerializer,o=n.headers;void 0!==r&&et.assertOptions(r,{silentJSONParsing:tt.transitional(tt.boolean),forcedJSONParsing:tt.transitional(tt.boolean),clarifyTimeoutError:tt.transitional(tt.boolean)},!1),null!=i&&(te.isFunction(i)?t.paramsSerializer={serialize:i}:et.assertOptions(i,{encode:tt.function,serialize:tt.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();var a=o&&te.merge(o.common,o[t.method]);o&&te.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete o[e]})),t.headers=Ne.concat(a,o);var s=[],u=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(u=u&&e.synchronous,s.unshift(e.fulfilled,e.rejected))}));var l,c=[];this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));var d,f=0;if(!u){var h=[Xe.bind(this),void 0];for(h.unshift.apply(h,s),h.push.apply(h,c),d=h.length,l=Promise.resolve(t);f<d;)l=l.then(h[f++],h[f++]);return l}d=s.length;var p=t;for(f=0;f<d;){var v=s[f++],g=s[f++];try{p=v(p)}catch(m){g.call(this,m);break}}try{l=Xe.call(this,p)}catch(m){return Promise.reject(m)}for(f=0,d=c.length;f<d;)l=l.then(c[f++],c[f++]);return l}},{key:"getUri",value:function(e){return we(Fe((e=Ge(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}]),e}();te.forEach(["delete","get","head","options"],(function(e){nt.prototype[e]=function(t,n){return this.request(Ge(n||{},{method:e,url:t,data:(n||{}).data}))}})),te.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(Ge(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}nt.prototype[e]=t(),nt.prototype[e+"Form"]=t(!0)}));var rt=nt,it=function(){function e(t){if(ne(this,e),"function"!==typeof t)throw new TypeError("executor must be a function.");var n;this.promise=new Promise((function(e){n=e}));var r=this;this.promise.then((function(e){if(r._listeners){for(var t=r._listeners.length;t-- >0;)r._listeners[t](e);r._listeners=null}})),this.promise.then=function(e){var t,n=new Promise((function(e){r.subscribe(e),t=e})).then(e);return n.cancel=function(){r.unsubscribe(t)},n},t((function(e,t,i){r.reason||(r.reason=new ze(e,t,i),n(r.reason))}))}return oe(e,[{key:"throwIfRequested",value:function(){if(this.reason)throw this.reason}},{key:"subscribe",value:function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}},{key:"unsubscribe",value:function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}}}],[{key:"source",value:function(){var t,n=new e((function(e){t=e}));return{token:n,cancel:t}}}]),e}(),ot=it;var at={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(at).forEach((function(e){var t=l(e,2),n=t[0],r=t[1];at[r]=n}));var st=at;var ut=function e(t){var n=new rt(t),r=x(rt.prototype.request,n);return te.extend(r,rt.prototype,n,{allOwnKeys:!0}),te.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(Ge(t,n))},r}(Pe);ut.Axios=rt,ut.CanceledError=ze,ut.CancelToken=ot,ut.isCancel=Le,ut.VERSION=Qe,ut.toFormData=pe,ut.AxiosError=le,ut.Cancel=ut.CanceledError,ut.all=function(e){return Promise.all(e)},ut.spread=function(e){return function(t){return e.apply(null,t)}},ut.isAxiosError=function(e){return te.isObject(e)&&!0===e.isAxiosError},ut.mergeConfig=Ge,ut.AxiosHeaders=Ne,ut.formToJSON=function(e){return Ee(te.isHTMLForm(e)?new FormData(e):e)},ut.getAdapter=Ye,ut.HttpStatusCode=st,ut.default=ut;var lt=ut;var ct=n.p+"static/media/exclamation 6.ab009042d21775d25aea2a2467d78731.svg",dt=function(){var e=l((0,t.useState)(!0),2),n=e[0],r=(e[1],l((0,t.useState)(""),2)),i=r[0],o=r[1],a=l((0,t.useState)(["",""]),2),s=a[0],u=a[1],c=l((0,t.useState)(""),2),h=c[0],p=c[1],v=function(){if(!i.trim())return"Please enter a question.";var e,t=w(s);try{for(t.s();!(e=t.n()).done;){if(!e.value.trim())return"Please fill out all options."}}catch(n){t.e(n)}finally{t.f()}return null},g=function(){var e=b(m().mark((function e(t){var n,r,o,a;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(n=v())){e.next=5;break}return p(n),e.abrupt("return");case 5:return r=localStorage.getItem("token"),o={headers:{"x-auth-token":r}},e.prev=7,e.next=10,lt.post("http://localhost:5004/api/polls",{question:i,options:s},o);case 10:200===(a=e.sent).status?p("Poll created successfully!"):p(a.data.msg||"Unknown error occurred while creating poll."),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(7),p("Error occurred. Please try again later.");case 17:case"end":return e.stop()}}),e,null,[[7,14]])})));return function(t){return e.apply(this,arguments)}}();return(0,f.jsx)("div",{className:"create-container-poll",style:{display:n?"block":"none"},children:(0,f.jsxs)("form",{onSubmit:g,children:[(0,f.jsx)("input",{className:"question-container",type:"text",placeholder:"Enter your question here",value:i,onChange:function(e){return o(e.target.value)}}),s.map((function(e,t){return(0,f.jsx)("input",{className:"options-container",type:"text",placeholder:"Option ".concat(t+1),value:e,onChange:function(e){return function(e,t){var n=d(s);n[e]=t,u(n)}(t,e.target.value)}},"option-".concat(t))})),(0,f.jsx)("p",{className:"add-option-key",type:"button",onClick:function(){return u([].concat(d(s),[""]))},children:"+ Add option"}),(0,f.jsx)("div",{className:"error-message-container-poll",children:(0,f.jsxs)("div",{className:"create-form-error",children:["Poll created successfully!"!==h&&""!=h&&(0,f.jsxs)("p",{children:[" ",(0,f.jsx)("img",{src:ct,alt:"error",className:"error-style"})," ",h]})," ","Poll created successfully!"===h&&(0,f.jsxs)("p",{className:"poll-success",children:[" ",h]})]})}),(0,f.jsx)("button",{className:"create-poll-button",type:"submit",children:"Create Poll"})]})})},ft=function(){var e=l((0,t.useState)(null),2),n=e[0],r=e[1],i=l((0,t.useState)(""),2),o=i[0],a=i[1],s=l((0,t.useState)(!1),2),u=s[0],c=s[1],h=l((0,t.useState)(!0),2),p=h[0];h[1];(0,t.useEffect)((function(){function e(){return e=b(m().mark((function e(){var t;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,lt.get("http://localhost:5004/api/polls/getPoll");case 3:t=e.sent,r(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching poll:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var v=function(){var e=b(m().mark((function e(){var t;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,lt.post("http://localhost:5004/api/polls/vote/".concat(n._id),{option:o});case 3:return e.next=5,lt.get("http://localhost:5004/api/polls/results/".concat(n._id));case 5:t=e.sent,r(t.data),c(!0),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Error voting:",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),g=n&&n.options?Math.max.apply(Math,d(n.options.map((function(e){return e.votes})))):0;return n?(0,f.jsx)("div",{className:"all-poll-container",style:{display:p?"block":"none"},children:(0,f.jsx)("div",{className:"VoteForm",children:u?(0,f.jsxs)("div",{className:"results-container1",children:[(0,f.jsx)("h3",{className:"results-heading",children:"Final Outcomes:"}),(0,f.jsx)("h3",{className:"results-heading",children:n.question}),n.options.map((function(e,t){return(0,f.jsx)("div",{className:"result-container ".concat(e.votes===g?"most-voted":""),children:(0,f.jsxs)("div",{className:"result-container-sort-style",children:[e.name,": ",e.votes," votes"]})},t)}))]}):(0,f.jsxs)("div",{className:"voting-container",children:[(0,f.jsx)("h2",{className:"option-question-header",children:n.question}),n.options.map((function(e,t){return(0,f.jsxs)("label",{className:"option-label",children:[(0,f.jsx)("input",{className:"option-input",type:"radio",value:e.name,checked:o===e.name,onChange:function(e){return a(e.target.value)}}),(0,f.jsx)("span",{className:"custom-radio",children:e.name})]},t)})),""!=o&&(0,f.jsx)("button",{className:"vote-button-form",onClick:v,children:"Vote"})]})})}):(0,f.jsx)("p",{children:"Loading poll..."})};var ht=function(){var e=l((0,t.useState)(!0),2),n=e[0],r=e[1],i=l((0,t.useState)(!1),2),o=i[0],a=i[1],s=l((0,t.useState)(!1),2),u=s[0],c=s[1];return(0,f.jsxs)("div",{children:[n&&(0,f.jsxs)("div",{className:"createButton-container",children:[(0,f.jsx)("h1",{className:"header-create-poll",children:"I want to..."}),(0,f.jsx)("button",{className:"create-new-poll-button",type:"button",onClick:function(){a(!0),c(!1),r(!1)},children:"Create new Poll"}),(0,f.jsx)("button",{className:"vote-on-existing-poll",type:"button",onClick:function(){a(!1),c(!0),r(!1)},children:"Vote on an existing poll"})]}),o&&(0,f.jsx)(dt,{}),u&&(0,f.jsx)(ft,{})]})},pt=function(e){e.activityName;var n=l((0,t.useState)([]),2),r=n[0],i=n[1],o=l((0,t.useState)(!1),2),a=(o[0],o[1],function(e){r.includes(e)?i(r.filter((function(t){return t!==e}))):i([].concat(d(r),[e]))});return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:"navigation-bar",children:[(0,f.jsxs)("div",{className:"nav-button ".concat(r.includes("Polling")?"active":""),onClick:function(){return a("Polling")},children:[(0,f.jsx)("img",{src:p,alt:"Polling",className:"icon"}),"Polling"]}),(0,f.jsxs)("div",{className:"nav-button ".concat(r.includes("Timer")?"active":""),onClick:function(){return a("Timer")},children:[(0,f.jsx)("img",{src:v,alt:"Timer",className:"icon"}),"Timer"]})]}),(0,f.jsx)("div",{className:"component-display",children:r.includes("Timer")&&(0,f.jsx)(h,{})}),r.includes("Polling")&&(0,f.jsx)(ht,{})]})};function vt(e,t,n){return(t=re(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gt(Object(n),!0).forEach((function(t){vt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var yt,bt=t.createContext();function wt(e,t){return wt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},wt(e,t)}function xt(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wt(e,t)}function kt(e){return kt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},kt(e)}function St(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(VO){return!1}}function _t(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Et(e){var t=St();return function(){var n,r=kt(e);if(t){var i=kt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===g(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _t(e)}(this,n)}}function Ct(e,t,n){return Ct=St()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&wt(i,n.prototype),i},Ct.apply(null,arguments)}function Pt(e){var t="function"===typeof Map?new Map:void 0;return Pt=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return Ct(e,arguments,kt(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),wt(r,e)},Pt(e)}function It(e){return o(e)||c(e)||s(e)||u()}function jt(){return jt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jt.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(yt||(yt={}));var Mt,At="popstate";function Tt(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function Ot(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(VO){}}}function Nt(e,t){return{usr:e.state,key:e.key,idx:t}}function Rt(e,t,n,r){return void 0===n&&(n=null),jt({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?Dt(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function Lt(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,o=e.hash,a=void 0===o?"":o;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),a&&"#"!==a&&(n+="#"===a.charAt(0)?a:"#"+a),n}function Dt(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function zt(e,t,n,r){void 0===r&&(r={});var i=r,o=i.window,a=void 0===o?document.defaultView:o,s=i.v5Compat,u=void 0!==s&&s,l=a.history,c=yt.Pop,d=null,f=h();function h(){return(l.state||{idx:null}).idx}function p(){c=yt.Pop;var e=h(),t=null==e?null:e-f;f=e,d&&d({action:c,location:g.location,delta:t})}function v(e){var t="null"!==a.location.origin?a.location.origin:a.location.href,n="string"===typeof e?e:Lt(e);return Tt(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==f&&(f=0,l.replaceState(jt({},l.state,{idx:f}),""));var g={get action(){return c},get location(){return e(a,l)},listen:function(e){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(At,p),d=e,function(){a.removeEventListener(At,p),d=null}},createHref:function(e){return t(a,e)},createURL:v,encodeLocation:function(e){var t=v(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){c=yt.Push;var r=Rt(g.location,e,t);n&&n(r,e);var i=Nt(r,f=h()+1),o=g.createHref(r);try{l.pushState(i,"",o)}catch(s){if(s instanceof DOMException&&"DataCloneError"===s.name)throw s;a.location.assign(o)}u&&d&&d({action:c,location:g.location,delta:1})},replace:function(e,t){c=yt.Replace;var r=Rt(g.location,e,t);n&&n(r,e);var i=Nt(r,f=h()),o=g.createHref(r);l.replaceState(i,"",o),u&&d&&d({action:c,location:g.location,delta:0})},go:function(e){return l.go(e)}};return g}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(Mt||(Mt={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function Bt(e,t,n){void 0===n&&(n="/");var r=Zt(("string"===typeof t?Dt(t):t).pathname||"/",n);if(null==r)return null;var i=Ft(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var o=null,a=0;null==o&&a<i.length;++a)o=Gt(i[a],Jt(r));return o}function Ft(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var i=function(e,i,o){var a={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(Tt(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));var s=rn([r,a.relativePath]),u=n.concat(a);e.children&&e.children.length>0&&(Tt(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),Ft(e.children,t,u,s)),(null!=e.path||e.index)&&t.push({path:s,score:$t(s,e.index),routesMeta:u})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,o=w(Ut(e.path));try{for(o.s();!(r=o.n()).done;){var a=r.value;i(e,t,a)}}catch(s){o.e(s)}finally{o.f()}}else i(e,t)})),t}function Ut(e){var t=e.split("/");if(0===t.length)return[];var n=It(t),r=n[0],i=n.slice(1),o=r.endsWith("?"),a=r.replace(/\?$/,"");if(0===i.length)return o?[a,""]:[a];var s=Ut(i.join("/")),u=[];return u.push.apply(u,d(s.map((function(e){return""===e?a:[a,e].join("/")})))),o&&u.push.apply(u,d(s)),u.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}var Kt=/^:\w+$/,Vt=3,Wt=2,Ht=1,Yt=10,qt=-2,Xt=function(e){return"*"===e};function $t(e,t){var n=e.split("/"),r=n.length;return n.some(Xt)&&(r+=qt),t&&(r+=Wt),n.filter((function(e){return!Xt(e)})).reduce((function(e,t){return e+(Kt.test(t)?Vt:""===t?Ht:Yt)}),r)}function Gt(e,t){for(var n=e.routesMeta,r={},i="/",o=[],a=0;a<n.length;++a){var s=n[a],u=a===n.length-1,l="/"===i?t:t.slice(i.length)||"/",c=Qt({path:s.relativePath,caseSensitive:s.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);var d=s.route;o.push({params:r,pathname:rn([i,c.pathname]),pathnameBase:on(rn([i,c.pathnameBase])),route:d}),"/"!==c.pathnameBase&&(i=rn([i,c.pathnameBase]))}return o}function Qt(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);Ot("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return r.push(t),"/([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");var o=new RegExp(i,t?void 0:"i");return[o,r]}(e.path,e.caseSensitive,e.end),r=l(n,2),i=r[0],o=r[1],a=t.match(i);if(!a)return null;var s=a[0],u=s.replace(/(.)\/+$/,"$1"),c=a.slice(1),d=o.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";u=s.slice(0,s.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return Ot(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(c[n]||"",t),e}),{});return{params:d,pathname:s,pathnameBase:u,pattern:e}}function Jt(e){try{return decodeURI(e)}catch(t){return Ot(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function Zt(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function en(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function tn(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function nn(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=Dt(e):(Tt(!(i=jt({},e)).pathname||!i.pathname.includes("?"),en("?","pathname","search",i)),Tt(!i.pathname||!i.pathname.includes("#"),en("#","pathname","hash",i)),Tt(!i.search||!i.search.includes("#"),en("#","search","hash",i)));var o,a=""===e||""===i.pathname,s=a?"/":i.pathname;if(r||null==s)o=n;else{var u=t.length-1;if(s.startsWith("..")){for(var l=s.split("/");".."===l[0];)l.shift(),u-=1;i.pathname=l.join("/")}o=u>=0?t[u]:"/"}var c=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?Dt(e):e,r=n.pathname,i=n.search,o=void 0===i?"":i,a=n.hash,s=void 0===a?"":a,u=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:u,search:an(o),hash:sn(s)}}(i,o),d=s&&"/"!==s&&s.endsWith("/"),f=(a||"."===s)&&n.endsWith("/");return c.pathname.endsWith("/")||!d&&!f||(c.pathname+="/"),c}var rn=function(e){return e.join("/").replace(/\/\/+/g,"/")},on=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},an=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},sn=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},un=function(e){xt(n,e);var t=Et(n);function n(){return ne(this,n),t.apply(this,arguments)}return oe(n)}(Pt(Error));function ln(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var cn=["post","put","patch","delete"],dn=(new Set(cn),["get"].concat(cn));new Set(dn),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function fn(){return fn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fn.apply(this,arguments)}var hn=t.createContext(null);var pn=t.createContext(null);var vn=t.createContext(null);var gn=t.createContext(null);var mn=t.createContext(null);var yn=t.createContext({outlet:null,matches:[],isDataRoute:!1});var bn=t.createContext(null);function wn(){return null!=t.useContext(mn)}function xn(){return wn()||Tt(!1),t.useContext(mn).location}function kn(e){t.useContext(gn).static||t.useLayoutEffect(e)}function Sn(){return t.useContext(yn).isDataRoute?function(){var e=Tn(Mn.UseNavigateStable).router,n=Nn(An.UseNavigateStable),r=t.useRef(!1);kn((function(){r.current=!0}));var i=t.useCallback((function(t,i){void 0===i&&(i={}),r.current&&("number"===typeof t?e.navigate(t):e.navigate(t,fn({fromRouteId:n},i)))}),[e,n]);return i}():function(){wn()||Tt(!1);var e=t.useContext(hn),n=t.useContext(gn),r=n.basename,i=n.navigator,o=t.useContext(yn).matches,a=xn().pathname,s=JSON.stringify(tn(o).map((function(e){return e.pathnameBase}))),u=t.useRef(!1);kn((function(){u.current=!0}));var l=t.useCallback((function(t,n){if(void 0===n&&(n={}),u.current)if("number"!==typeof t){var o=nn(t,JSON.parse(s),a,"path"===n.relative);null==e&&"/"!==r&&(o.pathname="/"===o.pathname?r:rn([r,o.pathname])),(n.replace?i.replace:i.push)(o,n.state,n)}else i.go(t)}),[r,i,s,a,e]);return l}()}function _n(e,n,r){wn()||Tt(!1);var i,o=t.useContext(gn).navigator,a=t.useContext(yn).matches,s=a[a.length-1],u=s?s.params:{},l=(s&&s.pathname,s?s.pathnameBase:"/"),c=(s&&s.route,xn());if(n){var d,f="string"===typeof n?Dt(n):n;"/"===l||(null==(d=f.pathname)?void 0:d.startsWith(l))||Tt(!1),i=f}else i=c;var h=i.pathname||"/",p=Bt(e,{pathname:"/"===l?h:h.slice(l.length)||"/"});var v=jn(p&&p.map((function(e){return Object.assign({},e,{params:Object.assign({},u,e.params),pathname:rn([l,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?l:rn([l,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),a,r);return n&&v?t.createElement(mn.Provider,{value:{location:fn({pathname:"/",search:"",hash:"",state:null,key:"default"},i),navigationType:yt.Pop}},v):v}function En(){var e=function(){var e,n=t.useContext(bn),r=On(An.UseRouteError),i=Nn(An.UseRouteError);if(n)return n;return null==(e=r.errors)?void 0:e[i]}(),n=ln(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:o},r):null,null)}var Cn=t.createElement(En,null),Pn=function(e){xt(r,e);var n=Et(r);function r(e){var t;return ne(this,r),(t=n.call(this,e)).state={location:e.location,revalidation:e.revalidation,error:e.error},t}return oe(r,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?t.createElement(yn.Provider,{value:this.props.routeContext},t.createElement(bn.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}}]),r}(t.Component);function In(e){var n=e.routeContext,r=e.match,i=e.children,o=t.useContext(hn);return o&&o.static&&o.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(yn.Provider,{value:n},i)}function jn(e,n,r){var i;if(void 0===n&&(n=[]),void 0===r&&(r=null),null==e){var o;if(null==(o=r)||!o.errors)return null;e=r.matches}var a=e,s=null==(i=r)?void 0:i.errors;if(null!=s){var u=a.findIndex((function(e){return e.route.id&&(null==s?void 0:s[e.route.id])}));u>=0||Tt(!1),a=a.slice(0,Math.min(a.length,u+1))}return a.reduceRight((function(e,i,o){var u=i.route.id?null==s?void 0:s[i.route.id]:null,l=null;r&&(l=i.route.errorElement||Cn);var c=n.concat(a.slice(0,o+1)),d=function(){var n;return n=u?l:i.route.Component?t.createElement(i.route.Component,null):i.route.element?i.route.element:e,t.createElement(In,{match:i,routeContext:{outlet:e,matches:c,isDataRoute:null!=r},children:n})};return r&&(i.route.ErrorBoundary||i.route.errorElement||0===o)?t.createElement(Pn,{location:r.location,revalidation:r.revalidation,component:l,error:u,children:d(),routeContext:{outlet:null,matches:c,isDataRoute:!0}}):d()}),null)}var Mn=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Mn||{}),An=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(An||{});function Tn(e){var n=t.useContext(hn);return n||Tt(!1),n}function On(e){var n=t.useContext(pn);return n||Tt(!1),n}function Nn(e){var n=function(e){var n=t.useContext(yn);return n||Tt(!1),n}(),r=n.matches[n.matches.length-1];return r.route.id||Tt(!1),r.route.id}r.startTransition;function Rn(e){var n=e.to,r=e.replace,i=e.state,o=e.relative;wn()||Tt(!1);var a=t.useContext(yn).matches,s=xn().pathname,u=Sn(),l=nn(n,tn(a).map((function(e){return e.pathnameBase})),s,"path"===o),c=JSON.stringify(l);return t.useEffect((function(){return u(JSON.parse(c),{replace:r,state:i,relative:o})}),[u,c,o,r,i]),null}function Ln(e){Tt(!1)}function Dn(e){var n=e.basename,r=void 0===n?"/":n,i=e.children,o=void 0===i?null:i,a=e.location,s=e.navigationType,u=void 0===s?yt.Pop:s,l=e.navigator,c=e.static,d=void 0!==c&&c;wn()&&Tt(!1);var f=r.replace(/^\/*/,"/"),h=t.useMemo((function(){return{basename:f,navigator:l,static:d}}),[f,l,d]);"string"===typeof a&&(a=Dt(a));var p=a,v=p.pathname,g=void 0===v?"/":v,m=p.search,y=void 0===m?"":m,b=p.hash,w=void 0===b?"":b,x=p.state,k=void 0===x?null:x,S=p.key,_=void 0===S?"default":S,E=t.useMemo((function(){var e=Zt(g,f);return null==e?null:{location:{pathname:e,search:y,hash:w,state:k,key:_},navigationType:u}}),[f,g,y,w,k,_,u]);return null==E?null:t.createElement(gn.Provider,{value:h},t.createElement(mn.Provider,{children:o,value:E}))}function zn(e){var t=e.children,n=e.location;return _n(Un(t),n)}var Bn=function(e){return e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error",e}(Bn||{}),Fn=new Promise((function(){}));t.Component;function Un(e,n){void 0===n&&(n=[]);var r=[];return t.Children.forEach(e,(function(e,i){if(t.isValidElement(e)){var o=[].concat(d(n),[i]);if(e.type!==t.Fragment){e.type!==Ln&&Tt(!1),e.props.index&&e.props.children&&Tt(!1);var a={id:e.props.id||o.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=Un(e.props.children,o)),r.push(a)}else r.push.apply(r,Un(e.props.children,o))}})),r}var Kn=n.p+"static/media/mentknowlogo.6c14dc6c502ed54ae7da9b3fd7d3b9e0.svg",Vn=function(){var e=(0,t.useContext)(bt).setUser,n=Sn(),r=l((0,t.useState)({email:"",password:""}),2),i=r[0],o=r[1],a=l((0,t.useState)({}),2),s=a[0],u=a[1],c=l((0,t.useState)(!1),2),d=c[0],h=c[1],p=i.email,v=i.password,g=function(e){o(mt(mt({},i),{},vt({},e.target.name,e.target.value)))},y=function(){var t=b(m().mark((function t(r){var i,o,a,s;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.preventDefault(),u({}),p||u((function(e){return mt(mt({},e),{},{email:"Incorrect email address. Please try again."})})),(!v||v.length<6)&&u((function(e){return mt(mt({},e),{},{password:"Password must be at least 6 characters long."})})),p&&v&&!(v.length<6)){t.next=6;break}return t.abrupt("return");case 6:return h(!0),i={headers:{"Content-Type":"application/json"}},t.prev=8,o=JSON.stringify({email:p,password:v}),t.next=12,lt.post("http://localhost:5004/api/users/login",o,i);case 12:a=t.sent,h(!1),200===a.status&&(localStorage.setItem("userData",JSON.stringify(a.data)),e(a.data),l=a.data.userType,n("mentee"===l?"/dashboard":"/MentorDashboard")),t.next=22;break;case 17:t.prev=17,t.t0=t.catch(8),h(!1),s=t.t0.response&&t.t0.response.data.errors?t.t0.response.data.errors[0].msg:t.t0.message,u("Incorrect email address. Please try again"===s?function(e){return mt(mt({},e),{},{email:s})}:"Incorrect password. Please try again"===s?function(e){return mt(mt({},e),{},{password:s})}:function(e){return mt(mt({},e),{},{general:"Error: ".concat(s)})});case 22:case"end":return t.stop()}var l}),t,null,[[8,17]])})));return function(e){return t.apply(this,arguments)}}();return(0,f.jsxs)("div",{className:"container1",children:[(0,f.jsx)("div",{className:"image-container1",children:(0,f.jsx)("img",{src:Kn,alt:"MentKnow Logo"})}),(0,f.jsxs)("div",{className:"login-container",children:[(0,f.jsx)("h2",{className:"SignInText1",children:"Sign In"}),(0,f.jsxs)("form",{onSubmit:y,children:[(0,f.jsxs)("div",{className:"some-style",children:[(0,f.jsx)("p",{className:"UserNameText1",children:"Email Address"}),s.email&&(0,f.jsxs)("div",{className:"error-message112",children:[(0,f.jsx)("img",{src:ct,alt:"error",className:"error-style"})," ",s.email," "]})]}),(0,f.jsx)("input",{className:"userNameForm1",type:"email",name:"email",value:p,onChange:g}),(0,f.jsxs)("div",{className:"some-style",children:[(0,f.jsx)("label",{className:"password-label1",children:"Password"}),s.password&&(0,f.jsxs)("div",{className:"error-message112",children:[(0,f.jsx)("img",{src:ct,alt:"error",className:"error-style"})," ",s.password]})]}),(0,f.jsx)("input",{className:"password-form1",type:"password",name:"password",value:v,onChange:g}),d&&(0,f.jsx)("div",{style:{marginTop:"13px",marginLeft:"340px"},className:"loading-ball"}),(0,f.jsx)("button",{className:"login-button1",type:"submit",children:"Sign In"}),(0,f.jsx)("a",{className:"link-register1",onClick:function(){n("/register")},children:" Don\u2019t have an account? Sign Up here "})]})]})]})};n.p;var Wn=function(){var e=Sn(),n=l((0,t.useState)({name:"",surname:"",email:"",password:"",userType:"mentee",groupNumber:"1",accessPin:""}),2),r=n[0],i=n[1],o=l((0,t.useState)({name:"",surname:"",email:"",password:"",groupNumber:"",accessPin:""}),2),a=o[0],s=o[1],u=r.name,c=r.surname,d=r.email,h=r.password,p=r.userType,v=r.groupNumber,g=r.accessPin,y=function(e){return i(mt(mt({},r),{},vt({},e.target.name,e.target.value)))},w=function(){var e=!0,t={};return u.trim()||(e=!1,t.name="Please enter your first name "),c.trim()||(e=!1,t.surname="Please enter your surname "),d.trim()&&d.toLowerCase().endsWith("@myuct.ac.za")||(e=!1,t.email=(d.trim(),"Please enter a valid UCT email address")),h.trim()||(e=!1,t.password="Passwords must be 6 or more characters and contain at least one number"),v.trim()||(e=!1,t.groupNumber="Please select a group number from the drop-down"),"mentor"===p&&"1234"!=g.trim()&&(e=!1,t.accessPin="Incorrect access pin"),[1,2,3,4,5].includes(parseInt(v))||(e=!1,t.groupNumber="Please select a group number from the drop-down"),s(t),e},x=function(){var t=b(m().mark((function t(n){var o,a,u;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),w()){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,o={headers:{"Content-Type":"application/json"}},a=JSON.stringify(r),t.next=8,lt.post("http://localhost:5004/api/users",a,o);case 8:200===t.sent.status&&(i({name:"",surname:"",email:"",password:"",userType:"mentee",groupNumber:1,accessPin:""}),e("/signin")),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(3),u=t.t0.response&&t.t0.response.data.errors?t.t0.response.data.errors[0].msg:t.t0.message,s((function(e){return mt(mt({},e),{},{general:"Error: ".concat(u)})}));case 16:case"end":return t.stop()}}),t,null,[[3,12]])})));return function(e){return t.apply(this,arguments)}}();return(0,f.jsxs)("div",{className:"container",children:[(0,f.jsx)("div",{className:"image-container",children:(0,f.jsx)("img",{src:Kn,alt:"MentKnow Logo"})}),(0,f.jsxs)("div",{className:"form-container",children:[(0,f.jsxs)("div",{className:"heading-error-container",children:[a.general&&(0,f.jsx)("div",{className:"error-message-server",children:a.general}),(0,f.jsx)("h2",{className:"register-header",children:"Create Account"})]}),(0,f.jsxs)("form",{onSubmit:x,children:[(0,f.jsxs)("div",{className:"radio-group-signup",children:[(0,f.jsxs)("label",{children:[(0,f.jsx)("input",{className:"radioButtonMentee",type:"radio",name:"userType",value:"mentee",checked:"mentee"===p,onChange:y}),"Mentee"]}),(0,f.jsxs)("label",{children:[(0,f.jsx)("input",{className:"radioButtonMentor",type:"radio",name:"userType",value:"mentor",checked:"mentor"===p,onChange:y}),"Mentor"]})]}),(0,f.jsxs)("div",{children:[(0,f.jsxs)("div",{className:"some-style",children:[(0,f.jsx)("label",{className:"name-label",children:"Name"}),a.name&&(0,f.jsxs)("div",{className:"error-message-name",children:[" ",(0,f.jsx)("img",{src:ct,alt:"error",className:"error-style"})," ",a.name]})]}),(0,f.jsx)("input",{className:"name-form",type:"text",name:"name",value:u,onChange:y})]}),(0,f.jsxs)("div",{children:[(0,f.jsxs)("div",{className:"some-style",children:[(0,f.jsx)("label",{className:"surname-label",children:"Surname"}),a.surname&&(0,f.jsxs)("div",{className:"error-message",children:[(0,f.jsx)("img",{src:ct,alt:"error",className:"error-style"})," ",a.surname]})]}),(0,f.jsx)("input",{className:"surname-form",type:"text",name:"surname",value:c,onChange:y})]}),(0,f.jsxs)("div",{children:[(0,f.jsxs)("div",{className:"some-style",children:[(0,f.jsx)("label",{className:"email-label",children:"UCT email address"}),a.email&&(0,f.jsxs)("div",{className:"error-message",children:[(0,f.jsx)("img",{src:ct,alt:"error",className:"error-style"})," ",a.email]})]}),(0,f.jsx)("input",{className:"email-form",type:"email",name:"email",value:d,onChange:y})]}),(0,f.jsxs)("div",{children:[(0,f.jsxs)("div",{className:"some-style",children:[(0,f.jsx)("label",{className:"password-label",children:"Password"}),a.password&&(0,f.jsxs)("div",{className:"error-message",children:[(0,f.jsx)("img",{src:ct,alt:"error",className:"error-style"})," ",a.password]})]}),(0,f.jsx)("input",{className:"password-form",type:"password",name:"password",value:h,onChange:y})]}),(0,f.jsxs)("div",{children:[(0,f.jsxs)("div",{className:"some-style",children:[(0,f.jsx)("label",{className:"group-label",children:"Group Number"}),a.groupNumber&&(0,f.jsxs)("div",{className:"error-message",children:[(0,f.jsx)("img",{src:ct,alt:"error",className:"error-style"})," ",a.groupNumber]})]}),(0,f.jsxs)("select",{className:"group-form",name:"groupNumber",value:v,onChange:y,children:[(0,f.jsx)("option",{value:"1",children:"1"}),(0,f.jsx)("option",{value:"2",children:"2"}),(0,f.jsx)("option",{value:"3",children:"3"}),(0,f.jsx)("option",{value:"4",children:"4"}),(0,f.jsx)("option",{value:"5",children:"5"})]})]}),"mentor"===p&&(0,f.jsxs)("div",{children:[(0,f.jsxs)("div",{className:"some-style",children:[(0,f.jsx)("label",{className:"access-label",children:"Access Pin "}),a.accessPin&&(0,f.jsxs)("div",{className:"error-message",children:[(0,f.jsx)("img",{src:ct,alt:"error",className:"error-style"})," ",a.accessPin]})]}),(0,f.jsx)("input",{className:"access-form",type:"text",name:"accessPin",value:g,onChange:y})]}),(0,f.jsx)("div",{children:(0,f.jsx)("button",{className:"register-button",type:"submit",children:"Sign Up"})}),(0,f.jsx)("a",{className:"link-register",onClick:function(){e("/signin")},children:"Already have an account? Sign In"})]})]})]})};var Hn=n.p+"static/media/Sign_out_squre_light.a0b9231cb8b4e002bc866a9fa207d888.svg";var Yn=n.p+"static/media/Frame.f6895295e5278646ec9de824a5adede7.svg";var qn=n.p+"static/media/lamp-2 1.18388175acf8afd701f560f3bbc1564b.svg";var Xn=n.p+"static/media/goal 1.533815b584cbc0d75a9278365c7eec33.svg";var $n=n.p+"static/media/save-time 1.6fcb95a9d74e258761d7a0671bbceb93.svg";var Gn=n.p+"static/media/human-brain 1.9758ac4e0240bd351e7ee2a7aa382f47.svg";var Qn=n.p+"static/media/6819628 2.4be8822a46ef3e9841bc0be949475dab.svg";var Jn=n.p+"static/media/magistrate 2.f21ef0dce6ee41d3c2531041b6965a4e.svg";var Zn=n.p+"static/media/Calendar_add_light.3c726c68c1c7042537169550192516a9.svg",er=(n(8624),n(9743),n(5470),n(2330),n(447),n(4178),"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"),tr="a0",nr="A00000000000000000000000000";function rr(e){if(e>="a"&&e<="z")return e.charCodeAt(0)-"a".charCodeAt(0)+2;if(e>="A"&&e<="Z")return"Z".charCodeAt(0)-e.charCodeAt(0)+2;throw new Error("Invalid index key head: "+e)}function ir(e){if(e.length!==rr(e.charAt(0)))throw new Error("invalid integer part of index key: "+e)}function or(e){if(void 0===e)throw Error("n is undefined")}function ar(e){ir(e);for(var t=It(e.split("")),n=t[0],r=t.slice(1),i=!0,o=r.length-1;i&&o>=0;o--){var a=er.indexOf(r[o])+1;a===er.length?r[o]="0":(r[o]=er.charAt(a),i=!1)}if(i){if("Z"===n)return"a0";if("z"===n)return;var s=String.fromCharCode(n.charCodeAt(0)+1);return s>"a"?r.push("0"):r.pop(),s+r.join("")}return n+r.join("")}function sr(e,t){if(void 0!==t&&e>=t)throw new Error(e+" >= "+t);if("0"===e.slice(-1)||t&&"0"===t.slice(-1))throw new Error("trailing zero");if(t){for(var n=0;(e.charAt(n)||"0")===t.charAt(n);)n++;if(n>0)return t.slice(0,n)+sr(e.slice(n),t.slice(n))}var r=e?er.indexOf(e.charAt(0)):0,i=void 0!==t?er.indexOf(t.charAt(0)):er.length;if(i-r>1){var o=Math.round(.5*(r+i));return er.charAt(o)}return t&&t.length>1?t.slice(0,1):er.charAt(r)+sr(e.slice(1),void 0)}function ur(e){var t=rr(e.charAt(0));if(t>e.length)throw new Error("invalid index: "+e);return e.slice(0,t)}function lr(e){if(e===nr)throw new Error("invalid index: "+e);var t=ur(e);if("0"===e.slice(t.length).slice(-1))throw new Error("invalid index: "+e)}function cr(e,t){if(void 0!==e&&lr(e),void 0!==t&&lr(t),void 0!==e&&void 0!==t&&e>=t)throw new Error(e+" >= "+t);if(void 0===e&&void 0===t)return tr;if(void 0===e){if(void 0===t)throw Error("b is undefined");var n=ur(t),r=t.slice(n.length);if(n===nr)return n+sr("",r);if(n<t)return n;var i=function(e){ir(e);for(var t=It(e.split("")),n=t[0],r=t.slice(1),i=!0,o=r.length-1;i&&o>=0;o--){var a=er.indexOf(r[o])-1;-1===a?r[o]=er.slice(-1):(r[o]=er.charAt(a),i=!1)}if(i){if("a"===n)return"Z"+er.slice(-1);if("A"===n)return;var s=String.fromCharCode(n.charCodeAt(0)-1);return s<"Z"?r.push(er.slice(-1)):r.pop(),s+r.join("")}return n+r.join("")}(n);return or(i),i}if(void 0===t){var o=ur(e),a=e.slice(o.length),s=ar(o);return void 0===s?o+sr(a,void 0):s}var u=ur(e),l=e.slice(u.length),c=ur(t),d=t.slice(c.length);if(u===c)return u+sr(l,d);var f=ar(u);return or(f),f<t?f:u+sr(l,void 0)}function dr(e,t,n){if(0===n)return[];if(1===n)return[cr(e,t)];if(void 0===t){for(var r=cr(e,t),i=[r],o=0;o<n-1;o++)r=cr(r,t),i.push(r);return i}if(void 0===e){for(var a=cr(e,t),s=[a],u=0;u<n-1;u++)a=cr(e,a),s.push(a);return s.reverse(),s}var l=Math.floor(n/2),c=cr(e,t);return[].concat(d(dr(e,c,l)),[c],d(dr(c,t,n-l-1)))}function fr(e,t,n){return dr(e,t,n)}function hr(e,t){return dr(e,void 0,t)}function pr(e,t){return dr(e,t,1)[0]}function vr(e){return dr(e,void 0,1)[0]}function gr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"a1";return[t].concat(d(dr(t,void 0,e)))}function mr(e,t){return e.index<t.index?-1:e.index>t.index?1:0}function yr(e,t){var n,r=[],i=w(e);try{e:for(i.s();!(n=i.n()).done;){var o,a=n.value,s=w(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;if(t?t(a,u):a===u)continue e}}catch(l){s.e(l)}finally{s.f()}r.push(a)}}catch(l){i.e(l)}finally{i.f()}return r}function br(e){return e.filter((function(e){return void 0!==e&&null!==e}))}function wr(e){return e[e.length-1]}function xr(e,t){var n,r,i=1/0,o=w(e);try{for(o.s();!(r=o.n()).done;){var a=r.value,s=t(a);s<i&&(n=a,i=s)}}catch(u){o.e(u)}finally{o.f()}return n}function kr(e){return function t(){try{return e.apply(void 0,arguments)}catch(n){throw n instanceof Error&&Error.captureStackTrace&&Error.captureStackTrace(n,t),n}}}function Sr(e,t){var n=t&&e&&"object"===typeof e&&t in e?e[t]:e;throw new Error("Unknown switch case ".concat(n))}var _r=kr((function(e,t){if(!e)throw new Error(t||"Assertion Error")})),Er=kr((function(e,t){if(null==e)throw new Error(null!==t&&void 0!==t?t:"value must be defined");return e}));function Cr(e,t){var n=void 0,r=function(){n||((n={}).promise=new Promise((function(e,t){n.resolve=e,n.reject=t}))),clearTimeout(n.timeout);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n.latestArgs=i,n.timeout=setTimeout((function(){var t=n;n=void 0;try{t.resolve(e.apply(void 0,d(t.latestArgs)))}catch(VO){t.reject(VO)}}),t),n.promise};return r.cancel=function(){n&&clearTimeout(n.timeout)},r}var Pr=new WeakMap;function Ir(e,t){if("object"===typeof e&&null!==e){var n=Pr.get(e);n||(n={tags:{},extras:{}},Pr.set(e,n)),t.tags&&(n.tags=mt(mt({},n.tags),t.tags)),t.extras&&(n.extras=mt(mt({},n.extras),t.extras))}}function jr(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return t+""}function Mr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=0,n=0,r=0,i=0;function o(){var e=t^t<<11;return t=n,n=r,r=i,(i^=(i>>>19^e^e>>>8)>>>0)/4294967296*2}for(var a=0;a<e.length+64;a++)t^=0|e.charCodeAt(a),o();return o}function Ar(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=l(t,2),o=i[0],a=i[1],s=l(n,2),u=s[0],c=s[1],d=u+(e-o)/(a-o)*(c-u);return r?u<c?Math.max(Math.min(d,c),u):Math.max(Math.min(d,u),c):d}function Tr(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Or(e,t){if(Tr(e,t))return e[t]}function Nr(e){if(!e)return e;if(Array.isArray(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(Nr(e[r]));return t}if("object"===typeof e){for(var i=Object.keys(e),o=i.length,a={},s=0;s<o;s++){var u=i[s];a[u]=Nr(e[u])}return a}return e}function Rr(e){return Object.keys(e)}function Lr(e){return Object.values(e)}function Dr(e){return Object.entries(e)}function zr(e){return Object.fromEntries(e)}function Br(e,t){var n,r={},i=!1,o=w(Dr(e));try{for(o.s();!(n=o.n()).done;){var a=l(n.value,2),s=a[0],u=a[1];t(s,u)?r[s]=u:i=!0}}catch(c){o.e(c)}finally{o.f()}return i?r:e}function Fr(e,t){var n,r={},i=w(Dr(e));try{for(i.s();!(n=i.n()).done;){var o=l(n.value,2),a=o[0],s=t(a,o[1]);r[a]=s}}catch(u){i.e(u)}finally{i.f()}return r}var Ur,Kr=function(){return"undefined"!==typeof process&&!1},Vr=[],Wr=function(){var e,t=w(Vr.splice(0,Vr.length));try{for(t.s();!(e=t.n()).done;){(0,e.value)()}}catch(n){t.e(n)}finally{t.f()}};function Hr(){Ur||(Ur=requestAnimationFrame((function(){Ur=void 0,Wr()})))}function Yr(e,t){return e.id>t.id?1:-1}function qr(e){return null!==e}var Xr="undefined"!==typeof window&&window.structuredClone?window.structuredClone:function(e){return e?JSON.parse(JSON.stringify(e)):e};var $r=function(e){xt(n,e);var t=Et(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];ne(this,n);var o=function(e){if(!e.length)return null;var t,n="",r=w(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;"number"===typeof i?n+=".".concat(i):i.startsWith("(")?n.endsWith(")")?n="".concat(n.slice(0,-1),", ").concat(i.slice(1)):n+=i:n+=".".concat(i)}}catch(o){r.e(o)}finally{r.f()}return n.startsWith(".")?n.slice(1):n}(i),a=e.split("\n").map((function(e,t){return 0===t?e:"  ".concat(e)})).join("\n");return vt(_t(r=t.call(this,i?"At ".concat(o,": ").concat(a):a)),"name","ValidationError"),r.rawMessage=e,r.path=i,r}return oe(n)}(Pt(Error));function Gr(e,t){try{return t()}catch(n){if(n instanceof $r)throw new $r(n.rawMessage,[e].concat(d(n.path)));throw new $r(n.toString(),[e])}}function Qr(e){if(null===e)return"null";if(Array.isArray(e))return"an array";var t=typeof e;switch(t){case"bigint":case"boolean":case"function":case"number":case"string":case"symbol":return"a ".concat(t);case"object":return"an ".concat(t);case"undefined":return"undefined";default:Sr(t)}}var Jr=function(){function e(t){ne(this,e),this.validationFn=t}return oe(e,[{key:"validate",value:function(e){return this.validationFn(e)}},{key:"nullable",value:function(){return Ei(this)}},{key:"optional",value:function(){return _i(this)}},{key:"refine",value:function(t){var n=this;return new e((function(e){return t(n.validate(e))}))}},{key:"check",value:function(e,t){return"string"===typeof e?this.refine((function(n){return Gr("(check ".concat(e,")"),(function(){return t(n)})),n})):this.refine((function(t){return e(t),t}))}}]),e}(),Zr=function(e){xt(n,e);var t=Et(n);function n(e){var r;return ne(this,n),r=t.call(this,(function(t){for(var n=gi.validate(t),r=function(t){Gr(t,(function(){return e.validate(n[t])}))},i=0;i<n.length;i++)r(i);return n})),r.itemValidator=e,r}return oe(n,[{key:"nonEmpty",value:function(){return this.check((function(e){if(0===e.length)throw new $r("Expected a non-empty array")}))}},{key:"lengthGreaterThan1",value:function(){return this.check((function(e){if(e.length<=1)throw new $r("Expected an array with length greater than 1")}))}}]),n}(Jr),ei=function(e){xt(n,e);var t=Et(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return ne(this,n),r=t.call(this,(function(t){if("object"!==typeof t||null===t)throw new $r("Expected object, got ".concat(Qr(t)));for(var n=function(){var e=l(o[r],2),n=e[0],i=e[1];Gr(n,(function(){i.validate(Or(t,n))}))},r=0,o=Object.entries(e);r<o.length;r++)n();if(!i)for(var a=0,s=Object.keys(t);a<s.length;a++){var u=s[a];if(!Tr(e,u))throw new $r("Unexpected property",[u])}return t})),r.config=e,r.shouldAllowUnknownProperties=i,r}return oe(n,[{key:"allowUnknownProperties",value:function(){return new n(this.config,!0)}},{key:"extend",value:function(e){return new n(mt(mt({},this.config),e))}}]),n}(Jr),ti=function(e){xt(n,e);var t=Et(n);function n(e,r,i){var o;return ne(this,n),(o=t.call(this,(function(t){if("object"!==typeof t||null===t)throw new $r("Expected an object, got ".concat(Qr(t)),[]);var n=Or(t,e);if("string"!==typeof n)throw new $r('Expected a string for key "'.concat(e,'", got ').concat(Qr(n)));var i=Tr(r,n)?r[n]:void 0;return void 0===i?o.unknownValueValidation(t,n):Gr("(".concat(e," = ").concat(n,")"),(function(){return i.validate(t)}))}))).key=e,o.config=r,o.unknownValueValidation=i,o}return oe(n,[{key:"validateUnknownVariants",value:function(e){return new n(this.key,this.config,e)}}]),n}(Jr),ni=function(e){xt(n,e);var t=Et(n);function n(e,r){var i;return ne(this,n),i=t.call(this,(function(t){if("object"!==typeof t||null===t)throw new $r("Expected object, got ".concat(Qr(t)));for(var n=function(){var t=l(o[i],2),n=t[0],a=t[1];Gr(n,(function(){e.validate(n),r.validate(a)}))},i=0,o=Object.entries(t);i<o.length;i++)n();return t})),i.keyValidator=e,i.valueValidator=r,i}return oe(n)}(Jr);function ri(e){return new Jr((function(t){if(typeof t!==e)throw new $r("Expected ".concat(e,", got ").concat(Qr(t)));return t}))}var ii=new Jr((function(e){return e})),oi=new Jr((function(e){return e})),ai=ri("string"),si=ri("number").check((function(e){if(Number.isNaN(e))throw new $r("Expected a number, got NaN");if(!Number.isFinite(e))throw new $r("Expected a finite number, got ".concat(e))})),ui=si.check((function(e){if(e<0)throw new $r("Expected a positive number, got ".concat(e))})),li=si.check((function(e){if(e<=0)throw new $r("Expected a non-zero positive number, got ".concat(e))})),ci=si.check((function(e){if(!Number.isInteger(e))throw new $r("Expected an integer, got ".concat(e))})),di=ci.check((function(e){if(e<0)throw new $r("Expected a positive integer, got ".concat(e))})),fi=ci.check((function(e){if(e<=0)throw new $r("Expected a non-zero positive integer, got ".concat(e))})),hi=ri("boolean"),pi=ri("bigint");function vi(e){return new Jr((function(t){if(t!==e)throw new $r("Expected ".concat(e,", got ").concat(JSON.stringify(t)));return e}))}var gi=new Jr((function(e){if(!Array.isArray(e))throw new $r("Expected an array, got ".concat(Qr(e)));return e}));function mi(e){return new Zr(e)}var yi=new Jr((function(e){if("object"!==typeof e||null===e)throw new $r("Expected object, got ".concat(Qr(e)));return e}));function bi(e){return new ei(e)}function wi(e,t){return new ni(e,t)}function xi(e,t){return new ti(e,t,(function(n,r){throw new $r("Expected one of ".concat(Object.keys(t).map((function(e){return JSON.stringify(e)})).join(" or "),", got ").concat(JSON.stringify(r)),[e])}))}function ki(e,t){return new Jr((function(n){return Gr(n&&"object"===typeof n&&"id"in n&&"string"===typeof n.id?"".concat(e,"(id = ").concat(n.id,")"):e,(function(){return t.validate(n)}))}))}function Si(e){return new Jr((function(t){if(!e.has(t)){var n=Array.from(e,(function(e){return JSON.stringify(e)})).join(" or ");throw new $r("Expected ".concat(n,", got ").concat(t))}return t}))}function _i(e){return new Jr((function(t){if(void 0!==t)return e.validate(t)}))}function Ei(e){return new Jr((function(t){return null===t?null:e.validate(t)}))}function Ci(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Si(new Set(t))}function Pi(e){return ai.refine((function(t){if(!t.startsWith("".concat(e,":")))throw new Error("".concat(e,' ID must start with "').concat(e,':"'));return t}))}var Ii=Pi("asset");function ji(e,t){return bi({id:Ii,typeName:vi("asset"),type:vi(e),props:t})}var Mi=function(){function e(){ne(this,e),vt(this,"arraySize",0),vt(this,"array",Array(8)),vt(this,"set",null)}return oe(e,[{key:"isEmpty",get:function(){if(this.array)return 0===this.arraySize;if(this.set)return 0===this.set.size;throw new Error("no set or array")}},{key:"add",value:function(e){if(this.array)return-1===this.array.indexOf(e)&&(this.arraySize<8?(this.array[this.arraySize]=e,this.arraySize++,!0):(this.set=new Set(this.array),this.array=null,this.set.add(e),!0));if(this.set)return!this.set.has(e)&&(this.set.add(e),!0);throw new Error("no set or array")}},{key:"remove",value:function(e){if(this.array){var t=this.array.indexOf(e);return-1!==t&&(this.array[t]=void 0,this.arraySize--,t!==this.arraySize&&(this.array[t]=this.array[this.arraySize],this.array[this.arraySize]=void 0),!0)}if(this.set)return!!this.set.has(e)&&(this.set.delete(e),!0);throw new Error("no set or array")}},{key:"visit",value:function(e){if(this.array)for(var t=0;t<this.arraySize;t++){var n=this.array[t];"undefined"!==typeof n&&e(n)}else{if(!this.set)throw new Error("no set or array");this.set.forEach(e)}}}]),e}();function Ai(e){return e&&"object"===typeof e&&"parents"in e}function Ti(e){for(var t=0,n=e.parents.length;t<n;t++)if(e.parents[t].__unsafe__getWithoutCapture(),e.parents[t].lastChangedEpoch!==e.parentEpochs[t])return!0;return!1}var Oi=function e(t,n){if(t.children.remove(n)&&t.children.isEmpty&&Ai(t))for(var r=0,i=t.parents.length;r<i;r++)e(t.parents[r],t)},Ni=function e(t,n){if(t.children.add(n)&&Ai(t))for(var r=0,i=t.parents.length;r<i;r++)e(t.parents[r],t)};function Ri(e,t){return e===t||Object.is(e,t)||Boolean(e&&t&&"function"===typeof e.equals&&e.equals(t))}var Li=Object.freeze([]),Di=Symbol.for("__signia__"),zi=globalThis;zi[Di]?console.error('Multiple versions of signia detected. This will cause unexpected behavior. Please add "resolutions" (yarn/pnpm) or "overrides" (npm) in your package.json to ensure only one version of signia is loaded.'):zi[Di]=!0;var Bi=oe((function e(t,n){ne(this,e),vt(this,"offset",0),vt(this,"numNewParents",0),vt(this,"maybeRemoved",void 0),this.below=t,this.child=n})),Fi=null;function Ui(e){Fi=new Bi(Fi,e)}function Ki(){var e,t=Fi;if(Fi=t.below,t.numNewParents>0||t.offset!==t.child.parents.length){for(var n=t.offset;n<t.child.parents.length;n++){var r=t.child.parents[n];t.child.parents.indexOf(r)>=t.offset&&Oi(r,t.child)}if(t.child.parents.length=t.offset,t.child.parentEpochs.length=t.offset,null!==(e=Fi)&&void 0!==e&&e.maybeRemoved)for(var i=0;i<Fi.maybeRemoved.length;i++){var o=Fi.maybeRemoved[i];-1===t.child.parents.indexOf(o)&&Oi(o,t.child)}}}function Vi(e){if(Fi){var t=Fi.child.parents.indexOf(e);if(t<0&&(Fi.numNewParents++,Fi.child.isActivelyListening&&Ni(e,Fi.child)),t<0||t>=Fi.offset){if(t!==Fi.offset&&t>0){var n=Fi.child.parents[Fi.offset];Fi.maybeRemoved?-1===Fi.maybeRemoved.indexOf(n)&&Fi.maybeRemoved.push(n):Fi.maybeRemoved=[n]}Fi.child.parents[Fi.offset]=e,Fi.child.parentEpochs[Fi.offset]=e.lastChangedEpoch,Fi.offset++}}}var Wi=Symbol("RESET_VALUE"),Hi=function(){function e(t){ne(this,e),vt(this,"index",0),vt(this,"buffer",void 0),this.capacity=t,this.buffer=new Array(t)}return oe(e,[{key:"pushEntry",value:function(e,t,n){void 0!==n&&(n!==Wi?(this.buffer[this.index]=[e,t,n],this.index=(this.index+1)%this.capacity):this.clear())}},{key:"clear",value:function(){this.index=0,this.buffer.fill(void 0)}},{key:"getChangesSince",value:function(e){for(var t=this.index,n=this.capacity,r=this.buffer,i=0;i<n;i++){var o=(t-1+n-i)%n,a=r[o];if(!a)return Wi;var s=l(a,2),u=s[0],c=s[1];if(0===i&&e>=c)return[];if(u<=e&&e<c){for(var d=i+1,f=new Array(d),h=0;h<d;h++)f[h]=r[(o+h)%n][2];return f}}return Wi}}]),e}(),Yi=-1,qi=0,Xi=!1;var $i=function(){function e(t){ne(this,e),vt(this,"initialAtomValues",new Map),this.parent=t}return oe(e,[{key:"isRoot",get:function(){return null===this.parent}},{key:"commit",value:function(){var e=this;if(this.isRoot){var t=this.initialAtomValues;this.initialAtomValues=new Map,Gi(t.keys())}else this.initialAtomValues.forEach((function(t,n){e.parent.initialAtomValues.has(n)||e.parent.initialAtomValues.set(n,t)}))}},{key:"abort",value:function(){qi++,this.initialAtomValues.forEach((function(e,t){var n;t.set(e),null===(n=t.historyBuffer)||void 0===n||n.clear()})),this.commit()}}]),e}();function Gi(e){if(Xi)throw new Error("cannot change atoms during reaction cycle");try{Xi=!0;var t,n=new Set,r=function e(t){t.lastTraversedEpoch!==qi&&(t.lastTraversedEpoch=qi,"maybeScheduleEffect"in t?n.add(t):t.children.visit(e))},i=w(e);try{for(i.s();!(t=i.n()).done;){t.value.children.visit(r)}}catch(s){i.e(s)}finally{i.f()}var o,a=w(n);try{for(a.s();!(o=a.n()).done;){o.value.maybeScheduleEffect()}}catch(s){a.e(s)}finally{a.f()}}finally{Xi=!1}}var Qi=null;function Ji(e){return Qi?e():function(e){var t=new $i(Qi);Qi=t;try{var n=!1,r=e((function(){return n=!0}));return n?t.abort():t.commit(),r}catch(VO){throw t.abort(),VO}finally{Qi=Qi.parent}}(e)}var Zi=function(){function e(t,n,r){var i;ne(this,e),vt(this,"isEqual",void 0),vt(this,"computeDiff",void 0),vt(this,"lastChangedEpoch",qi),vt(this,"children",new Mi),vt(this,"historyBuffer",void 0),this.name=t,this.current=n,this.isEqual=null!==(i=null===r||void 0===r?void 0:r.isEqual)&&void 0!==i?i:null,r&&(r.historyLength&&(this.historyBuffer=new Hi(r.historyLength)),this.computeDiff=r.computeDiff)}return oe(e,[{key:"__unsafe__getWithoutCapture",value:function(){return this.current}},{key:"value",get:function(){return Vi(this),this.current}},{key:"set",value:function(e,t){var n,r,i,o;if(null!==(n=null===(r=this.isEqual)||void 0===r?void 0:r.call(this,this.current,e))&&void 0!==n?n:Ri(this.current,e))return this.current;(qi++,this.historyBuffer)&&this.historyBuffer.pushEntry(this.lastChangedEpoch,qi,null!==(i=null!==t&&void 0!==t?t:null===(o=this.computeDiff)||void 0===o?void 0:o.call(this,this.current,e,this.lastChangedEpoch,qi))&&void 0!==i?i:Wi);this.lastChangedEpoch=qi;var a=this.current;return this.current=e,function(e,t){Qi?Qi.initialAtomValues.has(e)||Qi.initialAtomValues.set(e,t):Gi([e])}(this,a),e}},{key:"update",value:function(e){return this.set(e(this.current))}},{key:"getDiffSince",value:function(e){var t,n;return Vi(this),e>=this.lastChangedEpoch?Li:null!==(t=null===(n=this.historyBuffer)||void 0===n?void 0:n.getChangesSince(e))&&void 0!==t?t:Wi}}]),e}();function eo(e,t,n){return new Zi(e,t,n)}var to=Symbol("UNINITIALIZED"),no=function(e){return e===to},ro=oe((function e(t,n){ne(this,e),this.value=t,this.diff=n}));function io(e,t){return new ro(e,t)}var oo=function(){function e(t,n,r){var i;ne(this,e),vt(this,"lastChangedEpoch",Yi),vt(this,"lastTraversedEpoch",Yi),vt(this,"lastCheckedEpoch",Yi),vt(this,"parents",[]),vt(this,"parentEpochs",[]),vt(this,"children",new Mi),vt(this,"historyBuffer",void 0),vt(this,"state",to),vt(this,"computeDiff",void 0),vt(this,"isEqual",void 0),this.name=t,this.derive=n,null!==r&&void 0!==r&&r.historyLength&&(this.historyBuffer=new Hi(r.historyLength)),this.computeDiff=null===r||void 0===r?void 0:r.computeDiff,this.isEqual=null!==(i=null===r||void 0===r?void 0:r.isEqual)&&void 0!==i?i:null}return oe(e,[{key:"isActivelyListening",get:function(){return!this.children.isEmpty}},{key:"__unsafe__getWithoutCapture",value:function(){var e=this.lastChangedEpoch===Yi;if(!e&&(this.lastCheckedEpoch===qi||!Ti(this)))return this.lastCheckedEpoch=qi,this.state;try{var t,n;Ui(this);var r=this.derive(this.state,this.lastCheckedEpoch),i=r instanceof ro?r.value:r;if(!(null!==(t=null===(n=this.isEqual)||void 0===n?void 0:n.call(this,i,this.state))&&void 0!==t?t:Ri(i,this.state))){if(this.historyBuffer&&!e){var o,a,s=r instanceof ro?r.diff:void 0;this.historyBuffer.pushEntry(this.lastChangedEpoch,qi,null!==(o=null!==s&&void 0!==s?s:null===(a=this.computeDiff)||void 0===a?void 0:a.call(this,this.state,i,this.lastCheckedEpoch,qi))&&void 0!==o?o:Wi)}this.lastChangedEpoch=qi,this.state=i}return this.lastCheckedEpoch=qi,this.state}finally{Ki()}}},{key:"value",get:function(){var e=this.__unsafe__getWithoutCapture();return Vi(this),e}},{key:"getDiffSince",value:function(e){var t,n;return this.value,e>=this.lastChangedEpoch?Li:null!==(t=null===(n=this.historyBuffer)||void 0===n?void 0:n.getChangesSince(e))&&void 0!==t?t:Wi}}]),e}();function ao(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,r=n.get,i=Symbol.for("__signia__computed__"+t);return n.get=function(){var n=this[i];return n||(n=new oo(t,r.bind(this),e),Object.defineProperty(this,i,{enumerable:!1,configurable:!1,writable:!1,value:n})),n.value},n}function so(){if(1===arguments.length){var e=arguments[0];return function(t,n,r){return ao(e,t,n,r)}}return"string"===typeof arguments[0]?new oo(arguments[0],arguments[1],arguments[2]):ao(void 0,arguments[0],arguments[1],arguments[2])}var uo=function(){function e(t,n,r){var i=this;ne(this,e),vt(this,"_isActivelyListening",!1),vt(this,"lastTraversedEpoch",Yi),vt(this,"lastReactedEpoch",Yi),vt(this,"_scheduleCount",0),vt(this,"parentEpochs",[]),vt(this,"parents",[]),vt(this,"_scheduleEffect",void 0),vt(this,"maybeExecute",(function(){i._isActivelyListening&&i.execute()})),this.name=t,this.runEffect=n,this._scheduleEffect=null===r||void 0===r?void 0:r.scheduleEffect}return oe(e,[{key:"isActivelyListening",get:function(){return this._isActivelyListening}},{key:"scheduleCount",get:function(){return this._scheduleCount}},{key:"maybeScheduleEffect",value:function(){this._isActivelyListening&&this.lastReactedEpoch!==qi&&(!this.parents.length||Ti(this)?this.scheduleEffect():this.lastReactedEpoch=qi)}},{key:"scheduleEffect",value:function(){this._scheduleCount++,this._scheduleEffect?this._scheduleEffect(this.maybeExecute):this.execute()}},{key:"attach",value:function(){this._isActivelyListening=!0;for(var e=0,t=this.parents.length;e<t;e++)Ni(this.parents[e],this)}},{key:"detach",value:function(){this._isActivelyListening=!1;for(var e=0,t=this.parents.length;e<t;e++)Oi(this.parents[e],this)}},{key:"execute",value:function(){try{Ui(this);var e=this.runEffect(this.lastReactedEpoch);return this.lastReactedEpoch=qi,e}finally{Ki()}}}]),e}();function lo(e,t,n){var r=new uo(e,t,n);return r.attach(),r.scheduleEffect(),function(){r.detach()}}var co=function(){function e(t){ne(this,e),vt(this,"nextValue",void 0),vt(this,"diff",void 0),this.previousValue=t}return oe(e,[{key:"get",value:function(){var e,t,n,r,i=null!==(e=null===(t=this.diff)||void 0===t||null===(t=t.removed)||void 0===t?void 0:t.size)&&void 0!==e?e:0,o=null!==(n=null===(r=this.diff)||void 0===r||null===(r=r.added)||void 0===r?void 0:r.size)&&void 0!==n?n:0;if(0!==i||0!==o)return{value:this.nextValue,diff:this.diff}}},{key:"_add",value:function(e,t){var n,r,i,o,a;(null!==(n=this.nextValue)&&void 0!==n||(this.nextValue=new Set(this.previousValue)),this.nextValue.add(e),null!==(r=this.diff)&&void 0!==r||(this.diff={}),t)?null===(i=this.diff.removed)||void 0===i||i.delete(e):(null!==(a=(o=this.diff).added)&&void 0!==a||(o.added=new Set),this.diff.added.add(e))}},{key:"add",value:function(e){var t,n=this.previousValue.has(e);if(n){var r;if(!(null===(r=this.diff)||void 0===r||null===(r=r.removed)||void 0===r?void 0:r.has(e)))return;return this._add(e,n)}(null===(t=this.nextValue)||void 0===t?void 0:t.has(e))||this._add(e,n)}},{key:"_remove",value:function(e,t){var n,r,i,o,a;(null!==(n=this.nextValue)&&void 0!==n||(this.nextValue=new Set(this.previousValue)),this.nextValue.delete(e),null!==(r=this.diff)&&void 0!==r||(this.diff={}),t)?(null!==(o=(i=this.diff).removed)&&void 0!==o||(i.removed=new Set),this.diff.removed.add(e)):null===(a=this.diff.added)||void 0===a||a.delete(e)}},{key:"remove",value:function(e){var t,n=this.previousValue.has(e);if(!n){var r;if(!(null===(r=this.diff)||void 0===r||null===(r=r.added)||void 0===r?void 0:r.has(e)))return;return this._remove(e,n)}(null===(t=this.diff)||void 0===t||null===(t=t.removed)||void 0===t?void 0:t.has(e))||this._remove(e,n)}}]),e}(),fo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;return crypto.getRandomValues(new Uint8Array(e)).reduce((function(e,t){return e+=(t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_"}),"")},ho=function(){function e(t,n){var r,i,o=this;ne(this,e),vt(this,"createDefaultProperties",void 0),vt(this,"migrations",void 0),vt(this,"validator",void 0),vt(this,"scope",void 0),vt(this,"isInstance",(function(e){return(null===e||void 0===e?void 0:e.typeName)===o.typeName})),this.typeName=t,this.createDefaultProperties=n.createDefaultProperties,this.migrations=n.migrations,this.validator=null!==(r=n.validator)&&void 0!==r?r:{validate:function(e){return e}},this.scope=null!==(i=n.scope)&&void 0!==i?i:"document"}return oe(e,[{key:"create",value:function(e){for(var t=mt(mt({},this.createDefaultProperties()),{},{id:this.createId()}),n=0,r=Object.entries(e);n<r.length;n++){var i=l(r[n],2),o=i[0],a=i[1];void 0!==a&&(t[o]=a)}return t.typeName=this.typeName,t}},{key:"clone",value:function(e){return mt(mt({},Xr(e)),{},{id:this.createId()})}},{key:"createId",value:function(e){return this.typeName+":"+(null!==e&&void 0!==e?e:fo())}},{key:"createCustomId",value:function(e){return this.typeName+":"+e}},{key:"parseId",value:function(e){if(!this.isId(e))throw new Error('ID "'.concat(e,'" is not a valid ID for type "').concat(this.typeName,'"'));return e.slice(this.typeName.length+1)}},{key:"isId",value:function(e){if(!e)return!1;for(var t=0;t<this.typeName.length;t++)if(e[t]!==this.typeName[t])return!1;return":"===e[this.typeName.length]}},{key:"withDefaultProperties",value:function(t){return new e(this.typeName,{createDefaultProperties:t,migrations:this.migrations,validator:this.validator,scope:this.scope})}},{key:"validate",value:function(e){return this.validator.validate(e)}}]),e}();function po(e,t){var n;return new ho(e,{createDefaultProperties:function(){return{}},migrations:null!==(n=t.migrations)&&void 0!==n?n:{currentVersion:0,firstVersion:0,migrators:{}},validator:t.validator,scope:t.scope})}var vo=function(){function e(){ne(this,e),vt(this,"items",new WeakMap)}return oe(e,[{key:"get",value:function(e,t){return this.items.has(e)||this.items.set(e,t(e)),this.items.get(e)}}]),e}(),go=n(2467);function mo(e,t){for(var n=0,r=Object.entries(e);n<r.length;n++){var i=l(r[n],2),o=i[0],a=i[1],s=t[o];if("eq"in a&&s!==a.eq)return!1;if("neq"in a&&s===a.neq)return!1;if("gt"in a&&("number"!==typeof s||s<=a.gt))return!1}return!0}function yo(e,t,n){for(var r=Object.fromEntries(Object.keys(n).map((function(e){return[e,new Set]}))),i=0,o=Object.entries(n);i<o.length;i++){var a=l(o[i],2),s=a[0],u=a[1];if("eq"in u){var c=e.index(t,s).value.get(u.eq);if(c){var d,f=w(c);try{for(f.s();!(d=f.n()).done;){var h=d.value;r[s].add(h)}}catch(A){f.e(A)}finally{f.f()}}}else if("neq"in u){var p,v=w(e.index(t,s).value);try{for(v.s();!(p=v.n()).done;){var g=l(p.value,2),m=g[0],y=g[1];if(m!==u.neq){var b,x=w(y);try{for(x.s();!(b=x.n()).done;){var k=b.value;r[s].add(k)}}catch(A){x.e(A)}finally{x.f()}}}}catch(A){v.e(A)}finally{v.f()}}else if("gt"in u){var S,_=w(e.index(t,s).value);try{for(_.s();!(S=_.n()).done;){var E=l(S.value,2),C=E[0],P=E[1];if(C>u.gt){var I,j=w(P);try{for(j.s();!(I=j.n()).done;){var M=I.value;r[s].add(M)}}catch(A){j.e(A)}finally{j.f()}}}}catch(A){_.e(A)}finally{_.f()}}}return function(e){if(0===e.length)return new Set;var t,n=e[0],r=e.slice(1),i=new Set,o=w(n);try{var a=function(){var e=t.value;r.every((function(t){return t.has(e)}))&&i.add(e)};for(o.s();!(t=o.n()).done;)a()}catch(A){o.e(A)}finally{o.f()}return i}(Object.values(r))}var bo=function(){function e(t,n){ne(this,e),vt(this,"indexCache",new Map),vt(this,"historyCache",new Map),this.atoms=t,this.history=n}return oe(e,[{key:"filterHistory",value:function(e){var t=this;if(this.historyCache.has(e))return this.historyCache.get(e);var n=so("filterHistory:"+e,(function(n,r){if(no(n))return t.history.value;var i=t.history.getDiffSince(r);if(i===Wi)return t.history.value;var o,a={added:{},removed:{},updated:{}},s=0,u=0,c=0,d=w(i);try{for(d.s();!(o=d.n()).done;){var f,h=o.value,p=w(Lr(h.added));try{for(p.s();!(f=p.n()).done;){var v=f.value;if(v.typeName===e)if(a.removed[v.id]){var g=a.removed[v.id];delete a.removed[v.id],u--,g!==v&&(a.updated[v.id]=[g,v],c++)}else a.added[v.id]=v,s++}}catch(C){p.e(C)}finally{p.f()}var m,y=w(Lr(h.updated));try{for(y.s();!(m=y.n()).done;){var b=l(m.value,2),x=b[0],k=b[1];k.typeName===e&&(a.added[k.id]?a.added[k.id]=k:a.updated[k.id]?a.updated[k.id]=[a.updated[k.id][0],k]:(a.updated[k.id]=[x,k],c++))}}catch(C){y.e(C)}finally{y.f()}var S,_=w(Lr(h.removed));try{for(_.s();!(S=_.n()).done;){var E=S.value;E.typeName===e&&(a.added[E.id]?(delete a.added[E.id],s--):a.updated[E.id]?(a.removed[E.id]=a.updated[E.id][0],delete a.updated[E.id],c--,u++):(a.removed[E.id]=E,u++))}}catch(C){_.e(C)}finally{_.f()}}}catch(C){d.e(C)}finally{d.f()}return s||u||c?io(t.history.value,a):n}),{historyLength:100});return this.historyCache.set(e,n),n}},{key:"index",value:function(e,t){var n=e+":"+t;if(this.indexCache.has(n))return this.indexCache.get(n);var r=this.__uncached_createIndex(e,t);return this.indexCache.set(n,r),r}},{key:"__uncached_createIndex",value:function(e,t){var n=this,r=this.filterHistory(e),i=function(){r.value;var i,o=new Map,a=w(Lr(n.atoms.value));try{for(a.s();!(i=a.n()).done;){var s=i.value.value;if(s.typeName===e){var u=s[t];o.has(u)||o.set(u,new Set),o.get(u).add(s.id)}}}catch(l){a.e(l)}finally{a.f()}return o};return so("index:"+e+":"+t,(function(n,o){if(no(n))return i();var a=r.getDiffSince(o);if(a===Wi)return i();var s,u=new Map,c=function(e,t){var r,i=u.get(e);i||(i=new co(null!==(r=n.get(e))&&void 0!==r?r:new Set)),i.add(t),u.set(e,i)},d=function(e,t){var r,i=u.get(e);i||(i=new co(null!==(r=n.get(e))&&void 0!==r?r:new Set)),i.remove(t),u.set(e,i)},f=w(a);try{for(f.s();!(s=f.n()).done;){var h,p=s.value,v=w(Lr(p.added));try{for(v.s();!(h=v.n()).done;){var g=h.value;if(g.typeName===e)c(g[t],g.id)}}catch(R){v.e(R)}finally{v.f()}var m,y=w(Lr(p.updated));try{for(y.s();!(m=y.n()).done;){var b=l(m.value,2),x=b[0],k=b[1];if(k.typeName===e){var S=x[t],_=k[t];S!==_&&(d(S,k.id),c(_,k.id))}}}catch(R){y.e(R)}finally{y.f()}var E,C=w(Lr(p.removed));try{for(C.s();!(E=C.n()).done;){var P=E.value;if(P.typeName===e)d(P[t],P.id)}}catch(R){C.e(R)}finally{C.f()}}}catch(R){f.e(R)}finally{f.f()}var I,j=void 0,M=void 0,A=w(u);try{for(A.s();!(I=A.n()).done;){var T=l(I.value,2),O=T[0],N=T[1].get();N&&(j||(j=new Map(n)),M||(M=new Map),0===N.value.size?j.delete(O):j.set(O,N.value),M.set(O,N.diff))}}catch(R){A.e(R)}finally{A.f()}return j&&M?io(j,M):n}),{historyLength:100})}},{key:"record",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return{}},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"record:"+e+(n?":"+n.toString():""),i=this.ids(e,n,r);return so(r,(function(){var e,n=w(i.value);try{for(n.s();!(e=n.n()).done;){var r,o=e.value;return null===(r=t.atoms.value[o])||void 0===r?void 0:r.value}}catch(a){n.e(a)}finally{n.f()}}))}},{key:"records",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return{}},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"records:"+e+(n?":"+n.toString():""),i=this.ids(e,n,"ids:"+r);return so(r,(function(){return d(i.value).map((function(e){var n=t.atoms.value[e];if(!n)throw new Error("no atom found for record id: "+e);return n.value}))}))}},{key:"ids",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return{}},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ids:"+e+(n?":"+n.toString():""),i=this.filterHistory(e),o=function(){i.value;var r=n();return 0===Object.keys(r).length?new Set(Lr(t.atoms.value).flatMap((function(t){var n=t.value;return n.typeName===e?n.id:[]}))):yo(t,e,r)},a=function(e){var t=o(),n=function(e,t){var n,r={},i=w(t);try{for(i.s();!(n=i.n()).done;){var o,a=n.value;e.has(a)||(null!==(o=r.added)&&void 0!==o||(r.added=new Set),r.added.add(a))}}catch(d){i.e(d)}finally{i.f()}var s,u=w(e);try{for(u.s();!(s=u.n()).done;){var l,c=s.value;t.has(c)||(null!==(l=r.removed)&&void 0!==l||(r.removed=new Set),r.removed.add(c))}}catch(d){u.e(d)}finally{u.f()}return r.added||r.removed?r:void 0}(e,t);return n?io(t,n):e},s=so("ids_query:"+r,n,{isEqual:go});return so("query:"+r,(function(t,n){var r=s.value;if(no(t))return o();if(n<s.lastChangedEpoch)return a(t);var u=i.getDiffSince(n);if(u===Wi)return a(t);var c,d=new co(t),f=w(u);try{for(f.s();!(c=f.n()).done;){var h,p=c.value,v=w(Lr(p.added));try{for(v.s();!(h=v.n()).done;){var g=h.value;g.typeName===e&&mo(r,g)&&d.add(g.id)}}catch(C){v.e(C)}finally{v.f()}var m,y=w(Lr(p.updated));try{for(y.s();!(m=y.n()).done;){var b=l(m.value,2),x=(b[0],b[1]);x.typeName===e&&(mo(r,x)?d.add(x.id):d.remove(x.id))}}catch(C){y.e(C)}finally{y.f()}var k,S=w(Lr(p.removed));try{for(S.s();!(k=S.n()).done;){var _=k.value;_.typeName===e&&d.remove(_.id)}}catch(C){S.e(C)}finally{S.f()}}}catch(C){f.e(C)}finally{f.f()}var E=d.get();return E?io(E.value,E.diff):t}),{historyLength:50})}},{key:"exec",value:function(e,t){var n=yo(this,e,t);if(0===n.size)return Li;var r=this.atoms.value;return d(n).map((function(e){return r[e].value}))}}]),e}();var wo=function(){function e(t){var n=this;ne(this,e),vt(this,"id",fo()),vt(this,"atoms",eo("store_atoms",{})),vt(this,"history",eo("history",0,{historyLength:1e3})),vt(this,"query",new bo(this.atoms,this.history)),vt(this,"listeners",new Set),vt(this,"historyAccumulator",new ko),vt(this,"historyReactor",void 0),vt(this,"schema",void 0),vt(this,"props",void 0),vt(this,"scopedTypes",void 0),vt(this,"onAfterCreate",void 0),vt(this,"onAfterChange",void 0),vt(this,"onBeforeDelete",void 0),vt(this,"onAfterDelete",void 0),vt(this,"_runCallbacks",!0),vt(this,"put",(function(e,t){Ji((function(){for(var r,i={},o={},a=n.atoms.__unsafe__getWithoutCapture(),s=null,u=!1,c=0,d=e.length;c<d;c++){var f,h=(null!==(f=s)&&void 0!==f?f:a)[(r=e[c]).id];if(h){var p=h.__unsafe__getWithoutCapture();r=n.schema.validateRecord(n,r,null!==t&&void 0!==t?t:"updateRecord",p),h.set(r);var v=h.__unsafe__getWithoutCapture();p!==v&&(u=!0,i[r.id]=[p,v])}else u=!0,o[(r=n.schema.validateRecord(n,r,null!==t&&void 0!==t?t:"createRecord",null)).id]=r,s||(s=mt({},a)),s[r.id]=eo("atom:"+r.id,r)}if(s&&n.atoms.set(s),u){n.updateHistory({added:o,updated:i,removed:{}});var g=n.onAfterCreate,m=n.onAfterChange;g&&n._runCallbacks&&Object.values(o).forEach((function(e){g(e)})),m&&n._runCallbacks&&Object.values(i).forEach((function(e){var t=l(e,2),n=t[0],r=t[1];m(n,r)}))}}))})),vt(this,"remove",(function(e){Ji((function(){if(n.onBeforeDelete&&n._runCallbacks){var t,r=w(e);try{for(r.s();!(t=r.n()).done;){var i=t.value,o=n.atoms.__unsafe__getWithoutCapture()[i];o&&n.onBeforeDelete(o.value)}}catch(l){r.e(l)}finally{r.f()}}var a=void 0;if(n.atoms.update((function(t){var n,r,i=void 0,o=w(e);try{for(o.s();!(r=o.n()).done;){var s=r.value;s in t&&(i||(i=mt({},t)),a||(a={}),delete i[s],a[s]=t[s].value)}}catch(l){o.e(l)}finally{o.f()}return null!==(n=i)&&void 0!==n?n:t})),a&&(n.updateHistory({added:{},updated:{},removed:a}),n.onAfterDelete&&n._runCallbacks))for(var s=0,u=e.length;s<u;s++)n.onAfterDelete(a[e[s]])}))})),vt(this,"get",(function(e){var t;return null===(t=n.atoms.value[e])||void 0===t?void 0:t.value})),vt(this,"unsafeGetWithoutCapture",(function(e){var t;return null===(t=n.atoms.value[e])||void 0===t?void 0:t.__unsafe__getWithoutCapture()})),vt(this,"serialize",(function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"document",r={},i=w(Dr(n.atoms.value));try{for(i.s();!(e=i.n()).done;){var o=l(e.value,2),a=o[0],s=o[1].value;("all"===t||n.scopedTypes[t].has(s.typeName))&&(r[a]=s)}}catch(u){i.e(u)}finally{i.f()}return r})),vt(this,"allRecords",(function(){return Lr(n.atoms.value).map((function(e){return e.value}))})),vt(this,"clear",(function(){n.remove(Rr(n.atoms.value))})),vt(this,"update",(function(e,t){var r=n.atoms.value[e];r?n.put([t(r.__unsafe__getWithoutCapture())]):console.error("Record ".concat(e," not found. This is probably an error"))})),vt(this,"has",(function(e){return!!n.atoms.value[e]})),vt(this,"listen",(function(e,t){var r,i;n._flushHistory();var o={onHistory:e,filters:{source:null!==(r=null===t||void 0===t?void 0:t.source)&&void 0!==r?r:"all",scope:null!==(i=null===t||void 0===t?void 0:t.scope)&&void 0!==i?i:"all"}};return n.listeners.add(o),n.historyReactor.scheduler.isActivelyListening||n.historyReactor.start(),function(){n.listeners.delete(o),0===n.listeners.size&&n.historyReactor.stop()}})),vt(this,"isMergingRemoteChanges",!1),vt(this,"mergeRemoteChanges",(function(e){if(n.isMergingRemoteChanges)return e();try{n.isMergingRemoteChanges=!0,Ji(e)}finally{n.isMergingRemoteChanges=!1}})),vt(this,"createComputedCache",(function(e,t){var r=new vo;return{get:function(i){var o=n.atoms.value[i];if(o)return r.get(o,(function(){return so(e+":"+i,(function(){return t(o.value)}))})).value}}})),vt(this,"createSelectedComputedCache",(function(e,t,r){var i=new vo;return{get:function(o){var a=n.atoms.value[o];if(a){var s=so(e+":"+o+":selector",(function(){return t(a.value)}));return i.get(a,(function(){return so(e+":"+o,(function(){return r(s.value)}))})).value}}}})),vt(this,"_integrityChecker",void 0),vt(this,"_isPossiblyCorrupted",!1);var r=t.initialData,i=t.schema;this.schema=i,this.props=t.props,r&&this.atoms.set(zr(Dr(r).map((function(e){var t=l(e,2),r=t[0],i=t[1];return[r,eo("atom:"+r,n.schema.validateRecord(n,i,"initialize",null))]})))),this.historyReactor=function(e,t,n){var r=new uo(e,t,n);return{scheduler:r,start:function(e){var t,n=null!==(t=null===e||void 0===e?void 0:e.force)&&void 0!==t&&t;r.attach(),n?r.scheduleEffect():r.maybeScheduleEffect()},stop:function(){r.detach()}}}("Store.historyReactor",(function(){n.history.value,n._flushHistory()}),{scheduleEffect:function(e){return function(e){if(Kr())return e();Vr.includes(e)||(Vr.push(e),Hr())}(e)}}),this.scopedTypes={document:new Set(Lr(this.schema.types).filter((function(e){return"document"===e.scope})).map((function(e){return e.typeName}))),session:new Set(Lr(this.schema.types).filter((function(e){return"session"===e.scope})).map((function(e){return e.typeName}))),presence:new Set(Lr(this.schema.types).filter((function(e){return"presence"===e.scope})).map((function(e){return e.typeName})))}}return oe(e,[{key:"_flushHistory",value:function(){if(this.historyAccumulator.hasChanges()){var e,t=w(this.historyAccumulator.flush());try{for(t.s();!(e=t.n()).done;){var n,r=e.value,i=r.changes,o=r.source,a=null,s=null,u=null,l=w(this.listeners);try{for(l.s();!(n=l.n()).done;){var c=n.value,d=c.onHistory,f=c.filters;if("all"===f.source||f.source===o)if("all"!==f.scope)if("document"===f.scope){var h;if(null!==(h=s)&&void 0!==h||(s=this.filterChangesByScope(i,"document")),!s)continue;d({changes:s,source:o})}else if("session"===f.scope){var p;if(null!==(p=a)&&void 0!==p||(a=this.filterChangesByScope(i,"session")),!a)continue;d({changes:a,source:o})}else{var v;if(null!==(v=u)&&void 0!==v||(u=this.filterChangesByScope(i,"presence")),!u)continue;d({changes:u,source:o})}else d({changes:i,source:o})}}catch(g){l.e(g)}finally{l.f()}}}catch(g){t.e(g)}finally{t.f()}}}},{key:"filterChangesByScope",value:function(e,t){var n=this,r={added:Br(e.added,(function(e,r){return n.scopedTypes[t].has(r.typeName)})),updated:Br(e.updated,(function(e,r){return n.scopedTypes[t].has(r[1].typeName)})),removed:Br(e.removed,(function(e,r){return n.scopedTypes[t].has(r.typeName)}))};return 0===Object.keys(r.added).length&&0===Object.keys(r.updated).length&&0===Object.keys(r.removed).length?null:r}},{key:"updateHistory",value:function(e){this.historyAccumulator.add({changes:e,source:this.isMergingRemoteChanges?"remote":"user"}),0===this.listeners.size&&this.historyAccumulator.clear(),this.history.set(this.history.value+1,e)}},{key:"validate",value:function(e){var t=this;this.allRecords().forEach((function(n){return t.schema.validateRecord(t,n,e,null)}))}},{key:"getSnapshot",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"document";return{store:this.serialize(e),schema:this.schema.serialize()}}},{key:"loadSnapshot",value:function(e){var t=this,n=this.schema.migrateStoreSnapshot(e.store,e.schema);if("error"===n.type)throw new Error("Failed to migrate snapshot: ".concat(n.reason));Ji((function(){t.clear(),t.put(Object.values(n.value)),t.ensureStoreIsUsable()}))}},{key:"extractingChanges",value:function(e){var t=[],n=this.historyAccumulator.intercepting((function(e){return t.push(e.changes)}));try{return Ji(e),xo(t)}finally{n()}}},{key:"applyDiff",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this._runCallbacks;try{this._runCallbacks=n,Ji((function(){var n=Lr(e.added).concat(Lr(e.updated).map((function(e){var t=l(e,2);t[0];return t[1]}))),r=Rr(e.removed);n.length&&t.put(n),r.length&&t.remove(r)}))}finally{this._runCallbacks=r}}},{key:"ensureStoreIsUsable",value:function(){var e,t;null!==(e=this._integrityChecker)&&void 0!==e||(this._integrityChecker=this.schema.createIntegrityChecker(this)),null===(t=this._integrityChecker)||void 0===t||t.call(this)}},{key:"markAsPossiblyCorrupted",value:function(){this._isPossiblyCorrupted=!0}},{key:"isPossiblyCorrupted",value:function(){return this._isPossiblyCorrupted}}]),e}();function xo(e){var t,n={added:{},removed:{},updated:{}},r=w(e);try{for(r.s();!(t=r.n()).done;){var i,o=t.value,a=w(Dr(o.added));try{for(a.s();!(i=a.n()).done;){var s=l(i.value,2),u=s[0],c=s[1];if(n.removed[u]){var d=n.removed[u];delete n.removed[u],d!==c&&(n.updated[u]=[d,c])}else n.added[u]=c}}catch(_){a.e(_)}finally{a.f()}var f,h=w(Dr(o.updated));try{for(h.s();!(f=h.n()).done;){var p=l(f.value,2),v=p[0],g=l(p[1],2),m=(g[0],g[1]);n.added[v]?(n.added[v]=m,delete n.updated[v],delete n.removed[v]):n.updated[v]?(n.updated[v][1]=m,delete n.removed[v]):(n.updated[v]=o.updated[v],delete n.removed[v])}}catch(_){h.e(_)}finally{h.f()}var y,b=w(Dr(o.removed));try{for(b.s();!(y=b.n()).done;){var x=l(y.value,2),k=x[0],S=x[1];n.added[k]?delete n.added[k]:n.updated[k]?(n.removed[k]=n.updated[k][0],delete n.updated[k]):n.removed[k]=S}}catch(_){b.e(_)}finally{b.f()}}}catch(_){r.e(_)}finally{r.f()}return n}var ko=function(){function e(){ne(this,e),vt(this,"_history",[]),vt(this,"_interceptors",new Set)}return oe(e,[{key:"intercepting",value:function(e){var t=this;return this._interceptors.add(e),function(){t._interceptors.delete(e)}}},{key:"add",value:function(e){this._history.push(e);var t,n=w(this._interceptors);try{for(n.s();!(t=n.n()).done;){(0,t.value)(e)}}catch(r){n.e(r)}finally{n.f()}}},{key:"flush",value:function(){var e=function(e){for(var t,n=[],r=e[0],i=1,o=e.length;i<o;i++)t=e[i],r.source!==t.source?(n.push(r),r=t):r={source:r.source,changes:xo([r.changes,t.changes])};return n.push(r),n}(this._history);return this._history=[],e}},{key:"clear",value:function(){this._history=[]}},{key:"hasChanges",value:function(){return this._history.length>0}}]),e}();function So(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var _o=["typeName","id"];function Eo(e){var t=e.currentVersion,n=e.firstVersion,r=e.migrators,i=void 0===r?{}:r,o=e.subTypeKey,a=e.subTypeMigrations;if("number"===typeof t&&"number"===typeof n){if(t===n)throw Error("Current version is equal to initial version.");if(t<n)throw Error("Current version is lower than initial version.")}return{firstVersion:null!==n&&void 0!==n?n:0,currentVersion:null!==t&&void 0!==t?t:0,migrators:i,subTypeKey:o,subTypeMigrations:a}}var Co=function(e){return e.IncompatibleSubtype="incompatible-subtype",e.UnknownType="unknown-type",e.TargetVersionTooNew="target-version-too-new",e.TargetVersionTooOld="target-version-too-old",e.MigrationError="migration-error",e.UnrecognizedSubtype="unrecognized-subtype",e}(Co||{});function Po(e){var t=e.record,n=e.migrations,r=e.fromVersion,i=e.toVersion,o=r;if(!function(e){return"object"===typeof e&&null!==e&&"id"in e&&"typeName"in e}(t))throw new Error("[migrateRecord] object is not a record");for(var a=t.typeName,s=t.id,u=So(t,_o);o<i;){var l=o+1,c=n.migrators[l];if(!c)return{type:"error",reason:"target-version-too-new"};u=c.up(u),o=l}for(;o>i;){var d=o-1,f=n.migrators[o];if(!f)return{type:"error",reason:"target-version-too-old"};u=f.down(u),o=d}return{type:"success",value:mt(mt({},u),{},{id:s,typeName:a})}}function Io(e){for(var t=e.value,n=e.migrations,r=e.fromVersion,i=e.toVersion,o=r;o<i;){var a=o+1,s=n.migrators[a];if(!s)return{type:"error",reason:"target-version-too-new"};t=s.up(t),o=a}for(;o>i;){var u=o-1,l=n.migrators[o];if(!l)return{type:"error",reason:"target-version-too-old"};t=l.down(t),o=u}return{type:"success",value:t}}var jo,Mo=function(){function e(t,n){ne(this,e),this.types=t,this.options=n}return oe(e,[{key:"currentStoreVersion",get:function(){var e,t;return null!==(e=null===(t=this.options.snapshotMigrations)||void 0===t?void 0:t.currentVersion)&&void 0!==e?e:0}},{key:"validateRecord",value:function(e,t,n,r){try{var i=Or(this.types,t.typeName);if(!i)throw new Error("Missing definition for record type ".concat(t.typeName));return i.validate(t)}catch(o){if(this.options.onValidationFailure)return this.options.onValidationFailure({store:e,record:t,phase:n,recordBefore:r,error:o});throw o}}},{key:"migratePersistedRecord",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"up",i=Or(this.types,e.typeName),o=t.recordVersions[e.typeName];if(!o||!i)return{type:"error",reason:Co.UnknownType};var a=i.migrations.currentVersion,s=o.version;if(a!==s){var u=Po("up"===r?{record:e,migrations:i.migrations,fromVersion:s,toVersion:a}:{record:e,migrations:i.migrations,fromVersion:a,toVersion:s});if("error"===u.type)return u;e=u.value}if(!i.migrations.subTypeKey)return{type:"success",value:e};var l=null===(n=i.migrations.subTypeMigrations)||void 0===n?void 0:n[e[i.migrations.subTypeKey]],c="subTypeVersions"in o?o.subTypeVersions[e[i.migrations.subTypeKey]]:void 0;if(void 0===l)return{type:"error",reason:Co.UnrecognizedSubtype};if(void 0===c)return{type:"error",reason:Co.IncompatibleSubtype};var d=Po("up"===r?{record:e,migrations:l,fromVersion:c,toVersion:l.currentVersion}:{record:e,migrations:l,fromVersion:l.currentVersion,toVersion:c});return"error"===d.type?d:{type:"success",value:d.value}}},{key:"migrateStoreSnapshot",value:function(e,t){var n,r=this.options.snapshotMigrations;if(!r)return{type:"success",value:e};var i=r.currentVersion,o=null!==(n=t.storeVersion)&&void 0!==n?n:0;if(i<o)return{type:"error",reason:Co.TargetVersionTooOld};if(i>o){var a=Io({value:e,migrations:r,fromVersion:o,toVersion:i});if("error"===a.type)return a;e=a.value}var s,u=[],l=w(Lr(e));try{for(l.s();!(s=l.n()).done;){var c=s.value,d=this.migratePersistedRecord(c,t);if("error"===d.type)return d;d.value&&d.value!==c&&u.push(d.value)}}catch(v){l.e(v)}finally{l.f()}if(u.length){e=mt({},e);var f,h=w(u);try{for(h.s();!(f=h.n()).done;){var p=f.value;e[p.id]=p}}catch(v){h.e(v)}finally{h.f()}}return{type:"success",value:e}}},{key:"createIntegrityChecker",value:function(e){var t,n,r;return null!==(t=null===(n=(r=this.options).createIntegrityChecker)||void 0===n?void 0:n.call(r,e))&&void 0!==t?t:void 0}},{key:"serialize",value:function(){var e,t;return{schemaVersion:1,storeVersion:null!==(e=null===(t=this.options.snapshotMigrations)||void 0===t?void 0:t.currentVersion)&&void 0!==e?e:0,recordVersions:Object.fromEntries(Lr(this.types).map((function(e){return[e.typeName,e.migrations.subTypeKey&&e.migrations.subTypeMigrations?{version:e.migrations.currentVersion,subTypeKey:e.migrations.subTypeKey,subTypeVersions:e.migrations.subTypeMigrations?Object.fromEntries(Object.entries(e.migrations.subTypeMigrations).map((function(e){var t=l(e,2);return[t[0],t[1].currentVersion]}))):void 0}:{version:e.migrations.currentVersion}]})))}}},{key:"serializeEarliestVersion",value:function(){var e,t;return{schemaVersion:1,storeVersion:null!==(e=null===(t=this.options.snapshotMigrations)||void 0===t?void 0:t.firstVersion)&&void 0!==e?e:0,recordVersions:Object.fromEntries(Lr(this.types).map((function(e){return[e.typeName,e.migrations.subTypeKey&&e.migrations.subTypeMigrations?{version:e.migrations.firstVersion,subTypeKey:e.migrations.subTypeKey,subTypeVersions:e.migrations.subTypeMigrations?Object.fromEntries(Object.entries(e.migrations.subTypeMigrations).map((function(e){var t=l(e,2);return[t[0],t[1].firstVersion]}))):void 0}:{version:e.migrations.firstVersion}]})))}}}],[{key:"create",value:function(t,n){return new e(t,null!==n&&void 0!==n?n:{})}}]),e}(),Ao=function(e,t){if(e.schemaVersion>t.schemaVersion)return 1;if(e.schemaVersion<t.schemaVersion)return-1;if(e.storeVersion>t.storeVersion)return 1;if(e.storeVersion<t.storeVersion)return-1;for(var n=0,r=Object.keys(e.recordVersions);n<r.length;n++){var i=r[n],o=e.recordVersions[i],a=t.recordVersions[i];if(o.version>a.version)return 1;if(o.version<a.version)return-1;if("subTypeVersions"in o&&!("subTypeVersions"in a))return 1;if(!("subTypeVersions"in o)&&"subTypeVersions"in a)return-1;if("subTypeVersions"in o&&"subTypeVersions"in a)for(var s=0,u=Object.keys(o.subTypeVersions);s<u.length;s++){var l=u[s],c=o.subTypeVersions[l],d=a.subTypeVersions[l];if(c>d)return 1;if(c<d)return-1}}return 0},To=po("camera",{validator:ki("camera",bi({typeName:vi("camera"),id:Pi("camera"),x:si,y:si,z:si})),migrations:Eo({}),scope:"session"}).withDefaultProperties((function(){return{x:0,y:0,z:1}})),Oo=bi({x:si,y:si,z:si.optional()}),No=bi({x:si,y:si,w:si,h:si}),Ro=Si(new Set(["accent","white","black","selection-stroke","selection-fill","laser","muted-1"])),Lo=Si(new Set(["none","default","pointer","cross","grab","rotate","grabbing","resize-edge","resize-corner","text","move","ew-resize","ns-resize","nesw-resize","nwse-resize","nesw-rotate","nwse-rotate","swne-rotate","senw-rotate","zoom-in","zoom-out"])),Do=bi({color:Ro,type:Lo,rotation:si}),zo=si.check((function(e){if(e<0||e>1)throw new $r("Opacity must be between 0 and 1")})),Bo=new Set(["starting","paused","active","stopping"]),Fo=bi({points:mi(Oo),size:ui,color:Ro,opacity:si,state:Si(Bo),delay:si}),Uo=Pi("page"),Ko=po("page",{validator:ki("page",bi({typeName:vi("page"),id:Uo,name:ai,index:ai})),migrations:Eo({}),scope:"document"});function Vo(e){return Ko.isId(e)}var Wo=["exportBackground"],Ho=["dialog"],Yo=["isToolLocked"],qo=["propsForNextShape"],Xo=["propsForNextShape"],$o=["labelColor"],Go=["followingUserId"],Qo=["zoomBrush"],Jo=["verticalAlign"],Zo=["delay"],ea=["userId"],ta=["isPenMode","isGridMode"],na=["opacity"],ra=["propsForNextShape"],ia=["opacityForNextShape"],oa=["chatMessage","isChatting"],aa=["highlightedUserIds"],sa=["propsForNextShape"],ua=["stylesForNextShape"];Pi("instance");var la,ca=2,da=3,fa=4,ha=5,pa=6,va=7,ga=8,ma=9,ya=10,ba=11,wa=12,xa=13,ka=14,Sa=15,_a=16,Ea=Eo({currentVersion:_a,migrators:(jo={},vt(jo,1,{up:function(e){return mt(mt({},e),{},{exportBackground:!0})},down:function(e){e.exportBackground;return So(e,Wo)}}),vt(jo,ca,{up:function(e){e.dialog;return So(e,Ho)},down:function(e){return mt(mt({},e),{},{dialog:null})}}),vt(jo,da,{up:function(e){return mt(mt({},e),{},{isToolLocked:!1})},down:function(e){e.isToolLocked;return So(e,Yo)}}),vt(jo,fa,{up:function(e){var t=e.propsForNextShape;return mt(mt({},So(e,qo)),{},{propsForNextShape:Object.fromEntries(Object.entries(t).filter((function(e){var t=l(e,1)[0];return["color","labelColor","dash","fill","size","font","align","verticalAlign","icon","geo","arrowheadStart","arrowheadEnd","spline"].includes(t)})))})},down:function(e){return e}}),vt(jo,ha,{up:function(e){var t=e.propsForNextShape;return mt(mt({},So(e,Xo)),{},{propsForNextShape:mt(mt({},t),{},{labelColor:"black"})})},down:function(e){var t=e.propsForNextShape,n=(t.labelColor,So(t,$o));return mt(mt({},e),{},{propsForNextShape:mt({},n)})}}),vt(jo,pa,{up:function(e){return mt(mt({},e),{},{followingUserId:null})},down:function(e){e.followingUserId;return So(e,Go)}}),vt(jo,va,{up:function(e){var t=e.propsForNextShape.align;return"justify"===t&&(t="start"),mt(mt({},e),{},{propsForNextShape:mt(mt({},e.propsForNextShape),{},{align:t})})},down:function(e){return mt({},e)}}),vt(jo,ga,{up:function(e){return mt(mt({},e),{},{zoomBrush:null})},down:function(e){e.zoomBrush;return So(e,Qo)}}),vt(jo,ma,{up:function(e){return mt(mt({},e),{},{propsForNextShape:mt(mt({},e.propsForNextShape),{},{verticalAlign:"middle"})})},down:function(e){var t=e.propsForNextShape,n=(t.verticalAlign,So(t,Jo));return mt(mt({},e),{},{propsForNextShape:n})}}),vt(jo,ya,{up:function(e){return null!==e.scribble?mt(mt({},e),{},{scribble:mt(mt({},e.scribble),{},{delay:0})}):mt({},e)},down:function(e){if(null!==e.scribble){var t=e.scribble,n=(t.delay,So(t,Zo));return mt(mt({},e),{},{scribble:n})}return mt({},e)}}),vt(jo,ba,{up:function(e){e.userId;return So(e,ea)},down:function(e){return mt(mt({},e),{},{userId:"user:none"})}}),vt(jo,wa,{up:function(e){return mt(mt({},e),{},{isPenMode:!1,isGridMode:!1})},down:function(e){e.isPenMode,e.isGridMode;return So(e,ta)}}),vt(jo,xa,{up:function(e){var t=e.propsForNextShape,n=t.opacity,r=So(t,na);return mt(mt({},So(e,ra)),{},{opacityForNextShape:Number(null!==n&&void 0!==n?n:"1"),propsForNextShape:r})},down:function(e){var t=e.opacityForNextShape,n=So(e,ia);return mt(mt({},n),{},{propsForNextShape:mt(mt({},n.propsForNextShape),{},{opacity:t<.175?"0.1":t<.375?"0.25":t<.625?"0.5":t<.875?"0.75":"1"})})}}),vt(jo,ka,{up:function(e){return mt(mt({},e),{},{chatMessage:"",isChatting:!1})},down:function(e){e.chatMessage,e.isChatting;return So(e,oa)}}),vt(jo,Sa,{up:function(e){return mt(mt({},e),{},{highlightedUserIds:[]})},down:function(e){e.highlightedUserIds;return So(e,aa)}}),vt(jo,_a,{up:function(e){e.propsForNextShape;return mt(mt({},So(e,sa)),{},{stylesForNextShape:{}})},down:function(e){e.stylesForNextShape;return mt(mt({},So(e,ua)),{},{propsForNextShape:{color:"black",labelColor:"black",dash:"draw",fill:"none",size:"m",icon:"file",font:"draw",align:"middle",verticalAlign:"middle",geo:"rectangle",arrowheadStart:"none",arrowheadEnd:"arrow",spline:"line"}})}}),jo)}),Ca="instance:instance",Pa=ai.refine((function(e){if(!e.startsWith("page:")&&!e.startsWith("shape:"))throw new Error('Parent ID must start with "page:" or "shape:"');return e})),Ia=Pi("shape");var ja,Ma=["croppingId"],Aa=["instanceId","cameraId"],Ta=ki("instance_page_state",bi({typeName:vi("instance_page_state"),id:Pi("instance_page_state"),pageId:Uo,selectedIds:mi(Ia),hintingIds:mi(Ia),erasingIds:mi(Ia),hoveredId:Ia.nullable(),editingId:Ia.nullable(),croppingId:Ia.nullable(),focusLayerId:Ia.nullable()})),Oa=2,Na=Eo({currentVersion:Oa,migrators:(la={},vt(la,1,{up:function(e){return mt(mt({},e),{},{croppingId:null})},down:function(e){e.croppingId;return So(e,Ma)}}),vt(la,Oa,{up:function(e){e.instanceId,e.cameraId;return So(e,Aa)},down:function(e){return mt(mt({},e),{},{instanceId:Ca,cameraId:To.createId("void")})}}),la)}),Ra=po("instance_page_state",{migrations:Na,validator:Ta,scope:"session"}).withDefaultProperties((function(){return{editingId:null,croppingId:null,selectedIds:[],hoveredId:null,erasingIds:[],hintingIds:[],focusLayerId:null}})),La=po("pointer",{validator:ki("pointer",bi({typeName:vi("pointer"),id:Pi("pointer"),x:si,y:si,lastActivityTimestamp:si})),migrations:Eo({}),scope:"session"}).withDefaultProperties((function(){return{x:0,y:0,lastActivityTimestamp:0}})),Da=La.createId("pointer"),za=["delay"],Ba=["instanceId"],Fa=["chatMessage"],Ua=ki("instance_presence",bi({typeName:vi("instance_presence"),id:Pi("instance_presence"),userId:ai,userName:ai,lastActivityTimestamp:si,followingUserId:ai.nullable(),cursor:bi({x:si,y:si,type:Lo,rotation:si}),color:ai,camera:bi({x:si,y:si,z:si}),screenBounds:No,selectedIds:mi(Pi("shape")),currentPageId:Pi("page"),brush:No.nullable(),scribble:Fo.nullable(),chatMessage:ai})),Ka=2,Va=3,Wa=Eo({currentVersion:Va,migrators:(ja={},vt(ja,1,{up:function(e){return null!==e.scribble?mt(mt({},e),{},{scribble:mt(mt({},e.scribble),{},{delay:0})}):mt({},e)},down:function(e){if(null!==e.scribble){var t=e.scribble,n=(t.delay,So(t,za));return mt(mt({},e),{},{scribble:n})}return mt({},e)}}),vt(ja,Ka,{up:function(e){e.instanceId;return So(e,Ba)},down:function(e){return mt(mt({},e),{},{instanceId:Ca})}}),vt(ja,Va,{up:function(e){return mt(mt({},e),{},{chatMessage:""})},down:function(e){e.chatMessage;return So(e,Fa)}}),ja)}),Ha=po("instance_presence",{migrations:Wa,validator:Ua,scope:"presence"}).withDefaultProperties((function(){return{lastActivityTimestamp:0,followingUserId:null,color:"#FF0000",camera:{x:0,y:0,z:1},cursor:{x:0,y:0,type:"default",rotation:0},screenBounds:{x:0,y:0,w:1,h:1},selectedIds:[],brush:null,scribble:null,chatMessage:""}})),Ya=function(e,t){return function(n){return so("instancePresence",(function(){var r=n.get(Ca),i=n.get(Ra.createId(null===r||void 0===r?void 0:r.currentPageId)),o=n.get(To.createId(null===r||void 0===r?void 0:r.currentPageId)),a=n.get(Da),s=e.value;return i&&r&&o&&a&&s?Ha.create({id:null!==t&&void 0!==t?t:Ha.createId(n.id),selectedIds:i.selectedIds,brush:r.brush,scribble:r.scribble,userId:s.id,userName:s.name,followingUserId:r.followingUserId,camera:{x:o.x,y:o.y,z:o.z},color:s.color,currentPageId:r.currentPageId,cursor:{x:a.x,y:a.y,rotation:r.cursor.rotation,type:r.cursor.type},lastActivityTimestamp:a.lastActivityTimestamp,screenBounds:r.screenBounds,chatMessage:r.chatMessage}):null}))}},qa=["name"],Xa=ki("document",bi({typeName:vi("document"),id:vi("document:document"),gridSize:si,name:ai})),$a=1,Ga=Eo({currentVersion:$a,migrators:vt({},$a,{up:function(e){return mt(mt({},e),{},{name:""})},down:function(e){e.name;return So(e,qa)}})}),Qa=po("document",{migrations:Ga,validator:Xa,scope:"document"}).withDefaultProperties((function(){return{gridSize:10,name:""}})),Ja=Qa.createId("document");function Za(e,t){return e.index<t.index?-1:e.index>t.index?1:0}function es(e){"asset"===e.typeName&&("src"in e&&(e.src="<redacted>"),"src"in e.props&&(e.props.src="<redacted>"))}var ts=function(e){var t=e.error,n=e.phase,r=e.record,i=e.recordBefore;throw Ir(t,{tags:{origin:"store.validateRecord",storePhase:n,isExistingValidationIssue:"initialize"===n},extras:{recordBefore:i?es(Xr(i)):void 0,recordAfter:es(Xr(r))}}),t};function ns(e){var t=e.query.ids("page");return function n(){if(!e.has(Ja))return e.put([Qa.create({id:Ja,name:e.props.defaultName})]),n();if(!e.has(Da))return e.put([La.create({id:Da})]),n();var r=t.value;if(0===r.size)return e.put([Ko.create({name:"Page 1",index:"a1"})]),n();var i=function(){return d(r).map((function(t){return e.get(t)})).sort(Za)[0].id},o=e.get(Ca);if(!o)return e.put([e.schema.types.instance.create({id:Ca,currentPageId:i(),exportBackground:!0})]),n();if(!r.has(o.currentPageId))return e.put([mt(mt({},o),{},{currentPageId:i()})]),n();var a,s=new Set,u=new Set,l=w(r);try{for(l.s();!(a=l.n()).done;){var c=a.value,f=Ra.createId(c);e.has(f)||s.add(f);var h=To.createId(c);e.has(h)||u.add(h)}}catch(p){l.e(p)}finally{l.f()}s.size>0&&e.put(d(s).map((function(e){return Ra.create({id:e,pageId:Ra.parseId(e)})}))),u.size>0&&e.put(d(u).map((function(e){return To.create({id:e})})))}}var rs,is,os,as,ss=ji("bookmark",bi({title:ai,description:ai,image:ai,src:ai.nullable()})),us=Eo({}),ls=["isAnimated"],cs=["width","height"],ds=["w","h"],fs=ji("image",bi({w:si,h:si,name:ai,isAnimated:hi,mimeType:ai.nullable(),src:ai.nullable()})),hs=2,ps=Eo({currentVersion:hs,migrators:(rs={},vt(rs,1,{up:function(e){return mt(mt({},e),{},{props:mt(mt({},e.props),{},{isAnimated:!1})})},down:function(e){var t=e.props,n=(t.isAnimated,So(t,ls));return mt(mt({},e),{},{props:n})}}),vt(rs,hs,{up:function(e){var t=e.props,n=t.width,r=t.height,i=So(t,cs);return mt(mt({},e),{},{props:mt({w:n,h:r},i)})},down:function(e){var t=e.props,n=t.w,r=t.h,i=So(t,ds);return mt(mt({},e),{},{props:mt({width:n,height:r},i)})}}),rs)}),vs=["isAnimated"],gs=["width","height"],ms=["w","h"],ys=ji("video",bi({w:si,h:si,name:ai,isAnimated:hi,mimeType:ai.nullable(),src:ai.nullable()})),bs=2,ws=Eo({currentVersion:bs,migrators:(is={},vt(is,1,{up:function(e){return mt(mt({},e),{},{props:mt(mt({},e.props),{},{isAnimated:!1})})},down:function(e){var t=e.props,n=(t.isAnimated,So(t,vs));return mt(mt({},e),{},{props:n})}}),vt(is,bs,{up:function(e){var t=e.props,n=t.width,r=t.height,i=So(t,gs);return mt(mt({},e),{},{props:mt({w:n,h:r},i)})},down:function(e){var t=e.props,n=t.w,r=t.h,i=So(t,ms);return mt(mt({},e),{},{props:mt({width:n,height:r},i)})}}),is)}),xs=ki("asset",xi("type",{image:fs,video:ys,bookmark:ss})),ks=po("asset",{migrations:Eo({subTypeKey:"type",subTypeMigrations:{image:ps,video:ws,bookmark:us}}),validator:xs,scope:"document"}),Ss=function(){function e(t,n,r){ne(this,e),this.id=t,this.defaultValue=n,this.type=r}return oe(e,[{key:"validate",value:function(e){return this.type.validate(e)}}],[{key:"define",value:function(t,n){var r=n.defaultValue,i=n.type;return new e(t,r,void 0===i?oi:i)}},{key:"defineEnum",value:function(e,t){var n=t.defaultValue,r=t.values;return new _s(e,n,r)}}]),e}(),_s=function(t){xt(r,t);var n=Et(r);function r(t,i,o){var a;return ne(this,r),(a=n.call(this,t,i,Ci.apply(e,d(o)))).values=o,a}return oe(r)}(Ss),Es=["isLocked"],Cs=["opacity"],Ps=["props"],Is=["opacity"],js=2,Ms=Eo({currentVersion:js,migrators:(os={},vt(os,1,{up:function(e){return mt(mt({},e),{},{isLocked:!1})},down:function(e){e.isLocked;return mt({},So(e,Es))}}),vt(os,js,{up:function(e){var t=e.props,n=t.opacity,r=So(t,Cs);return mt(mt({},So(e,Ps)),{},{opacity:Number(null!==n&&void 0!==n?n:"1"),props:r})},down:function(e){var t=e.opacity,n=So(e,Is);return mt(mt({},n),{},{props:mt(mt({},n.props),{},{opacity:t<.175?"0.1":t<.375?"0.25":t<.625?"0.5":t<.875?"0.75":"1"})})}}),os)});function As(e){return!!e&&"shape"===e.typeName}function Ts(e){return!!e&&e.startsWith("shape:")}function Os(e){return"shape:".concat(null!==e&&void 0!==e?e:fo())}function Ns(e){for(var t=new Map,n=0,r=Object.entries(e);n<r.length;n++){var i=l(r[n],2),o=i[0],a=i[1];if(a instanceof Ss){if(t.has(a))throw new Error("Duplicate style prop ".concat(a.id,". Each style prop can only be used once within a shape."));t.set(a,o)}}return t}function Rs(e){return po("shape",{migrations:Eo({currentVersion:Ms.currentVersion,firstVersion:Ms.firstVersion,migrators:Ms.migrators,subTypeKey:"type",subTypeMigrations:Fr(e,(function(e,t){var n;return null!==(n=t.migrations)&&void 0!==n?n:Eo({})}))}),scope:"document",validator:ki("shape",xi("type",Fr(e,(function(e,t){return function(e,t){return bi({id:Ia,typeName:vi("shape"),x:si,y:si,rotation:si,index:ai,parentId:Pa,type:vi(e),isLocked:hi,opacity:zo,props:t?bi(t):yi})}(e,t.props)}))))}).withDefaultProperties((function(){return{x:0,y:0,rotation:0,isLocked:!1,opacity:1}}))}var Ls=2,Ds=3,zs=4,Bs=Eo({currentVersion:zs,migrators:(as={},vt(as,1,{up:function(e){return Object.fromEntries(Object.entries(e).filter((function(e){var t=l(e,2),n=(t[0],t[1]);return"shape"!==n.typeName||"icon"!==n.type&&"code"!==n.type})))},down:function(e){return e}}),vt(as,Ls,{up:function(e){return e},down:function(e){return Object.fromEntries(Object.entries(e).filter((function(e){var t=l(e,2);t[0];return"instance_presence"!==t[1].typeName})))}}),vt(as,Ds,{up:function(e){return Object.fromEntries(Object.entries(e).filter((function(e){var t=l(e,2);t[0];return!t[1].typeName.match(/^(user|user_presence)$/)})))},down:function(e){return Object.fromEntries(Object.entries(e).filter((function(e){var t=l(e,2);t[0];return"pointer"!==t[1].typeName})))}}),vt(as,zs,{up:function(e){return Object.fromEntries(Object.entries(e).filter((function(e){var t=l(e,2);t[0];return!t[1].typeName.match("user_document")})))},down:function(e){return e}}),as)});function Fs(e){var t,n=e.shapes,r=new Map,i=w(Lr(n));try{for(i.s();!(t=i.n()).done;){var o,a,s=w(Ns(null!==(o=t.value.props)&&void 0!==o?o:{}).keys());try{for(s.s();!(a=s.n()).done;){var u=a.value;if(r.has(u.id)&&r.get(u.id)!==u)throw new Error("Multiple StyleProp instances with the same id: ".concat(u.id));r.set(u.id,u)}}catch(f){s.e(f)}finally{s.f()}}}catch(f){i.e(f)}finally{i.f()}var c=Rs(n),d=function(e){var t,n={},r=w(e);try{for(r.s();!(t=r.n()).done;){var i=l(t.value,2),o=i[0],a=i[1];n[o]=_i(a)}}catch(f){r.e(f)}finally{r.f()}var s=ki("instance",bi({typeName:vi("instance"),id:Pi("instance"),currentPageId:Uo,followingUserId:ai.nullable(),brush:No.nullable(),opacityForNextShape:zo,stylesForNextShape:bi(n),cursor:Do,scribble:Fo.nullable(),isFocusMode:hi,isDebugMode:hi,isToolLocked:hi,exportBackground:hi,screenBounds:No,zoomBrush:No.nullable(),isPenMode:hi,isGridMode:hi,chatMessage:ai,isChatting:hi,highlightedUserIds:mi(ai)}));return po("instance",{migrations:Ea,validator:s,scope:"session"}).withDefaultProperties((function(){return{followingUserId:null,opacityForNextShape:1,stylesForNextShape:{},brush:null,scribble:null,cursor:{type:"default",color:"black",rotation:0},isFocusMode:!1,exportBackground:!1,isDebugMode:!1,isToolLocked:!1,screenBounds:{x:0,y:0,w:1080,h:720},zoomBrush:null,isGridMode:!1,isPenMode:!1,chatMessage:"",isChatting:!1,highlightedUserIds:[]}}))}(r);return Mo.create({asset:ks,camera:To,document:Qa,instance:d,instance_page_state:Ra,page:Ko,shape:c,instance_presence:Ha,pointer:La},{snapshotMigrations:Bs,onValidationFailure:ts,createIntegrityChecker:ns})}var Us,Ks,Vs,Ws,Hs=["black","grey","light-violet","violet","blue","light-blue","yellow","orange","green","light-green","light-red","red"],Ys=Ss.defineEnum("tldraw:color",{defaultValue:"black",values:Hs}),qs=Ss.defineEnum("tldraw:labelColor",{defaultValue:"black",values:Hs}),Xs=Ss.defineEnum("tldraw:dash",{defaultValue:"draw",values:["draw","solid","dashed","dotted"]}),$s=Ss.defineEnum("tldraw:fill",{defaultValue:"none",values:["none","semi","solid","pattern"]}),Gs=Ss.defineEnum("tldraw:font",{defaultValue:"draw",values:["draw","sans","serif","mono"]}),Qs=Ss.defineEnum("tldraw:size",{defaultValue:"m",values:["s","m","l","xl"]}),Js=["labelColor"],Zs=["arrow","triangle","square","dot","pipe","diamond","inverted","bar","none"],eu=Ss.defineEnum("tldraw:arrowheadStart",{defaultValue:"none",values:Zs}),tu=Ss.defineEnum("tldraw:arrowheadEnd",{defaultValue:"arrow",values:Zs}),nu=xi("type",{binding:bi({type:vi("binding"),boundShapeId:Ia,normalizedAnchor:Oo,isExact:hi}),point:bi({type:vi("point"),x:si,y:si})}),ru={labelColor:qs,color:Ys,fill:$s,dash:Xs,size:Qs,arrowheadStart:eu,arrowheadEnd:tu,font:Gs,start:nu,end:nu,bend:si,text:ai},iu=1,ou=Eo({currentVersion:iu,migrators:vt({},iu,{up:function(e){return mt(mt({},e),{},{props:mt(mt({},e.props),{},{labelColor:"black"})})},down:function(e){var t=e.props,n=(t.labelColor,So(t,Js));return mt(mt({},e),{},{props:n})}})}),au=["assetId"],su={w:li,h:li,assetId:Ii.nullable(),url:ai},uu=1,lu=Eo({currentVersion:uu,migrators:vt({},uu,{up:function(e){return void 0===e.props.assetId?mt(mt({},e),{},{props:mt(mt({},e.props),{},{assetId:null})}):e},down:function(e){if(null===e.props.assetId){var t=e.props,n=(t.assetId,So(t,au));return mt(mt({},e),{},{props:n})}return e}})}),cu=["isPen"],du=bi({type:Ci("free","straight"),points:mi(Oo)}),fu={color:Ys,fill:$s,dash:Xs,size:Qs,segments:mi(du),isComplete:hi,isClosed:hi,isPen:hi},hu=1,pu=Eo({currentVersion:hu,migrators:vt({},hu,{up:function(e){var t=e.props.segments[0].points;if(0===t.length)return mt(mt({},e),{},{props:mt(mt({},e.props),{},{isPen:!1})});var n=!(0===t[0].z||.5===t[0].z);return t[1]&&(n=n&&!(0===t[1].z||.5===t[1].z)),mt(mt({},e),{},{props:mt(mt({},e.props),{},{isPen:n})})},down:function(e){var t=e.props,n=(t.isPen,So(t,cu));return mt(mt({},e),{},{props:mt({},n)})}})}),vu=["tmpOldUrl"],gu=["doesResize"],mu=["tmpOldUrl"],yu=["overridePermissions"],bu=/(^\/r\/[^/]+\/?$)/,wu=function(e){try{return new URL(e)}catch(t){return}},xu=[{type:"tldraw",title:"tldraw",hostnames:["beta.tldraw.com","lite.tldraw.com","www.tldraw.com"],minWidth:300,minHeight:300,width:720,height:500,doesResize:!0,canUnmount:!0,toEmbedUrl:function(e){var t=wu(e);if(t&&t.pathname.match(bu))return e},fromEmbedUrl:function(e){var t=wu(e);if(t&&t.pathname.match(bu))return e}},{type:"codesandbox",title:"CodeSandbox",hostnames:["codesandbox.io"],minWidth:300,minHeight:300,width:720,height:500,doesResize:!0,canUnmount:!1,toEmbedUrl:function(e){var t=wu(e),n=t&&t.pathname.match(/\/s\/([^/]+)\/?/);if(n)return"https://codesandbox.io/embed/".concat(n[1])},fromEmbedUrl:function(e){var t=wu(e),n=t&&t.pathname.match(/\/embed\/([^/]+)\/?/);if(n)return"https://codesandbox.io/s/".concat(n[1])}},{type:"codepen",title:"Codepen",hostnames:["codepen.io"],minWidth:300,minHeight:300,width:520,height:400,doesResize:!0,canUnmount:!1,toEmbedUrl:function(e){var t=e.match(/https:\/\/codepen.io\/([^/]+)\/pen\/([^/]+)/);if(t){var n=l(t,3),r=(n[0],n[1]),i=n[2];return"https://codepen.io/".concat(r,"/embed/").concat(i)}},fromEmbedUrl:function(e){var t=e.match(/https:\/\/codepen.io\/([^/]+)\/embed\/([^/]+)/);if(t){var n=l(t,3),r=(n[0],n[1]),i=n[2];return"https://codepen.io/".concat(r,"/pen/").concat(i)}}},{type:"scratch",title:"Scratch",hostnames:["scratch.mit.edu"],width:520,height:400,doesResize:!1,canUnmount:!1,toEmbedUrl:function(e){var t=e.match(/https?:\/\/scratch.mit.edu\/projects\/([^/]+)/);if(t){var n=l(t,2),r=(n[0],n[1]);return"https://scratch.mit.edu/projects/embed/".concat(r)}},fromEmbedUrl:function(e){var t=e.match(/https:\/\/scratch.mit.edu\/projects\/embed\/([^/]+)/);if(t){var n=l(t,2),r=(n[0],n[1]);return"https://scratch.mit.edu/projects/".concat(r)}}},{type:"youtube",title:"YouTube",hostnames:["*.youtube.com","youtube.com","youtu.be"],width:800,height:450,doesResize:!0,canUnmount:!1,overridePermissions:{"allow-presentation":!0},isAspectRatioLocked:!0,toEmbedUrl:function(e){var t=wu(e);if(t){var n=t.hostname.replace(/^www./,"");if("youtu.be"===n){var r=t.pathname.split("/").filter(Boolean)[0];return"https://www.youtube.com/embed/".concat(r)}if(("youtube.com"===n||"m.youtube.com"===n)&&t.pathname.match(/^\/watch/)){var i=t.searchParams.get("v");return"https://www.youtube.com/embed/".concat(i)}}},fromEmbedUrl:function(e){var t=wu(e);if(t&&"youtube.com"===t.hostname.replace(/^www./,"")){var n=t.pathname.match(/^\/embed\/([^/]+)\/?/);if(n)return"https://www.youtube.com/watch?v=".concat(n[1])}}},{type:"figma",title:"Figma",hostnames:["figma.com"],width:720,height:500,doesResize:!0,canUnmount:!0,toEmbedUrl:function(e){if(e.match(/https:\/\/([\w\.-]+\.)?figma.com\/(file|proto)\/([0-9a-zA-Z]{22,128})(?:\/.*)?$/)&&!e.includes("figma.com/embed"))return"https://www.figma.com/embed?embed_host=share&url=".concat(e)},fromEmbedUrl:function(e){var t=wu(e);if(t&&t.pathname.match(/^\/embed\/?$/)){var n=t.searchParams.get("url");if(n)return n}}},{type:"google_maps",title:"Google Maps",hostnames:["google.*"],width:720,height:500,doesResize:!0,canUnmount:!1,toEmbedUrl:function(e){if(e.includes("/maps/")){var t,n=e.match(/@(.*),(.*),(.*)z/);if(n){var r=l(n,4),i=r[1],o=r[2],a=r[3],s=new URL(e).host.replace("www.","");t="https://".concat(s,"/maps/embed/v1/view?key=").concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.NEXT_PUBLIC_GC_API_KEY,"&center=").concat(i,",").concat(o,"&zoom=").concat(a)}else t="";return t}},fromEmbedUrl:function(e){var t=wu(e);if(t&&(t.pathname.match(/^\/maps\/embed\/v1\/view\/?$/)&&t.searchParams.has("center")&&t.searchParams.get("zoom"))){var n=t.searchParams.get("zoom"),r=l(t.searchParams.get("center").split(","),2),i=r[0],o=r[1];return"https://www.google.com/maps/@".concat(i,",").concat(o,",").concat(n,"z")}}},{type:"google_calendar",title:"Google Calendar",hostnames:["calendar.google.*"],width:720,height:500,minWidth:460,minHeight:360,doesResize:!0,canUnmount:!1,instructionLink:"https://support.google.com/calendar/answer/41207?hl=en",toEmbedUrl:function(e){var t=wu(e),n=null===t||void 0===t?void 0:t.searchParams.get("cid");if(null!==t&&void 0!==t&&t.pathname.match(/\/calendar\/u\/0/)&&n){t.pathname="/calendar/embed";for(var r=0,i=Array.from(t.searchParams.keys());r<i.length;r++){var o=i[r];t.searchParams.delete(o)}return t.searchParams.set("src",n),t.href}},fromEmbedUrl:function(e){var t=wu(e),n=null===t||void 0===t?void 0:t.searchParams.get("src");if(null!==t&&void 0!==t&&t.pathname.match(/\/calendar\/embed/)&&n){t.pathname="/calendar/u/0";for(var r=0,i=Array.from(t.searchParams.keys());r<i.length;r++){var o=i[r];t.searchParams.delete(o)}return t.searchParams.set("cid",n),t.href}}},{type:"google_slides",title:"Google Slides",hostnames:["docs.google.*"],width:720,height:500,minWidth:460,minHeight:360,doesResize:!0,canUnmount:!1,toEmbedUrl:function(e){var t=wu(e);if(null!==t&&void 0!==t&&t.pathname.match(/^\/presentation/)&&null!==t&&void 0!==t&&t.pathname.match(/\/pub\/?$/)){t.pathname=t.pathname.replace(/\/pub$/,"/embed");for(var n=0,r=Array.from(t.searchParams.keys());n<r.length;n++){var i=r[n];t.searchParams.delete(i)}return t.href}},fromEmbedUrl:function(e){var t=wu(e);if(null!==t&&void 0!==t&&t.pathname.match(/^\/presentation/)&&null!==t&&void 0!==t&&t.pathname.match(/\/embed\/?$/)){t.pathname=t.pathname.replace(/\/embed$/,"/pub");for(var n=0,r=Array.from(t.searchParams.keys());n<r.length;n++){var i=r[n];t.searchParams.delete(i)}return t.href}}},{type:"github_gist",title:"GitHub Gist",hostnames:["gist.github.com"],width:720,height:500,doesResize:!0,canUnmount:!0,toEmbedUrl:function(e){var t=wu(e);if(t&&t.pathname.match(/\/([^/]+)\/([^/]+)/)){if(!e.split("/").pop())return;return e}},fromEmbedUrl:function(e){var t=wu(e);if(t&&t.pathname.match(/\/([^/]+)\/([^/]+)/)){if(!e.split("/").pop())return;return e}}},{type:"replit",title:"Replit",hostnames:["replit.com"],width:720,height:500,doesResize:!0,canUnmount:!1,toEmbedUrl:function(e){var t=wu(e);if(t&&t.pathname.match(/\/@([^/]+)\/([^/]+)/))return"".concat(e,"?embed=true")},fromEmbedUrl:function(e){var t=wu(e);if(t&&t.pathname.match(/\/@([^/]+)\/([^/]+)/)&&t.searchParams.has("embed"))return t.searchParams.delete("embed"),t.href}},{type:"felt",title:"Felt",hostnames:["felt.com"],width:720,height:500,doesResize:!0,canUnmount:!1,toEmbedUrl:function(e){var t=wu(e);if(t&&t.pathname.match(/^\/map\//))return t.origin+"/embed"+t.pathname},fromEmbedUrl:function(e){var t=wu(e);if(t&&t.pathname.match(/^\/embed\/map\//))return t.pathname=t.pathname.replace(/^\/embed/,""),t.href}},{type:"spotify",title:"Spotify",hostnames:["open.spotify.com"],width:720,height:500,minHeight:500,overrideOutlineRadius:12,doesResize:!0,canUnmount:!1,toEmbedUrl:function(e){var t=wu(e);if(t&&t.pathname.match(/^\/(artist|album)\//))return t.origin+"/embed"+t.pathname},fromEmbedUrl:function(e){var t=wu(e);if(t&&t.pathname.match(/^\/embed\/(artist|album)\//))return t.origin+t.pathname.replace(/^\/embed/,"")}},{type:"vimeo",title:"Vimeo",hostnames:["vimeo.com","player.vimeo.com"],width:640,height:360,doesResize:!0,canUnmount:!1,isAspectRatioLocked:!0,toEmbedUrl:function(e){var t=wu(e);if(t&&"vimeo.com"===t.hostname&&t.pathname.match(/^\/[0-9]+/))return"https://player.vimeo.com/video/"+t.pathname.split("/")[1]+"?title=0&byline=0"},fromEmbedUrl:function(e){var t=wu(e);if(t&&"player.vimeo.com"===t.hostname){var n=t.pathname.match(/^\/video\/([^/]+)\/?$/);if(n)return"https://vimeo.com/"+n[1]}}},{type:"excalidraw",title:"Excalidraw",hostnames:["excalidraw.com"],width:720,height:500,doesResize:!0,canUnmount:!1,isAspectRatioLocked:!0,toEmbedUrl:function(e){var t=wu(e);if(t&&t.hash.match(/#room=/))return e},fromEmbedUrl:function(e){var t=wu(e);if(t&&t.hash.match(/#room=/))return e}},{type:"observable",title:"Observable",hostnames:["observablehq.com"],width:720,height:500,doesResize:!0,canUnmount:!1,isAspectRatioLocked:!1,backgroundColor:"#fff",toEmbedUrl:function(e){var t=wu(e);if(t&&t.pathname.match(/^\/@([^/]+)\/([^/]+)\/?$/))return"".concat(t.origin,"/embed").concat(t.pathname,"?cell=*");if(t&&t.pathname.match(/^\/d\/([^/]+)\/?$/)){var n=t.pathname.replace(/^\/d/,"");return"".concat(t.origin,"/embed").concat(n,"?cell=*")}},fromEmbedUrl:function(e){var t=wu(e);return t&&t.pathname.match(/^\/embed\/@([^/]+)\/([^/]+)\/?$/)?"".concat(t.origin).concat(t.pathname.replace("/embed",""),"#cell-*"):t&&t.pathname.match(/^\/embed\/([^/]+)\/?$/)?"".concat(t.origin).concat(t.pathname.replace("/embed","/d"),"#cell-*"):void 0}}],ku={"allow-downloads-without-user-activation":!1,"allow-downloads":!1,"allow-modals":!1,"allow-orientation-lock":!1,"allow-pointer-lock":!1,"allow-popups":!0,"allow-popups-to-escape-sandbox":!1,"allow-presentation":!1,"allow-storage-access-by-user-activation":!1,"allow-top-navigation":!1,"allow-top-navigation-by-user-activation":!1,"allow-scripts":!0,"allow-same-origin":!0,"allow-forms":!0},Su={w:li,h:li,url:ai},_u=2,Eu=3,Cu=4,Pu=Eo({currentVersion:Cu,migrators:(Us={},vt(Us,1,{up:function(e){for(var t,n,r=e.props.url,i=new URL(r).host.replace("www.",""),o=0,a=xu;o<a.length;o++){var s=a[o];if(s.hostnames.includes(i))try{n=s.fromEmbedUrl(r)}catch(u){console.warn(u)}}return mt(mt({},e),{},{props:mt(mt({},e.props),{},{tmpOldUrl:e.props.url,url:null!==(t=n)&&void 0!==t?t:""})})},down:function(e){var t,n=e.props.tmpOldUrl;if(!n||""===n)for(var r=e.props.url,i=new URL(r).host.replace("www.",""),o=0,a=xu;o<a.length;o++){var s=a[o];if(s.hostnames.includes(i))try{n=s.toEmbedUrl(r)}catch(c){console.warn(c)}}var u=e.props,l=(u.tmpOldUrl,So(u,vu));return mt(mt({},e),{},{props:mt(mt({},l),{},{url:null!==(t=n)&&void 0!==t?t:""})})}}),vt(Us,_u,{up:function(e){var t=e.props,n=(t.doesResize,So(t,gu));return mt(mt({},e),{},{props:mt({},n)})},down:function(e){return mt(mt({},e),{},{props:mt(mt({},e.props),{},{doesResize:!0})})}}),vt(Us,Eu,{up:function(e){var t=e.props,n=(t.tmpOldUrl,So(t,mu));return mt(mt({},e),{},{props:mt({},n)})},down:function(e){return mt(mt({},e),{},{props:mt({},e.props)})}}),vt(Us,Cu,{up:function(e){var t=e.props,n=(t.overridePermissions,So(t,yu));return mt(mt({},e),{},{props:mt({},n)})},down:function(e){return mt(mt({},e),{},{props:mt({},e.props)})}}),Us)}),Iu={w:li,h:li,name:ai},ju=Eo({}),Mu=Ss.defineEnum("tldraw:horizontalAlign",{defaultValue:"middle",values:["start","middle","end","start-legacy","end-legacy","middle-legacy"]}),Au=Ss.defineEnum("tldraw:verticalAlign",{defaultValue:"middle",values:["start","middle","end"]}),Tu=["url"],Ou=["labelColor"],Nu=["verticalAlign"],Ru=Ss.defineEnum("tldraw:geo",{defaultValue:"rectangle",values:["rectangle","ellipse","triangle","diamond","pentagon","hexagon","octagon","star","rhombus","rhombus-2","oval","trapezoid","arrow-right","arrow-left","arrow-up","arrow-down","x-box","check-box"]}),Lu={geo:Ru,labelColor:qs,color:Ys,fill:$s,dash:Xs,size:Qs,font:Gs,align:Mu,verticalAlign:Au,url:ai,w:li,h:li,growY:ui,text:ai},Du=2,zu=3,Bu=4,Fu=5,Uu=6,Ku=Eo({currentVersion:Uu,migrators:(Ks={},vt(Ks,1,{up:function(e){return mt(mt({},e),{},{props:mt(mt({},e.props),{},{url:""})})},down:function(e){var t=e.props,n=(t.url,So(t,Tu));return mt(mt({},e),{},{props:n})}}),vt(Ks,Du,{up:function(e){return mt(mt({},e),{},{props:mt(mt({},e.props),{},{labelColor:"black"})})},down:function(e){var t=e.props,n=(t.labelColor,So(t,Ou));return mt(mt({},e),{},{props:n})}}),vt(Ks,zu,{up:function(e){var t=e.props.align;return"justify"===t&&(t="start"),mt(mt({},e),{},{props:mt(mt({},e.props),{},{align:t})})},down:function(e){return mt({},e)}}),vt(Ks,Bu,{up:function(e){return mt({},e)},down:function(e){return mt(mt({},e),{},{props:mt(mt({},e.props),{},{geo:"check-box"===e.props.geo?"rectangle":e.props.geo})})}}),vt(Ks,Fu,{up:function(e){return mt(mt({},e),{},{props:mt(mt({},e.props),{},{verticalAlign:"middle"})})},down:function(e){var t=e.props,n=(t.verticalAlign,So(t,Nu));return mt(mt({},e),{},{props:n})}}),vt(Ks,Uu,{up:function(e){var t;switch(e.props.align){case"start":t="start-legacy";break;case"end":t="end-legacy";break;default:t="middle-legacy"}return mt(mt({},e),{},{props:mt(mt({},e.props),{},{align:t})})},down:function(e){var t;switch(e.props.align){case"start-legacy":t="start";break;case"end-legacy":t="end";break;case"middle-legacy":t="middle";break;default:t=e.props.align}return mt(mt({},e),{},{props:mt(mt({},e.props),{},{align:t})})}}),Ks)}),Vu=Eo({}),Wu={color:Ys,size:Qs,segments:mi(du),isComplete:hi,isPen:hi},Hu=Eo({}),Yu=["url"],qu=["crop"],Xu=bi({topLeft:Oo,bottomRight:Oo}),$u={w:li,h:li,playing:hi,url:ai,assetId:Ii.nullable(),crop:Xu.nullable()},Gu=2,Qu=Eo({currentVersion:Gu,migrators:(Vs={},vt(Vs,1,{up:function(e){return mt(mt({},e),{},{props:mt(mt({},e.props),{},{url:""})})},down:function(e){var t=e.props,n=(t.url,So(t,Yu));return mt(mt({},e),{},{props:n})}}),vt(Vs,Gu,{up:function(e){return mt(mt({},e),{},{props:mt(mt({},e.props),{},{crop:null})})},down:function(e){var t=e.props,n=(t.crop,So(t,qu));return mt(mt({},e),{},{props:n})}}),Vs)}),Ju=bi({id:ai,type:Si(new Set(["vertex","virtual","create"])),canBind:hi.optional(),index:ai,x:si,y:si}),Zu=Ss.defineEnum("tldraw:spline",{defaultValue:"line",values:["cubic","line"]}),el={color:Ys,dash:Xs,size:Qs,spline:Zu,handles:wi(ai,Ju)},tl=Eo({}),nl=["url"],rl=["verticalAlign"],il={color:Ys,size:Qs,font:Gs,align:Mu,verticalAlign:Au,growY:ui,url:ai,text:ai},ol=2,al=3,sl=4,ul=Eo({currentVersion:sl,migrators:(Ws={},vt(Ws,1,{up:function(e){return mt(mt({},e),{},{props:mt(mt({},e.props),{},{url:""})})},down:function(e){var t=e.props,n=(t.url,So(t,nl));return mt(mt({},e),{},{props:n})}}),vt(Ws,ol,{up:function(e){var t=e.props.align;return"justify"===t&&(t="start"),mt(mt({},e),{},{props:mt(mt({},e.props),{},{align:t})})},down:function(e){return mt({},e)}}),vt(Ws,al,{up:function(e){var t;switch(e.props.align){case"start":t="start-legacy";break;case"end":t="end-legacy";break;default:t="middle-legacy"}return mt(mt({},e),{},{props:mt(mt({},e.props),{},{align:t})})},down:function(e){var t;switch(e.props.align){case"start-legacy":t="start";break;case"end-legacy":t="end";break;case"middle-legacy":t="middle";break;default:t=e.props.align}return mt(mt({},e),{},{props:mt(mt({},e.props),{},{align:t})})}}),vt(Ws,sl,{up:function(e){return mt(mt({},e),{},{props:mt(mt({},e.props),{},{verticalAlign:"middle"})})},down:function(e){var t=e.props,n=(t.verticalAlign,So(t,rl));return mt(mt({},e),{},{props:n})}}),Ws)}),ll={color:Ys,size:Qs,font:Gs,align:Mu,w:li,text:ai,scale:li,autoSize:hi},cl=1,dl=Eo({currentVersion:cl,migrators:vt({},cl,{up:function(e){var t=e.props.align;return"justify"===t&&(t="start"),mt(mt({},e),{},{props:mt(mt({},e.props),{},{align:t})})},down:function(e){return mt({},e)}})}),fl=["url"],hl={w:li,h:li,time:si,playing:hi,url:ai,assetId:Ii.nullable()},pl=1,vl=Eo({currentVersion:pl,migrators:vt({},pl,{up:function(e){return mt(mt({},e),{},{props:mt(mt({},e.props),{},{url:""})})},down:function(e){var t=e.props,n=(t.url,So(t,fl));return mt(mt({},e),{},{props:n})}})}),gl=[{locale:"ar",label:"\u0639\u0631\u0628\u064a"},{locale:"ca",label:"Catal\xe0"},{locale:"da",label:"Danish"},{locale:"de",label:"Deutsch"},{locale:"en",label:"English"},{locale:"es",label:"Espa\xf1ol"},{locale:"fa",label:"\u0641\u0627\u0631\u0633\u06cc"},{locale:"fi",label:"Suomi"},{locale:"fr",label:"Fran\xe7ais"},{locale:"gl",label:"Galego"},{locale:"he",label:"\u05e2\u05d1\u05e8\u05d9\u05ea"},{locale:"it",label:"Italiano"},{locale:"ja",label:"\u65e5\u672c\u8a9e"},{locale:"ko-kr",label:"\ud55c\uad6d\uc5b4"},{locale:"ku",label:"\u06a9\u0648\u0631\u062f\u06cc"},{locale:"hi-in",label:"\u0939\u093f\u0928\u094d\u0926\u0940"},{locale:"hu",label:"Magyar"},{locale:"my",label:"\u1019\u103c\u1014\u103a\u1019\u102c\u1005\u102c"},{locale:"ne",label:"\u0928\u0947\u092a\u093e\u0932\u0940"},{locale:"no",label:"Norwegian"},{locale:"pl",label:"Polski"},{locale:"pt-br",label:"Portugu\xeas - Brasil"},{locale:"pt-pt",label:"Portugu\xeas - Europeu"},{locale:"ro",label:"Rom\xe2n\u0103"},{locale:"ru",label:"Russian"},{locale:"sv",label:"Svenska"},{locale:"te",label:"\u0c24\u0c46\u0c32\u0c41\u0c17\u0c41"},{locale:"th",label:"\u0e20\u0e32\u0e29\u0e32\u0e44\u0e17\u0e22"},{locale:"tr",label:"T\xfcrk\xe7e"},{locale:"uk",label:"Ukrainian"},{locale:"vi",label:"Ti\u1ebfng Vi\u1ec7t"},{locale:"zh-cn",label:"Chinese - Simplified"},{locale:"zh-tw",label:"\u7e41\u9ad4\u4e2d\u6587 (\u53f0\u7063)"}];function ml(){var e;return function(e){var t,n=w(e);try{for(n.s();!(t=n.n()).done;){var r=bl(t.value);if(r)return r}}catch(i){n.e(i)}finally{n.f()}return"en"}("undefined"!==typeof window&&null!==(e=window.navigator.languages)&&void 0!==e?e:["en"])}var yl={zh:"zh-cn",pt:"pt-br",ko:"ko-kr",hi:"hi-in"};function bl(e){var t=gl.find((function(t){return t.locale===e.toLowerCase()}));if(t)return t.locale;var n=e.split(/[-_]/).map((function(e){return e.toLowerCase()})),r=l(n,2),i=r[0];if(r[1]){var o=gl.find((function(e){return e.locale===i}));if(o)return o.locale}return i in yl?yl[i]:null}var wl="2.0.0-canary.4b8491d388aa",xl={fonts:{draw:"https://unpkg.com/@tldraw/assets@".concat(wl,"/fonts/Shantell_Sans-Normal-SemiBold.woff2"),serif:"https://unpkg.com/@tldraw/assets@".concat(wl,"/fonts/IBMPlexSerif-Medium.woff2"),sansSerif:"https://unpkg.com/@tldraw/assets@".concat(wl,"/fonts/IBMPlexSans-Medium.woff2"),monospace:"https://unpkg.com/@tldraw/assets@".concat(wl,"/fonts/IBMPlexMono-Medium.woff2")}};var kl=n(1694);function Sl(e,n){var r=t.useRef(n);r.current=n;var i=l(t.useMemo((function(){var t=null,n=new uo("useStateTracking(".concat(e,")"),(function(){var e;return null===(e=r.current)||void 0===e?void 0:e.call(r)}),{scheduleEffect:function(){var e;null===(e=t)||void 0===e||e()}});return[n,function(e){return t=e,function(){t=null}},function(){return n.scheduleCount}]}),[e]),3),o=i[0],a=i[1],s=i[2];return t.useSyncExternalStore(a,s,s),t.useEffect((function(){return o.attach(),o.maybeScheduleEffect(),function(){o.detach()}}),[o]),o.execute()}var _l={apply:function(e,t,n){var r,i;return Sl(null!==(r=null!==(i=e.displayName)&&void 0!==i?i:e.name)&&void 0!==r?r:"tracked(???)",(function(){return e.apply(t,n)}))}},El=Symbol.for("react.memo"),Cl=Symbol.for("react.forward_ref");function Pl(e){var n=null,r=e.$$typeof;return r===El&&(n=(e=e.type).compare),r===Cl?(0,t.memo)((0,t.forwardRef)(new Proxy(e.render,_l))):(0,t.memo)(new Proxy(e,_l),n)}function Il(){var e=arguments,n=3===e.length?e[2]:[e[0]],r=3===e.length?e[0]:"useValue(".concat(e[0].name,")"),i=(0,t.useMemo)((function(){return 1===e.length?e[0]:so(r,e[1])}),n),o=(0,t.useMemo)((function(){return{subscribe:function(e){return lo("useValue(".concat(r,")"),(function(){i.value,e()}))},getSnapshot:function(){return i.value}}}),[i]),a=o.subscribe,s=o.getSnapshot;return(0,t.useSyncExternalStore)(a,s,s)}Symbol.for("react.memo"),Symbol.for("react.forward_ref");var jl=t.createContext({}),Ml=function(){return t.useContext(jl)},Al={openWindow:function(e,t){return window.open(e,t,"noopener noreferrer")},refreshPage:function(){return window.location.reload()},hardReset:function(){var e=b(m().mark((function e(){var t,n;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=(n=window).__tldraw__hardReset)||void 0===t?void 0:t.call(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()};function Tl(){Al.hardReset()}var Ol={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:(4-2*e)*e-1},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e},easeInSine:function(e){return 1-Math.cos(e*Math.PI/2)},easeOutSine:function(e){return Math.sin(e*Math.PI/2)},easeInOutSine:function(e){return-(Math.cos(Math.PI*e)-1)/2},easeInExpo:function(e){return e<=0?0:Math.pow(2,10*e-10)},easeOutExpo:function(e){return e>=1?1:1-Math.pow(2,-10*e)},easeInOutExpo:function(e){return e<=0?0:e>=1?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2}},Nl=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;ne(this,e),this.x=t,this.y=n,this.z=r}return oe(e,[{key:"pressure",get:function(){return this.z}},{key:"set",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.x,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.y,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.z;return this.x=e,this.y=t,this.z=n,this}},{key:"setTo",value:function(e){var t=e.x,n=void 0===t?0:t,r=e.y,i=void 0===r?0:r,o=e.z,a=void 0===o?1:o;return this.x=n,this.y=i,this.z=a,this}},{key:"rot",value:function(e){if(0===e)return this;var t=this.x,n=this.y,r=Math.sin(e),i=Math.cos(e);return this.x=t*i-n*r,this.y=t*r+n*i,this}},{key:"rotWith",value:function(e,t){if(0===t)return this;var n=this.x-e.x,r=this.y-e.y,i=Math.sin(t),o=Math.cos(t);return this.x=e.x+(n*o-r*i),this.y=e.y+(n*i+r*o),this}},{key:"clone",value:function(){return new e(this.x,this.y,this.z)}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this}},{key:"subXY",value:function(e,t){return this.x-=e,this.y-=t,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this}},{key:"addXY",value:function(e,t){return this.x+=e,this.y+=t,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this}},{key:"clamp",value:function(e,t){return this.x=Math.max(this.x,e),this.y=Math.max(this.y,e),void 0!==t&&(this.x=Math.min(this.x,t),this.y=Math.min(this.y,t)),this}},{key:"div",value:function(e){return this.x/=e,this.y/=e,this}},{key:"divV",value:function(e){return this.x/=e.x,this.y/=e.y,this}},{key:"mul",value:function(e){return this.x*=e,this.y*=e,this}},{key:"mulV",value:function(e){return this.x*=e.x,this.y*=e.y,this}},{key:"abs",value:function(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this}},{key:"nudge",value:function(t,n){var r=e.Tan(t,this);return this.add(r.mul(n))}},{key:"neg",value:function(){return this.x*=-1,this.y*=-1,this}},{key:"cross",value:function(e){return this.x=this.y*e.z-this.z*e.y,this.y=this.z*e.x-this.x*e.z,this}},{key:"dpr",value:function(t){return e.Dpr(this,t)}},{key:"cpr",value:function(t){return e.Cpr(this,t)}},{key:"len2",value:function(){return e.Len2(this)}},{key:"len",value:function(){return e.Len(this)}},{key:"pry",value:function(t){return e.Pry(this,t)}},{key:"per",value:function(){var e=this.x,t=this.y;return this.x=t,this.y=-e,this}},{key:"uni",value:function(){return e.Uni(this)}},{key:"tan",value:function(t){return e.Tan(this,t)}},{key:"dist",value:function(t){return e.Dist(this,t)}},{key:"distanceToLineSegment",value:function(t,n){return e.DistanceToLineSegment(t,n,this)}},{key:"slope",value:function(t){return e.Slope(this,t)}},{key:"snapToGrid",value:function(e){return this.x=Math.round(this.x/e)*e,this.y=Math.round(this.y/e)*e,this}},{key:"angle",value:function(t){return e.Angle(this,t)}},{key:"toAngle",value:function(){return e.ToAngle(this)}},{key:"lrp",value:function(e,t){return this.x=this.x+(e.x-this.x)*t,this.y=this.y+(e.y-this.y)*t,this}},{key:"equals",value:function(t){return e.Equals(this,t)}},{key:"equalsXY",value:function(t,n){return e.EqualsXY(this,t,n)}},{key:"norm",value:function(){var e=this.len();return this.x=0===e?0:this.x/e,this.y=0===e?0:this.y/e,this}},{key:"toFixed",value:function(){return e.ToFixed(this)}},{key:"toString",value:function(){return e.ToString(e.ToFixed(this))}},{key:"toJson",value:function(){return e.ToJson(this)}},{key:"toArray",value:function(){return e.ToArray(this)}}],[{key:"Add",value:function(t,n){return new e(t.x+n.x,t.y+n.y)}},{key:"AddXY",value:function(t,n,r){return new e(t.x+n,t.y+r)}},{key:"Sub",value:function(t,n){return new e(t.x-n.x,t.y-n.y)}},{key:"SubXY",value:function(t,n,r){return new e(t.x-n,t.y-r)}},{key:"AddScalar",value:function(t,n){return new e(t.x+n,t.y+n)}},{key:"SubScalar",value:function(t,n){return new e(t.x-n,t.y-n)}},{key:"Div",value:function(t,n){return new e(t.x/n,t.y/n)}},{key:"Mul",value:function(t,n){return new e(t.x*n,t.y*n)}},{key:"DivV",value:function(t,n){return new e(t.x/n.x,t.y/n.y)}},{key:"MulV",value:function(t,n){return new e(t.x*n.x,t.y*n.y)}},{key:"Neg",value:function(t){return new e(-t.x,-t.y)}},{key:"Per",value:function(t){return new e(t.y,-t.x)}},{key:"Dist2",value:function(t,n){return e.Sub(t,n).len2()}},{key:"Abs",value:function(t){return new e(Math.abs(t.x),Math.abs(t.y))}},{key:"Dist",value:function(e,t){return Math.hypot(e.y-t.y,e.x-t.x)}},{key:"Dpr",value:function(e,t){return e.x*t.x+e.y*t.y}},{key:"Cross",value:function(t,n){return new e(t.y*n.z-t.z*n.y,t.z*n.x-t.x*n.z)}},{key:"Cpr",value:function(e,t){return e.x*t.y-t.x*e.y}},{key:"Len2",value:function(e){return e.x*e.x+e.y*e.y}},{key:"Len",value:function(t){return Math.sqrt(e.Len2(t))}},{key:"Pry",value:function(t,n){return e.Dpr(t,n)/e.Len(n)}},{key:"Uni",value:function(t){return e.Div(t,e.Len(t))}},{key:"Tan",value:function(t,n){return e.Uni(e.Sub(t,n))}},{key:"Min",value:function(t,n){return new e(Math.min(t.x,n.x),Math.min(t.y,n.y))}},{key:"Max",value:function(t,n){return new e(Math.max(t.x,n.x),Math.max(t.y,n.y))}},{key:"From",value:function(t){var n=t.x,r=t.y,i=t.z;return new e(n,r,void 0===i?1:i)}},{key:"FromArray",value:function(t){return new e(t[0],t[1])}},{key:"Rot",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=Math.sin(n),i=Math.cos(n);return new e(t.x*i-t.y*r,t.x*r+t.y*i)}},{key:"RotWith",value:function(t,n,r){var i=t.x-n.x,o=t.y-n.y,a=Math.sin(r),s=Math.cos(r);return new e(n.x+(i*s-o*a),n.y+(i*a+o*s))}},{key:"NearestPointOnLineThroughPoint",value:function(t,n,r){return e.Mul(n,e.Sub(r,t).pry(n)).add(t)}},{key:"NearestPointOnLineSegment",value:function(t,n,r){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=e.Tan(n,t),a=e.Add(t,e.Mul(o,e.Sub(r,t).pry(o)));if(i){if(a.x<Math.min(t.x,n.x))return e.Cast(t.x<n.x?t:n);if(a.x>Math.max(t.x,n.x))return e.Cast(t.x>n.x?t:n);if(a.y<Math.min(t.y,n.y))return e.Cast(t.y<n.y?t:n);if(a.y>Math.max(t.y,n.y))return e.Cast(t.y>n.y?t:n)}return a}},{key:"DistanceToLineThroughPoint",value:function(t,n,r){return e.Dist(r,e.NearestPointOnLineThroughPoint(t,n,r))}},{key:"DistanceToLineSegment",value:function(t,n,r){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return e.Dist(r,e.NearestPointOnLineSegment(t,n,r,i))}},{key:"Snap",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new e(Math.round(t.x/n)*n,Math.round(t.y/n)*n)}},{key:"Cast",value:function(t){return t instanceof e?t:e.From(t)}},{key:"Slope",value:function(e,t){return e.x===t.y?NaN:(e.y-t.y)/(e.x-t.x)}},{key:"Angle",value:function(e,t){return Math.atan2(t.y-e.y,t.x-e.x)}},{key:"Lrp",value:function(t,n,r){return e.Sub(n,t).mul(r).add(t)}},{key:"Med",value:function(t,n){return new e((t.x+n.x)/2,(t.y+n.y)/2)}},{key:"Equals",value:function(e,t){return Math.abs(e.x-t.x)<1e-4&&Math.abs(e.y-t.y)<1e-4}},{key:"EqualsXY",value:function(e,t,n){return e.x===t&&e.y===n}},{key:"Clockwise",value:function(e,t,n){return(n.x-e.x)*(t.y-e.y)-(t.x-e.x)*(n.y-e.y)<0}},{key:"Rescale",value:function(t,n){var r=e.Len(t);return new e(n*t.x/r,n*t.y/r)}},{key:"ScaleWithOrigin",value:function(t,n,r){return e.Sub(t,r).mul(n).add(r)}},{key:"ToFixed",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return new e(+t.x.toFixed(n),+t.y.toFixed(n),+t.z.toFixed(n))}},{key:"Nudge",value:function(t,n,r){return e.Add(t,e.Tan(n,t).mul(r))}},{key:"ToString",value:function(e){return"".concat(e.x,", ").concat(e.y)}},{key:"ToAngle",value:function(e){var t=Math.atan2(e.y,e.x);return t<0&&(t+=2*Math.PI),t}},{key:"ToArray",value:function(e){return[e.x,e.y,e.z]}},{key:"ToJson",value:function(e){return{x:e.x,y:e.y,z:e.z}}},{key:"Average",value:function(t){for(var n=t.length,r=new e(0,0),i=0;i<n;i++)r.add(t[i]);return r.div(n)}},{key:"Clamp",value:function(t,n,r){return void 0===r?new e(Math.min(Math.max(t.x,n)),Math.min(Math.max(t.y,n))):new e(Math.min(Math.max(t.x,n),r),Math.min(Math.max(t.y,n),r))}},{key:"PointsBetween",value:function(t,n){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,i=[],o=0;o<r;o++){var a=Ol.easeInQuad(o/(r-1)),s=e.Lrp(t,n,a);s.z=Math.min(1,.5+.65*Math.abs(.5-Rl(a))),i.push(s)}return i}},{key:"SnapToGrid",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;return new e(Math.round(t.x/n)*n,Math.round(t.y/n)*n)}}]),e}(),Rl=function(e){return e<.5?2*e*e:(4-2*e)*e-1},Ll=Math.PI,Dl=Ll/2,zl=2*Ll,Bl=Math.PI/180,Fl=Math.sin;function Ul(e,t,n){return Math.max(t,"undefined"!==typeof n?Math.min(e,n):e)}function Kl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e10;return e?Math.round(e*t)/t:0}function Vl(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-6;return Math.abs(e-t)<=n}function Wl(e,t){var n=Math.pow(e-t,2)/Math.pow(e+t,2);return Ll*(e+t)*(1+3*n/(10+Math.sqrt(4-3*n)))}function Hl(e){return(e%=zl)<0?e+=zl:0===e&&(e=0),e}function Yl(e,t){var n=(t-e)%zl;return 2*n%zl-n}function ql(e,t,n){return e+Yl(e,t)*n}function Xl(e,t){return Yl(e,t)}function $l(e){return(zl+e)%zl}function Gl(e,t){var n=zl/t,r=Math.floor(($l(e)+n/2)/n)*n%zl;return r<Ll&&(r+=zl),r>Ll&&(r-=zl),r}function Ql(e,t){return e===t||Vl(e%(Math.PI/2)-t%(Math.PI/2),0)}function Jl(e,t,n,r){var i=function(e,t,n){return Xl(Nl.Angle(e,t),Nl.Angle(e,n))}(e,n,r);return t*zl*(i/zl)}function Zl(e,t,n,r){return new Nl(e+n*Math.cos(r),t+n*Math.sin(r))}function ec(e,t,n){for(var r=e/2,i=t/2,o=[],a=0;a<n;a++){var s=a*(zl/n)-Dl;o.push(new Nl(r+r*Math.cos(s),i+i*Math.sin(s)))}return o}function tc(e,t,n,r){return e<r&&n<t}function nc(e,t,n,r){var i=Math.max(e,n),o=Math.min(t,r);return i<=o?[i,o]:null}function rc(e,t,n){return(t.x-e.x)*(n.y-e.y)-(n.x-e.x)*(t.y-e.y)}function ic(e,t){for(var n,r,i=0,o=0;o<t.length;o++)n=t[o],r=t[(o+1)%t.length],n.y<=e.y?r.y>e.y&&rc(n,r,e)>0&&(i+=1):r.y<=e.y&&rc(n,r,e)<0&&(i-=1);return 0!==i}function oc(e){return+e.toFixed(4)}function ac(e){return+e.toFixed(2)}var sc,uc=function(e){return Math.abs(e)<Number.MAX_SAFE_INTEGER},lc=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;ne(this,e),vt(this,"x",0),vt(this,"y",0),vt(this,"w",0),vt(this,"h",0),this.x=t,this.y=n,this.w=r,this.h=i}return oe(e,[{key:"point",get:function(){return new Nl(this.x,this.y)},set:function(e){this.x=e.x,this.y=e.y}},{key:"minX",get:function(){return this.x},set:function(e){this.x=e}},{key:"midX",get:function(){return this.x+this.w/2}},{key:"maxX",get:function(){return this.x+this.w}},{key:"minY",get:function(){return this.y},set:function(e){this.y=e}},{key:"midY",get:function(){return this.y+this.h/2}},{key:"maxY",get:function(){return this.y+this.h}},{key:"width",get:function(){return this.w},set:function(e){this.w=e}},{key:"height",get:function(){return this.h},set:function(e){this.h=e}},{key:"aspectRatio",get:function(){return this.width/this.height}},{key:"center",get:function(){return new Nl(this.midX,this.midY)},set:function(e){this.minX=e.x-this.width/2,this.minY=e.y-this.height/2}},{key:"corners",get:function(){return[new Nl(this.minX,this.minY),new Nl(this.maxX,this.minY),new Nl(this.maxX,this.maxY),new Nl(this.minX,this.maxY)]}},{key:"snapPoints",get:function(){return[new Nl(this.minX,this.minY),new Nl(this.maxX,this.minY),new Nl(this.maxX,this.maxY),new Nl(this.minX,this.maxY),this.center]}},{key:"sides",get:function(){var e=this.corners;return[[e[0],e[1]],[e[1],e[2]],[e[2],e[3]],[e[3],e[0]]]}},{key:"size",get:function(){return new Nl(this.w,this.h)}},{key:"toFixed",value:function(){return this.x=Kl(this.x),this.y=Kl(this.y),this.w=Kl(this.w),this.h=Kl(this.h),this}},{key:"setTo",value:function(e){return this.x=e.x,this.y=e.y,this.w=e.w,this.h=e.h,this}},{key:"set",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return this.x=e,this.y=t,this.w=n,this.h=r,this}},{key:"expand",value:function(e){var t=Math.min(this.minX,e.minX),n=Math.min(this.minY,e.minY),r=Math.max(this.maxX,e.maxX),i=Math.max(this.maxY,e.maxY);return this.x=t,this.y=n,this.w=r-t,this.h=i-n,this}},{key:"expandBy",value:function(e){return this.x-=e,this.y-=e,this.w+=2*e,this.h+=2*e,this}},{key:"scale",value:function(e){return this.x/=e,this.y/=e,this.w/=e,this.h/=e,this}},{key:"clone",value:function(){return new e(this.x,this.y,this.w,this.h)}},{key:"translate",value:function(e){return this.x+=e.x,this.y+=e.y,this}},{key:"snapToGrid",value:function(e){var t=Math.round(this.minX/e)*e,n=Math.round(this.minY/e)*e,r=Math.round(this.maxX/e)*e,i=Math.round(this.maxY/e)*e;this.minX=t,this.minY=n,this.width=Math.max(1,r-t),this.height=Math.max(1,i-n)}},{key:"collides",value:function(t){return e.Collides(this,t)}},{key:"contains",value:function(t){return e.Contains(this,t)}},{key:"includes",value:function(t){return e.Includes(this,t)}},{key:"containsPoint",value:function(t,n){return e.ContainsPoint(this,t,n)}},{key:"getHandlePoint",value:function(e){switch(e){case"top_left":return new Nl(this.minX,this.minY);case"top_right":return new Nl(this.maxX,this.minY);case"bottom_left":return new Nl(this.minX,this.maxY);case"bottom_right":return new Nl(this.maxX,this.maxY);case"top":return new Nl(this.midX,this.minY);case"right":return new Nl(this.maxX,this.midY);case"bottom":return new Nl(this.midX,this.maxY);case"left":return new Nl(this.minX,this.midY)}}},{key:"toJson",value:function(){return{x:this.minX,y:this.minY,w:this.w,h:this.h}}},{key:"resize",value:function(e,t,n){var r=this.minX,i=this.minY,o=this.maxX,a=this.maxY,s=this.minX,u=this.minY,l=this.maxX,c=this.maxY;switch(e){case"left":case"top_left":case"bottom_left":s+=t;break;case"right":case"top_right":case"bottom_right":l+=t}switch(e){case"top":case"top_left":case"top_right":u+=n;break;case"bottom":case"bottom_left":case"bottom_right":c+=n}if((l-s)/(o-r)<0){var d=l;l=s,s=d}if((c-u)/(a-i)<0){var f=c;c=u,u=f}this.minX=s,this.minY=u,this.width=Math.abs(l-s),this.height=Math.abs(c-u)}},{key:"union",value:function(e){var t=Math.min(this.minX,e.x),n=Math.min(this.minY,e.y),r=Math.max(this.maxX,e.w+e.x),i=Math.max(this.maxY,e.h+e.y);return this.x=t,this.y=n,this.width=r-t,this.height=i-n,this}},{key:"equals",value:function(t){return e.Equals(this,t)}}],[{key:"From",value:function(t){return new e(t.x,t.y,t.w,t.h)}},{key:"FromPoints",value:function(t){if(0===t.length)return new e;for(var n,r=1/0,i=1/0,o=-1/0,a=-1/0,s=0,u=t.length;s<u;s++)n=t[s],r=Math.min(n.x,r),i=Math.min(n.y,i),o=Math.max(n.x,o),a=Math.max(n.y,a);return new e(r,i,o-r,a-i)}},{key:"Expand",value:function(t,n){var r=Math.min(n.minX,t.minX),i=Math.min(n.minY,t.minY);return new e(r,i,Math.max(n.maxX,t.maxX)-r,Math.max(n.maxY,t.maxY)-i)}},{key:"ExpandBy",value:function(t,n){return new e(t.minX-n,t.minY-n,t.width+2*n,t.height+2*n)}},{key:"Resize",value:function(t,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=t.minX,s=t.minY,u=t.maxX,l=t.maxY,c=t.minX,d=t.minY,f=t.maxX,h=t.maxY;switch(n){case"left":case"top_left":case"bottom_left":c+=r;break;case"right":case"top_right":case"bottom_right":f+=r}switch(n){case"top":case"top_left":case"top_right":d+=i;break;case"bottom":case"bottom_left":case"bottom_right":h+=i}var p=(f-c)/(u-a),v=(h-d)/(l-s),g=p<0,m=v<0;if(o){var y=(u-a)/(l-s),b=Math.abs(f-c),w=Math.abs(h-d),x=b*(v<0?1:-1)*(1/y),k=w*(p<0?1:-1)*y,S=y<b/w;switch(n){case"top_left":S?d=h+x:c=f+k;break;case"top_right":S?d=h+x:f=c-k;break;case"bottom_right":S?h=d-x:f=c-k;break;case"bottom_left":S?h=d-x:c=f+k;break;case"bottom":case"top":var _=(c+f)/2,E=w*y;c=_-E/2,f=_+E/2;break;case"left":case"right":var C=(d+h)/2,P=b/y;d=C-P/2,h=C+P/2}}if(g){var I=f;f=c,c=I}if(m){var j=h;h=d,d=j}var M=new e(c,d,Math.abs(f-c),Math.abs(h-d));return{box:M,scaleX:+(M.width/t.width*(p>0?1:-1)).toFixed(5),scaleY:+(M.height/t.height*(v>0?1:-1)).toFixed(5)}}},{key:"Equals",value:function(e,t){return t.x===e.x&&t.y===e.y&&t.w===e.w&&t.h===e.h}}]),e}();sc=lc,vt(lc,"Collides",(function(e,t){return!(e.maxX<t.minX||e.minX>t.maxX||e.maxY<t.minY||e.minY>t.maxY)})),vt(lc,"Contains",(function(e,t){return e.minX<t.minX&&e.minY<t.minY&&e.maxY>t.maxY&&e.maxX>t.maxX})),vt(lc,"Includes",(function(e,t){return sc.Collides(e,t)||sc.Contains(e,t)})),vt(lc,"ContainsPoint",(function(e,t,n){return"number"===typeof t?!(t<e.minX||n<e.minY||t>e.maxX||n>e.maxY):!(t.x<e.minX||t.y<e.minY||t.x>e.maxX||t.y>e.maxY)})),vt(lc,"Common",(function(e){for(var t=1/0,n=1/0,r=-1/0,i=-1/0,o=0;o<e.length;o++){var a=e[o];t=Math.min(t,a.minX),n=Math.min(n,a.minY),r=Math.max(r,a.maxX),i=Math.max(i,a.maxY)}return new sc(t,n,r-t,i-n)})),vt(lc,"Sides",(function(e){var t=e.corners;return[[t[0],t[1]],[t[1],t[2]],[t[2],t[3]],[t[3],t[0]]]}));var cc,dc=function(){function e(t){ne(this,e),vt(this,"_values",void 0),vt(this,"_computed",{}),this._values=t}return oe(e,[{key:"values",get:function(){return this._values},set:function(e){this._values=e,this._computed={}}},{key:"length",get:function(){if(void 0!==this._computed.length)return this._computed.length;for(var e=this.lut,t=e[0],n=0,r=1;r<e.length;r++){var i=e[r];n+=t.dist(i),t=i}return this._computed.length=n,n}},{key:"bounds",get:function(){if(void 0!==this._computed.bounds)return this._computed.bounds;var e,t=1/0,n=1/0,r=-1/0,i=-1/0,o=w(this.lut);try{for(o.s();!(e=o.n()).done;){var a=e.value;t=Math.min(a.x,t),n=Math.min(a.y,n),r=Math.max(a.x,r),i=Math.max(a.y,i)}}catch(u){o.e(u)}finally{o.f()}var s=new lc(t,n,r-t,i-n);return this._computed.bounds=s,s}},{key:"lut",get:function(){if(this._computed.lut)return this._computed.lut;for(var e=this.values.p,t=[],n=0;n<e+1;n++)t.push(this.getPoint(n/e));return this._computed.lut=t,t}},{key:"midPoint",get:function(){if(this._computed.midPoint)return this._computed.midPoint;var e=this.getPoint(.5);return this._computed.midPoint=e,e}},{key:"path",get:function(){if(this._computed.path)return this._computed.path;var e=this.getPath();return this._computed.path=e,e}},{key:"getPointAtLength",value:function(e){var t=Math.max(0,Math.min(1,e/this.length));return this.getPoint(t)}},{key:"getNormal",value:function(e){return this.getPoint(e-.0025).tan(this.getPoint(e+.0025)).per().uni().toFixed()}},{key:"getNormalAtLength",value:function(e){return this.getNormal(e/this.length)}},{key:"getClosestPointTo",value:function(e){for(var t=this.lut,n=0,r=t[0],i=t[0].dist(e),o=1;o<t.length;o++){var a=Nl.Dist(t[o],e);a<i&&(i=a,r=t[o],n=o/t.length)}for(var s=1/this.values.p,u=Math.max(0,n-s/2);u<Math.min(1,n+s/2);u+=s/10){var l=this.getPoint(u),c=Nl.Dist(l,e);c<i&&(i=c,r=l)}return{point:r,distance:i}}},{key:"update",value:function(e){this._computed={},this.values=mt(mt({},this.values),e)}}]),e}();cc=Symbol.iterator;var fc,hc=function(e){xt(n,e);var t=Et(n);function n(e,r,i,o){var a,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:25;return ne(this,n),vt(_t(a=t.call(this,{a:e,b:r,c:i,d:o,p:s})),cc,m().mark((function e(){var t,n,r,i,o;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.values,n=t.a,r=t.b,i=t.c,o=t.d,e.delegateYield([n,r,i,o],"t0",2);case 2:case"end":return e.stop()}}),e,this)}))),a}return oe(n,[{key:"getPath",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.values,n=t.a,r=t.b,i=t.c,o=t.d;return Nl.Equals(n,o)?"":"".concat(e?"M".concat(n.x.toFixed(2),",").concat(n.y.toFixed(2),"C"):"").concat(r.x.toFixed(2),",").concat(r.y.toFixed(2)," ").concat(i.x.toFixed(2),",").concat(i.y.toFixed(2)," ").concat(o.x.toFixed(2),",").concat(o.y.toFixed(2))}},{key:"getPoint",value:function(e){var t=this.values,n=t.a,r=t.b,i=t.c,o=t.d;return e<=0?Nl.From(n):e>=1?Nl.From(o):new Nl((1-e)*(1-e)*(1-e)*n.x+(1-e)*(1-e)*3*e*r.x+3*(1-e)*(e*e)*i.x+e*e*e*o.x,(1-e)*(1-e)*(1-e)*n.y+(1-e)*(1-e)*3*e*r.y+3*(1-e)*(e*e)*i.y+e*e*e*o.y)}},{key:"getX",value:function(e){var t=this.values,n=t.a,r=t.b,i=t.c,o=t.d;return(1-e)*(1-e)*(1-e)*n.x+(1-e)*(1-e)*3*e*r.x+3*(1-e)*(e*e)*i.x+e*e*e*o.x}},{key:"getY",value:function(e){var t=this.values,n=t.a,r=t.b,i=t.c,o=t.d;return(1-e)*(1-e)*(1-e)*n.y+(1-e)*(1-e)*3*e*r.y+3*(1-e)*(e*e)*i.y+e*e*e*o.y}}]),n}(dc),pc=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;ne(this,e),vt(this,"computed",{}),this.points=t,this.p=n,this.k=r}return oe(e,[{key:"length",get:function(){if(void 0!==this.computed.length)return this.computed.length;var e=this.segments.reduce((function(e,t){return e+t.length}),0);return this.computed.length=e,e}},{key:"bounds",get:function(){if(void 0!==this.computed.bounds)return this.computed.bounds;var e=this.segments,t=lc.Common(e.map((function(e){return e.bounds})));return this.computed.bounds=t,t}},{key:"head",get:function(){return this.points[0]}},{key:"tail",get:function(){var e=this.points;return e[e.length-1]}},{key:"path",get:function(){if(void 0!==this.computed.path)return this.computed.path;var e=this.segments.map((function(e){return e.path})).filter((function(e){return void 0!==e&&null!==e&&""!==e})).join(" ");return this.computed.path=e,e}},{key:"addPoint",value:function(e){var t=this.points,n=this.k,r=this.p;return t.push(e),this.computed={},this.getSegmentsFromPoints(this.points,r,n),this}},{key:"removePoint",value:function(e){var t=this.points,n=this.k,r=this.p,i="number"===typeof e?Math.floor(e):t.indexOf(e);return-1===i||(t.splice(i,1),this.computed={},this.getSegmentsFromPoints(this.points,r,n)),this}},{key:"getPointAtLength",value:function(e){var t=this.segments,n=e;if(e<=0)return t[0].getPoint(0);if(e>=this.length)return t[t.length-1].getPoint(1);for(var r=0;r<t.length;r++){var i=t[r],o=i.length;if(n<o)return i.getPoint(n/o);n-=i.length}return t[t.length-1].getPoint(1)}},{key:"getPoint",value:function(e){return e<=0?this.segments[0].getPoint(0):e>=1?this.segments[this.segments.length-1].getPoint(1):this.getPointAtLength(e*this.length)}},{key:"getNormal",value:function(e){var t=this.length;return this.getNormalAtLength(e*t)}},{key:"getNormalAtLength",value:function(e){var t=this.segments;if(e<0)return new Nl(0,0);var n,r=e,i=w(t);try{for(i.s();!(n=i.n()).done;){var o=n.value,a=o.length;if(r<=a)return o.getNormal(r/a);r-=a}}catch(s){i.e(s)}finally{i.f()}return new Nl(0,0)}},{key:"getClosestPointTo",value:function(e){var t,n=this.head,r=this.segments,i=n,o=Nl.Dist(e,n),a=w(r);try{for(a.s();!(t=a.n()).done;){var s=t.value.getClosestPointTo(e);s.distance<o&&(o=s.distance,i=s.point)}}catch(u){a.e(u)}finally{a.f()}return{point:i,distance:o}}}]),e}(),vc=function(e){xt(n,e);var t=Et(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.2,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20;return ne(this,n),vt(_t(r=t.call(this,e,i,o)),"segments",void 0),r.segments=r.getSegmentsFromPoints(e,i,o),r}return oe(n,[{key:"getSegmentsFromPoints",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.25,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,r=e.length,i=r-2,o=[],a=0;a<r-1;a++){var s=0===a?e[0]:e[a-1],u=e[a],l=e[a+1],c=a===i?l:e[a+2];o.push(new hc(u,0===a?s:new Nl(u.x+(l.x-s.x)/6*t,u.y+(l.y-s.y)/6*t),a===i?l:new Nl(l.x-(c.x-u.x)/6*t,l.y-(c.y-u.y)/6*t),l,n))}return o}}],[{key:"FromPoints",value:function(e){return new n(e)}}]),n}(pc),gc=function(e){xt(n,e);var t=Et(n);function n(e,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;return ne(this,n),(i=t.call(this,{a:e,b:r,p:o})).a=e,i.b=r,i.values.p=Math.max(10,Math.ceil(i.length/20)),i}return oe(n,[{key:"length",get:function(){return Nl.Dist(this.a,this.b)}},{key:"tangent",get:function(){return Nl.Tan(this.a,this.b)}},{key:"angle",get:function(){return Nl.Angle(this.a,this.b)}},{key:"bounds",get:function(){return lc.FromPoints([this.a,this.b])}},{key:"getX",value:function(e){var t=this.values,n=t.a,r=t.b;return n.x+(r.x-n.x)*e}},{key:"getY",value:function(e){var t=this.values,n=t.a,r=t.b;return n.y+(r.y-n.y)*e}},{key:"getPoint",value:function(e){var t=this.values,n=t.a,r=t.b;return e<=0?Nl.From(n):e>=1?Nl.From(r):Nl.Lrp(n,r,e)}},{key:"getPath",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.values,n=t.a,r=t.b;return Nl.Equals(n,r)?"":e?"M".concat(n.x,",").concat(n.y,"L").concat(r.x,",").concat(r.y):"".concat(r.x,",").concat(r.y)}},{key:"getNormal",value:function(){var e=this.values,t=e.a,n=e.b;return Nl.Sub(t,n).per().uni().toFixed()}},{key:"getClosestPointTo",value:function(e){var t=this.values,n=t.a,r=t.b,i=Nl.NearestPointOnLineSegment(n,r,e),o=i.dist(e);return{point:i,distance:o}}}],[{key:"Length",value:function(e){return Nl.Dist(e.a,e.b)}},{key:"Tangent",value:function(e){return Nl.Tan(e.a,e.b)}},{key:"Angle",value:function(e){return Nl.Angle(e.a,e.b)}}]),n}(dc),mc=function(){function e(t,n,r,i,o,a){ne(this,e),vt(this,"a",1),vt(this,"b",0),vt(this,"c",0),vt(this,"d",1),vt(this,"e",0),vt(this,"f",0),this.a=t,this.b=n,this.c=r,this.d=i,this.e=o,this.f=a}return oe(e,[{key:"equals",value:function(e){return this.a===e.a&&this.b===e.b&&this.c===e.c&&this.d===e.d&&this.e===e.e&&this.f===e.f}},{key:"identity",value:function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0,this}},{key:"multiply",value:function(e){var t=e,n=this.a,r=this.b,i=this.c,o=this.d,a=this.e,s=this.f;return this.a=n*t.a+i*t.b,this.c=n*t.c+i*t.d,this.e=n*t.e+i*t.f+a,this.b=r*t.a+o*t.b,this.d=r*t.c+o*t.d,this.f=r*t.e+o*t.f+s,this}},{key:"rotate",value:function(t,n,r){return 0===t?this:void 0===n?this.multiply(e.Rotate(t)):this.translate(n,r).multiply(e.Rotate(t)).translate(-n,-r)}},{key:"translate",value:function(t,n){return this.multiply(e.Translate(t,n))}},{key:"scale",value:function(t,n){return this.multiply(e.Scale(t,n))}},{key:"invert",value:function(){var e=this.a,t=this.b,n=this.c,r=this.d,i=this.e,o=this.f,a=e*r-t*n;return this.a=r/a,this.b=t/-a,this.c=n/-a,this.d=e/a,this.e=(r*i-n*o)/-a,this.f=(t*i-e*o)/a,this}},{key:"applyToPoint",value:function(t){return e.applyToPoint(this,t)}},{key:"applyToPoints",value:function(t){return e.applyToPoints(this,t)}},{key:"decomposed",value:function(){return e.Decompose(this)}},{key:"toCssString",value:function(){return e.toCssString(this)}},{key:"setTo",value:function(e){return Object.assign(this,e),this}},{key:"decompose",value:function(){return e.Decompose(this)}},{key:"clone",value:function(){return new e(this.a,this.b,this.c,this.d,this.e,this.f)}}],[{key:"Identity",value:function(){return new e(1,0,0,1,0,0)}},{key:"Translate",value:function(t,n){return new e(1,0,0,1,t,n)}},{key:"Rotate",value:function(t,n,r){if(0===t)return e.Identity();var i=Math.cos(t),o=Math.sin(t),a=new e(i,o,-o,i,0,0);return void 0===n?a:e.Compose(e.Translate(n,r),a,e.Translate(-n,-r))}},{key:"Multiply",value:function(e,t){return{a:e.a*t.a+e.c*t.b,c:e.a*t.c+e.c*t.d,e:e.a*t.e+e.c*t.f+e.e,b:e.b*t.a+e.d*t.b,d:e.b*t.c+e.d*t.d,f:e.b*t.e+e.d*t.f+e.f}}},{key:"Inverse",value:function(e){var t=e.a*e.d-e.b*e.c;return{a:e.d/t,b:e.b/-t,c:e.c/-t,d:e.a/t,e:(e.d*e.e-e.c*e.f)/-t,f:(e.b*e.e-e.a*e.f)/t}}},{key:"Absolute",value:function(e){var t=e.a*e.d-e.b*e.c;return{a:e.d/t,b:e.b/-t,c:e.c/-t,d:e.a/t,e:(e.d*e.e-e.c*e.f)/t,f:(e.b*e.e-e.a*e.f)/-t}}},{key:"Compose",value:function(){for(var t=e.Identity(),n=0,r=arguments.length;n<r;n++)t.multiply(n<0||arguments.length<=n?void 0:arguments[n]);return t}},{key:"Decompose",value:function(e){var t,n,r;if(0!==e.a||0!==e.c){var i=Math.hypot(e.a,e.c);t=i,n=(e.a*e.d-e.b*e.c)/i,r=Math.acos(e.a/i)*(e.c>0?-1:1)}else if(0!==e.b||0!==e.d){var o=Math.hypot(e.b,e.d);t=(e.a*e.d-e.b*e.c)/o,n=o,r=Dl+Math.acos(e.b/o)*(e.d>0?-1:1)}else t=0,n=0,r=0;return{x:e.e,y:e.f,scaleX:t,scaleY:n,rotation:$l(r)}}},{key:"Smooth",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e10;return e.a=Math.round(e.a*t)/t,e.b=Math.round(e.b*t)/t,e.c=Math.round(e.c*t)/t,e.d=Math.round(e.d*t)/t,e.e=Math.round(e.e*t)/t,e.f=Math.round(e.f*t)/t,e}},{key:"toCssString",value:function(e){return"matrix(".concat(oc(e.a),", ").concat(oc(e.b),", ").concat(oc(e.c),", ").concat(oc(e.d),", ").concat(oc(e.e),", ").concat(oc(e.f),")")}},{key:"applyToPoint",value:function(e,t){return new Nl(e.a*t.x+e.c*t.y+e.e,e.b*t.x+e.d*t.y+e.f,t.z)}},{key:"applyToXY",value:function(e,t,n){return[e.a*t+e.c*n+e.e,e.b*t+e.d*n+e.f]}},{key:"applyToPoints",value:function(e,t){return t.map((function(t){return new Nl(e.a*t.x+e.c*t.y+e.e,e.b*t.x+e.d*t.y+e.f,t.z)}))}},{key:"applyToBounds",value:function(e,t){return new lc(e.e+t.minX,e.f+t.minY,t.width,t.height)}},{key:"From",value:function(t){return new e(t.a,t.b,t.c,t.d,t.e,t.f)}}]),e}();fc=mc,vt(mc,"Scale",(function(e,t,n,r){var i=new fc(e,0,0,0,t,0);return void 0===n?i:fc.Compose(fc.Translate(n,r),i,fc.Translate(-n,-r))}));var yc=function(e){xt(n,e);var t=Et(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.2,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20;return ne(this,n),vt(_t(r=t.call(this,e,i,o)),"segments",void 0),r.segments=r.getSegmentsFromPoints(e,o),r}return oe(n,[{key:"getSegmentsFromPoints",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,n=[],r=0;r<e.length-1;r++)n.push(new gc(e[r],e[r+1],t));return n}}],[{key:"FromPoints",value:function(e){return new n(e)}}]),n}(pc),bc=Math.PI+1e-4;function wc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.size,r=void 0===n?16:n,i=t.smoothing,o=void 0===i?.5:i,a=t.start,s=void 0===a?{}:a,u=t.end,l=void 0===u?{}:u,c=t.last,d=void 0!==c&&c,f=s.cap,h=void 0===f||f,p=l.cap,v=void 0===p||p;if(0===e.length||r<=0)return[];for(var g,m=e[0],y=e[e.length-1],b=y.runningLength,w=!1===s.taper?0:!0===s.taper?Math.max(r,b):s.taper,x=!1===l.taper?0:!0===l.taper?Math.max(r,b):l.taper,k=Math.pow(r*o,2),S=[],_=[],E=e[0].vector,C=e[0].point,P=C,I=C,j=P,M=!1,A=0;A<e.length;A++){g=e[A];var T=e[A],O=T.point,N=T.vector,R=g.vector.dpr(E),L=(A<e.length-1?e[A+1]:e[A]).vector,D=A<e.length-1?L.dpr(g.vector):1,z=null!==D&&D<.2;if(R<0&&!M||z){if(D>-.62&&b-g.runningLength>g.radius){var B=E.clone().mul(g.radius);E.clone().cpr(L)<0?(I=Nl.Add(O,B),j=Nl.Sub(O,B)):(I=Nl.Sub(O,B),j=Nl.Add(O,B)),S.push(I),_.push(j)}else for(var F=E.clone().mul(g.radius).per(),U=Nl.Sub(g.input,F),K=0;K<1;K+=.07692307692307693)I=Nl.RotWith(U,g.input,bc*K),S.push(I),j=Nl.RotWith(U,g.input,bc+bc*-K),_.push(j);C=I,P=j,z&&(M=!0)}else if(M=!1,g!==m&&g!==y){var V=Nl.Lrp(L,N,D).per().mul(g.radius);I=Nl.Sub(O,V),(A<=1||Nl.Dist2(C,I)>k)&&(S.push(I),C=I),j=Nl.Add(O,V),(A<=1||Nl.Dist2(P,j)>k)&&(_.push(j),P=j),E=N}else{var W=Nl.Per(N).mul(g.radius);S.push(Nl.Sub(O,W)),_.push(Nl.Add(O,W))}}var H=m.point,Y=e.length>1?e[e.length-1].point:Nl.AddXY(m.point,1,1);if(1===e.length&&(!w&&!x||d)){for(var q=Nl.Add(H,Nl.Sub(H,Y).uni().per().mul(-m.radius)),X=[],$=1/13,G=$;G<=1;G+=$)X.push(Nl.RotWith(q,H,2*bc*G));return X}var Q=[];if(w||x&&1===e.length);else if(h)for(var J=.125;J<=1;J+=.125){var Z=Nl.RotWith(_[0],H,bc*J);Q.push(Z)}else{var ee=Nl.Sub(S[0],_[0]),te=Nl.Mul(ee,.5),ne=Nl.Mul(ee,.51);Q.push(Nl.Sub(H,te),Nl.Sub(H,ne),Nl.Add(H,ne),Nl.Add(H,te))}var re=[],ie=y.vector.clone().per().neg();if(x||w&&1===e.length)re.push(Y);else if(v)for(var oe=Nl.Add(Y,Nl.Mul(ie,y.radius)),ae=1/29,se=ae;se<1;se+=ae)re.push(Nl.RotWith(oe,Y,3*bc*se));else re.push(Nl.Add(Y,Nl.Mul(ie,y.radius)),Nl.Add(Y,Nl.Mul(ie,.99*y.radius)),Nl.Sub(Y,Nl.Mul(ie,.99*y.radius)),Nl.Sub(Y,Nl.Mul(ie,y.radius)));return S.concat(re,_.reverse(),Q)}var xc=.025,kc=.01;function Sc(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.streamline,i=void 0===r?.5:r,o=n.size,a=void 0===o?16:o,s=n.simulatePressure,u=void 0!==s&&s;if(0===e.length)return[];var l=.15+.85*(1-i),c=e.map(Nl.From),f=0;if(!u)for(var h=c[0];h&&!(h.z>=xc);)c.shift(),h=c[0];if(!u)for(var p=c[c.length-1];p&&!(p.z>=kc);)c.pop(),p=c[c.length-1];if(0===c.length)return[{point:Nl.From(e[0]),input:Nl.From(e[0]),pressure:u?.5:.15,vector:new Nl(1,1),distance:0,runningLength:0,radius:1}];for(var v=c[1];v&&!(Nl.Dist(v,c[0])>a/3);)c[0].z=Math.max(c[0].z,v.z),c.splice(1,1),v=c[1];var g=c.pop();for(v=c[c.length-1];v&&!(Nl.Dist(v,g)>a/3);)c.pop(),v=c[c.length-1],f++;c.push(g);var m=n.last||!n.simulatePressure||c.length>1&&Nl.Dist(c[c.length-1],c[c.length-2])<a||f>0;if(2===c.length&&n.simulatePressure){var y=c[1];c=c.slice(0,-1);for(var b=1;b<5;b++){var w=Nl.Lrp(c[0],y,b/4);w.z=(c[0].z+(y.z-c[0].z))*b/4,c.push(w)}}var x,k,S=[{point:c[0],input:c[0],pressure:u?.5:c[0].z,vector:new Nl(1,1),distance:0,runningLength:0,radius:1}],_=0,E=S[0];m&&i>0&&c.push(c[c.length-1].clone());for(var C=1,P=c.length;C<P;C++)x=!l||n.last&&C===P-1?c[C].clone():c[C].clone().lrp(E.point,1-l),E.point.equals(x)||(_+=k=Nl.Dist(x,E.point),C<4&&_<a||(E={input:c[C],point:x,pressure:u?.5:c[C].z,vector:Nl.Sub(E.point,x).uni(),distance:k,runningLength:_,radius:1},S.push(E)));if(null!==(t=S[1])&&void 0!==t&&t.vector&&(S[0].vector=S[1].vector.clone()),_<1){var I=Math.max.apply(Math,[.5].concat(d(S.map((function(e){return e.pressure})))));S.forEach((function(e){return e.pressure=I}))}return S}var _c=Math.min,Ec=.275;function Cc(e,t){var n,r,i=t.size,o=void 0===i?16:i,a=t.thinning,s=void 0===a?.5:a,u=t.simulatePressure,l=void 0===u||u,c=t.easing,d=void 0===c?function(e){return e}:c,f=t.start,h=void 0===f?{}:f,p=t.end,v=void 0===p?{}:p,g=h.easing,m=void 0===g?Ol.easeOutQuad:g,y=v.easing,b=void 0===y?Ol.easeOutCubic:y,w=e[e.length-1].runningLength,x=e[0].pressure;if(!l&&w<o){var k=e.reduce((function(e,t){return Math.max(e,t.pressure)}),.5);return e.forEach((function(e){e.pressure=k,e.radius=o*d(.5-s*(.5-e.pressure))})),e}for(var S,_=0,E=e.length;_<E&&!((r=e[_]).runningLength>5*o);_++){var C=_c(1,r.distance/o);if(l){var P=_c(1,1-C);S=_c(1,x+C*Ec*(P-x))}else S=_c(1,x+.5*(r.pressure-x));x+=.5*(S-x)}for(var I=0;I<e.length;I++){if(r=e[I],s){var j=r.pressure,M=_c(1,r.distance/o);if(l){var A=_c(1,1-M);j=_c(1,x+M*Ec*(A-x))}else j=_c(1,x+M*Ec*(j-x));r.radius=o*d(.5-s*(.5-j)),x=j}else r.radius=o/2;void 0===n&&(n=r.radius)}var T=!1===h.taper?0:!0===h.taper?Math.max(o,w):h.taper,O=!1===v.taper?0:!0===v.taper?Math.max(o,w):v.taper;if(T||O)for(var N=0;N<e.length;N++){var R=(r=e[N]).runningLength,L=R<T?m(R/T):1,D=w-R<O?b((w-R)/O):1;r.radius=Math.max(.01,r.radius*Math.min(L,D))}return e}function Pc(e,t,n,r){var i=e.x-n.x,o=e.y-n.y,a=r.x-n.x,s=r.y-n.y,u=t.x-e.x,l=t.y-e.y,c=a*o-s*i,d=u*o-l*i,f=s*u-a*l;if(0===c||0===d)return null;if(0===f)return null;if(0!==f){var h=c/f,p=d/f;if(0<=h&&h<=1&&0<=p&&p<=1)return Nl.AddXY(e,h*u,h*l)}return null}function Ic(e,t,n,r){var i=(t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y),o=2*((t.x-e.x)*(e.x-n.x)+(t.y-e.y)*(e.y-n.y)),a=o*o-4*i*(n.x*n.x+n.y*n.y+e.x*e.x+e.y*e.y-2*(n.x*e.x+n.y*e.y)-r*r);if(a<0)return null;if(0===a)return null;var s=Math.sqrt(a),u=(-o+s)/(2*i),l=(-o-s)/(2*i);if((u<0||u>1)&&(l<0||l>1))return null;var c=[];return 0<=u&&u<=1&&c.push(Nl.Lrp(e,t,u)),0<=l&&l<=1&&c.push(Nl.Lrp(e,t,l)),0===c.length?null:c}function jc(e,t,n){for(var r,i=[],o=0,a=n.length-1;o<a;o++)(r=Pc(e,t,n[o],n[o+1]))&&i.push(r);return 0===i.length?null:i}function Mc(e,t,n){for(var r,i=[],o=1,a=n.length;o<a+1;o++)(r=Pc(e,t,n[o-1],n[o%n.length]))&&i.push(r);return 0===i.length?null:i}function Ac(e,t,n){for(var r,i=[],o=0,a=n.length;o<a;o++)(r=Ic(n[o],n[(o+1)%n.length],e,t))&&i.push.apply(i,d(r));return 0===i.length?null:i}function Tc(e,t,n){for(var r,i=[],o=1,a=n.length;o<a;o++)(r=Ic(n[o-1],n[o],e,t))&&i.push.apply(i,d(r));return 0===i.length?null:i}function Oc(e,t,n){return(n.y-e.y)*(t.x-e.x)>(t.y-e.y)*(n.x-e.x)}function Nc(e,t,n,r){return Oc(e,n,r)!==Oc(t,n,r)&&Oc(e,t,n)!==Oc(e,t,r)}function Rc(e,t){for(var n,r,i=[],o=0,a=e.length;o<a;o++)ic(n=e[o],t)&&i.push(n);for(var s=0,u=t.length;s<u;s++)ic(n=t[s],e)&&i.push(n);for(var l=0,c=e.length;l<c;l++){n=e[l],r=e[(l+1)%e.length];for(var d=0,f=t.length;d<f;d++){var h=Pc(n,r,t[d],t[(d+1)%t.length]);null!==h&&i.push(h)}}return 0===i.length?null:function(e){var t=Nl.Average(e);return e.sort((function(e,n){return Nl.Angle(t,e)-Nl.Angle(t,n)}))}(i)}function Lc(e){return"".concat(oc(e.x),",").concat(oc(e.y)," ")}function Dc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=0,n=0,r=0,i=0;function o(){var e=t^t<<11;return t=n,n=r,r=i,(i^=(i>>>19^e^e>>>8)>>>0)/4294967296*2}for(var a=0;a<e.length+64;a++)t^=0|e.charCodeAt(a),o();return o}function zc(e){for(var t,n,r,i="M",o=0,a=e.length;o<a;o+=3)t=e[o],n=e[o+1],r=e[o+2],i+="".concat(Lc(t),"L").concat(Lc(n),"Q").concat(Lc(r));return i+="".concat(Lc(e[0]))}function Bc(e,t,n,r,i){for(var o,a=[],s=Dc(e),u=t[0],l=t.length,c=0,d=l*i;c<d;c++){o=Nl.AddXY(t[(c+1)%l],s()*n,s()*n);var f=Nl.Sub(o,u),h=Nl.Len(f),p=Nl.Div(f,h).mul(Math.min(h/4,r));a.push(Nl.Add(u,p),Nl.Add(o,p.neg()),o),u=o}return a}function Fc(e,t,n){for(var r,i,o="M".concat(Lc(t[0]),"L"),a="M".concat(Lc(t[0]),"L"),s="M".concat(Lc(t[0]),"L"),u=n/3,l=2*n,c=Dc(e),d=t[0],f=t[0],h=0,p=t.length-1;h<p;h++){r=Nl.AddXY(t[h+1],c()*u,c()*u),i=Nl.AddXY(t[h+1],c(),c()*u);var v=Nl.Sub(r,d),g=Nl.Len(v),m=Nl.Div(v,g).mul(Math.min(g/4,l)),y=Nl.Add(d,m),b=Nl.Add(r,m.neg()),w=Nl.Sub(i,f),x=Nl.Len(w),k=Nl.Div(w,x).mul(Math.min(x/4,l)),S=Nl.Add(f,k),_=Nl.Add(i,k.neg());h===p-1?(o+="".concat(Lc(y)," L ").concat(Lc(r)),a+="".concat(Lc(y)," L ").concat(Lc(r)),s+="".concat(Lc(S)," L ").concat(Lc(i))):(o+="".concat(Lc(y),"L ").concat(Lc(b),"Q ").concat(Lc(r)),a+="".concat(Lc(y),"L ").concat(Lc(b),"Q ").concat(Lc(r)),s+="".concat(Lc(S),"L ").concat(Lc(_),"Q ").concat(Lc(i)),d=r,f=i)}return[o,a+s]}var Uc={peopleMenu:Hc("peopleMenu"),highlighterTool:Hc("highlighterTool",{all:!0})},Kc={preventDefaultLogging:Wc("preventDefaultLogging",{defaults:{all:!1}}),pointerCaptureLogging:Wc("pointerCaptureLogging",{defaults:{all:!1}}),pointerCaptureTracking:Wc("pointerCaptureTracking",{defaults:{all:!1}}),pointerCaptureTrackingObject:Wc("pointerCaptureTrackingObject",{defaults:{all:new Map},shouldStoreForSession:!1}),elementRemovalLogging:Wc("elementRemovalLogging",{defaults:{all:!1}}),debugSvg:Wc("debugSvg",{defaults:{all:!1}}),throwToBlob:Wc("throwToBlob",{defaults:{all:!1}}),logMessages:Wc("uiLog",{defaults:{all:[]}}),resetConnectionEveryPing:Wc("resetConnectionEveryPing",{defaults:{all:!1}}),debugCursors:Wc("debugCursors",{defaults:{all:!1}}),forceSrgb:Wc("forceSrgbColors",{defaults:{all:!1}})};if("undefined"!==typeof window&&(window.tldrawLog=function(e){Kc.logMessages.set(Kc.logMessages.value.concat(e))}),"undefined"!==typeof Element){var Vc=Element.prototype.removeChild;lo("element removal logging",(function(){Kc.elementRemovalLogging.value?Element.prototype.removeChild=function(e){return console.warn("[tldraw] removing child:",e),Vc.call(this,e)}:Element.prototype.removeChild=Vc}))}function Wc(e,t){var n=t.defaults,r=t.shouldStoreForSession;return Yc({name:e,defaults:n,shouldStoreForSession:void 0===r||r})}function Hc(e){return Yc({name:e,defaults:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{all:!0,production:!1},shouldStoreForSession:!0})}function Yc(e){var t=function(e){var t,n,r,i,o,a;switch(null!==(t=null!==(n=null!==(r=qc((function(){return{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.TLDRAW_ENV})))&&void 0!==r?r:qc((function(){return{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.VERCEL_PUBLIC_TLDRAW_ENV})))&&void 0!==n?n:qc((function(){return{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.NEXT_PUBLIC_TLDRAW_ENV})))&&void 0!==t?t:"production"){case"production":return null!==(i=e.defaults.production)&&void 0!==i?i:e.defaults.all;case"preview":case"staging":return null!==(o=e.defaults.staging)&&void 0!==o?o:e.defaults.all;default:return null!==(a=e.defaults.development)&&void 0!==a?a:e.defaults.all}}(e),n=e.shouldStoreForSession?function(e){try{var t,n;return JSON.parse(null!==(t=null===(n=window)||void 0===n?void 0:n.sessionStorage.getItem("tldraw_debug:".concat(e)))&&void 0!==t?t:"null")}catch(r){return null}}(e.name):null,r=eo("debug:".concat(e.name),null!==n&&void 0!==n?n:t);return"undefined"!==typeof window&&(e.shouldStoreForSession&&lo("debug:".concat(e.name),(function(){var n=r.value;try{n===t?window.sessionStorage.removeItem("tldraw_debug:".concat(e.name)):window.sessionStorage.setItem("tldraw_debug:".concat(e.name),JSON.stringify(n))}catch(i){}})),Object.defineProperty(window,"tldraw".concat(e.name.replace(/^[a-z]/,(function(e){return e.toUpperCase()}))),{get:function(){return r.value},set:function(e){r.set(e)},configurable:!0})),Object.assign(r,e)}function qc(e){try{return e()}catch(t){return null}}function Xc(e){if(e instanceof HTMLElement)return e;if(e.parentElement)return Xc(e.parentElement);throw Error("Could not find a parent element of an HTML type!")}function $c(e){e.preventDefault(),Kc.preventDefaultLogging.value&&console.warn("preventDefault called on event:",e)}function Gc(e,t){if(e.setPointerCapture(t.pointerId),Kc.pointerCaptureTracking.value){var n,r=Kc.pointerCaptureTrackingObject.value;r.set(e,(null!==(n=r.get(e))&&void 0!==n?n:0)+1)}Kc.pointerCaptureLogging.value&&console.warn("setPointerCapture called on element:",e,t)}function Qc(e,t){if(e.hasPointerCapture(t.pointerId)){if(e.releasePointerCapture(t.pointerId),Kc.pointerCaptureTracking.value){var n=Kc.pointerCaptureTrackingObject.value;1===n.get(e)?n.delete(e):n.has(e)?n.set(e,n.get(e)-1):console.warn("Release without capture")}Kc.pointerCaptureLogging.value&&console.warn("releasePointerCapture called on element:",e,t)}}var Jc=[{offsetX:0,offsetY:2,blur:4,spread:0,color:"#00000029"},{offsetX:0,offsetY:3,blur:6,spread:0,color:"#0000001f"}];function Zc(e){var t=Jc.map((function(t){var n=t.offsetX,r=t.offsetY,i=t.blur,o=t.spread,a=t.color,s=new Nl(n,r).rot(-e),u=s.x,l=s.y;return"".concat(u,"px ").concat(l,"px ").concat(i,"px ").concat(o,"px ").concat(a)}));return t.join(", ")}function ed(){var e=l((0,t.useState)(!1),2),n=e[0],r=e[1];return(0,t.useEffect)((function(){var e=window.matchMedia("(prefers-reduced-motion: reduce)"),t=function(){r(e.matches)};return t(),e.addEventListener("change",t),function(){return e.removeEventListener("change",t)}}),[]),n}var td=function(e,t){return e.length<=t?e:e.substring(0,t-3)+"..."},nd=function(e){return e.stopPropagation()};function rd(e,t){e.isKilled=!0;var n=t.getBoundingClientRect(),r=n.top,i=n.left;return{point:{x:e.clientX-i,y:e.clientY-r,z:e.pressure},shiftKey:e.shiftKey,altKey:e.altKey,ctrlKey:e.metaKey||e.ctrlKey,pointerId:e.pointerId,button:e.button,isPen:"pen"===e.pointerType}}function id(e){return"".concat(oc(e.x),",").concat(oc(e.y)," ")}function od(e,t){return"".concat(oc((e.x+t.x)/2),",").concat(oc((e.y+t.y)/2)," ")}function ad(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.length;if(n<2)return"";var r=e[0],i=e[1];if(2===n)return"M".concat(id(r),"L").concat(id(i));for(var o="",a=2,s=n-1;a<s;a++)o+=od(r=e[a],i=e[a+1]);return t?"M".concat(od(e[0],e[1]),"Q").concat(id(e[1])).concat(od(e[1],e[2]),"T").concat(o).concat(od(e[n-1],e[0])).concat(od(e[0],e[1]),"Z"):"M".concat(id(e[0]),"Q").concat(id(e[1])).concat(od(e[1],e[2])).concat(e.length>3?"T":"").concat(o,"L").concat(id(e[n-1]))}function sd(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.length;if(n<2)return"";var r=e[0].point,i=e[1].point;if(2===n)return"M".concat(id(r),"L").concat(id(i));for(var o="",a=2,s=n-1;a<s;a++)o+=od(r=e[a].point,i=e[a+1].point);return t?"M".concat(od(e[0].point,e[1].point),"Q").concat(id(e[1].point)).concat(od(e[1].point,e[2].point),"T").concat(o).concat(od(e[n-1].point,e[0].point)).concat(od(e[0].point,e[1].point),"Z"):"M".concat(id(e[0].point),"Q").concat(id(e[1].point)).concat(od(e[1].point,e[2].point)).concat(e.length>3?"T":"").concat(o,"L").concat(id(e[n-1].point))}var ud=(0,t.createContext)(null);function ld(e){var t=e.container,n=e.children;return(0,f.jsx)(ud.Provider,{value:t,children:n})}function cd(){return Er((0,t.useContext)(ud),"useContainer used outside of <Tldraw />")}var dd=["input","select","button","textarea"];function fd(){var e=document.activeElement;return!(!e||!(e.getAttribute("contenteditable")||dd.indexOf(e.tagName.toLowerCase())>-1))}function hd(){return(0,f.jsx)("div",{className:"tl-background"})}function pd(e,n,r,i,o,a){(0,t.useLayoutEffect)((function(){var t=e.current;if(t&&void 0!==n){var s="translate(".concat(n,"px, ").concat(r,"px)");void 0!==i&&(s+=" scale(".concat(i,")")),void 0!==o&&(s+=" rotate(".concat(o,"rad)")),a&&(s+=" translate(".concat(a.x,"px, ").concat(a.y,"px)")),t.style.transform=s}}))}for(var vd=function(e){var n=e.brush,r=e.color,i=e.opacity,o=(0,t.useRef)(null);return pd(o,n.x,n.y),(0,f.jsx)("svg",{className:"tl-overlays__item",ref:o,children:r?(0,f.jsxs)("g",{className:"tl-brush",opacity:i,children:[(0,f.jsx)("rect",{width:oc(Math.max(1,n.w)),height:oc(Math.max(1,n.h)),fill:r,opacity:.75}),(0,f.jsx)("rect",{width:oc(Math.max(1,n.w)),height:oc(Math.max(1,n.h)),fill:"none",stroke:r,opacity:.1})]}):(0,f.jsx)("rect",{className:"tl-brush tl-brush__default",width:oc(Math.max(1,n.w)),height:oc(Math.max(1,n.h))})})},gd=function(e){var n=e.className,r=e.zoom,i=e.point,o=e.color,a=e.viewport,s=e.opacity,u=void 0===s?1:s,l=(0,t.useRef)(null);return pd(l,Ul(i.x,a.minX+5/r,a.maxX-5/r),Ul(i.y,a.minY+5/r,a.maxY-5/r),1/r,Nl.Angle(a.center,i)),(0,f.jsxs)("svg",{ref:l,className:kl("tl-overlays__item",n),children:[(0,f.jsx)("use",{href:"#cursor_hint",color:o,strokeWidth:3,stroke:"var(--color-background)"}),(0,f.jsx)("use",{href:"#cursor_hint",color:o,opacity:u})]})},md=(0,t.memo)((function(e){var n=e.className,r=e.zoom,i=e.point,o=e.color,a=e.name,s=e.chatMessage,u=(0,t.useRef)(null);return pd(u,null===i||void 0===i?void 0:i.x,null===i||void 0===i?void 0:i.y,1/r),i?(0,f.jsxs)("div",{ref:u,className:kl("tl-overlays__item",n),children:[(0,f.jsx)("svg",{className:"tl-cursor",children:(0,f.jsx)("use",{href:"#cursor",color:o})}),s?(0,f.jsxs)(f.Fragment,{children:[a&&(0,f.jsx)("div",{className:"tl-nametag-title",style:{color:o},children:a}),(0,f.jsx)("div",{className:"tl-nametag-chat",style:{backgroundColor:o},children:s})]}):a&&(0,f.jsx)("div",{className:"tl-nametag",style:{backgroundColor:o},children:a})]}):null})),yd=2e3,bd=(Symbol("remove"),320),wd=[.1,.25,.5,1,2,4,8],xd=.1,kd={},Sd=1;Sd<=Math.ceil(8);Sd++)kd[Sd+"_dark"]="hash_pattern_zoom_".concat(Sd,"_dark"),kd[Sd+"_light"]="hash_pattern_zoom_".concat(Sd,"_light");var _d={duration:0,easing:Ol.easeInOutCubic},Ed=.09,Cd=[{min:-1,mid:.15,step:100},{min:.05,mid:.375,step:25},{min:.15,mid:1,step:5},{min:.7,mid:2.5,step:1}],Pd=-10,Id=function(e){var t=e.x,n=e.y,r=e.z,i=e.size;return(0,f.jsxs)("svg",{className:"tl-grid",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:[(0,f.jsx)("defs",{children:Cd.map((function(e,o){var a=e.min,s=e.mid,u=e.step,l=u*i*r,c=.5+t*r,d=.5+n*r,h=c>0?c%l:l+c%l,p=d>0?d%l:l+d%l,v=r<s?Ar(r,[a,s],[0,1]):1;return(0,f.jsx)("pattern",{id:"grid-".concat(u),width:l,height:l,patternUnits:"userSpaceOnUse",children:(0,f.jsx)("circle",{className:"tl-grid-dot",cx:h,cy:p,r:1,opacity:v})},"grid-pattern-".concat(o))}))}),Cd.map((function(e,t){var n=e.step;return(0,f.jsx)("rect",{width:"100%",height:"100%",fill:"url(#grid-".concat(n,")")},"grid-rect-".concat(t))}))]})},jd=function(e){var t=e.handle,n=e.className;return(0,f.jsxs)("g",{className:kl("tl-handle",{"tl-handle__hint":"vertex"!==t.type},n),children:[(0,f.jsx)("circle",{className:"tl-handle__bg"}),(0,f.jsx)("circle",{className:"tl-handle__fg"})]})},Md=function(e){var t=e.scribble,n=e.zoom,r=e.color,i=e.opacity,o=e.className;if(t.points.length){var a=ad(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return wc(Cc(Sc(e,t),t),t)}(t.points,{size:t.size/n,start:{taper:!0,easing:Ol.linear},last:"stopping"===t.state,simulatePressure:!1,streamline:.32}));return(0,f.jsx)("svg",{className:o?kl("tl-overlays__item",o):o,children:(0,f.jsx)("path",{className:"tl-scribble",d:a,fill:null!==r&&void 0!==r?r:"var(--color-".concat(t.color,")"),opacity:null!==i&&void 0!==i?i:t.opacity})})}},Ad=function(){return(0,f.jsx)("div",{className:"tl-shape-error-boundary"})},Td=function(){return(0,f.jsx)("circle",{cx:4,cy:4,r:8,strokeWidth:"1",stroke:"red"})};function Od(e){var t,n,r,i,o=e.points,a=2.5/e.zoom,s=o.reduce((function(e,t){return Math.min(e,t.x)}),1/0),u=o.reduce((function(e,t){return Math.max(e,t.x)}),-1/0),l=o.reduce((function(e,t){return Math.min(e,t.y)}),1/0),c=o.reduce((function(e,t){return Math.max(e,t.y)}),-1/0),d=o.some((function(e){return e.x===s&&e.y===l}));return d?(t=s,n=l,r=u,i=c):(t=s,n=c,r=u,i=l),(0,f.jsxs)("g",{className:"tl-snap-line",children:[(0,f.jsx)("line",{x1:t,y1:n,x2:r,y2:i}),o.map((function(e,t){return(0,f.jsx)("g",{transform:"translate(".concat(e.x,",").concat(e.y,")"),children:(0,f.jsx)("path",{className:"tl-snap-point",d:"M ".concat(-a,",").concat(-a," L ").concat(a,",").concat(a," M ").concat(-a,",").concat(a," L ").concat(a,",").concat(-a)})},t)}))]})}function Nd(e){var n,r=e.gaps,i=e.direction,o=3.5/e.zoom,a=[-1/0,1/0],s=null,u="horizontal"===i,l=w(r);try{for(l.s();!(n=l.n()).done;){var c=n.value;(s=nc(a[0],a[1],u?c.startEdge[0].y:c.startEdge[0].x,u?c.startEdge[1].y:c.startEdge[1].x))&&((s=nc((a=s)[0],a[1],u?c.endEdge[0].y:c.endEdge[0].x,u?c.endEdge[1].y:c.endEdge[1].x))&&(a=s))}}catch(h){l.e(h)}finally{l.f()}if(null===a)return null;var d=(a[0]+a[1])/2;return(0,f.jsx)("g",{className:"tl-snap-line",children:r.map((function(e,n){var r=e.startEdge,i=e.endEdge;return(0,f.jsx)(t.Fragment,{children:u?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("line",{x1:r[0].x,y1:d-2*o,x2:r[1].x,y2:d+2*o}),(0,f.jsx)("line",{x1:i[0].x,y1:d-2*o,x2:i[1].x,y2:d+2*o}),(0,f.jsx)("line",{x1:r[0].x,y1:d,x2:i[0].x,y2:d}),(0,f.jsx)("line",{x1:(r[0].x+i[0].x)/2,y1:d-o,x2:(r[0].x+i[0].x)/2,y2:d+o})]}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("line",{x1:d-2*o,y1:r[0].y,x2:d+2*o,y2:r[1].y}),(0,f.jsx)("line",{x1:d-2*o,y1:i[0].y,x2:d+2*o,y2:i[1].y}),(0,f.jsx)("line",{x1:d,y1:r[0].y,x2:d,y2:i[0].y}),(0,f.jsx)("line",{x1:d-o,y1:(r[0].y+i[0].y)/2,x2:d+o,y2:(r[0].y+i[0].y)/2})]})},n)}))})}var Rd=function(e){var t=e.className,n=e.line,r=e.zoom;return(0,f.jsx)("svg",{className:kl("tl-overlays__item",t),children:"points"===n.type?(0,f.jsx)(Od,mt(mt({},n),{},{zoom:r})):"gaps"===n.type?(0,f.jsx)(Nd,mt(mt({},n),{},{zoom:r})):null})},Ld=function(){return(0,f.jsx)("svg",{width:16,height:16,viewBox:"0 0 16 16",children:(0,f.jsxs)("g",{strokeWidth:2,fill:"none",fillRule:"evenodd",children:[(0,f.jsx)("circle",{strokeOpacity:.25,cx:8,cy:8,r:7,stroke:"var(--color-text-1)"}),(0,f.jsx)("path",{strokeLinecap:"round",d:"M15 8c0-4.5-4.5-7-7-7",stroke:"var(--color-text-1)",children:(0,f.jsx)("animateTransform",{attributeName:"transform",type:"rotate",from:"0 8 8",to:"360 8 8",dur:"1s",repeatCount:"indefinite"})})]})})},Dd=function(){return null},zd=["children","fallback"],Bd={error:null},Fd=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"state",Bd),e}return oe(n,[{key:"componentDidCatch",value:function(e){var t,n;null===(t=(n=this.props).onError)||void 0===t||t.call(n,e)}},{key:"render",value:function(){var e=this.state.error;return null!==e?this.props.fallback(e):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}}]),n}(t.Component);function Ud(e){var t=e.children,n=e.fallback,r=So(e,zd);return null===n?(0,f.jsx)(f.Fragment,{children:t}):(0,f.jsx)(Fd,mt(mt({fallback:n},r),{},{children:t}))}var Kd=function(){function e(t){ne(this,e),this.shape=t}return oe(e,[{key:"equals",value:function(e){var t,n;return(null===(t=this.shape)||void 0===t?void 0:t.props)===(null===e||void 0===e||null===(n=e.shape)||void 0===n?void 0:n.props)}}]),e}(),Vd=function(e){var t=e.shape,n=e.util;return Sl("Indicator:"+t.type,(function(){return n.indicator(t)}))},Wd=function(e){var t=e.editor,n=e.id,r=Il("shape",(function(){return new Kd(t.store.get(n))}),[t,n]),i=Xd().ShapeIndicatorErrorFallback;return r.shape?(0,f.jsx)(Ud,{fallback:i?function(e){return(0,f.jsx)(i,{error:e})}:null,onError:function(e){return t.annotateError(e,{origin:"react.shapeIndicator",willCrashApp:!1})},children:(0,f.jsx)(Vd,{shape:r.shape,util:t.getShapeUtil(r.shape)},r.shape.id)}):null},Hd=t.memo((function(e){var t=e.id,n=e.className,r=e.color,i=e.opacity,o=Ml(),a=Il("transform",(function(){var e=o.getPageTransformById(t);return e?e.toCssString():""}),[o,t]);return(0,f.jsx)("svg",{className:kl("tl-overlays__item",n),children:(0,f.jsx)("g",{className:"tl-shape-indicator",transform:a,stroke:null!==r&&void 0!==r?r:"var(--color-selected)",opacity:i,children:(0,f.jsx)(Wd,{editor:o,id:t})})})})),Yd=(0,t.createContext)({});function qd(e){var t=e.overrides,n=e.children;return(0,f.jsx)(Yd.Provider,{value:mt({Background:hd,SvgDefs:Dd,Brush:vd,ZoomBrush:vd,CollaboratorBrush:vd,Cursor:md,CollaboratorCursor:md,CollaboratorHint:gd,CollaboratorShapeIndicator:Hd,Grid:Id,Scribble:Md,SnapLine:Rd,Handle:jd,CollaboratorScribble:Md,ErrorFallback:zp,ShapeErrorFallback:Ad,ShapeIndicatorErrorFallback:Td,Spinner:Ld},t),children:n})}function Xd(){return(0,t.useContext)(Yd)}var $d=["textarea","input"];function Gd(){return Gd="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=kt(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Gd.apply(this,arguments)}var Qd=function(e,t){return void 0===e&&(e=t),Array.isArray(e)?e:[e,e]},Jd=function(e,t){return[e[0]+t[0],e[1]+t[1]]},Zd=function(e,t){return[e[0]-t[0],e[1]-t[1]]},ef=function(e,t){e[0]+=t[0],e[1]+=t[1]};function tf(e,t,n){return 0===t||Math.abs(t)===1/0?Math.pow(e,5*n):e*t*n/(t+n*e)}function nf(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.15;return 0===r?function(e,t,n){return Math.max(t,Math.min(e,n))}(e,t,n):e<t?-tf(t-e,n-t,r)+t:e>n?+tf(e-n,n-t,r)+n:e}function rf(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function of(e,t,n){return(t=rf(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function af(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?af(Object(n),!0).forEach((function(t){of(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):af(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var uf={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function lf(e){return e?e[0].toUpperCase()+e.slice(1):""}var cf=["enter","leave"];function df(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=uf[e],i=r&&r[t]||t;return"on"+lf(e)+lf(i)+(function(){var e=arguments.length>1?arguments[1]:void 0;return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&!cf.includes(e)}(n,i)?"Capture":"")}var ff=["gotpointercapture","lostpointercapture"];function hf(e){var t=e.substring(2).toLowerCase(),n=!!~t.indexOf("passive");n&&(t=t.replace("passive",""));var r=ff.includes(t)?"capturecapture":"capture",i=!!~t.indexOf(r);return i&&(t=t.replace("capture","")),{device:t,capture:i,passive:n}}function pf(e){return"touches"in e}function vf(e){return pf(e)?"touch":"pointerType"in e?e.pointerType:"mouse"}function gf(e,t){try{var n=t.clientX-e.clientX,r=t.clientY-e.clientY,i=(t.clientX+e.clientX)/2,o=(t.clientY+e.clientY)/2,a=Math.hypot(n,r);return{angle:-180*Math.atan2(n,r)/Math.PI,distance:a,origin:[i,o]}}catch(s){}return null}function mf(e){return function(e){return Array.from(e.touches).filter((function(t){var n,r;return t.target===e.currentTarget||(null===(n=e.currentTarget)||void 0===n||null===(r=n.contains)||void 0===r?void 0:r.call(n,t.target))}))}(e).map((function(e){return e.identifier}))}function yf(e,t){var n=l(Array.from(e.touches).filter((function(e){return t.includes(e.identifier)})),2);return gf(n[0],n[1])}function bf(e){var t=e.deltaX,n=e.deltaY,r=e.deltaMode;return 1===r?(t*=40,n*=40):2===r&&(t*=800,n*=800),[t,n]}function wf(e){if("function"===typeof e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.apply(void 0,n)}return e}function xf(){}function kf(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?xf:1===t.length?t[0]:function(){for(var e,n=0,r=t;n<r.length;n++){e=r[n].apply(this,arguments)||e}return e}}function Sf(e,t){return Object.assign({},t,e||{})}var _f=function(){function e(t,n,r){ne(this,e),this.ctrl=t,this.args=n,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}return oe(e,[{key:"state",get:function(){return this.ctrl.state[this.key]},set:function(e){this.ctrl.state[this.key]=e}},{key:"shared",get:function(){return this.ctrl.state.shared}},{key:"eventStore",get:function(){return this.ctrl.gestureEventStores[this.key]}},{key:"timeoutStore",get:function(){return this.ctrl.gestureTimeoutStores[this.key]}},{key:"config",get:function(){return this.ctrl.config[this.key]}},{key:"sharedConfig",get:function(){return this.ctrl.config.shared}},{key:"handler",get:function(){return this.ctrl.handlers[this.key]}},{key:"reset",value:function(){var e=this.state,t=this.shared,n=this.ingKey,r=this.args;t[n]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=r,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}},{key:"start",value:function(e){var t=this.state,n=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=n.from?wf(n.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}},{key:"computeValues",value:function(e){var t=this.state;t._values=e,t.values=this.config.transform(e)}},{key:"computeInitial",value:function(){var e=this.state;e._initial=e._values,e.initial=e.values}},{key:"compute",value:function(e){var t=this.state,n=this.config,r=this.shared;t.args=this.args;var i=0;if(e&&(t.event=e,n.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,r.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,r.locked=!!document.pointerLockElement,Object.assign(r,function(e){var t={};if("buttons"in e&&(t.buttons=e.buttons),"shiftKey"in e){var n=e.shiftKey,r=e.altKey,i=e.metaKey,o=e.ctrlKey;Object.assign(t,{shiftKey:n,altKey:r,metaKey:i,ctrlKey:o})}return t}(e)),r.down=r.pressed=r.buttons%2===1||r.touches>0,i=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){var o=t._delta.map(Math.abs);ef(t._distance,o)}this.axisIntent&&this.axisIntent(e);var a=l(t._movement,2),s=a[0],u=a[1],c=l(n.threshold,2),d=c[0],f=c[1],h=t._step,p=t.values;if(n.hasCustomTransform?(!1===h[0]&&(h[0]=Math.abs(s)>=d&&p[0]),!1===h[1]&&(h[1]=Math.abs(u)>=f&&p[1])):(!1===h[0]&&(h[0]=Math.abs(s)>=d&&Math.sign(s)*d),!1===h[1]&&(h[1]=Math.abs(u)>=f&&Math.sign(u)*f)),t.intentional=!1!==h[0]||!1!==h[1],t.intentional){var v=[0,0];if(n.hasCustomTransform){var g=l(p,2),m=g[0],y=g[1];v[0]=!1!==h[0]?m-h[0]:0,v[1]=!1!==h[1]?y-h[1]:0}else v[0]=!1!==h[0]?s-h[0]:0,v[1]=!1!==h[1]?u-h[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(v);var b=t.offset,w=t._active&&!t._blocked||t.active;w&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=r[this.ingKey]=t._active,e&&(t.first&&("bounds"in n&&(t._bounds=wf(n.bounds,t)),this.setup&&this.setup()),t.movement=v,this.computeOffset()));var x=l(t.offset,2),k=x[0],S=x[1],_=l(t._bounds,2),E=l(_[0],2),C=E[0],P=E[1],I=l(_[1],2),j=I[0],M=I[1];t.overflow=[k<C?-1:k>P?1:0,S<j?-1:S>M?1:0],t._movementBound[0]=!!t.overflow[0]&&(!1===t._movementBound[0]?t._movement[0]:t._movementBound[0]),t._movementBound[1]=!!t.overflow[1]&&(!1===t._movementBound[1]?t._movement[1]:t._movementBound[1]);var A=t._active&&n.rubberband||[0,0];if(t.offset=function(e,t,n){var r=l(t,2),i=r[0],o=r[1],a=l(n,2),s=a[0],u=a[1],c=l(e,2),d=l(c[0],2),f=d[0],h=d[1],p=l(c[1],2),v=p[0],g=p[1];return[nf(i,f,h,s),nf(o,v,g,u)]}(t._bounds,t.offset,A),t.delta=Zd(t.offset,b),this.computeMovement(),w&&(!t.last||i>32)){t.delta=Zd(t.offset,b);var T=t.delta.map(Math.abs);ef(t.distance,T),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&i>0&&(t.velocity=[T[0]/i,T[1]/i],t.timeDelta=i)}}}},{key:"emit",value:function(){var e=this.state,t=this.shared,n=this.config;if(e._active||this.clean(),!e._blocked&&e.intentional||e._force||n.triggerAllEvents){var r=this.handler(sf(sf(sf({},t),e),{},vt({},this.aliasKey,e.values)));void 0!==r&&(e.memo=r)}}},{key:"clean",value:function(){this.eventStore.clean(),this.timeoutStore.clean()}}]),e}();var Ef=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return of(_t(e=t.call.apply(t,[this].concat(i))),"aliasKey","xy"),e}return oe(n,[{key:"reset",value:function(){Gd(kt(n.prototype),"reset",this).call(this),this.state.axis=void 0}},{key:"init",value:function(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}},{key:"computeOffset",value:function(){this.state.offset=Jd(this.state.lastOffset,this.state.movement)}},{key:"computeMovement",value:function(){this.state.movement=Zd(this.state.offset,this.state.lastOffset)}},{key:"axisIntent",value:function(e){var t=this.state,n=this.config;if(!t.axis&&e){var r="object"===typeof n.axisThreshold?n.axisThreshold[vf(e)]:n.axisThreshold;t.axis=function(e,t){var n=l(e,2),r=n[0],i=n[1],o=Math.abs(r),a=Math.abs(i);return o>a&&o>t?"x":a>o&&a>t?"y":void 0}(t._movement,r)}t._blocked=(n.lockDirection||!!n.axis)&&!t.axis||!!n.axis&&n.axis!==t.axis}},{key:"restrictToAxis",value:function(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0}}}]),n}(_f),Cf=function(e){return e},Pf={enabled:function(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]},eventOptions:function(e,t,n){return sf(sf({},n.shared.eventOptions),e)},preventDefault:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]},triggerAllEvents:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]},rubberband:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch(e){case!0:return[.15,.15];case!1:return[0,0];default:return Qd(e)}},from:function(e){return"function"===typeof e?e:null!=e?Qd(e):void 0},transform:function(e,t,n){var r=e||n.shared.transform;return this.hasCustomTransform=!!r,r||Cf},threshold:function(e){return Qd(e,0)}};var If=sf(sf({},Pf),{},{axis:function(e,t,n){var r=n.axis;if(this.lockDirection="lock"===r,!this.lockDirection)return r},axisThreshold:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:0},bounds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("function"===typeof e)return function(t){return If.bounds(e(t))};if("current"in e)return function(){return e.current};if("function"===typeof HTMLElement&&e instanceof HTMLElement)return e;var t=e.left,n=void 0===t?-1/0:t,r=e.right,i=void 0===r?1/0:r,o=e.top,a=void 0===o?-1/0:o,s=e.bottom;return[[n,i],[a,void 0===s?1/0:s]]}});var jf="undefined"!==typeof window&&window.document&&window.document.createElement;function Mf(){return jf&&"ontouchstart"in window||jf&&window.navigator.maxTouchPoints>1}var Af={isBrowser:jf,gesture:function(){try{return"constructor"in GestureEvent}catch(VO){return!1}}(),touch:Mf(),touchscreen:Mf(),pointer:jf&&"onpointerdown"in window,pointerLock:jf&&"exitPointerLock"in window.document},Tf={mouse:0,touch:0,pen:8};sf(sf({},If),{},{device:function(e,t,n){var r=n.pointer,i=void 0===r?{}:r,o=i.touch,a=void 0!==o&&o,s=i.lock,u=void 0!==s&&s,l=i.mouse,c=void 0!==l&&l;return this.pointerLock=u&&Af.pointerLock,Af.touch&&a?"touch":this.pointerLock?"mouse":Af.pointer&&!c?"pointer":Af.touch?"touch":"mouse"},preventScrollAxis:function(e,t,n){var r=n.preventScroll;if(this.preventScrollDelay="number"===typeof r?r:r||void 0===r&&e?250:void 0,Af.touchscreen&&!1!==r)return e||(void 0!==r?"y":void 0)},pointerCapture:function(e,t,n){var r=n.pointer,i=void 0===r?{}:r,o=i.capture,a=void 0===o||o,s=i.buttons,u=void 0===s?1:s,l=i.keys,c=void 0===l||l;return this.pointerButtons=u,this.keys=c,!this.pointerLock&&"pointer"===this.device&&a},threshold:function(e,t,n){var r=n.filterTaps,i=void 0!==r&&r,o=n.tapsThreshold,a=void 0===o?3:o,s=n.axis,u=Qd(e,i?a:(void 0===s?void 0:s)?1:0);return this.filterTaps=i,this.tapsThreshold=a,u},swipe:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.velocity,n=void 0===t?.5:t,r=e.distance,i=void 0===r?50:r,o=e.duration,a=void 0===o?250:o;return{velocity:this.transform(Qd(n)),distance:this.transform(Qd(i)),duration:a}},delay:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch(e){case!0:return 180;case!1:return 0;default:return e}},axisThreshold:function(e){return e?sf(sf({},Tf),e):Tf},keyboardDisplacement:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:10}});function Of(e){var t=l(e.overflow,2),n=t[0],r=t[1],i=l(e._delta,2),o=i[0],a=i[1],s=l(e._direction,2),u=s[0],c=s[1];(n<0&&o>0&&u<0||n>0&&o<0&&u>0)&&(e._movement[0]=e._movementBound[0]),(r<0&&a>0&&c<0||r>0&&a<0&&c>0)&&(e._movement[1]=e._movementBound[1])}var Nf=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return of(_t(e=t.call.apply(t,[this].concat(i))),"ingKey","pinching"),of(_t(e),"aliasKey","da"),e}return oe(n,[{key:"init",value:function(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}},{key:"reset",value:function(){Gd(kt(n.prototype),"reset",this).call(this);var e=this.state;e._touchIds=[],e.canceled=!1,e.cancel=this.cancel.bind(this),e.turns=0}},{key:"computeOffset",value:function(){var e=this.state,t=e.type,n=e.movement,r=e.lastOffset;this.state.offset="wheel"===t?Jd(n,r):[(1+n[0])*r[0],n[1]+r[1]]}},{key:"computeMovement",value:function(){var e=this.state,t=e.offset,n=e.lastOffset;this.state.movement=[t[0]/n[0],t[1]-n[1]]}},{key:"axisIntent",value:function(){var e=this.state,t=l(e._movement,2),n=t[0],r=t[1];if(!e.axis){var i=30*Math.abs(n)-Math.abs(r);i<0?e.axis="angle":i>0&&(e.axis="scale")}}},{key:"restrictToAxis",value:function(e){this.config.lockDirection&&("scale"===this.state.axis?e[1]=0:"angle"===this.state.axis&&(e[0]=0))}},{key:"cancel",value:function(){var e=this,t=this.state;t.canceled||setTimeout((function(){t.canceled=!0,t._active=!1,e.compute(),e.emit()}),0)}},{key:"touchStart",value:function(e){this.ctrl.setEventIds(e);var t=this.state,n=this.ctrl.touchIds;if((!t._active||!t._touchIds.every((function(e){return n.has(e)})))&&!(n.size<2)){this.start(e),t._touchIds=Array.from(n).slice(0,2);var r=yf(e,t._touchIds);r&&this.pinchStart(e,r)}}},{key:"pointerStart",value:function(e){if(null==e.buttons||e.buttons%2===1){this.ctrl.setEventIds(e),e.target.setPointerCapture(e.pointerId);var t=this.state,n=t._pointerEvents,r=this.ctrl.pointerIds;if((!t._active||!Array.from(n.keys()).every((function(e){return r.has(e)})))&&(n.size<2&&n.set(e.pointerId,e),!(t._pointerEvents.size<2))){this.start(e);var i=gf.apply(void 0,d(Array.from(n.values())));i&&this.pinchStart(e,i)}}}},{key:"pinchStart",value:function(e,t){this.state.origin=t.origin,this.computeValues([t.distance,t.angle]),this.computeInitial(),this.compute(e),this.emit()}},{key:"touchMove",value:function(e){if(this.state._active){var t=yf(e,this.state._touchIds);t&&this.pinchMove(e,t)}}},{key:"pointerMove",value:function(e){var t=this.state._pointerEvents;if(t.has(e.pointerId)&&t.set(e.pointerId,e),this.state._active){var n=gf.apply(void 0,d(Array.from(t.values())));n&&this.pinchMove(e,n)}}},{key:"pinchMove",value:function(e,t){var n=this.state,r=n._values[1],i=t.angle-r,o=0;Math.abs(i)>270&&(o+=Math.sign(i)),this.computeValues([t.distance,t.angle-360*o]),n.origin=t.origin,n.turns=o,n._movement=[n._values[0]/n._initial[0]-1,n._values[1]-n._initial[1]],this.compute(e),this.emit()}},{key:"touchEnd",value:function(e){var t=this;this.ctrl.setEventIds(e),this.state._active&&this.state._touchIds.some((function(e){return!t.ctrl.touchIds.has(e)}))&&(this.state._active=!1,this.compute(e),this.emit())}},{key:"pointerEnd",value:function(e){var t=this.state;this.ctrl.setEventIds(e);try{e.target.releasePointerCapture(e.pointerId)}catch(n){}t._pointerEvents.has(e.pointerId)&&t._pointerEvents.delete(e.pointerId),t._active&&t._pointerEvents.size<2&&(t._active=!1,this.compute(e),this.emit())}},{key:"gestureStart",value:function(e){e.cancelable&&e.preventDefault();var t=this.state;t._active||(this.start(e),this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY],this.compute(e),this.emit())}},{key:"gestureMove",value:function(e){if(e.cancelable&&e.preventDefault(),this.state._active){var t=this.state;this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY];var n=t._movement;t._movement=[e.scale-1,e.rotation],t._delta=Zd(t._movement,n),this.compute(e),this.emit()}}},{key:"gestureEnd",value:function(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}},{key:"wheel",value:function(e){var t=this.config.modifierKey;t&&!e[t]||(this.state._active?this.wheelChange(e):this.wheelStart(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}},{key:"wheelStart",value:function(e){this.start(e),this.wheelChange(e)}},{key:"wheelChange",value:function(e){"uv"in e||e.cancelable&&e.preventDefault();var t=this.state;t._delta=[-bf(e)[1]/100*t.offset[0],0],ef(t._movement,t._delta),Of(t),this.state.origin=[e.clientX,e.clientY],this.compute(e),this.emit()}},{key:"wheelEnd",value:function(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}},{key:"bind",value:function(e){var t=this.config.device;t&&(e(t,"start",this[t+"Start"].bind(this)),e(t,"change",this[t+"Move"].bind(this)),e(t,"end",this[t+"End"].bind(this)),e(t,"cancel",this[t+"End"].bind(this)),e("lostPointerCapture","",this[t+"End"].bind(this))),this.config.pinchOnWheel&&e("wheel","",this.wheel.bind(this),{passive:!1})}}]),n}(_f),Rf=sf(sf({},Pf),{},{device:function(e,t,n){var r=n.shared,i=n.pointer,o=(void 0===i?{}:i).touch,a=void 0!==o&&o;if(r.target&&!Af.touch&&Af.gesture)return"gesture";if(Af.touch&&a)return"touch";if(Af.touchscreen){if(Af.pointer)return"pointer";if(Af.touch)return"touch"}},bounds:function(e,t,n){var r=n.scaleBounds,i=void 0===r?{}:r,o=n.angleBounds,a=void 0===o?{}:o,s=function(e){var t=Sf(wf(i,e),{min:-1/0,max:1/0});return[t.min,t.max]},u=function(e){var t=Sf(wf(a,e),{min:-1/0,max:1/0});return[t.min,t.max]};return"function"!==typeof i&&"function"!==typeof a?[s(),u()]:function(e){return[s(e),u(e)]}},threshold:function(e,t,n){this.lockDirection="lock"===n.axis;var r=Qd(e,this.lockDirection?[.1,3]:0);return r},modifierKey:function(e){return void 0===e?"ctrlKey":e},pinchOnWheel:function(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}}),Lf=(sf(sf({},If),{},{mouseOnly:function(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}}),function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return of(_t(e=t.call.apply(t,[this].concat(i))),"ingKey","wheeling"),e}return oe(n,[{key:"wheel",value:function(e){this.state._active||this.start(e),this.wheelChange(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}},{key:"wheelChange",value:function(e){var t=this.state;t._delta=bf(e),ef(t._movement,t._delta),Of(t),this.compute(e),this.emit()}},{key:"wheelEnd",value:function(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}},{key:"bind",value:function(e){e("wheel","",this.wheel.bind(this))}}]),n}(Ef)),Df=If,zf=(sf(sf({},If),{},{mouseOnly:function(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}}),new Map),Bf=new Map;function Ff(e){zf.set(e.key,e.engine),Bf.set(e.key,e.resolver)}var Uf={key:"pinch",engine:Nf,resolver:Rf},Kf={key:"wheel",engine:Lf,resolver:Df};function Vf(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var Wf={target:function(e){if(e)return function(){return"current"in e?e.current:e}},enabled:function(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]},window:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:Af.isBrowser?window:void 0})),eventOptions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.passive,n=void 0===t||t,r=e.capture;return{passive:n,capture:void 0!==r&&r}},transform:function(e){return e}},Hf=["target","eventOptions","window","enabled","transform"];function Yf(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n={},r=0,i=Object.entries(t);r<i.length;r++){var o=l(i[r],2),a=o[0],s=o[1];switch(typeof s){case"function":n[a]=s.call(n,e[a],a,e);break;case"object":n[a]=Yf(e[a],s);break;case"boolean":s&&(n[a]=e[a])}}return n}var qf=function(){function e(t,n){ne(this,e),of(this,"_listeners",new Set),this._ctrl=t,this._gestureKey=n}return oe(e,[{key:"add",value:function(e,t,n,r,i){var o=this._listeners,a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=uf[e];return e+(n&&n[t]||t)}(t,n),s=sf(sf({},this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{}),i);e.addEventListener(a,r,s);var u=function t(){e.removeEventListener(a,r,s),o.delete(t)};return o.add(u),u}},{key:"clean",value:function(){this._listeners.forEach((function(e){return e()})),this._listeners.clear()}}]),e}(),Xf=function(){function e(){ne(this,e),of(this,"_timeouts",new Map)}return oe(e,[{key:"add",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:140;this.remove(e);for(var i=arguments.length,o=new Array(i>3?i-3:0),a=3;a<i;a++)o[a-3]=arguments[a];this._timeouts.set(e,(n=window).setTimeout.apply(n,[t,r].concat(o)))}},{key:"remove",value:function(e){var t=this._timeouts.get(e);t&&window.clearTimeout(t)}},{key:"clean",value:function(){this._timeouts.forEach((function(e){window.clearTimeout(e)})),this._timeouts.clear()}}]),e}(),$f=function(){function e(t){ne(this,e),of(this,"gestures",new Set),of(this,"_targetEventStore",new qf(this)),of(this,"gestureEventStores",{}),of(this,"gestureTimeoutStores",{}),of(this,"handlers",{}),of(this,"config",{}),of(this,"pointerIds",new Set),of(this,"touchIds",new Set),of(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),function(e,t){t.drag&&Gf(e,"drag");t.wheel&&Gf(e,"wheel");t.scroll&&Gf(e,"scroll");t.move&&Gf(e,"move");t.pinch&&Gf(e,"pinch");t.hover&&Gf(e,"hover")}(this,t)}return oe(e,[{key:"setEventIds",value:function(e){return pf(e)?(this.touchIds=new Set(mf(e)),this.touchIds):"pointerId"in e?("pointerup"===e.type||"pointercancel"===e.type?this.pointerIds.delete(e.pointerId):"pointerdown"===e.type&&this.pointerIds.add(e.pointerId),this.pointerIds):void 0}},{key:"applyHandlers",value:function(e,t){this.handlers=e,this.nativeHandlers=t}},{key:"applyConfig",value:function(e,t){this.config=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e,i=r.target,o=r.eventOptions,a=r.window,s=r.enabled,u=r.transform,l=Vf(r,Hf);if(n.shared=Yf({target:i,eventOptions:o,window:a,enabled:s,transform:u},Wf),t){var c=Bf.get(t);n[t]=Yf(sf({shared:n.shared},l),c)}else for(var d in l){var f=Bf.get(d);f&&(n[d]=Yf(sf({shared:n.shared},l[d]),f))}return n}(e,t,this.config)}},{key:"clean",value:function(){this._targetEventStore.clean();var e,t=w(this.gestures);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.gestureEventStores[n].clean(),this.gestureTimeoutStores[n].clean()}}catch(r){t.e(r)}finally{t.f()}}},{key:"effect",value:function(){var e=this;return this.config.shared.target&&this.bind(),function(){return e._targetEventStore.clean()}}},{key:"bind",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i,o=this.config.shared,a={};if(!o.target||(i=o.target())){if(o.enabled){var s,u=w(this.gestures);try{for(u.s();!(s=u.n()).done;){var l=s.value,c=this.config[l],f=Qf(a,c.eventOptions,!!i);if(c.enabled)new(zf.get(l))(this,n,l).bind(f)}}catch(S){u.e(S)}finally{u.f()}var h=Qf(a,o.eventOptions,!!i),p=function(t){h(t,"",(function(r){return e.nativeHandlers[t](sf(sf({},e.state.shared),{},{event:r,args:n}))}),void 0,!0)};for(var v in this.nativeHandlers)p(v)}for(var g in a)a[g]=kf.apply(void 0,d(a[g]));if(!i)return a;for(var m in a){var y=hf(m),b=y.device,x=y.capture,k=y.passive;this._targetEventStore.add(i,b,"",a[m],{capture:x,passive:k})}}}}]),e}();function Gf(e,t){e.gestures.add(t),e.gestureEventStores[t]=new qf(e,t),e.gestureTimeoutStores[t]=new Xf}var Qf=function(e,t,n){return function(r,i,o){var a,s,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},l=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=null!==(a=u.capture)&&void 0!==a?a:t.capture,d=null!==(s=u.passive)&&void 0!==s?s:t.passive,f=l?r:df(r,i,c);n&&d&&(f+="Passive"),e[f]=e[f]||[],e[f].push(o)}},Jf=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function Zf(e,t,n,r,i,o){if(e.has(n)&&zf.has(r)){var a=n+"Start",s=n+"End";i[r]=function(e){var r=void 0;return e.first&&a in t&&t[a](e),n in t&&(r=t[n](e)),e.last&&s in t&&t[s](e),r},o[r]=o[r]||{}}}function eh(e,t){var n=function(e){var t={},n={},r=new Set;for(var i in e)Jf.test(i)?(r.add(RegExp.lastMatch),n[i]=e[i]):t[i]=e[i];return[n,t,r]}(e),r=l(n,3),i=r[0],o=r[1],a=r[2],s={};return Zf(a,i,"onDrag","drag",s,t),Zf(a,i,"onWheel","wheel",s,t),Zf(a,i,"onScroll","scroll",s,t),Zf(a,i,"onPinch","pinch",s,t),Zf(a,i,"onMove","move",s,t),Zf(a,i,"onHover","hover",s,t),{handlers:s,config:t,nativeHandlers:o}}function th(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=t.useMemo((function(){return new $f(e)}),[]);if(o.applyHandlers(e,i),o.applyConfig(n,r),t.useEffect(o.effect.bind(o)),t.useEffect((function(){return o.clean.bind(o)}),[]),void 0===n.target)return o.bind.bind(o)}function nh(e){return e.forEach(Ff),function(e,t){var n=eh(e,t||{}),r=n.handlers,i=n.nativeHandlers;return th(r,n.config,void 0,i)}}var rh=n(3881),ih=10,oh=/Mac|iPod|iPhone|iPad/.test("undefined"===typeof window?"node":window.navigator.platform);function ah(e){var t=e.deltaY,n=e.deltaX,r=0;if(e.ctrlKey||e.altKey||e.metaKey){var i=Math.sign(e.deltaY),o=t;Math.abs(e.deltaY)>ih&&(o=ih*i),r=o/100}else e.shiftKey&&!oh&&(n=t,t=0);return{x:-n,y:-t,z:-r}}var sh=nh([Kf,Uf]),uh=void 0;function lh(e){var n=Ml(),r=t.useMemo((function(){var t=null,r=1,i=1,o=1,a=0,s=new Nl,u=new Nl,l=rh((function(e){if(null===t){var n=Math.abs(a-r),i=Nl.Dist(s,u);"gesture"===e&&n||"touch"===e&&n>16?t="zooming":i>16&&(t="panning")}}),32);return{onWheel:function(e){var r=e.event;if(n.isFocused&&(t=null,!function(e){return void 0===uh?(uh=e,!1):e-uh>120&&e-uh<160?(uh=e,!0):(uh=e,!1)}(Date.now()))){if(n.editingId){var i=n.getShapeById(n.editingId);if(i)if(n.getShapeUtil(i).canScroll(i)){var o=n.getPageBoundsById(n.editingId);if(null!==o&&void 0!==o&&o.containsPoint(n.inputs.currentPagePoint))return}}$c(r);var a=ah(r);if(0!==a.x||0!==a.y){var s={type:"wheel",name:"wheel",delta:a,shiftKey:r.shiftKey,altKey:r.altKey,ctrlKey:r.metaKey||r.ctrlKey};n.dispatch(s)}}},onPinchStart:function(o){var a=e.current;t=null;var l=o.event,c=o.origin,d=o.da;l instanceof WheelEvent||(l.target===a||null!==a&&void 0!==a&&a.contains(l.target))&&(u.x=c[0],u.y=c[1],s.x=c[0],s.y=c[1],r=d[0],i=n.zoomLevel,n.dispatch({type:"pinch",name:"pinch_start",point:{x:c[0],y:c[1],z:n.zoomLevel},delta:{x:0,y:0},shiftKey:l.shiftKey,altKey:l.altKey,ctrlKey:l.metaKey||l.ctrlKey}))},onPinchEnd:function(r){var i=e.current,o=r.event,a=r.origin,s=r.offset;if(!(o instanceof WheelEvent)&&(o.target===i||null!==i&&void 0!==i&&i.contains(o.target))){var u=s[0];t=null,requestAnimationFrame((function(){n.dispatch({type:"pinch",name:"pinch_end",point:{x:a[0],y:a[1],z:u},delta:{x:a[0],y:a[1]},shiftKey:o.shiftKey,altKey:o.altKey,ctrlKey:o.metaKey||o.ctrlKey})}))}},onPinch:function(r){var s=e.current,c=r.event,d=r.origin,f=r.offset,h=r.da;if(!(c instanceof WheelEvent)&&(c.target===s||null!==s&&void 0!==s&&s.contains(c.target))){var p=!("touches"in c);a=h[0],(p||a>64)&&(o=f[0]);var v=d[0]-u.x,g=d[1]-u.y;switch(u.x=d[0],u.y=d[1],l(p?"gesture":"touch"),t){case"zooming":n.dispatch({type:"pinch",name:"pinch",point:{x:d[0],y:d[1],z:o},delta:{x:v,y:g},shiftKey:c.shiftKey,altKey:c.altKey,ctrlKey:c.metaKey||c.ctrlKey});break;case"panning":n.dispatch({type:"pinch",name:"pinch",point:{x:d[0],y:d[1],z:i},delta:{x:v,y:g},shiftKey:c.shiftKey,altKey:c.altKey,ctrlKey:c.metaKey||c.ctrlKey})}}}}}),[n,e]);sh(r,{target:e,eventOptions:{passive:!1},pinch:{from:function(){return[n.zoomLevel,0]},scaleBounds:function(){return{from:n.zoomLevel,max:8,min:.05}}}})}function ch(e,t,n){var r=e.getShapeById(t);return{shape:r,handle:e.getShapeUtil(r).handles(r).find((function(e){return e.id===n}))}}var dh=function(e,t,n){return new Promise((function(r,i){var o=8*t*e,a=document.createElement("canvas");a.width=o,a.height=o;var s=a.getContext("2d");if(s){s.fillStyle=n?"#212529":"#f8f9fa",s.fillRect(0,0,o,o),s.globalCompositeOperation="destination-out",s.lineCap="round",s.lineWidth=1.25*t*e;var u=8/12,l=function(n){return n*t*e};s.beginPath(),s.moveTo(l(1*u),l(2)),s.lineTo(l(2),l(1*u)),s.moveTo(l(5*u),l(7*u)),s.lineTo(l(7*u),l(5*u)),s.moveTo(l(6),l(11*u)),s.lineTo(l(11*u),l(6)),s.stroke(),a.toBlob((function(e){!e||Kc.throwToBlob.value?i():r(e)}))}}))},fh=function(e,t){var n=document.createElement("canvas");n.width=e[0],n.height=e[1];var r=n.getContext("2d");return r?(t(r),n.toDataURL()):""},hh=function(){var e=Ml().devicePixelRatio,n=l((0,t.useState)(!1),2),r=n[0],i=n[1],o=(0,t.useMemo)((function(){return function(){for(var e=[],t=1;t<=Math.ceil(8);t++){var n=fh([1,1],(function(e){e.fillStyle="#e8e8e8",e.fillRect(0,0,1,1)})),r=fh([1,1],(function(e){e.fillStyle="#2c3036",e.fillRect(0,0,1,1)}));e.push({zoom:t,url:n,darkMode:!1}),e.push({zoom:t,url:r,darkMode:!0})}return e}()}),[]),a=l((0,t.useState)(o),2),s=a[0],u=a[1];return(0,t.useEffect)((function(){for(var t=[],n=function(n){t.push(dh(e,n,!1).then((function(e){return{zoom:n,url:URL.createObjectURL(e),darkMode:!1}}))),t.push(dh(e,n,!0).then((function(e){return{zoom:n,url:URL.createObjectURL(e),darkMode:!0}})))},r=1;r<=Math.ceil(8);r++)n(r);var o=!1;return Promise.all(t).then((function(e){o||(u(e),i(!0))})),function(){o=!0,i(!1)}}),[e]),{context:(0,f.jsx)(f.Fragment,{children:s.map((function(e){var t=e.zoom+(e.darkMode?"_dark":"_light");return(0,f.jsx)("pattern",{id:kd[t],width:8,height:8,patternUnits:"userSpaceOnUse",children:(0,f.jsx)("image",{href:e.url,width:8,height:8})},t)}))}),isReady:r}},ph=8/12;function vh(e){var t=document.createElement("div");return t.innerHTML='\n\t\t<svg>\n\t\t\t<defs>\n\t\t\t\t<mask id="hash_pattern_mask">\n\t\t\t\t\t<rect x="0" y="0" width="8" height="8" fill="white" />\n\t\t\t\t\t<g\n\t\t\t\t\t\tstrokeLinecap="round"\n\t\t\t\t\t\tstroke="black"\n\t\t\t\t\t>\n\t\t\t\t\t\t<line x1="'.concat(1*ph,'" y1="').concat(2,'" x2="').concat(2,'" y2="').concat(1*ph,'" />\n\t\t\t\t\t\t<line x1="').concat(5*ph,'" y1="').concat(7*ph,'" x2="').concat(7*ph,'" y2="').concat(5*ph,'" />\n\t\t\t\t\t\t<line x1="').concat(6,'" y1="').concat(11*ph,'" x2="').concat(11*ph,'" y2="').concat(6,'" />\n\t\t\t\t\t</g>\n\t\t\t\t</mask>\n\t\t\t\t<pattern\n\t\t\t\t\tid="hash_pattern"\n\t\t\t\t\twidth="8"\n\t\t\t\t\theight="8"\n\t\t\t\t\tpatternUnits="userSpaceOnUse"\n\t\t\t\t>\n\t\t\t\t\t<rect x="0" y="0" width="8" height="8" fill="').concat(e,'" mask="url(#hash_pattern_mask)" />\n\t\t\t\t</pattern>\n\t\t\t</defs>\n\t\t</svg>\n\t'),t.querySelectorAll("defs > *")}function gh(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Li;(0,t.useEffect)((function(){var t=new uo(e,n);return t.attach(),t.execute(),function(){t.detach()}}),r)}var mh=n(9409);function yh(){var e=Ml(),n=(0,t.useMemo)((function(){return e.store.query.records("instance_presence",(function(){return{userId:{neq:e.user.id}}}))}),[e]),r=function(){var e=arguments[0],n=arguments[1],r=3===arguments.length?void 0:arguments[2],i=3===arguments.length?arguments[2]:arguments[3];return(0,t.useMemo)((function(){return so("useComputed(".concat(e,")"),n,r)}),i)}("userIds",(function(){return mh(n.value.map((function(e){return e.userId}))).sort()}),{isEqual:function(e,t){var n;return e.join(",")===(null===(n=t.join)||void 0===n?void 0:n.call(t,","))}},[n]);return Il(r)}function bh(e){var n=Ml(),r=(0,t.useMemo)((function(){return n.store.query.records("instance_presence",(function(){return{userId:{eq:e}}}))}),[n,e]),i=Il("latestPresence:".concat(e),(function(){return r.value.slice().sort((function(e,t){return t.lastActivityTimestamp-e.lastActivityTimestamp}))[0]}),[]);return null!==i&&void 0!==i?i:null}var wh=Pl((function(){var e=yh();return(0,f.jsx)(f.Fragment,{children:e.map((function(e){return(0,f.jsx)(xh,{userId:e},e)}))})})),xh=Pl((function(e){var n=e.userId,r=Ml(),i=r.viewportPageBounds,o=r.zoomLevel,a=Xd(),s=a.CollaboratorBrush,u=a.CollaboratorScribble,c=a.CollaboratorCursor,d=a.CollaboratorHint,h=a.CollaboratorShapeIndicator,p=bh(n),v=l((0,t.useState)(!1),2),g=v[0],m=v[1],y=(0,t.useRef)(-1);if((0,t.useEffect)((function(){var e=setInterval((function(){m(Date.now()-y.current>3e3)}),1200);return function(){return clearInterval(e)}}),[]),!p)return null;if(y.current=p.lastActivityTimestamp,g&&r.instanceState.followingUserId!==n&&!r.instanceState.highlightedUserIds.includes(n))return null;if(p.currentPageId!==r.currentPageId)return null;var b=p.brush,w=p.scribble,x=p.selectedIds,k=p.userName,S=p.cursor,_=p.color,E=p.chatMessage,C=!(S.x<i.minX-12/o||S.y<i.minY-16/o||S.x>i.maxX-12/o||S.y>i.maxY-16/o);return(0,f.jsxs)(f.Fragment,{children:[b&&s?(0,f.jsx)(s,{className:"tl-collaborator__brush",brush:b,color:_,opacity:.1},n+"_brush"):null,C&&c?(0,f.jsx)(c,{className:"tl-collaborator__cursor",point:S,color:_,zoom:o,name:"New User"!==k?k:null,chatMessage:E},n+"_cursor"):d?(0,f.jsx)(d,{className:"tl-collaborator__cursor-hint",point:S,color:_,zoom:o,viewport:i},n+"_cursor_hint"):null,w&&u?(0,f.jsx)(u,{className:"tl-collaborator__scribble",scribble:w,color:_,zoom:o,opacity:"laser"===w.color?.5:.1},n+"_scribble"):null,h&&x.map((function(e){return(0,f.jsx)(h,{className:"tl-collaborator__shape-indicator",id:e,color:_,opacity:.5},n+"_"+e)}))]})})),kh=Pl((function(){var e=Ml(),n=t.useMemo((function(){return{onPointerDown:function(t){if(!t.isKilled){Gc(t.currentTarget,t);var n=mt({type:"pointer",target:"selection",name:"pointer_down"},rd(t,e.getContainer()));e.dispatch(n)}},onPointerMove:function(t){if(!t.isKilled){var n=mt({type:"pointer",target:"selection",name:"pointer_move"},rd(t,e.getContainer()));e.dispatch(n)}},onPointerUp:function(t){if(!t.isKilled){Qc(t.currentTarget,t);var n=mt({type:"pointer",target:"selection",name:"pointer_up"},rd(t,e.getContainer()));e.dispatch(n)}},onPointerEnter:function(t){if(!t.isKilled){var n=mt({type:"pointer",target:"selection",name:"pointer_enter"},rd(t,e.getContainer()));e.dispatch(n)}},onPointerLeave:function(t){if(!t.isKilled){var n=mt({type:"pointer",target:"selection",name:"pointer_leave"},rd(t,e.getContainer()));e.dispatch(n)}}}}),[e]),r=e.selectionBounds,i=e.selectedIds;if(!r)return null;var o=e.isInAny("select.idle","select.brushing","select.scribble_brushing","select.pointing_shape","select.pointing_selection","text.resizing");if(1===i.length){var a=e.getShapeById(i[0]);if(!a)return null;if(e.getShapeUtil(a).hideSelectionBoundsBg(a))return null}var s=mc.toCssString(mc.Compose(mc.Translate(r.minX,r.minY),mc.Rotate(e.selectionRotation)));return(0,f.jsx)("div",mt({className:"tl-selection__bg",draggable:!1,style:{transform:s,width:oc(Math.max(1,r.width)),height:oc(Math.max(1,r.height)),pointerEvents:o?"all":"none",opacity:o?1:0}},n))})),Sh=["children","className"];function _h(e){var t=e.children,n=e.className,r=void 0===n?"":n,i=So(e,Sh);return(0,f.jsx)("div",mt(mt({},i),{},{className:"tl-html-container ".concat(r),children:t}))}function Eh(e){var t=Ml();return Il("isEditing",(function(){return t.editingId===e}),[t,e])}var Ch=function(e){return e.split("*").map((function(e){return function(e){if("string"!==typeof e)throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}(e)})).join(".+")},Ph=function(e,t){return!!e.find((function(e){var n=new RegExp(Ch(e));return t.match(n)}))};function Ih(e){var t;return null!==(t=function(e){var t,n=new URL(e).host.replace("www.",""),r=w(xu);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(Ph(i.hostnames,n)){var o=i.toEmbedUrl(e);if(o)return{definition:i,embedUrl:o,url:e}}}}catch(a){r.e(a)}finally{r.f()}}(e))&&void 0!==t?t:function(e){var t,n=new URL(e).host.replace("www.",""),r=w(xu);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(Ph(i.hostnames,n)){var o=i.fromEmbedUrl(e);if(o)return{definition:i,url:o,embedUrl:e}}}}catch(a){r.e(a)}finally{r.f()}}(e)}function jh(e){try{return Ih(e)}catch(VO){console.error(VO)}}var Mh=Object.defineProperty,Ah=Object.getOwnPropertyDescriptor,Th=function(e,t,n,r){for(var i,o=r>1?void 0:r?Ah(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Mh(t,n,o),o},Oh=function(){function e(t,n,r){var i=this;ne(this,e),vt(this,"canSnap",(function(){return!0})),vt(this,"canScroll",(function(){return!1})),vt(this,"canUnmount",(function(){return!0})),vt(this,"canBind",(function(e,t){return!0})),vt(this,"canEdit",(function(){return!1})),vt(this,"canResize",(function(){return!0})),vt(this,"canCrop",(function(){return!1})),vt(this,"getEditingBounds",(function(e){return i.bounds(e)})),vt(this,"isClosed",(function(){return!0})),vt(this,"hideResizeHandles",(function(){return!1})),vt(this,"hideRotateHandle",(function(){return!1})),vt(this,"hideSelectionBoundsBg",(function(){return!1})),vt(this,"hideSelectionBoundsFg",(function(){return!1})),vt(this,"isAspectRatioLocked",(function(){return!1})),vt(this,"onBeforeCreate",void 0),vt(this,"onBeforeUpdate",void 0),vt(this,"onDragShapesOver",void 0),vt(this,"onDragShapesOut",void 0),vt(this,"onDropShapesOver",void 0),vt(this,"onResizeStart",void 0),vt(this,"onResize",void 0),vt(this,"onResizeEnd",void 0),vt(this,"onTranslateStart",void 0),vt(this,"onTranslate",void 0),vt(this,"onTranslateEnd",void 0),vt(this,"onRotateStart",void 0),vt(this,"onRotate",void 0),vt(this,"onRotateEnd",void 0),vt(this,"onHandleChange",void 0),vt(this,"onBindingChange",void 0),vt(this,"onChildrenChange",void 0),vt(this,"onDoubleClickHandle",void 0),vt(this,"onDoubleClickEdge",void 0),vt(this,"onDoubleClick",void 0),vt(this,"onClick",void 0),vt(this,"onEditEnd",void 0),this.editor=t,this.type=n,this.styleProps=r}return oe(e,[{key:"hasStyle",value:function(e){return this.styleProps.has(e)}},{key:"getStyleIfExists",value:function(e,t){var n=this.styleProps.get(e);if(n)return t.props[n]}},{key:"iterateStyles",value:m().mark((function e(t){var n,r,i,o,a,s;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=w(this.styleProps),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=10;break}return i=l(r.value,2),o=i[0],a=i[1],s=t.props[a],e.next=8,[o,s];case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[1,12,15,18]])}))},{key:"setStyleInPartial",value:function(e,t,n){var r=this.styleProps.get(e);return r?mt(mt({},t),{},{props:mt(mt({},t.props),{},vt({},r,n))}):t}},{key:"handlesCache",get:function(){var e=this;return this.editor.store.createComputedCache("handles:"+this.type,(function(t){return e.getHandles(t)}))}},{key:"handles",value:function(e){var t;return this.getHandles&&null!==(t=this.handlesCache.get(e.id))&&void 0!==t?t:Li}},{key:"getOutlineSegments",value:function(e){return[this.outline(e)]}},{key:"outlineSegmentsCache",get:function(){var e=this;return this.editor.store.createComputedCache("outline-segments:"+this.type,(function(t){return e.getOutlineSegments(t)}))}},{key:"outlineSegments",value:function(e){var t;return this.getOutlineSegments&&null!==(t=this.outlineSegmentsCache.get(e.id))&&void 0!==t?t:Li}},{key:"boundsCache",get:function(){var e=this;return this.editor.store.createComputedCache("bounds:"+this.type,(function(t){return e.getBounds(t)}))}},{key:"bounds",value:function(e){var t,n=null!==(t=this.boundsCache.get(e.id))&&void 0!==t?t:new lc;return 0===n.width||0===n.height?new lc(n.x,n.y,Math.max(n.width,1),Math.max(n.height,1)):n}},{key:"outlineCache",get:function(){var e=this;return this.editor.store.createComputedCache("outline:"+this.type,(function(t){return e.getOutline(t)}))}},{key:"outline",value:function(e){var t;return null!==(t=this.outlineCache.get(e.id))&&void 0!==t?t:Li}},{key:"snapPoints",value:function(e){return this.bounds(e).snapPoints}},{key:"center",value:function(e){return this.getCenter(e)}},{key:"canReceiveNewChildrenOfType",value:function(e,t){return!1}},{key:"canDropShapes",value:function(e,t){return!1}},{key:"hitTestPoint",value:function(e,t){return this.bounds(e).containsPoint(t)}},{key:"hitTestLineSegment",value:function(e,t,n){for(var r=this.outline(e),i=0;i<r.length;i++){if(Nc(t,n,r[i],r[(i+1)%r.length]))return!0}return!1}},{key:"expandSelectionOutlinePx",value:function(e){return 0}},{key:"providesBackgroundForChildren",value:function(e){return!1}}]),e}();function Nh(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.newPoint,i=t.handle,o=t.scaleX,a=t.scaleY,s=n.minWidth,u=void 0===s?1:s,l=n.maxWidth,c=void 0===l?1/0:l,d=n.minHeight,f=void 0===d?1:d,h=n.maxHeight,p=void 0===h?1/0:h,v=e.props.w*o,g=e.props.h*a,m=new Nl(0,0);if(v>0){if(v<u){switch(i){case"top_left":case"left":case"bottom_left":m.x=v-u;break;case"top":case"bottom":m.x=(v-u)/2;break;default:m.x=0}v=u}}else if(m.x=v,(v=-v)<u){switch(i){case"top_left":case"left":case"bottom_left":m.x=-v;break;default:m.x=-u}v=u}if(g>0){if(g<f){switch(i){case"top_left":case"top":case"top_right":m.y=g-f;break;case"right":case"left":m.y=(g-f)/2;break;default:m.y=0}g=f}}else if(m.y=g,(g=-g)<f){switch(i){case"top_left":case"top":case"top_right":m.y=-g;break;default:m.y=-f}g=f}var y=m.rot(e.rotation).add(r);return{x:y.x,y:y.y,props:{w:Math.min(c,v),h:Math.min(p,g)}}}vt(Oh,"type",void 0),Th([so],Oh.prototype,"handlesCache",1),Th([so],Oh.prototype,"outlineSegmentsCache",1),Th([so],Oh.prototype,"boundsCache",1),Th([so],Oh.prototype,"outlineCache",1);var Rh=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"onResize",(function(e,t){return Nh(e,t)})),e}return oe(n,[{key:"getBounds",value:function(e){return new lc(0,0,e.props.w,e.props.h)}},{key:"getCenter",value:function(e){return new Nl(e.props.w/2,e.props.h/2)}},{key:"getOutline",value:function(e){return this.bounds(e).corners}},{key:"hitTestPoint",value:function(e,t){return ic(t,this.outline(e))}},{key:"hitTestLineSegment",value:function(e,t,n){for(var r=this.outline(e),i=0;i<r.length;i++){if(Nc(t,n,r[i],r[(i+1)%r.length]))return!0}return!1}}]),n}(Oh),Lh=function(e){xt(r,e);var n=Et(r);function r(){var e;ne(this,r);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return vt(_t(e=n.call.apply(n,[this].concat(i))),"hideSelectionBoundsBg",(function(t){return!e.canResize(t)})),vt(_t(e),"hideSelectionBoundsFg",(function(t){return!e.canResize(t)})),vt(_t(e),"canEdit",(function(){return!0})),vt(_t(e),"canUnmount",(function(e){var t;return!(null===(t=jh(e.props.url))||void 0===t||null===(t=t.definition)||void 0===t||!t.canUnmount)})),vt(_t(e),"canResize",(function(e){var t;return!(null===(t=jh(e.props.url))||void 0===t||null===(t=t.definition)||void 0===t||!t.doesResize)})),vt(_t(e),"isAspectRatioLocked",(function(e){var t,n=jh(e.props.url);return null!==(t=null===n||void 0===n?void 0:n.definition.isAspectRatioLocked)&&void 0!==t&&t})),vt(_t(e),"onResize",(function(t,n){var r,i,o=e.isAspectRatioLocked(t),a=jh(t.props.url),s=null!==(r=null===a||void 0===a?void 0:a.definition.minWidth)&&void 0!==r?r:200,u=null!==(i=null===a||void 0===a?void 0:a.definition.minHeight)&&void 0!==i?i:200;if(o){var l=t.props.w/t.props.h;l>1?s*=l:u/=l}return Nh(t,n,{minWidth:s,minHeight:u})})),e}return oe(r,[{key:"defaultProps",value:function(){return{w:300,h:300,url:""}}},{key:"component",value:function(e){var n,i,o=this,a=e.props,s=a.w,u=a.h,c=a.url,d=Eh(e.id),h=(0,t.useMemo)((function(){return Ih(c)}),[c]),p=Il("is hovering",(function(){var e=o.editor.pageState,t=e.editingId,n=e.hoveredId;if(t&&n!==t){var i=o.editor.getShapeById(t);if(i&&o.editor.isShapeOfType(i,r))return!0}return!1}),[]),v=this.editor.getPageRotation(e),g=d||p;if("github_gist"===(null===h||void 0===h?void 0:h.definition.type)){var m=h.url.split("/").pop();if(!m)throw Error("No gist id!");return(0,f.jsx)(_h,{className:"tl-embed-container",id:e.id,children:(0,f.jsx)(Dh,{id:m,width:oc(s),height:oc(u),isInteractive:g,pageRotation:v})})}var y,b=(y=mt(mt({},ku),null!==(n=null===h||void 0===h?void 0:h.definition.overridePermissions)&&void 0!==n?n:{}),Object.entries(y).filter((function(e){var t=l(e,2);return t[0],t[1]})).map((function(e){return l(e,1)[0]})).join(" "));return(0,f.jsx)(_h,{className:"tl-embed-container",id:e.id,children:null!==h&&void 0!==h&&h.definition?(0,f.jsx)("iframe",{className:"tl-embed tl-embed-".concat(e.id),sandbox:b,src:h.embedUrl,width:oc(s),height:oc(u),draggable:!1,frameBorder:"0",referrerPolicy:"no-referrer-when-downgrade",style:{border:0,pointerEvents:g?"auto":"none",zIndex:g?"":"-1",boxShadow:Zc(v),borderRadius:null!==(i=null===h||void 0===h?void 0:h.definition.overrideOutlineRadius)&&void 0!==i?i:8,background:null===h||void 0===h?void 0:h.definition.backgroundColor}}):(0,f.jsx)("g",{transform:"translate(".concat((s-38)/2,", ").concat((u-38)/2,")"),children:(0,f.jsx)(Ld,{})})})}},{key:"indicator",value:function(e){var n,r,i=(0,t.useMemo)((function(){return jh(e.props.url)}),[e.props.url]);return(0,f.jsx)("rect",{width:oc(e.props.w),height:oc(e.props.h),rx:null!==(n=null===i||void 0===i?void 0:i.definition.overrideOutlineRadius)&&void 0!==n?n:8,ry:null!==(r=null===i||void 0===i?void 0:i.definition.overrideOutlineRadius)&&void 0!==r?r:8})}}]),r}(Rh);function Dh(e){var t=e.id,n=e.file,r=e.isInteractive,i=e.width,o=e.height,a=e.style,s=e.pageRotation;return(0,f.jsx)("iframe",{className:"tl-embed",draggable:!1,width:oc(i),height:oc(o),frameBorder:"0",scrolling:"no",seamless:!0,referrerPolicy:"no-referrer-when-downgrade",style:mt(mt({},a),{},{pointerEvents:r?"all":"none",zIndex:r?"":"-1",boxShadow:Zc(s)}),srcDoc:'\n\t\t\t<html>\n\t\t\t\t<head>\n\t\t\t\t\t<base target="_blank">\n\t\t\t\t</head>\n\t\t\t\t<body>\n\t\t\t\t\t<script src='.concat("https://gist.github.com/".concat(t,".js").concat(n?"?file=".concat(n):""),'><\/script>\n\t\t\t\t\t<style type="text/css">\n\t\t\t\t\t\t* { margin: 0px; }\n\t\t\t\t\t\ttable { height: 100%; background-color: red; }\n\t\t\t\t\t\t.gist { background-color: none; height: 100%;  }\n\t\t\t\t\t\t.gist .gist-file { height: calc(100vh - 2px); padding: 0px; display: grid; grid-template-rows: 1fr auto; }\n\t\t\t\t\t</style>\n\t\t\t\t</body>\n\t\t\t</html>')})}vt(Lh,"type","embed");var zh=function(){function e(){ne(this,e),vt(this,"items",new WeakMap)}return oe(e,[{key:"get",value:function(e,t){return this.items.has(e)||this.items.set(e,t(e)),this.items.get(e)}},{key:"access",value:function(e){return this.items.get(e)}},{key:"set",value:function(e,t){this.items.set(e,t)}},{key:"has",value:function(e){return this.items.has(e)}},{key:"invalidate",value:function(e){this.items.delete(e)}},{key:"bust",value:function(){this.items=new WeakMap}}]),e}();function Bh(e,t){return e.match(/^\s*$/)?t:e}function Fh(e,t,n){var r,i,o=n.padding,a=void 0===o?0:o,s=document.createElementNS("http://www.w3.org/2000/svg","text");if(s.setAttribute("font-size",n.fontSize+"px"),s.setAttribute("font-family",n.fontFamily),s.setAttribute("font-style",n.fontStyle),s.setAttribute("font-weight",n.fontWeight),s.setAttribute("line-height",n.lineHeight*n.fontSize+"px"),s.setAttribute("dominant-baseline","mathematical"),s.setAttribute("alignment-baseline","mathematical"),0===t.length)return s;var u,l=lc.From(t[0].box),c=w(t);try{for(c.s();!(u=c.n()).done;){var d=u.value.box;l.union(d)}}catch(_){c.e(_)}finally{c.f()}var f,h=a+(null!==(r=n.offsetX)&&void 0!==r?r:0),p=(null!==(i=n.offsetY)&&void 0!==i?i:0)+n.fontSize/2+("start"===n.verticalTextAlign?a:"end"===n.verticalTextAlign?n.height-a-l.height:(Math.ceil(n.height)-l.height)/2),v=null,g=w(t);try{for(g.s();!(f=g.n()).done;){var m=f.value,y=m.text,b=m.box;if(null!==v&&b.y>v){var x=document.createElementNS("http://www.w3.org/2000/svg","tspan");x.setAttribute("alignment-baseline","mathematical"),x.setAttribute("x",h+"px"),x.setAttribute("y",b.y+p+"px"),x.textContent="\n",s.appendChild(x)}var k=document.createElementNS("http://www.w3.org/2000/svg","tspan");k.setAttribute("alignment-baseline","mathematical"),k.setAttribute("x",b.x+h+"px"),k.setAttribute("y",b.y+p+"px");var S=y.replace(/\s/g,"\xa0");k.textContent=S,s.appendChild(k),v=b.y}}catch(_){g.e(_)}finally{g.f()}return n.stroke&&n.strokeWidth&&(s.setAttribute("stroke",n.stroke),s.setAttribute("stroke-width",n.strokeWidth+"px")),n.fill&&s.setAttribute("fill",n.fill),s}var Uh={lineHeight:1.35,fontWeight:"normal",fontVariant:"normal",fontStyle:"normal",padding:"0px",maxWidth:"auto"},Kh={s:2,m:3.5,l:5,xl:10},Vh={s:18,m:24,l:36,xl:44},Wh={s:18,m:22,l:26,xl:32},Hh={s:18,m:20,l:24,xl:28},Yh={draw:"var(--tl-font-draw)",sans:"var(--tl-font-sans)",serif:"var(--tl-font-serif)",mono:"var(--tl-font-mono)"};var qh="  ",Xh=function(){function e(){ne(this,e)}return oe(e,null,[{key:"insertTextFirefox",value:function(e,t){e.setRangeText(t,e.selectionStart||0,e.selectionEnd||0,"end"),e.dispatchEvent(new InputEvent("input",{data:t,inputType:"insertText",isComposing:!1}))}},{key:"insert",value:function(t,n){var r=t.ownerDocument,i=r.activeElement;i!==t&&t.focus(),r.execCommand("insertText",!1,n)||e.insertTextFirefox(t,n),i===r.body?t.blur():i instanceof HTMLElement&&i!==t&&i.focus()}},{key:"set",value:function(t,n){t.select(),e.insert(t,n)}},{key:"getSelection",value:function(e){var t=e.selectionStart,n=e.selectionEnd;return e.value.slice(t||void 0,n||void 0)}},{key:"wrapSelection",value:function(t,n,r){var i=t.selectionStart,o=t.selectionEnd,a=e.getSelection(t);e.insert(t,n+a+(null!==r&&void 0!==r?r:n)),t.selectionStart=(i||0)+n.length,t.selectionEnd=(o||0)+n.length}},{key:"replace",value:function(t,n,r){var i=0;t.value.replace(n,(function(){for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=i+o[o.length-2],u=o[0].length;t.selectionStart=s,t.selectionEnd=s+u;var l="string"===typeof r?r:r.apply(void 0,o);return e.insert(t,l),t.selectionStart=s,i+=l.length-u,l}))}},{key:"findLineEnd",value:function(e,t){var n=e.lastIndexOf("\n",t-1)+1;return"\t"!==e.charAt(n)?t:n+1}},{key:"indent",value:function(t){var n,r=t.selectionStart,i=t.selectionEnd,o=t.value,a=o.slice(r,i),s=null===(n=/\n/g.exec(a))||void 0===n?void 0:n.length;if(s&&s>0){var u=o.lastIndexOf("\n",r-1)+1,l=t.value.slice(u,i-1),c=l.replace(/^|\n/g,"$&".concat(qh)),d=c.length-l.length;t.setSelectionRange(u,i-1),e.insert(t,c),t.setSelectionRange(r+1,i+d)}else e.insert(t,qh)}},{key:"unindent",value:function(t){var n=t.selectionStart,r=t.selectionEnd,i=t.value,o=i.lastIndexOf("\n",n-1)+1,a=e.findLineEnd(i,r),s=t.value.slice(o,a),u=s.replace(/(^|\n)(\t| {1,2})/g,"$1"),l=s.length-u.length;t.setSelectionRange(o,a),e.insert(t,u);var c=/\t| {1,2}/.exec(i.slice(o,n)),d=c?c[0].length:0,f=n-d;t.setSelectionRange(n-d,Math.max(f,r-l))}},{key:"indentCE",value:function(e){var t,n,r,i=window.getSelection(),o=e.innerText,a=null!==(t=$h(e))&&void 0!==t?t:0,s=null!==(n=$h(e))&&void 0!==n?n:0,u=o.slice(a,s),l=null===(r=/\n/g.exec(u))||void 0===r?void 0:r.length;if(l&&l>0){var c=o.lastIndexOf("\n",a-1)+1,d=o.slice(c,s-1),f=d.replace(/^|\n/g,"$&".concat(qh)).length-d.length;i&&i.setBaseAndExtent(e,a+1,e,s+f)}else{var h=window.getSelection();e.innerText=o.slice(0,a)+qh+o.slice(a),null===h||void 0===h||h.setBaseAndExtent(e,a+1,e,a+2)}}},{key:"unindentCE",value:function(t){var n,r,i=window.getSelection(),o=t.innerText,a=null!==(n=$h(t))&&void 0!==n?n:0,s=null!==(r=$h(t))&&void 0!==r?r:0,u=o.lastIndexOf("\n",a-1)+1,l=e.findLineEnd(o,s),c=o.slice(u,l),d=c.replace(/(^|\n)(\t| {1,2})/g,"$1"),f=c.length-d.length;if(i){i.setBaseAndExtent(t,u,t,l);var h=/\t| {1,2}/.exec(o.slice(u,a)),p=h?h[0].length:0,v=a-p;i.setBaseAndExtent(t,a-p,t,Math.max(v,s-f))}}},{key:"normalizeText",value:function(t){return t.replace(e.fixNewLines,"\n")}},{key:"normalizeTextForDom",value:function(t){return t.replace(e.fixNewLines,"\n").split("\n").map((function(e){return e||" "})).join("\n")}}]),e}();function $h(e){if("undefined"!==typeof window.getSelection){var t=window.getSelection();if(t){var n=0;if(0!==t.rangeCount){var r=t.getRangeAt(0),i=r.cloneRange();i.selectNodeContents(e),i.setEnd(r.endContainer,r.endOffset),n=i.toString().length}return n}}}function Gh(e,n,r){var i=Ml(),o=(0,t.useRef)(null),a=Il("isEditing",(function(){return i.pageState.editingId===e}),[i,e]),s=(0,t.useRef)(!1),u=(0,t.useRef)(),l=Il("is editable hovering",(function(){if("text"===n&&i.isIn("text")&&i.hoveredId===e)return!0;if(i.isIn("select.editing_shape")){var t=i.editingShape;return!!t&&(i.hoveredId===e&&t.type===n&&i.getShapeUtil(t).canEdit(t))}return!1}),[n,e]),c=(0,t.useCallback)((function(){l||requestAnimationFrame((function(){var t=o.current;if(t){var n=i.getShapeById(e);n&&(t.value=n.props.text,t.value.length&&!s.current&&t.select(),s.current=!1)}}))}),[i,e,l]),d=(0,t.useCallback)((function(){var e=u.current;requestAnimationFrame((function(){var t,n=o.current;if(i.isIn("select.editing_shape")&&n)if(e)if(e.length){s.current=!0,n.focus();var r=window.getSelection();r&&e.forEach((function(e){return r.addRange(e)}))}else n.focus();else n.focus();else null===(t=window.getSelection())||void 0===t||t.removeAllRanges(),i.complete()}))}),[i]),f=(0,t.useCallback)((function(e){switch((e.ctrlKey||e.metaKey)&&nd(e),e.key){case"Enter":(e.ctrlKey||e.metaKey)&&i.complete();break;case"Tab":$c(e),e.shiftKey?Xh.unindent(e.currentTarget):Xh.indent(e.currentTarget)}}),[i]),h=(0,t.useCallback)((function(t){var r=Xh.normalizeText(t.currentTarget.value),o=r.replace(/\t/g,qh);if(o!==r){var a=t.currentTarget.selectionStart;t.currentTarget.value=o,t.currentTarget.selectionStart=a+(o.length-r.length),t.currentTarget.selectionEnd=a+(o.length-r.length),r=o}i.updateShapes([{id:e,type:n,props:{text:r}}])}),[i,e,n]),p=0===r.trim().length;return(0,t.useEffect)((function(){if(o.current){var e=function(){var e,t,n=null===(e=(t=window).getSelection)||void 0===e?void 0:e.call(t);if(n&&"None"!==n.type){var r=[];if(n)for(var i=0;i<n.rangeCount;i++){var o;r.push(null===(o=n.getRangeAt)||void 0===o?void 0:o.call(n,i))}u.current=r}};return document.addEventListener("selectionchange",e),function(){document.removeEventListener("selectionchange",e)}}})),{rInput:o,isEditing:a,isEditableFromHover:l,handleFocus:c,handleBlur:d,handleKeyDown:f,handleChange:h,isEmpty:p}}vt(Xh,"fixNewLines",/\r?\n|\r/g);var Qh=new zh,Jh=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"canEdit",(function(){return!0})),vt(_t(e),"isAspectRatioLocked",(function(){return!0})),vt(_t(e),"onResize",(function(e,t){var n=t.initialBounds,r=t.initialShape,i=t.scaleX,o=t.handle;if("scale_shape"===t.mode||"right"!==o&&"left"!==o)return function(e,t){var n=t.initialBounds,r=t.scaleX,i=t.scaleY,o=t.newPoint,a=Math.max(.01,Math.min(Math.abs(r),Math.abs(i))),s=new Nl(0,0);r<0&&(s.x=-n.width*a),i<0&&(s.y=-n.height*a);var u=Nl.Add(o,s.rot(e.rotation));return{x:u.x,y:u.y,props:{scale:a*e.props.scale}}}(e,t);var a=n.width,s=a*i,u=new Nl(0,0);s=Math.max(1,Math.abs(s)),"left"===o?(u.x=a-s,i<0&&(u.x+=s)):i<0&&(u.x-=s);var l=u.rot(e.rotation).add(r);return{x:l.x,y:l.y,props:{w:s/r.props.scale,autoSize:!1}}})),vt(_t(e),"onBeforeCreate",(function(t){if(t.props.autoSize&&!t.props.text.trim()){var n=e.getMinDimensions(t);return mt(mt({},t),{},{x:t.x-n.width/2,y:t.y-n.height/2})}})),vt(_t(e),"onEditEnd",(function(t){var n=t.id,r=t.type,i=t.props.text,o=t.props.text.trimEnd();0===o.length?e.editor.deleteShapes([t.id]):o!==t.props.text&&e.editor.updateShapes([{id:n,type:r,props:{text:i.trimEnd()}}])})),vt(_t(e),"onBeforeUpdate",(function(t,n){if(n.props.autoSize){var r=t.props.size!==n.props.size||t.props.align!==n.props.align||t.props.font!==n.props.font||1!==t.props.scale&&1===n.props.scale,i=t.props.text!==n.props.text;if(r||i){var o,a=e.getMinDimensions(t),s=Zh(e.editor,n.props),u=a.width*t.props.scale,l=a.height*t.props.scale,c=s.width*n.props.scale,d=s.height*n.props.scale;switch(n.props.align){case"middle":o=new Nl((c-u)/2,i?0:(d-l)/2);break;case"end":o=new Nl(c-u,i?0:(d-l)/2);break;default:if(i)break;o=new Nl(0,(d-l)/2)}if(o){o.rot(n.rotation);var f=n.x,h=n.y;return mt(mt({},n),{},{x:f-o.x,y:h-o.y,props:mt(mt({},n.props),{},{w:c})})}return mt(mt({},n),{},{props:mt(mt({},n.props),{},{w:c})})}}})),vt(_t(e),"onDoubleClickEdge",(function(e){return e.props.autoSize?1!==e.props.scale?{id:e.id,type:e.type,props:{scale:1}}:void 0:{id:e.id,type:e.type,props:{autoSize:!0}}})),e}return oe(n,[{key:"defaultProps",value:function(){return{color:"black",size:"m",w:8,text:"",font:"draw",align:"middle",autoSize:!0,scale:1}}},{key:"getMinDimensions",value:function(e){var t=this;return Qh.get(e.props,(function(e){return Zh(t.editor,e)}))}},{key:"getBounds",value:function(e){var t=e.props.scale,n=this.getMinDimensions(e),r=n.width,i=n.height;return new lc(0,0,r*t,i*t)}},{key:"getOutline",value:function(e){var t=this.bounds(e);return[new Nl(0,0),new Nl(t.width,0),new Nl(t.width,t.height),new Nl(0,t.height)]}},{key:"getCenter",value:function(e){var t=this.bounds(e);return new Nl(t.width/2,t.height/2)}},{key:"component",value:function(e){var t=e.id,n=e.type,r=e.props.text,i=this.getMinDimensions(e),o=i.width,a=i.height,s=Gh(t,n,r),u=s.rInput,l=s.isEmpty,c=s.isEditing,d=s.isEditableFromHover,h=s.handleFocus,p=s.handleChange,v=s.handleKeyDown,g=s.handleBlur;return(0,f.jsx)(_h,{id:e.id,children:(0,f.jsxs)("div",{className:"tl-text-shape__wrapper tl-text-shadow","data-font":e.props.font,"data-align":e.props.align,"data-hastext":!l,"data-isediting":c||d,"data-textwrap":!0,style:{fontSize:Vh[e.props.size],lineHeight:Vh[e.props.size]*Uh.lineHeight+"px",transform:"scale(".concat(e.props.scale,")"),transformOrigin:"top left",width:Math.max(1,o),height:Math.max(Vh[e.props.size]*Uh.lineHeight,a)},children:[(0,f.jsx)("div",{className:"tl-text tl-text-content",dir:"ltr",children:r}),c||d?(0,f.jsx)("textarea",{ref:u,className:"tl-text tl-text-input",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:c,placeholder:"",spellCheck:"true",wrap:"off",dir:"ltr",datatype:"wysiwyg",defaultValue:r,onFocus:h,onChange:p,onKeyDown:v,onBlur:g,onTouchEnd:nd,onContextMenu:nd}):null]})})}},{key:"indicator",value:function(e){var t=this.bounds(e);return(0,f.jsx)("rect",{width:oc(t.width),height:oc(t.height)})}},{key:"toSvg",value:function(e,t,n){var r,i,o=this.bounds(e),a=e.props.text,s=o.width/(null!==(r=e.props.scale)&&void 0!==r?r:1),u=o.height/(null!==(i=e.props.scale)&&void 0!==i?i:1),l={fontSize:Vh[e.props.size],fontFamily:t,textAlign:e.props.align,verticalTextAlign:"middle",width:s,height:u,padding:0,lineHeight:Uh.lineHeight,fontStyle:"normal",fontWeight:"normal",overflow:"wrap"},c=n.fill[e.props.color],d=document.createElementNS("http://www.w3.org/2000/svg","g"),f=Fh(this.editor,this.editor.textMeasure.measureTextSpans(a,l),mt(mt({},l),{},{stroke:n.background,strokeWidth:2,fill:n.background,padding:0})),h=f.cloneNode(!0);return h.setAttribute("fill",c),h.setAttribute("stroke","none"),d.append(f),d.append(h),d}}]),n}(Oh);function Zh(e,t){var n=t.font,r=t.text,i=t.autoSize,o=t.size,a=t.w,s=Vh[o],u=i?"fit-content":Math.floor(Math.max(16,a))+"px",l=e.textMeasure.measureText(r,mt(mt({},Uh),{},{fontFamily:Yh[n],fontSize:s,width:u}));return i&&(l.w+=1),{width:Math.max(16,l.w),height:Math.max(s,l.h)}}vt(Jh,"type","text");var ep="<path d='m19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill='%23fff'/><path d='m18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill='%23000'/>",tp="<path d='m9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill='%23fff'/><path d='m17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill='%23000'/>",np='<path d="M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill="black"/><path fill-rule="evenodd" clip-rule="evenodd" d="M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill="white"/>';function rp(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:16,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:16,s=Ll/180*(-n-t),u=Math.sin(s),l=Math.cos(s),c=1*l-1*u,d=1*u+1*l;return"url(\"data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 32 32' xmlns='http://www.w3.org/2000/svg' style='color: ".concat(i,";'><defs><filter id='shadow' y='-40%' x='-40%' width='180px' height='180%' color-interpolation-filters='sRGB'><feDropShadow dx='").concat(c,"' dy='").concat(d,"' stdDeviation='1.2' flood-opacity='.5'/></filter></defs><g fill='none' transform='rotate(").concat(t+n," 16 16)").concat(r?" scale(-1,-1) translate(0, -32)":"","' filter='url(%23shadow)'>")+e.replaceAll('"',"'")+'</g></svg>") '.concat(o," ").concat(a,", pointer")}var ip={none:function(){return"none"},default:function(e,t,n){return rp('<path d="m12 24.4219v-16.015l11.591 11.619h-6.781l-.411.124z" fill="white"/><path d="m21.0845 25.0962-3.605 1.535-4.682-11.089 3.686-1.553z" fill="white"/><path d="m19.751 24.4155-1.844.774-3.1-7.374 1.841-.775z" fill="black"/><path d="m13 10.814v11.188l2.969-2.866.428-.139h4.768z" fill="black"/>',e,0,t,n,12,8)},pointer:function(e,t,n){return rp('<path d="m13.3315 21.3799c-.284-.359-.629-1.093-1.243-1.984-.348-.504-1.211-1.453-1.468-1.935-.223-.426-.199-.617-.146-.97.094-.628.738-1.117 1.425-1.051.519.049.959.392 1.355.716.239.195.533.574.71.788.163.196.203.277.377.509.23.307.302.459.214.121-.071-.496-.187-1.343-.355-2.092-.128-.568-.159-.657-.281-1.093-.129-.464-.195-.789-.316-1.281-.084-.348-.235-1.059-.276-1.459-.057-.547-.087-1.439.264-1.849.275-.321.906-.418 1.297-.22.512.259.803 1.003.936 1.3.239.534.387 1.151.516 1.961.164 1.031.466 2.462.476 2.763.024-.369-.068-1.146-.004-1.5.058-.321.328-.694.666-.795.286-.085.621-.116.916-.055.313.064.643.288.766.499.362.624.369 1.899.384 1.831.086-.376.071-1.229.284-1.584.14-.234.497-.445.687-.479.294-.052.655-.068.964-.008.249.049.586.345.677.487.218.344.342 1.317.379 1.658.015.141.074-.392.293-.736.406-.639 1.843-.763 1.898.639.025.654.02.624.02 1.064 0 .517-.012.828-.04 1.202-.031.4-.117 1.304-.242 1.742-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.191 1.813-.118.562-.079.566-.102.965-.023.398.121.922.121.922s-.802.104-1.234.035c-.391-.063-.875-.841-1-1.079-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.031-3.139.02 0 0 .185-1.011-.227-1.358-.305-.259-.83-.784-1.144-1.06z" fill="white"/><g stroke="black" stroke-linecap="round" stroke-width=".75"><path d="m13.3315 21.3799c-.284-.359-.629-1.093-1.243-1.984-.348-.504-1.211-1.453-1.468-1.935-.223-.426-.199-.617-.146-.97.094-.628.738-1.117 1.425-1.051.519.049.959.392 1.355.716.239.195.533.574.71.788.163.196.203.277.377.509.23.307.302.459.214.121-.071-.496-.187-1.343-.355-2.092-.128-.568-.159-.657-.281-1.093-.129-.464-.195-.789-.316-1.281-.084-.348-.235-1.059-.276-1.459-.057-.547-.087-1.439.264-1.849.275-.321.906-.418 1.297-.22.512.259.803 1.003.936 1.3.239.534.387 1.151.516 1.961.164 1.031.466 2.462.476 2.763.024-.369-.068-1.146-.004-1.5.058-.321.328-.694.666-.795.286-.085.621-.116.916-.055.313.064.643.288.766.499.362.624.369 1.899.384 1.831.086-.376.071-1.229.284-1.584.14-.234.497-.445.687-.479.294-.052.655-.068.964-.008.249.049.586.345.677.487.218.344.342 1.317.379 1.658.015.141.074-.392.293-.736.406-.639 1.843-.763 1.898.639.025.654.02.624.02 1.064 0 .517-.012.828-.04 1.202-.031.4-.117 1.304-.242 1.742-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.191 1.813-.118.562-.079.566-.102.965-.023.398.121.922.121.922s-.802.104-1.234.035c-.391-.063-.875-.841-1-1.079-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.031-3.139.02 0 0 .185-1.011-.227-1.358-.305-.259-.83-.784-1.144-1.06z" stroke-linejoin="round"/><path d="m21.5664 21.7344v-3.459"/><path d="m19.5508 21.7461-.016-3.473"/><path d="m17.5547 18.3047.021 3.426"/></g>',e,0,t,n,14,10)},cross:function(e,t,n){return rp('<path d="m25 16h-6.01v-6h-2.98v6h-6.01v3h6.01v6h2.98v-6h6.01z" fill="white"/><path d="m23.9902 17.0103h-6v-6.01h-.98v6.01h-6v.98h6v6.01h.98v-6.01h6z" fill="%23231f1f"/>',e,0,t,n)},move:function(e,t,n){return rp('<path d="m19 14h1v1h-1zm1 6h-1v-1h1zm-5-5h-1v-1h1zm0 5h-1v-1h1zm2-10.987-7.985 7.988 5.222 5.221 2.763 2.763 7.984-7.985z" fill="white"/><g fill="black"><path d="m23.5664 16.9971-2.557-2.809v1.829h-4.009-4.001v-1.829l-2.571 2.809 2.572 2.808-.001-1.808h4.001 4.009l-.001 1.808z"/><path d="m17.9873 17h.013v-4.001l1.807.001-2.807-2.571-2.809 2.57h1.809v4.001h.008v4.002l-1.828-.001 2.807 2.577 2.805-2.576h-1.805z"/></g>',e,0,t,n)},grab:function(e,t,n){return rp('<path d="m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" fill="white"/><g stroke="black" stroke-linecap="round" stroke-width=".75"><path d="m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" stroke-linejoin="round"/><path d="m20.5664 21.7344v-3.459"/><path d="m18.5508 21.7461-.016-3.473"/><path d="m16.5547 18.3047.021 3.426"/></g>',e,0,t,n)},grabbing:function(e,t,n){return rp("<path d='m13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042' fill='white'/><g stroke='black' stroke-width='.75'><path d='m13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042z' stroke-linejoin='round'/><path d='m20.5664 19.7344v-3.459' stroke-linecap='round'/><path d='m18.5508 19.7461-.016-3.473' stroke-linecap='round'/><path d='m16.5547 16.3047.021 3.426' stroke-linecap='round'/></g>",e,0,t,n)},text:function(e,t,n){return rp('<path fill="white" d="M7.94 0a5.25 5.25 0 0 0-3.47 1.17A5.27 5.27 0 0 0 1 0H0v3h1c1.41 0 1.85.7 2 1v3.94H2v3h1v3c-.13.3-.57 1-2 1H0v3h1a5.27 5.27 0 0 0 3.47-1.17c.98.8 2.21 1.21 3.47 1.17h1v-3h-1c-1.41 0-1.85-.7-2-1v-3H7v-3H6V4c.13-.3.57-1 2-1h1V0H7.94z"/><path fill="black" d="M7.94 2V1a4 4 0 0 0-3.47 1.64A4 4 0 0 0 1 1v1c1.3-.17 2.56.6 3 1.84v5.1H3v1h1v4.16c-.45 1.24-1.7 2-3 1.84v1a4.05 4.05 0 0 0 3.47-1.63 4.05 4.05 0 0 0 3.47 1.63v-1A2.82 2.82 0 0 1 5 14.1V9.93h1v-1H5V3.85A2.81 2.81 0 0 1 7.94 2z"/>',e,0,t,n,4,10)},"ew-resize":function(e,t,n){return rp(tp,e,0,t,n)},"ns-resize":function(e,t,n){return rp(tp,e,90,t,n)},"nesw-resize":function(e,t,n){return rp(ep,e,0,t,n)},"nwse-resize":function(e,t,n){return rp(ep,e,90,t,n)},"nwse-rotate":function(e,t,n){return rp(np,e,0,t,n)},"nesw-rotate":function(e,t,n){return rp(np,e,90,t,n)},"senw-rotate":function(e,t,n){return rp(np,e,180,t,n)},"swne-rotate":function(e,t,n){return rp(np,e,270,t,n)},"zoom-in":function(e,t,n){return rp('<path d="m20.5 15c0 3.038-2.462 5.5-5.5 5.5s-5.5-2.462-5.5-5.5 2.462-5.5 5.5-5.5 5.5 2.462 5.5 5.5" fill="white"/><path d="m20.5 15c0 3.038-2.462 5.5-5.5 5.5s-5.5-2.462-5.5-5.5 2.462-5.5 5.5-5.5 5.5 2.462 5.5 5.5z" stroke="black"/><g fill="black"><path d="m18 14h-2v-2h-2v2h-2v1.98h2v2.02h2v-2.02h2z"/><path d="m23.5859 25 1.414-1.414-5.449-5.449-1.414 1.414z"/></g>',e,0,t,n)},"zoom-out":function(e,t,n){return rp('<path d="m20.5 15c0 3.038-2.462 5.5-5.5 5.5s-5.5-2.462-5.5-5.5 2.462-5.5 5.5-5.5 5.5 2.462 5.5 5.5" fill="white"/><path d="m20.5 15c0 3.038-2.462 5.5-5.5 5.5s-5.5-2.462-5.5-5.5 2.462-5.5 5.5-5.5 5.5 2.462 5.5 5.5z" stroke="black"/><g fill="black"><path d="m18 16h-5.98v-1.98h5.98z"/><path d="m23.5859 25 1.414-1.414-5.449-5.449-1.414 1.414z"/></g>',e,0,t,n)}};function op(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"black";return ip[e](function(e){return 180*e/Ll}(t),!1,n)}var ap=["default","pointer","cross","move","grab","grabbing","text"];function sp(e){var n=Ml(),r=(0,t.useMemo)((function(){var t,r;return{onPointerDown:function(t){if(!t.isKilled&&0===t.button){var r=Xc(t.currentTarget);Gc(r,t),r.addEventListener("pointerup",(function e(){r.removeEventListener("pointerup",e),Qc(r,t)})),n.dispatch(mt({name:"pointer_down",type:"pointer",target:"selection",handle:e},rd(t,n.getContainer()))),t.stopPropagation()}},onPointerMove:function(i){i.isKilled||0===i.button&&(i.clientX===t&&i.clientY===r||(t=i.clientX,r=i.clientY,n.dispatch(mt({name:"pointer_move",type:"pointer",target:"selection",handle:e},rd(i,n.getContainer())))))},onPointerUp:function(t){t.isKilled||0===t.button&&n.dispatch(mt({name:"pointer_up",type:"pointer",target:"selection",handle:e},rd(t,n.getContainer())))}}}),[n,e]);return r}function up(e){var t=e.size,n=e.width,r=e.height,i=e.hideAlternateHandles,o=oc(t/3),a=o/2;return(0,f.jsxs)("svg",{className:"tl-overlays__item",children:[(0,f.jsx)("polyline",{className:"tl-corner-crop-handle",points:"\n\t\t\t\t\t\t".concat(oc(0-a),",").concat(oc(t)," \n\t\t\t\t\t\t").concat(oc(0-a),",").concat(oc(0-a)," \n\t\t\t\t\t\t").concat(oc(t),",").concat(oc(0-a)),strokeWidth:o,"data-testid":"selection.crop.top_left","aria-label":"top_left handle"}),(0,f.jsx)("line",{className:kl("tl-corner-crop-edge-handle",{"tl-hidden":i}),x1:oc(n/2-t),y1:oc(0-a),x2:oc(n/2+t),y2:oc(0-a),strokeWidth:o,"data-testid":"selection.crop.top","aria-label":"top handle"}),(0,f.jsx)("polyline",{className:kl("tl-corner-crop-handle",{"tl-hidden":i}),points:"\n\t\t\t\t\t\t".concat(oc(n-t),",").concat(oc(0-a)," \n\t\t\t\t\t\t").concat(oc(n+a),",").concat(oc(0-a)," \n\t\t\t\t\t\t").concat(oc(n+a),",").concat(oc(t)),strokeWidth:o,"data-testid":"selection.crop.top_right","aria-label":"top_right handle"}),(0,f.jsx)("line",{className:kl("tl-corner-crop-edge-handle",{"tl-hidden":i}),x1:oc(n+a),y1:oc(r/2-t),x2:oc(n+a),y2:oc(r/2+t),strokeWidth:o,"data-testid":"selection.crop.right","aria-label":"right handle"}),(0,f.jsx)("polyline",{className:"tl-corner-crop-handle",points:"\n\t\t\t\t\t\t".concat(oc(n+a),",").concat(oc(r-t)," \n\t\t\t\t\t\t").concat(oc(n+a),",").concat(oc(r+a),"\n\t\t\t\t\t\t").concat(oc(n-t),",").concat(oc(r+a)),strokeWidth:o,"data-testid":"selection.crop.bottom_right","aria-label":"bottom_right handle"}),(0,f.jsx)("line",{className:kl("tl-corner-crop-edge-handle",{"tl-hidden":i}),x1:oc(n/2-t),y1:oc(r+a),x2:oc(n/2+t),y2:oc(r+a),strokeWidth:o,"data-testid":"selection.crop.bottom","aria-label":"bottom handle"}),(0,f.jsx)("polyline",{className:kl("tl-corner-crop-handle",{"tl-hidden":i}),points:"\n\t\t\t\t\t\t".concat(oc(0+t),",").concat(oc(r+a)," \n\t\t\t\t\t\t").concat(oc(0-a),",").concat(oc(r+a),"\n\t\t\t\t\t\t").concat(oc(0-a),",").concat(oc(r-t)),strokeWidth:o,"data-testid":"selection.crop.bottom_left","aria-label":"bottom_left handle"}),(0,f.jsx)("line",{className:kl("tl-corner-crop-edge-handle",{"tl-hidden":i}),x1:oc(0-a),y1:oc(r/2-t),x2:oc(0-a),y2:oc(r/2+t),strokeWidth:o,"data-testid":"selection.crop.left","aria-label":"left handle"})]})}var lp="undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().indexOf("firefox")>-1,cp=Pl((function(){var e,n,r=Ml(),i=(0,t.useRef)(null),o=r.isReadOnly,a=sp("top"),s=sp("right"),u=sp("bottom"),l=sp("left"),c=sp("top_left"),d=sp("top_right"),h=sp("bottom_right"),p=sp("bottom_left"),v=!r.isMenuOpen&&"default"===r.cursor.type,g=r.isCoarsePointer,m=r.selectionBounds,y=r.selectedShapes,b=r.onlySelectedShape,w=b&&r.isShapeOrAncestorLocked(b),x=b?r.getShapeUtil(b).expandSelectionOutlinePx(b):0;if(pd(i,null===(e=m)||void 0===e?void 0:e.x,null===(n=m)||void 0===n?void 0:n.y,1,r.selectionRotation,{x:-x,y:-x}),!m)return null;m=m.clone().expandBy(x);var k=r.zoomLevel,S=r.selectionRotation,_=r.isChangingStyle,E=Math.max(1,m.width),C=Math.max(1,m.height),P=8/k,I=E<2*P,j=C<2*P,M=E<4*P,A=C<4*P,T=E<5*P,O=C<5*P,N=g?1.75:1,R=6/k*N,L=(M?R/2:R)*(.75*N),D=(A?R/2:R)*(.75*N),z=(!b||!r.getShapeUtil(b).hideSelectionBoundsFg(b))&&!_,B=z&&r.isInAny("select.idle","select.brushing","select.scribble_brushing","select.pointing_canvas","select.pointing_selection","select.pointing_shape","select.crop.idle","select.crop.pointing_crop","select.pointing_resize_handle","select.pointing_crop_handle","select.editing_shape")||z&&r.isIn("select.resizing")&&b&&r.isShapeOfType(b,Jh);b&&r.isShapeOfType(b,Lh)&&B&&lp&&(B=!1);var F=r.isInAny("select.pointing_crop_handle","select.crop.idle","select.crop.pointing_crop")&&!_&&!o,U=r.isInAny("select.idle","select.pointing_selection","select.pointing_shape","select.crop.idle")&&!_&&!o,K=!g&&!(I||j)&&(U||F)&&(!b||!r.getShapeUtil(b).hideRotateHandle(b))&&!w,V=g&&(!M||!A)&&(U||F)&&(!b||!r.getShapeUtil(b).hideRotateHandle(b))&&!w,W=U&&(!b||r.getShapeUtil(b).canResize(b)&&!r.getShapeUtil(b).hideResizeHandles(b))&&!F&&!w,H=I||j,Y=I&&j,q=T||O,X=W||F,$=!K,G=!U||!V,Q=!U||!X,J=!U||!X||H,Z=!U||!X||H,ee=!U||!X||Y&&!F,te=g;te&&y.every((function(e){return r.getShapeUtil(e).isAspectRatioLocked(e)}))&&(te=!1);var ne=!0;F?ne=q:W&&(ne=H||Y||te);var re=Math.min(24/k,C-3*D),ie=U&&g&&b&&r.isShapeOfType(b,Jh)&&re*k>=4;return(0,f.jsxs)("svg",{ref:i,className:"tl-overlays__item tl-selection__fg","data-testid":"selection-foreground",children:[B&&(0,f.jsx)("rect",{className:kl("tl-selection__fg__outline"),width:oc(E),height:oc(C)}),(0,f.jsx)(dp,{"data-testid":"selection.rotate.top-left",cx:0,cy:0,targetSize:R,corner:"top_left_rotate",cursor:v?op("nwse-rotate",S):void 0,isHidden:$}),(0,f.jsx)(dp,{"data-testid":"selection.rotate.top-right",cx:E+3*R,cy:0,targetSize:R,corner:"top_right_rotate",cursor:v?op("nesw-rotate",S):void 0,isHidden:$}),(0,f.jsx)(dp,{"data-testid":"selection.rotate.bottom-left",cx:0,cy:C+3*R,targetSize:R,corner:"bottom_left_rotate",cursor:v?op("swne-rotate",S):void 0,isHidden:$}),(0,f.jsx)(dp,{"data-testid":"selection.rotate.bottom-right",cx:E+3*R,cy:C+3*R,targetSize:R,corner:"bottom_right_rotate",cursor:v?op("senw-rotate",S):void 0,isHidden:$})," ",(0,f.jsx)(hp,{"data-testid":"selection.rotate.mobile",cx:M?1.5*-R:E/2,cy:M?C/2:1.5*-R,size:P,isHidden:G}),(0,f.jsx)("rect",mt({className:kl("tl-transparent",{"tl-hidden":ne}),"data-testid":"selection.resize.top","aria-label":"top target",pointerEvents:"all",x:0,y:oc(0-(A?2*D:D)),width:oc(Math.max(1,E)),height:oc(Math.max(1,2*D)),style:v?{cursor:op("ns-resize",S)}:void 0},a)),(0,f.jsx)("rect",mt({className:kl("tl-transparent",{"tl-hidden":ne}),"data-testid":"selection.resize.right","aria-label":"right target",pointerEvents:"all",x:oc(E-(M?0:L)),y:0,height:oc(Math.max(1,C)),width:oc(Math.max(1,2*L)),style:v?{cursor:op("ew-resize",S)}:void 0},s)),(0,f.jsx)("rect",mt({className:kl("tl-transparent",{"tl-hidden":ne}),"data-testid":"selection.resize.bottom","aria-label":"bottom target",pointerEvents:"all",x:0,y:oc(C-(A?0:D)),width:oc(Math.max(1,E)),height:oc(Math.max(1,2*D)),style:v?{cursor:op("ns-resize",S)}:void 0},u)),(0,f.jsx)("rect",mt({className:kl("tl-transparent",{"tl-hidden":ne}),"data-testid":"selection.resize.left","aria-label":"left target",pointerEvents:"all",x:oc(0-(M?2*L:L)),y:0,height:oc(Math.max(1,C)),width:oc(Math.max(1,2*L)),style:v?{cursor:op("ew-resize",S)}:void 0},l)),(0,f.jsx)("rect",mt({className:kl("tl-transparent",{"tl-hidden":Q}),"data-testid":"selection.target.top-left","aria-label":"top-left target",pointerEvents:"all",x:oc(0-(M?2*L:1.5*L)),y:oc(0-(A?2*D:1.5*D)),width:oc(3*L),height:oc(3*D),style:v?{cursor:op("nwse-resize",S)}:void 0},c)),(0,f.jsx)("rect",mt({className:kl("tl-transparent",{"tl-hidden":J}),"data-testid":"selection.target.top-right","aria-label":"top-right target",pointerEvents:"all",x:oc(E-(M?0:1.5*L)),y:oc(0-(A?2*D:1.5*D)),width:oc(3*L),height:oc(3*D),style:v?{cursor:op("nesw-resize",S)}:void 0},d)),(0,f.jsx)("rect",mt({className:kl("tl-transparent",{"tl-hidden":ee}),"data-testid":"selection.target.bottom-right","aria-label":"bottom-right target",pointerEvents:"all",x:oc(E-(M?L:1.5*L)),y:oc(C-(A?D:1.5*D)),width:oc(3*L),height:oc(3*D),style:v?{cursor:op("nwse-resize",S)}:void 0},h)),(0,f.jsx)("rect",mt({className:kl("tl-transparent",{"tl-hidden":Z}),"data-testid":"selection.target.bottom-left","aria-label":"bottom-left target",pointerEvents:"all",x:oc(0-(M?3*L:1.5*L)),y:oc(C-(A?0:1.5*D)),width:oc(3*L),height:oc(3*D),style:v?{cursor:op("nesw-resize",S)}:void 0},p)),W&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("rect",{"data-testid":"selection.resize.top-left",className:kl("tl-corner-handle",{"tl-hidden":Q}),"aria-label":"top_left handle",x:oc(0-P/2),y:oc(0-P/2),width:oc(P),height:oc(P)}),(0,f.jsx)("rect",{"data-testid":"selection.resize.top-right",className:kl("tl-corner-handle",{"tl-hidden":J}),"aria-label":"top_right handle",x:oc(E-P/2),y:oc(0-P/2),width:oc(P),height:oc(P)}),(0,f.jsx)("rect",{"data-testid":"selection.resize.bottom-right",className:kl("tl-corner-handle",{"tl-hidden":ee}),"aria-label":"bottom_right handle",x:oc(E-P/2),y:oc(C-P/2),width:oc(P),height:oc(P)}),(0,f.jsx)("rect",{"data-testid":"selection.resize.bottom-left",className:kl("tl-corner-handle",{"tl-hidden":Z}),"aria-label":"bottom_left handle",x:oc(0-P/2),y:oc(C-P/2),width:oc(P),height:oc(P)})]}),ie&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("rect",{"data-testid":"selection.text-resize.left.handle",className:"tl-text-handle","aria-label":"bottom_left handle",x:oc(0-P/4),y:oc(C/2-re/2),rx:P/4,width:oc(P/2),height:oc(re)}),(0,f.jsx)("rect",{"data-testid":"selection.text-resize.right.handle",className:"tl-text-handle","aria-label":"bottom_left handle",rx:P/4,x:oc(E-P/4),y:oc(C/2-re/2),width:oc(P/2),height:oc(re)})]}),F&&(0,f.jsx)(up,mt({},{size:P,width:E,height:C,hideAlternateHandles:q}))]})})),dp=function(e){var t=e.cx,n=e.cy,r=e.targetSize,i=e.corner,o=e.cursor,a=e.isHidden,s=e["data-testid"],u=sp(i);return(0,f.jsx)("rect",mt({className:kl("tl-transparent","tl-rotate-corner",{"tl-hidden":a}),"data-testid":s,"aria-label":"".concat(i," target"),pointerEvents:"all",x:oc(t-3*r),y:oc(n-3*r),width:oc(Math.max(1,3*r)),height:oc(Math.max(1,3*r)),cursor:o},u))},fp=Math.sqrt(Math.PI),hp=function(e){var t=e.cx,n=e.cy,r=e.size,i=e.isHidden,o=e["data-testid"],a=sp("mobile_rotate");return(0,f.jsxs)("g",{children:[(0,f.jsx)("circle",mt({"data-testid":o,pointerEvents:"all",className:kl("tl-transparent","tl-mobile-rotate__bg",{"tl-hidden":i}),cx:t,cy:n},a)),(0,f.jsx)("circle",{className:kl("tl-mobile-rotate__fg",{"tl-hidden":i}),cx:t,cy:n,r:r/fp})]})},pp=function(e,t,n){return function(r){if("pointer_move"!==n&&e.pageState.editingId===t&&(r.isKilled=!0),!r.isKilled){switch(n){case"pointer_down":if(0!==r.button&&1!==r.button&&2!==r.button)return;Gc(r.currentTarget,r);break;case"pointer_up":Qc(r.currentTarget,r)}var i=e.getShapeById(t);i?e.dispatch(mt({type:"pointer",target:"shape",shape:i,name:n},rd(r,e.getContainer()))):console.error("Shape not found",t)}}};var vp=Pl((function(e){var n=e.id,r=e.index,i=e.backgroundIndex,o=e.opacity,a=e.isCulled,s=Ml(),u=Xd().ShapeErrorFallback,l=function(e){var n=Ml();return t.useMemo((function(){var t,r,i=pp(n,e,"pointer_move");return{onPointerDown:pp(n,e,"pointer_down"),onPointerUp:pp(n,e,"pointer_up"),onPointerEnter:pp(n,e,"pointer_enter"),onPointerLeave:pp(n,e,"pointer_leave"),onPointerMove:function(e){if(!e.isKilled&&(e.clientX!==t||e.clientY!==r))return t=e.clientX,r=e.clientY,i(e)},onTouchStart:function(e){e.isKilled=!0,$c(e)},onTouchEnd:function(e){e.isKilled=!0,$c(e)}}}),[n,e])}(n),c=t.useRef(null),d=t.useRef(null),h=t.useCallback((function(e,t){var n,r;null===(n=c.current)||void 0===n||n.style.setProperty(e,t),null===(r=d.current)||void 0===r||r.style.setProperty(e,t)}),[]);gh("set shape container transform position",(function(){var e=s.getShapeById(n),t=s.getPageTransformById(n);if(!e||!t)return null;var r=mc.toCssString(t);h("transform",r)}),[s,h]),gh("set shape container clip path",(function(){if(!s.getShapeById(n))return null;var e=s.getClipPathById(n);h("clip-path",null!==e&&void 0!==e?e:"none")}),[s,h]),gh("set shape height and width",(function(){var e=s.getShapeById(n);if(!e)return null;var t=s.getShapeUtil(e).bounds(e);h("width",Math.ceil(t.width)+"px"),h("height",Math.ceil(t.height)+"px")}),[s]),t.useLayoutEffect((function(){var e,t;h("opacity",o+""),null===(e=c.current)||void 0===e||e.style.setProperty("z-index",r+""),null===(t=d.current)||void 0===t||t.style.setProperty("z-index",i+"")}),[o,r,i,h]);var p=s.getShapeById(n);if(!p)return null;var v=s.getShapeUtil(p);return(0,f.jsxs)(f.Fragment,{children:[v.renderBackground&&(0,f.jsx)("div",{ref:d,className:"tl-shape tl-shape-background","data-shape-type":p.type,draggable:!1,children:!a&&(0,f.jsx)(Ud,{fallback:u?function(e){return(0,f.jsx)(u,{error:e})}:null,onError:function(e){return s.annotateError(e,{origin:"react.shape",willCrashApp:!1})},children:(0,f.jsx)(mp,{shape:p,util:v})})}),(0,f.jsx)("div",{ref:c,className:"tl-shape","data-shape-type":p.type,draggable:!1,onPointerDown:l.onPointerDown,onPointerMove:l.onPointerMove,onPointerUp:l.onPointerUp,onPointerEnter:l.onPointerEnter,onPointerLeave:l.onPointerLeave,children:a&&v.canUnmount(p)?(0,f.jsx)(yp,{shape:p,util:v}):(0,f.jsx)(Ud,{fallback:u?function(e){return(0,f.jsx)(u,{error:e})}:null,onError:function(e){return s.annotateError(e,{origin:"react.shape",willCrashApp:!1})},children:(0,f.jsx)(gp,{shape:p,util:v})})})]})})),gp=t.memo((function(e){var t=e.shape,n=e.util;return Sl("InnerShape:"+n.type,(function(){return n.component(t)}))}),(function(e,t){return e.shape.props===t.shape.props})),mp=t.memo((function(e){var t=e.shape,n=e.util;return Sl("InnerShape:"+n.type,(function(){var e;return null===(e=n.renderBackground)||void 0===e?void 0:e.call(n,t)}))}),(function(e,t){return e.shape.props===t.shape.props})),yp=t.memo((function(e){var t=e.shape,n=e.util.bounds(t);return(0,f.jsx)("div",{className:"tl-shape__culled",style:{transform:"translate(".concat(n.minX,"px, ").concat(n.minY,"px)"),width:n.width,height:n.height}})}),(function(){return!0})),bp=Pl((function(){var e=Ml(),n=Xd(),r=n.Background,i=n.SvgDefs,o=t.useRef(null),a=t.useRef(null);!function(){var e=Ml(),n=cd();(0,t.useLayoutEffect)((function(){var t=rh((function(){e.updateViewportScreenBounds()}),200,{trailing:!0}),r=new ResizeObserver((function(e){e[0].contentRect&&t()}));return n&&r.observe(n),t(),function(){r.disconnect()}}),[e,n])}(),function(){var e=Ml(),n=cd(),r=Il("isFocused",(function(){return e.isFocused}),[e]);(0,t.useEffect)((function(){if(r){var t=function(t){if(!t.altKey||!e.isIn("zoom")&&e.root.path.value.endsWith(".idle")||fd()||$c(t),!t.isKilled){switch(t.isKilled=!0,t.key){case"=":case"-":case"0":if(t.metaKey||t.ctrlKey)return void $c(t);break;case"Tab":default:if(fd()||e.isMenuOpen)return;break;case",":if(!fd()&&($c(t),!e.inputs.keys.has("Comma"))){var r=e.inputs.currentScreenPoint,i=r.x,o=r.y,a=r.z,s=e.pageState.hoveredId;e.inputs.keys.add("Comma");var u=mt({type:"pointer",name:"pointer_down",point:{x:i,y:o,z:a},shiftKey:t.shiftKey,altKey:t.altKey,ctrlKey:t.metaKey||t.ctrlKey,pointerId:0,button:0,isPen:e.isPenMode},s?{target:"shape",shape:e.getShapeById(s)}:{target:"canvas"});return void e.dispatch(u)}break;case"Escape":return void(e.inputs.keys.has("Escape")||(e.inputs.keys.add("Escape"),e.cancel(),n.focus()))}var l={type:"keyboard",name:e.inputs.keys.has(t.code)?"key_repeat":"key_down",key:t.key,code:t.code,shiftKey:t.shiftKey,altKey:t.altKey,ctrlKey:t.metaKey||t.ctrlKey};e.dispatch(l)}},i=function(t){if(!t.isKilled&&(t.isKilled=!0,!fd()&&!e.isMenuOpen)){var n;if(","===t.key&&(null!==(n=document.activeElement)&&void 0!==n&&n.ELEMENT_NODE&&$c(t),e.inputs.keys.has(t.code))){var r=e.inputs.currentScreenPoint,i=r.x,o=r.y,a=r.z,s=e.pageState.hoveredId;e.inputs.keys.delete(t.code);var u=mt({type:"pointer",name:"pointer_up",point:{x:i,y:o,z:a},shiftKey:t.shiftKey,altKey:t.altKey,ctrlKey:t.metaKey||t.ctrlKey,pointerId:0,button:0,isPen:e.isPenMode},s?{target:"shape",shape:e.getShapeById(s)}:{target:"canvas"});return void e.dispatch(u)}var l={type:"keyboard",name:"key_up",key:t.key,code:t.code,shiftKey:t.shiftKey,altKey:t.altKey,ctrlKey:t.metaKey||t.ctrlKey};e.dispatch(l)}},o=function(e){n.contains(e.target)&&(e.ctrlKey||e.metaKey)&&$c(e)};return n.addEventListener("touchstart",a,{passive:!1}),document.addEventListener("wheel",o,{passive:!1}),document.addEventListener("gesturestart",$c),document.addEventListener("gesturechange",$c),document.addEventListener("gestureend",$c),document.addEventListener("keydown",t),document.addEventListener("keyup",i),window.addEventListener("blur",s),window.addEventListener("focus",u),function(){n.removeEventListener("touchstart",a),document.removeEventListener("wheel",o),document.removeEventListener("gesturestart",$c),document.removeEventListener("gesturechange",$c),document.removeEventListener("gestureend",$c),document.removeEventListener("keydown",t),document.removeEventListener("keyup",i),window.removeEventListener("blur",s),window.removeEventListener("focus",u)}}function a(t){if(n.contains(t.target)){var r,i,o=t.touches[0].pageX,a=t.touches[0].radiusX||0;if(o-a<10||o+a>e.viewportScreenBounds.width-10)"BUTTON"===(null===(r=t.target)||void 0===r?void 0:r.tagName)&&(null===(i=t.target)||void 0===i||i.click()),$c(t)}}function s(){e.complete()}function u(){e.updateViewportScreenBounds()}}),[e,n,r])}(),function(){var e=Ml();(0,t.useEffect)((function(){if(window.matchMedia){var t=window.matchMedia("(pointer: coarse)"),n=function(){e.isCoarsePointer=t.matches};return n(),t.addEventListener("change",n),function(){return t.removeEventListener("change",n)}}}),[e])}(),lh(o),function(e){var n=Ml();(0,t.useEffect)((function(){var t=e.current;if(t){var r=function(e){if(e instanceof PointerEvent&&"pen"===e.pointerType){var t;e.isKilled=!0;var r=e.target;if($d.includes(null===(t=r.tagName)||void 0===t?void 0:t.toLocaleLowerCase())||n.isIn("select.editing_shape"))return;$c(e)}};return t.addEventListener("touchstart",r),t.addEventListener("touchend",r),function(){t.removeEventListener("touchstart",r),t.addEventListener("touchend",r)}}}),[n,e])}(o),gh("position layers",(function(){var t=a.current;if(t){var n=e.camera,r=n.x,i=n.y,o=n.z,s=o>=1?Ar(o,[1,8],[.125,.5],!0):Ar(o,[.1,1],[-2,.125],!0);t.style.setProperty("transform","scale(".concat(oc(o),") translate(").concat(oc(r+s),"px,").concat(oc(i+s),"px)"))}}),[e]);var s=hh(),u=s.context,l=s.isReady,c=function(){var e=Ml(),n=(0,t.useMemo)((function(){var t,n;function r(){return r=b(m().mark((function t(n){var r,i,o;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if($c(n),null!==(r=n.dataTransfer)&&void 0!==r&&null!==(r=r.files)&&void 0!==r&&r.length){t.next=3;break}return t.abrupt("return");case 3:return i=Array.from(n.dataTransfer.files),o=e.getContainer().getBoundingClientRect(),t.next=7,e.putExternalContent({type:"files",files:i,point:e.screenToPage(n.clientX-o.x,n.clientY-o.y),ignoreParent:!1});case 7:case"end":return t.stop()}}),t)}))),r.apply(this,arguments)}return{onPointerDown:function(t){t.isKilled||0!==t.button&&1!==t.button&&5!==t.button||(Gc(t.currentTarget,t),e.dispatch(mt({type:"pointer",target:"canvas",name:"pointer_down"},rd(t,e.getContainer()))))},onPointerMove:function(r){r.isKilled||r.clientX===t&&r.clientY===n||(t=r.clientX,n=r.clientY,e.dispatch(mt({type:"pointer",target:"canvas",name:"pointer_move"},rd(r,e.getContainer()))))},onPointerUp:function(r){r.isKilled||0!==r.button&&1!==r.button&&2!==r.button&&5!==r.button||(t=r.clientX,n=r.clientY,Qc(r.currentTarget,r),e.dispatch(mt({type:"pointer",target:"canvas",name:"pointer_up"},rd(r,e.getContainer()))))},onPointerEnter:function(t){t.isKilled||e.dispatch(mt({type:"pointer",target:"canvas",name:"pointer_enter"},rd(t,e.getContainer())))},onPointerLeave:function(t){t.isKilled||e.dispatch(mt({type:"pointer",target:"canvas",name:"pointer_leave"},rd(t,e.getContainer())))},onDragOver:function(e){$c(e)},onDrop:function(e){return r.apply(this,arguments)},onTouchStart:function(e){e.isKilled=!0,document.body.click(),$c(e)},onTouchEnd:function(e){e.isKilled=!0,"A"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&$c(e)}}}),[e]);return n}();return t.useEffect((function(){if(l&&e.isSafari){var t=a.current;t&&requestAnimationFrame((function(){t.style.display="none",requestAnimationFrame((function(){t.style.display=""}))}))}}),[e,l]),t.useEffect((function(){var e;null===(e=o.current)||void 0===e||e.focus()}),[]),(0,f.jsxs)("div",mt(mt({ref:o,draggable:!1,className:"tl-canvas","data-testid":"canvas"},c),{},{children:[r&&(0,f.jsx)(r,{}),(0,f.jsx)(wp,{}),(0,f.jsx)(Lp,{}),(0,f.jsxs)("div",{ref:a,className:"tl-html-layer",draggable:!1,children:[(0,f.jsx)("svg",{className:"tl-svg-context",children:(0,f.jsxs)("defs",{children:[u,Ap&&(0,f.jsx)(Ap,{}),(0,f.jsx)(Tp,{}),(0,f.jsx)(Op,{}),(0,f.jsx)(Np,{}),i&&(0,f.jsx)(i,{})]})}),(0,f.jsx)(kh,{}),(0,f.jsx)("div",{className:"tl-shapes",children:(0,f.jsx)(Pp,{})}),(0,f.jsxs)("div",{className:"tl-overlays",children:[(0,f.jsx)(Ep,{}),(0,f.jsx)(kp,{}),(0,f.jsx)(xp,{}),(0,f.jsx)(Sp,{}),(0,f.jsx)(Ip,{}),(0,f.jsx)(jp,{}),(0,f.jsx)(Mp,{}),(0,f.jsx)(_p,{}),(0,f.jsx)(cp,{}),(0,f.jsx)(wh,{})]})]})]}))})),wp=Pl((function(){var e=Ml(),t=Xd().Grid,n=e.camera,r=n.x,i=n.y,o=n.z,a=e.isGridMode;return t&&a?(0,f.jsx)(t,{x:r,y:i,z:o,size:e.gridSize}):null})),xp=Pl((function(){var e=Ml(),t=e.scribble,n=e.zoomLevel,r=Xd().Scribble;return r&&t?(0,f.jsx)(r,{className:"tl-user-scribble",scribble:t,zoom:n}):null})),kp=Pl((function(){var e=Ml(),t=e.brush,n=Xd().Brush;return n&&t&&e.isIn("select.brushing")?(0,f.jsx)(n,{className:"tl-user-brush",brush:t}):null})),Sp=Pl((function(){var e=Ml(),t=e.zoomBrush,n=Xd().ZoomBrush;return n&&t&&e.isIn("zoom")?(0,f.jsx)(n,{className:"tl-user-brush",brush:t}):null})),_p=Pl((function(){var e=Ml(),t=e.snaps.lines,n=e.zoomLevel,r=Xd().SnapLine;return r&&t.length>0?(0,f.jsx)(f.Fragment,{children:t.map((function(e){return(0,f.jsx)(r,{className:"tl-user-snapline",line:e,zoom:n},e.id)}))}):null})),Ep=Pl((function(){var e,t=Ml(),n=t.zoomLevel,r=t.isChangingStyle,i=t.onlySelectedShape,o=t.isInAny("select.idle","select.pointing_handle")&&!r&&!t.isReadOnly;if(!i||!o)return null;var a=t.getShapeUtil(i),s=null===(e=a.handles)||void 0===e?void 0:e.call(a,i);if(!s)return null;var u=t.getPageTransform(i);if(!u)return null;for(var l=[],c=0,d=s[c];c<s.length;d=s[++c]){if("vertex"!==d.type){var h=s[c-1],p=s[c+1];if(h&&p&&Math.hypot(h.y-p.y,h.x-p.x)<48/n)continue}l.push(d)}return l.sort((function(e){return"vertex"===e.type?1:-1})),(0,f.jsx)("svg",{className:"tl-user-handles tl-overlays__item",children:(0,f.jsx)("g",{transform:mc.toCssString(u),children:l.map((function(e){return(0,f.jsx)(Cp,{shapeId:i.id,handle:e},e.id)}))})})})),Cp=function(e){var n=e.shapeId,r=e.handle,i=function(e,n){var r=Ml();return t.useMemo((function(){var t,i;return{onPointerDown:function(t){if(!t.isKilled){Gc(Xc(t.currentTarget),t);var i=ch(r,e,n),o=i.shape,a=i.handle;a&&r.dispatch(mt({type:"pointer",target:"handle",handle:a,shape:o,name:"pointer_down"},rd(t,r.getContainer())))}},onPointerMove:function(o){if(!o.isKilled&&(o.clientX!==t||o.clientY!==i)){t=o.clientX,i=o.clientY;var a=ch(r,e,n),s=a.shape,u=a.handle;u&&r.dispatch(mt({type:"pointer",target:"handle",handle:u,shape:s,name:"pointer_move"},rd(o,r.getContainer())))}},onPointerUp:function(t){if(!t.isKilled){Qc(Xc(t.currentTarget),t);var i=ch(r,e,n),o=i.shape,a=i.handle;a&&r.dispatch(mt({type:"pointer",target:"handle",handle:a,shape:o,name:"pointer_up"},rd(t,r.getContainer())))}},onPointerEnter:function(t){if(!t.isKilled){var i=ch(r,e,n),o=i.shape,a=i.handle;a&&r.dispatch(mt({type:"pointer",target:"handle",handle:a,shape:o,name:"pointer_enter"},rd(t,r.getContainer())))}},onPointerLeave:function(t){if(!t.isKilled){var i=ch(r,e,n),o=i.shape,a=i.handle;a&&r.dispatch(mt({type:"pointer",target:"handle",handle:a,shape:o,name:"pointer_leave"},rd(t,r.getContainer())))}}}}),[r,e,n])}(n,r.id),o=Xd().Handle;return o?(0,f.jsx)("g",mt(mt({"aria-label":"handle",transform:"translate(".concat(r.x,", ").concat(r.y,")")},i),{},{children:(0,f.jsx)(o,{shapeId:n,handle:r})})):null},Pp=Pl((function(){var e=Ml().renderingShapes;return Kc.debugSvg.value?(0,f.jsx)(f.Fragment,{children:e.map((function(e){return(0,f.jsxs)(t.Fragment,{children:[(0,f.jsx)(vp,mt({},e)),(0,f.jsx)(Rp,{id:e.id})]},e.id+"_fragment")}))}):(0,f.jsx)(f.Fragment,{children:e.map((function(e){return(0,f.jsx)(vp,mt({},e),e.id+"_shape")}))})})),Ip=Pl((function(){var e=Ml();return e.isInAny("select.idle","select.brushing","select.scribble_brushing","select.pointing_shape","select.pointing_selection","select.pointing_handle")&&!e.isChangingStyle?(0,f.jsx)(f.Fragment,{children:e.selectedIds.map((function(e){return(0,f.jsx)(Hd,{className:"tl-user-indicator__selected",id:e},e+"_indicator")}))}):null})),jp=function(){var e=Ml(),t=Il("hovered id and should display",(function(){return e.isInAny("select.idle","select.editing_shape")?e.pageState.hoveredId:null}),[e]);return t?(0,f.jsx)(Hd,{className:"tl-user-indicator__hovered",id:t}):null},Mp=Pl((function(){var e=yr(Ml().hintingIds);return e.length?(0,f.jsx)(f.Fragment,{children:e.map((function(e){return(0,f.jsx)(Hd,{className:"tl-user-indicator__hint",id:e},e+"_hinting")}))}):null}));function Ap(){return(0,f.jsxs)("g",{id:"cursor",children:[(0,f.jsxs)("g",{fill:"rgba(0,0,0,.2)",transform:"translate(-11,-11)",children:[(0,f.jsx)("path",{d:"m12 24.4219v-16.015l11.591 11.619h-6.781l-.411.124z"}),(0,f.jsx)("path",{d:"m21.0845 25.0962-3.605 1.535-4.682-11.089 3.686-1.553z"})]}),(0,f.jsxs)("g",{fill:"white",transform:"translate(-12,-12)",children:[(0,f.jsx)("path",{d:"m12 24.4219v-16.015l11.591 11.619h-6.781l-.411.124z"}),(0,f.jsx)("path",{d:"m21.0845 25.0962-3.605 1.535-4.682-11.089 3.686-1.553z"})]}),(0,f.jsxs)("g",{fill:"currentColor",transform:"translate(-12,-12)",children:[(0,f.jsx)("path",{d:"m19.751 24.4155-1.844.774-3.1-7.374 1.841-.775z"}),(0,f.jsx)("path",{d:"m13 10.814v11.188l2.969-2.866.428-.139h4.768z"})]})]})}function Tp(){return(0,f.jsx)("path",{id:"cursor_hint",fill:"currentColor",d:"M -2,-5 2,0 -2,5 Z"})}function Op(){return(0,f.jsx)("marker",{id:"arrowhead-dot",className:"tl-arrow-hint",refX:"3.0",refY:"3.0",orient:"0",children:(0,f.jsx)("circle",{cx:"3",cy:"3",r:"2",strokeDasharray:"100%"})})}function Np(){return(0,f.jsxs)("marker",{id:"arrowhead-cross",className:"tl-arrow-hint",refX:"3.0",refY:"3.0",orient:"auto",children:[(0,f.jsx)("line",{x1:"1.5",y1:"1.5",x2:"4.5",y2:"4.5",strokeDasharray:"100%"}),(0,f.jsx)("line",{x1:"1.5",y1:"4.5",x2:"4.5",y2:"1.5",strokeDasharray:"100%"})]})}var Rp=Pl((function(e){var n=e.id,r=Ml(),i=r.getShapeById(n),o=l(t.useState(""),2),a=o[0],s=o[1],u=(null===i||void 0===i?void 0:i.parentId)===r.currentPageId;return t.useEffect((function(){if(u){var e=null,t=lo("shape to svg",b(m().mark((function t(){var i,o,a;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=Math.random(),e=i,o=r.getPageBoundsById(n),t.next=5,r.getSvg([n],{padding:0});case 5:(a=t.sent)&&o&&e===i&&(a.style.setProperty("overflow","visible"),a.setAttribute("preserveAspectRatio","xMidYMin slice"),a.style.setProperty("transform","translate(".concat(o.x,"px, ").concat(o.y+o.h+12,"px)")),a.style.setProperty("border","1px solid black"),s(null===a||void 0===a?void 0:a.outerHTML));case 7:case"end":return t.stop()}}),t)}))));return function(){e=null,t()}}}),[r,n,u]),u?(0,f.jsx)("div",{style:{paddingTop:12,position:"absolute"},children:(0,f.jsx)("div",{style:{display:"flex"},dangerouslySetInnerHTML:{__html:a}})}):null})),Lp=Pl((function(){var e=Kc.logMessages.value;return(0,f.jsx)("div",{className:"debug__ui-logger",children:e.map((function(e,t){var n="string"===typeof e?e:JSON.stringify(e);return(0,f.jsx)("div",{className:"debug__ui-logger__line",children:n},t)}))})}));function Dp(){}var zp=function(e){var n=e.error,r=e.editor,i=(0,t.useRef)(null),o=l((0,t.useState)(!1),2),a=o[0],s=o[1],u=l((0,t.useState)(!1),2),c=u[0],d=u[1],h=l((0,t.useState)(!1),2),p=h[0],v=h[1],g=n instanceof Error?n.message:String(n),y=n instanceof Error?n.stack:null,w=Il("isDarkMode",(function(){try{if(r)return r.isDarkMode}catch(e){}return null}),[r]),x=l((0,t.useState)(null),2),k=x[0],S=x[1];(0,t.useLayoutEffect)((function(){var e;null!==w&&S(w);for(var t=null===(e=i.current)||void 0===e?void 0:e.parentElement,n=!1;t;){if(t.classList.contains("tl-theme__dark")||t.classList.contains("tl-theme__light")){n=!0;break}t=t.parentElement}S(n?null:window.matchMedia("(prefetl-color-scheme: dark)").matches)}),[w]),(0,t.useEffect)((function(){if(c){var e=setTimeout((function(){d(!1)}),2e3);return function(){return clearTimeout(e)}}}),[c]);var _=function(){var e=b(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Tl();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=new URL("https://github.com/tldraw/tldraw/issues/new");return E.searchParams.set("title",g),E.searchParams.set("labels","bug"),E.searchParams.set("body","Hey, I ran into an error while using tldraw:\n\n```js\n".concat(null!==y&&void 0!==y?y:g,"\n```\n\nMy browser: ").concat(navigator.userAgent)),(0,f.jsxs)("div",{ref:i,className:kl("tl-container tl-error-boundary",null===k?"":k?"tl-theme__dark":"tl-theme__light"),children:[(0,f.jsx)("div",{className:"tl-error-boundary__overlay"}),r&&(0,f.jsx)(Fd,{onError:Dp,fallback:function(){return null},children:(0,f.jsx)(jl.Provider,{value:r,children:(0,f.jsx)("div",{className:"tl-overlay tl-error-boundary__canvas",children:(0,f.jsx)(bp,{})})})}),(0,f.jsx)("div",{className:kl("tl-modal","tl-error-boundary__content",{"tl-error-boundary__content__expanded":a&&!p}),children:p?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("h2",{children:"Are you sure?"}),(0,f.jsx)("p",{children:"Resetting your data will delete your drawing and cannot be undone."}),(0,f.jsxs)("div",{className:"tl-error-boundary__content__actions",children:[(0,f.jsx)("button",{onClick:function(){return v(!1)},children:"Cancel"}),(0,f.jsx)("button",{className:"tl-error-boundary__reset",onClick:_,children:"Reset data"})]})]}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("h2",{children:"Something's gone wrong."}),(0,f.jsxs)("p",{children:["Sorry, we encountered an error. Please refresh the page to continue. If you keep seeing this error, you can ",(0,f.jsx)("a",{href:E.toString(),children:"create a GitHub issue"})," or"," ",(0,f.jsx)("a",{href:"https://discord.gg/Cq6cPsTfNy",children:"ask for help on Discord"}),"."]}),a&&(0,f.jsxs)("div",{className:"tl-error-boundary__content__error",children:[(0,f.jsx)("pre",{children:(0,f.jsx)("code",{children:null!==y&&void 0!==y?y:g})}),(0,f.jsx)("button",{onClick:function(){var e=document.createElement("textarea");e.value=null!==y&&void 0!==y?y:g,document.body.appendChild(e),e.select(),document.execCommand("copy"),e.remove(),d(!0)},children:c?"Copied!":"Copy"})]}),(0,f.jsxs)("div",{className:"tl-error-boundary__content__actions",children:[(0,f.jsx)("button",{onClick:function(){return s(!a)},children:a?"Hide details":"Show details"}),(0,f.jsxs)("div",{className:"tl-error-boundary__content__actions__group",children:[(0,f.jsx)("button",{className:"tl-error-boundary__reset",onClick:function(){return v(!0)},children:"Reset data"}),(0,f.jsx)("button",{className:"tl-error-boundary__refresh",onClick:function(){Al.refreshPage()},children:"Refresh Page"})]})]})]})})]})};function Bp(){return fo()}var Fp,Up=new RegExp(/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:[/?#]\S*)?$/i);function Kp(e){return Up.test(e)}var Vp=["animationSpeed"],Wp=["isSnapMode"],Hp="TLDRAW_USER_DATA_v3",Yp=bi({id:ai,name:ai,locale:ai,color:ai,isDarkMode:hi,animationSpeed:si,isSnapMode:hi}),qp=2,Xp=Eo({currentVersion:qp,migrators:(Fp={},vt(Fp,1,{up:function(e){return mt(mt({},e),{},{animationSpeed:1})},down:function(e){e.animationSpeed;return So(e,Vp)}}),vt(Fp,qp,{up:function(e){return mt(mt({},e),{},{isSnapMode:!1})},down:function(e){e.isSnapMode;return So(e,Wp)}}),Fp)}),$p=["#FF802B","#EC5E41","#F2555A","#F04F88","#E34BA9","#BD54C6","#9D5BD2","#7B66DC","#02B1CC","#11B3A3","#39B178","#55B467"];function Gp(){return{id:Bp(),locale:"undefined"!==typeof window?ml():"en",name:"New User",color:$p[Math.floor(Math.random()*$p.length)],isDarkMode:!1,animationSpeed:1,isSnapMode:!1}}function Qp(e){var t;if(null===e||"object"!==typeof e)return Gp();if(!("version"in e)||!("user"in e)||"number"!==typeof e.version)return Gp();var n=Io({value:e.user,fromVersion:e.version,toVersion:null!==(t=Xp.currentVersion)&&void 0!==t?t:0,migrations:Xp});if("error"===n.type)return Gp();try{Yp.validate(n.value)}catch(VO){return Gp()}return n.value}var Jp=eo("globalUserData",function(){var e,t;return Qp("undefined"===typeof window?null:null!==(e=JSON.parse((null===(t=window)||void 0===t||null===(t=t.localStorage)||void 0===t?void 0:t.getItem(Hp))||"null"))&&void 0!==e?e:null)}());function Zp(e){Yp.validate(e),Jp.set(e),"undefined"!==typeof window&&window.localStorage&&window.localStorage.setItem(Hp,JSON.stringify({version:Xp.currentVersion,user:Jp.value})),null===tv||void 0===tv||tv.postMessage({type:rv,origin:nv,data:{user:Jp.value,version:Xp.currentVersion}})}var ev="undefined"!==typeof process&&!1,tv="undefined"===typeof BroadcastChannel||ev?null:new BroadcastChannel("tldraw-user-sync");null===tv||void 0===tv||tv.addEventListener("message",(function(e){var t=e.data;(null===t||void 0===t?void 0:t.type)===rv&&(null===t||void 0===t?void 0:t.origin)!==nv&&Jp.set(Qp(t.data))}));var nv=Bp(),rv="tldraw-user-preferences-change";function iv(){return Jp.value}function ov(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{derivePresenceState:null!==(e=r.derivePresenceState)&&void 0!==e?e:function(){return so("presence",(function(){return null}))},userPreferences:null!==(t=r.userPreferences)&&void 0!==t?t:so("userPreferences",(function(){return iv()})),setUserPreferences:null!==(n=r.setUserPreferences)&&void 0!==n?n:Zp}}var av=n(7143);function sv(e,t){return _r(e===t.util.type,'Shape type "'.concat(e,'" does not match util type "').concat(t.util.type,'"')),mt({type:e},t)}var uv={wheel:"onWheel",pointer_enter:"onPointerEnter",pointer_leave:"onPointerLeave",pointer_down:"onPointerDown",pointer_move:"onPointerMove",pointer_up:"onPointerUp",right_click:"onRightClick",middle_click:"onMiddleClick",key_down:"onKeyDown",key_up:"onKeyUp",key_repeat:"onKeyRepeat",cancel:"onCancel",complete:"onComplete",interrupt:"onInterrupt",double_click:"onDoubleClick",triple_click:"onTripleClick",quadruple_click:"onQuadrupleClick"},lv=function(){function e(t,n){var r=this;ne(this,e),vt(this,"path",void 0),vt(this,"id",void 0),vt(this,"current",void 0),vt(this,"type",void 0),vt(this,"shapeType",void 0),vt(this,"initial",void 0),vt(this,"children",void 0),vt(this,"parent",void 0),vt(this,"isActive",!1),vt(this,"onWheel",void 0),vt(this,"onPointerEnter",void 0),vt(this,"onPointerLeave",void 0),vt(this,"onPointerDown",void 0),vt(this,"onPointerMove",void 0),vt(this,"onPointerUp",void 0),vt(this,"onDoubleClick",void 0),vt(this,"onTripleClick",void 0),vt(this,"onQuadrupleClick",void 0),vt(this,"onRightClick",void 0),vt(this,"onMiddleClick",void 0),vt(this,"onKeyDown",void 0),vt(this,"onKeyUp",void 0),vt(this,"onKeyRepeat",void 0),vt(this,"onCancel",void 0),vt(this,"onComplete",void 0),vt(this,"onInterrupt",void 0),vt(this,"onEnter",void 0),vt(this,"onExit",void 0),this.editor=t;var i=this.constructor,o=i.id,a=i.children,s=i.initial;this.id=o,this.current=eo("toolState"+this.id,void 0),this.path=so("toolPath"+this.id,(function(){var e=r.current.value;return r.id+(e?".".concat(e.path.value):"")})),this.parent=null!==n&&void 0!==n?n:{},this.parent?a&&s?(this.type="branch",this.initial=s,this.children=Object.fromEntries(a().map((function(e){return[e.id,new e(r.editor,r)]}))),this.current.set(this.children[this.initial])):this.type="leaf":(this.type="root",a&&s&&(this.initial=s,this.children=Object.fromEntries(a().map((function(e){return[e.id,new e(r.editor,r)]}))),this.current.set(this.children[this.initial])))}return oe(e,[{key:"transition",value:function(e,t){for(var n=e.split("."),r=this,i=0;i<n.length;i++){var o,a=n[i],s=r.current.value,u=null===(o=r.children)||void 0===o?void 0:o[a];if(!u)throw Error("".concat(r.id," - no child state exists with the id ").concat(a,"."));if((null===s||void 0===s?void 0:s.id)!==u.id&&(null===s||void 0===s||s.exit(t,a),r.current.set(u),u.enter(t,(null===s||void 0===s?void 0:s.id)||"initial"),!u.isActive))break;r=u}return this}},{key:"handleEvent",value:function(e){var t,n=uv[e.name],r=this.current.value;null===(t=this[n])||void 0===t||t.call(this,e),this.current.value===r&&this.isActive&&(null===r||void 0===r||r.handleEvent(e))}},{key:"enter",value:function(e,t){var n;if(this.isActive=!0,null===(n=this.onEnter)||void 0===n||n.call(this,e,t),this.children&&this.initial&&this.isActive){var r=this.children[this.initial];this.current.set(r),r.enter(e,t)}}},{key:"exit",value:function(e,t){var n,r;(this.isActive=!1,null===(n=this.onExit)||void 0===n||n.call(this,e,t),this.isActive)||(null===(r=this.current.value)||void 0===r||r.exit(e,t))}}]),e}();vt(lv,"id",void 0),vt(lv,"initial",void 0),vt(lv,"children",void 0);var cv=["children","className"];function dv(e){var t=e.children,n=e.className,r=void 0===n?"":n,i=So(e,cv);return(0,f.jsx)("svg",mt(mt({},i),{},{className:"tl-svg-container ".concat(r),children:t}))}function fv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.closed,i=void 0!==r&&r,o=n.snap,a=void 0===o?1:o,s=n.start,u=void 0===s?"outset":s,l=n.end,c=void 0===l?"outset":l,d=n.lengthRatio,f=void 0===d?2:d,h=n.style,p=void 0===h?"dashed":h,v=0,g=0,m=1,y=0,b=0;switch(p){case"dashed":m=1,v=Math.min(t*f,e/4);break;case"dotted":v=t/(m=100);break;default:return{strokeDasharray:"none",strokeDashoffset:"none"}}return i||("outset"===u?(e+=v/2,b+=v/2):"skip"===u&&(e-=v,b-=v),"outset"===c?e+=v/2:"skip"===c&&(e-=v)),g=Math.floor(e/v/(2*m)),(g-=g%a)<3&&"dashed"===p?e/t<5?(v=e,g=1,y=0):(v=.333*e,y=.333*e):(v=e/(g=Math.max(g,3))/(2*m),i?(b=v/2,y=(e-g*v)/g):y=(e-g*v)/Math.max(1,g-1)),{strokeDasharray:[v,y].join(" "),strokeDashoffset:b.toString()}}var hv=t.memo((function(e){var t=e.d,n=e.color,r=e.fill;switch(r){case"none":return(0,f.jsx)("path",{className:"tl-hitarea-stroke",fill:"none",d:t});case"solid":return(0,f.jsx)("path",{className:"tl-hitarea-fill-solid",fill:"var(--palette-".concat(n,"-semi)"),d:t});case"semi":return(0,f.jsx)("path",{className:"tl-hitarea-fill-solid",fill:"var(--palette-solid)",d:t});case"pattern":return(0,f.jsx)(pv,{color:n,fill:r,d:t})}})),pv=function(e){var t=e.d,n=e.color,r=Ml(),i=Il("zoomLevel",(function(){return r.zoomLevel}),[r]),o=Il("isDarkMode",(function(){return r.isDarkMode}),[r]),a=Math.ceil(i),s=r.zoomLevel<=.18;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("path",{className:"tl-hitarea-fill-solid",fill:"var(--palette-".concat(n,"-pattern)"),d:t}),(0,f.jsx)("path",{fill:s?"var(--palette-".concat(n,"-semi)"):"url(#".concat(kd[a+(o?"_dark":"_light")],")"),d:t})]})};function vv(e){var t=e.d,n=e.color,r=e.fill,i=e.colors;if("none"!==r){if("pattern"===r){var o=document.createElementNS("http://www.w3.org/2000/svg","g"),a=document.createElementNS("http://www.w3.org/2000/svg","path");a.setAttribute("d",t),a.setAttribute("fill",i.pattern[n]);var s=document.createElementNS("http://www.w3.org/2000/svg","path");return s.setAttribute("d",t),s.setAttribute("fill","url(#hash_pattern)"),o.appendChild(a),o.appendChild(s),o}var u=document.createElementNS("http://www.w3.org/2000/svg","path");switch(u.setAttribute("d",t),r){case"semi":u.setAttribute("fill",i.solid);break;case"solid":u.setAttribute("fill",i.semi[n])}return u}}function gv(e,t){if(t){var n=document.createElementNS("http://www.w3.org/2000/svg","g");return n.appendChild(t),n.appendChild(e),n}return e}function mv(e,t,n){var r,i="end"===t?e.end.point:e.start.point,o="end"===t?e.start.point:e.end.point,a=e.isStraight?Nl.Dist(o,i):Math.abs(e.bodyArc.length),s=Math.max(Math.min(a/5,3*n),n);if(e.isStraight)r=Nl.Nudge(i,o,s);else{var u=function(e,t,n,r){var i=n.x-e.x,o=n.y-e.y,a=Math.sqrt(i*i+o*o),s=(a*a-r*r+t*t)/(2*a),u=Math.sqrt(t*t-s*s);return i/=a,o/=a,[new Nl(e.x+i*s-o*u,e.y+o*s+i*u),new Nl(e.x+i*s+o*u,e.y+o*s-i*u)]}(i,s,e.handleArc.center,e.handleArc.radius);r="end"===t?e.handleArc.sweepFlag?u[0]:u[1]:e.handleArc.sweepFlag?u[1]:u[0]}return{point:i,int:r}}function yv(e,t,n){var r="end"===t?e.end.arrowhead:e.start.arrowhead;if("none"!==r){var i=mv(e,t,n);if(i){switch(r){case"bar":return function(e){var t=e.int,n=e.point,r=Nl.Sub(t,n).div(2),i=Nl.Add(n,Nl.Rot(r,Dl)),o=Nl.Sub(n,Nl.Rot(r,Dl));return"M ".concat(i.x," ").concat(i.y," L ").concat(o.x," ").concat(o.y)}(i);case"square":return function(e){var t=e.int,n=e.point,r=Nl.Lrp(n,t,.85),i=Nl.Sub(r,n).div(2),o=Nl.Add(n,Nl.Rot(i,Dl)),a=Nl.Sub(n,Nl.Rot(i,Dl)),s=Nl.Add(r,Nl.Rot(i,Dl)),u=Nl.Sub(r,Nl.Rot(i,Dl));return"M ".concat(o.x," ").concat(o.y," L ").concat(s.x," ").concat(s.y," L ").concat(u.x," ").concat(u.y," L ").concat(a.x," ").concat(a.y," Z")}(i);case"diamond":return function(e){var t=e.point,n=e.int,r=Nl.Lrp(t,n,.75),i=Nl.RotWith(r,t,Ll/4),o=Nl.RotWith(r,t,-Ll/4),a=Nl.Lrp(i,o,.5);return a.add(Nl.Sub(a,t)),"M ".concat(a.x," ").concat(a.y," L ").concat(i.x," ").concat(i.y," ").concat(t.x," ").concat(t.y," L ").concat(o.x," ").concat(o.y," Z")}(i);case"dot":return function(e){var t=e.point,n=e.int,r=Nl.Lrp(t,n,.45),i=Nl.Dist(r,t);return"M ".concat(r.x-i,",").concat(r.y,"\n  a ").concat(i,",").concat(i," 0 1,0 ").concat(2*i,",0\n  a ").concat(i,",").concat(i," 0 1,0 -").concat(2*i,",0 ")}(i);case"inverted":return function(e){var t=e.point,n=e.int,r=Nl.Sub(n,t).div(2),i=Nl.Add(t,Nl.Rot(r,Dl)),o=Nl.Sub(t,Nl.Rot(r,Dl));return"M ".concat(i.x," ").concat(i.y," L ").concat(n.x," ").concat(n.y," L ").concat(o.x," ").concat(o.y," Z")}(i);case"arrow":return function(e){var t=e.point,n=e.int,r=Nl.RotWith(n,t,Ll/6),i=Nl.RotWith(n,t,-Ll/6);return"M ".concat(r.x," ").concat(r.y," L ").concat(t.x," ").concat(t.y," L ").concat(i.x," ").concat(i.y)}(i);case"triangle":return function(e){var t=e.point,n=e.int,r=Nl.RotWith(n,t,Ll/6),i=Nl.RotWith(n,t,-Ll/6);return"M ".concat(r.x," ").concat(r.y," L ").concat(t.x," ").concat(t.y," L ").concat(i.x," ").concat(i.y," Z")}(i)}return""}}}function bv(e){return Math.abs(e.props.bend)<8}function wv(e,t){if("point"!==t.type){var n=e.getShapeById(t.boundShapeId);return{shape:n,util:e.getShapeUtil(n),transform:e.getPageTransform(n),isExact:t.isExact,didIntersect:!1}}}function xv(e,t,n){if("point"===n.type)return Nl.From(n);var r=e.getShapeById(n.boundShapeId);if(r){var i=e.getBounds(r),o=i.point,a=i.size,s=Nl.Add(o,Nl.MulV(n.normalizedAnchor,a)),u=mc.applyToPoint(e.getPageTransform(r),s);return mc.applyToPoint(mc.Inverse(t),u)}return new Nl(0,0)}function kv(e,t){var n=e.getPageTransform(t);return{start:xv(e,n,t.props.start),end:xv(e,n,t.props.end)}}var Sv=48,_v=10;function Ev(e,t){var n=t.props,r=n.start,i=n.end,o=n.arrowheadStart,a=n.arrowheadEnd,s=kv(e,t),u=s.start.clone(),l=s.end.clone(),c=Nl.Med(u,l),d=Nl.Sub(l,u).uni(),f=wv(e,r),h=wv(e,i),p=e.getPageTransform(t);Cv(l,s.start,p,h),Cv(u,s.end,p,f);var v=Sv,g=f&&h&&f.shape===h.shape;!f||!h||g||f.isExact||h.isExact||(h.didIntersect&&!f.didIntersect?f.util.isClosed(f.shape)&&u.setTo(Nl.Nudge(l,u,v)):h.didIntersect||h.util.isClosed(h.shape)&&l.setTo(Nl.Nudge(u,l,v)));var m=Nl.Sub(l,u).uni(),y=!Nl.Equals(m,d);if(!g){if(f&&"none"!==o&&!f.isExact){var b=_v+Kh[t.props.size]/2+("size"in f.shape.props?Kh[f.shape.props.size]/2:0);v-=b,u.nudge(l,b*(y?-1:1))}if(h&&"none"!==a&&!h.isExact){var w=_v+Kh[t.props.size]/2+("size"in h.shape.props?Kh[h.shape.props.size]/2:0);v-=w,l.nudge(u,w*(y?-1:1))}}f&&h&&(y?l.setTo(Nl.Add(u,m.mul(-v))):Nl.Dist(u,l)<Sv/2&&l.setTo(Nl.Add(u,m.mul(Sv/2)))),y?c.setTo(Nl.Med(s.start,s.end)):c.setTo(Nl.Med(u,l));var x=Nl.Dist(u,l);return{isStraight:!0,start:{handle:s.start,point:u,arrowhead:t.props.arrowheadStart},end:{handle:s.end,point:l,arrowhead:t.props.arrowheadEnd},middle:c,isValid:x>0,length:x}}function Cv(e,t,n,r){if(void 0!==r&&!r.isExact){var i,o,a=mc.applyToPoint(n,t),s=mc.applyToPoint(n,e),u=mc.applyToPoint(mc.Inverse(r.transform),a),l=mc.applyToPoint(mc.Inverse(r.transform),s),c=r.util.isClosed(r.shape),d=(c?Mc:jc)(u,l,r.util.outline(r.shape));if(null!==d)i=null!==(o=d.sort((function(e,t){return Nl.Dist(e,u)-Nl.Dist(t,u)}))[0])&&void 0!==o?o:c?void 0:l;if(void 0!==i){var f=mc.applyToPoint(r.transform,i),h=mc.applyToPoint(mc.Inverse(n),f);e.setTo(h),r.didIntersect=!0}}}function Pv(e){return jv(e.start.handle,e.end.handle)}function Iv(e){return jv(e.start.point,e.end.point)}function jv(e,t){return"M".concat(e.x,",").concat(e.y,"L").concat(t.x,",").concat(t.y)}function Mv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=t.props,i=r.arrowheadEnd,o=r.arrowheadStart,a=t.props.bend+n;if(Math.abs(a)>Math.abs(10*t.props.bend))return Ev(e,t);var s=kv(e,t),u=Nl.Med(s.start,s.end),l=Nl.Sub(s.end,s.start).uni(),c=Nl.Add(u,l.per().mul(-a)),d=wv(e,t.props.start),f=wv(e,t.props.end),h=s.start.clone(),p=s.end.clone(),v=c.clone(),g=Ov(h,p,v);if(0===g.length||0===g.size||!uc(g.length)||!uc(g.size))return Ev(e,t);var m=e.getPageTransform(t);if(d&&!d.isExact){var y,b=mc.applyToPoint(m,h),w=mc.applyToPoint(m,p),x=mc.applyToPoint(m,g.center),k=mc.Inverse(d.transform),S=mc.applyToPoint(k,b),_=mc.applyToPoint(k,w),E=mc.applyToPoint(k,x),C=d.util.isClosed(d.shape),P=(C?Ac:Tc)(E,g.radius,d.util.outline(d.shape));if(P){var I;P=P.filter((function(e){return+Nl.Clockwise(S,e,_)===g.sweepFlag}));var j=ql(Nl.Angle(g.center,c),Nl.Angle(g.center,s.start),.5);P.sort((function(e,t){return Math.abs(Yl(j,E.angle(e)))-Math.abs(Yl(j,E.angle(t)))})),y=null!==(I=P[0])&&void 0!==I?I:C?void 0:S}else y=C?void 0:S;if(y&&(h.setTo(e.getPointInShapeSpace(t,mc.applyToPoint(d.transform,y))),d.didIntersect=!0,"none"!==o)){var M=_v+Kh[t.props.size]/2+("size"in d.shape.props?Kh[d.shape.props.size]/2:0);h.setTo(Zl(g.center.x,g.center.y,g.radius,ql(Nl.Angle(g.center,h),Nl.Angle(g.center,c),M/Math.abs(Jl(g.center,g.radius,h,c)))))}}if(f&&!f.isExact){var A,T,O=mc.applyToPoint(m,h),N=mc.applyToPoint(m,p),R=mc.applyToPoint(m,g.center),L=mc.Inverse(f.transform),D=mc.applyToPoint(L,O),z=mc.applyToPoint(L,N),B=mc.applyToPoint(L,R),F=f.util.isClosed(f.shape),U=F?Ac:Tc,K=ql(Nl.Angle(g.center,c),Nl.Angle(g.center,s.end),.5),V=U(B,g.radius,f.util.outline(f.shape));if(V)(V=V.filter((function(e){return+Nl.Clockwise(D,e,z)===g.sweepFlag}))).sort((function(e,t){return Math.abs(Yl(K,B.angle(e)))-Math.abs(Yl(K,B.angle(t)))})),A=null!==(T=V[0])&&void 0!==T?T:F?void 0:z;else A=F?void 0:z;if(A&&(p.setTo(e.getPointInShapeSpace(t,mc.applyToPoint(f.transform,A))),f.didIntersect=!0,"none"!==i)){var W=_v+Kh[t.props.size]/2+("size"in f.shape.props?Kh[f.shape.props.size]/2:0);Nl.Dist(h,p)<Sv&&(W*=-2),p.setTo(Zl(g.center.x,g.center.y,g.radius,ql(Nl.Angle(g.center,p),Nl.Angle(g.center,c),W/Math.abs(Jl(g.center,g.radius,p,c)))))}}if(Math.abs(Jl(g.center,g.radius,h,p))<Sv/2&&(h.setTo(s.start),p.setTo(s.end)),d&&f&&d.shape!==f.shape&&!d.isExact&&!f.isExact){var H=Nl.Angle(g.center,h),Y=Nl.Angle(g.center,p),q=g.sweepFlag?Sv:-Sv,X=Jl(g.center,g.radius,p,h),$=g.center,G=$.x,Q=$.y,J=g.radius;d&&!d.didIntersect&&h.setTo(Zl(G,Q,J,ql(H,Y,q/X))),f&&!f.didIntersect&&p.setTo(Zl(G,Q,J,ql(H,Y,-q/X)))}var Z=ql(Nl.Angle(g.center,h),Nl.Angle(g.center,p),.5),ee=Zl(g.center.x,g.center.y,g.radius,Z);+Nl.Clockwise(h,ee,p)!==g.sweepFlag&&(Z+=Ll,ee=Zl(g.center.x,g.center.y,g.radius,Z)),v.setTo(ee);var te=Ov(h,p,v);return{isStraight:!1,start:{point:h,handle:s.start,arrowhead:t.props.arrowheadStart},end:{point:p,handle:s.end,arrowhead:t.props.arrowheadEnd},middle:v,handleArc:g,bodyArc:te,isValid:0!==te.length&&isFinite(te.center.x)&&isFinite(te.center.y)}}function Av(e){var t=e.start,n=e.end,r=e.handleArc,i=r.radius,o=r.largeArcFlag,a=r.sweepFlag;return"M".concat(t.handle.x,",").concat(t.handle.y," A").concat(i," ").concat(i," 0 ").concat(o," ").concat(a," ").concat(n.handle.x,",").concat(n.handle.y)}function Tv(e){var t=e.start,n=e.end,r=e.bodyArc,i=r.radius,o=r.largeArcFlag,a=r.sweepFlag;return"M".concat(t.point.x,",").concat(t.point.y," A").concat(i," ").concat(i," 0 ").concat(o," ").concat(a," ").concat(n.point.x,",").concat(n.point.y)}function Ov(e,t,n){var r=-2*(e.x*(t.y-n.y)-e.y*(t.x-n.x)+t.x*n.y-n.x*t.y),i={x:((e.x*e.x+e.y*e.y)*(n.y-t.y)+(t.x*t.x+t.y*t.y)*(e.y-n.y)+(n.x*n.x+n.y*n.y)*(t.y-e.y))/r,y:((e.x*e.x+e.y*e.y)*(t.x-n.x)+(t.x*t.x+t.y*t.y)*(n.x-e.x)+(n.x*n.x+n.y*n.y)*(e.x-t.x))/r},o=Nl.Dist(i,e),a=+Nl.Clockwise(e,n,t),s=Math.hypot(e.y-t.y,e.x-t.x),u=Math.hypot(t.y-n.y,t.x-n.x),l=Math.hypot(n.y-e.y,n.x-e.x),c=2*Math.acos((u*u+l*l-s*s)/(2*u*l)),d=(zl-c)*(a?1:-1);return{center:i,radius:o,size:d,length:d*o,largeArcFlag:+(Ll>c),sweepFlag:a}}var Nv=t.memo((function(e){var t=e.id,n=e.text,r=e.size,i=e.font,o=e.position,a=e.width,s=e.labelColor,u=Gh(t,"arrow",n),l=u.rInput,c=u.isEditing,d=u.handleFocus,h=u.handleBlur,p=u.handleKeyDown,v=u.handleChange,g=u.isEmpty;return!c&&g?null:(0,f.jsx)("div",{className:"tl-arrow-label","data-font":i,"data-align":"center","data-hastext":!g,"data-isediting":c,style:{textAlign:"center",fontSize:Hh[r],lineHeight:Hh[r]*Uh.lineHeight+"px",transform:"translate(".concat(o.x,"px, ").concat(o.y,"px)"),color:s},children:(0,f.jsxs)("div",{className:"tl-arrow-label__inner",children:[(0,f.jsx)("p",{style:{width:a||"9px"},children:n?Xh.normalizeTextForDom(n):" "}),c&&(0,f.jsx)("textarea",{ref:l,className:"tl-text tl-text-input",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:!0,placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:n,onFocus:d,onChange:v,onKeyDown:p,onBlur:h,onContextMenu:nd})]})})})),Rv=Object.defineProperty,Lv=Object.getOwnPropertyDescriptor,Dv=function(e,t,n,r){for(var i,o=r>1?void 0:r?Lv(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Rv(t,n,o),o},zv=0,Bv=function(e){xt(r,e);var n=Et(r);function r(){var e;ne(this,r);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return vt(_t(e=n.call.apply(n,[this].concat(i))),"canEdit",(function(){return!0})),vt(_t(e),"canBind",(function(){return!1})),vt(_t(e),"isClosed",(function(){return!1})),vt(_t(e),"canSnap",(function(){return!0})),vt(_t(e),"hideResizeHandles",(function(){return!0})),vt(_t(e),"hideRotateHandle",(function(){return!0})),vt(_t(e),"hideSelectionBoundsFg",(function(){return!0})),vt(_t(e),"hideSelectionBoundsBg",(function(){return!0})),vt(_t(e),"onHandleChange",(function(t,n){var r=n.handle,i=n.isPrecise,o=Nr(t);switch(r.id){case"start":case"end":var a=e.editor.getPageTransformById(o.id),s=mc.applyToPoint(a,r);if(e.editor.inputs.ctrlKey)o.props[r.id]={type:"point",x:r.x,y:r.y};else{var u=wr(e.editor.sortedShapesArray.filter((function(n){if(n.id!==t.id){var r=e.editor.getShapeUtil(n);if(r.canBind(n)){var i=e.editor.getPageMaskById(n.id);if(!i||ic(s,i)){var o=e.editor.getPointInShapeSpace(n,s);return r.isClosed(n)?ic(o,r.outline(n)):r.hitTestPoint(n,o)}}}})));if(u){var l=e.editor.getBounds(u),c=e.editor.getPointInShapeSpace(u,s),d=o.props[r.id],f="binding"===t.props.start.type&&t.props.start.boundShapeId,h="binding"===t.props.end.type&&t.props.end.boundShapeId,p=i||(f||h)&&f===h||!e.editor.getShapeUtil(u).isClosed(o);("point"===d.type||"binding"===d.type&&u.id!==d.boundShapeId)&&(p=e.editor.inputs.pointerVelocity.len()<.5),p&&(p=Nl.Dist(c,l.center)>Math.max(4,Math.min(.15*Math.min(l.width,l.height),16))/e.editor.zoomLevel),o.props[r.id]={type:"binding",boundShapeId:u.id,normalizedAnchor:p?{x:(c.x-l.minX)/l.width,y:(c.y-l.minY)/l.height}:{x:.5,y:.5},isExact:e.editor.inputs.altKey}}else o.props[r.id]={type:"point",x:r.x,y:r.y}}break;case"middle":var v=kv(e.editor,o),g=v.start,m=v.end,y=Nl.Sub(m,g),b=Nl.Per(y),w=Nl.Med(m,g),x=Nl.Sub(w,b),k=Nl.Add(w,b),S=Nl.NearestPointOnLineSegment(x,k,r,!1),_=Nl.Dist(S,w);Nl.Clockwise(S,m,w)&&(_*=-1),o.props.bend=_}return o})),vt(_t(e),"onTranslateStart",(function(t){var n="binding"===t.props.start.type?t.props.start.boundShapeId:null,r="binding"===t.props.end.type?t.props.end.boundShapeId:null;if(!(n&&e.editor.isWithinSelection(n)||r&&e.editor.isWithinSelection(r))){n=null,r=null;var i=kv(e.editor,t),o=i.start,a=i.end;return{id:t.id,type:t.type,props:mt(mt({},t.props),{},{start:{type:"point",x:o.x,y:o.y},end:{type:"point",x:a.x,y:a.y}})}}})),vt(_t(e),"onResize",(function(t,n){var r=n.scaleX,i=n.scaleY,o=kv(e.editor,t),a=Nr(t.props),s=a.start,u=a.end,l=t.props.bend;"point"===s.type&&(s.x=o.start.x*r,s.y=o.start.y*i),"point"===u.type&&(u.x=o.end.x*r,u.y=o.end.y*i);var c=Math.abs(r),d=Math.abs(i);return r<0&&i>=0?(0!==l&&(l*=-1,l*=Math.max(c,d)),"binding"===s.type&&(s.normalizedAnchor.x=1-s.normalizedAnchor.x),"binding"===u.type&&(u.normalizedAnchor.x=1-u.normalizedAnchor.x)):r>=0&&i<0?(0!==l&&(l*=-1,l*=Math.max(c,d)),"binding"===s.type&&(s.normalizedAnchor.y=1-s.normalizedAnchor.y),"binding"===u.type&&(u.normalizedAnchor.y=1-u.normalizedAnchor.y)):r>=0&&i>=0?0!==l&&(l*=Math.max(c,d)):r<0&&i<0&&(0!==l&&(l*=Math.max(c,d)),"binding"===s.type&&(s.normalizedAnchor.x=1-s.normalizedAnchor.x,s.normalizedAnchor.y=1-s.normalizedAnchor.y),"binding"===u.type&&(u.normalizedAnchor.x=1-u.normalizedAnchor.x,u.normalizedAnchor.y=1-u.normalizedAnchor.y)),{props:{start:s,end:u,bend:l}}})),vt(_t(e),"onDoubleClickHandle",(function(e,t){switch(t.id){case"start":return{id:e.id,type:e.type,props:mt(mt({},e.props),{},{arrowheadStart:"none"===e.props.arrowheadStart?"arrow":"none"})};case"end":return{id:e.id,type:e.type,props:mt(mt({},e.props),{},{arrowheadEnd:"none"===e.props.arrowheadEnd?"arrow":"none"})}}})),vt(_t(e),"getEditingBounds",(function(t){var n;return null!==(n=e.getLabelBounds(t))&&void 0!==n?n:new lc})),vt(_t(e),"onEditEnd",(function(t){var n=t.id,r=t.type,i=t.props.text;i.trimEnd()!==t.props.text&&e.editor.updateShapes([{id:n,type:r,props:{text:i.trimEnd()}}])})),e}return oe(r,[{key:"defaultProps",value:function(){return{dash:"draw",size:"m",fill:"none",color:"black",labelColor:"black",bend:0,start:{type:"point",x:0,y:0},end:{type:"point",x:0,y:0},arrowheadStart:"none",arrowheadEnd:"arrow",text:"",font:"draw"}}},{key:"getCenter",value:function(e){return this.bounds(e).center}},{key:"getBounds",value:function(e){return lc.FromPoints(this.getOutlineWithoutLabel(e))}},{key:"getOutlineWithoutLabel",value:function(e){var t=this.getArrowInfo(e);if(!t)return[];if(t.isStraight)return t.isValid?[Nl.From(t.start.point),Nl.From(t.end.point)]:[new Nl(0,0),new Nl(1,1)];if(!t.isValid)return[new Nl(0,0),new Nl(1,1)];var n=Math.max(5,Math.ceil(Math.abs(t.bodyArc.length)/16));if(n<=0&&!isFinite(n))return[new Nl(0,0),new Nl(1,1)];for(var r=Array(n),i=Nl.Angle(t.bodyArc.center,t.start.point),o=Nl.Angle(t.bodyArc.center,t.end.point),a=t.bodyArc.sweepFlag?o:i,s=t.bodyArc.sweepFlag?i:o,u=t.bodyArc.largeArcFlag?-(zl-Yl(a,s)):Yl(a,s),l=Math.max(1,t.bodyArc.radius),c=0;c<n;c++){var d=a+u*(c/(n-1)),f=Zl(t.bodyArc.center.x,t.bodyArc.center.y,l,d);r[c]=f}return r}},{key:"getOutline",value:function(e){var t=this.getOutlineWithoutLabel(e),n=this.getLabelBounds(e);if(!n)return t;for(var r=n.sides,i=[0,1,2,3],o=t[0],a=!1,s=[o],u=function(){var e=t[l];if(!a){var n=xr(i.filter((function(t){return Nc(r[t][0],r[t][1],o,e)})),(function(e){return Nl.DistanceToLineSegment(r[e][0],r[e][1],o)}));if(void 0!==n){var u=Nl.NearestPointOnLineSegment(r[n][0],r[n][1],o);s.push(u);for(var c=0;c<4;c++){var d=(n+c)%4;s.push(r[d][1])}s.push(u),a=!0}}s.push(e),o=e},l=1;l<t.length;l++)u();return s}},{key:"snapPoints",value:function(e){return Li}},{key:"infoCache",get:function(){var e=this;return this.editor.store.createComputedCache("arrow infoCache",(function(t){return bv(t)?Ev(e.editor,t):Mv(e.editor,t)}))}},{key:"getArrowInfo",value:function(e){return this.infoCache.get(e.id)}},{key:"getHandles",value:function(e){var t=this.infoCache.get(e.id);return[{id:"start",type:"vertex",index:"a0",x:t.start.handle.x,y:t.start.handle.y,canBind:!0},{id:"middle",type:"vertex",index:"a2",x:t.middle.x,y:t.middle.y,canBind:!1},{id:"end",type:"vertex",index:"a3",x:t.end.handle.x,y:t.end.handle.y,canBind:!0}]}},{key:"hitTestPoint",value:function(e,t){for(var n=this.outline(e),r=this.editor.zoomLevel,i=Kh[e.props.size]/r,o=0;o<n.length-1;o++){var a=n[o],s=n[o+1];if(Nl.DistanceToLineSegment(a,s,t)<i)return!0}return!1}},{key:"hitTestLineSegment",value:function(e,t,n){for(var r=this.outline(e),i=0;i<r.length-1;i++){if(Nc(t,n,r[i],r[i+1]))return!0}return!1}},{key:"component",value:function(e){var n,r=this,i=this.editor.onlySelectedShape,o=this.editor.isInAny("select.idle","select.pointing_handle","select.dragging_handle","arrow.dragging")&&!this.editor.isReadOnly,a=this.getArrowInfo(e),s=this.bounds(e),u=this.getLabelBounds(e),l=t.useMemo((function(){return r.editor.isSafari?zv+=1:0}),[e]);if(null===a||void 0===a||!a.isValid)return null;var c=Kh[e.props.size],d=a.start.arrowhead&&yv(a,"start",c),h=a.end.arrowhead&&yv(a,"end",c),p=a.isStraight?Iv(a):Tv(a),v=null;if(i===e&&o){var g=fv(a.isStraight?Nl.Dist(a.start.handle,a.end.handle):Math.abs(a.handleArc.length),2,{end:"skip",start:"skip",lengthRatio:2.5}),m=g.strokeDasharray,y=g.strokeDashoffset;v="binding"===e.props.start.type||"binding"===e.props.end.type?(0,f.jsx)("path",{className:"tl-arrow-hint",d:a.isStraight?Pv(a):Av(a),strokeDasharray:m,strokeDashoffset:y,strokeWidth:2,markerStart:"binding"===e.props.start.type?e.props.start.isExact?"":Kv(e.props.start.normalizedAnchor)?"url(#arrowhead-cross)":"url(#arrowhead-dot)":"",markerEnd:"binding"===e.props.end.type?e.props.end.isExact?"":Kv(e.props.end.normalizedAnchor)?"url(#arrowhead-cross)":"url(#arrowhead-dot)":"",opacity:.16}):null}var b=fv(a.isStraight?a.length:Math.abs(a.bodyArc.length),c,{style:e.props.dash}),w=b.strokeDasharray,x=b.strokeDashoffset,k=!("none"===a.start.arrowhead||"arrow"===a.start.arrowhead),S=!("none"===a.end.arrowhead||"arrow"===a.end.arrowhead),_=k||S||u,E=(e.id+"_clip_"+l).replace(":","_");return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(dv,{id:e.id,style:{minWidth:50,minHeight:50},children:[_&&(0,f.jsx)("defs",{children:(0,f.jsxs)("mask",{id:E,children:[(0,f.jsx)("rect",{x:oc(-100+s.minX),y:oc(-100+s.minY),width:oc(s.width+200),height:oc(s.height+200),fill:"white"}),u&&(0,f.jsx)("rect",{x:oc(u.x),y:oc(u.y),width:oc(u.w),height:oc(u.h),fill:"black",rx:4,ry:4}),d&&k&&(0,f.jsx)("path",{d:d,fill:"arrow"===a.start.arrowhead?"none":"black",stroke:"none"}),h&&S&&(0,f.jsx)("path",{d:h,fill:"arrow"===a.end.arrowhead?"none":"black",stroke:"none"})]})}),(0,f.jsxs)("g",{fill:"none",stroke:"var(--palette-".concat(e.props.color,")"),strokeWidth:c,strokeLinejoin:"round",strokeLinecap:"round",pointerEvents:"none",children:[v,(0,f.jsxs)("g",mt(mt({},_?{mask:"url(#".concat(E,")")}:void 0),{},{children:[_&&(0,f.jsx)("rect",{x:oc(s.minX-100),y:oc(s.minY-100),width:oc(s.width+200),height:oc(s.height+200),opacity:0}),(0,f.jsx)("path",{d:p,strokeDasharray:w,strokeDashoffset:x})]})),d&&k&&"none"!==e.props.fill&&(0,f.jsx)(hv,{d:d,color:e.props.color,fill:e.props.fill}),h&&S&&"none"!==e.props.fill&&(0,f.jsx)(hv,{d:h,color:e.props.color,fill:e.props.fill}),d&&(0,f.jsx)("path",{d:d}),h&&(0,f.jsx)("path",{d:h})]}),(0,f.jsx)("path",{d:p,className:"tl-hitarea-stroke"})]}),(0,f.jsx)(Nv,{id:e.id,text:e.props.text,font:e.props.font,size:e.props.size,position:a.middle,width:null!==(n=null===u||void 0===u?void 0:u.w)&&void 0!==n?n:0,labelColor:e.props.labelColor})]})}},{key:"indicator",value:function(e){var t=kv(this.editor,e),n=t.start,r=t.end,i=this.getArrowInfo(e),o=this.bounds(e),a=this.getLabelBounds(e);if(!i)return null;if(Nl.Equals(n,r))return null;var s=Kh[e.props.size],u=i.start.arrowhead&&yv(i,"start",s),l=i.end.arrowhead&&yv(i,"end",s),c=i.isStraight?Iv(i):Tv(i),d=u&&"arrow"!==i.start.arrowhead||l&&"arrow"!==i.end.arrowhead||null!==a,h=(e.id+"_clip").replace(":","_");return(0,f.jsxs)("g",{children:[d&&(0,f.jsx)("defs",{children:(0,f.jsxs)("mask",{id:h,children:[(0,f.jsx)("rect",{x:o.minX-100,y:o.minY-100,width:o.w+200,height:o.h+200,fill:"white"}),a&&(0,f.jsx)("rect",{x:a.x,y:a.y,width:a.w,height:a.h,fill:"black",rx:4,ry:4}),u&&(0,f.jsx)("path",{d:u,fill:"arrow"===i.start.arrowhead?"none":"black",stroke:"none"}),l&&(0,f.jsx)("path",{d:l,fill:"arrow"===i.end.arrowhead?"none":"black",stroke:"none"})]})}),(0,f.jsxs)("g",mt(mt({},d?{mask:"url(#".concat(h,")")}:void 0),{},{children:[d&&(0,f.jsx)("rect",{x:o.minX-100,y:o.minY-100,width:o.width+200,height:o.height+200,opacity:0}),(0,f.jsx)("path",{d:c})]})),u&&(0,f.jsx)("path",{d:u}),l&&(0,f.jsx)("path",{d:l}),a&&(0,f.jsx)("rect",{x:a.x,y:a.y,width:a.w,height:a.h,rx:4,ry:4})]})}},{key:"labelBoundsCache",get:function(){var e=this;return this.editor.store.createComputedCache("labelBoundsCache",(function(t){var n=e.getArrowInfo(t),r=e.bounds(t),i=t.props,o=i.text,a=i.font,s=i.size;if(!n)return null;if(!o.trim())return null;var u=e.editor.textMeasure.measureText(o,mt(mt({},Uh),{},{fontFamily:Yh[a],fontSize:Hh[s],width:"fit-content"})),l=u.w,c=l,d=u.h;if(r.width>r.height){c=Math.max(Math.min(l,64),Math.min(r.width-64,l));var f=e.editor.textMeasure.measureText(o,mt(mt({},Uh),{},{fontFamily:Yh[a],fontSize:Hh[s],width:c+"px"}));c=f.w,d=f.h}if(c>16*Hh[s]){c=16*Hh[s];var h=e.editor.textMeasure.measureText(o,mt(mt({},Uh),{},{fontFamily:Yh[a],fontSize:Hh[s],width:c+"px"}));c=h.w,d=h.h}return new lc(n.middle.x-(c+8)/2,n.middle.y-(d+8)/2,c+8,d+8)}))}},{key:"getLabelBounds",value:function(e){return this.labelBoundsCache.get(e.id)||null}},{key:"toSvg",value:function(e,t,n){var r=n.fill[e.props.color],i=this.getArrowInfo(e),o=Kh[e.props.size],a=document.createElementNS("http://www.w3.org/2000/svg","g");if(!i)return a;var s=i.start.arrowhead&&yv(i,"start",o),u=i.end.arrowhead&&yv(i,"end",o),l=this.bounds(e),c=this.getLabelBounds(e),d=(e.id+"_clip").replace(":","_");if(s||u||c){var f=document.createElementNS("http://www.w3.org/2000/svg","defs"),h=document.createElementNS("http://www.w3.org/2000/svg","mask");h.id=d;var p=document.createElementNS("http://www.w3.org/2000/svg","rect");if(p.setAttribute("x",l.minX-100+""),p.setAttribute("y",l.minY-100+""),p.setAttribute("width",l.width+200+""),p.setAttribute("height",l.height+200+""),p.setAttribute("fill","white"),h.appendChild(p),s&&h.appendChild(Fv(s,i.start.arrowhead)),u&&h.appendChild(Fv(u,i.end.arrowhead)),c){var v=document.createElementNS("http://www.w3.org/2000/svg","rect");v.setAttribute("x",c.x+""),v.setAttribute("y",c.y+""),v.setAttribute("width",c.w+""),v.setAttribute("height",c.h+""),v.setAttribute("fill","black"),h.appendChild(v)}f.appendChild(h),a.appendChild(f)}var g=document.createElementNS("http://www.w3.org/2000/svg","g");g.setAttribute("mask","url(#".concat(d,")")),a.appendChild(g);var m=document.createElementNS("http://www.w3.org/2000/svg","rect");m.setAttribute("x","-100"),m.setAttribute("y","-100"),m.setAttribute("width",l.width+200+""),m.setAttribute("height",l.height+200+""),m.setAttribute("fill","transparent"),m.setAttribute("stroke","none"),g.appendChild(m);var y=function(e,t,n){var r=document.createElementNS("http://www.w3.org/2000/svg","path");return r.setAttribute("d",e),r.setAttribute("fill","none"),r.setAttribute("stroke",t),r.setAttribute("stroke-width",n+""),r}(i.isStraight?Iv(i):Tv(i),r,o),b=fv(i.isStraight?i.length:Math.abs(i.bodyArc.length),o,{style:e.props.dash}),w=b.strokeDasharray,x=b.strokeDashoffset;if(y.setAttribute("stroke-dasharray",w),y.setAttribute("stroke-dashoffset",x),g.appendChild(y),s&&a.appendChild(Uv(s,e.props.color,o,"arrow"===e.props.arrowheadStart?"none":e.props.fill,n)),u&&a.appendChild(Uv(u,e.props.color,o,"arrow"===e.props.arrowheadEnd?"none":e.props.fill,n)),c){var k={fontSize:Hh[e.props.size],lineHeight:Uh.lineHeight,fontFamily:t,padding:0,textAlign:"middle",width:c.w-8,verticalTextAlign:"middle",height:c.h,fontStyle:"normal",fontWeight:"normal",overflow:"wrap"},S=Fh(this.editor,this.editor.textMeasure.measureTextSpans(e.props.text,k),k);S.setAttribute("fill",n.fill[e.props.labelColor]),Array.from(S.children).forEach((function(e){var t=parseFloat(e.getAttribute("x")||"0"),n=parseFloat(e.getAttribute("y")||"0");e.setAttribute("x",t+4+c.x+"px"),e.setAttribute("y",n+c.y+"px")}));var _=S.cloneNode(!0);_.setAttribute("stroke-width","2"),_.setAttribute("fill",n.background),_.setAttribute("stroke",n.background),a.appendChild(_),a.appendChild(S)}return a}}]),r}(Oh);function Fv(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg","path");return n.setAttribute("d",e),n.setAttribute("fill","arrow"===t?"none":"black"),n.setAttribute("stroke","none"),n}function Uv(e,t,n,r,i){var o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("d",e),o.setAttribute("fill","none"),o.setAttribute("stroke",i.fill[t]),o.setAttribute("stroke-width",n+"");var a=vv({d:e,fill:r,color:t,colors:i});if(a){var s=document.createElementNS("http://www.w3.org/2000/svg","g");return s.appendChild(a),s.appendChild(o),s}return o}function Kv(e){return.5!==e.x||.5!==e.y}vt(Bv,"type","arrow"),Dv([so],Bv.prototype,"infoCache",1),Dv([so],Bv.prototype,"labelBoundsCache",1);var Vv=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"onPointerDown",(function(t){e.parent.transition("pointing",t)})),vt(_t(e),"onEnter",(function(){e.editor.setCursor({type:"cross"})})),vt(_t(e),"onCancel",(function(){e.editor.setSelectedTool("select")})),e}return oe(n)}(lv);vt(Vv,"id","idle");var Wv=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"shape",void 0),vt(_t(e),"preciseTimeout",-1),vt(_t(e),"didTimeout",!1),vt(_t(e),"onEnter",(function(){var t,n=e.editor.inputs.currentPagePoint;e.didTimeout=!1,e.editor.mark("creating");var r=Os();e.editor.createShapes([{id:r,type:"arrow",x:n.x,y:n.y}]);var i=e.editor.getShapeUtil(Bv),o=e.editor.getShapeById(r);if(o){var a=null===(t=i.handles)||void 0===t?void 0:t.call(i,o);if(a){var s,u=e.editor.getPointInShapeSpace(o,n),l=null===(s=i.onHandleChange)||void 0===s?void 0:s.call(i,o,{handle:mt(mt({},a[0]),{},{x:u.x,y:u.y}),isPrecise:!0});if(l){var c,d=null===(c=l.props)||void 0===c?void 0:c.start;"binding"===(null===d||void 0===d?void 0:d.type)&&e.editor.setHintingIds([d.boundShapeId]),e.editor.updateShapes([l],!0)}}e.editor.select(r),e.shape=e.editor.getShapeById(r),e.startPreciseTimeout()}})),vt(_t(e),"onExit",(function(){e.clearPreciseTimeout()})),vt(_t(e),"onPointerMove",(function(){if(e.shape&&e.editor.inputs.isDragging){var t,n=e.editor.getShapeUtil(e.shape),r=null===(t=n.handles)||void 0===t?void 0:t.call(n,e.shape);if(!r)throw e.editor.bailToMark("creating"),Error("No handles found");if(!e.didTimeout){var i=e.editor.getShapeUtil(Bv),o=e.editor.getShapeById(e.shape.id);if(!o)return;var a=i.handles(o);if(a){var s,u=e.editor.getPointInShapeSpace(o,e.editor.inputs.originPagePoint),l=u.x,c=u.y,d=null===(s=i.onHandleChange)||void 0===s?void 0:s.call(i,o,{handle:mt(mt({},a[0]),{},{x:l,y:c}),isPrecise:!1});d&&e.editor.updateShapes([d],!0)}}e.editor.setSelectedTool("select.dragging_handle",{shape:e.shape,handle:r.find((function(e){return"end"===e.id})),isCreating:!0,onInteractionEnd:"arrow"})}})),vt(_t(e),"onPointerUp",(function(){e.cancel()})),vt(_t(e),"onCancel",(function(){e.cancel()})),vt(_t(e),"onComplete",(function(){e.cancel()})),vt(_t(e),"onInterrupt",(function(){e.cancel()})),e}return oe(n,[{key:"startPreciseTimeout",value:function(){var e=this;this.preciseTimeout=window.setTimeout((function(){e.isActive&&e.shape&&(e.didTimeout=!0)}),300)}},{key:"clearPreciseTimeout",value:function(){clearTimeout(this.preciseTimeout)}},{key:"cancel",value:function(){this.editor.bailToMark("creating"),this.editor.setHintingIds([]),this.parent.transition("idle",{})}}]),n}(lv);vt(Wv,"id","pointing");var Hv=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"shapeType",Bv),e}return oe(n)}(lv);vt(Hv,"id","arrow"),vt(Hv,"initial","idle"),vt(Hv,"children",(function(){return[Vv,Wv]}));var Yv=sv("arrow",{util:Bv,props:ru,migrations:ou,tool:Hv}),qv="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='30' height='30' fill='none'%3E%3Cpath stroke='%23000' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M13 5H7a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6M19 5h6m0 0v6m0-6L13 17'/%3E%3C/svg%3E";function Xv(e){var t=e.url,n=e.zoomLevel;return(0,f.jsx)("a",{className:kl("tl-hyperlink-button",{"tl-hyperlink-button__hidden":n<.32}),href:t,target:"_blank",rel:"noopener noreferrer",onPointerDown:nd,onPointerUp:nd,title:t,draggable:!1,children:(0,f.jsx)("div",{className:"tl-hyperlink-button__icon",style:{mask:'url("'.concat(qv,'") center 100% / 100% no-repeat'),WebkitMask:'url("'.concat(qv,'") center 100% / 100% no-repeat')}})})}var $v=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"canResize",(function(){return!1})),vt(_t(e),"hideSelectionBoundsBg",(function(){return!0})),vt(_t(e),"hideSelectionBoundsFg",(function(){return!0})),vt(_t(e),"onBeforeCreate",(function(t){Qv(e.editor,t)})),vt(_t(e),"onBeforeUpdate",(function(t,n){if(t.props.url!==n.props.url){if(!Kp(n.props.url))return mt(mt({},n),{},{props:mt(mt({},n.props),{},{url:t.props.url})});Qv(e.editor,n)}})),e}return oe(n,[{key:"defaultProps",value:function(){return{url:"",w:300,h:320,assetId:null}}},{key:"component",value:function(e){var t=e.props.assetId?this.editor.getAssetById(e.props.assetId):null,n=this.editor.getPageRotation(e),r=Gv(e);return(0,f.jsx)(_h,{children:(0,f.jsxs)("div",{className:"tl-bookmark__container tl-hitarea-stroke",style:{boxShadow:Zc(n)},children:[(0,f.jsxs)("div",{className:"tl-bookmark__image_container",children:[null!==t&&void 0!==t&&t.props.image?(0,f.jsx)("img",{className:"tl-bookmark__image",draggable:!1,src:null===t||void 0===t?void 0:t.props.image,alt:(null===t||void 0===t?void 0:t.props.title)||""}):(0,f.jsx)("div",{className:"tl-bookmark__placeholder"}),(0,f.jsx)(Xv,{url:e.props.url,zoomLevel:this.editor.zoomLevel})]}),(0,f.jsxs)("div",{className:"tl-bookmark__copy_container",children:[(null===t||void 0===t?void 0:t.props.title)&&(0,f.jsx)("h2",{className:"tl-bookmark__heading",children:td((null===t||void 0===t?void 0:t.props.title)||"",54)}),(null===t||void 0===t?void 0:t.props.description)&&(0,f.jsx)("p",{className:"tl-bookmark__description",children:td((null===t||void 0===t?void 0:t.props.description)||"",128)}),(0,f.jsx)("a",{className:"tl-bookmark__link",href:e.props.url||"",target:"_blank",rel:"noopener noreferrer",onPointerDown:nd,onPointerUp:nd,onClick:nd,children:td(r,45)})]})]})})}},{key:"indicator",value:function(e){return(0,f.jsx)("rect",{width:oc(e.props.w),height:oc(e.props.h),rx:"8",ry:"8"})}}]),n}(Rh);vt($v,"type","bookmark");var Gv=function(e){try{var t=new URL(e.props.url),n=t.pathname.replace(/\/*$/,"");return"".concat(t.hostname).concat(n)}catch(VO){return e.props.url}};function Qv(e,t){var n=t.props.url,r=ks.createId(jr(n));e.getAssetById(r)?t.props.assetId!==r&&e.updateShapes([{id:t.id,type:t.type,props:{assetId:r}}]):(e.updateShapes([{id:t.id,type:t.type,props:{assetId:null}}]),Jv(e,t))}var Jv=Cr(function(){var e=b(m().mark((function e(t,n){var r,i;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.props.url,e.next=3,t.externalContentManager.createAssetFromUrl(t,r);case 3:if(i=e.sent){e.next=6;break}return e.abrupt("return");case 6:t.batch((function(){t.createAssets([i]),t.updateShapes([{id:n.id,type:n.type,props:{assetId:i.id}}])}));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),500),Zv=sv("bookmark",{util:$v,props:su,migrations:lu});function eg(){var e=Ml();return Il("zoom",(function(){return e.zoomLevel<.35}),[e])}var tg=function(e){return.65*e+.35*Fl(e*Ll/2)},ng=function(e){return{size:1+e,thinning:0,streamline:.62+(1+e)/8*.06,smoothing:.62,simulatePressure:!1,easing:Ol.linear}};function rg(e){var t=e.strokeWidth,n=e.showAsComplete,r=e.isPen;return{size:1+t,thinning:.1,streamline:.5,smoothing:.5,simulatePressure:!r,easing:r?tg:Ol.easeOutSine,last:n}}function ig(e,t,n,r){return mt(mt({},r?ng(t):"draw"===e.dash?e.isPen?function(e){return{size:1+1.2*e,thinning:.62,streamline:.62,smoothing:.62,simulatePressure:!1,easing:tg}}(t):function(e){return{size:1+e,thinning:.5,streamline:.62+(1+e)/8*.06,smoothing:.62,easing:Ol.easeOutSine,simulatePressure:!0}}(t):ng(t)),{},{last:e.isComplete||n})}function og(e){var t,n=[],r=w(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;if("free"===i.type||i.points.length<2)n.push.apply(n,d(i.points.map(Nl.Cast)));else{var o=Math.max(4,Math.floor(Nl.Dist(i.points[0],i.points[1])/16));n.push.apply(n,d(Nl.PointsBetween(i.points[0],i.points[1],o)))}}}catch(a){r.e(a)}finally{r.f()}return n}function ag(e,t){return{draw:"none",solid:"none",dotted:"0.1 ".concat(2*t),dashed:"".concat(2*t," ").concat(2*t)}[e.props.dash]}var sg=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"hideResizeHandles",(function(e){return lg(e)})),vt(_t(e),"hideRotateHandle",(function(e){return lg(e)})),vt(_t(e),"hideSelectionBoundsBg",(function(e){return lg(e)})),vt(_t(e),"hideSelectionBoundsFg",(function(e){return lg(e)})),vt(_t(e),"isClosed",(function(e){return e.props.isClosed})),vt(_t(e),"onResize",(function(e,t){var n,r=t.scaleX,i=t.scaleY,o=[],a=w(e.props.segments);try{for(a.s();!(n=a.n()).done;){var s=n.value;o.push(mt(mt({},s),{},{points:s.points.map((function(e){var t=e.x,n=e.y,o=e.z;return{x:ac(r*t),y:ac(i*n),z:o}}))}))}}catch(u){a.e(u)}finally{a.f()}return{props:{segments:o}}})),e}return oe(n,[{key:"defaultProps",value:function(){return{segments:[],color:"black",fill:"none",dash:"draw",size:"m",isComplete:!1,isClosed:!1,isPen:!1}}},{key:"getBounds",value:function(e){return lc.FromPoints(this.outline(e))}},{key:"getOutline",value:function(e){return og(e.props.segments)}},{key:"getCenter",value:function(e){return this.bounds(e).center}},{key:"hitTestPoint",value:function(e,t){var n=this.outline(e),r=this.editor.zoomLevel,i=Kh[e.props.size]/r;if(1===e.props.segments.length&&e.props.segments[0].points.length<4&&e.props.segments[0].points.some((function(e){return Nl.Dist(t,e)<1.5*i})))return!0;if(this.isClosed(e))return ic(t,n);if(this.bounds(e).containsPoint(t))for(var o=0;o<n.length;o++){var a=n[o],s=n[(o+1)%n.length];if(Nl.DistanceToLineSegment(a,s,t)<i)return!0}return!1}},{key:"hitTestLineSegment",value:function(e,t,n){var r=this.outline(e);if(1===e.props.segments.length&&e.props.segments[0].points.length<4){var i=this.editor.zoomLevel,o=Kh[e.props.size]/i;if(e.props.segments[0].points.some((function(e){return Nl.DistanceToLineSegment(t,n,e)<1.5*o})))return!0}if(this.isClosed(e))for(var a=0;a<r.length;a++){var s=r[a],u=r[(a+1)%r.length];if(Nc(t,n,s,u))return!0}else for(var l=0;l<r.length-1;l++){var c=r[l],d=r[l+1];if(Nc(t,n,c,d))return!0}return!1}},{key:"component",value:function(e){var t,n=eg(),r=Kh[e.props.size],i=og(e.props.segments),o=e.props.isComplete||"straight"===(null===(t=wr(e.props.segments))||void 0===t?void 0:t.type),a=r;n||e.props.isPen||"draw"!==e.props.dash||1!==i.length||(a+=Mr(e.id)()*(r/6));var s=ig(e.props,a,o,n),u=Sc(i,s),l=u.length>1?sd(u,e.props.isClosed):ug(i[0],a);if(!n&&"draw"===e.props.dash||u.length<2){Cc(u,s);var c=wc(u,s);return(0,f.jsxs)(dv,{id:e.id,children:[(0,f.jsx)(hv,{fill:e.props.isClosed?e.props.fill:"none",color:e.props.color,d:l}),(0,f.jsx)("path",{d:ad(c,!0),strokeLinecap:"round",fill:"var(--palette-".concat(e.props.color,")")})]})}return(0,f.jsxs)(dv,{id:e.id,children:[(0,f.jsx)(hv,{color:e.props.color,fill:e.props.isClosed?e.props.fill:"none",d:l}),(0,f.jsx)("path",{d:l,strokeLinecap:"round",fill:"none",stroke:"var(--palette-".concat(e.props.color,")"),strokeWidth:r,strokeDasharray:ag(e,r),strokeDashoffset:"0"})]})}},{key:"indicator",value:function(e){var t,n=eg(),r=Kh[e.props.size],i=og(e.props.segments),o=r;n||e.props.isPen||"draw"!==e.props.dash||1!==i.length||(o+=Mr(e.id)()*(r/6));var a=e.props.isComplete||"straight"===(null===(t=wr(e.props.segments))||void 0===t?void 0:t.type),s=Sc(i,ig(e.props,o,a,!0)),u=s.length>1?sd(s,e.props.isClosed):ug(i[0],o);return(0,f.jsx)("path",{d:u})}},{key:"toSvg",value:function(e,t,n){var r,i=e.props.color,o=Kh[e.props.size],a=og(e.props.segments),s=e.props.isComplete||"straight"===(null===(r=wr(e.props.segments))||void 0===r?void 0:r.type),u=o;e.props.isPen||"draw"!==e.props.dash||1!==a.length||(u+=Mr(e.id)()*(o/6));var l,c=ig(e.props,u,s,!1),d=Sc(a,c),f=d.length>1?sd(d,e.props.isClosed):ug(a[0],u);if("draw"===e.props.dash||d.length<2){Cc(d,c);var h=wc(d,c),p=document.createElementNS("http://www.w3.org/2000/svg","path");p.setAttribute("d",ad(h,!0)),p.setAttribute("fill",n.fill[i]),p.setAttribute("stroke-linecap","round"),l=p}else{var v=document.createElementNS("http://www.w3.org/2000/svg","path");v.setAttribute("d",f),v.setAttribute("stroke",n.fill[i]),v.setAttribute("fill","none"),v.setAttribute("stroke-linecap","round"),v.setAttribute("stroke-width",o.toString()),v.setAttribute("stroke-dasharray",ag(e,o)),v.setAttribute("stroke-dashoffset","0"),l=v}var g=vv({fill:e.props.isClosed?e.props.fill:"none",d:f,color:e.props.color,colors:n});if(g){var m=document.createElementNS("http://www.w3.org/2000/svg","g");return m.appendChild(g),m.appendChild(l),m}return l}},{key:"expandSelectionOutlinePx",value:function(e){var t="draw"===e.props.dash?1.6:1;return Kh[e.props.size]*t/2}}]),n}(Oh);function ug(e,t){var n=.5*(t+1);return"M ".concat(e.x," ").concat(e.y," m -").concat(n,", 0 a ").concat(n,",").concat(n," 0 1,0 ").concat(2*n,",0 a ").concat(n,",").concat(n," 0 1,0 -").concat(2*n,",0")}function lg(e){return 1===e.props.segments.length&&e.props.segments[0].points.length<2}vt(sg,"type","draw");var cg=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"hideResizeHandles",(function(e){return vg(e)})),vt(_t(e),"hideRotateHandle",(function(e){return vg(e)})),vt(_t(e),"hideSelectionBoundsBg",(function(e){return vg(e)})),vt(_t(e),"hideSelectionBoundsFg",(function(e){return vg(e)})),vt(_t(e),"onResize",(function(e,t){var n,r=t.scaleX,i=t.scaleY,o=[],a=w(e.props.segments);try{for(a.s();!(n=a.n()).done;){var s=n.value;o.push(mt(mt({},s),{},{points:s.points.map((function(e){var t=e.x,n=e.y,o=e.z;return{x:r*t,y:i*n,z:o}}))}))}}catch(u){a.e(u)}finally{a.f()}return{props:{segments:o}}})),e}return oe(n,[{key:"defaultProps",value:function(){return{segments:[],color:"black",size:"m",isComplete:!1,isPen:!1}}},{key:"getBounds",value:function(e){return lc.FromPoints(this.outline(e))}},{key:"getOutline",value:function(e){return og(e.props.segments)}},{key:"getCenter",value:function(e){return this.bounds(e).center}},{key:"hitTestPoint",value:function(e,t){var n=this.outline(e),r=this.editor.zoomLevel,i=pg(e)/r;if(1===e.props.segments.length&&e.props.segments[0].points.length<4&&e.props.segments[0].points.some((function(e){return Nl.Dist(t,e)<1.5*i})))return!0;if(this.bounds(e).containsPoint(t))for(var o=0;o<n.length;o++){var a=n[o],s=n[(o+1)%n.length];if(Nl.DistanceToLineSegment(a,s,t)<i)return!0}return!1}},{key:"hitTestLineSegment",value:function(e,t,n){var r=this.outline(e);if(1===e.props.segments.length&&e.props.segments[0].points.length<4){var i=this.editor.zoomLevel,o=pg(e)/i;if(e.props.segments[0].points.some((function(e){return Nl.DistanceToLineSegment(t,n,e)<1.5*o})))return!0}for(var a=0;a<r.length-1;a++){var s=r[a],u=r[a+1];if(Nc(t,n,s,u))return!0}return!1}},{key:"component",value:function(e){return(0,f.jsx)(fg,{strokeWidth:pg(e),shape:e,opacity:.35})}},{key:"renderBackground",value:function(e){return(0,f.jsx)(fg,{strokeWidth:pg(e),shape:e,opacity:.82})}},{key:"indicator",value:function(e){var t,n=eg(),r=pg(e),i=og(e.props.segments),o=r;n||e.props.isPen||1!==i.length||(o+=Mr(e.id)()*(r/6));var a,s=Sc(i,rg({strokeWidth:r,showAsComplete:e.props.isComplete||"straight"===(null===(t=wr(e.props.segments))||void 0===t?void 0:t.type),isPen:e.props.isPen}));return a=s.length<2?function(e,t){var n=t/2;return"M ".concat(e.x," ").concat(e.y," m -").concat(n,", 0 a ").concat(n,",").concat(n," 0 1,0 ").concat(2*n,",0 a ").concat(n,",").concat(n," 0 1,0 -").concat(2*n,",0")}(i[0],o):sd(s,!1),(0,f.jsx)("path",{d:a})}},{key:"expandSelectionOutlinePx",value:function(e){return pg(e)/2}},{key:"toSvg",value:function(e,t,n){return hg(pg(e),e,.35,n)}},{key:"toBackgroundSvg",value:function(e,t,n){return hg(pg(e),e,.82,n)}}]),n}(Oh);function dg(e,t,n){var r,i=og(e.props.segments),o=e.props.isComplete||"straight"===(null===(r=wr(e.props.segments))||void 0===r?void 0:r.type),a=t;n||e.props.isPen||1!==i.length||(a+=Mr(e.id)()*(t/6));var s=Sc(i,rg({strokeWidth:a,showAsComplete:o,isPen:e.props.isPen})),u=s.length>1?sd(s,!1):function(e){var t=.1;return"M ".concat(e.x," ").concat(e.y," m -").concat(t,", 0 a ").concat(t,",").concat(t," 0 1,0 ").concat(.2,",0 a ").concat(t,",").concat(t," 0 1,0 -").concat(.2,",0")}(i[0]);return{solidStrokePath:u,sw:a}}function fg(e){var t=e.strokeWidth,n=e.shape,r=e.opacity,i=dg(n,t,eg()),o=i.solidStrokePath,a=i.sw;return(0,f.jsx)(dv,{id:n.id,style:{opacity:r},children:(0,f.jsx)("path",{d:o,strokeLinecap:"round",fill:"none",pointerEvents:"all",stroke:"var(--palette-".concat(n.props.color,"-highlight)"),strokeWidth:a})})}function hg(e,t,n,r){var i=dg(t,e,!1),o=i.solidStrokePath,a=i.sw,s=document.createElementNS("http://www.w3.org/2000/svg","path");return s.setAttribute("d",o),s.setAttribute("fill","none"),s.setAttribute("stroke",r.highlight[t.props.color]),s.setAttribute("stroke-width","".concat(a)),s.setAttribute("opacity","".concat(n)),s}function pg(e){return 1.12*Vh[e.props.size]}function vg(e){return 1===e.props.segments.length&&e.props.segments[0].points.length<2}vt(cg,"type","highlight");var gg=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"info",{}),vt(_t(e),"initialShape",void 0),vt(_t(e),"shapeType","highlight"===e.parent.id?cg:sg),vt(_t(e),"util",e.editor.getShapeUtil(e.shapeType)),vt(_t(e),"isPen",!1),vt(_t(e),"segmentMode","free"),vt(_t(e),"didJustShiftClickToExtendPreviousShapeLine",!1),vt(_t(e),"pagePointWhereCurrentSegmentChanged",{}),vt(_t(e),"pagePointWhereNextSegmentChanged",null),vt(_t(e),"lastRecordedPoint",{}),vt(_t(e),"mergeNextPoint",!1),vt(_t(e),"currentLineLength",0),vt(_t(e),"canDraw",!1),vt(_t(e),"onEnter",(function(t){e.info=t,e.canDraw=!e.editor.isMenuOpen,e.lastRecordedPoint=e.editor.inputs.currentPagePoint.clone(),e.canDraw&&e.startShape()})),vt(_t(e),"onPointerMove",(function(){var t=_t(e).editor.inputs;e.isPen!==t.isPen&&e.cancel(),!e.canDraw&&t.isDragging&&(e.startShape(),e.canDraw=!0),e.canDraw&&(t.isPen?Nl.Dist(t.currentPagePoint,e.lastRecordedPoint)>=1/e.editor.zoomLevel?(e.lastRecordedPoint=t.currentPagePoint.clone(),e.mergeNextPoint=!1):e.mergeNextPoint=!0:e.mergeNextPoint=!1,e.updateShapes())})),vt(_t(e),"onKeyDown",(function(t){if("Shift"===t.key)switch(e.segmentMode){case"free":e.segmentMode="starting_straight",e.pagePointWhereNextSegmentChanged=e.editor.inputs.currentPagePoint.clone();break;case"starting_free":e.segmentMode="starting_straight"}e.updateShapes()})),vt(_t(e),"onKeyUp",(function(t){if("Shift"===t.key)switch(e.editor.snaps.clear(),e.segmentMode){case"straight":e.segmentMode="starting_free",e.pagePointWhereNextSegmentChanged=e.editor.inputs.currentPagePoint.clone();break;case"starting_straight":e.pagePointWhereNextSegmentChanged=null,e.segmentMode="free"}e.updateShapes()})),vt(_t(e),"onExit",(function(){e.editor.snaps.clear(),e.pagePointWhereCurrentSegmentChanged=e.editor.inputs.currentPagePoint.clone()})),vt(_t(e),"onPointerUp",(function(){e.complete()})),vt(_t(e),"onCancel",(function(){e.cancel()})),vt(_t(e),"onComplete",(function(){e.complete()})),vt(_t(e),"onInterrupt",(function(){e.editor.inputs.isDragging||(e.editor.bail(),e.cancel())})),e}return oe(n,[{key:"canClose",value:function(){return"highlight"!==this.shapeType.type}},{key:"getIsClosed",value:function(e,t){if(!this.canClose())return!1;var n=Kh[t],r=e[0].points[0],i=e[e.length-1],o=i.points[i.points.length-1];return r!==o&&this.currentLineLength>4*n&&Nl.Dist(r,o)<2*n}},{key:"startShape",value:function(){var e=this.editor.inputs,t=e.originPagePoint,n=e.isPen;this.editor.mark("draw create start"),this.isPen=n;var r=this.isPen?1.25*this.info.point.z:.5;if(this.segmentMode=this.editor.inputs.shiftKey?"straight":"free",this.didJustShiftClickToExtendPreviousShapeLine=!1,this.lastRecordedPoint=t.clone(),this.initialShape){var i=this.editor.getShapeById(this.initialShape.id);if(i&&"straight"===this.segmentMode){this.didJustShiftClickToExtendPreviousShapeLine=!0;var o=wr(i.props.segments);if(!o)throw Error("Expected a previous segment!");var a=wr(o.points);if(!a)throw Error("Expected a previous point!");var s=this.editor.getPointInShapeSpace(i,t).toFixed(),u=s.x,l=s.y,c=this.isPen?1.25*this.info.point.z:.5,f={type:this.segmentMode,points:[{x:a.x,y:a.y,z:+c.toFixed(2)},{x:u,y:l,z:+c.toFixed(2)}]},h=mc.applyToPoint(this.editor.getPageTransformById(i.id),a);this.pagePointWhereCurrentSegmentChanged=h,this.pagePointWhereNextSegmentChanged=null;var p=[].concat(d(i.props.segments),[f]);this.currentLineLength=this.getLineLength(p);var v={id:i.id,type:this.shapeType.type,props:{segments:p}};return this.canClose()&&(v.props.isClosed=this.getIsClosed(p,i.props.size)),void this.editor.updateShapes([v])}}this.pagePointWhereCurrentSegmentChanged=t.clone();var g=Os();this.editor.createShapes([{id:g,type:this.shapeType.type,x:t.x,y:t.y,props:{isPen:this.isPen,segments:[{type:this.segmentMode,points:[{x:0,y:0,z:+r.toFixed(2)}]}]}}]),this.currentLineLength=0,this.initialShape=this.editor.getShapeById(g)}},{key:"updateShapes",value:function(){var e=this.editor.inputs,t=this.initialShape;if(t){var n=t.id,r=t.props.size,i=this.editor.getShapeById(n);if(i){var o=i.props.segments,a=this.editor.getPointInShapeSpace(i,e.currentPagePoint).toFixed(),s=a.x,u=a.y,l=a.z,c={x:s,y:u,z:this.isPen?+(1.25*l).toFixed(2):.5};switch(this.segmentMode){case"starting_straight":var f=this.pagePointWhereNextSegmentChanged;if(null===f)throw Error("We should have a point where the segment changed");if(Nl.Dist(f,e.currentPagePoint)>4){this.pagePointWhereCurrentSegmentChanged=this.pagePointWhereNextSegmentChanged.clone(),this.pagePointWhereNextSegmentChanged=null,this.segmentMode="straight";var h=wr(o);if(!h)throw Error("Expected a previous segment!");var p,v=wr(h.points);if(!v)throw Error("Expected a previous last point!");var g=this.editor.getPointInShapeSpace(i,this.pagePointWhereCurrentSegmentChanged).toFixed().toJson();if("straight"===h.type){this.currentLineLength+=Nl.Dist(v,g),p={type:"straight",points:[mt({},v),g]};var m=this.editor.getPageTransform(i);this.pagePointWhereCurrentSegmentChanged=mc.applyToPoint(m,v)}else p={type:"straight",points:[g,c]};var y={id:n,type:this.shapeType.type,props:{segments:[].concat(d(o),[p])}};this.canClose()&&(y.props.isClosed=this.getIsClosed(o,r)),this.editor.updateShapes([y],!0)}break;case"starting_free":var b=this.pagePointWhereNextSegmentChanged;if(null===b)throw Error("We should have a point where the segment changed");if(Nl.Dist(b,e.currentPagePoint)>4){this.pagePointWhereCurrentSegmentChanged=this.pagePointWhereNextSegmentChanged.clone(),this.pagePointWhereNextSegmentChanged=null,this.segmentMode="free";var w=o.slice(),x=wr(w[w.length-1].points);if(!x)throw Error("No previous point!");var k={type:"free",points:d(Nl.PointsBetween(x,c,6).map((function(e){return e.toFixed().toJson()})))},S=[].concat(d(w),[k]);this.currentLineLength=this.getLineLength(S);var _={id:n,type:this.shapeType.type,props:{segments:S}};this.canClose()&&(_.props.isClosed=this.getIsClosed(S,r)),this.editor.updateShapes([_],!0)}break;case"straight":var E,C=o.slice(),P=C[C.length-1],I=this.pagePointWhereCurrentSegmentChanged,j=this.editor.inputs,M=j.currentPagePoint,A=j.ctrlKey;if(!I)throw Error("We should have a point where the segment changed");var T=!1;this.didJustShiftClickToExtendPreviousShapeLine?this.editor.inputs.isDragging&&(T=!A,this.didJustShiftClickToExtendPreviousShapeLine=!1):T=!A;var O=this.editor.getPointInShapeSpace(i,M).toFixed().toJson(),N=!1,R=void 0;if((this.editor.isSnapMode?!A:A)&&C.length>2){for(var L=void 0,D=8/this.editor.zoomLevel,z=0,B=o.length-2;z<B;z++){var F=o[z];if(!F)break;if("free"!==F.type){var U=F.points[0],K=wr(F.points);if(U&&K){var V=Nl.NearestPointOnLineSegment(U,K,O),W=Nl.Dist(V,O);if(W<D){L=V.toFixed().toJson(),D=W,R=F;break}}}}L&&(N=!0,O=L)}if(N&&R){var H=this.editor.getPageTransform(i),Y=R.points[0],q=wr(R.points);if(!q)throw Error("Expected a last point!");var X=mc.applyToPoint(H,Y),$=mc.applyToPoint(H,q),G=mc.applyToPoint(H,O);this.editor.snaps.setLines([{id:Bp(),type:"points",points:[X,G,$]}])}else{if(this.editor.snaps.clear(),T){var Q=Nl.Angle(I,M),J=Gl(Q,24)-Q;E=Nl.RotWith(M,I,J)}else E=M;O=this.editor.getPointInShapeSpace(i,E).toFixed().toJson()}this.currentLineLength+=Nl.Dist(P.points[0],O),C[C.length-1]=mt(mt({},P),{},{type:"straight",points:[P.points[0],O]});var Z={id:n,type:this.shapeType.type,props:{segments:C}};this.canClose()&&(Z.props.isClosed=this.getIsClosed(o,r)),this.editor.updateShapes([Z],!0);break;case"free":var ee=o.slice(),te=ee[ee.length-1],ne=d(te.points);if(ne.length&&this.mergeNextPoint){var re=ne[ne.length-1].z;ne[ne.length-1]={x:c.x,y:c.y,z:re?Math.max(re,c.z):c.z}}else this.currentLineLength+=Nl.Dist(ne[ne.length-1],c),ne.push(c);ee[ee.length-1]=mt(mt({},te),{},{points:ne}),this.currentLineLength=this.getLineLength(ee);var ie={id:n,type:this.shapeType.type,props:{segments:ee}};if(this.canClose()&&(ie.props.isClosed=this.getIsClosed(ee,r)),this.editor.updateShapes([ie],!0),ne.length>500){this.editor.updateShapes([{id:n,type:this.shapeType.type,props:{isComplete:!0}}]);var oe=this.editor.inputs.currentPagePoint,ae=Os();this.editor.createShapes([{id:ae,type:this.shapeType.type,x:ac(oe.x),y:ac(oe.y),props:{isPen:this.isPen,segments:[{type:"free",points:[{x:0,y:0,z:this.isPen?+(1.25*l).toFixed():.5}]}]}}]),this.initialShape=Xr(this.editor.getShapeById(ae)),this.mergeNextPoint=!1,this.lastRecordedPoint=this.editor.inputs.currentPagePoint.clone(),this.currentLineLength=0}}}}}},{key:"getLineLength",value:function(e){var t,n=0,r=w(e);try{for(r.s();!(t=r.n()).done;)for(var i=t.value,o=0;o<i.points.length-1;o++){var a=i.points[o],s=i.points[o+1];n+=Nl.Sub(s,a).len2()}}catch(u){r.e(u)}finally{r.f()}return Math.sqrt(n)}},{key:"complete",value:function(){if(this.canDraw){var e=this.initialShape;e&&(this.editor.updateShapes([{id:e.id,type:e.type,props:{isComplete:!0}}]),this.parent.transition("idle",{}))}else this.cancel()}},{key:"cancel",value:function(){this.parent.transition("idle",this.info)}}]),n}(lv);vt(gg,"id","drawing");var mg=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"onPointerDown",(function(t){e.parent.transition("drawing",t)})),vt(_t(e),"onEnter",(function(){e.editor.setCursor({type:"cross"})})),vt(_t(e),"onCancel",(function(){e.editor.setSelectedTool("select")})),e}return oe(n)}(lv);vt(mg,"id","idle");var yg=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"shapeType",sg),vt(_t(e),"onExit",(function(){e.children.drawing.initialShape=void 0})),e}return oe(n)}(lv);vt(yg,"id","draw"),vt(yg,"initial","idle"),vt(yg,"children",(function(){return[mg,gg]}));var bg=sv("draw",{util:sg,props:fu,migrations:pu,tool:yg}),wg=sv("embed",{util:Lh,props:Su,migrations:Pu}),xg=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"onPointerDown",(function(t){e.parent.transition("pointing",t)})),vt(_t(e),"onEnter",(function(){e.editor.setCursor({type:"cross"})})),vt(_t(e),"onCancel",(function(){e.editor.setSelectedTool("select")})),e}return oe(n)}(lv);vt(xg,"id","idle");var kg=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"markId","creating"),vt(_t(e),"wasFocusedOnEnter",!1),vt(_t(e),"onEnter",(function(){var t=e.editor.isMenuOpen;e.wasFocusedOnEnter=!t})),vt(_t(e),"onPointerMove",(function(t){if(e.editor.inputs.isDragging){var n=e.editor.inputs.originPagePoint,r=e.parent.shapeType.type,i=Os();e.editor.mark(e.markId),e.editor.createShapes([{id:i,type:r,x:n.x,y:n.y,props:{w:1,h:1}}],!0),e.editor.setSelectedTool("select.resizing",mt(mt({},t),{},{target:"selection",handle:"bottom_right",isCreating:!0,creationCursorOffset:{x:1,y:1},onInteractionEnd:e.parent.id}))}})),vt(_t(e),"onPointerUp",(function(){e.complete()})),vt(_t(e),"onCancel",(function(){e.cancel()})),vt(_t(e),"onComplete",(function(){e.complete()})),vt(_t(e),"onInterrupt",(function(){e.cancel()})),e}return oe(n,[{key:"complete",value:function(){var e=this.editor.inputs.originPagePoint;if(this.wasFocusedOnEnter){this.editor.mark(this.markId);var t=this.parent.shapeType.type,n=Os();this.editor.mark(this.markId),this.editor.createShapes([{id:n,type:t,x:e.x,y:e.y}]);var r=this.editor.getShapeById(n),i=this.editor.getShapeUtil(r).defaultProps(),o=i.w,a=i.h,s=this.editor.getDeltaInParentSpace(r,new Nl(o/2,a/2));this.editor.updateShapes([{id:n,type:t,x:r.x-s.x,y:r.y-s.y}]),this.editor.setSelectedIds([n]),this.editor.instanceState.isToolLocked?this.parent.transition("idle",{}):this.editor.setSelectedTool("select.idle")}}},{key:"cancel",value:function(){this.parent.transition("idle",{})}}]),n}(lv);vt(kg,"id","pointing");var Sg=function(e){xt(n,e);var t=Et(n);function n(){return ne(this,n),t.apply(this,arguments)}return oe(n)}(lv);function _g(e){var t=e.bounds,n=e.zoomLevel,r=e.className;return(0,f.jsx)("g",{className:r,pointerEvents:"none",strokeLinecap:"round",strokeLinejoin:"round",children:t.sides.map((function(e,t){var r=fv(e[0].dist(e[1]),1/n,{style:"dashed",lengthRatio:4}),i=r.strokeDasharray,o=r.strokeDashoffset;return(0,f.jsx)("line",{x1:e[0].x,y1:e[0].y,x2:e[1].x,y2:e[1].y,strokeDasharray:i,strokeDashoffset:o},t)}))})}vt(Sg,"id","box"),vt(Sg,"initial","idle"),vt(Sg,"children",(function(){return[xg,kg]}));var Eg=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"type","group"),vt(_t(e),"hideSelectionBoundsBg",(function(){return!1})),vt(_t(e),"hideSelectionBoundsFg",(function(){return!0})),vt(_t(e),"canBind",(function(){return!1})),vt(_t(e),"onChildrenChange",(function(t){var n=e.editor.getSortedChildIds(t.id);return 0===n.length?(e.editor.pageState.focusLayerId===t.id&&e.editor.popFocusLayer(),void e.editor.deleteShapes([t.id])):1===n.length?(e.editor.pageState.focusLayerId===t.id&&e.editor.popFocusLayer(),e.editor.reparentShapesById(n,t.parentId),void e.editor.deleteShapes([t.id])):void 0})),e}return oe(n,[{key:"defaultProps",value:function(){return{}}},{key:"getBounds",value:function(e){var t=this,n=this.editor.getSortedChildIds(e.id);if(0===n.length)return new lc;var r=n.flatMap((function(e){var n=t.editor.getShapeById(e);return t.editor.getOutlineById(e).map((function(e){return mc.applyToPoint(t.editor.getTransform(n),e)}))}));return lc.FromPoints(r)}},{key:"getCenter",value:function(e){return this.bounds(e).center}},{key:"getOutline",value:function(e){return this.bounds(e).corners}},{key:"component",value:function(e){var t=this,r=this.editor,i=r.erasingIdsSet,o=r.pageState,a=o.hintingIds,s=o.focusLayerId,u=r.zoomLevel,l=i.has(e.id),c=a.length>0&&a.some((function(r){return r!==e.id&&t.editor.isShapeOfType(t.editor.getShapeById(r),n)}));if(!l&&(e.id!==s||c))return null;var d=this.bounds(e);return(0,f.jsx)(dv,{id:e.id,children:(0,f.jsx)(_g,{className:"tl-group",bounds:d,zoomLevel:u})})}},{key:"indicator",value:function(e){var t=this.editor.camera.z,n=this.bounds(e);return(0,f.jsx)(_g,{className:"",bounds:n,zoomLevel:t})}}]),n}(Oh);vt(Eg,"type","group");var Cg=(0,t.forwardRef)((function(e,n){var r=e.id,i=e.name,o=e.isEditing,a=Ml(),s=(0,t.useCallback)((function(e){"Enter"===e.key&&(e.stopPropagation(),e.currentTarget.blur(),a.setEditingId(null))}),[a]),u=(0,t.useCallback)((function(e){var t=a.getShapeById(r);if(t){var n=t.props.name,i=e.currentTarget.value.trim();n!==i&&a.updateShapes([{id:r,type:"frame",props:{name:i}}],!0)}}),[r,a]),l=(0,t.useCallback)((function(e){var t=a.getShapeById(r);if(t){var n=t.props.name,i=e.currentTarget.value;n!==i&&a.updateShapes([{id:r,type:"frame",props:{name:i}}],!0)}}),[r,a]);return(0,f.jsxs)("div",{className:"tl-frame-label ".concat(o?"tl-frame-label__editing":""),children:[(0,f.jsx)("input",{className:"tl-frame-name-input",ref:n,style:{display:o?void 0:"none"},value:i,autoFocus:!0,onKeyDown:s,onBlur:u,onChange:l}),Bh(i,"Frame")+String.fromCharCode(8203)]})})),Pg=function(e){var n=e.id,r=e.name,i=e.width,o=e.height,a=Hl(Ml().getPageRotationById(n)),s=Eh(n),u=(0,t.useRef)(null);(0,t.useEffect)((function(){var e=u.current;e&&s&&(e.focus(),e.select(),requestAnimationFrame((function(){document.activeElement!==e&&(e.focus(),e.select())})))}),[u,s]);var l,c=((a+Math.PI/4)*(2/Math.PI)+4)%4,d=["top","left","bottom","right"][Math.floor(c)];switch(d){case"top":l="";break;case"right":l="translate(".concat(oc(i),"px, 0px) rotate(90deg)");break;case"bottom":l="translate(".concat(oc(i),"px, ").concat(oc(o),"px) rotate(180deg)");break;case"left":l="translate(0px, ".concat(oc(o),"px) rotate(270deg)")}return(0,f.jsx)("div",{className:"tl-frame-heading",style:{overflow:s?"visible":"hidden",maxWidth:"calc(var(--tl-zoom) * ".concat("top"===d||"bottom"===d?Math.ceil(i):Math.ceil(o),"px + var(--space-5))"),bottom:Math.ceil(o),transform:"".concat(l," scale(var(--tl-scale)) translateX(calc(-1 * var(--space-3))")},children:(0,f.jsx)("div",{className:"tl-frame-heading-hit-area",children:(0,f.jsx)(Cg,{ref:u,id:n,name:r,isEditing:s})})})},Ig=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"canBind",(function(){return!0})),vt(_t(e),"canEdit",(function(){return!0})),vt(_t(e),"canReceiveNewChildrenOfType",(function(e,t){return!e.isLocked})),vt(_t(e),"canDropShapes",(function(e,t){return!e.isLocked})),vt(_t(e),"onDragShapesOver",(function(t,n){return n.every((function(e){return e.parentId===t.id}))?{shouldHint:!1}:(e.editor.reparentShapesById(n.map((function(e){return e.id})),t.id),{shouldHint:!0})})),vt(_t(e),"onDragShapesOut",(function(t,n){var r=e.editor.getShapeById(t.parentId);r&&e.editor.isShapeOfType(r,Eg)?e.editor.reparentShapesById(n.map((function(e){return e.id})),r.id):e.editor.reparentShapesById(n.map((function(e){return e.id})),e.editor.currentPageId)})),vt(_t(e),"onResizeEnd",(function(t){var n,r=e.editor.getPageBounds(t),i=[],o=w(e.editor.getSortedChildIds(t.id));try{for(o.s();!(n=o.n()).done;){var a=n.value,s=e.editor.getPageBoundsById(a);r.includes(s)||i.push(a)}}catch(u){o.e(u)}finally{o.f()}i.length>0&&e.editor.reparentShapesById(i,e.editor.currentPageId)})),e}return oe(n,[{key:"defaultProps",value:function(){return{w:320,h:180,name:""}}},{key:"component",value:function(e){var t=this.bounds(e);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(dv,{children:[(0,f.jsx)("rect",{className:"tl-hitarea-stroke",width:t.width,height:t.height}),(0,f.jsx)("rect",{className:"tl-frame__body",width:t.width,height:t.height,fill:"none"})]}),(0,f.jsx)(Pg,{id:e.id,name:e.props.name,width:t.width,height:t.height})]})}},{key:"toSvg",value:function(e,t,n){var r=document.createElementNS("http://www.w3.org/2000/svg","g"),i=document.createElementNS("http://www.w3.org/2000/svg","rect");i.setAttribute("width",e.props.w.toString()),i.setAttribute("height",e.props.h.toString()),i.setAttribute("fill",n.solid),i.setAttribute("stroke",n.fill.black),i.setAttribute("stroke-width","1"),i.setAttribute("rx","1"),i.setAttribute("ry","1"),r.appendChild(i);var o,a=((Hl(this.editor.getPageRotationById(e.id))+Math.PI/4)*(2/Math.PI)+4)%4;switch(["top","left","bottom","right"][Math.floor(a)]){case"top":default:o="";break;case"right":o="translate(".concat(oc(e.props.w),"px, 0px) rotate(90deg)");break;case"bottom":o="translate(".concat(oc(e.props.w),"px, ").concat(oc(e.props.h),"px) rotate(180deg)");break;case"left":o="translate(0px, ".concat(oc(e.props.h),"px) rotate(270deg)")}var s={fontSize:12,fontFamily:"Inter, sans-serif",textAlign:"start",width:e.props.w,height:32,padding:0,lineHeight:1,fontStyle:"normal",fontWeight:"normal",overflow:"truncate-ellipsis",verticalTextAlign:"middle"},u=this.editor.textMeasure.measureTextSpans(Bh(e.props.name,"Frame")+String.fromCharCode(8203),s),l=u[0],c=wr(u),d=c.box.w+c.box.x-l.box.x,f=Fh(this.editor,u,mt({offsetY:-s.height-2},s));f.style.setProperty("transform",o);var h=document.createElementNS("http://www.w3.org/2000/svg","rect");return h.setAttribute("x","-8px"),h.setAttribute("y",-s.height-4+"px"),h.setAttribute("width",d+16+"px"),h.setAttribute("height","".concat(s.height,"px")),h.setAttribute("rx","4px"),h.setAttribute("ry","4px"),h.setAttribute("fill",n.background),r.appendChild(h),r.appendChild(f),r}},{key:"indicator",value:function(e){var t=this.bounds(e);return(0,f.jsx)("rect",{width:oc(t.width),height:oc(t.height),className:"tl-frame-indicator"})}},{key:"providesBackgroundForChildren",value:function(){return!0}}]),n}(Rh);vt(Ig,"type","frame");var jg=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"shapeType",Ig),e}return oe(n)}(Sg);vt(jg,"id","frame"),vt(jg,"initial","idle");var Mg=sv("frame",{util:Ig,props:Iu,migrations:ju,tool:jg});function Ag(e){var t=e.bounds,n=e.editor,r=e.font,i=e.shape,o={fontSize:Wh[i.props.size],fontFamily:r,textAlign:i.props.align,verticalTextAlign:i.props.verticalAlign,width:Math.ceil(t.width),height:Math.ceil(t.height),padding:16,lineHeight:Uh.lineHeight,fontStyle:"normal",fontWeight:"normal",overflow:"wrap",offsetX:0},a=n.textMeasure.measureTextSpans(i.props.text,o),s=function(e,t,n,r){if(("start-legacy"===e||"end-legacy"===e)&&0!==n.length){var i,o=lc.From(n[0].box),a=w(n);try{for(a.s();!(i=a.n()).done;){var s=i.value.box;o.union(s)}}catch(u){a.e(u)}finally{a.f()}if("start-legacy"===e)return(r-2*t-o.width)/2;if("end-legacy"===e)return-(r-2*t-o.width)/2}}(i.props.align,16,a,t.width);return s&&(o.offsetX=s),Fh(0,a,o)}var Tg=t.memo((function(e){var t=e.id,n=e.type,r=e.text,i=e.size,o=e.labelColor,a=e.font,s=e.align,u=e.verticalAlign,l=e.wrap,c=Gh(t,n,r),d=c.rInput,h=c.isEmpty,p=c.isEditing,v=c.isEditableFromHover,g=c.handleFocus,m=c.handleChange,y=c.handleKeyDown,b=c.handleBlur,w=p||v,x=Xh.normalizeTextForDom(r),k=x.trim().length>0,S=function(e){return"start-legacy"===e||"middle-legacy"===e||"end-legacy"===e}(s);return(0,f.jsx)("div",{className:"tl-text-label","data-font":a,"data-align":s,"data-hastext":!h,"data-isediting":p,"data-textwrap":!!l,style:k||w?{justifyContent:"middle"===s||S?"center":s,alignItems:"middle"===u?"center":u}:void 0,children:(0,f.jsxs)("div",{className:"tl-text-label__inner",style:{fontSize:Wh[i],lineHeight:Wh[i]*Uh.lineHeight+"px",minHeight:h?Wh[i]*Uh.lineHeight+32:0,minWidth:h?33:0,color:"var(--palette-".concat(o,")")},children:[(0,f.jsx)("div",{className:"tl-text tl-text-content",dir:"ltr",children:x}),w?(0,f.jsx)("textarea",{ref:d,className:"tl-text tl-text-input",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:p,placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:r,onFocus:g,onChange:m,onKeyDown:y,onBlur:b,onContextMenu:nd}):null]})})})),Og=t.memo((function(e){var t=e.w,n=e.h,r=e.strokeWidth,i=e.dash,o=e.color,a=e.fill,s=t/2,u=n/2,l=Math.max(0,s-r/2),c=Math.max(0,u-r/2),d=Wl(l,c),h=fv(d<64?2*d:d,r,{style:i,snap:4,closed:!0}),p=h.strokeDasharray,v=h.strokeDashoffset,g="M".concat(s-l,",").concat(u,"a").concat(l,",").concat(c,",0,1,1,").concat(2*l,",0a").concat(l,",").concat(c,",0,1,1,-").concat(2*l,",0");return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(hv,{d:g,color:o,fill:a}),(0,f.jsx)("path",{d:g,strokeWidth:r,width:oc(t),height:oc(n),fill:"none",stroke:"var(--palette-".concat(o,")"),strokeDasharray:p,strokeDashoffset:v,pointerEvents:"all"})]})}));function Ng(e,t){if(t>e){var n=e/2;return"\n    M0,".concat(n,"\n    a").concat(n,",").concat(n,",0,1,1,").concat(2*n,",0\n    L").concat(e,",").concat(t-n,"\n    a").concat(n,",").concat(n,",0,1,1,-").concat(2*n,",0\n    Z")}var r=t/2;return"\n    M".concat(r,",0\n    L").concat(e-r,",0\n    a").concat(r,",").concat(r,",0,1,1,0,").concat(2*r,"\n    L").concat(r,",").concat(t,"\n    a").concat(r,",").concat(r,",0,1,1,0,").concat(2*-r,"\n    Z")}function Rg(e,t){if(e>t){var n=t/2;return Wl(n,n)+2*(e-2*n)}var r=e/2;return Wl(r,r)+2*(t-2*r)}var Lg=t.memo((function(e){var t=e.w,n=e.h,r=e.strokeWidth,i=e.dash,o=e.color,a=e.fill,s=Ng(t,n),u=Rg(t,n),l=fv(u<64?2*u:u,r,{style:i,snap:4,start:"outset",end:"outset",closed:!0}),c=l.strokeDasharray,d=l.strokeDashoffset;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(hv,{d:s,color:o,fill:a}),(0,f.jsx)("path",{d:s,strokeWidth:r,width:oc(t),height:oc(n),fill:"none",stroke:"var(--palette-".concat(o,")"),strokeDasharray:c,strokeDashoffset:d,pointerEvents:"all"})]})}));function Dg(e){var t=e.w,n=e.h,r=e.strokeWidth,i=e.dash,o=e.color,a=e.colors,s=e.fill,u=Ng(t,n),l=Rg(t,n),c=fv(l<64?2*l:l,r,{style:i,snap:4,closed:!0}),d=c.strokeDasharray,f=c.strokeDashoffset,h=document.createElementNS("http://www.w3.org/2000/svg","path");return h.setAttribute("d",u),h.setAttribute("stroke-width",r.toString()),h.setAttribute("width",t.toString()),h.setAttribute("height",n.toString()),h.setAttribute("fill","none"),h.setAttribute("stroke",a.fill[o]),h.setAttribute("stroke-dasharray",d),h.setAttribute("stroke-dashoffset",f),gv(h,vv({d:u,fill:s,color:o,colors:a}))}var zg=t.memo((function(e){var t=e.dash,n=e.fill,r=e.color,i=e.strokeWidth,o=e.outline,a=e.lines,s="M"+o[0]+"L"+o.slice(1)+"Z";return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(hv,{d:s,fill:n,color:r}),a&&a.map((function(e,t){return(0,f.jsx)("path",{className:"tl-hitarea-stroke",fill:"none",d:"M".concat(e[0].x,",").concat(e[0].y,"L").concat(e[1].x,",").concat(e[1].y)},"line_bg_".concat(t))})),(0,f.jsxs)("g",{strokeWidth:i,stroke:"var(--palette-".concat(r,")"),fill:"none",pointerEvents:"all",children:[Array.from(Array(o.length)).map((function(e,n){var r=o[n],a=o[(n+1)%o.length],s=fv(Nl.Dist(r,a),i,{style:t,start:"outset",end:"outset"}),u=s.strokeDasharray,l=s.strokeDashoffset;return(0,f.jsx)("line",{x1:r.x,y1:r.y,x2:a.x,y2:a.y,strokeDasharray:u,strokeDashoffset:l},n)})),a&&a.map((function(e,n){var o=l(e,2),a=o[0],s=o[1],u=fv(Nl.Dist(a,s),i,{style:t,start:"skip",end:"outset",snap:"dotted"===t?4:void 0}),c=u.strokeDasharray,d=u.strokeDashoffset;return(0,f.jsx)("path",{d:"M".concat(a.x,",").concat(a.y,"L").concat(s.x,",").concat(s.y),stroke:"var(--palette-".concat(r,")"),strokeWidth:i,fill:"none",strokeDasharray:c,strokeDashoffset:d},"line_fg_".concat(n))}))]})]})}));t.memo((function(e){var t=e.id,n=e.w,r=e.h,i=e.strokeWidth,o=e.fill,a=e.color,s=Kg(t,n,r,i),u=Ug(t,n,r,i);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(hv,{d:s,color:a,fill:o}),(0,f.jsx)("path",{d:u,fill:"var(--palette-".concat(a,")"),strokeWidth:0,pointerEvents:"all"})]})}));function Bg(e){return{size:1+e,thinning:.25,end:{taper:e},start:{taper:e},streamline:0,smoothing:1,simulatePressure:!1}}function Fg(e,t,n,r){for(var i=Mr(e),o=t/2,a=n/2,s=Wl(o,a),u=[],l=zl*i(),c=zl+Dl/2+Math.abs(i())*Dl,d=Math.max(16,s/10),f=0;f<d;f++){var h=f/(d-1),p=l+h*c,v=Math.cos(p),g=Math.sin(p);u.push(new Nl(o*v+.5*t+.05*i(),a*g+n/2+.05*i(),Math.min(1,.5+Math.abs(.5-(i()>0?Ol.easeInOutSine(h):Ol.easeInExpo(h)))/2)))}return Sc(u,Bg(r))}function Ug(e,t,n,r){var i=Bg(r);return ad(wc(Cc(Fg(e,t,n,r),i),i))}function Kg(e,t,n,r){return sd(Fg(e,t,n,r))}var Vg=t.memo((function(e){var t=e.id,n=e.outline,r=e.lines,i=e.fill,o=e.color,a=e.strokeWidth,s=zc(Bc(t,n,a/3,2*a,2));if(r){var u,c=w(r);try{for(c.s();!(u=c.n()).done;){var d=l(u.value,2),h=d[0],p=d[1];s+="M".concat(h.x,",").concat(h.y,"L").concat(p.x,",").concat(p.y)}}catch(g){c.e(g)}finally{c.f()}}var v=zc(Bc(t,n,0,2*a,1));return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(hv,{d:v,fill:i,color:o}),(0,f.jsx)("path",{d:s,stroke:"var(--palette-".concat(o,")"),strokeWidth:a,fill:"none"})]})}));var Wg=t.memo((function(e){var t=e.w,n=e.h,r=e.strokeWidth,i=e.fill,o=e.color,a=t/2,s=n/2,u=Math.max(0,a),l=Math.max(0,s),c="M".concat(a-u,",").concat(s,"a").concat(u,",").concat(l,",0,1,1,").concat(2*u,",0a").concat(u,",").concat(l,",0,1,1,-").concat(2*u,",0");return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(hv,{d:c,color:o,fill:i}),(0,f.jsx)("path",{d:c,stroke:"var(--palette-".concat(o,")"),strokeWidth:r,fill:"none"})]})}));var Hg=t.memo((function(e){var t=e.w,n=e.h,r=e.strokeWidth,i=e.fill,o=e.color,a=Yg(t,n);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(hv,{d:a,color:o,fill:i}),(0,f.jsx)("path",{d:a,stroke:"var(--palette-".concat(o,")"),strokeWidth:r,fill:"none"})]})}));function Yg(e,t){var n;if(t>e){var r=e/2;n="\n    M0,".concat(r,"\n    a").concat(r,",").concat(r,",0,1,1,").concat(2*r,",0\n    L").concat(e,",").concat(t-r,"\n    a").concat(r,",").concat(r,",0,1,1,-").concat(2*r,",0\n    Z")}else{var i=t/2;n="\n    M".concat(i,",0\n    L").concat(e-i,",0\n    a").concat(i,",").concat(i,",0,1,1,0,").concat(2*i,"\n    L").concat(i,",").concat(t,"\n    a").concat(i,",").concat(i,",0,1,1,0,").concat(2*-i,"\n    Z")}return n}var qg=t.memo((function(e){var t=e.outline,n=e.lines,r=e.fill,i=e.color,o=e.strokeWidth,a="M"+t[0]+"L"+t.slice(1)+"Z";if(n){var s,u=w(n);try{for(u.s();!(s=u.n()).done;){var c=l(s.value,2),d=c[0],h=c[1];a+="M".concat(d.x,",").concat(d.y,"L").concat(h.x,",").concat(h.y)}}catch(p){u.e(p)}finally{u.f()}}return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(hv,{d:a,fill:r,color:i}),(0,f.jsx)("path",{d:a,stroke:"var(--palette-".concat(i),strokeWidth:o,fill:"none"})]})}));var Xg=51,$g=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"canEdit",(function(){return!0})),vt(_t(e),"onEditEnd",(function(t){var n=t.id,r=t.type,i=t.props.text;i.trimEnd()!==t.props.text&&e.editor.updateShapes([{id:n,type:r,props:{text:i.trimEnd()}}])})),vt(_t(e),"onResize",(function(t,n){var r=n.initialBounds,i=n.handle,o=n.newPoint,a=n.scaleX,s=n.scaleY,u=r.width*a,l=r.height*s,c=0,d=0;if(t.props.text.trim()){var f=Math.max(Math.abs(u),Xg),h=Math.max(Math.abs(l),Xg);f<Xg&&h===Xg&&(f=Xg),f===Xg&&h<Xg&&(h=Xg);var p=Gg(e.editor,mt(mt({},t),{},{props:mt(mt({},t.props),{},{w:f,h:h})})),v=Math.max(Math.abs(u),p.w)*Math.sign(u),g=Math.max(Math.abs(l),p.h)*Math.sign(l);c=Math.abs(v)-Math.abs(u),d=Math.abs(g)-Math.abs(l),u=v,l=g}var m=new Nl(0,0);a<0&&(m.x+=u),"left"!==i&&"top_left"!==i&&"bottom_left"!==i||(m.x+=a<0?c:-c),s<0&&(m.y+=l),"top"!==i&&"top_left"!==i&&"top_right"!==i||(m.y+=s<0?d:-d);var y=m.rot(t.rotation).add(o);return{x:y.x,y:y.y,props:{w:Math.max(Math.abs(u),1),h:Math.max(Math.abs(l),1),growY:0}}})),vt(_t(e),"onBeforeCreate",(function(t){if(!t.props.text)return t.props.growY?mt(mt({},t),{},{props:mt(mt({},t.props),{},{growY:0})}):void 0;var n=t.props.h,r=Gg(e.editor,t).h,i=null;return r>n?i=r-n:t.props.growY&&(i=0),null!==i?mt(mt({},t),{},{props:mt(mt({},t.props),{},{growY:i})}):void 0})),vt(_t(e),"onBeforeUpdate",(function(t,n){var r=t.props.text.trimEnd(),i=n.props.text.trimEnd();if(r!==i||t.props.font!==n.props.font||t.props.size!==n.props.size){if(r&&!i)return mt(mt({},n),{},{props:mt(mt({},n.props),{},{growY:0})});var o=t.props.w,a=t.props.h,s=Gg(e.editor,n),u=s.w,l=s.h;if(!r&&i&&1===i.length){var c=Math.max(o,u),d=Math.max(a,l);return t.props.w<Xg&&t.props.h<Xg&&(c=Math.max(c,Xg),d=Math.max(d,Xg),c=Math.max(c,d),d=Math.max(c,d)),mt(mt({},n),{},{props:mt(mt({},n.props),{},{w:c,h:d,growY:0})})}var f=null;return l>a?f=l-a:t.props.growY&&(f=0),null!==f?mt(mt({},n),{},{props:mt(mt({},n.props),{},{growY:f,w:Math.max(n.props.w,u)})}):u>t.props.w?mt(mt({},n),{},{props:mt(mt({},n.props),{},{w:u})}):void 0}})),vt(_t(e),"onDoubleClick",(function(t){if(e.editor.inputs.altKey)switch(t.props.geo){case"rectangle":return mt(mt({},t),{},{props:{geo:"check-box"}});case"check-box":return mt(mt({},t),{},{props:{geo:"rectangle"}})}})),e}return oe(n,[{key:"defaultProps",value:function(){return{w:100,h:100,geo:"rectangle",color:"black",labelColor:"black",fill:"none",dash:"draw",size:"m",font:"draw",text:"",align:"middle",verticalAlign:"middle",growY:0,url:""}}},{key:"hitTestLineSegment",value:function(e,t,n){for(var r=this.outline(e),i=0;i<r.length;i++){if(Nc(t,n,r[i],r[(i+1)%r.length]))return!0}var o=Qg(e.props,0);if(void 0!==o){var a,s=w(o);try{for(s.s();!(a=s.n()).done;){var u=l(a.value,2);if(Nc(t,n,u[0],u[1]))return!0}}catch(c){s.e(c)}finally{s.f()}}return!1}},{key:"hitTestPoint",value:function(e,t){var n=this.outline(e);if("none"===e.props.fill){for(var r=this.editor.zoomLevel,i=Kh[e.props.size]/r,o=0;o<n.length;o++){var a=n[o],s=n[(o+1)%n.length];if(Nl.DistanceToLineSegment(a,s,t)<i)return!0}var u=Qg(e.props,1);if(void 0!==u){var c,d=w(u);try{for(d.s();!(c=d.n()).done;){var f=l(c.value,2),h=f[0],p=f[1];if(Nl.DistanceToLineSegment(h,p,t)<i)return!0}}catch(v){d.e(v)}finally{d.f()}}return!1}return ic(t,n)}},{key:"getBounds",value:function(e){return new lc(0,0,e.props.w,e.props.h+e.props.growY)}},{key:"getCenter",value:function(e){return new Nl(e.props.w/2,(e.props.h+e.props.growY)/2)}},{key:"getOutline",value:function(e){var t=Math.max(1,e.props.w),n=Math.max(1,e.props.h+e.props.growY),r=t/2,i=n/2;switch(e.props.geo){case"triangle":return[new Nl(r,0),new Nl(t,n),new Nl(0,n)];case"diamond":return[new Nl(r,0),new Nl(t,i),new Nl(r,n),new Nl(0,i)];case"pentagon":return ec(t,n,5);case"hexagon":return ec(t,n,6);case"octagon":return ec(t,n,8);case"ellipse":var o=Math.pow(r-i,2)/Math.pow(r+i,2),a=Ll*(r+i)*(1+3*o/(10+Math.sqrt(4-3*o))),s=Math.max(4,Math.ceil(a/10));s=4*Math.ceil(s/4);for(var u=zl/s,l=Math.cos(u),c=Math.sin(u),d=0,f=1,h=1,p=Array(s),v=0;v<s;v++)p[v]=new Nl(r+r*f,i+i*d),h=l*f-c*d,d=c*f+l*d,f=h;return p;case"oval":var g=10,m=Array(20);if(n>t)for(var y=0;y<g;y++){var b=Ll*y/8-Ll,w=Ll*y/8;m[y]=new Nl(r+r*Math.cos(b),r+r*Math.sin(b)),m[y+g]=new Nl(r+r*Math.cos(w),n-r+r*Math.sin(w))}else for(var x=0;x<g;x++){var k=Ll*x/8-Dl,S=Dl+Ll*-x/8;m[x]=new Nl(t-i+i*Math.cos(k),n-i+i*Math.sin(k)),m[x+g]=new Nl(i-i*Math.cos(S),n-i+i*Math.sin(S))}return m;case"star":var _=zl/5/2,E=2*Math.floor(5/4),C=10-E,P=2*Math.floor(2.5),I=Math.cos(E*_-Dl)*t/2,j=Math.cos(C*_-Dl)*t/2,M=Math.sin(0*_-Dl)*n/2,A=Math.sin(P*_-Dl)*n/2,T=t-Math.abs(I-j),O=n-Math.abs(A-M),N=(t-(t/2+j-(t/2-I)))/2,R=(n-(n/2+M-(n/2-A)))/2,L=(t+T)/2,D=(n+O)/2,z=1*L/2,B=1*D/2;return Array.from(Array(10)).map((function(e,t){var n=t*_-Dl;return new Nl(N+(t%2?z:L)*Math.cos(n),R+(t%2?B:D)*Math.sin(n))}));case"rhombus":var F=Math.min(.38*t,.38*n);return[new Nl(F,0),new Nl(t,0),new Nl(t-F,n),new Nl(0,n)];case"rhombus-2":var U=Math.min(.38*t,.38*n);return[new Nl(0,0),new Nl(t-U,0),new Nl(t,n),new Nl(U,n)];case"trapezoid":var K=Math.min(.38*t,.38*n);return[new Nl(K,0),new Nl(t-K,0),new Nl(t,n),new Nl(0,n)];case"arrow-right":var V=.38*Math.min(t,n),W=.16*n;return[new Nl(0,W),new Nl(t-V,W),new Nl(t-V,0),new Nl(t,n/2),new Nl(t-V,n),new Nl(t-V,n-W),new Nl(0,n-W)];case"arrow-left":var H=.38*Math.min(t,n),Y=.16*n;return[new Nl(H,0),new Nl(H,Y),new Nl(t,Y),new Nl(t,n-Y),new Nl(H,n-Y),new Nl(H,n),new Nl(0,n/2)];case"arrow-up":var q=.16*t,X=.38*Math.min(t,n);return[new Nl(t/2,0),new Nl(t,X),new Nl(t-q,X),new Nl(t-q,n),new Nl(q,n),new Nl(q,X),new Nl(0,X)];case"arrow-down":var $=.16*t,G=.38*Math.min(t,n);return[new Nl($,0),new Nl(t-$,0),new Nl(t-$,n-G),new Nl(t,n-G),new Nl(t/2,n),new Nl(0,n-G),new Nl($,n-G)];case"check-box":case"x-box":case"rectangle":return[new Nl(0,0),new Nl(t,0),new Nl(t,n),new Nl(0,n)]}}},{key:"component",value:function(e){var t=this,n=e.id,r=e.type,i=e.props,o=eg(),a=Kh[i.size],s=i.w,u=i.color,l=i.labelColor,c=i.fill,d=i.dash,h=i.growY,p=i.font,v=i.align,g=i.verticalAlign,m=i.size,y=i.text;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(dv,{id:n,children:function(){var r=i.h+h;switch(i.geo){case"ellipse":if("solid"===d||"draw"===d&&o)return(0,f.jsx)(Wg,{strokeWidth:a,w:s,h:r,color:u,fill:c});if("dashed"===d||"dotted"===d)return(0,f.jsx)(Og,{id:n,strokeWidth:a,w:s,h:r,dash:"dashed"===d?d:"s"===m&&o?"dashed":d,color:u,fill:c});if("draw"===d)return(0,f.jsx)(Wg,{strokeWidth:a,w:s,h:r,color:u,fill:c});break;case"oval":if("solid"===d||"draw"===d&&o)return(0,f.jsx)(Hg,{strokeWidth:a,w:s,h:r,color:u,fill:c});if("dashed"===d||"dotted"===d)return(0,f.jsx)(Lg,{id:n,strokeWidth:a,w:s,h:r,dash:"dashed"===d?d:"s"===m&&o?"dashed":d,color:u,fill:c});if("draw"===d)return(0,f.jsx)(Hg,{strokeWidth:a,w:s,h:r,color:u,fill:c});break;default:var l=t.outline(e),p=Qg(e.props,a);if("solid"===d||"draw"===d&&o)return(0,f.jsx)(qg,{fill:c,color:u,strokeWidth:a,outline:l,lines:p});if("dashed"===d||"dotted"===d)return(0,f.jsx)(zg,{dash:"dashed"===d?d:"s"===m&&o?"dashed":d,fill:c,color:u,strokeWidth:a,outline:l,lines:p});if("draw"===d)return(0,f.jsx)(Vg,{id:n,fill:c,color:u,strokeWidth:a,outline:l,lines:p})}}()}),(0,f.jsx)(Tg,{id:n,type:r,font:p,fill:c,size:m,align:v,verticalAlign:g,text:y,labelColor:l,wrap:!0}),e.props.url&&(0,f.jsx)(Xv,{url:e.props.url,zoomLevel:this.editor.zoomLevel})]})}},{key:"indicator",value:function(e){var t=e.id,n=e.props,r=n.w,i=n.h,o=n.growY,a=n.size,s=eg(),u=Kh[a];switch(n.geo){case"ellipse":return"draw"!==n.dash||s?(0,f.jsx)("ellipse",{cx:r/2,cy:(i+o)/2,rx:r/2,ry:(i+o)/2}):(0,f.jsx)("path",{d:Kg(t,r,i+o,u)});case"oval":return(0,f.jsx)("path",{d:Yg(r,i+o)});default:var c,d=this.outline(e);if("draw"!==n.dash||s)c="M"+d[0]+"L"+d.slice(1)+"Z";else c=zc(Bc(t,d,0,2*u,1));var h=Qg(e.props,u);if(h){var p,v=w(h);try{for(v.s();!(p=v.n()).done;){var g=l(p.value,2),m=g[0],y=g[1];c+="M".concat(m.x,",").concat(m.y,"L").concat(y.x,",").concat(y.y)}}catch(b){v.e(b)}finally{v.f()}}return(0,f.jsx)("path",{d:c})}}},{key:"toSvg",value:function(e,t,n){var r,i=e.id,o=e.props,a=Kh[o.size];switch(o.geo){case"ellipse":switch(o.dash){case"draw":r=function(e){var t=e.id,n=e.w,r=e.h,i=e.strokeWidth,o=e.fill,a=e.color,s=e.colors,u=document.createElementNS("http://www.w3.org/2000/svg","path");return u.setAttribute("d",Ug(t,n,r,i)),u.setAttribute("fill",s.fill[a]),gv(u,vv({d:Kg(t,n,r,i),fill:o,color:a,colors:s}))}({id:i,w:o.w,h:o.h,color:o.color,fill:o.fill,strokeWidth:a,colors:n});break;case"solid":r=function(e){var t=e.w,n=e.h,r=e.strokeWidth,i=e.fill,o=e.color,a=e.colors,s=t/2,u=n/2,l=Math.max(0,s),c=Math.max(0,u),d="M".concat(s-l,",").concat(u,"a").concat(l,",").concat(c,",0,1,1,").concat(2*l,",0a").concat(l,",").concat(c,",0,1,1,-").concat(2*l,",0"),f=document.createElementNS("http://www.w3.org/2000/svg","path");return f.setAttribute("d",d),f.setAttribute("stroke-width",r.toString()),f.setAttribute("width",t.toString()),f.setAttribute("height",n.toString()),f.setAttribute("fill","none"),f.setAttribute("stroke",a.fill[o]),gv(f,vv({d:d,fill:i,color:o,colors:a}))}({strokeWidth:a,w:o.w,h:o.h,color:o.color,fill:o.fill,colors:n});break;default:r=function(e){var t=e.w,n=e.h,r=e.strokeWidth,i=e.dash,o=e.color,a=e.colors,s=e.fill,u=t/2,l=n/2,c=Math.max(0,u-r/2),d=Math.max(0,l-r/2),f=Wl(c,d),h=fv(f<64?2*f:f,r,{style:i,snap:4,closed:!0}),p=h.strokeDasharray,v=h.strokeDashoffset,g="M".concat(u-c,",").concat(l,"a").concat(c,",").concat(d,",0,1,1,").concat(2*c,",0a").concat(c,",").concat(d,",0,1,1,-").concat(2*c,",0"),m=document.createElementNS("http://www.w3.org/2000/svg","path");return m.setAttribute("d",g),m.setAttribute("stroke-width",r.toString()),m.setAttribute("width",t.toString()),m.setAttribute("height",n.toString()),m.setAttribute("fill","none"),m.setAttribute("stroke",a.fill[o]),m.setAttribute("stroke-dasharray",p),m.setAttribute("stroke-dashoffset",v),gv(m,vv({d:g,fill:s,color:o,colors:a}))}({id:i,strokeWidth:a,w:o.w,h:o.h,dash:o.dash,color:o.color,fill:o.fill,colors:n})}break;case"oval":switch(o.dash){case"draw":default:r=Dg({id:i,strokeWidth:a,w:o.w,h:o.h,dash:o.dash,color:o.color,fill:o.fill,colors:n});break;case"solid":r=function(e){var t=e.w,n=e.h,r=e.strokeWidth,i=e.fill,o=e.color,a=e.colors,s=Yg(t,n),u=document.createElementNS("http://www.w3.org/2000/svg","path");return u.setAttribute("d",s),u.setAttribute("stroke-width",r.toString()),u.setAttribute("width",t.toString()),u.setAttribute("height",n.toString()),u.setAttribute("fill","none"),u.setAttribute("stroke",a.fill[o]),gv(u,vv({d:s,fill:i,color:o,colors:a}))}({strokeWidth:a,w:o.w,h:o.h,color:o.color,fill:o.fill,colors:n})}break;default:var s=this.outline(e),u=Qg(e.props,a);switch(o.dash){case"draw":r=function(e){var t=e.id,n=e.outline,r=e.lines,i=e.fill,o=e.color,a=e.colors,s=e.strokeWidth,u=zc(Bc(t,n,s/3,2*s,2));if(r){var c,d=w(r);try{for(d.s();!(c=d.n()).done;){var f=l(c.value,2),h=f[0],p=f[1];u+="M".concat(h.x,",").concat(h.y,"L").concat(p.x,",").concat(p.y)}}catch(m){d.e(m)}finally{d.f()}}var v=zc(Bc(t,n,0,2*s,1)),g=document.createElementNS("http://www.w3.org/2000/svg","path");return g.setAttribute("d",u),g.setAttribute("fill","none"),g.setAttribute("stroke",a.fill[o]),g.setAttribute("stroke-width",s.toString()),gv(g,vv({d:v,fill:i,color:o,colors:a}))}({id:i,fill:o.fill,color:o.color,strokeWidth:a,outline:s,lines:u,colors:n});break;case"solid":r=function(e){var t=e.outline,n=e.lines,r=e.fill,i=e.color,o=e.strokeWidth,a=e.colors,s="M"+t[0]+"L"+t.slice(1)+"Z",u=s,c=s;if(n){var d,f=w(n);try{for(f.s();!(d=f.n()).done;){var h=l(d.value,2),p=h[0],v=h[1];c+="M".concat(p.x,",").concat(p.y,"L").concat(v.x,",").concat(v.y)}}catch(m){f.e(m)}finally{f.f()}}var g=document.createElementNS("http://www.w3.org/2000/svg","path");return g.setAttribute("d",c),g.setAttribute("stroke-width",o.toString()),g.setAttribute("stroke",a.fill[i]),g.setAttribute("fill","none"),gv(g,vv({d:u,fill:r,color:i,colors:a}))}({fill:o.fill,color:o.color,strokeWidth:a,outline:s,lines:u,colors:n});break;default:r=function(e){var t=e.dash,n=e.fill,r=e.color,i=e.colors,o=e.strokeWidth,a=e.outline,s=e.lines,u=document.createElementNS("http://www.w3.org/2000/svg","g");if(u.setAttribute("stroke-width",o.toString()),u.setAttribute("stroke",i.fill[r]),u.setAttribute("fill","none"),Array.from(Array(a.length)).forEach((function(e,n){var r=a[n],i=a[(n+1)%a.length],s=fv(Nl.Dist(r,i),o,{style:t}),l=s.strokeDasharray,c=s.strokeDashoffset,d=document.createElementNS("http://www.w3.org/2000/svg","line");d.setAttribute("x1",r.x.toString()),d.setAttribute("y1",r.y.toString()),d.setAttribute("x2",i.x.toString()),d.setAttribute("y2",i.y.toString()),d.setAttribute("stroke-dasharray",l.toString()),d.setAttribute("stroke-dashoffset",c.toString()),u.appendChild(d)})),s){var c,d=w(s);try{for(d.s();!(c=d.n()).done;){var f=l(c.value,2),h=f[0],p=f[1],v=fv(Nl.Dist(h,p),o,{style:t,start:"skip",end:"skip",snap:"dotted"===t?4:2}),g=v.strokeDasharray,m=v.strokeDashoffset,y=document.createElementNS("http://www.w3.org/2000/svg","line");y.setAttribute("x1",h.x.toString()),y.setAttribute("y1",h.y.toString()),y.setAttribute("x2",p.x.toString()),y.setAttribute("y2",p.y.toString()),y.setAttribute("stroke-dasharray",g.toString()),y.setAttribute("stroke-dashoffset",m.toString()),u.appendChild(y)}}catch(x){d.e(x)}finally{d.f()}}var b=vv({d:"M"+a[0]+"L"+a.slice(1)+"Z",fill:n,color:r,colors:i});return gv(u,b)}({dash:o.dash,fill:o.fill,color:o.color,strokeWidth:a,outline:s,lines:u,colors:n})}}if(o.text){var c=this.bounds(e),d=Ag({editor:this.editor,shape:e,font:t,bounds:c}),f=d.cloneNode(!0);f.setAttribute("fill",n.fill[e.props.labelColor]),f.setAttribute("stroke","none");var h=d.cloneNode(!0);h.setAttribute("stroke-width","2"),h.setAttribute("fill",n.background),h.setAttribute("stroke",n.background);var p=document.createElementNS("http://www.w3.org/2000/svg","g");if(p.append(h),p.append(f),"g"===r.nodeName)return r.appendChild(p),r;var v=document.createElementNS("http://www.w3.org/2000/svg","g");return v.appendChild(r),v.appendChild(p),v}return r}}]),n}(Rh);function Gg(e,t){var n=t.props.text.trimEnd();if(!n)return{w:0,h:0};var r=e.textMeasure.measureText("w",mt(mt({},Uh),{},{fontFamily:Yh[t.props.font],fontSize:Wh[t.props.size],width:"fit-content",maxWidth:"100px"})),i=e.textMeasure.measureText(n,mt(mt({},Uh),{},{fontFamily:Yh[t.props.font],fontSize:Wh[t.props.size],width:"fit-content",minWidth:r.w+"px",maxWidth:Math.max(0,Math.ceil(r.w+{s:2,m:3.5,l:5,xl:10}[t.props.size]),Math.ceil(t.props.w-32))+"px"}));return{w:i.w+32,h:i.h+32}}function Qg(e,t){switch(e.geo){case"x-box":return function(e,t,n,r){var i="draw"===r?.62:0;if("dashed"===r)return[[new Nl(0,0),new Nl(e/2,t/2)],[new Nl(e,t),new Nl(e/2,t/2)],[new Nl(0,t),new Nl(e/2,t/2)],[new Nl(e,0),new Nl(e/2,t/2)]];return[[new Nl(n*i,n*i),new Nl(e-n*i,t-n*i)],[new Nl(n*i,t-n*i),new Nl(e-n*i,n*i)]]}(e.w,e.h,t,e.dash);case"check-box":return function(e,t){var n=.82*Math.min(e,t),r=(e-n)/2,i=(t-n)/2;return[[new Nl(r+.25*n,i+.52*n),new Nl(r+.45*n,i+.82*n)],[new Nl(r+.45*n,i+.82*n),new Nl(r+.82*n,i+.22*n)]]}(e.w,e.h);default:return}}vt($g,"type","geo");var Jg=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"onPointerDown",(function(t){e.parent.transition("pointing",t)})),vt(_t(e),"onEnter",(function(){e.editor.setCursor({type:"cross"})})),vt(_t(e),"onKeyUp",(function(t){if("Enter"===t.key){var n=e.editor.onlySelectedShape;n&&e.editor.isShapeOfType(n,$g)&&(e.editor.mark("editing shape"),e.editor.setEditingId(n.id),e.editor.setSelectedTool("select.editing_shape",mt(mt({},t),{},{target:"shape",shape:n})))}})),vt(_t(e),"onCancel",(function(){e.editor.setSelectedTool("select")})),e}return oe(n)}(lv);vt(Jg,"id","idle");var Zg=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"onPointerMove",(function(t){if(e.editor.inputs.isDragging){var n=e.editor.inputs.originPagePoint,r=Os();e.editor.mark("creating"),e.editor.createShapes([{id:r,type:"geo",x:n.x,y:n.y,props:{w:1,h:1,geo:e.editor.getStyleForNextShape(Ru)}}]),e.editor.select(r),e.editor.setSelectedTool("select.resizing",mt(mt({},t),{},{target:"selection",handle:"bottom_right",isCreating:!0,creationCursorOffset:{x:1,y:1},onInteractionEnd:"geo"}))}})),vt(_t(e),"onPointerUp",(function(){e.complete()})),vt(_t(e),"onCancel",(function(){e.cancel()})),vt(_t(e),"onComplete",(function(){e.complete()})),vt(_t(e),"onInterrupt",(function(){e.cancel()})),e}return oe(n,[{key:"complete",value:function(){var e=this.editor.inputs.originPagePoint,t=Os();this.editor.mark("creating"),this.editor.createShapes([{id:t,type:"geo",x:e.x,y:e.y,props:{geo:this.editor.getStyleForNextShape(Ru),w:1,h:1}}]);var n=this.editor.getShapeById(t);if(n){var r="star"===n.props.geo?function(e,t,n){var r=zl/e/2,i=2*Math.floor(e/4),o=2*e-i,a=2*Math.floor(e/2),s=Math.cos(i*r-Dl)*t/2,u=Math.cos(o*r-Dl)*t/2,l=Math.sin(0*r-Dl)*n/2,c=Math.sin(a*r-Dl)*n/2;return new lc(0,0,s-u,c-l)}(5,200,200):new lc(0,0,200,200),i=this.editor.getDeltaInParentSpace(n,r.center);this.editor.select(t),this.editor.updateShapes([{id:n.id,type:"geo",x:n.x-i.x,y:n.y-i.y,props:{geo:this.editor.getStyleForNextShape(Ru),w:r.width,h:r.height}}]),this.editor.instanceState.isToolLocked?this.parent.transition("idle",{}):this.editor.setSelectedTool("select",{})}}},{key:"cancel",value:function(){this.parent.transition("idle",{})}}]),n}(lv);vt(Zg,"id","pointing");var em=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"shapeType",$g),e}return oe(n)}(lv);vt(em,"id","geo"),vt(em,"initial","idle"),vt(em,"children",(function(){return[Jg,Zg]}));var tm=sv("geo",{util:$g,props:Lu,migrations:Ku,tool:em}),nm=sv("group",{util:Eg,props:{},migrations:Vu}),rm=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"shapeType",cg),vt(_t(e),"onExit",(function(){e.children.drawing.initialShape=void 0})),e}return oe(n)}(lv);vt(rm,"id","highlight"),vt(rm,"initial","idle"),vt(rm,"children",(function(){return[mg,gg]}));var im=sv("highlight",{util:cg,props:Wu,migrations:Hu,tool:rm});function om(e){var t=Ml();return Il("isCropping",(function(){return t.croppingId===e}),[t,e])}var am=function(){var e=b(m().mark((function e(t){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new Image;r.onload=function(){return e(r)},r.onerror=function(){return n(new Error("Failed to load image"))},r.crossOrigin="anonymous",r.src=t})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),sm=function(){var e=b(m().mark((function e(t){var n,r,i;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,am(t);case 2:if(n=e.sent,(r=document.createElement("canvas")).width=n.width,r.height=n.height,i=r.getContext("2d")){e.next=9;break}return e.abrupt("return");case 9:return i.drawImage(n,0,0),e.abrupt("return",r.toDataURL());case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function um(e){return lm.apply(this,arguments)}function lm(){return lm=b(m().mark((function e(t){var n,r;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.blob();case 5:return r=e.sent,e.abrupt("return",new Promise((function(e,t){var n=new FileReader;n.onloadend=function(){return e(n.result)},n.onerror=t,n.readAsDataURL(r)})));case 7:case"end":return e.stop()}}),e)}))),lm.apply(this,arguments)}var cm=function(e){xt(r,e);var n=Et(r);function r(){var e;ne(this,r);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return vt(_t(e=n.call.apply(n,[this].concat(i))),"isAspectRatioLocked",(function(){return!0})),vt(_t(e),"canCrop",(function(){return!0})),vt(_t(e),"onDoubleClick",(function(t){var n=t.props.assetId?e.editor.getAssetById(t.props.assetId):void 0;n&&(n.props.src&&"mimeType"in n.props&&"image/gif"===n.props.mimeType&&e.editor.updateShapes([{type:"image",id:t.id,props:{playing:!t.props.playing}}]))})),vt(_t(e),"onDoubleClickEdge",(function(t){var n=t.props;if(n&&e.editor.croppingId===t.id){var r=Nr(n.crop)||{topLeft:{x:0,y:0},bottomRight:{x:1,y:1}},i=1/(r.bottomRight.x-r.topLeft.x)*t.props.w,o=1/(r.bottomRight.y-r.topLeft.y)*t.props.h,a=new Nl(r.topLeft.x*i,r.topLeft.y*o).rot(t.rotation),s={id:t.id,type:t.type,x:t.x-a.x,y:t.y-a.y,props:{crop:{topLeft:{x:0,y:0},bottomRight:{x:1,y:1}},w:i,h:o}};e.editor.updateShapes([s])}})),e}return oe(r,[{key:"defaultProps",value:function(){return{w:100,h:100,assetId:null,playing:!0,url:"",crop:null}}},{key:"component",value:function(e){var n,r,i=this,o=dm(e),a=om(e.id),s=ed(),u=l((0,t.useState)(""),2),c=u[0],d=u[1],h=e.props,p=h.w,v=h.h,g=e.props.assetId?this.editor.getAssetById(e.props.assetId):void 0;if("bookmark"===(null===g||void 0===g?void 0:g.type))throw Error("Bookmark assets can't be rendered as images");var y=Il("onlySelectedShape",(function(){var t;return e.id===(null===(t=i.editor.onlySelectedShape)||void 0===t?void 0:t.id)}),[this.editor])&&a&&this.editor.isInAny("select.crop","select.cropping","select.pointing_crop_handle"),w=s&&((null===g||void 0===g||null===(n=g.props.mimeType)||void 0===n?void 0:n.includes("video"))||(null===g||void 0===g||null===(r=g.props.mimeType)||void 0===r?void 0:r.includes("gif")));return(0,t.useEffect)((function(){if(null!==g&&void 0!==g&&g.props.src&&"mimeType"in g.props&&"image/gif"===(null===g||void 0===g?void 0:g.props.mimeType)){var e=!1,t=function(){var t=b(m().mark((function t(){var n;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,sm(g.props.src);case 2:if(n=t.sent,!e){t.next=5;break}return t.abrupt("return");case 5:n&&d(n);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return t(),function(){e=!0}}}),[s,null===g||void 0===g?void 0:g.props]),(0,f.jsxs)(f.Fragment,{children:[(null===g||void 0===g?void 0:g.props.src)&&y&&(0,f.jsx)("div",{style:o,children:(0,f.jsx)("div",{className:"tl-image tl-image-".concat(e.id,"-crop"),style:{opacity:.1,backgroundImage:"url(".concat(!e.props.playing||w?c:g.props.src,")")},draggable:!1})}),(0,f.jsx)(_h,{id:e.id,style:{overflow:"hidden"},children:(0,f.jsxs)("div",{className:"tl-image-container",style:o,children:[null!==g&&void 0!==g&&g.props.src?(0,f.jsx)("div",{className:"tl-image tl-image-".concat(e.id),style:{backgroundImage:"url(".concat(!e.props.playing||w?c:g.props.src,")")},draggable:!1}):(0,f.jsx)("g",{transform:"translate(".concat((p-38)/2,", ").concat((v-38)/2,")"),children:(0,f.jsx)(Ld,{})}),(null===g||void 0===g?void 0:g.props.isAnimated)&&!e.props.playing&&(0,f.jsx)("div",{className:"tl-image__tg",children:"GIF"})]})}),"url"in e.props&&e.props.url&&(0,f.jsx)(Xv,{url:e.props.url,zoomLevel:this.editor.zoomLevel})]})}},{key:"indicator",value:function(e){return om(e.id)?null:(0,f.jsx)("rect",{width:oc(e.props.w),height:oc(e.props.h)})}},{key:"toSvg",value:function(){var e=b(m().mark((function e(t){var n,r,i,o,a,s,u,l,c,d,f;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=document.createElementNS("http://www.w3.org/2000/svg","g"),r=t.props.assetId?this.editor.getAssetById(t.props.assetId):null,!(i=(null===r||void 0===r?void 0:r.props.src)||"")||!i.startsWith("http")){e.next=10;break}return e.next=6,um(i);case 6:if(e.t0=e.sent,e.t0){e.next=9;break}e.t0="";case 9:i=e.t0;case 10:return(o=document.createElementNS("http://www.w3.org/2000/svg","image")).setAttributeNS("http://www.w3.org/1999/xlink","href",i),a=dm(t),s=t.props.crop,a&&s?(u=a.transform,l=a.width,c=a.height,d=[new Nl(s.topLeft.x*l,s.topLeft.y*c),new Nl(s.bottomRight.x*l,s.topLeft.y*c),new Nl(s.bottomRight.x*l,s.bottomRight.y*c),new Nl(s.topLeft.x*l,s.bottomRight.y*c)],(f=document.createElementNS("http://www.w3.org/2000/svg","g")).style.clipPath="polygon(".concat(d.map((function(e){return"".concat(e.x,"px ").concat(e.y,"px")})).join(","),")"),o.setAttribute("width",l.toString()),o.setAttribute("height",c.toString()),o.style.transform=u,f.appendChild(o),n.appendChild(f)):(o.setAttribute("width",t.props.w.toString()),o.setAttribute("height",t.props.h.toString()),n.appendChild(o)),e.abrupt("return",n);case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(Rh);function dm(e){var t=e.props.crop,n=null===t||void 0===t?void 0:t.topLeft;if(n){var r=1/(t.bottomRight.x-t.topLeft.x)*e.props.w,i=1/(t.bottomRight.y-t.topLeft.y)*e.props.h,o=-n.x*r,a=-n.y*i;return{transform:"translate(".concat(o,"px, ").concat(a,"px)"),width:r,height:i}}}vt(cm,"type","image");var fm=sv("image",{util:cm,props:$u,migrations:Qu});function hm(e){for(var t=e.segments,n=[],r=0,i=t.length;r<i;r++){var o=t[r].lut,a=o.length-1;r>0?n.push(Nl.Lrp(o[0],o[1],.25)):n.push(o[0]);for(var s=1;s<a;s++)n.push(o[s]);r<i-1?n.push(Nl.Lrp(o[a-1],o[a],.75)):n.push(o[a])}return n}function pm(e){return{size:e,thinning:.4,streamline:0,smoothing:.5,simulatePressure:!0,last:!0}}function vm(e,t,n){return Sc(hm(t),pm(n))}function gm(e,t,n){var r=function(e,t,n){var r=pm(n);return wc(Cc(vm(0,t,n),r),r)}(0,t,n);return ad(r)}function mm(e,t,n,r){switch(e.props.dash){case"draw":return function(e){e.shape;var t=e.strokeWidth,n=e.spline,r=e.color,i=gm(0,n,t),o=document.createElementNS("http://www.w3.org/2000/svg","path");return o.setAttribute("stroke-width","0"),o.setAttribute("stroke","none"),o.setAttribute("fill",r),o.setAttribute("d",i),o}({shape:e,strokeWidth:r,spline:t,color:n});case"solid":return function(e){var t=e.strokeWidth,n=e.spline,r=e.color,i=n.path,o=document.createElementNS("http://www.w3.org/2000/svg","path");return o.setAttribute("stroke-width",t.toString()),o.setAttribute("stroke",r),o.setAttribute("fill","none"),o.setAttribute("d",i),o}({strokeWidth:r,spline:t,color:n});default:return function(e){var t=e.dash,n=e.strokeWidth,r=e.spline,i=e.color,o=r.segments,a=document.createElementNS("http://www.w3.org/2000/svg","g");return a.setAttribute("stroke",i),a.setAttribute("stroke-width",n.toString()),o.forEach((function(e,r){var i=document.createElementNS("http://www.w3.org/2000/svg","path"),s=fv(e.length,n,{style:t,start:r>0?"outset":"none",end:r<o.length-1?"outset":"none"}),u=s.strokeDasharray,l=s.strokeDashoffset;i.setAttribute("stroke-dasharray",u.toString()),i.setAttribute("stroke-dashoffset",l.toString()),i.setAttribute("d",e.path),i.setAttribute("fill","none"),a.appendChild(i)})),a}({strokeWidth:r,spline:t,dash:e.props.dash,color:n})}}var ym=new zh,bm=new zh,wm=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"hideResizeHandles",(function(){return!0})),vt(_t(e),"hideRotateHandle",(function(){return!0})),vt(_t(e),"hideSelectionBoundsBg",(function(){return!0})),vt(_t(e),"hideSelectionBoundsFg",(function(){return!0})),vt(_t(e),"isClosed",(function(){return!1})),vt(_t(e),"onResize",(function(e,t){var n=t.scaleX,r=t.scaleY,i=Nr(e.props.handles);return Object.values(e.props.handles).forEach((function(e){var t=e.id,o=e.x,a=e.y;i[t].x=o*n,i[t].y=a*r})),{props:{handles:i}}})),vt(_t(e),"onHandleChange",(function(e,t){var n=t.handle,r=Nr(e);switch(n.id){case"start":case"end":r.props.handles[n.id]=mt(mt({},r.props.handles[n.id]),{},{x:n.x,y:n.y});break;default:var i="handle:"+n.index,o=e.props.handles[i];r.props.handles[i]=o?mt(mt({},o),{},{x:n.x,y:n.y}):{id:i,type:"vertex",canBind:!1,index:n.index,x:n.x,y:n.y}}return r})),e}return oe(n,[{key:"defaultProps",value:function(){return{dash:"draw",size:"m",color:"black",spline:"line",handles:{start:{id:"start",type:"vertex",canBind:!1,index:"a1",x:0,y:0},end:{id:"end",type:"vertex",canBind:!1,index:"a2",x:0,y:0}}}}},{key:"getBounds",value:function(e){return xm(e).bounds}},{key:"getCenter",value:function(e){return this.bounds(e).center}},{key:"getHandles",value:function(e){return bm.get(e.props,(function(){for(var t=e.props.handles,n=xm(e),r=Object.values(t).sort(mr),i=r.slice(),o=0;o<n.segments.length;o++){var a=n.segments[o].midPoint,s=pr(r[o].index,r[o+1].index);i.push({id:"mid-".concat(o),type:"create",index:s,x:a.x,y:a.y})}return i.sort(mr)}))}},{key:"getOutline",value:function(e){return hm(xm(e))}},{key:"getOutlineSegments",value:function(e){var t=xm(e);return"cubic"===e.props.spline?t.segments.map((function(e){return e.lut})):t.segments.map((function(e){return[e.getPoint(0),e.getPoint(1)]}))}},{key:"hitTestPoint",value:function(e,t){var n=this.editor.zoomLevel,r=Kh[e.props.size]/n;return function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,r=t.length,i=1;i<r;i++){var o=t[i-1],a=t[i];if(Nl.DistanceToLineSegment(o,a,e)<n)return!0}return!1}(t,this.outline(e),r)}},{key:"hitTestLineSegment",value:function(e,t,n){return null!==jc(t,n,this.outline(e))}},{key:"component",value:function(e){var t=eg(),n=xm(e),r=Kh[e.props.size],i=e.props,o=i.dash,a=i.color;if("line"===e.props.spline){if("solid"===o){var s=n.points,u="M"+s[0]+"L"+s.slice(1);return(0,f.jsxs)(dv,{id:e.id,children:[(0,f.jsx)(hv,{d:u,fill:"none",color:a}),(0,f.jsx)("path",{d:u,stroke:"var(--palette-".concat(a,")"),strokeWidth:r,fill:"none"})]})}if("dashed"===o||"dotted"===o){var c=n.points,d="M"+c[0]+"L"+c.slice(1);return(0,f.jsxs)(dv,{id:e.id,children:[(0,f.jsx)(hv,{d:d,fill:"none",color:a}),(0,f.jsx)("g",{stroke:"var(--palette-".concat(a,")"),strokeWidth:r,children:n.segments.map((function(e,t){var i=fv(e.length,r,{style:o,start:t>0?"outset":"none",end:t<n.segments.length-1?"outset":"none"}),a=i.strokeDasharray,s=i.strokeDashoffset;return(0,f.jsx)("path",{strokeDasharray:a,strokeDashoffset:s,d:e.path,fill:"none"},t)}))})]})}if("draw"===o){var h=n.points,p=l(Fc(e.id,h,r),2),v=p[0],g=p[1];return(0,f.jsxs)(dv,{id:e.id,children:[(0,f.jsx)(hv,{d:v,fill:"none",color:a}),(0,f.jsx)("path",{d:g,stroke:"var(--palette-".concat(a,")"),strokeWidth:r,fill:"none"})]})}}if("cubic"===e.props.spline){var m=n.path;if("solid"===o||"draw"===o&&t)return(0,f.jsxs)(dv,{id:e.id,children:[(0,f.jsx)(hv,{d:m,fill:"none",color:a}),(0,f.jsx)("path",{strokeWidth:r,stroke:"var(--palette-".concat(a,")"),fill:"none",d:m})]});if("dashed"===o||"dotted"===o)return(0,f.jsxs)(dv,{id:e.id,children:[(0,f.jsx)(hv,{d:m,fill:"none",color:a}),(0,f.jsx)("g",{stroke:"var(--palette-".concat(a,")"),strokeWidth:r,children:n.segments.map((function(e,t){var i=fv(e.length,r,{style:o,start:t>0?"outset":"none",end:t<n.segments.length-1?"outset":"none"}),a=i.strokeDasharray,s=i.strokeDashoffset;return(0,f.jsx)("path",{strokeDasharray:a,strokeDashoffset:s,d:e.path,fill:"none"},t)}))})]});if("draw"===o)return(0,f.jsxs)(dv,{id:e.id,children:[(0,f.jsx)(hv,{d:m,fill:"none",color:a}),(0,f.jsx)("path",{d:gm(0,n,r),strokeWidth:1,stroke:"var(--palette-".concat(a,")"),fill:"var(--palette-".concat(a,")")})]})}}},{key:"indicator",value:function(e){var t,n=Kh[e.props.size],r=xm(e),i=e.props.dash;if("line"===e.props.spline){var o=r.points;if("solid"===i||"dotted"===i||"dashed"===i)t="M"+o[0]+"L"+o.slice(1);else t=l(Fc(e.id,o,n),1)[0]}else t=function(e,t,n){return"draw"===e.props.dash?sd(vm(0,t,n)):t.path}(e,r,n);return(0,f.jsx)("path",{d:t})}},{key:"toSvg",value:function(e,t,n){var r=e.props,i=r.color,o=r.size,a=n.fill[i];return mm(e,xm(e),a,Kh[o])}}]),n}(Oh);function xm(e){return ym.get(e.props,(function(){var t=e.props,n=t.spline,r=t.handles,i=Object.values(r).sort(mr).map(Nl.From);switch(n){case"cubic":return new vc(i,2===i.length?2:1.2,20);case"line":return new yc(i)}}))}vt(wm,"type","line");var km=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"shapeId",""),vt(_t(e),"onEnter",(function(t){e.shapeId=t.shapeId,e.editor.setCursor({type:"cross"})})),vt(_t(e),"onPointerDown",(function(){e.parent.transition("pointing",{shapeId:e.shapeId})})),vt(_t(e),"onCancel",(function(){e.editor.setSelectedTool("select")})),e}return oe(n)}(lv);vt(km,"id","idle");var Sm=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"shape",{}),vt(_t(e),"markPointId",""),vt(_t(e),"onEnter",(function(t){var n=e.editor.inputs,r=n.currentPagePoint;e.markPointId=e.editor.mark("creating");var i=!1;if(t.shapeId){var o=e.editor.getShapeById(t.shapeId);o&&(i=!0,e.shape=o)}if(n.shiftKey&&i){var a,s,u,l=e.editor.getShapeUtil(e.shape).handles(e.shape).filter((function(e){return"vertex"===e.type})).sort(mr),c=l[l.length-1],d=mc.applyToPoint(e.editor.getParentTransform(e.shape),new Nl(e.shape.x,e.shape.y));2===l.length&&1===l[1].x&&1===l[1].y?(a=l[1].index,s=l[1].id,u=mt(mt({},l[1]),{},{x:r.x-d.x,y:r.y-d.y})):(s="handle:"+(a=vr(c.index)),u={x:r.x-d.x,y:r.y-d.y,index:a,canBind:!1,type:"vertex",id:s});var f=Xr(e.shape.props.handles);f[u.id]=u,e.editor.updateShapes([{id:e.shape.id,type:e.shape.type,props:{handles:f}}])}else{var h=Os();e.editor.createShapes([{id:h,type:"line",x:r.x,y:r.y}]),e.editor.select(h),e.shape=e.editor.getShapeById(h)}})),vt(_t(e),"onPointerMove",(function(){if(e.shape&&e.editor.inputs.isDragging){var t,n=e.editor.getShapeUtil(e.shape),r=null===(t=n.handles)||void 0===t?void 0:t.call(n,e.shape);if(!r)throw e.editor.bailToMark("creating"),Error("No handles found");e.editor.setSelectedTool("select.dragging_handle",{shape:e.shape,isCreating:!0,handle:wr(r),onInteractionEnd:"line"})}})),vt(_t(e),"onPointerUp",(function(){e.complete()})),vt(_t(e),"onCancel",(function(){e.cancel()})),vt(_t(e),"onComplete",(function(){e.complete()})),vt(_t(e),"onInterrupt",(function(){e.parent.transition("idle",{}),e.editor.bailToMark("creating"),e.editor.snaps.clear()})),e}return oe(n,[{key:"complete",value:function(){this.parent.transition("idle",{shapeId:this.shape.id}),this.editor.snaps.clear()}},{key:"cancel",value:function(){this.editor.bailToMark(this.markPointId),this.parent.transition("idle",{shapeId:this.shape.id}),this.editor.snaps.clear()}}]),n}(lv);vt(Sm,"id","pointing");var _m=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"shapeType",wm),e}return oe(n)}(lv);vt(_m,"id","line"),vt(_m,"initial","idle"),vt(_m,"children",(function(){return[km,Sm]}));var Em=sv("line",{util:wm,props:el,migrations:tl,tool:_m}),Cm=200,Pm=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"canEdit",(function(){return!0})),vt(_t(e),"hideResizeHandles",(function(){return!0})),vt(_t(e),"hideSelectionBoundsBg",(function(){return!0})),vt(_t(e),"hideSelectionBoundsFg",(function(){return!0})),vt(_t(e),"onBeforeCreate",(function(t){return Im(e.editor,t,t.props.growY)})),vt(_t(e),"onBeforeUpdate",(function(t,n){if(t.props.text!==n.props.text||t.props.font!==n.props.font||t.props.size!==n.props.size)return Im(e.editor,n,t.props.growY)})),vt(_t(e),"onEditEnd",(function(t){var n=t.id,r=t.type,i=t.props.text;i.trimEnd()!==t.props.text&&e.editor.updateShapes([{id:n,type:r,props:{text:i.trimEnd()}}])})),e}return oe(n,[{key:"defaultProps",value:function(){return{color:"black",size:"m",text:"",font:"draw",align:"middle",verticalAlign:"middle",growY:0,url:""}}},{key:"getHeight",value:function(e){return Cm+e.props.growY}},{key:"getBounds",value:function(e){var t=this.getHeight(e);return new lc(0,0,Cm,t)}},{key:"getOutline",value:function(e){return this.bounds(e).corners}},{key:"getCenter",value:function(e){return new Nl(100,this.getHeight(e)/2)}},{key:"component",value:function(e){var t=e.id,n=e.type,r=e.props,i=r.color,o=r.font,a=r.size,s=r.align,u=r.text,l=r.verticalAlign,c="black"===i?"yellow":i;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{style:{position:"absolute",width:Cm,height:this.getHeight(e)},children:(0,f.jsxs)("div",{className:"tl-note__container tl-hitarea-fill",style:{color:"var(--palette-".concat(c,")"),backgroundColor:"var(--palette-".concat(c,")")},children:[(0,f.jsx)("div",{className:"tl-note__scrim"}),(0,f.jsx)(Tg,{id:t,type:n,font:o,size:a,align:s,verticalAlign:l,text:u,labelColor:c,wrap:!0})]})}),"url"in e.props&&e.props.url&&(0,f.jsx)(Xv,{url:e.props.url,zoomLevel:this.editor.zoomLevel})]})}},{key:"indicator",value:function(e){return(0,f.jsx)("rect",{rx:"7",width:oc(Cm),height:oc(this.getHeight(e))})}},{key:"toSvg",value:function(e,t,n){var r=this.bounds(e),i=document.createElementNS("http://www.w3.org/2000/svg","g"),o="black"===e.props.color?"yellow":e.props.color,a=document.createElementNS("http://www.w3.org/2000/svg","rect");a.setAttribute("rx","10"),a.setAttribute("width",Cm.toString()),a.setAttribute("height",r.height.toString()),a.setAttribute("fill",n.fill[o]),a.setAttribute("stroke",n.fill[o]),a.setAttribute("stroke-width","1"),i.appendChild(a);var s=document.createElementNS("http://www.w3.org/2000/svg","rect");s.setAttribute("rx","10"),s.setAttribute("width",Cm.toString()),s.setAttribute("height",r.height.toString()),s.setAttribute("fill",n.background),s.setAttribute("opacity",".28"),i.appendChild(s);var u=Ag({editor:this.editor,shape:e,font:t,bounds:r});return u.setAttribute("fill",n.text),u.setAttribute("stroke","none"),i.appendChild(u),i}}]),n}(Oh);function Im(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=e.textMeasure.measureText(t.props.text,mt(mt({},Uh),{},{fontFamily:Yh[t.props.font],fontSize:Wh[t.props.size],width:"166px"})).h+34,i=null;if(r>Cm?i=r-Cm:n&&(i=0),null!==i)return mt(mt({},t),{},{props:mt(mt({},t.props),{},{growY:i})})}vt(Pm,"type","note");var jm=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"onPointerDown",(function(t){e.parent.transition("pointing",t)})),vt(_t(e),"onEnter",(function(){e.editor.setCursor({type:"cross"})})),vt(_t(e),"onCancel",(function(){e.editor.setSelectedTool("select")})),e}return oe(n)}(lv);vt(jm,"id","idle");var Mm=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"dragged",!1),vt(_t(e),"info",{}),vt(_t(e),"wasFocusedOnEnter",!1),vt(_t(e),"markPointId","creating"),vt(_t(e),"onEnter",(function(){e.wasFocusedOnEnter=!e.editor.isMenuOpen})),vt(_t(e),"onPointerMove",(function(t){if(e.editor.inputs.isDragging){e.editor.mark(e.markPointId);var n=e.createShape();if(!n)return;e.editor.setSelectedTool("select.translating",mt(mt({},t),{},{target:"shape",shape:n,isCreating:!0,editAfterComplete:!0,onInteractionEnd:"note"}))}})),vt(_t(e),"onPointerUp",(function(){e.complete()})),vt(_t(e),"onInterrupt",(function(){e.cancel()})),vt(_t(e),"onComplete",(function(){e.complete()})),vt(_t(e),"onCancel",(function(){e.cancel()})),e}return oe(n,[{key:"complete",value:function(){if(this.wasFocusedOnEnter){this.editor.mark(this.markPointId);var e=this.createShape();if(this.editor.instanceState.isToolLocked)this.parent.transition("idle",{});else{if(!e)return;this.editor.setEditingId(e.id),this.editor.setSelectedTool("select.editing_shape",mt(mt({},this.info),{},{target:"shape",shape:e}))}}}},{key:"cancel",value:function(){this.editor.bailToMark(this.markPointId),this.parent.transition("idle",this.info)}},{key:"createShape",value:function(){var e=this.editor.inputs.originPagePoint,t=Os();this.editor.createShapes([{id:t,type:"note",x:e.x,y:e.y}],!0);var n=this.editor.getShapeUtil(Pm),r=this.editor.getShapeById(t),i=n.bounds(r);return this.editor.updateShapes([{id:t,type:"note",x:r.x-i.width/2,y:r.y-i.height/2}]),this.editor.getShapeById(t)}}]),n}(lv);vt(Mm,"id","pointing");var Am=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"shapeType",Pm),e}return oe(n)}(lv);vt(Am,"id","note"),vt(Am,"initial","idle"),vt(Am,"children",(function(){return[jm,Mm]}));var Tm=sv("note",{util:Pm,props:il,migrations:ul,tool:Am}),Om=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"onPointerEnter",(function(t){switch(t.target){case"canvas":break;case"shape":var n=e.editor,r=n.selectedIds,i=n.focusLayerId,o=e.editor.getOutermostSelectableShape(t.shape,(function(e){return!r.includes(e.id)}));o.id!==i&&e.editor.isShapeOfType(o,Jh)&&e.editor.setHoveredId(o.id)}})),vt(_t(e),"onPointerLeave",(function(t){if("shape"===t.target)e.editor.setHoveredId(null)})),vt(_t(e),"onPointerDown",(function(t){var n=e.editor.hoveredId;if(n){var r=e.editor.getShapeById(n);if(e.editor.isShapeOfType(r,Jh))return void requestAnimationFrame((function(){e.editor.setSelectedIds([r.id]),e.editor.setEditingId(r.id),e.editor.setSelectedTool("select.editing_shape",mt(mt({},t),{},{target:"shape",shape:r}))}))}e.parent.transition("pointing",t)})),vt(_t(e),"onEnter",(function(){e.editor.setCursor({type:"cross"})})),vt(_t(e),"onKeyDown",(function(t){if("Enter"===t.key){var n=e.editor.selectedShapes[0];n&&e.editor.isShapeOfType(n,$g)&&(e.editor.setSelectedTool("select"),e.editor.setEditingId(n.id),e.editor.root.current.value.transition("editing_shape",mt(mt({},t),{},{target:"shape",shape:n})))}})),vt(_t(e),"onCancel",(function(){e.editor.setSelectedTool("select")})),e}return oe(n)}(lv);vt(Om,"id","idle");var Nm=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"shape",void 0),vt(_t(e),"onExit",(function(){e.editor.setHintingIds([])})),vt(_t(e),"onPointerMove",(function(t){if(e.editor.inputs.isDragging){var n=e.editor.inputs.originPagePoint,r=Os();if(e.editor.mark("creating"),e.editor.createShapes([{id:r,type:"text",x:n.x,y:n.y,props:{text:"",autoSize:!1,w:20}}]),e.editor.select(r),e.shape=e.editor.getShapeById(r),!e.shape)return;e.editor.setSelectedTool("select.resizing",mt(mt({},t),{},{target:"selection",handle:"right",isCreating:!0,creationCursorOffset:{x:1,y:1},editAfterComplete:!0,onInteractionEnd:"text"}))}})),vt(_t(e),"onPointerUp",(function(){e.complete()})),vt(_t(e),"onComplete",(function(){e.cancel()})),vt(_t(e),"onCancel",(function(){e.cancel()})),vt(_t(e),"onInterrupt",(function(){e.cancel()})),e}return oe(n,[{key:"complete",value:function(){var e;this.editor.mark("creating text shape");var t=Os(),n=this.editor.inputs.currentPagePoint,r=n.x,i=n.y;this.editor.createShapes([{id:t,type:"text",x:r,y:i,props:{text:"",autoSize:!0}}],!0),this.editor.setEditingId(t),this.editor.setSelectedTool("select"),null===(e=this.editor.root.current.value)||void 0===e||e.transition("editing_shape",{})}},{key:"cancel",value:function(){this.parent.transition("idle",{}),this.editor.bailToMark("creating")}}]),n}(lv);vt(Nm,"id","pointing");var Rm=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"shapeType",Jh),e}return oe(n)}(lv);vt(Rm,"id","text"),vt(Rm,"initial","idle"),vt(Rm,"children",(function(){return[Om,Nm]}));var Lm=sv("text",{util:Jh,props:ll,migrations:dl,tool:Rm}),Dm=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"canEdit",(function(){return!0})),vt(_t(e),"isAspectRatioLocked",(function(){return!0})),e}return oe(n,[{key:"defaultProps",value:function(){return{w:100,h:100,assetId:null,time:0,playing:!0,url:""}}},{key:"component",value:function(e){return(0,f.jsx)(Bm,{shape:e,videoUtil:this})}},{key:"indicator",value:function(e){return(0,f.jsx)("rect",{width:oc(e.props.w),height:oc(e.props.h)})}},{key:"toSvg",value:function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","g"),n=document.createElementNS("http://www.w3.org/2000/svg","image");return n.setAttributeNS("http://www.w3.org/1999/xlink","href",function(e){var t=e.split(":")[1],n=document.querySelector(".tl-video-shape-".concat(t));if(n){var r=document.createElement("canvas");return r.width=n.videoWidth,r.height=n.videoHeight,r.getContext("2d").drawImage(n,0,0),r.toDataURL("image/png")}throw new Error("Video with id "+t+" not found")}(e.id)),n.setAttribute("width",e.props.w.toString()),n.setAttribute("height",e.props.h.toString()),t.appendChild(n),t}}]),n}(Rh);vt(Dm,"type","video");var zm,Bm=Pl((function(e){var n=e.shape,r=e.videoUtil,i=r.editor.getBounds(n).w*r.editor.zoomLevel>=110,o=n.props.assetId?r.editor.getAssetById(n.props.assetId):null,a=n.props,s=a.w,u=a.h,c=a.time,d=a.playing,h=Eh(n.id),p=ed(),v=t.useRef(null),g=t.useCallback((function(e){var t=e.currentTarget;r.editor.updateShapes([{type:"video",id:n.id,props:{playing:!0,time:t.currentTime}}])}),[n.id,r.editor]),m=t.useCallback((function(e){var t=e.currentTarget;r.editor.updateShapes([{type:"video",id:n.id,props:{playing:!1,time:t.currentTime}}])}),[n.id,r.editor]),y=t.useCallback((function(e){var t=e.currentTarget;h&&r.editor.updateShapes([{type:"video",id:n.id,props:{time:t.currentTime}}])}),[h,n.id,r.editor]),b=l(t.useState(!1),2),w=b[0],x=b[1],k=t.useCallback((function(e){var t=e.currentTarget;c!==t.currentTime&&(t.currentTime=c),d||t.pause(),x(!0)}),[d,c]);return t.useEffect((function(){var e=v.current;e&&w&&!h&&c!==e.currentTime&&(e.currentTime=c)}),[h,w,c]),t.useEffect((function(){if(p){var e=v.current;e.pause(),e.currentTime=0}}),[v,p]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(_h,{id:n.id,children:(0,f.jsx)("div",{className:"tl-counter-scaled",children:null!==o&&void 0!==o&&o.props.src?(0,f.jsx)("video",{ref:v,className:"tl-video tl-video-shape-".concat(n.id.split(":")[1]," tl-hitarea-stroke"),width:"100%",height:"100%",draggable:!1,playsInline:!0,autoPlay:!0,muted:!0,loop:!0,disableRemotePlayback:!0,disablePictureInPicture:!0,controls:h&&i,onPlay:g,onPause:m,onTimeUpdate:y,onLoadedData:k,hidden:!w,children:(0,f.jsx)("source",{src:o.props.src})}):(0,f.jsx)("g",{transform:"translate(".concat((s-38)/2,", ").concat((u-38)/2,")"),children:(0,f.jsx)(Ld,{})})})}),"url"in n.props&&n.props.url&&(0,f.jsx)(Xv,{url:n.props.url,zoomLevel:r.editor.zoomLevel})]})})),Fm=sv("video",{util:Dm,props:hl,migrations:vl}),Um=[nm,wg,Zv,fm,Lm],Km=[bg,tm,Em,Tm,Mg,Yv,im,Fm],Vm=new Set(Um.map((function(e){return e.type})));function Wm(e){var t,n=[].concat(Um),r=new Set,i=w(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;if(Vm.has(o.type))throw new Error('Shape type "'.concat(o.type,'" is a core shapes type and cannot be overridden'));if(r.has(o.type))throw new Error('Shape type "'.concat(o.type,'" is defined more than once'));n.push(o),r.add(o.type)}}catch(a){i.e(a)}finally{i.f()}return n}function Hm(e,t){if(!t)return!1;switch(e.type){case"mixed":return"mixed"===t.type;case"shared":return"shared"===t.type&&e.value===t.value;default:throw Sr(e)}}zm=Symbol.iterator;var Ym=function(){function e(t){ne(this,e),vt(this,"map",void 0),this.map=new Map(t)}return oe(e,[{key:"get",value:function(e){return this.map.get(e)}},{key:"getAsKnownValue",value:function(e){var t=this.get(e);if(t&&"mixed"!==t.type)return t.value}},{key:"size",get:function(){return this.map.size}},{key:"equals",value:function(e){if(this.size!==e.size)return!1;var t,n=new Set,r=w(this);try{for(r.s();!(t=r.n()).done;){var i=l(t.value,2),o=i[0];if(!Hm(i[1],e.get(o)))return!1;n.add(o)}}catch(f){r.e(f)}finally{r.f()}var a,s=w(e);try{for(s.s();!(a=s.n()).done;){var u=l(a.value,2),c=u[0],d=u[1];if(!n.has(c)&&!Hm(d,this.get(c)))return!1}}catch(f){s.e(f)}finally{s.f()}return!0}},{key:"keys",value:function(){return this.map.keys()}},{key:"values",value:function(){return this.map.values()}},{key:"entries",value:function(){return this.map.entries()}},{key:zm,value:function(){return this.map[Symbol.iterator]()}}]),e}(),qm=function(e){xt(n,e);var t=Et(n);function n(){return ne(this,n),t.apply(this,arguments)}return oe(n,[{key:"set",value:function(e,t){this.map.set(e,t)}},{key:"applyValue",value:function(e,t){var n=this.get(e);if(n)switch(n.type){case"mixed":return;case"shared":return void(n.value!==t&&this.set(e,{type:"mixed"}));default:Sr(n,"type")}else this.set(e,{type:"shared",value:t})}}]),n}(Ym);function Xm(e,t){for(var n=0;e[t+n];)n+=e[t+n]+1;return n+1}function $m(e){var t,n,r=new Uint8Array(e),i=0,o=0;if(!function(e){return"GIF"===new TextDecoder("ascii").decode(e.slice(0,3))}(e))return!1;for(t=128&r[10],n=7&r[10],i+=6,i+=7,i+=t?3*Math.pow(2,n+1):0;o<2&&i<r.length;)switch(r[i]){case 44:o+=1,t=128&r[i+9],n=7&r[i+9],i+=10,i+=t?3*Math.pow(2,n+1):0,i+=Xm(r,i+1)+1;break;case 33:i+=2,i+=Xm(r,i);break;default:i=r.length}return o>1}var Gm=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];"undefined"!==typeof Int32Array&&(Gm=new Int32Array(Gm));var Qm=function(e,t){for(var n=0===t?0:-1^~~t,r=0;r<e.length;r++)n=Gm[255&(n^e[r])]^n>>>8;return-1^n},Jm=n(9778),Zm=function(e,t){return Jm.lW.from(e,t)};var ey=function(e,t){var n=function(e,n){return t(Zm(e),n)>>>0};return n.signed=function(e,n){return t(Zm(e),n)},n.unsigned=n,n.model=e,n}("crc-32",Qm);function ty(e,t){return 137===e.getUint8(t+0)&&80===e.getUint8(t+1)&&78===e.getUint8(t+2)&&71===e.getUint8(t+3)&&13===e.getUint8(t+4)&&10===e.getUint8(t+5)&&26===e.getUint8(t+6)&&10===e.getUint8(t+7)}function ny(e,t){return[String.fromCharCode(e.getUint8(t)),String.fromCharCode(e.getUint8(t+1)),String.fromCharCode(e.getUint8(t+2)),String.fromCharCode(e.getUint8(t+3))].join("")}var ry=4,iy=4;function oy(e,t){return{ppux:e.getUint32(t),ppuy:e.getUint32(t+4),unit:e.getUint8(t+4)}}function ay(e,t){var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={};if(!ty(e,t))throw new Error("Not a PNG");for(t+=8;t<=e.buffer.byteLength;){var r=t,i=e.getInt32(t),o=ny(e,t+=4);if("IDAT"===o&&n[o])t+=i+ry+iy;else{if("IEND"===o)break;n[o]={start:r,dataOffset:t+4,size:i},t+=i+ry+iy}}return n}(e);return n[t]}function sy(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,r=46,i=0,o=ay(e,"pHYs");o&&(r=o.start,i=o.size);var a=ay(e,"IDAT");a&&(r=a.start,i=0);var s=new ArrayBuffer(21),u=new DataView(s);u.setUint32(0,9),u.setUint8(4,"p".charCodeAt(0)),u.setUint8(5,"H".charCodeAt(0)),u.setUint8(6,"Y".charCodeAt(0)),u.setUint8(7,"s".charCodeAt(0));var l=2835.5;u.setInt32(8,l*t),u.setInt32(12,l*t),u.setInt8(16,1);var c=new Uint8Array(s.slice(4,17));u.setInt32(17,ey(c));var d=e.buffer.slice(0,r),f=e.buffer.slice(r+i);return new Blob([d,s,f],n)}var uy=["image/jpeg","image/png","image/gif","image/svg+xml"],ly=["video/mp4","video/quicktime"],cy=uy.concat(ly).join(", "),dy=function(e){return uy.includes(e)};function fy(e){return hy.apply(this,arguments)}function hy(){return hy=b(m().mark((function e(t){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,n){var r=document.createElement("video");r.onloadeddata=function(){return e({w:r.videoWidth,h:r.videoHeight})},r.onerror=function(e){console.error(e),n(new Error("Could not get video size"))},r.crossOrigin="anonymous",r.src=t}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),hy.apply(this,arguments)}function py(e){return vy.apply(this,arguments)}function vy(){return(vy=b(m().mark((function e(t){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(t).then((function(e){return e.arrayBuffer()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gy(e){return my.apply(this,arguments)}function my(){return my=b(m().mark((function e(t){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,n){var r=new Image;r.onload=b(m().mark((function n(){var i,o,a,s,u;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,py(t);case 3:if(i=n.sent,!ty(o=new DataView(i),0)){n.next=13;break}if(!(a=ay(o,"pHYs"))){n.next=13;break}if(0!==(s=oy(o,a.dataOffset)).unit||s.ppux!==s.ppuy){n.next=13;break}return u=Math.round(s.ppux/2834.5),e({w:r.width/u,h:r.height/u}),n.abrupt("return");case 13:e({w:r.width,h:r.height}),n.next=20;break;case 16:n.prev=16,n.t0=n.catch(0),console.error(n.t0),e({w:r.width,h:r.height});case 20:case"end":return n.stop()}}),n,null,[[0,16]])}))),r.onerror=function(e){console.error(e),n(new Error("Could not get image size"))},r.crossOrigin="anonymous",r.src=t}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),my.apply(this,arguments)}function yy(e,t,n){return by.apply(this,arguments)}function by(){return by=b(m().mark((function e(t,n,r){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){var i=new Image;i.onload=function(){var t=document.createElement("canvas"),o=t.getContext("2d");if(o){t.width=2*n,t.height=2*r,o.drawImage(i,0,0,t.width,t.height);var a=t.toDataURL();e(a)}},i.crossOrigin="anonymous",i.src=t}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),by.apply(this,arguments)}function wy(e){return xy.apply(this,arguments)}function xy(){return xy=b(m().mark((function e(t){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("image/gif"!==t.type){e.next=4;break}return e.next=3,new Promise((function(e,n){var r=new FileReader;r.onerror=function(){return n(r.error)},r.onload=function(){e({isAnimated:!!r.result&&$m(r.result)})},r.readAsArrayBuffer(t)}));case 3:return e.abrupt("return",e.sent);case 4:return e.abrupt("return",{isAnimated:!dy(t.type)});case 5:case"end":return e.stop()}}),e)}))),xy.apply(this,arguments)}function ky(e,t){var n=e.w/t.w,r=e.h/t.h;return n<=1&&r<=1?e:n>r?{w:e.w/n,h:e.h/n}:{w:e.w/r,h:e.h/r}}function Sy(e,t,n){return fetch(e).then((function(e){return e.arrayBuffer()})).then((function(e){return new File([e],t,{type:n})}))}function _y(e){var t=e.editor,n=t.selectionRotation,r=t.selectionPageCenter,i=t.inputs.originPagePoint,o=t.selectedShapes;return{selectionPageCenter:r,initialCursorAngle:r.angle(i),initialSelectionRotation:n,shapeSnapshots:o.map((function(e){return{shape:Xr(e),initialPagePoint:t.getPagePointById(e.id)}}))}}function Ey(e){var t=e.delta,n=e.editor,r=e.snapshot,i=e.stage,o=r.selectionPageCenter,a=r.shapeSnapshots;n.updateShapes(a.map((function(e){var r=e.shape,i=e.initialPagePoint,a=Ts(r.parentId)?n.getPageTransformById(r.parentId):mc.Identity(),s=Nl.RotWith(i,o,t),u=mc.applyToPoint(mc.Inverse(a),s),l=Hl(r.rotation+t);return{id:r.id,type:r.type,x:u.x,y:u.y,rotation:l}})));var s=[];a.forEach((function(e){var t,r=e.shape,o=n.getShapeById(r.id);if(o){var a=n.getShapeUtil(r);if("start"===i||"one-off"===i){var u,l=null===(u=a.onRotateStart)||void 0===u?void 0:u.call(a,r);l&&s.push(l)}var c=null===(t=a.onRotate)||void 0===t?void 0:t.call(a,r,o);if(c&&s.push(c),"end"===i||"one-off"===i){var d,f=null===(d=a.onRotateEnd)||void 0===d?void 0:d.call(a,r,o);f&&s.push(f)}}})),s.length>0&&n.updateShapes(s)}var Cy=function(e,t,n){for(;!Vo(n.parentId);){var r=e.get(n.parentId);if(!r)return!1;n=r}return n.parentId===t},Py={top:10,left:10,bottom:10,right:10};function Iy(e){var t=e.getContainer(),n=t.querySelector('*[data-tldraw-area="active-drawing"]'),r=mt(mt({},Py),{},{width:0,height:0});if(n&&t){var i=t.getBoundingClientRect(),o=n.getBoundingClientRect();r.top=o.top,r.left=o.left,r.bottom=i.height-o.bottom,r.right=i.width-o.right}return r.width=e.viewportScreenBounds.width-r.left-r.right,r.height=e.viewportScreenBounds.height-r.top-r.bottom,r}var jy,My,Ay=oe((function e(t){var n=this;ne(this,e),vt(this,"offsets",eo("activeAreaOffsets",Py)),vt(this,"updateOffsets",(function(){var e=function(e){var t=Iy(e),n=e.zoomLevel;return t.left/=n,t.right/=n,t.top/=n,t.bottom/=n,t.width/=n,t.height/=n,t}(n.editor);n.offsets.set(e)})),vt(this,"dispose",(function(){window.addEventListener("resize",n.updateOffsets)})),this.editor=t,window.addEventListener("resize",this.updateOffsets),this.editor.disposables.add(this.dispose)})),Ty=function(){function e(t){var n=this;ne(this,e),vt(this,"_clickId",""),vt(this,"_clickTimeout",void 0),vt(this,"_clickScreenPoint",void 0),vt(this,"_previousScreenPoint",void 0),vt(this,"_getClickTimeout",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bp();n._clickId=t,clearTimeout(n._clickTimeout),n._clickTimeout=setTimeout((function(){if(n._clickState===e&&n._clickId===t){switch(n._clickState){case"pendingTriple":n.editor.dispatch(mt(mt({},n.lastPointerInfo),{},{type:"click",name:"double_click",phase:"settle"}));break;case"pendingQuadruple":n.editor.dispatch(mt(mt({},n.lastPointerInfo),{},{type:"click",name:"triple_click",phase:"settle"}));break;case"pendingOverflow":n.editor.dispatch(mt(mt({},n.lastPointerInfo),{},{type:"click",name:"quadruple_click",phase:"settle"}))}n._clickState="idle"}}),"idle"===e||"pendingDouble"===e?450:200)})),vt(this,"_clickState","idle"),vt(this,"lastPointerInfo",{}),vt(this,"transformPointerDownEvent",(function(e){if(!n._clickState)return e;switch(n._clickScreenPoint=Nl.From(e.point),n._previousScreenPoint&&n._previousScreenPoint.dist(n._clickScreenPoint)>40&&(n._clickState="idle"),n._previousScreenPoint=n._clickScreenPoint,n.lastPointerInfo=e,n._clickState){case"idle":return n._clickState="pendingDouble",n._clickTimeout=n._getClickTimeout(n._clickState),e;case"pendingDouble":return n._clickState="pendingTriple",n._clickTimeout=n._getClickTimeout(n._clickState),mt(mt({},e),{},{type:"click",name:"double_click",phase:"down"});case"pendingTriple":return n._clickState="pendingQuadruple",n._clickTimeout=n._getClickTimeout(n._clickState),mt(mt({},e),{},{type:"click",name:"triple_click",phase:"down"});case"pendingQuadruple":return n._clickState="pendingOverflow",n._clickTimeout=n._getClickTimeout(n._clickState),mt(mt({},e),{},{type:"click",name:"quadruple_click",phase:"down"});case"pendingOverflow":return n._clickState="overflow",n._clickTimeout=n._getClickTimeout(n._clickState),e;default:return n._clickTimeout=n._getClickTimeout(n._clickState),e}})),vt(this,"transformPointerUpEvent",(function(e){if(!n._clickState)return e;switch(n._clickScreenPoint=Nl.From(e.point),n._clickState){case"pendingTriple":return mt(mt({},n.lastPointerInfo),{},{type:"click",name:"double_click",phase:"up"});case"pendingQuadruple":return mt(mt({},n.lastPointerInfo),{},{type:"click",name:"triple_click",phase:"up"});case"pendingOverflow":return mt(mt({},n.lastPointerInfo),{},{type:"click",name:"quadruple_click",phase:"up"});default:return e}})),vt(this,"cancelDoubleClickTimeout",(function(){n._clickTimeout=clearTimeout(n._clickTimeout),n._clickState="idle"})),vt(this,"handleMove",(function(){"idle"!==n._clickState&&n._clickScreenPoint&&n._clickScreenPoint.dist(n.editor.inputs.currentScreenPoint)>(n.editor.isCoarsePointer?6:4)&&n.cancelDoubleClickTimeout()})),this.editor=t}return oe(e,[{key:"clickState",get:function(){return this._clickState}}]),e}(),Oy=function(){function e(t){var n=this;ne(this,e),vt(this,"_currentMM",void 0),vt(this,"dpr",eo("devicePixelRatio","undefined"===typeof window?1:window.devicePixelRatio)),vt(this,"updateDevicePixelRatio",(function(){n.dpr.set(window.devicePixelRatio),n.rebind()})),vt(this,"dispose",(function(){var e;null===(e=n._currentMM)||void 0===e||e.removeEventListener("change",n.updateDevicePixelRatio)})),this.editor=t,this.rebind(),this.editor.disposables.add(this.dispose)}return oe(e,[{key:"rebind",value:function(){var e;this.dispose(),this._currentMM=this.getMedia(),null===(e=this._currentMM)||void 0===e||e.addEventListener("change",this.updateDevicePixelRatio)}},{key:"getMedia",value:function(){if(window.matchMedia)return matchMedia("(resolution: ".concat(window.devicePixelRatio,"dppx)"))}}]),e}(),Ny=function(){function e(t){var n=this;ne(this,e),vt(this,"handleContent",function(){var e=b(m().mark((function e(t){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.type,e.next="text"===e.t0?3:"files"===e.t0?6:"embed"===e.t0?9:"svg-text"===e.t0?12:"url"===e.t0?15:18;break;case 3:return e.next=5,n.handleText(n.editor,t);case 5:case 8:case 11:case 14:case 17:return e.abrupt("return",e.sent);case 6:return e.next=8,n.handleFiles(n.editor,t);case 9:return e.next=11,n.handleEmbed(n.editor,t);case 12:return e.next=14,n.handleSvgText(n.editor,t);case 15:return e.next=17,n.handleUrl(n.editor,t);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),vt(this,"handleUrl",function(){var e=b(m().mark((function e(t,r){var i,o,a,s,u,l,c;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=r.point,o=r.url,!(a=jh(o))){e.next=4;break}return e.abrupt("return",n.handleEmbed(t,{type:"embed",url:a.url,point:i,embed:a.definition}));case 4:if(s=null!==i&&void 0!==i?i:t.inputs.shiftKey?t.inputs.currentPagePoint:t.viewportPageCenter,u=ks.createId(jr(o)),l=t.getAssetById(u),c=!1,l){e.next=13;break}return c=!0,e.next=12,n.createAssetFromUrl(t,o);case 12:l=e.sent;case 13:t.batch((function(){c&&t.createAssets([l]),n.createShapesForAssets(t,[l],s)}));case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.editor=t}return oe(e,[{key:"handleSvgText",value:function(){var e=b(m().mark((function e(t,n){var r,i,o,a,s,u,l,c;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.point,i=n.text,o=null!==r&&void 0!==r?r:t.inputs.shiftKey?t.inputs.currentPagePoint:t.viewportPageCenter,a=(new DOMParser).parseFromString(i,"image/svg+xml").querySelector("svg")){e.next=5;break}throw new Error("No <svg/> element present");case 5:return s=parseFloat(a.getAttribute("width")||"0"),u=parseFloat(a.getAttribute("height")||"0"),s&&u||(document.body.appendChild(a),l=a.getBoundingClientRect(),document.body.removeChild(a),s=l.width,u=l.height),e.next=10,this.createAssetFromFile(t,new File([i],"asset.svg",{type:"image/svg+xml"}));case 10:c=e.sent,this.createShapesForAssets(t,[c],o);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"handleEmbed",value:function(){var e=b(m().mark((function e(t,n){var r,i,o,a,s,u,l;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.point,i=n.url,o=n.embed,a=null!==r&&void 0!==r?r:t.inputs.shiftKey?t.inputs.currentPagePoint:t.viewportPageCenter,s=o.width,u=o.height,l={id:Os(),type:"embed",x:a.x-(s||450)/2,y:a.y-(u||450)/2,props:{w:s,h:u,url:i}},t.createShapes([l],!0);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"handleFiles",value:function(){var e=b(m().mark((function e(t,n){var r,i,o,a,s,u=this;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.point,i=n.files,o=null!==r&&void 0!==r?r:t.inputs.shiftKey?t.inputs.currentPagePoint:t.viewportPageCenter,a=new Nl(o.x,o.y),s=[],e.next=6,Promise.all(i.map(function(){var e=b(m().mark((function e(n,r){var i;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.type){e.next=2;break}throw new Error("No mime type");case 2:if(uy.concat(ly).includes(n.type)){e.next=5;break}return console.warn("".concat(n.name," not loaded - Extension not allowed.")),e.abrupt("return",null);case 5:return e.prev=5,e.next=8,u.createAssetFromFile(t,n);case 8:if(i=e.sent){e.next=11;break}throw Error("Could not create an asset");case 11:s[r]=i,e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(5),console.error(e.t0),e.abrupt("return",null);case 18:case"end":return e.stop()}}),e,null,[[5,14]])})));return function(t,n){return e.apply(this,arguments)}}()));case 6:this.createShapesForAssets(t,br(s),a);case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"handleText",value:function(){var e=b(m().mark((function e(t,n){var r,i,o,a,s,u,l,c,d,f,h,p,v,g;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.point,i=n.text,o=null!==r&&void 0!==r?r:t.inputs.shiftKey?t.inputs.currentPagePoint:t.viewportPageCenter,a=t.getShapeUtil(Jh).defaultProps(),s=zy(Dy(Ly(i))),d="middle",f=s.split("\n").length>1,h=Ry.test(s),f&&(d=f?h?"end":"start":"middle"),p=t.textMeasure.measureText(s,mt(mt({},Uh),{},{fontFamily:Yh[a.font],fontSize:Vh[a.size],width:"fit-content"})),v=Math.min(f?.9*t.viewportPageBounds.width:920,Math.max(200,.9*t.viewportPageBounds.width)),p.w>v?(g=t.textMeasure.measureText(s,mt(mt({},Uh),{},{fontFamily:Yh[a.font],fontSize:Vh[a.size],width:v+"px"})),u=g.w,l=g.h,c=!1,d=h?"end":"start"):(u=p.w,l=p.h,c=!0),o.y-l/2<t.viewportPageBounds.minY+40&&(o.y=t.viewportPageBounds.minY+40+l/2),t.createShapes([{id:Os(),type:"text",x:o.x-u/2,y:o.y-l/2,props:{text:s,align:d,autoSize:c,w:u}}]);case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createShapesForAssets",value:function(){var e=b(m().mark((function e(t,n,r){var i,o,a,s,u;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.length){e.next=2;break}return e.abrupt("return");case 2:i=Nl.From(r),o=[],a=w(n),e.prev=5,a.s();case 7:if((s=a.n()).done){e.next=22;break}u=s.value,e.t0=u.type,e.next="bookmark"===e.t0?12:"image"===e.t0?15:"video"===e.t0?18:20;break;case 12:return o.push({id:Os(),type:"bookmark",x:i.x-150,y:i.y-160,opacity:1,props:{assetId:u.id,url:u.props.src}}),i.x+=300,e.abrupt("break",20);case 15:return o.push({id:Os(),type:"image",x:i.x-u.props.w/2,y:i.y-u.props.h/2,opacity:1,props:{assetId:u.id,w:u.props.w,h:u.props.h}}),i.x+=u.props.w,e.abrupt("break",20);case 18:o.push({id:Os(),type:"video",x:i.x-u.props.w/2,y:i.y-u.props.h/2,opacity:1,props:{assetId:u.id,w:u.props.w,h:u.props.h}}),i.x+=u.props.w;case 20:e.next=7;break;case 22:e.next=27;break;case 24:e.prev=24,e.t1=e.catch(5),a.e(e.t1);case 27:return e.prev=27,a.f(),e.finish(27);case 30:t.batch((function(){var e=n.filter((function(e){return!t.getAssetById(e.id)}));e.length&&t.createAssets(e),t.createShapes(o,!0);var i=t.viewportPageBounds,a=t.selectedPageBounds;if(a){var s=a.center.sub(r);t.updateShapes(o.map((function(e){return{id:e.id,type:e.type,x:e.x-s.x,y:e.y-s.y}})))}(a=t.selectedPageBounds)&&!i.contains(a)&&t.zoomToSelection()}));case 31:case"end":return e.stop()}}),e,null,[[5,24,27,30]])})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"createAssetFromFile",value:function(){var e=b(m().mark((function e(t,n){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,t){var r=new FileReader;r.onerror=function(){return t(r.error)},r.onload=b(m().mark((function t(){var i,o,a,s,u,l,c,d;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=r.result,o=dy(n.type),a=o?gy:fy,"video/quicktime"===n.type&&i.includes("video/quicktime")&&(i=i.replace("video/quicktime","video/mp4")),t.next=6,a(i);case 6:if(s=t.sent,(u=ky(s,{w:1e3,h:1e3}))===s||"image/jpeg"!==n.type&&"image/png"!==n.type){t.next=12;break}return t.next=11,yy(i,u.w,u.h);case 11:i=t.sent;case 12:return l=ks.createId(jr(i)),t.next=15,wy(n);case 15:c=t.sent,d={id:l,type:o?"image":"video",typeName:"asset",props:{name:n.name,src:i,w:u.w,h:u.h,mimeType:n.type,isAnimated:c.isAnimated}},e(d);case 18:case"end":return t.stop()}}),t)}))),r.readAsDataURL(n)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createAssetFromUrl",value:function(){var e=b(m().mark((function e(t,n){var r,i,o,a,s,u,l,c,d,f;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(n,{method:"GET",mode:"no-cors"});case 3:return c=e.sent,e.next=6,c.text();case 6:d=e.sent,f=(new DOMParser).parseFromString(d,"text/html"),r={image:null!==(i=null===(o=f.head.querySelector('meta[property="og:image"]'))||void 0===o?void 0:o.getAttribute("content"))&&void 0!==i?i:"",title:null!==(a=null===(s=f.head.querySelector('meta[property="og:title"]'))||void 0===s?void 0:s.getAttribute("content"))&&void 0!==a?a:td(n,32),description:null!==(u=null===(l=f.head.querySelector('meta[property="og:description"]'))||void 0===l?void 0:l.getAttribute("content"))&&void 0!==u?u:""},e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0),r={image:"",title:td(n,32),description:""};case 15:return e.abrupt("return",{id:ks.createId(jr(n)),typeName:"asset",type:"bookmark",props:{src:n,description:r.description,image:r.image,title:r.title}});case 16:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),Ry=/[\u0590-\u05FF\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]/;function Ly(e){return e.replace(/\t/g,qh)}function Dy(e){for(var t=e.split("\n");0===t[0].trim().length;)t.shift();var n,r=1/0,i=w(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o.trim().length>0){var a=o.length-o.trimStart().length;r=Math.min(r,a)}}}catch(s){i.e(s)}finally{i.f()}return t.map((function(e){return e.slice(r)})).join("\n")}function zy(e){return e.replace(/[ \t]+$/gm,"").replace(/\n+$/,"")}function By(e){if(e){for(var t=Fy;e.length;)t=t.push(e.pop());return t}return Fy}jy=Symbol.iterator;var Fy=new(function(){function e(){ne(this,e),vt(this,"length",0),vt(this,"head",null),vt(this,"tail",this)}return oe(e,[{key:"push",value:function(e){return new Uy(e,this)}},{key:"toArray",value:function(){return Li}},{key:jy,value:function(){return{next:function(){return{value:void 0,done:!0}}}}}]),e}());My=Symbol.iterator;var Uy=function(){function e(t,n){ne(this,e),vt(this,"length",void 0),this.head=t,this.tail=n,this.length=n.length+1}return oe(e,[{key:"push",value:function(t){return new e(t,this)}},{key:"toArray",value:function(){return Array.from(this)}},{key:My,value:function(){var e=this;return{next:function(){if(e.length){var t=e.head;return e=e.tail,{value:t,done:!1}}return{value:void 0,done:!0}}}}}]),e}(),Ky=function(){function e(t,n,r){var i=this;ne(this,e),vt(this,"_undos",eo("HistoryManager.undos",By())),vt(this,"_redos",eo("HistoryManager.redos",By())),vt(this,"_batchDepth",0),vt(this,"_commands",{}),vt(this,"createCommand",(function(e,t,n){if(i._commands[e])throw new Error("Duplicate command: ".concat(e));i._commands[e]=n;return function r(){for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];if(!i._batchDepth)return i.batch((function(){return r.apply(void 0,a)})),i.ctx;var u=t.apply(void 0,a);if(!u)return i.ctx;var l=u.data,c=u.ephemeral,d=u.squashing,f=u.preservesRedoStack;if(i.ignoringUpdates((function(e,t){return n.do(l),{undos:e,redos:t}})),!c){var h=i._undos.value.head;d&&h&&"command"===h.type&&h.name===e&&h.preservesRedoStack===f?i._undos.update((function(e){return e.tail.push(mt(mt({},h),{},{id:Bp(),data:n.squash(h.data,l)}))})):i._undos.update((function(t){return t.push({type:"command",name:e,data:l,id:Bp(),preservesRedoStack:f})})),u.preservesRedoStack||i._redos.set(By()),i.ctx.emit("change-history",{reason:"push"})}return i.ctx}})),vt(this,"batch",(function(e){try{i._batchDepth++,1===i._batchDepth?Ji((function(){var t,n,r=null===(t=i._undos.value.head)||void 0===t?void 0:t.id;e(),r!==(null===(n=i._undos.value.head)||void 0===n?void 0:n.id)&&i.onBatchComplete()})):e()}catch(t){throw i.annotateError(t),t}finally{i._batchDepth--}return i})),vt(this,"ignoringUpdates",(function(e){var t=i._undos.value,n=i._redos.value;i._undos.set(By()),i._redos.set(By());try{var r=Ji((function(){return e(t,n)}));t=r.undos,n=r.redos}finally{i._undos.set(t),i._redos.set(n)}})),vt(this,"_undo",(function(e){var t=e.pushToRedoStack,n=e.toMark,r=void 0===n?void 0:n;return i.ignoringUpdates((function(e,n){if(0===e.length)return{undos:e,redos:n};for(;"STOP"===(null===(o=e.head)||void 0===o?void 0:o.type);){var o,a=e.head;if(e=e.tail,t&&(n=n.push(a)),a.id===r)return i.ctx.emit("change-history",t?{reason:"undo"}:{reason:"bail",markId:r}),{undos:e,redos:n}}if(0===e.length)return i.ctx.emit("change-history",t?{reason:"undo"}:{reason:"bail",markId:r}),{undos:e,redos:n};for(;e.head;){var s=e.head;if(e=e.tail,t&&(n=n.push(s)),"STOP"===s.type){if(s.onUndo&&(!r||s.id===r))return i.ctx.emit("change-history",t?{reason:"undo"}:{reason:"bail",markId:r}),{undos:e,redos:n}}else i._commands[s.name].undo(s.data)}return i.ctx.emit("change-history",t?{reason:"undo"}:{reason:"bail",markId:r}),{undos:e,redos:n}})),i})),vt(this,"undo",(function(){return i._undo({pushToRedoStack:!0}),i})),vt(this,"redo",(function(){return i.ignoringUpdates((function(e,t){if(0===t.length)return{undos:e,redos:t};for(;"STOP"===(null===(n=t.head)||void 0===n?void 0:n.type);){var n;e=e.push(t.head),t=t.tail}if(0===t.length)return i.ctx.emit("change-history",{reason:"redo"}),{undos:e,redos:t};for(;t.head;){var r=t.head;if(e=e.push(t.head),t=t.tail,"STOP"===r.type){if(r.onRedo)break}else{var o=i._commands[r.name];o.redo?o.redo(r.data):o.do(r.data)}}return i.ctx.emit("change-history",{reason:"redo"}),{undos:e,redos:t}})),i})),vt(this,"bail",(function(){return i._undo({pushToRedoStack:!1}),i})),vt(this,"bailToMark",(function(e){return i._undo({pushToRedoStack:!1,toMark:e}),i})),vt(this,"mark",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bp(),t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=i._undos.value.head;return r&&"STOP"===r.type&&r.id===e&&r.onUndo===t&&r.onRedo===n?r.id:(i._undos.update((function(r){return r.push({type:"STOP",id:e,onUndo:t,onRedo:n})})),i.ctx.emit("mark-history",{id:e}),e)})),this.ctx=t,this.onBatchComplete=n,this.annotateError=r}return oe(e,[{key:"numUndos",get:function(){return this._undos.value.length}},{key:"numRedos",get:function(){return this._redos.value.length}},{key:"clear",value:function(){this._undos.set(By()),this._redos.set(By())}}]),e}(),Vy=Object.defineProperty,Wy=Object.getOwnPropertyDescriptor,Hy=function(e,t,n,r){for(var i,o=r>1?void 0:r?Wy(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Vy(t,n,o),o},Yy=function(e){return Math.round(e*Math.pow(10,8))/Math.pow(10,8)};function qy(e,t,n,r,i,o){if(o>20)return[];var a=e.filter((function(e){return("forward"===r?e.startNode.id===t:e.endNode.id===t)&&Yy(e.length)===Yy(n)&&nc(e.breadthIntersection[0],e.breadthIntersection[1],i[0],i[1])}));if(0===a.length)return[];var s,u=new Set,l=w(a);try{for(l.s();!(s=l.n()).done;){var c=s.value,f="forward"===r?c.endNode.id:c.startNode.id;u.has(f)||(u.add(f),a.push.apply(a,d(qy(e,f,n,r,nc(c.breadthIntersection[0],c.breadthIntersection[1],i[0],i[1]),o+1))))}}catch(h){l.e(h)}finally{l.f()}return a}var Xy=function(){function e(t){ne(this,e),vt(this,"_snapLines",eo("snapLines",void 0)),this.editor=t}return oe(e,[{key:"lines",get:function(){var e;return null!==(e=this._snapLines.value)&&void 0!==e?e:Li}},{key:"clear",value:function(){this.lines.length&&this._snapLines.set(void 0)}},{key:"setLines",value:function(e){this._snapLines.set(e)}},{key:"snapPointsCache",get:function(){var e=this;return this.editor.store.createComputedCache("snapPoints",(function(t){var n=e.editor.getPageTransformById(t.id);if(n)return e.editor.getShapeUtil(t).snapPoints(t).map((function(e,r){var i=mc.applyToPoint(n,e);return{x:i.x,y:i.y,id:"".concat(t.id,":").concat(r)}}))}))}},{key:"snapThreshold",get:function(){return 8/this.editor.zoomLevel}},{key:"snappableShapes",get:function(){var e,t=this.editor,n=t.selectedIds,r=t.renderingBounds,i=[];return function e(o){var a,s=w(t.getSortedChildIds(o));try{for(s.s();!(a=s.n()).done;){var u=a.value;if(!n.includes(u)){var l=t.getShapeById(u);if(l){var c=t.getShapeUtil(l);if(c.canSnap(l)){var d=t.getPageBoundsById(u);d&&r.includes(d)&&(t.isShapeOfType(l,Eg)?e(u):i.push({id:u,pageBounds:d,isClosed:c.isClosed(l)}))}}}}}catch(f){s.e(f)}finally{s.f()}}(null!==(e=this.currentCommonAncestor)&&void 0!==e?e:t.currentPageId),i}},{key:"currentCommonAncestor",get:function(){return this.editor.findCommonAncestor(this.editor.selectedShapes)}},{key:"snappablePoints",get:function(){var e=this.snappableShapes,t=this.snapPointsCache,n=[];return e.forEach((function(e){var r=t.get(e.id);r&&n.push.apply(n,d(r))})),n}},{key:"visibleGaps",get:function(){for(var e,t,n=[],r=[],i=this.snappableShapes.sort((function(e,t){return e.pageBounds.minX-t.pageBounds.minX})),o=0;o<i.length;o++){e=i[o];for(var a=o+1;a<i.length;a++)t=i[a],e.pageBounds.maxX<t.pageBounds.minX&&tc(e.pageBounds.minY,e.pageBounds.maxY,t.pageBounds.minY,t.pageBounds.maxY)&&n.push({startNode:e,endNode:t,startEdge:[new Nl(e.pageBounds.maxX,e.pageBounds.minY),new Nl(e.pageBounds.maxX,e.pageBounds.maxY)],endEdge:[new Nl(t.pageBounds.minX,t.pageBounds.minY),new Nl(t.pageBounds.minX,t.pageBounds.maxY)],length:t.pageBounds.minX-e.pageBounds.maxX,breadthIntersection:nc(e.pageBounds.minY,e.pageBounds.maxY,t.pageBounds.minY,t.pageBounds.maxY)})}for(var s=i.sort((function(e,t){return e.pageBounds.minY-t.pageBounds.minY})),u=0;u<s.length;u++){e=s[u];for(var l=u+1;l<s.length;l++)t=s[l],e.pageBounds.maxY<t.pageBounds.minY&&tc(e.pageBounds.minX,e.pageBounds.maxX,t.pageBounds.minX,t.pageBounds.maxX)&&r.push({startNode:e,endNode:t,startEdge:[new Nl(e.pageBounds.minX,e.pageBounds.maxY),new Nl(e.pageBounds.maxX,e.pageBounds.maxY)],endEdge:[new Nl(t.pageBounds.minX,t.pageBounds.minY),new Nl(t.pageBounds.maxX,t.pageBounds.minY)],length:t.pageBounds.minY-e.pageBounds.maxY,breadthIntersection:nc(e.pageBounds.minX,e.pageBounds.maxX,t.pageBounds.minX,t.pageBounds.maxX)})}return{horizontal:n,vertical:r}}},{key:"snapTranslate",value:function(e){var t,n,r,i,o=e.lockedAxis,a=e.initialSelectionPageBounds,s=e.initialSelectionSnapPoints,u=e.dragDelta,l=this.snappablePoints,c=this.snapThreshold,f=a.clone().translate(u),h=s.map((function(e,t){var n=e.x,r=e.y;return{id:"selection:"+t,x:n+u.x,y:r+u.y}})),p=l,v=[],g=[],m=new Nl(c,c);this.collectPointSnaps({minOffset:m,nearestSnapsX:v,nearestSnapsY:g,otherNodeSnapPoints:p,selectionSnapPoints:h}),this.collectGapSnaps({selectionPageBounds:f,nearestSnapsX:v,nearestSnapsY:g,minOffset:m});var y=new Nl("x"===o?0:null!==(t=null===(n=v[0])||void 0===n?void 0:n.nudge)&&void 0!==t?t:0,"y"===o?0:null!==(r=null===(i=g[0])||void 0===i?void 0:i.nudge)&&void 0!==r?r:0);m.x=0,m.y=0,v.length=0,g.length=0,h.forEach((function(e){e.x+=y.x,e.y+=y.y})),f.translate(y),this.collectPointSnaps({minOffset:m,nearestSnapsX:v,nearestSnapsY:g,otherNodeSnapPoints:p,selectionSnapPoints:h}),this.collectGapSnaps({selectionPageBounds:f,nearestSnapsX:v,nearestSnapsY:g,minOffset:m});var b=this.getPointSnapLines({nearestSnapsX:v,nearestSnapsY:g}),w=this.getGapSnapLines({selectionPageBounds:f,nearestSnapsX:v,nearestSnapsY:g});return this._snapLines.set([].concat(d(w),d(b))),{nudge:y}}},{key:"outlinesInPageSpace",get:function(){var e=this;return this.snappableShapes.map((function(t){var n=t.id,r=t.isClosed,i=Nr(e.editor.getOutlineById(n));r&&i.push(i[0]);var o=e.editor.getPageTransformById(n);if(!o)throw Error("No page transform");return mc.applyToPoints(o,i)}))}},{key:"getSnappingHandleDelta",value:function(e){var t,n,r,i,o,a=e.handlePoint,s=e.additionalSegments,u=this.outlinesInPageSpace,l=this.snapThreshold,c=null,f=w([].concat(d(u),d(s)));try{for(f.s();!(o=f.n()).done;)for(var h=o.value,p=0;p<h.length-1;p++)t=h[p],n=h[p+1],r=Nl.NearestPointOnLineSegment(t,n,a),i=Nl.Dist(a,r),isNaN(i)||i<l&&(l=i,c=r)}catch(v){f.e(v)}finally{f.f()}return c?(this._snapLines.set([{id:Bp(),type:"points",points:[c]}]),Nl.Sub(c,a)):null}},{key:"snapResize",value:function(e){var t,n,r,i,o=e.initialSelectionPageBounds,a=e.dragDelta,s=e.handle,u=e.isAspectRatioLocked,l=e.isResizingFromCenter,c=this.snapThreshold,f=lc.Resize(o,s,l?2*a.x:a.x,l?2*a.y:a.y,u),h=f.box,p=f.scaleX,v=f.scaleY,g=s;p<0&&(g=function(e){switch(e){case"left":return"right";case"right":return"left";case"top_left":return"top_right";case"top_right":return"top_left";case"bottom_left":return"bottom_right";case"bottom_right":return"bottom_left";default:return e}}(g)),v<0&&(g=function(e){switch(e){case"top":return"bottom";case"bottom":return"top";case"top_left":return"bottom_left";case"top_right":return"bottom_right";case"bottom_left":return"top_left";case"bottom_right":return"top_right";default:return e}}(g)),l&&(h.center=o.center);var m="top"===g||"bottom"===g,y="left"===g||"right"===g,b=$y(g,h),w=this.snappablePoints,x=[],k=[],S=new Nl(c,c);this.collectPointSnaps({minOffset:S,nearestSnapsX:x,nearestSnapsY:k,otherNodeSnapPoints:w,selectionSnapPoints:b});var _=new Nl(m?0:null!==(t=null===(n=x[0])||void 0===n?void 0:n.nudge)&&void 0!==t?t:0,y?0:null!==(r=null===(i=k[0])||void 0===i?void 0:i.nudge)&&void 0!==r?r:0);if(u&&function(e){return"top_left"===e||"top_right"===e||"bottom_right"===e||"bottom_left"===e}(g)&&0!==_.len()){var E=x.length&&k.length?Math.abs(_.x)<Math.abs(_.y)?"x":"y":x.length?"x":"y",C=o.aspectRatio;"x"===E?(k.length=0,_.y=_.x/C,"bottom_left"!==g&&"top_right"!==g||(_.y=-_.y)):(x.length=0,_.x=_.y*C,"bottom_left"!==g&&"top_right"!==g||(_.x=-_.x))}var P=Nl.Add(a,_),I=lc.Resize(o,s,l?2*P.x:P.x,l?2*P.y:P.y,u).box;l&&(I.center=o.center);var j=$y("any",I);x.length=0,k.length=0,S.x=0,S.y=0,this.collectPointSnaps({minOffset:S,nearestSnapsX:x,nearestSnapsY:k,otherNodeSnapPoints:w,selectionSnapPoints:j});var M=this.getPointSnapLines({nearestSnapsX:x,nearestSnapsY:k});return this._snapLines.set(d(M)),{nudge:_}}},{key:"collectPointSnaps",value:function(e){var t,n=e.selectionSnapPoints,r=e.otherNodeSnapPoints,i=e.minOffset,o=e.nearestSnapsX,a=e.nearestSnapsY,s=w(n);try{for(s.s();!(t=s.n()).done;){var u,l=t.value,c=w(r);try{for(c.s();!(u=c.n()).done;){var d=u.value,f=Nl.Sub(l,d),h=Math.abs(f.x),p=Math.abs(f.y);Yy(h)<=Yy(i.x)&&(Yy(h)<Yy(i.x)&&(o.length=0),o.push({type:"points",points:{thisPoint:l,otherPoint:d},nudge:d.x-l.x}),i.x=h),Yy(p)<=Yy(i.y)&&(Yy(p)<Yy(i.y)&&(a.length=0),a.push({type:"points",points:{thisPoint:l,otherPoint:d},nudge:d.y-l.y}),i.y=p)}}catch(v){c.e(v)}finally{c.f()}}}catch(v){s.e(v)}finally{s.f()}}},{key:"collectGapSnaps",value:function(e){var t,n=e.selectionPageBounds,r=e.minOffset,i=e.nearestSnapsX,o=e.nearestSnapsY,a=this.visibleGaps,s=a.horizontal,u=a.vertical,l=w(s);try{for(l.s();!(t=l.n()).done;){var c=t.value;if(tc(c.breadthIntersection[0],c.breadthIntersection[1],n.minY,n.maxY)){var d=c.startEdge[0].x+c.length/2-n.center.x;if(c.length>n.width&&Yy(Math.abs(d))<=Yy(r.x)){Yy(Math.abs(d))<Yy(r.x)&&(i.length=0),r.x=Math.abs(d);var f={type:"gap_center",gap:c,nudge:d},h=i.find((function(e){return"gap_center"===e.type})),p=h&&nc(c.breadthIntersection[0],c.breadthIntersection[1],h.gap.breadthIntersection[0],h.gap.breadthIntersection[1]);h&&h.gap.length>c.length&&p?i[i.indexOf(h)]=f:h&&p||i.push(f)}var v=c.startNode.pageBounds.minX-c.length-n.maxX;Yy(Math.abs(v))<=Yy(r.x)&&(Yy(Math.abs(v))<Yy(r.x)&&(i.length=0),r.x=Math.abs(v),i.push({type:"gap_duplicate",gap:c,protrusionDirection:"left",nudge:v}));var g=c.endNode.pageBounds.maxX+c.length-n.minX;Yy(Math.abs(g))<=Yy(r.x)&&(Yy(Math.abs(g))<Yy(r.x)&&(i.length=0),r.x=Math.abs(g),i.push({type:"gap_duplicate",gap:c,protrusionDirection:"right",nudge:g}))}}}catch(P){l.e(P)}finally{l.f()}var m,y=w(u);try{for(y.s();!(m=y.n()).done;){var b=m.value;if(tc(b.breadthIntersection[0],b.breadthIntersection[1],n.minX,n.maxX)){var x=b.startEdge[0].y+b.length/2-n.center.y;if(b.length>n.height&&Yy(Math.abs(x))<=Yy(r.y)){Yy(Math.abs(x))<Yy(r.y)&&(o.length=0),r.y=Math.abs(x);var k={type:"gap_center",gap:b,nudge:x},S=o.find((function(e){return"gap_center"===e.type})),_=S&&tc(S.gap.breadthIntersection[0],S.gap.breadthIntersection[1],b.breadthIntersection[0],b.breadthIntersection[1]);S&&S.gap.length>b.length&&_?o[o.indexOf(S)]=k:S&&_||o.push(k)}else{var E=b.startNode.pageBounds.minY-b.length-n.maxY;Yy(Math.abs(E))<=Yy(r.y)&&(Yy(Math.abs(E))<Yy(r.y)&&(o.length=0),r.y=Math.abs(E),o.push({type:"gap_duplicate",gap:b,protrusionDirection:"top",nudge:E}));var C=b.endNode.pageBounds.maxY+b.length-n.minY;Yy(Math.abs(C))<=Yy(r.y)&&(Yy(Math.abs(C))<Yy(r.y)&&(o.length=0),r.y=Math.abs(C),o.push({type:"gap_duplicate",gap:b,protrusionDirection:"bottom",nudge:C}))}}}}catch(P){y.e(P)}finally{y.f()}}},{key:"getPointSnapLines",value:function(e){var t=e.nearestSnapsX,n=e.nearestSnapsY,r={},i={};if(t.length>0){var o,a=w(t);try{for(a.s();!(o=a.n()).done;){var s=o.value;if("points"===s.type){var u=Yy(s.points.otherPoint.x);r[u]||(r[u]=[]),r[u].push(s.points)}}}catch(h){a.e(h)}finally{a.f()}}if(n.length>0){var l,c=w(n);try{for(c.s();!(l=c.n()).done;){var d=l.value;if("points"===d.type){var f=Yy(d.points.otherPoint.y);i[f]||(i[f]=[]),i[f].push(d.points)}}}catch(h){c.e(h)}finally{c.f()}}return Object.values(r).concat(Object.values(i)).map((function(e){return{id:Bp(),type:"points",points:yr(e.map((function(e){return Nl.From(e.otherPoint)})).concat(e.map((function(e){return Nl.From(e.thisPoint)}))),(function(e,t){return e.equals(t)}))}}))}},{key:"getGapSnapLines",value:function(e){var t=e.selectionPageBounds,n=e.nearestSnapsX,r=e.nearestSnapsY,i=this.visibleGaps,o=i.vertical,a=i.horizontal,s={top:t.sides[0],right:t.sides[1],bottom:[t.corners[3],t.corners[2]],left:[t.corners[0],t.corners[3]]},u=[];if(n.length>0){var l,c=w(n);try{var f=function(){var e=l.value;if("points"===e.type)return 1;var n=e.gap,r=n.breadthIntersection,i=n.startEdge,o=n.startNode,c=n.endNode,f=n.length,h=n.endEdge;switch(e.type){case"gap_center":var p=(f-t.width)/2,v=nc(r[0],r[1],t.minY,t.maxY);u.push({type:"gaps",direction:"horizontal",id:Bp(),gaps:[].concat(d(qy(a,o.id,p,"backward",v,0)),[{startEdge:i,endEdge:s.left},{startEdge:s.right,endEdge:h}],d(qy(a,c.id,p,"forward",v,0)))});break;case"gap_duplicate":var g=nc(r[0],r[1],t.minY,t.maxY);u.push({type:"gaps",direction:"horizontal",id:Bp(),gaps:"left"===e.protrusionDirection?[{startEdge:s.right,endEdge:i.map((function(e){return e.clone().addXY(-o.pageBounds.width,0)}))},{startEdge:i,endEdge:h}].concat(d(qy(a,c.id,f,"forward",g,0))):[].concat(d(qy(a,o.id,f,"backward",g,0)),[{startEdge:i,endEdge:h},{startEdge:h.map((function(t){return t.clone().addXY(e.gap.endNode.pageBounds.width,0)})),endEdge:s.left}])})}};for(c.s();!(l=c.n()).done;)f()}catch(g){c.e(g)}finally{c.f()}}if(r.length>0){var h,p=w(r);try{var v=function(){var e=h.value;if("points"===e.type)return 1;var n=e.gap,r=n.breadthIntersection,i=n.startEdge,a=n.startNode,l=n.endNode,c=n.length,f=n.endEdge;switch(e.type){case"gap_center":var p=(c-t.height)/2,v=nc(r[0],r[1],t.minX,t.maxX);u.push({type:"gaps",direction:"vertical",id:Bp(),gaps:[].concat(d(qy(o,a.id,p,"backward",v,0)),[{startEdge:i,endEdge:s.top},{startEdge:s.bottom,endEdge:f}],d(qy(o,e.gap.endNode.id,p,"forward",v,0)))});break;case"gap_duplicate":var g=nc(r[0],r[1],t.minX,t.maxX);u.push({type:"gaps",direction:"vertical",id:Bp(),gaps:"top"===e.protrusionDirection?[{startEdge:s.bottom,endEdge:i.map((function(e){return e.clone().addXY(0,-a.pageBounds.height)}))},{startEdge:i,endEdge:f}].concat(d(qy(o,l.id,c,"forward",g,0))):[].concat(d(qy(o,a.id,c,"backward",g,0)),[{startEdge:i,endEdge:f},{startEdge:f.map((function(e){return e.clone().addXY(0,l.pageBounds.height)})),endEdge:s.top}])})}};for(p.s();!(h=p.n()).done;)v()}catch(g){p.e(g)}finally{p.f()}}return function(e){e.sort((function(e,t){return t.gaps.length-e.gaps.length}));for(var t=e.length-1;t>0;t--)for(var n=e[t],r=function(){var r=e[i];if(r.direction===n.direction&&n.gaps.every((function(e){return r.gaps.some((function(t){return Yy(e.startEdge[0].x)===Yy(t.startEdge[0].x)&&Yy(e.startEdge[0].y)===Yy(t.startEdge[0].y)&&Yy(e.startEdge[1].x)===Yy(t.startEdge[1].x)&&Yy(e.startEdge[1].y)===Yy(t.startEdge[1].y)}))&&r.gaps.some((function(t){return Yy(e.endEdge[0].x)===Yy(t.endEdge[0].x)&&Yy(e.endEdge[0].y)===Yy(t.endEdge[0].y)&&Yy(e.endEdge[1].x)===Yy(t.endEdge[1].x)&&Yy(e.endEdge[1].y)===Yy(t.endEdge[1].y)}))})))return e.splice(t,1),1},i=t-1;i>=0&&!r();i--);}(u),u}}]),e}();function $y(e,t){var n=t.minX,r=t.maxX,i=t.minY,o=t.maxY,a=[];switch(e){case"top":case"left":case"top_left":case"any":a.push({id:"top_left",handle:"top_left",x:n,y:i})}switch(e){case"top":case"right":case"top_right":case"any":a.push({id:"top_right",handle:"top_right",x:r,y:i})}switch(e){case"bottom":case"right":case"bottom_right":case"any":a.push({id:"bottom_right",handle:"bottom_right",x:r,y:o})}switch(e){case"bottom":case"left":case"bottom_left":case"any":a.push({id:"bottom_left",handle:"bottom_left",x:n,y:o})}return a}Hy([so],Xy.prototype,"snapPointsCache",1),Hy([so],Xy.prototype,"snapThreshold",1),Hy([so],Xy.prototype,"snappableShapes",1),Hy([so],Xy.prototype,"currentCommonAncestor",1),Hy([so],Xy.prototype,"snappablePoints",1),Hy([so],Xy.prototype,"visibleGaps",1),Hy([so],Xy.prototype,"outlinesInPageSpace",1);var Gy={start:"left","start-legacy":"left",middle:"center","middle-legacy":"center",end:"right","end-legacy":"right"},Qy=/\s/,Jy=function(){function e(t){var n=this;ne(this,e),vt(this,"measureText",(function(e,t){var r,i=n.getTextElement();i.setAttribute("dir","ltr"),i.style.setProperty("font-family",t.fontFamily),i.style.setProperty("font-style",t.fontStyle),i.style.setProperty("font-weight",t.fontWeight),i.style.setProperty("font-size",t.fontSize+"px"),i.style.setProperty("line-height",t.lineHeight*t.fontSize+"px"),i.style.setProperty("width",t.width),i.style.setProperty("min-width",null!==(r=t.minWidth)&&void 0!==r?r:null),i.style.setProperty("max-width",t.maxWidth),i.style.setProperty("padding",t.padding),i.textContent=Xh.normalizeTextForDom(e);var o=i.getBoundingClientRect();return{x:0,y:0,w:o.width,h:o.height}})),this.editor=t}return oe(e,[{key:"getTextElement",value:function(){var e=document.querySelector(".tl-text-measure");null===e||void 0===e||e.remove();var t=document.createElement("div");return this.editor.getContainer().appendChild(t),t.id="__textMeasure_".concat(Bp()),t.classList.add("tl-text"),t.classList.add("tl-text-measure"),t.tabIndex=-1,t}},{key:"measureElementTextNodeSpans",value:function(e){var t,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).shouldTruncateToFirstLine,r=void 0!==n&&n,i=[],o=e.getBoundingClientRect(),a=-o.left,s=-o.top,u=new Range,l=e.childNodes[0],c=0,d=null,f=null,h=0,p=!1,v=w(e.childNodes);try{for(v.s();!(t=v.n()).done;){var g,m=t.value;if(m.nodeType===Node.TEXT_NODE){var y,b=w(null!==(g=m.textContent)&&void 0!==g?g:"");try{for(b.s();!(y=b.n()).done;){var x=y.value;u.setStart(l,c),u.setEnd(l,c+x.length);var k=u.getClientRects(),S=k[k.length-1],_=S.top+s,E=S.left+a,C=S.right+a,P=Qy.test(x);if(P===f&&_===h&&d)d.box.w=C-d.box.x,d.text+=x;else{if(d){if(r&&_!==h){p=!0;break}i.push(d)}d={box:{x:E,y:_,w:S.width,h:S.height},text:x}}f=P,h=_,c+=x.length}}catch(I){b.e(I)}finally{b.f()}}}}catch(I){v.e(I)}finally{v.f()}return d&&i.push(d),{spans:i,didTruncate:p}}},{key:"measureTextSpans",value:function(e,t){var n="truncate-ellipsis"===t.overflow||"truncate-clip"===t.overflow,r=this.getTextElement(),i=Math.ceil(t.width-2*t.padding);r.style.setProperty("width","".concat(i,"px")),r.style.setProperty("height","min-content"),r.style.setProperty("dir","ltr"),r.style.setProperty("font-size","".concat(t.fontSize,"px")),r.style.setProperty("font-family",t.fontFamily),r.style.setProperty("font-weight",t.fontWeight),r.style.setProperty("line-height","".concat(t.lineHeight*t.fontSize,"px")),r.style.setProperty("text-align",Gy[t.textAlign]),n&&(r.style.setProperty("overflow-wrap","anywhere"),r.style.setProperty("word-break","break-all")),r.textContent=e;var o=this.measureElementTextNodeSpans(r,{shouldTruncateToFirstLine:n}),a=o.spans,s=o.didTruncate;if("truncate-ellipsis"===t.overflow&&s){r.textContent="\u2026";var u=Math.ceil(this.measureElementTextNodeSpans(r).spans[0].box.w);r.style.setProperty("width","".concat(i-u,"px")),r.textContent=e;var l=this.measureElementTextNodeSpans(r,{shouldTruncateToFirstLine:!0}).spans,c=l[l.length-1];return l.push({text:"\u2026",box:{x:Math.min(c.box.x+c.box.w,t.width-t.padding-u),y:c.box.y,w:u,h:c.box.h}}),l}return r.remove(),a}}]),e}(),Zy=oe((function e(t){var n=this;ne(this,e),vt(this,"raf",void 0),vt(this,"isPaused",!0),vt(this,"last",0),vt(this,"t",0),vt(this,"start",(function(){n.isPaused=!1,cancelAnimationFrame(n.raf),n.raf=requestAnimationFrame(n.tick),n.last=Date.now()})),vt(this,"tick",(function(){if(!n.isPaused){var e=Date.now(),t=e-n.last;n.last=e,n.t+=t,n.editor.emit("frame",t),n.t<16||(n.t-=16,n.updatePointerVelocity(t),n.editor.emit("tick",t)),n.raf=requestAnimationFrame(n.tick)}})),vt(this,"dispose",(function(){n.isPaused=!0,cancelAnimationFrame(n.raf)})),vt(this,"prevPoint",new Nl),vt(this,"updatePointerVelocity",(function(e){var t=n.prevPoint,r=n.editor.inputs,i=r.currentScreenPoint,o=r.pointerVelocity;if(0!==e){var a=Nl.Sub(i,t);n.prevPoint=i.clone();var s=a.len(),u=s?a.div(s):new Nl(0,0),l=o.clone().lrp(u.mul(s/e),.5);Math.abs(l.x)<.01&&(l.x=0),Math.abs(l.y)<.01&&(l.y=0),o.equals(l)||(n.editor.inputs.pointerVelocity=l)}})),this.editor=t,this.editor.disposables.add(this.dispose),this.start()})),eb=function(){function e(t){var n=this;ne(this,e),vt(this,"updateUserPreferences",(function(e){n.user.setUserPreferences(mt(mt({},n.user.userPreferences.value),e))})),this.user=t}return oe(e,[{key:"userPreferences",get:function(){return this.user.userPreferences}},{key:"isDarkMode",get:function(){return this.user.userPreferences.value.isDarkMode}},{key:"animationSpeed",get:function(){return this.user.userPreferences.value.animationSpeed}},{key:"id",get:function(){return this.user.userPreferences.value.id}},{key:"name",get:function(){return this.user.userPreferences.value.name}},{key:"locale",get:function(){return this.user.userPreferences.value.locale}},{key:"color",get:function(){return this.user.userPreferences.value.color}},{key:"isSnapMode",get:function(){return this.user.userPreferences.value.isSnapMode}}]),e}(),tb=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"info",{}),vt(_t(e),"brush",new lc),vt(_t(e),"initialSelectedIds",[]),vt(_t(e),"excludedShapeIds",new Set),vt(_t(e),"initialStartShape",null),vt(_t(e),"onEnter",(function(t){var n=e.editor.inputs,r=n.altKey,i=n.currentPagePoint;r?e.parent.transition("scribble_brushing",t):(e.excludedShapeIds=new Set(e.editor.shapesArray.filter((function(t){return e.editor.isShapeOfType(t,Eg)||e.editor.isShapeOrAncestorLocked(t)})).map((function(e){return e.id}))),e.info=t,e.initialSelectedIds=e.editor.selectedIds.slice(),e.initialStartShape=e.editor.getShapesAtPoint(i)[0],e.onPointerMove())})),vt(_t(e),"onExit",(function(){e.initialSelectedIds=[],e.editor.setBrush(null)})),vt(_t(e),"onPointerMove",(function(){e.hitTestShapes()})),vt(_t(e),"onPointerUp",(function(){e.complete()})),vt(_t(e),"onComplete",(function(){e.complete()})),vt(_t(e),"onCancel",(function(t){e.editor.setSelectedIds(e.initialSelectedIds,!0),e.parent.transition("idle",t)})),vt(_t(e),"onKeyDown",(function(t){e.editor.inputs.altKey?e.parent.transition("scribble_brushing",t):e.hitTestShapes()})),vt(_t(e),"onKeyUp",(function(){e.hitTestShapes()})),vt(_t(e),"onInterrupt",(function(){e.editor.setBrush(null)})),e}return oe(n,[{key:"complete",value:function(){this.parent.transition("idle",{})}},{key:"hitTestShapes",value:function(){var e=this.editor,t=e.currentPageId,n=e.shapesArray,r=e.inputs,i=r.originPagePoint,o=r.currentPagePoint,a=r.shiftKey,s=r.ctrlKey;this.brush.setTo(lc.FromPoints([i,o]));var u,l,c,d,f,h,p,v=new Set(a?this.initialSelectedIds:[]),g=this.brush.corners,m=this.excludedShapeIds;e:for(var y=0,b=n.length;y<b;y++)if(c=n[y],!m.has(c.id)&&!v.has(c.id)&&(f=this.editor.getPageBounds(c)))if(this.brush.contains(f))this.handleHit(c,o,t,v,g);else if(!s&&!this.editor.isShapeOfType(c,Ig)&&this.brush.collides(f)){if(d=this.editor.getShapeUtil(c),!(h=this.editor.getPageTransform(c)))continue e;p=mc.applyToPoints(mc.Inverse(h),g);t:for(var w=0;w<p.length;w++)if(u=p[w],l=p[(w+1)%p.length],d.hitTestLineSegment(c,u,l)){this.handleHit(c,o,t,v,g);break t}}this.editor.setBrush(mt({},this.brush.toJson())),this.editor.setSelectedIds(Array.from(v),!0)}},{key:"handleHit",value:function(e,t,n,r,i){if(e.parentId!==n){var o=this.editor.getOutermostSelectableShape(e),a=this.editor.getPageMaskById(o.id);a&&null!==function(e,t){for(var n,r,i=0,o=e.length;i<o;i++){n=e[i],r=e[(i+1)%o];for(var a=0,s=t.length;a<s;a++)if(Nc(n,r,t[a],t[(a+1)%s]))return!0}return!1}(a,i)&&!ic(t,a)||r.add(o.id)}else r.add(e.id)}}]),n}(lv);function nb(e,t,n){if(!t)throw Error("Needs to translate a cropped shape!");var r=t.props.crop;if(r){var i=e.inputs.shiftKey?Math.abs(n.x)<Math.abs(n.y)?"x":"y":null;"x"===i?n.x=0:"y"===i&&(n.y=0),n.rot(-t.rotation);var o=1/(r.bottomRight.x-r.topLeft.x)*t.props.w,a=1/(r.bottomRight.y-r.topLeft.y)*t.props.h,s=r.bottomRight.y-r.topLeft.y,u=r.bottomRight.x-r.topLeft.x,l=Nr(r);return l.topLeft.x=Math.min(1-u,Math.max(0,l.topLeft.x-n.x/o)),l.topLeft.y=Math.min(1-s,Math.max(0,l.topLeft.y-n.y/a)),l.bottomRight.x=l.topLeft.x+u,l.bottomRight.y=l.topLeft.y+s,{id:t.id,type:t.type,props:{crop:l}}}}vt(tb,"id","brushing");var rb=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"onEnter",(function(){e.editor.setCursor({type:"default"});var t=e.editor.onlySelectedShape;e.editor.on("change-history",e.cleanupCroppingState),e.editor.mark("crop"),t&&e.editor.setCroppingId(t.id)})),vt(_t(e),"onExit",(function(){e.editor.setCursor({type:"default"}),e.editor.off("change-history",e.cleanupCroppingState)})),vt(_t(e),"onCancel",(function(){e.editor.setCroppingId(null),e.editor.setSelectedTool("select.idle",{})})),vt(_t(e),"onPointerDown",(function(t){if(!e.editor.isMenuOpen){if(t.ctrlKey)return e.editor.setCroppingId(null),void e.editor.setSelectedTool("select.brushing",t);switch(t.target){case"canvas":e.cancel();break;case"shape":if(t.shape.id===e.editor.croppingId)return void e.editor.setSelectedTool("select.crop.pointing_crop",t);var n;null!==(n=e.editor.getShapeUtil(t.shape))&&void 0!==n&&n.canCrop(t.shape)?(e.editor.setCroppingId(t.shape.id),e.editor.setSelectedIds([t.shape.id]),e.editor.setSelectedTool("select.crop.pointing_crop",t)):e.cancel();break;case"selection":switch(t.handle){case"mobile_rotate":case"top_left_rotate":case"top_right_rotate":case"bottom_left_rotate":case"bottom_right_rotate":e.editor.setSelectedTool("select.pointing_rotate_handle",mt(mt({},t),{},{onInteractionEnd:"select.crop"}));break;case"top":case"right":case"bottom":case"left":case"top_left":case"top_right":case"bottom_left":case"bottom_right":e.editor.setSelectedTool("select.pointing_crop_handle",mt(mt({},t),{},{onInteractionEnd:"select.crop"}));break;default:e.cancel()}}}})),vt(_t(e),"onDoubleClick",(function(t){if("up"===t.phase&&e.editor.croppingId){var n=e.editor.getShapeById(e.editor.croppingId);if(n){var r,i=e.editor.getShapeUtil(n);if(i)if("selection"===t.target)null===(r=i.onDoubleClickEdge)||void 0===r||r.call(i,n)}}})),vt(_t(e),"onKeyDown",(function(){e.nudgeCroppingImage(!1)})),vt(_t(e),"onKeyRepeat",(function(){e.nudgeCroppingImage(!0)})),vt(_t(e),"onKeyUp",(function(t){if("Enter"===t.code)e.editor.setCroppingId(null),e.editor.setSelectedTool("select.idle",{})})),vt(_t(e),"cleanupCroppingState",(function(){e.editor.croppingId||e.editor.setSelectedTool("select.idle",{})})),e}return oe(n,[{key:"cancel",value:function(){this.editor.setCroppingId(null),this.editor.setSelectedTool("select.idle",{})}},{key:"nudgeCroppingImage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.editor.inputs.keys,n=t.has("ShiftLeft"),r=new Nl(0,0);if(t.has("ArrowLeft")&&(r.x+=1),t.has("ArrowRight")&&(r.x-=1),t.has("ArrowUp")&&(r.y+=1),t.has("ArrowDown")&&(r.y-=1),!r.equals(new Nl(0,0))){n&&r.mul(10);var i=this.editor.getShapeById(this.editor.croppingId);if(i){var o=nb(this.editor,i,r);o&&(e||this.editor.mark("translate crop"),this.editor.updateShapes([o]))}}}}]),n}(lv);vt(rb,"id","idle");var ib=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"onCancel",(function(){e.editor.setSelectedTool("select.crop.idle",{})})),vt(_t(e),"onPointerMove",(function(t){e.editor.inputs.isDragging&&e.editor.setSelectedTool("select.crop.translating_crop",t)})),vt(_t(e),"onPointerUp",(function(t){e.editor.setSelectedTool("select.crop.idle",t)})),e}return oe(n)}(lv);vt(ib,"id","pointing_crop");var ob=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"info",{}),vt(_t(e),"markId","translating crop"),vt(_t(e),"snapshot",{}),vt(_t(e),"onEnter",(function(t){e.info=t,e.snapshot=e.createSnapshot(),e.editor.mark(e.markId),e.editor.setCursor({type:"move"}),e.updateShapes()})),vt(_t(e),"onExit",(function(){e.editor.setCursor({type:"default"})})),vt(_t(e),"onPointerMove",(function(){e.updateShapes()})),vt(_t(e),"onPointerUp",(function(){e.complete()})),vt(_t(e),"onComplete",(function(){e.complete()})),vt(_t(e),"onCancel",(function(){e.cancel()})),vt(_t(e),"onKeyDown",(function(t){switch(t.key){case"Alt":case"Shift":return void e.updateShapes()}})),vt(_t(e),"onKeyUp",(function(t){switch(t.key){case"Enter":return void e.complete();case"Alt":case"Shift":e.updateShapes()}})),e}return oe(n,[{key:"complete",value:function(){this.updateShapes(),this.editor.setSelectedTool("select.crop.idle",this.info)}},{key:"cancel",value:function(){this.editor.bailToMark(this.markId),this.editor.setSelectedTool("select.crop.idle",this.info)}},{key:"createSnapshot",value:function(){return{shape:this.editor.onlySelectedShape}}},{key:"updateShapes",value:function(){var e=this.snapshot.shape;if(e){var t=this.editor.inputs,n=t.originPagePoint,r=t.currentPagePoint.clone().sub(n),i=nb(this.editor,e,r);i&&this.editor.updateShapes([i],!0)}}}]),n}(lv);vt(ob,"id","translating_crop");var ab=function(e){xt(n,e);var t=Et(n);function n(){return ne(this,n),t.apply(this,arguments)}return oe(n)}(lv);vt(ab,"id","crop"),vt(ab,"initial","idle"),vt(ab,"children",(function(){return[rb,ob,ib]}));var sb={bottom:"ns-resize",top:"ns-resize",left:"ew-resize",right:"ew-resize",bottom_left:"nesw-resize",bottom_right:"nwse-resize",top_left:"nwse-resize",top_right:"nesw-resize",bottom_left_rotate:"swne-rotate",bottom_right_rotate:"senw-rotate",top_left_rotate:"nwse-rotate",top_right_rotate:"nesw-rotate",mobile_rotate:"grabbing"},ub=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"info",{}),vt(_t(e),"onEnter",(function(t){e.info=t,e.updateCursor()})),vt(_t(e),"onPointerMove",(function(){e.editor.inputs.isDragging&&e.parent.transition("resizing",e.info)})),vt(_t(e),"onPointerUp",(function(){e.complete()})),vt(_t(e),"onCancel",(function(){e.cancel()})),vt(_t(e),"onComplete",(function(){e.cancel()})),vt(_t(e),"onInterrupt",(function(){e.cancel()})),e}return oe(n,[{key:"updateCursor",value:function(){var e=this.editor.selectedShapes,t=sb[this.info.handle];this.editor.setCursor({type:t,rotation:1===e.length?e[0].rotation:0})}},{key:"complete",value:function(){this.info.onInteractionEnd?this.editor.setSelectedTool(this.info.onInteractionEnd,{}):this.parent.transition("idle",{})}},{key:"cancel",value:function(){this.info.onInteractionEnd?this.editor.setSelectedTool(this.info.onInteractionEnd,{}):this.parent.transition("idle",{})}}]),n}(lv);vt(ub,"id","pointing_resize_handle");var lb=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"info",{}),vt(_t(e),"markId",""),vt(_t(e),"snapshot",{}),vt(_t(e),"onEnter",(function(t){e.info=t,e.markId=e.editor.mark("cropping"),e.snapshot=e.createSnapshot(),e.updateShapes()})),vt(_t(e),"onPointerMove",(function(){e.updateShapes()})),vt(_t(e),"onPointerUp",(function(){e.complete()})),vt(_t(e),"onComplete",(function(){e.complete()})),vt(_t(e),"onCancel",(function(){e.cancel()})),vt(_t(e),"getDefaultCrop",(function(){return{topLeft:{x:0,y:0},bottomRight:{x:1,y:1}}})),e}return oe(n,[{key:"updateCursor",value:function(){var e=this.editor.selectedShapes[0];if(e){var t=sb[this.info.handle];this.editor.setCursor({type:t,rotation:e.rotation})}}},{key:"updateShapes",value:function(){var e,t=this.snapshot,n=t.shape,r=t.cursorHandleOffset;if(n&&this.editor.getShapeUtil(cm)){var i=n.props,o=this.editor.inputs.currentPagePoint.clone().sub(r),a=this.editor.inputs.originPagePoint.clone().sub(r),s=o.clone().sub(a).rot(-n.rotation),u=null!==(e=i.crop)&&void 0!==e?e:this.getDefaultCrop(),l=Nr(u),c=new Nl(n.x,n.y),d=new Nl(0,0),f=1/(u.bottomRight.x-u.topLeft.x)*i.w,h=1/(u.bottomRight.y-u.topLeft.y)*i.h,p=!1;switch(this.info.handle){case"top":case"top_left":case"top_right":if(h<8)break;p=!0,l.topLeft.y=l.topLeft.y+s.y/h,h*(l.bottomRight.y-l.topLeft.y)<8?(l.topLeft.y=l.bottomRight.y-8/h,d.y=(l.topLeft.y-u.topLeft.y)*h):l.topLeft.y<=0?(l.topLeft.y=0,d.y=(l.topLeft.y-u.topLeft.y)*h):d.y=s.y;break;case"bottom":case"bottom_left":case"bottom_right":if(h<8)break;p=!0,l.bottomRight.y=Math.min(1,l.bottomRight.y+s.y/h),h*(l.bottomRight.y-l.topLeft.y)<8&&(l.bottomRight.y=l.topLeft.y+8/h)}switch(this.info.handle){case"left":case"top_left":case"bottom_left":if(f<8)break;p=!0,l.topLeft.x=l.topLeft.x+s.x/f,f*(l.bottomRight.x-l.topLeft.x)<8?(l.topLeft.x=l.bottomRight.x-8/f,d.x=(l.topLeft.x-u.topLeft.x)*f):l.topLeft.x<=0?(l.topLeft.x=0,d.x=(l.topLeft.x-u.topLeft.x)*f):d.x=s.x;break;case"right":case"top_right":case"bottom_right":if(f<8)break;p=!0,l.bottomRight.x=Math.min(1,l.bottomRight.x+s.x/f),f*(l.bottomRight.x-l.topLeft.x)<8&&(l.bottomRight.x=l.topLeft.x+8/f)}if(p){c.add(d.rot(n.rotation));var v={id:n.id,type:n.type,x:c.x,y:c.y,props:{crop:l,w:(l.bottomRight.x-l.topLeft.x)*f,h:(l.bottomRight.y-l.topLeft.y)*h}};this.editor.updateShapes([v],!0),this.updateCursor()}}}},{key:"complete",value:function(){this.info.onInteractionEnd?this.editor.setSelectedTool(this.info.onInteractionEnd,this.info):(this.editor.setCroppingId(null),this.parent.transition("idle",{}))}},{key:"cancel",value:function(){this.editor.bailToMark(this.markId),this.info.onInteractionEnd?this.editor.setSelectedTool(this.info.onInteractionEnd,this.info):(this.editor.setCroppingId(null),this.parent.transition("idle",{}))}},{key:"createSnapshot",value:function(){var e=this.editor,t=e.selectionRotation,n=e.inputs.originPagePoint,r=this.editor.onlySelectedShape,i=this.editor.selectionBounds,o=Nl.RotWith(i.getHandlePoint(this.info.handle),i.point,t);return{shape:r,cursorHandleOffset:Nl.Sub(n,o)}}}]),n}(lv);vt(lb,"id","cropping");var cb=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"shapeId",""),vt(_t(e),"initialHandle",{}),vt(_t(e),"initialAdjacentHandle",null),vt(_t(e),"markId",""),vt(_t(e),"initialPageTransform",void 0),vt(_t(e),"initialPageRotation",void 0),vt(_t(e),"info",{}),vt(_t(e),"isPrecise",!1),vt(_t(e),"isPreciseId",null),vt(_t(e),"pointingId",null),vt(_t(e),"onEnter",(function(t){var n=t.shape,r=t.isCreating,i=t.handle;e.info=t,e.shapeId=n.id,e.markId=r?"creating":e.editor.mark("dragging handle"),e.initialHandle=Nr(i),e.initialPageTransform=e.editor.getPageTransform(n),e.initialPageRotation=e.editor.getPageRotation(n),e.editor.setCursor({type:r?"cross":"grabbing",rotation:0});var o=e.editor.getShapeUtil(n).handles(n).sort(mr),a=o.findIndex((function(e){return e.id===t.handle.id}));e.initialAdjacentHandle=null;for(var s=a+1;s<o.length;s++){var u=o[s];if("vertex"===u.type&&"middle"!==u.id&&u.id!==t.handle.id){e.initialAdjacentHandle=u;break}}if(!e.initialAdjacentHandle)for(var l=o.length-1;l>=0;l--){var c=o[l];if("vertex"===c.type&&"middle"!==c.id&&c.id!==t.handle.id){e.initialAdjacentHandle=c;break}}var d=n.props[t.handle.id];e.isPrecise=!1,"binding"===(null===d||void 0===d?void 0:d.type)&&(e.editor.setHintingIds([d.boundShapeId]),e.isPrecise=!Nl.Equals(d.normalizedAnchor,{x:.5,y:.5}),e.isPrecise?e.isPreciseId=d.boundShapeId:e.resetExactTimeout()),e.update()})),vt(_t(e),"exactTimeout",-1),vt(_t(e),"onPointerMove",(function(){e.update()})),vt(_t(e),"onKeyDown",(function(){e.update()})),vt(_t(e),"onKeyUp",(function(){e.update()})),vt(_t(e),"onPointerUp",(function(){e.complete()})),vt(_t(e),"onComplete",(function(){e.complete()})),vt(_t(e),"onCancel",(function(){e.cancel()})),vt(_t(e),"onExit",(function(){e.editor.setHintingIds([]),e.editor.snaps.clear(),e.editor.setCursor({type:"default"})})),e}return oe(n,[{key:"resetExactTimeout",value:function(){var e=this;-1!==this.exactTimeout&&this.clearExactTimeout(),this.exactTimeout=setTimeout((function(){e.isActive&&!e.isPrecise&&(e.isPrecise=!0,e.isPreciseId=e.pointingId,e.update()),e.exactTimeout=-1}),750)}},{key:"clearExactTimeout",value:function(){-1!==this.exactTimeout&&(clearTimeout(this.exactTimeout),this.exactTimeout=-1)}},{key:"complete",value:function(){this.editor.snaps.clear();var e=this.info.onInteractionEnd;this.editor.instanceState.isToolLocked&&e?this.editor.setSelectedTool(e,{shapeId:this.shapeId}):this.parent.transition("idle",{})}},{key:"cancel",value:function(){this.editor.bailToMark(this.markId),this.editor.snaps.clear();var e=this.info.onInteractionEnd;e?this.editor.setSelectedTool(e,{shapeId:this.shapeId}):this.parent.transition("idle",{})}},{key:"update",value:function(){var e,t=this.editor,n=this.shapeId,r=this.initialHandle,i=this.initialPageRotation,o=this.initialAdjacentHandle,a=t.isSnapMode,s=t.hintingIds,u=t.snaps,l=t.inputs,c=l.currentPagePoint,d=l.originPagePoint,f=l.shiftKey,h=l.ctrlKey,p=l.altKey,v=l.pointerVelocity,g=t.getShapeById(n);if(g){var m=t.getShapeUtil(g),y=c.clone().sub(d).rot(-i).add(r);if(f&&o&&"middle"!==r.id){var b=Nl.Angle(o,y),w=Gl(b,24)-b;y=Nl.RotWith(y,o,w)}if(t.snaps.clear(),a?!h:h){var x=t.getPageTransformById(g.id);if(!x)throw Error("Expected a page transform");var k=m.outlineSegments(g).map((function(e){return mc.applyToPoints(x,e)})),S=m.handles(g).filter((function(e){return"vertex"===e.type})).sort(mr).findIndex((function(e){var t=e.index;return r.index===t}));k.splice(S-1,2);var _=u.getSnappingHandleDelta({additionalSegments:k,handlePoint:mc.applyToPoint(x,y)});_&&y.add(t.getDeltaInShapeSpace(g,_))}var E=null===(e=m.onHandleChange)||void 0===e?void 0:e.call(m,g,{handle:mt(mt({},r),{},{x:y.x,y:y.y}),isPrecise:this.isPrecise||p}),C=mt(mt({},g),E);if(r.canBind){var P=C.props[r.id];"binding"===(null===P||void 0===P?void 0:P.type)?s[0]!==P.boundShapeId&&(t.setHintingIds([P.boundShapeId]),this.pointingId=P.boundShapeId,this.isPrecise=v.len()<.5||p,this.isPreciseId=this.isPrecise?P.boundShapeId:null,this.resetExactTimeout()):s.length>0&&(t.setHintingIds([]),this.pointingId=null,this.isPrecise=!1,this.isPreciseId=null,this.resetExactTimeout())}E&&t.updateShapes([C],!0)}}}]),n}(lv);vt(cb,"id","dragging_handle");var db=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"onPointerEnter",(function(t){if("shape"===t.target){var n=e.editor,r=n.selectedIds,i=n.focusLayerId,o=e.editor.getOutermostSelectableShape(t.shape,(function(e){return!r.includes(e.id)}));o.id!==i&&e.editor.setHoveredId(o.id)}})),vt(_t(e),"onPointerLeave",(function(t){if("shape"===t.target)e.editor.setHoveredId(null)})),vt(_t(e),"onExit",(function(){var t;if(e.editor.pageState.editingId){var n=e.editor.pageState.editingId;if(n){e.editor.setEditingId(null);var r=e.editor.getShapeById(n),i=e.editor.getShapeUtil(r);null===(t=i.onEditEnd)||void 0===t||t.call(i,r)}}})),vt(_t(e),"onPointerDown",(function(t){var n,r;if("shape"===t.target){var i=t.shape,o=e.editor.pageState.editingId;if(o){if(i.id===o)return;var a=e.editor.getShapeById(o);if(a){var s,u,l=e.editor.getShapeUtil(a);null===(s=l.onEditEnd)||void 0===s||s.call(l,a);var c=e.editor.getShapeUtil(i);if(i.type===a.type&&null!==(u=c.canEdit)&&void 0!==u&&u.call(c,i)&&!e.editor.isShapeOrAncestorLocked(i))return e.editor.setEditingId(i.id),e.editor.setHoveredId(i.id),void e.editor.setSelectedIds([i.id])}}}e.parent.transition("idle",t),null===(n=e.parent.current.value)||void 0===n||null===(r=n.onPointerDown)||void 0===r||r.call(n,t)})),vt(_t(e),"onComplete",(function(t){e.parent.transition("idle",t)})),vt(_t(e),"onCancel",(function(t){e.parent.transition("idle",t)})),e}return oe(n)}(lv);vt(db,"id","editing_shape");var fb=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"isDarwin",window.navigator.userAgent.toLowerCase().indexOf("mac")>-1),vt(_t(e),"onPointerEnter",(function(t){switch(t.target){case"canvas":break;case"shape":var n=e.editor,r=n.selectedIds,i=n.focusLayerId,o=e.editor.getOutermostSelectableShape(t.shape,(function(e){return!r.includes(e.id)}));if(o.id!==i&&e.editor.setHoveredId(o.id),Kc.debugCursors.value){if("geo"!==o.type)break;var a=o.props.text;try{e.editor.setCursor({type:a})}catch(VO){console.error("Cursor type not recognized: '".concat(a,"'")),e.editor.setCursor({type:"default"})}}}})),vt(_t(e),"onPointerLeave",(function(t){if("shape"===t.target)e.editor.setHoveredId(null)})),vt(_t(e),"onPointerDown",(function(t){if(!e.editor.isMenuOpen){var n=e.shouldEnterCropMode(t,!0);if(t.ctrlKey&&!n)return"shape"===t.target&&e.isDarwin&&e.editor.inputs.keys.has("ControlLeft")&&!e.editor.isShapeOrAncestorLocked(t.shape)?void e.parent.transition("pointing_shape",t):void e.parent.transition("brushing",t);switch(t.target){case"canvas":e.parent.transition("pointing_canvas",t);break;case"shape":if(e.editor.isShapeOrAncestorLocked(t.shape))break;e.parent.transition("pointing_shape",t);break;case"handle":if(e.editor.isReadOnly)break;e.editor.inputs.altKey?e.parent.transition("pointing_shape",t):e.parent.transition("pointing_handle",t);break;case"selection":switch(t.handle){case"mobile_rotate":case"top_left_rotate":case"top_right_rotate":case"bottom_left_rotate":case"bottom_right_rotate":e.parent.transition("pointing_rotate_handle",t);break;case"top":case"right":case"bottom":case"left":case"top_left":case"top_right":case"bottom_left":case"bottom_right":n?e.parent.transition("pointing_crop_handle",t):e.parent.transition("pointing_resize_handle",t);break;default:e.parent.transition("pointing_selection",t)}}}})),vt(_t(e),"onDoubleClick",(function(t){if("up"===t.phase)switch(t.target){case"canvas":if(e.editor.isReadOnly)break;e.handleDoubleClickOnCanvas(t);break;case"selection":if(e.editor.isReadOnly)break;var n=e.editor.onlySelectedShape;if(n){var r=e.editor.getShapeUtil(n);if("right"===t.handle||"left"===t.handle||"top"===t.handle||"bottom"===t.handle){var i,o=null===(i=r.onDoubleClickEdge)||void 0===i?void 0:i.call(r,n);if(o)return e.editor.mark("double click edge"),void e.editor.updateShapes([o])}if(r.canCrop(n)&&!e.editor.isShapeOrAncestorLocked(n))return void e.parent.transition("crop",t);e.shouldStartEditingShape(n)&&e.startEditingShape(n,t)}break;case"shape":var a=t.shape,s=e.editor.getShapeUtil(a);if("video"!==a.type&&"embed"!==a.type&&e.editor.isReadOnly)break;if(s.onDoubleClick){var u,l,c=null===(u=s.onDoubleClick)||void 0===u?void 0:u.call(s,a);if(c)return void e.editor.updateShapes([c]);if(s.canCrop(a)&&!e.editor.isShapeOrAncestorLocked(a))return e.editor.mark("select and crop"),e.editor.select(null===(l=t.shape)||void 0===l?void 0:l.id),void e.parent.transition("crop",t)}e.shouldStartEditingShape(a)?e.startEditingShape(a,t):e.handleDoubleClickOnCanvas(t);break;case"handle":var d;if(e.editor.isReadOnly)break;var f=t.shape,h=t.handle,p=e.editor.getShapeUtil(f),v=null===(d=p.onDoubleClickHandle)||void 0===d?void 0:d.call(p,f,h);v?e.editor.updateShapes([v]):e.shouldStartEditingShape(f)&&e.startEditingShape(f,t)}})),vt(_t(e),"onRightClick",(function(t){switch(t.target){case"canvas":e.editor.selectNone();break;case"shape":var n=e.editor.pageState.selectedIds,r=t.shape,i=e.editor.getOutermostSelectableShape(r,(function(t){return!e.editor.isSelected(t.id)}));n.includes(i.id)||(e.editor.mark("selecting shape"),e.editor.setSelectedIds([i.id]))}})),vt(_t(e),"onEnter",(function(){e.editor.setHoveredId(null),e.editor.setCursor({type:"default"})})),vt(_t(e),"onCancel",(function(){e.editor.focusLayerId!==e.editor.currentPageId&&e.editor.selectedIds.length>0?e.editor.popFocusLayer():(e.editor.mark("clearing selection"),e.editor.selectNone())})),vt(_t(e),"onKeyDown",(function(t){switch(t.code){case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":e.nudgeSelectedShapes(!1)}})),vt(_t(e),"onKeyRepeat",(function(t){switch(t.code){case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":e.nudgeSelectedShapes(!0)}})),vt(_t(e),"onKeyUp",(function(t){if(e.editor.isReadOnly){if("Enter"===t.code)if(e.shouldStartEditingShape()&&e.editor.onlySelectedShape)return void e.startEditingShape(e.editor.onlySelectedShape,mt(mt({},t),{},{target:"shape",shape:e.editor.onlySelectedShape}))}else if("Enter"===t.code){var n=e.editor.selectedShapes;if(n.every((function(t){return e.editor.isShapeOfType(t,Eg)})))return void e.editor.setSelectedIds(n.flatMap((function(t){return e.editor.getSortedChildIds(t.id)})));if(e.shouldStartEditingShape()&&e.editor.onlySelectedShape)return void e.startEditingShape(e.editor.onlySelectedShape,mt(mt({},t),{},{target:"shape",shape:e.editor.onlySelectedShape}));e.shouldEnterCropMode(t,!1)&&e.parent.transition("crop",t)}})),e}return oe(n,[{key:"shouldStartEditingShape",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.editor.onlySelectedShape;return!!e&&((!this.editor.isShapeOrAncestorLocked(e)||"embed"===e.type)&&this.editor.getShapeUtil(e).canEdit(e))}},{key:"shouldEnterCropMode",value:function(e,t){var n=this.editor.onlySelectedShape;if(!n)return!1;if(this.editor.isShapeOrAncestorLocked(n))return!1;var r=this.editor.getShapeUtil(n);return t?r.canCrop(n)&&e.ctrlKey:r.canCrop(n)}},{key:"startEditingShape",value:function(e,t){this.editor.isShapeOrAncestorLocked(e)&&"embed"!==e.type||(this.editor.mark("editing shape"),this.editor.setEditingId(e.id),this.parent.transition("editing_shape",t))}},{key:"handleDoubleClickOnCanvas",value:function(e){this.editor.mark("creating text shape");var t=Os(),n=this.editor.inputs.currentPagePoint,r=n.x,i=n.y;this.editor.createShapes([{id:t,type:"text",x:r,y:i,props:{text:"",autoSize:!0}}]);var o=this.editor.getShapeById(t);if(o){var a=this.editor.getBounds(o);this.editor.updateShapes([{id:t,type:"text",x:o.x-a.width/2,y:o.y-a.height/2}]),this.editor.setEditingId(t),this.editor.select(t),this.parent.transition("editing_shape",e)}}},{key:"nudgeSelectedShapes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.editor.inputs.keys,n=t.has("ShiftLeft"),r=new Nl(0,0);t.has("ArrowLeft")&&(r.x-=1),t.has("ArrowRight")&&(r.x+=1),t.has("ArrowUp")&&(r.y-=1),t.has("ArrowDown")&&(r.y+=1),r.equals(new Nl(0,0))||(e||this.editor.mark("nudge shapes"),this.editor.nudgeShapes(this.editor.selectedIds,r,n))}}]),n}(lv);vt(fb,"id","idle");var hb=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"onEnter",(function(){e.editor.inputs.shiftKey||e.editor.selectedIds.length>0&&(e.editor.mark("selecting none"),e.editor.selectNone())})),vt(_t(e),"onPointerMove",(function(t){e.editor.inputs.isDragging&&e.parent.transition("brushing",t)})),vt(_t(e),"onPointerUp",(function(){e.complete()})),vt(_t(e),"onComplete",(function(){e.complete()})),vt(_t(e),"onInterrupt",(function(){e.parent.transition("idle",{})})),e}return oe(n,[{key:"_clickWasInsideFocusedGroup",value:function(){var e=this.editor,t=e.focusLayerId,n=e.inputs;if(!Ts(t))return!1;var r=this.editor.getShapeById(t);if(!r)return!1;var i=this.editor.getPointInShapeSpace(r,n.currentPagePoint);return this.editor.getShapeUtil(r).hitTestPoint(r,i)}},{key:"complete",value:function(){this.editor.inputs.shiftKey||(this.editor.selectNone(),this._clickWasInsideFocusedGroup()||this.editor.setFocusLayer(null)),this.parent.transition("idle",{})}}]),n}(lv);vt(hb,"id","pointing_canvas");var pb=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"info",{}),vt(_t(e),"onEnter",(function(t){e.info=t;var n=e.editor.selectedShapes[0];n&&(e.updateCursor(n),e.editor.setCroppingId(n.id))})),vt(_t(e),"onPointerMove",(function(){e.editor.inputs.isDragging&&e.parent.transition("cropping",mt(mt({},e.info),{},{onInteractionEnd:e.info.onInteractionEnd}))})),vt(_t(e),"onPointerUp",(function(){e.info.onInteractionEnd?e.editor.setSelectedTool(e.info.onInteractionEnd,e.info):(e.editor.setCroppingId(null),e.parent.transition("idle",{}))})),vt(_t(e),"onCancel",(function(){e.cancel()})),vt(_t(e),"onComplete",(function(){e.cancel()})),vt(_t(e),"onInterrupt",(function(){e.cancel()})),e}return oe(n,[{key:"updateCursor",value:function(e){var t=sb[this.info.handle];this.editor.setCursor({type:t,rotation:e.rotation})}},{key:"cancel",value:function(){this.info.onInteractionEnd?this.editor.setSelectedTool(this.info.onInteractionEnd,this.info):(this.editor.setCroppingId(null),this.parent.transition("idle",{}))}}]),n}(lv);vt(pb,"id","pointing_crop_handle");var vb=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"info",{}),vt(_t(e),"onEnter",(function(t){e.info=t;var n=t.shape.props[t.handle.id];"binding"===(null===n||void 0===n?void 0:n.type)&&e.editor.setHintingIds([n.boundShapeId]),e.editor.setCursor({type:"grabbing"})})),vt(_t(e),"onExit",(function(){e.editor.setHintingIds([]),e.editor.setCursor({type:"default"})})),vt(_t(e),"onPointerUp",(function(){e.parent.transition("idle",e.info)})),vt(_t(e),"onPointerMove",(function(){e.editor.inputs.isDragging&&e.parent.transition("dragging_handle",e.info)})),vt(_t(e),"onCancel",(function(){e.cancel()})),vt(_t(e),"onComplete",(function(){e.cancel()})),vt(_t(e),"onInterrupt",(function(){e.cancel()})),e}return oe(n,[{key:"cancel",value:function(){this.parent.transition("idle",{})}}]),n}(lv);vt(vb,"id","pointing_handle");var gb=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"info",{}),vt(_t(e),"onEnter",(function(t){e.info=t,e.updateCursor()})),vt(_t(e),"onPointerMove",(function(){e.editor.inputs.isDragging&&e.parent.transition("rotating",e.info)})),vt(_t(e),"onPointerUp",(function(){e.complete()})),vt(_t(e),"onCancel",(function(){e.cancel()})),vt(_t(e),"onComplete",(function(){e.cancel()})),vt(_t(e),"onInterrupt",(function(){e.cancel()})),e}return oe(n,[{key:"updateCursor",value:function(){var e=this.editor.selectionRotation;this.editor.setCursor({type:sb[this.info.handle],rotation:e})}},{key:"complete",value:function(){this.info.onInteractionEnd?this.editor.setSelectedTool(this.info.onInteractionEnd,{}):this.parent.transition("idle",{})}},{key:"cancel",value:function(){this.info.onInteractionEnd?this.editor.setSelectedTool(this.info.onInteractionEnd,{}):this.parent.transition("idle",{})}}]),n}(lv);vt(gb,"id","pointing_rotate_handle");var mb=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"info",{}),vt(_t(e),"onEnter",(function(t){e.info=t})),vt(_t(e),"onPointerUp",(function(t){e.editor.selectNone(),e.parent.transition("idle",t)})),vt(_t(e),"onPointerMove",(function(t){if(e.editor.inputs.isDragging){if(e.editor.isReadOnly)return;e.parent.transition("translating",t)}})),vt(_t(e),"onCancel",(function(){e.cancel()})),vt(_t(e),"onComplete",(function(){e.cancel()})),vt(_t(e),"onInterrupt",(function(){e.cancel()})),e}return oe(n,[{key:"cancel",value:function(){this.parent.transition("idle",{})}}]),n}(lv);vt(mb,"id","pointing_selection");var yb=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"eventTargetShape",{}),vt(_t(e),"selectingShape",{}),vt(_t(e),"didSelectOnEnter",!1),vt(_t(e),"onEnter",(function(t){var n;if(e.eventTargetShape=t.shape,e.selectingShape=e.editor.getOutermostSelectableShape(t.shape),e.editor.getShapeUtil(t.shape).onClick||e.selectingShape.id===e.editor.focusLayerId)e.didSelectOnEnter=!1;else{var r=e.editor.isWithinSelection(e.selectingShape.id),i=e.editor.selectedIds.length>1&&(null===(n=e.editor.selectionBounds)||void 0===n?void 0:n.containsPoint(e.editor.inputs.currentPagePoint));if(e.didSelectOnEnter=!r&&e.selectingShape.id!==e.editor.focusLayerId&&!i,e.didSelectOnEnter){var o=e.editor,a=o.inputs,s=o.selectedIds,u=e.editor.getParentShape(t.shape);u&&e.editor.isShapeOfType(u,Eg)&&e.editor.cancelDoubleClick(),a.shiftKey&&!a.altKey?s.includes(e.selectingShape.id)||(e.editor.mark("shift selecting shape"),e.editor.setSelectedIds([].concat(d(s),[e.selectingShape.id]))):(e.editor.mark("selecting shape"),e.editor.setSelectedIds([e.selectingShape.id]))}}})),vt(_t(e),"onPointerUp",(function(t){var n=t.shape;if(n){var r=e.editor.getShapeUtil(n);if(r.onClick){var i,o=null===(i=r.onClick)||void 0===i?void 0:i.call(r,n);if(o)return e.editor.updateShapes([o]),void e.parent.transition("idle",t)}}if(e.didSelectOnEnter||e.selectingShape.id===e.editor.focusLayerId)e.selectingShape.id===e.editor.focusLayerId&&(e.editor.selectedIds.length>0?e.editor.setSelectedIds([]):e.editor.popFocusLayer());else{e.editor.mark("selecting shape (pointer up)");var a=e.editor.getOutermostSelectableShape(e.eventTargetShape,(function(t){return!e.editor.isSelected(t.id)}));if(e.editor.selectedIds.includes(a.id))e.editor.setSelectedIds(e.editor.inputs.shiftKey?e.editor.selectedIds.filter((function(t){return t!==e.selectingShape.id})):[e.selectingShape.id]);else if(e.editor.inputs.shiftKey){var s=e.editor.getAncestors(a);e.editor.setSelectedIds([].concat(d(e.editor.selectedIds.filter((function(e){return!s.find((function(t){return t.id===e}))}))),[a.id]))}else e.editor.setSelectedIds([a.id])}e.parent.transition("idle",t)})),vt(_t(e),"onPointerMove",(function(t){if(e.editor.inputs.isDragging){if(e.editor.isReadOnly)return;e.parent.transition("translating",t)}})),vt(_t(e),"onCancel",(function(){e.cancel()})),vt(_t(e),"onComplete",(function(){e.cancel()})),vt(_t(e),"onInterrupt",(function(){e.cancel()})),e}return oe(n,[{key:"cancel",value:function(){this.parent.transition("idle",{})}}]),n}(lv);vt(yb,"id","pointing_shape");var bb=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"info",{}),vt(_t(e),"markId",""),vt(_t(e),"creationCursorOffset",{x:0,y:0}),vt(_t(e),"editAfterComplete",!1),vt(_t(e),"snapshot",{}),vt(_t(e),"onEnter",(function(t){var n=t.isCreating,r=void 0!==n&&n,i=t.editAfterComplete,o=void 0!==i&&i,a=t.creationCursorOffset,s=void 0===a?{x:0,y:0}:a;e.info=t,e.editAfterComplete=o,e.creationCursorOffset=s,t.isCreating&&e.editor.setCursor({type:"cross",rotation:0}),e.snapshot=e._createSnapshot(),e.markId=r?"creating":e.editor.mark("starting resizing"),e.handleResizeStart(),e.updateShapes()})),vt(_t(e),"onPointerMove",(function(){e.updateShapes()})),vt(_t(e),"onKeyDown",(function(){e.updateShapes()})),vt(_t(e),"onKeyUp",(function(){e.updateShapes()})),vt(_t(e),"onPointerUp",(function(){e.complete()})),vt(_t(e),"onComplete",(function(){e.complete()})),vt(_t(e),"onCancel",(function(){e.cancel()})),vt(_t(e),"onExit",(function(){e.editor.snaps.clear()})),vt(_t(e),"_createSnapshot",(function(){var t=e.editor,n=t.selectedIds,r=t.selectionRotation,i=t.inputs.originPagePoint,o=e.editor.selectionBounds,a=Nl.RotWith(o.getHandlePoint(e.info.handle),o.point,r),s=Nl.Sub(i,a),u=new Map;n.forEach((function(t){var r=e.editor.getShapeById(t);if(r){if(u.set(r.id,e._createShapeSnapshot(r)),e.editor.isShapeOfType(r,Ig)&&1===n.length)return;e.editor.visitDescendants(r.id,(function(t){var n=e.editor.getShapeById(t);if(n&&(u.set(n.id,e._createShapeSnapshot(n)),e.editor.isShapeOfType(n,Ig)))return!1}))}}));var l=!d(u.values()).some((function(e){return!Ql(e.pageRotation,r)||e.isAspectRatioLocked}));return{shapeSnapshots:u,selectionBounds:o,cursorHandleOffset:s,selectionRotation:r,selectedIds:n,canShapesDeform:l,initialSelectionPageBounds:e.editor.selectedPageBounds}})),vt(_t(e),"_createShapeSnapshot",(function(t){var n=e.editor.getPageTransform(t),r=e.editor.getShapeUtil(t);return{shape:t,bounds:r.bounds(t),pageTransform:n,pageRotation:mc.Decompose(n).rotation,isAspectRatioLocked:r.isAspectRatioLocked(t)}})),e}return oe(n,[{key:"cancel",value:function(){this.editor.bailToMark(this.markId),this.info.onInteractionEnd?this.editor.setSelectedTool(this.info.onInteractionEnd,{}):this.parent.transition("idle",{})}},{key:"complete",value:function(){if(this.handleResizeEnd(),this.editAfterComplete&&this.editor.onlySelectedShape)return this.editor.setEditingId(this.editor.onlySelectedShape.id),this.editor.setSelectedTool("select"),void this.editor.root.current.value.transition("editing_shape",{});this.editor.instanceState.isToolLocked&&this.info.onInteractionEnd?this.editor.setSelectedTool(this.info.onInteractionEnd,{}):this.parent.transition("idle",{})}},{key:"handleResizeStart",value:function(){var e=this,t=this.snapshot.shapeSnapshots,n=[];t.forEach((function(t){var r,i=t.shape,o=e.editor.getShapeUtil(i),a=null===(r=o.onResizeStart)||void 0===r?void 0:r.call(o,i);a&&n.push(a)})),n.length>0&&this.editor.updateShapes(n)}},{key:"handleResizeEnd",value:function(){var e=this,t=this.snapshot.shapeSnapshots,n=[];t.forEach((function(t){var r,i=t.shape,o=e.editor.getShapeById(i.id),a=e.editor.getShapeUtil(i),s=null===(r=a.onResizeEnd)||void 0===r?void 0:r.call(a,i,o);s&&n.push(s)})),n.length>0&&this.editor.updateShapes(n)}},{key:"updateShapes",value:function(){var e=this.editor.inputs,t=e.altKey,n=e.shiftKey,r=this.snapshot,i=r.shapeSnapshots,o=r.selectionBounds,a=r.cursorHandleOffset,s=r.selectedIds,u=r.selectionRotation,l=r.canShapesDeform,c=n||!l,d=this.editor.inputs.ctrlKey,f=this.editor.inputs.currentPagePoint.clone().sub(a).sub(this.creationCursorOffset),h=this.editor.inputs.originPagePoint.clone().sub(a);this.editor.isGridMode&&!d&&f.snapToGrid(this.editor.gridSize);var p=this.info.handle,v=xb(p,Math.PI);if(this.editor.snaps.clear(),(this.editor.isSnapMode?!d:d)&&u%Dl===0){var g=this.editor.snaps.snapResize({dragDelta:Nl.Sub(f,h),initialSelectionPageBounds:this.snapshot.initialSelectionPageBounds,handle:xb(p,u),isAspectRatioLocked:c,isResizingFromCenter:t}).nudge;f.add(g)}var m=Nl.RotWith(t?o.center:o.getHandlePoint(v),o.point,u),y=Nl.Sub(f,m).rot(-u),b=Nl.Sub(h,m).rot(-u),x=Nl.DivV(y,b);Number.isFinite(x.x)||(x.x=1),Number.isFinite(x.y)||(x.y=1);var k="top"===p||"bottom"===p,S="left"===p||"right"===p;c?S?x.y=Math.abs(x.x):k?x.x=Math.abs(x.y):Math.abs(x.x)>Math.abs(x.y)?x.y=Math.abs(x.x)*(x.y<0?-1:1):x.x=Math.abs(x.y)*(x.x<0?-1:1):(k&&(x.x=1),S&&(x.y=1)),this.info.isCreating||this.updateCursor({dragHandle:p,isFlippedX:x.x<0,isFlippedY:x.y<0,rotation:u});var _,E=w(i.keys());try{for(E.s();!(_=E.n()).done;){var C=_.value,P=i.get(C);this.editor.resizeShape(C,x,{initialBounds:P.bounds,dragHandle:p,initialPageTransform:P.pageTransform,initialShape:P.shape,mode:1===s.length&&C===s[0]?"resize_bounds":"scale_shape",scaleOrigin:m,scaleAxisRotation:u})}}catch(I){E.e(I)}finally{E.f()}}},{key:"updateCursor",value:function(e){var t=e.dragHandle,n=e.isFlippedX,r=e.isFlippedY,i=e.rotation,o=mt({},this.editor.cursor);switch(t){case"top_left":case"bottom_right":o.type="nwse-resize",n!==r&&(o.type="nesw-resize");break;case"top_right":case"bottom_left":o.type="nesw-resize",n!==r&&(o.type="nwse-resize")}o.rotation=i,this.editor.setCursor(o)}}]),n}(lv);vt(bb,"id","resizing");var wb=["top","top_right","right","bottom_right","bottom","bottom_left","left","top_left"];function xb(e,t){t%=zl;var n=Math.round(t/(Ll/4)),r=wb.indexOf(e);return wb[(r+n)%wb.length]}var kb=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"snapshot",{}),vt(_t(e),"info",{}),vt(_t(e),"markId",""),vt(_t(e),"onEnter",(function(t){e.info=t,e.markId=e.editor.mark("rotate start"),e.snapshot=_y({editor:e.editor}),e.handleStart()})),vt(_t(e),"onExit",(function(){e.editor.setCursor({type:"none"}),e.snapshot={}})),vt(_t(e),"onPointerMove",(function(){e.update()})),vt(_t(e),"onKeyDown",(function(){e.update()})),vt(_t(e),"onKeyUp",(function(){e.update()})),vt(_t(e),"onPointerUp",(function(){e.complete()})),vt(_t(e),"onComplete",(function(){e.complete()})),vt(_t(e),"onCancel",(function(){e.cancel()})),vt(_t(e),"update",(function(){var t=e._getRotationFromPointerPosition({snapToNearestDegree:!1});Ey({editor:e.editor,delta:t,snapshot:e.snapshot,stage:"update"}),e.editor.setCursor({type:sb[e.info.handle],rotation:t+e.snapshot.initialSelectionRotation})})),vt(_t(e),"cancel",(function(){e.editor.bailToMark(e.markId),e.info.onInteractionEnd?e.editor.setSelectedTool(e.info.onInteractionEnd,e.info):e.parent.transition("idle",e.info)})),vt(_t(e),"complete",(function(){Ey({editor:e.editor,delta:e._getRotationFromPointerPosition({snapToNearestDegree:!0}),snapshot:e.snapshot,stage:"end"}),e.info.onInteractionEnd?e.editor.setSelectedTool(e.info.onInteractionEnd,e.info):e.parent.transition("idle",e.info)})),e}return oe(n,[{key:"handleStart",value:function(){var e=this._getRotationFromPointerPosition({snapToNearestDegree:!1});Ey({editor:this.editor,delta:this._getRotationFromPointerPosition({snapToNearestDegree:!1}),snapshot:this.snapshot,stage:"start"}),this.editor.setCursor({type:sb[this.info.handle],rotation:e+this.snapshot.initialSelectionRotation})}},{key:"_getRotationFromPointerPosition",value:function(e){var t=e.snapToNearestDegree,n=this.editor,r=n.selectionPageCenter,i=n.inputs,o=i.shiftKey,a=i.currentPagePoint,s=this.snapshot,u=s.initialCursorAngle,l=s.initialSelectionRotation,c=l+(r.angle(a)-u);if(o)c=Gl(c,24);else if(t&&(c=Math.round(c/Bl)*Bl,this.editor.isCoarsePointer)){var d=Gl(c,4),f=Xl(c,d);Math.abs(f)<function(e){return e*Ll/180}(5)&&(c=d)}return c-l}}]),n}(lv);vt(kb,"id","rotating");var Sb=function(){function e(t){var n=this;ne(this,e),vt(this,"state",void 0),vt(this,"points",void 0),vt(this,"size",void 0),vt(this,"color",void 0),vt(this,"opacity",void 0),vt(this,"delay",void 0),vt(this,"timeoutMs",0),vt(this,"delayRemaining",0),vt(this,"onUpdate",void 0),vt(this,"onComplete",void 0),vt(this,"prev",null),vt(this,"next",null),vt(this,"resume",(function(){n.state="active"})),vt(this,"pause",(function(){n.state="starting"})),vt(this,"stop",(function(){n.delayRemaining=Math.min(n.delayRemaining,200),n.state="stopping"})),vt(this,"addPoint",(function(e,t){var r=n.prev,i={x:e,y:t,z:.5};r&&Nl.Dist(r,i)<1||(n.next=i)})),vt(this,"tick",(function(e){n.timeoutMs+=e,n.delayRemaining>0&&(n.delayRemaining=Math.max(0,n.delayRemaining-e)),n.timeoutMs>=16&&(n.timeoutMs=0);var t=n.timeoutMs,r=n.state,i=n.prev,o=n.next,a=n.points;switch(r){case"active":o&&o!==i?(n.prev=o,a.push(o),0===n.delayRemaining&&a.length>8&&a.shift(),n.updateScribble()):0===t&&(a.length>1?(a.shift(),n.updateScribble()):n.delayRemaining=n.delay);break;case"stopping":if(0===n.delayRemaining&&0===t){if(1===a.length)return n.state="paused",void n.onComplete();n.size*=.9,a.shift(),n.updateScribble()}}}));var r=t.size,i=void 0===r?20:r,o=t.color,a=void 0===o?"accent":o,s=t.opacity,u=void 0===s?.8:s,l=t.delay,c=void 0===l?0:l,d=t.onComplete,f=t.onUpdate;this.onUpdate=f,this.onComplete=d,this.size=i,this.color=a,this.delay=c,this.opacity=u,this.points=[],this.state="starting",this.prev=null,this.next=null,this.delayRemaining=this.delay,this.resume()}return oe(e,[{key:"getScribble",value:function(){return{state:this.state,size:this.size,color:this.color,opacity:this.opacity,delay:this.delay,points:d(this.points)}}},{key:"updateScribble",value:function(){this.onUpdate(this.getScribble())}}]),e}(),_b=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"hits",new Set),vt(_t(e),"size",0),vt(_t(e),"scribble",{}),vt(_t(e),"initialSelectedIds",new Set),vt(_t(e),"newlySelectedIds",new Set),vt(_t(e),"onEnter",(function(){e.initialSelectedIds=new Set(e.editor.inputs.shiftKey?e.editor.selectedIds:[]),e.newlySelectedIds=new Set,e.size=0,e.hits.clear(),e.startScribble(),e.updateBrushSelection(),requestAnimationFrame((function(){e.editor.setBrush(null)}))})),vt(_t(e),"onExit",(function(){e.editor.setErasingIds([]),e.scribble.stop()})),vt(_t(e),"onPointerMove",(function(){e.updateBrushSelection()})),vt(_t(e),"onPointerUp",(function(){e.complete()})),vt(_t(e),"onKeyDown",(function(){e.updateBrushSelection()})),vt(_t(e),"onKeyUp",(function(){e.editor.inputs.altKey?e.updateBrushSelection():e.parent.transition("brushing",{})})),vt(_t(e),"startScribble",(function(){var t;e.scribble.tick&&e.editor.off("tick",null===(t=e.scribble)||void 0===t?void 0:t.tick);e.scribble=new Sb({onUpdate:e.onScribbleUpdate,onComplete:e.onScribbleComplete,color:"selection-stroke",opacity:.32,size:12}),e.editor.on("tick",e.scribble.tick)})),vt(_t(e),"pushPointToScribble",(function(){var t=e.editor.inputs.currentPagePoint,n=t.x,r=t.y;e.scribble.addPoint(n,r)})),vt(_t(e),"onScribbleUpdate",(function(t){e.editor.setScribble(t)})),vt(_t(e),"onScribbleComplete",(function(){e.editor.off("tick",e.scribble.tick),e.editor.setScribble(null)})),vt(_t(e),"onCancel",(function(){e.cancel()})),vt(_t(e),"onComplete",(function(){e.complete()})),e}return oe(n,[{key:"updateBrushSelection",value:function(){var e=this.editor,t=e.shapesArray,n=e.inputs,r=n.originPagePoint,i=n.previousPagePoint,o=n.currentPagePoint;this.pushPointToScribble();for(var a,s,u=t,l=0,c=u.length;l<c;l++)if(a=u[l],s=this.editor.getShapeUtil(a),!(this.editor.isShapeOfType(a,Eg)||this.newlySelectedIds.has(a.id)||this.editor.isShapeOfType(a,Ig)&&s.hitTestPoint(a,this.editor.getPointInShapeSpace(a,r))||this.editor.isShapeOrAncestorLocked(a))&&s.hitTestLineSegment(a,this.editor.getPointInShapeSpace(a,i),this.editor.getPointInShapeSpace(a,o))){var f=this.editor.getOutermostSelectableShape(a),h=this.editor.getPageMaskById(f.id);if(h)if(null!==jc(i,o,h))if(!ic(o,h))continue;this.newlySelectedIds.add(f.id)}this.editor.setSelectedIds(d(new Set([].concat(d(this.newlySelectedIds),d(this.initialSelectedIds)))),!0)}},{key:"complete",value:function(){this.parent.transition("idle",{})}},{key:"cancel",value:function(){this.editor.setSelectedIds(d(this.initialSelectedIds),!0),this.parent.transition("idle",{})}}]),n}(lv);vt(_b,"id","scribble_brushing");var Eb=function(){function e(t){var n=this;ne(this,e),vt(this,"prevDroppingShapeId",null),vt(this,"currDroppingShapeId",null),vt(this,"droppingNodeTimer",null),vt(this,"dispose",(function(){n.clear()})),this.editor=t,t.disposables.add(this.dispose)}return oe(e,[{key:"updateDroppingNode",value:function(e,t){if(null===this.droppingNodeTimer){var n,r,i=this.editor.inputs.currentPagePoint;this.currDroppingShapeId=null!==(n=null===(r=this.editor.getDroppingShape(i,e))||void 0===r?void 0:r.id)&&void 0!==n?n:null,this.setDragTimer(e,1e3,t)}else this.editor.inputs.pointerVelocity.len()>.5&&(clearInterval(this.droppingNodeTimer),this.setDragTimer(e,100,t))}},{key:"setDragTimer",value:function(e,t,n){var r=this;this.droppingNodeTimer=setTimeout((function(){r.editor.batch((function(){r.handleDrag(e,n)})),r.droppingNodeTimer=null}),t)}},{key:"handleDrag",value:function(e,t){var n,r,i=this,o=this.editor.inputs.currentPagePoint;e=br(e.map((function(e){return i.editor.getShapeById(e.id)})));var a=null!==(n=null===(r=this.editor.getDroppingShape(o,e))||void 0===r?void 0:r.id)&&void 0!==n?n:null;a!==this.currDroppingShapeId&&(this.prevDroppingShapeId=this.currDroppingShapeId,this.currDroppingShapeId=a);var s=this.prevDroppingShapeId;if(a!==s){var u,l,c=s&&this.editor.getShapeById(s),d=a&&this.editor.getShapeById(a);if(this.prevDroppingShapeId=this.currDroppingShapeId,c)null===(u=(l=this.editor.getShapeUtil(c)).onDragShapesOut)||void 0===u||u.call(l,c,e);if(d){var f,h,p=null===(f=(h=this.editor.getShapeUtil(d)).onDragShapesOver)||void 0===f?void 0:f.call(h,d,e);p&&p.shouldHint&&this.editor.setHintingIds([d.id])}else this.editor.setHintingIds([]);null===t||void 0===t||t()}}},{key:"dropShapes",value:function(e){var t=this.currDroppingShapeId;if(this.handleDrag(e),t){var n,r,i=this.editor.getShapeById(t);if(!i)return;null===(n=(r=this.editor.getShapeUtil(i)).onDropShapesOver)||void 0===n||n.call(r,i,e)}}},{key:"clear",value:function(){this.prevDroppingShapeId=null,this.currDroppingShapeId=null,null!==this.droppingNodeTimer&&clearInterval(this.droppingNodeTimer),this.droppingNodeTimer=null,this.editor.setHintingIds([])}}]),e}(),Cb=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"info",{}),vt(_t(e),"selectionSnapshot",{}),vt(_t(e),"snapshot",{}),vt(_t(e),"markId",""),vt(_t(e),"isCloning",!1),vt(_t(e),"isCreating",!1),vt(_t(e),"editAfterComplete",!1),vt(_t(e),"dragAndDropManager",new Eb(e.editor)),vt(_t(e),"onEnter",(function(t){var n=t.isCreating,r=void 0!==n&&n,i=t.editAfterComplete,o=void 0!==i&&i;e.info=t,e.isCreating=r,e.editAfterComplete=o,e.markId=r?"creating":e.editor.mark("translating"),e.handleEnter(t),e.editor.on("tick",e.updateParent)})),vt(_t(e),"updateParent",(function(){var t=_t(e).snapshot;e.dragAndDropManager.updateDroppingNode(t.movingShapes,e.updateParentTransforms)})),vt(_t(e),"onExit",(function(){e.editor.off("tick",e.updateParent),e.selectionSnapshot={},e.snapshot={},e.editor.snaps.clear(),e.editor.setCursor({type:"default"}),e.dragAndDropManager.clear()})),vt(_t(e),"onPointerMove",(function(){e.updateShapes()})),vt(_t(e),"onKeyDown",(function(){!e.editor.inputs.altKey||e.isCloning?e.updateShapes():e.startCloning()})),vt(_t(e),"onKeyUp",(function(){e.editor.inputs.altKey||!e.isCloning?e.updateShapes():e.stopCloning()})),vt(_t(e),"onPointerUp",(function(){e.complete()})),vt(_t(e),"onComplete",(function(){e.complete()})),vt(_t(e),"onCancel",(function(){e.cancel()})),vt(_t(e),"updateParentTransforms",(function(){var t=_t(e),n=t.editor,r=t.snapshot.shapeSnapshots,i=[];r.forEach((function(e){var t=n.getShapeById(e.shape.id);if(!t)return null;i.push(t);var r=Vo(t.parentId)?null:mc.Inverse(n.getPageTransformById(t.parentId));e.parentTransform=r}))})),e}return oe(n,[{key:"reset",value:function(){this.editor.bailToMark(this.markId)}},{key:"startCloning",value:function(){this.isCreating||(this.isCloning=!0,this.reset(),this.markId=this.editor.mark("translating"),this.editor.duplicateShapes(),this.snapshot=Pb(this.editor),this.handleStart(),this.updateShapes())}},{key:"stopCloning",value:function(){this.isCloning=!1,this.snapshot=this.selectionSnapshot,this.reset(),this.markId=this.editor.mark("translating"),this.updateShapes()}},{key:"complete",value:function(){if(this.updateShapes(),this.dragAndDropManager.dropShapes(this.snapshot.movingShapes),this.handleEnd(),this.editor.instanceState.isToolLocked&&this.info.onInteractionEnd)this.editor.setSelectedTool(this.info.onInteractionEnd);else if(this.editAfterComplete){var e=this.editor.onlySelectedShape;e&&(this.editor.setEditingId(e.id),this.editor.setSelectedTool("select"),this.editor.root.current.value.transition("editing_shape",{}))}else this.parent.transition("idle",{})}},{key:"cancel",value:function(){this.reset(),this.info.onInteractionEnd?this.editor.setSelectedTool(this.info.onInteractionEnd):this.parent.transition("idle",this.info)}},{key:"handleEnter",value:function(e){this.isCloning=!1,this.info=e,this.editor.setCursor({type:"move"}),this.selectionSnapshot=Pb(this.editor),this.isCreating||!this.editor.inputs.altKey?(this.snapshot=this.selectionSnapshot,this.handleStart(),this.updateShapes()):this.startCloning()}},{key:"handleStart",value:function(){var e=this,t=this.snapshot.movingShapes,n=[];t.forEach((function(t){var r,i=e.editor.getShapeUtil(t),o=null===(r=i.onTranslateStart)||void 0===r?void 0:r.call(i,t);o&&n.push(o)})),n.length>0&&this.editor.updateShapes(n)}},{key:"handleEnd",value:function(){var e=this,t=this.snapshot.movingShapes,n=[];t.forEach((function(t){var r,i=e.editor.getShapeById(t.id),o=e.editor.getShapeUtil(t),a=null===(r=o.onTranslateEnd)||void 0===r?void 0:r.call(o,t,i);a&&n.push(a)})),n.length>0&&this.editor.updateShapes(n)}},{key:"handleChange",value:function(){var e=this,t=this.snapshot.movingShapes,n=[];t.forEach((function(t){var r,i=e.editor.getShapeById(t.id),o=e.editor.getShapeUtil(t),a=null===(r=o.onTranslate)||void 0===r?void 0:r.call(o,t,i);a&&n.push(a)})),n.length>0&&this.editor.updateShapes(n)}},{key:"updateShapes",value:function(){var e=this.snapshot;this.dragAndDropManager.updateDroppingNode(e.movingShapes,this.updateParentTransforms),function(e){var t=e.editor,n=e.shapeSnapshots,r=e.averagePagePoint,i=e.initialSelectionPageBounds,o=e.initialSelectionSnapPoints,a=t.inputs,s=t.isGridMode,u=t.gridSize,l=Nl.Sub(a.currentPagePoint,a.originPagePoint),c=t.inputs.shiftKey?Math.abs(l.x)<Math.abs(l.y)?"x":"y":null;"x"===c?l.x=0:"y"===c&&(l.y=0);if(t.snaps.clear(),(t.isSnapMode?!a.ctrlKey:a.ctrlKey)&&t.inputs.pointerVelocity.len()<.5){var d=t.snaps.snapTranslate({dragDelta:l,initialSelectionPageBounds:i,lockedAxis:c,initialSelectionSnapPoints:o}).nudge;l.add(d)}var f=Nl.Add(r,l);s&&!a.ctrlKey&&f.snapToGrid(u);var h=Nl.Sub(f,r);t.updateShapes(br(n.map((function(e){var t=e.shape,n=e.pagePoint,r=e.parentTransform,i=Nl.Add(n,h),o=r?mc.applyToPoint(r,i):i;return{id:t.id,type:t.type,x:o.x,y:o.y}}))),!0)}({editor:this.editor,shapeSnapshots:e.shapeSnapshots,averagePagePoint:e.averagePagePoint,initialSelectionPageBounds:e.initialPageBounds,initialSelectionSnapPoints:e.initialSnapPoints}),this.handleChange()}}]),n}(lv);function Pb(e){var t=[],n=[],r=br(e.selectedIds.map((function(r){var i=e.getShapeById(r);if(!i)return null;t.push(i);var o=e.getPagePointById(r);return o?(n.push(o),{shape:i,pagePoint:o,parentTransform:Ko.isId(i.parentId)?null:mc.Inverse(e.getPageTransformById(i.parentId))}):null})));return{averagePagePoint:Nl.Average(n),movingShapes:t,shapeSnapshots:r,initialPageBounds:e.selectedPageBounds,initialSnapPoints:1===e.selectedIds.length?e.snaps.snapPointsCache.get(e.selectedIds[0]):e.selectedPageBounds?e.selectedPageBounds.snapPoints.map((function(e,t){return{id:"selection:"+t,x:e.x,y:e.y}})):[]}}vt(Cb,"id","translating");var Ib=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"onExit",(function(){e.editor.pageState.editingId&&e.editor.setEditingId(null)})),e}return oe(n)}(lv);vt(Ib,"id","select"),vt(Ib,"initial","idle"),vt(Ib,"children",(function(){return[ab,lb,fb,hb,yb,Cb,tb,_b,pb,mb,ub,db,bb,kb,gb,vb,cb]}));var jb=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"info",{}),vt(_t(e),"onEnter",(function(t){e.info=t})),vt(_t(e),"onPointerDown",(function(){e.parent.transition("pointing",e.info)})),e}return oe(n)}(lv);vt(jb,"id","idle");var Mb=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"info",{}),vt(_t(e),"onEnter",(function(t){e.info=t})),vt(_t(e),"onPointerUp",(function(){e.complete()})),vt(_t(e),"onPointerMove",(function(){e.editor.inputs.isDragging&&e.parent.transition("zoom_brushing",e.info)})),vt(_t(e),"onCancel",(function(){e.cancel()})),e}return oe(n,[{key:"complete",value:function(){var e=this.editor.inputs.currentScreenPoint;this.editor.inputs.altKey?this.editor.zoomOut(e,{duration:220}):this.editor.zoomIn(e,{duration:220}),this.parent.transition("idle",this.info)}},{key:"cancel",value:function(){this.parent.transition("idle",this.info)}}]),n}(lv);vt(Mb,"id","pointing");var Ab=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"info",{}),vt(_t(e),"zoomBrush",new lc),vt(_t(e),"onEnter",(function(t){e.info=t,e.update()})),vt(_t(e),"onExit",(function(){e.editor.setZoomBrush(null)})),vt(_t(e),"onPointerMove",(function(){e.update()})),vt(_t(e),"onPointerUp",(function(){e.complete()})),vt(_t(e),"onCancel",(function(){e.cancel()})),e}return oe(n,[{key:"update",value:function(){var e=this.editor.inputs,t=e.originPagePoint,n=e.currentPagePoint;this.zoomBrush.setTo(lc.FromPoints([t,n])),this.editor.setZoomBrush(this.zoomBrush.toJson())}},{key:"cancel",value:function(){this.parent.transition("idle",this.info)}},{key:"complete",value:function(){var e=this.zoomBrush,t=8/this.editor.zoomLevel;if(e.width<t&&e.height<t){var n=this.editor.inputs.currentScreenPoint;this.editor.inputs.altKey?this.editor.zoomOut(n,{duration:220}):this.editor.zoomIn(n,{duration:220})}else{var r=this.editor.inputs.altKey?this.editor.zoomLevel/2:void 0;this.editor.zoomToBounds(e.x,e.y,e.width,e.height,r,{duration:220})}this.parent.transition("idle",this.info)}}]),n}(lv);vt(Ab,"id","zoom_brushing");var Tb=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"info",{}),vt(_t(e),"onEnter",(function(t){e.info=t,e.updateCursor()})),vt(_t(e),"onExit",(function(){e.editor.setZoomBrush(null),e.editor.setCursor({type:"default"})})),vt(_t(e),"onKeyDown",(function(){e.updateCursor()})),vt(_t(e),"onKeyUp",(function(t){e.updateCursor(),"KeyZ"===t.code&&e.complete()})),vt(_t(e),"onInterrupt",(function(){e.complete()})),e}return oe(n,[{key:"updateCursor",value:function(){this.editor.inputs.altKey?this.editor.setCursor({type:"zoom-out"}):this.editor.setCursor({type:"zoom-in"})}},{key:"complete",value:function(){this.info.onInteractionEnd&&"select"!==this.info.onInteractionEnd?this.editor.setSelectedTool(this.info.onInteractionEnd,this.info):this.parent.transition("select",{})}}]),n}(lv);vt(Tb,"id","zoom"),vt(Tb,"initial","idle"),vt(Tb,"children",(function(){return[jb,Ab,Mb]}));var Ob=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"onKeyDown",(function(t){if("KeyZ"===t.code)if(!t.shiftKey&&!t.ctrlKey){var n,r=e.current.value;r&&"idle"===(null===(n=r.current.value)||void 0===n?void 0:n.id)&&e.editor.setSelectedTool("zoom",mt(mt({},t),{},{onInteractionEnd:r.id}))}})),e}return oe(n)}(lv);vt(Ob,"id","root"),vt(Ob,"initial","select"),vt(Ob,"children",(function(){return[Ib,Tb]}));var Nb,Rb,Lb=Object.defineProperty,Db=Object.getOwnPropertyDescriptor,zb=function(e,t,n,r){for(var i,o=r>1?void 0:r?Db(t,n):t,a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Lb(t,n,o),o},Bb=function(e){xt(n,e);var t=Et(n);function n(e){var r,i=e.store,o=e.user,a=e.shapes,s=e.tools,u=e.getContainer;ne(this,n),vt(_t(r=t.call(this)),"store",void 0),vt(_t(r),"root",void 0),vt(_t(r),"disposables",new Set),vt(_t(r),"_dprManager",new Oy(_t(r))),vt(_t(r),"_activeAreaManager",new Ay(_t(r))),vt(_t(r),"_tickManager",new Zy(_t(r))),vt(_t(r),"_updateDepth",0),vt(_t(r),"externalContentManager",new Ny(_t(r))),vt(_t(r),"snaps",new Xy(_t(r))),vt(_t(r),"user",void 0),vt(_t(r),"isSafari",void 0),vt(_t(r),"isIos",void 0),vt(_t(r),"isChromeForIos",void 0),vt(_t(r),"getContainer",void 0),vt(_t(r),"history",new Ky(_t(r),(function(){return r._complete()}),(function(e){r.annotateError(e,{origin:"history.batch",willCrashApp:!0}),r.crash(e)}))),vt(_t(r),"shapeUtils",void 0),vt(_t(r),"_selectionSharedStyles",so("_selectionSharedStyles",(function(){var e,t=_t(r).selectedShapes,n=new qm,i=w(t);try{for(i.s();!(e=i.n()).done;){var o=e.value;r._extractSharedStyles(o,n)}}catch(a){i.e(a)}finally{i.f()}return n}))),vt(_t(r),"_invalidParents",new Set),vt(_t(r),"_crashingError",null),vt(_t(r),"_canMoveCamera",eo("can move camera",!0)),vt(_t(r),"_isFocused",eo("_isFocused",!1)),vt(_t(r),"_isCoarsePointer",eo("isCoarsePointer",!1)),vt(_t(r),"_openMenus",eo("open-menus",[])),vt(_t(r),"_isChangingStyle",eo("isChangingStyle",!1)),vt(_t(r),"_isChangingStyleTimeout",-1),vt(_t(r),"_isPenMode",eo("isPenMode",!1)),vt(_t(r),"_touchEventsRemainingBeforeExitingPenMode",0),vt(_t(r),"_isReadOnly",eo("isReadOnly",!1)),vt(_t(r),"_currentPageShapeIds",void 0),vt(_t(r),"_setSelectedIds",r.history.createCommand("setSelectedIds",(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=r.pageState.selectedIds,i=new Set(r.pageState.selectedIds);return e.length===i.size&&e.every((function(e){return i.has(e)}))?null:{data:{ids:e,prevSelectedIds:n},squashing:t,preservesRedoStack:!0}}),{do:function(e){var t=e.ids;r.store.update(r.pageState.id,(function(e){return mt(mt({},e),{},{selectedIds:t})}))},undo:function(e){var t=e.prevSelectedIds;r.store.update(r.pageState.id,(function(){return mt(mt({},r.pageState),{},{selectedIds:t})}))},squash:function(e,t){return{ids:t.ids,prevSelectedIds:e.prevSelectedIds}}})),vt(_t(r),"_setFocusLayer",r.history.createCommand("setFocusLayer",(function(e){if(null!==e||r.canUndo)return{data:{prev:r.pageState.focusLayerId,next:e},preservesRedoStack:!0,squashing:!0}}),{do:function(e){var t=e.next;r.store.update(r.pageState.id,(function(e){return mt(mt({},e),{},{focusLayerId:t})}))},undo:function(e){var t=e.prev;r.store.update(r.pageState.id,(function(e){return mt(mt({},e),{},{focusLayerId:t})}))},squash:function(e,t){return{prev:e.prev,next:t.next}}})),vt(_t(r),"_cameraState",eo("camera state","idle")),vt(_t(r),"_cameraStateTimeoutRemaining",0),vt(_t(r),"_lastUpdateRenderingBoundsTimestamp",Date.now()),vt(_t(r),"_decayCameraStateTimeout",(function(e){r._cameraStateTimeoutRemaining-=e,r._cameraStateTimeoutRemaining<=0&&(r.off("tick",r._decayCameraStateTimeout),r._cameraState.set("idle"),r.updateRenderingBounds())})),vt(_t(r),"_tickCameraState",(function(){r._cameraStateTimeoutRemaining=64;var e=Date.now();"idle"===r._cameraState.__unsafe__getWithoutCapture()?(r._lastUpdateRenderingBoundsTimestamp=e,r._cameraState.set("moving"),r.on("tick",r._decayCameraStateTimeout)):e-r._lastUpdateRenderingBoundsTimestamp>620&&r.updateRenderingBounds()})),vt(_t(r),"_renderingBounds",eo("rendering viewport",new lc)),vt(_t(r),"_renderingBoundsExpanded",eo("rendering viewport expanded",new lc)),vt(_t(r),"inputs",{originPagePoint:new Nl,originScreenPoint:new Nl,previousPagePoint:new Nl,previousScreenPoint:new Nl,currentPagePoint:new Nl,currentScreenPoint:new Nl,keys:new Set,buttons:new Set,isPen:!1,shiftKey:!1,ctrlKey:!1,altKey:!1,isDragging:!1,isPointing:!1,isPinching:!1,isEditing:!1,isPanning:!1,pointerVelocity:new Nl}),vt(_t(r),"_clickManager",new Ty(_t(r))),vt(_t(r),"_prevCursor","default"),vt(_t(r),"_shiftKeyTimeout",-1),vt(_t(r),"_setShiftKeyTimeout",(function(){r.inputs.shiftKey=!1,r.dispatch({type:"keyboard",name:"key_up",key:"Shift",shiftKey:r.inputs.shiftKey,ctrlKey:r.inputs.ctrlKey,altKey:r.inputs.altKey,code:"ShiftLeft"})})),vt(_t(r),"_altKeyTimeout",-1),vt(_t(r),"_setAltKeyTimeout",(function(){r.inputs.altKey=!1,r.dispatch({type:"keyboard",name:"key_up",key:"Alt",shiftKey:r.inputs.shiftKey,ctrlKey:r.inputs.ctrlKey,altKey:r.inputs.altKey,code:"AltLeft"})})),vt(_t(r),"_ctrlKeyTimeout",-1),vt(_t(r),"_setCtrlKeyTimeout",(function(){r.inputs.ctrlKey=!1,r.dispatch({type:"keyboard",name:"key_up",key:"Ctrl",shiftKey:r.inputs.shiftKey,ctrlKey:r.inputs.ctrlKey,altKey:r.inputs.altKey,code:"ControlLeft"})})),vt(_t(r),"_restoreToolId","select"),vt(_t(r),"_pinchStart",1),vt(_t(r),"_didPinch",!1),vt(_t(r),"_selectedIdsAtPointerDown",[]),vt(_t(r),"capturedPointerId",null),vt(_t(r),"_createShapes",r.history.createCommand("createShapes",(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(r.isReadOnly)return null;if(e.length<=0)return null;var n=_t(r),i=n.currentPageShapeIds,o=n.selectedIds,a=t?o:void 0,s=e.length+i.size>yd;s&&Fb(_t(r));var u=s?e.slice(0,yd-i.size):e;return 0===u.length?null:{data:{currentPageId:r.currentPageId,createdIds:e.map((function(e){return e.id})),prevSelectedIds:a,partials:u,select:t}}}),{do:function(e){var t=e.createdIds,n=e.partials,i=e.select,o=_t(r).focusLayerId;n=n.map((function(e){if(!e.parentId||!r.store.get(e.parentId)&&!n.find((function(t){return t.id===e.parentId}))){var t,i;e=mt({},e);var a=r.getParentIdForNewShapeAtPoint({x:null!==(t=e.x)&&void 0!==t?t:0,y:null!==(i=e.y)&&void 0!==i?i:0},e.type);if(e.parentId=a,Ts(a)){var s,u,l,c=r.getPointInShapeSpace(r.getShapeById(a),{x:null!==(s=e.x)&&void 0!==s?s:0,y:null!==(u=e.y)&&void 0!==u?u:0});e.x=c.x,e.y=c.y,e.rotation=-r.getPageRotationById(a)+(null!==(l=e.rotation)&&void 0!==l?l:0)}return e.parentId===e.id&&(e.parentId=o),e}return e}));var a,s=new Map,u=[],c=w(n);try{for(c.s();!(a=c.n()).done;){var d,f,h,p,v=a.value,g=r.getShapeUtil(v),m=v.index;if(!m){var y,b=null!==(y=v.parentId)&&void 0!==y?y:o;s.has(b)||s.set(b,r.getHighestIndexForParent(b)),m=s.get(b),s.set(b,vr(m))}var x,k=g.defaultProps(),S=w(g.styleProps);try{for(S.s();!(x=S.n()).done;){var _=l(x.value,2),E=_[0];k[_[1]]=r.getStyleForNextShape(E)}}catch(I){S.e(I)}finally{S.f()}var C=r.store.schema.types.shape.create(mt(mt({},v),{},{index:m,opacity:null!==(d=v.opacity)&&void 0!==d?d:r.instanceState.opacityForNextShape,parentId:null!==(f=v.parentId)&&void 0!==f?f:o,props:"props"in v?mt(mt({},k),v.props):k}));if(void 0===C.index)throw Error("no index!");var P=null===(h=(p=r.getShapeUtil(C)).onBeforeCreate)||void 0===h?void 0:h.call(p,C);P&&(C=P),u.push(C)}}catch(I){c.e(I)}finally{c.f()}r.store.put(u),i&&r.store.update(r.pageState.id,(function(e){return mt(mt({},e),{},{selectedIds:t})}))},undo:function(e){var t=e.createdIds,n=e.prevSelectedIds;r.store.remove(t),n&&r.store.update(r.pageState.id,(function(e){return mt(mt({},e),{},{selectedIds:n})}))}})),vt(_t(r),"animatingShapes",new Map),vt(_t(r),"_updateShapes",r.history.createCommand("updateShapes",(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(r.isReadOnly)return null;var n=br(e),i=Object.fromEntries(br(n.map((function(e){var t=e.id;return r.getShapeById(t)}))).map((function(e){return[e.id,e]})));if(n.length<=0)return null;var o=br(n.map((function(e){var t,n=i[e.id];if(!n)return null;for(var r=null,o=0,a=Object.entries(e);o<a.length;o++){var s=l(a[o],2),u=s[0],c=s[1];if(void 0!==c)switch(u){case"id":case"type":case"typeName":continue;default:if(c!==n[u])if(r||(r=mt({},n)),"props"===u){for(var d=mt({},n.props),f=0,h=Object.entries(c);f<h.length;f++){var p=l(h[f],2),v=p[0],g=p[1];void 0!==g&&(d[v]=g)}r.props=d}else r[u]=c}}return null!==(t=r)&&void 0!==t?t:n}))),a=Object.fromEntries(o.map((function(e){return[e.id,e]})));return{data:{snapshots:i,updates:a},squashing:t}}),{do:function(e){for(var t=e.updates,n=Object.values(t),i=0;i<n.length;i++){var o,a,s=n[i],u=r.store.get(s.id);if(u){var l=null===(o=(a=r.getShapeUtil(s)).onBeforeUpdate)||void 0===o?void 0:o.call(a,u,s);l&&(n[i]=l)}}r.store.put(n)},undo:function(e){var t=e.snapshots;r.store.put(Object.values(t))},squash:function(e,t){return{snapshots:mt(mt({},t.snapshots),e.snapshots),updates:mt(mt({},e.updates),t.updates)}}})),vt(_t(r),"_deleteShapes",r.history.createCommand("delete_shapes",(function(e){if(r.isReadOnly)return null;if(0===e.length)return null;var t,n=d(r.pageState.selectedIds),i=new Set(e),o=w(e);try{for(o.s();!(t=o.n()).done;){var a=t.value;r.visitDescendants(a,(function(e){i.add(e)}))}}catch(f){o.e(f)}finally{o.f()}var s=d(i),u=r._arrowBindingsIndex.value,l=br(s.flatMap((function(e){var t=r.getShapeById(e),n=u[e];return n&&n.length>0?n.map((function(e){var t=e.arrowId;return r.getShapeById(t)})).concat(t):t}))),c=n.filter((function(e){return!i.has(e)}));return{data:{deletedIds:s,snapshots:l,prevSelectedIds:n,postSelectedIds:c}}}),{do:function(e){var t=e.deletedIds,n=e.postSelectedIds;r.store.remove(t),r.store.update(r.pageState.id,(function(e){return mt(mt({},e),{},{selectedIds:n})}))},undo:function(e){var t=e.snapshots,n=e.prevSelectedIds;r.store.put(t),r.store.update(r.pageState.id,(function(e){return mt(mt({},e),{},{selectedIds:n})}))}})),vt(_t(r),"_updatePage",r.history.createCommand("updatePage",(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(r.isReadOnly)return null;var n=r.getPageById(e.id);return n?{data:{prev:n,partial:e},squashing:t}:null}),{do:function(e){var t=e.partial;r.store.update(t.id,(function(e){return mt(mt({},e),t)}))},undo:function(e){var t=e.prev,n=e.partial;r.store.update(n.id,(function(){return t}))},squash:function(e,t){return{prev:mt(mt({},e.prev),t.prev),partial:t.partial}}})),vt(_t(r),"_createPage",r.history.createCommand("createPage",(function(e){var t,n,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ko.createId(),a=arguments.length>2?arguments[2]:void 0;if(r.isReadOnly)return null;if(r.pages.length>=40)return null;var s=r.pages,u=null!==(t=null!==a&&void 0!==a?a:null===(n=s[s.length-1])||void 0===n?void 0:n.index)&&void 0!==t?t:"a1",l=null===(i=s[s.findIndex((function(e){return e.index===u}))+1])||void 0===i?void 0:i.index;e=function(e,t){for(var n=e,r=new Set(t);r.has(n);){var i;n=null!==(i=/^.*(\d+)$/.exec(n))&&void 0!==i&&i[1]?n.replace(/(\d+)(?=\D?)$/,(function(e){return(+e+1).toString()})):"".concat(n," 1")}return n}(e,s.map((function(e){return e.name})));var c=Ko.create({id:o,name:e,index:l&&u!==l?pr(u,l):vr(u)}),d=To.create({id:To.createId(c.id)}),f=Ra.create({id:Ra.createId(c.id),pageId:c.id});return{data:{prevSelectedPageId:r.currentPageId,newPage:c,newTabPageState:f,newCamera:d}}}),{do:function(e){var t=e.newPage,n=e.newTabPageState,i=e.newCamera;r.store.put([t,i,n,mt(mt({},r.instanceState),{},{currentPageId:t.id})]),r.updateRenderingBounds()},undo:function(e){var t=e.newPage,n=e.prevSelectedPageId,i=e.newTabPageState,o=e.newCamera;1!==r.pages.length&&(r.store.remove([i.id,t.id,o.id]),r.store.has(n)&&r.currentPageId!==n&&r.store.put([mt(mt({},r.instanceState),{},{currentPageId:n})]),r.updateRenderingBounds())}})),vt(_t(r),"_deletePage",r.history.createCommand("delete_page",(function(e){if(r.isReadOnly)return null;var t=_t(r).pages;if(1===t.length)return null;var n=r.getPageById(e),i=r._pageStates.value.filter((function(t){return t.pageId===e}));if(!n)return null;if(e===r.currentPageId){var o,a=t.findIndex((function(t){return t.id===e})),s=null!==(o=t[a-1])&&void 0!==o?o:t[a+1];r.setCurrentPageId(s.id)}return{data:{id:e,deletedPage:n,deletedPageStates:i}}}),{do:function(e){var t=e.deletedPage,n=e.deletedPageStates,i=_t(r).pages;if(1!==i.length){if(t.id===r.currentPageId){var o,a=i.findIndex((function(e){return e.id===t.id})),s=null!==(o=i[a-1])&&void 0!==o?o:i[a+1];r.setCurrentPageId(s.id)}r.store.remove(n.map((function(e){return e.id}))),r.store.remove([t.id]),r.updateRenderingBounds()}},undo:function(e){var t=e.deletedPage,n=e.deletedPageStates;r.store.put([t]),r.store.put(n),r.updateRenderingBounds()}})),vt(_t(r),"_setInstancePageState",r.history.createCommand("setInstancePageState",(function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{data:{prev:r.store.get(null!==(t=e.id)&&void 0!==t?t:r.pageState.id),partial:e},ephemeral:n}}),{do:function(e){var t=e.prev,n=e.partial;r.store.update(t.id,(function(e){return mt(mt({},e),n)}))},undo:function(e){var t=e.prev;r.store.update(t.id,(function(){return t}))}})),vt(_t(r),"_createAssets",r.history.createCommand("createAssets",(function(e){return r.isReadOnly||e.length<=0?null:{data:{assets:e}}}),{do:function(e){var t=e.assets;r.store.put(t)},undo:function(e){var t=e.assets;r.store.remove(t.map((function(e){return e.id})))}})),vt(_t(r),"_deleteAssets",r.history.createCommand("deleteAssets",(function(e){if(!r.isReadOnly&&!(e.length<=0)){var t=br(e.map((function(e){return r.store.get(e)})));return{data:{ids:e,prev:t}}}}),{do:function(e){var t=e.ids;r.store.remove(t)},undo:function(e){var t=e.prev;r.store.put(t)}})),vt(_t(r),"_updateAssets",r.history.createCommand("updateAssets",(function(e){if(!r.isReadOnly&&!(e.length<=0)){return{data:{snapshots:{},assets:e}}}}),{do:function(e){var t=e.assets,n=e.snapshots;r.store.put(t.map((function(e){var t=r.store.get(e.id);return n[e.id]=t,mt(mt({},t),e)})))},undo:function(e){var t=e.snapshots;r.store.put(Object.values(t))}})),vt(_t(r),"_parentIdsToChildIds",void 0),vt(_t(r),"_childIdsCache",new zh),vt(_t(r),"_setCurrentPageId",r.history.createCommand("setCurrentPage",(function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).stopFollowing,n=void 0===t||t;if(r.store.has(e))return n&&r.instanceState.followingUserId&&r.stopFollowingUser(),{data:{toId:e,fromId:r.currentPageId},squashing:!0,preservesRedoStack:!0};console.error("Tried to set the current page id to a page that doesn't exist.")}),{do:function(e){var t=e.toId;if(r.store.has(t)){if(!r.getPageStateByPageId(t)){var n=To.create({id:To.createId(t)});r.store.put([n,Ra.create({id:Ra.createId(t),pageId:t})])}r.store.put([mt(mt({},r.instanceState),{},{currentPageId:t})]),r.updateRenderingBounds()}},undo:function(e){var t=e.fromId;r.store.has(t)&&(r.store.put([mt(mt({},r.instanceState),{},{currentPageId:t})]),r.updateRenderingBounds())},squash:function(e,t){var n=e.fromId;return{toId:t.toId,fromId:n}}})),vt(_t(r),"_updateInstanceState",r.history.createCommand("updateTabState",(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=r.instanceState;return{data:{prev:i,next:mt(mt({},i),e)},squashing:n,ephemeral:t}}),{do:function(e){var t=e.next;r.store.put([t])},undo:function(e){var t=e.prev;r.store.put([t])},squash:function(e,t){return{prev:e.prev,next:t.next}}})),vt(_t(r),"_willSetInitialBounds",!0),vt(_t(r),"_viewportAnimation",null),vt(_t(r),"textMeasure",void 0),r.store=i,r.user=new eb(null!==o&&void 0!==o?o:ov()),r.getContainer=null!==u&&void 0!==u?u:function(){return document.body},r.textMeasure=new Jy(_t(r)),r.root=new Ob(_t(r));var c,f=Wm(a),h=new Set(Object.keys(i.schema.types.shape.migrations.subTypeMigrations)),p=w(f);try{for(p.s();!(c=p.n()).done;){var v=c.value;if(!h.has(v.type))throw Error('Editor and store have different shapes: "'.concat(v.type,'" was passed into the editor but not the schema'));h.delete(v.type)}}catch(D){p.e(D)}finally{p.f()}if(h.size>0)throw Error('Editor and store have different shapes: "'.concat(d(h)[0],'" is present in the store schema but not provided to the editor'));var g,m={},y=new Map,b=w(f);try{for(b.s();!(g=b.n()).done;){var x=g.value,k=x.util,S=x.props,_=Ns(null!==S&&void 0!==S?S:{});m[k.type]=new k(_t(r),k.type,_);var E,C=w(_.keys());try{for(C.s();!(E=C.n()).done;){var P=E.value;if(y.has(P.id)){if(y.get(P.id)!==P)throw Error('Multiple style props with id "'.concat(P.id,'" in use. Style prop IDs must be unique.'))}else y.set(P.id,P)}}catch(D){C.e(D)}finally{C.f()}}}catch(D){b.e(D)}finally{b.f()}r.shapeUtils=m;var I,j=w(f);try{for(j.s();!(I=j.n()).done;){var M=I.value.tool;if(M){if(Tr(r.root.children,M.id))throw Error("Can't override tool with id \"".concat(M.id,'"'));r.root.children[M.id]=new M(_t(r))}}}catch(D){j.e(D)}finally{j.f()}var A,T=w(s);try{for(T.s();!(A=T.n()).done;){var O=A.value;if(Tr(r.root.children,O.id))throw Error("Can't override tool with id \"".concat(O.id,'"'));r.root.children[O.id]=new O(_t(r))}}catch(D){T.e(D)}finally{T.f()}"undefined"!==typeof window&&"navigator"in window?(r.isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),r.isIos=!!navigator.userAgent.match(/iPad/i)||!!navigator.userAgent.match(/iPhone/i),r.isChromeForIos=/crios.*safari/i.test(navigator.userAgent)):(r.isSafari=!1,r.isIos=!1,r.isChromeForIos=!1),r.store.onBeforeDelete=function(e){"shape"===e.typeName?r._shapeWillBeDeleted(e):"page"===e.typeName&&r._pageWillBeDeleted(e)},r.store.onAfterChange=function(e,t){r._updateDepth++,r._updateDepth>1e3&&console.error("[onAfterChange] Maximum update depth exceeded, bailing out."),"shape"===e.typeName&&"shape"===t.typeName?r._shapeDidChange(e,t):"instance_page_state"===e.typeName&&"instance_page_state"===t.typeName&&r._pageStateDidChange(e,t),r._updateDepth--},r.store.onAfterCreate=function(e){if("shape"===e.typeName&&r.isShapeOfType(e,Bv)&&r._arrowDidUpdate(e),"page"===e.typeName){var t=To.createId(e.id),n=Ra.createId(e.id);r.store.has(t)||r.store.put([To.create({id:t})]),r.store.has(n)||r.store.put([Ra.create({id:n,pageId:e.id})])}},r._currentPageShapeIds=function(e,t){var n=e.query.ids("shape"),r=null;function i(){var i=t();return r=i,new Set(d(n.value).filter((function(t){return Cy(e,i,e.get(t))})))}return so("_shapeIdsInCurrentPage",(function(n,o){if(no(n))return i();var a=t();if(a!==r)return i();var s=e.history.getDiffSince(o);if(s===Wi)return i();var u,c=new co(n),d=w(s);try{for(d.s();!(u=d.n()).done;){for(var f=u.value,h=0,p=Object.values(f.added);h<p.length;h++){var v=p[h];As(v)&&Cy(e,a,v)&&c.add(v.id)}for(var g=0,m=Object.values(f.updated);g<m.length;g++){var y=l(m[g],2),b=(y[0],y[1]);As(b)&&(Cy(e,a,b)?c.add(b.id):c.remove(b.id))}for(var x=0,k=Object.keys(f.removed);x<k.length;x++){var S=k[x];Ts(S)&&c.remove(S)}}}catch(D){d.e(D)}finally{d.f()}var _=c.get();return _?io(_.value,_.diff):n}))}(r.store,(function(){return r.currentPageId})),r._parentIdsToChildIds=function(e){var t=e.query.ids("shape");function n(){var n={};return t.value.forEach((function(t){var r=e.get(t);n[r.parentId]||(n[r.parentId]=[]),n[r.parentId].push([t,r.index])})),Object.values(n).forEach((function(e){return e.sort((function(e,t){return e[1]<t[1]?-1:1}))})),n}return so("parentsToChildrenWithIndexes",(function(t,r){var i;if(no(t))return n();var o=e.history.getDiffSince(r);if(o===Wi)return n();if(0===o.length)return t;for(var a,s=null,u=function(e){s||(s=mt({},t)),s[e]?s[e]===t[e]&&(s[e]=d(s[e])):s[e]=[]},c=new Set,f=0,h=o.length;f<h;f++){a=o[f];for(var p=0,v=Object.values(a.added);p<v.length;p++){var g=v[p];As(g)&&(u(g.parentId),s[g.parentId].push([g.id,g.index]),c.add(s[g.parentId]))}for(var m=function(){var e=l(b[y],2),t=e[0],n=e[1];if(!As(n))return 0;if(!As(t))return 0;if(t.parentId!==n.parentId)u(t.parentId),u(n.parentId),s[t.parentId].splice(s[t.parentId].findIndex((function(e){return e[0]===n.id})),1),s[n.parentId].push([n.id,n.index]),c.add(s[n.parentId]);else if(t.index!==n.index){u(n.parentId);var r=s[n.parentId].findIndex((function(e){return e[0]===n.id}));s[n.parentId][r]=[n.id,n.index],c.add(s[n.parentId])}},y=0,b=Object.values(a.updated);y<b.length;y++)m();for(var x=function(){var e=S[k];if(!As(e))return 1;u(e.parentId),s[e.parentId].splice(s[e.parentId].findIndex((function(t){return t[0]===e.id})),1)},k=0,S=Object.values(a.removed);k<S.length;k++)x()}var _,E=w(c);try{for(E.s();!(_=E.n()).done;)_.value.sort((function(e,t){return e[1]<t[1]?-1:1}))}catch(D){E.e(D)}finally{E.f()}return null!==(i=s)&&void 0!==i?i:t}))}(r.store),r.disposables.add(r.store.listen((function(e){r.emit("change",e)})));var N=r.getContainer(),R=function(){r._isFocused.set(!0)},L=function(){r._isFocused.set(!1)};return N.addEventListener("focusin",R),N.addEventListener("focus",R),N.addEventListener("focusout",L),N.addEventListener("blur",L),r.disposables.add((function(){N.removeEventListener("focusin",R),N.removeEventListener("focus",R),N.removeEventListener("focusout",L),N.removeEventListener("blur",L)})),r.store.ensureStoreIsUsable(),r.setInstancePageState({editingId:null,hoveredId:null,erasingIds:[]},!0),r.root.enter(void 0,"initial"),r.instanceState.followingUserId&&r.stopFollowingUser(),r.updateRenderingBounds(),requestAnimationFrame((function(){r._tickManager.start()})),r}return oe(n,[{key:"_pageTransformCache",get:function(){var e=this;return this.store.createComputedCache("pageTransformCache",(function(t){var n;if(Vo(t.parentId))return e.getTransform(t);var r=null!==(n=e._pageTransformCache.get(t.parentId))&&void 0!==n?n:mc.Identity();return mc.Compose(r,e.getTransform(t))}))}},{key:"_pageBoundsCache",get:function(){var e=this;return this.store.createComputedCache("pageBoundsCache",(function(t){var n=e._pageTransformCache.get(t.id);return n?lc.FromPoints(mc.applyToPoints(n,e.getShapeUtil(t).outline(t))):new lc}))}},{key:"dispose",value:function(){this.disposables.forEach((function(e){return e()})),this.disposables.clear()}},{key:"undo",value:function(){return this.history.undo()}},{key:"canUndo",get:function(){return this.history.numUndos>0}},{key:"redo",value:function(){return this.history.redo(),this}},{key:"canRedo",get:function(){return this.history.numRedos>0}},{key:"mark",value:function(e,t,n){return this.history.mark(e,t,n)}},{key:"bail",value:function(){return this.history.bail(),this}},{key:"bailToMark",value:function(e){return this.history.bailToMark(e),this}},{key:"batch",value:function(e){return this.history.batch(e),this}},{key:"getShapeUtil",value:function(e){var t=Or(this.shapeUtils,e.type);return _r(t,'No shape util found for type "'.concat(e.type,'"')),"prototype"in e&&e.prototype instanceof Oh&&_r(t instanceof e,'Shape util found for type "'.concat(e.type,'" is not an instance of the provided constructor')),t}},{key:"_extractSharedStyles",value:function(e,t){if(this.isShapeOfType(e,Eg)){var n=this._parentIdsToChildIds.value[e.id];if(!n)return;for(var r=0,i=n.length;r<i;r++)this._extractSharedStyles(this.getShapeById(n[r][0]),t)}else{var o,a=w(this.getShapeUtil(e).iterateStyles(e));try{for(a.s();!(o=a.n()).done;){var s=l(o.value,2),u=s[0],c=s[1];t.applyValue(u,c)}}catch(d){a.e(d)}finally{a.f()}}}},{key:"_stylesForNextShape",get:function(){return this.instanceState.stylesForNextShape}},{key:"getStyleForNextShape",value:function(e){var t=this._stylesForNextShape[e.id];return void 0===t?e.defaultValue:t}},{key:"sharedStyles",get:function(){if(this.isIn("select")&&this.selectedIds.length>0)return this._selectionSharedStyles.value;var e=this.root.current.value,t=new qm;if(e.shapeType){var n,r=w(this.getShapeUtil(e.shapeType).styleProps.keys());try{for(r.s();!(n=r.n()).done;){var i=n.value;t.applyValue(i,this.getStyleForNextShape(i))}}catch(o){r.e(o)}finally{r.f()}}return t}},{key:"sharedOpacity",get:function(){var e=this;if(this.isIn("select")&&this.selectedIds.length>0){var t,n=[],r=function t(r){var i=e.getShapeById(r);if(i)if(e.isShapeOfType(i,Eg)){var o,a=w(e.getSortedChildIds(i.id));try{for(a.s();!(o=a.n()).done;){t(o.value)}}catch(s){a.e(s)}finally{a.f()}}else n.push(i)},i=w(this.selectedIds);try{for(i.s();!(t=i.n()).done;){r(t.value)}}catch(l){i.e(l)}finally{i.f()}for(var o=null,a=0,s=n;a<s.length;a++){var u=s[a];if(null===o)o=u.opacity;else if(o!==u.opacity)return{type:"mixed"}}if(null!==o)return{type:"shared",value:o}}return{type:"shared",value:this.instanceState.opacityForNextShape}}},{key:"_arrowBindingsIndex",get:function(){return function(e){var t=e.store,n=t.query.filterHistory("shape"),r=t.query.records("shape",(function(){return{type:{eq:"arrow"}}}));function i(){var e,t={},n=w(r.value);try{for(n.s();!(e=n.n()).done;){var i=e.value,o=i.props,a=o.start,s=o.end;if("binding"===a.type){var u=t[a.boundShapeId];u?u.push({arrowId:i.id,handleId:"start"}):t[a.boundShapeId]=[{arrowId:i.id,handleId:"start"}]}if("binding"===s.type){var l=t[s.boundShapeId];l?l.push({arrowId:i.id,handleId:"end"}):t[s.boundShapeId]=[{arrowId:i.id,handleId:"end"}]}}}catch(c){n.e(c)}finally{n.f()}return t}return so("arrowBindingsIndex",(function(t,r){var o;if(no(t))return i();var a=t,s=n.getDiffSince(r);if(s===Wi)return i();var u=void 0;function c(e){u||(u=mt({},a)),u[e]?u[e]===a[e]&&(u[e]=d(u[e])):u[e]=[]}function f(e,t,n){c(e),u[e]=u[e].filter((function(e){return e.arrowId!==t||e.handleId!==n})),0===u[e].length&&delete u[e]}function h(e,t,n){c(e),u[e].push({arrowId:t,handleId:n})}var p,v=w(s);try{for(v.s();!(p=v.n()).done;){for(var g=p.value,m=0,y=Object.values(g.added);m<y.length;m++){var b=y[m];if(e.isShapeOfType(b,Bv)){var x=b.props,k=x.start,S=x.end;"binding"===k.type&&h(k.boundShapeId,b.id,"start"),"binding"===S.type&&h(S.boundShapeId,b.id,"end")}}for(var _=0,E=Object.values(g.updated);_<E.length;_++){var C=l(E[_],2),P=C[0],I=C[1];if(e.isShapeOfType(P,Bv)&&e.isShapeOfType(I,Bv))for(var j=0,M=["start","end"];j<M.length;j++){var A=M[j],T=P.props[A],O=I.props[A];"binding"===T.type&&"point"===O.type?f(T.boundShapeId,P.id,A):"point"===T.type&&"binding"===O.type?h(O.boundShapeId,I.id,A):"binding"===T.type&&"binding"===O.type&&T.boundShapeId!==O.boundShapeId&&(f(T.boundShapeId,P.id,A),h(O.boundShapeId,I.id,A))}}for(var N=0,R=Object.values(g.removed);N<R.length;N++){var L=R[N];if(e.isShapeOfType(L,Bv)){var D=L.props,z=D.start,B=D.end;"binding"===z.type&&f(z.boundShapeId,L.id,"start"),"binding"===B.type&&f(B.boundShapeId,L.id,"end")}}}}catch(F){v.e(F)}finally{v.f()}return null!==(o=u)&&void 0!==o?o:a}))}(this)}},{key:"getArrowsBoundTo",value:function(e){return this._arrowBindingsIndex.value[e]||Li}},{key:"_reparentArrow",value:function(e){var t=this,n=this.getShapeById(e);if(n){var r=n.props,i=r.start,o=r.end,a="binding"===i.type?this.getShapeById(i.boundShapeId):void 0,s="binding"===o.type?this.getShapeById(o.boundShapeId):void 0,u=this.getAncestorPageId(n);if(u){var l;if(a&&s){var c;l=null!==(c=this.findCommonAncestor([a,s]))&&void 0!==c?c:u}else{if(!a&&!s)return;l=u}l&&l!==n.parentId&&this.reparentShapesById([e],l);var d=this.getShapeById(e);if(!d)throw Error("no reparented arrow");var f,h,p=this.getShapeNearestSibling(d,a),v=this.getShapeNearestSibling(d,s);if(p&&v)f=p.index>v.index?p:v;else if(p&&!v)f=p;else{if(!v||p)return;f=v}var g=this.getSortedChildIds(f.parentId).map((function(e){return t.getShapeById(e)})).filter((function(e){return e.index>f.index}));if(g.length){var m=g.find((function(e){return"arrow"!==e.type}));if(d.index>f.index&&(!m||d.index<m.index))return;h=pr(f.index,g[0].index)}else h=vr(f.index);h!==d.index&&this.updateShapes([{id:e,type:"arrow",index:h}])}}}},{key:"_unbindArrowTerminal",value:function(e,t){var n=kv(this,e)[t],r=n.x,i=n.y;this.store.put([mt(mt({},e),{},{props:mt(mt({},e.props),{},vt({},t,{type:"point",x:r,y:i}))})])}},{key:"_allPageStates",get:function(){return this.store.query.records("instance_page_state")}},{key:"_shapeWillBeDeleted",value:function(e){var t=this;e.parentId&&Ts(e.parentId)&&this._invalidParents.add(e.parentId);var n=this._arrowBindingsIndex.value[e.id];if(null!==n&&void 0!==n&&n.length){var r,i=w(n);try{for(i.s();!(r=i.n()).done;){var o=r.value,a=o.arrowId,s=o.handleId,u=this.getShapeById(a);u&&this._unbindArrowTerminal(u,s)}}catch(f){i.e(f)}finally{i.f()}}var l=this._allPageStates.value,c=new Set([e.id]),d=br(l.map((function(e){return t._cleanupInstancePageState(e,c)})));d.length&&this.store.put(d)}},{key:"_arrowDidUpdate",value:function(e){for(var t=0,n=["start","end"];t<n.length;t++){var r=n[t],i=e.props[r];if("binding"===i.type){var o=this.getShapeById(i.boundShapeId),a=this.getAncestorPageId(e)===this.getAncestorPageId(o);o&&a||this._unbindArrowTerminal(e,r)}}this._reparentArrow(e.id)}},{key:"_complete",value:function(){var e,t=w(this._invalidParents);try{for(t.s();!(e=t.n()).done;){var n,r=e.value;this._invalidParents.delete(r);var i=this.getShapeById(r);if(i){var o=this.getShapeUtil(i),a=null===(n=o.onChildrenChange)||void 0===n?void 0:n.call(o,i);null!==a&&void 0!==a&&a.length&&this.updateShapes(a,!0)}}}catch(s){t.e(s)}finally{t.f()}this.emit("update")}},{key:"_cleanupInstancePageState",value:function(e,t){var n=null,r=e.selectedIds.filter((function(e){return!t.has(e)}));r.length!==e.selectedIds.length&&(n||(n=mt({},e)),n.selectedIds=r);var i=e.erasingIds.filter((function(e){return!t.has(e)}));i.length!==e.erasingIds.length&&(n||(n=mt({},e)),n.erasingIds=i),e.hoveredId&&t.has(e.hoveredId)&&(n||(n=mt({},e)),n.hoveredId=null),e.editingId&&t.has(e.editingId)&&(n||(n=mt({},e)),n.editingId=null);var o=e.hintingIds.filter((function(e){return!t.has(e)}));return o.length!==e.hintingIds.length&&(n||(n=mt({},e)),n.hintingIds=o),e.focusLayerId&&t.has(e.focusLayerId)&&(n||(n=mt({},e)),n.focusLayerId=null),n}},{key:"_shapeDidChange",value:function(e,t){var n=this;if(this.isShapeOfType(t,Bv)&&this._arrowDidUpdate(t),e.parentId!==t.parentId){var r=function(e){var t=n._arrowBindingsIndex.value[e];if(null!==t&&void 0!==t&&t.length){var r,i=w(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;n._reparentArrow(o.arrowId)}}catch(a){i.e(a)}finally{i.f()}}};r(t.id),this.visitDescendants(t.id,r)}if(e.parentId!==t.parentId&&Vo(t.parentId)){var i=new Set([e.id]);this.visitDescendants(e.id,(function(e){i.add(e)}));var o,a=w(this._allPageStates.value);try{for(a.s();!(o=a.n()).done;){var s=o.value;if(s.pageId!==t.parentId){var u=this._cleanupInstancePageState(s,i);u&&this.store.put([u])}}}catch(l){a.e(l)}finally{a.f()}}e.parentId&&Ts(e.parentId)&&this._invalidParents.add(e.parentId),t.parentId!==e.parentId&&Ts(t.parentId)&&this._invalidParents.add(t.parentId)}},{key:"_pageStateDidChange",value:function(e,t){var n=this;if((null===e||void 0===e?void 0:e.selectedIds)!==(null===t||void 0===t?void 0:t.selectedIds)){var r=t.selectedIds.filter((function(e){for(var r,i=null===(r=n.getShapeById(e))||void 0===r?void 0:r.parentId;Ts(i);){var o;if(t.selectedIds.includes(i))return!1;i=null===(o=n.getShapeById(i))||void 0===o?void 0:o.parentId}return!0})),i=0===r.length?null===t||void 0===t?void 0:t.focusLayerId:this.findCommonAncestor(br(r.map((function(e){return n.getShapeById(e)}))),(function(e){return n.isShapeOfType(e,Eg)}));r.length===t.selectedIds.length&&i==t.focusLayerId||this.store.put([mt(mt({},t),{},{selectedIds:r,focusLayerId:null!==i&&void 0!==i?i:null})])}}},{key:"_pageWillBeDeleted",value:function(e){var t;if(this.instanceState.currentPageId===e.id){var n=null===(t=this.pages.find((function(t){return t.id!==e.id})))||void 0===t?void 0:t.id;if(n){this.store.put([mt(mt({},this.instanceState),{},{currentPageId:n})]);var r=To.createId(e.id),i=Ra.createId(e.id);this.store.remove([r,i])}}}},{key:"annotateError",value:function(e,t){var n=t.origin,r=t.willCrashApp,i=t.tags,o=t.extras,a=this.createErrorAnnotations(n,r);Ir(e,{tags:mt(mt({},a.tags),i),extras:mt(mt({},a.extras),o)}),r&&this.store.markAsPossiblyCorrupted()}},{key:"createErrorAnnotations",value:function(e,t){try{return{tags:{origin:e,willCrashApp:t},extras:{activeStateNode:this.root.path.value,selectedShapes:this.selectedShapes,editingShape:this.editingId?this.getShapeById(this.editingId):void 0,inputs:this.inputs}}}catch(n){return{tags:{origin:e,willCrashApp:t},extras:{}}}}},{key:"crashingError",get:function(){return this._crashingError}},{key:"crash",value:function(e){this._crashingError=e,this.store.markAsPossiblyCorrupted(),this.emit("crash",{error:e})}},{key:"canMoveCamera",get:function(){return this._canMoveCamera.value},set:function(e){this._canMoveCamera.set(e)}},{key:"isFocused",get:function(){return this._isFocused.value}},{key:"devicePixelRatio",get:function(){return this._dprManager.dpr.value}},{key:"isCoarsePointer",get:function(){return this._isCoarsePointer.value},set:function(e){this._isCoarsePointer.set(e)}},{key:"openMenus",get:function(){return this._openMenus.value}},{key:"addOpenMenu",value:function(e){var t=new Set(this.openMenus);return t.has(e)||(t.add(e),this._openMenus.set(d(t))),this}},{key:"deleteOpenMenu",value:function(e){var t=new Set(this.openMenus);return t.has(e)&&(t.delete(e),this._openMenus.set(d(t))),this}},{key:"isMenuOpen",get:function(){return this.openMenus.length>0}},{key:"isChangingStyle",get:function(){return this._isChangingStyle.value},set:function(e){var t=this;this._isChangingStyle.set(e),clearTimeout(this._isChangingStyleTimeout),e&&(this._isChangingStyleTimeout=setTimeout((function(){return t.isChangingStyle=!1}),2e3))}},{key:"isPenMode",get:function(){return this._isPenMode.value}},{key:"setPenMode",value:function(e){return e&&(this._touchEventsRemainingBeforeExitingPenMode=3),e!==this.isPenMode&&this._isPenMode.set(e),this}},{key:"setReadOnly",value:function(e){return this._isReadOnly.set(e),e&&this.setSelectedTool("hand"),this}},{key:"isReadOnly",get:function(){return this._isReadOnly.value}},{key:"documentSettings",get:function(){return this.store.get(Ja)}},{key:"updateDocumentSettings",value:function(e){this.store.put([mt(mt({},this.documentSettings),e)])}},{key:"gridSize",get:function(){return this.documentSettings.gridSize}},{key:"projectName",get:function(){return this.documentSettings.name}},{key:"setProjectName",value:function(e){this.updateDocumentSettings({name:e})}},{key:"isSnapMode",get:function(){return this.user.isSnapMode}},{key:"setSnapMode",value:function(e){return e!==this.isSnapMode&&this.user.updateUserPreferences({isSnapMode:e}),this}},{key:"isDarkMode",get:function(){return this.user.isDarkMode}},{key:"setDarkMode",value:function(e){return e!==this.isDarkMode&&this.user.updateUserPreferences({isDarkMode:e}),this}},{key:"animationSpeed",get:function(){return this.user.animationSpeed}},{key:"setAnimationSpeed",value:function(e){return e!==this.animationSpeed&&this.user.updateUserPreferences({animationSpeed:e}),this}},{key:"instanceState",get:function(){return this.store.get(Ca)}},{key:"cursor",get:function(){return this.instanceState.cursor}},{key:"brush",get:function(){return this.instanceState.brush}},{key:"zoomBrush",get:function(){return this.instanceState.zoomBrush}},{key:"scribble",get:function(){return this.instanceState.scribble}},{key:"isFocusMode",get:function(){return this.instanceState.isFocusMode}},{key:"setFocusMode",value:function(e){return e!==this.isFocusMode&&this.updateInstanceState({isFocusMode:e},!0),this}},{key:"isToolLocked",get:function(){return this.instanceState.isToolLocked}},{key:"setToolLocked",value:function(e){return e!==this.isToolLocked&&this.updateInstanceState({isToolLocked:e},!0),this}},{key:"isGridMode",get:function(){return this.instanceState.isGridMode}},{key:"setGridMode",value:function(e){return e!==this.isGridMode&&this.updateInstanceState({isGridMode:e},!0),this}},{key:"_pages",get:function(){return this.store.query.records("page")}},{key:"pages",get:function(){return this._pages.value.sort(mr)}},{key:"currentPage",get:function(){var e=this.getPageById(this.currentPageId);if(!e)throw Error("No current page (id ".concat(this.currentPageId,", ").concat(this.pages.length," pages))"));return e}},{key:"currentPageId",get:function(){return this.instanceState.currentPageId}},{key:"getPageById",value:function(e){return this.store.get(e)}},{key:"getPageInfoById",value:function(e){return this.store.get(e)}},{key:"currentPageShapeIds",get:function(){return this._currentPageShapeIds.value}},{key:"getShapeIdsInPage",value:function(e){var t=this.store.query.exec("shape",{parentId:{eq:e}});return this.getShapeAndDescendantIds(t.map((function(e){return e.id})))}},{key:"_pageStates",get:function(){return this.store.query.records("instance_page_state")}},{key:"getPageStateByPageId",value:function(e){return this._pageStates.value.find((function(t){return t.pageId===e}))}},{key:"pageStateId",get:function(){return Ra.createId(this.currentPageId)}},{key:"pageState",get:function(){return this.store.get(this.pageStateId)}},{key:"setInstancePageState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._setInstancePageState(e,t)}},{key:"selectedIds",get:function(){return this.pageState.selectedIds}},{key:"selectedIdsSet",get:function(){return new Set(this.selectedIds)}},{key:"setSelectedIds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._setSelectedIds(e,t),this}},{key:"isSelected",value:function(e){return this.selectedIdsSet.has(e)}},{key:"isWithinSelection",value:function(e){var t=this,n=this.getShapeById(e);return!!n&&(!!this.isSelected(e)||!!this.findAncestor(n,(function(e){return t.isSelected(e.id)})))}},{key:"select",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.setSelectedIds(t),this}},{key:"deselect",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=this.selectedIds;return r.length>0&&t.length>0&&this.setSelectedIds(r.filter((function(e){return!t.includes(e)}))),this}},{key:"selectAll",value:function(){var e=this.getSortedChildIds(this.currentPageId);return e.length<=0||this.setSelectedIds(this._getUnlockedShapeIds(e)),this}},{key:"selectNone",value:function(){return this.selectedIds.length>0&&this.setSelectedIds([]),this}},{key:"focusLayerId",get:function(){var e;return null!==(e=this.pageState.focusLayerId)&&void 0!==e?e:this.currentPageId}},{key:"focusLayerShape",get:function(){var e=this.pageState.focusLayerId;if(e)return this.getShapeById(e)}},{key:"popFocusLayer",value:function(){var e=this,t=this.pageState.focusLayerId,n=t&&this.getShapeById(t);if(n){var r,i=this.findAncestor(n,(function(t){return e.isShapeOfType(t,Eg)}));this.setFocusLayer(null!==(r=null===i||void 0===i?void 0:i.id)&&void 0!==r?r:null),this.select(n.id)}else this.setFocusLayer(null),this.selectNone();return this}},{key:"setFocusLayer",value:function(e){return this._setFocusLayer(e),this}},{key:"editingId",get:function(){return this.pageState.editingId}},{key:"setEditingId",value:function(e){if(e){if(e!==this.editingId){var t=this.getShapeById(e),n=this.getShapeUtil(t);if(t&&n.canEdit(t)){this.setInstancePageState({editingId:e,hoveredId:null},!1);var r=this.viewportPageBounds,i=n.getEditingBounds(t),o=this.getPageTransformById(e),a=lc.FromPoints(mc.applyToPoints(o,i.corners));r.contains(a)||(a.width>r.width||a.height>r.height?this.zoomToBounds(a.minX,a.minY,a.width,a.height):this.centerOnPoint(a.midX,a.midY))}}}else this.setInstancePageState({editingId:null});return this}},{key:"editingShape",get:function(){var e;return this.editingId&&null!==(e=this.getShapeById(this.editingId))&&void 0!==e?e:null}},{key:"hoveredId",get:function(){return this.pageState.hoveredId}},{key:"setHoveredId",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e===this.pageState.hoveredId||this.setInstancePageState({hoveredId:e},!0),this}},{key:"hoveredShape",get:function(){var e;return this.hoveredId&&null!==(e=this.getShapeById(this.hoveredId))&&void 0!==e?e:null}},{key:"hintingIds",get:function(){return this.pageState.hintingIds}},{key:"setHintingIds",value:function(e){return this.store.update(this.pageState.id,(function(t){return mt(mt({},t),{},{hintingIds:yr(e)})})),this}},{key:"erasingIds",get:function(){return this.pageState.erasingIds}},{key:"erasingIdsSet",get:function(){return new Set(this.erasingIds)}},{key:"setErasingIds",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.erasingIdsSet;return e.length===t.size&&e.every((function(e){return t.has(e)}))||this.setInstancePageState({erasingIds:e},!0),this}},{key:"croppingId",get:function(){return this.pageState.croppingId}},{key:"setCroppingId",value:function(e){if(e!==this.croppingId)if(e){var t=this.getShapeById(e),n=this.getShapeUtil(t);t&&n.canCrop(t)&&this.setInstancePageState({croppingId:e,hoveredId:null})}else this.setInstancePageState({croppingId:null}),this.isInAny("select.crop","select.pointing_crop_handle","select.cropping")&&this.setSelectedTool("select.idle");return this}},{key:"cameraId",get:function(){return To.createId(this.currentPageId)}},{key:"camera",get:function(){return this.store.get(this.cameraId)}},{key:"zoomLevel",get:function(){return this.camera.z}},{key:"updateViewportScreenBounds",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.getContainer();if(!t)return this;var n=t.getBoundingClientRect(),r=new lc(0,0,Math.max(n.width,1),Math.max(n.height,1)),i=r.equals(this.viewportScreenBounds),o=this._willSetInitialBounds;if(i)this._willSetInitialBounds=!1;else if(o)this._willSetInitialBounds=!1,this.updateInstanceState({screenBounds:r.toJson()},!0,!0);else{var a=this.zoomLevel;if(e){var s=this.viewportPageCenter;this.updateInstanceState({screenBounds:r.toJson()},!0,!0);var u=this.viewportPageCenter;this.instanceState.followingUserId||this.pan((u.x-s.x)*a,(u.y-s.y)*a)}else{var l=this.screenToPage(0,0);this.updateInstanceState({screenBounds:r.toJson()},!0,!0);var c=this.screenToPage(0,0);this.instanceState.followingUserId||this.pan((c.x-l.x)*a,(c.y-l.y)*a)}}this._tickCameraState(),this.updateRenderingBounds();var d=this.editingId;return d&&this.panZoomIntoView([d]),this}},{key:"viewportScreenBounds",get:function(){var e=this.instanceState.screenBounds,t=e.x,n=e.y,r=e.w,i=e.h;return new lc(t,n,r,i)}},{key:"viewportScreenCenter",get:function(){return this.viewportScreenBounds.center}},{key:"viewportPageBounds",get:function(){var e=this.viewportScreenBounds,t=e.x,n=e.y,r=e.w,i=e.h,o=this.screenToPage(t,n),a=this.screenToPage(t+r,n+i);return new lc(o.x,o.y,a.x-o.x,a.y-o.y)}},{key:"viewportPageCenter",get:function(){return this.viewportPageBounds.center}},{key:"screenToPage",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.camera,i=this.store.unsafeGetWithoutCapture(Ca).screenBounds,o=r.x,a=r.y,s=r.z,u=void 0===s?1:s;return{x:(e-i.x)/u-o,y:(t-i.y)/u-a,z:n}}},{key:"pageToScreen",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.camera,i=r.x,o=r.y,a=r.z,s=void 0===a?1:a;return{x:e+i*s,y:t+o*s,z:n}}},{key:"cameraState",get:function(){return this._cameraState.value}},{key:"computeUnorderedRenderingShapes",value:function(e){var t,n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.renderingBounds,o=r.renderingBoundsExpanded,a=r.erasingIdsSet,s=r.editingId,u=[],l=yd,c=0,d=function e(t,r,d){var f,h;if(Ko.isId(t)){var p,v=w(n.getSortedChildIds(t));try{for(v.s();!(p=v.n()).done;){e(p.value,r,d)}}catch(P){v.e(P)}finally{v.f()}}else{var g=n.getShapeById(t);if(g){var m=g.opacity*r,y=!1;!d&&null!==a&&void 0!==a&&a.has(t)&&(y=!0,m*=.32);var b=n.getMaskedPageBoundsById(t),x=!!b&&(null===(f=null===i||void 0===i?void 0:i.includes(b))||void 0===f||f),k=!b||(null===(h=s!==t&&!(null!==o&&void 0!==o&&o.includes(b)))||void 0===h||h);u.push({id:t,index:l,backgroundIndex:c,opacity:m,isCulled:k,isInViewport:x,maskedPageBounds:b}),l+=1,c+=1;var S=n.getSortedChildIds(t);if(S.length){var _=null;n.getShapeUtil(g).providesBackgroundForChildren(g)&&(_=c,c=l,l+=yd);var E,C=w(S);try{for(C.s();!(E=C.n()).done;){e(E.value,m,d||y)}}catch(P){C.e(P)}finally{C.f()}null!==_&&(c=_)}}}},f=w(e);try{for(f.s();!(t=f.n()).done;){d(t.value,1,!1)}}catch(h){f.e(h)}finally{f.f()}return u}},{key:"renderingShapes",get:function(){return this.computeUnorderedRenderingShapes([this.currentPageId],{renderingBounds:this.renderingBounds,renderingBoundsExpanded:this.renderingBoundsExpanded,erasingIdsSet:this.erasingIdsSet,editingId:this.editingId}).sort(Yr)}},{key:"renderingBounds",get:function(){return this._renderingBounds.value}},{key:"renderingBoundsExpanded",get:function(){return this._renderingBoundsExpanded.value}},{key:"updateRenderingBounds",value:function(){var e=this.viewportPageBounds;return e.equals(this._renderingBounds.__unsafe__getWithoutCapture())||(this._renderingBounds.set(e.clone()),this._renderingBoundsExpanded.set(e.clone().expandBy(100/this.zoomLevel))),this}},{key:"getTransform",value:function(e){return mc.Compose(mc.Translate(e.x,e.y),mc.Rotate(e.rotation))}},{key:"getParentTransform",value:function(e){var t;return Vo(e.parentId)?mc.Identity():null!==(t=this._pageTransformCache.get(e.parentId))&&void 0!==t?t:mc.Identity()}},{key:"getPageTransform",value:function(e){return this.getPageTransformById(e.id)}},{key:"getPageTransformById",value:function(e){return this._pageTransformCache.get(e)}},{key:"getPagePointById",value:function(e){var t=this.getPageTransformById(e);if(t)return mc.applyToPoint(t,new Nl)}},{key:"getPageCenter",value:function(e){var t=this.getPageTransformById(e.id);if(!t)return null;var n=this.getShapeUtil(e).center(e);return mc.applyToPoint(t,n)}},{key:"getPageCenterById",value:function(e){var t=this.getShapeById(e);return this.getPageCenter(t)}},{key:"getPageRotation",value:function(e){return this.getPageRotationById(e.id)}},{key:"getPageRotationById",value:function(e){var t=this.getPageTransformById(e);return t?mc.Decompose(t).rotation:0}},{key:"getBounds",value:function(e){return this.getShapeUtil(e).bounds(e)}},{key:"getBoundsById",value:function(e){var t=this.getShapeById(e);if(t)return this.getBounds(t)}},{key:"getPageBounds",value:function(e){return this.getPageBoundsById(e.id)}},{key:"getPageBoundsById",value:function(e){return this._pageBoundsCache.get(e)}},{key:"_clipPathCache",get:function(){var e=this;return this.store.createComputedCache("clipPathCache",(function(t){var n=e._pageMaskCache.get(t.id);if(n){var r=e._pageTransformCache.get(t.id);if(r){if(0===n.length)return"polygon(0px 0px, 0px 0px, 0px 0px)";var i=mc.applyToPoints(mc.Inverse(r),n);return"polygon(".concat(i.map((function(e){return"".concat(e.x,"px ").concat(e.y,"px")})).join(","),")")}}}))}},{key:"getClipPathById",value:function(e){return this._clipPathCache.get(e)}},{key:"_pageMaskCache",get:function(){var e=this;return this.store.createComputedCache("pageMaskCache",(function(t){if(!Vo(t.parentId)){var n=e.getAncestorsById(t.id).filter((function(t){return e.isShapeOfType(t,Ig)}));if(0!==n.length){var r=n.map((function(t){return mc.applyToPoints(e._pageTransformCache.get(t.id),e.getOutline(t))})).reduce((function(e,t){var n;return t&&e&&null!==(n=Rc(e,t))&&void 0!==n?n:void 0}));return r}}}))}},{key:"getPageMaskById",value:function(e){return this._pageMaskCache.get(e)}},{key:"getMaskedPageBounds",value:function(e){return this.getMaskedPageBoundsById(e.id)}},{key:"getMaskedPageBoundsById",value:function(e){var t=this._pageBoundsCache.get(e);if(t){var n=this._pageMaskCache.get(e);if(n){var r=Rc(n,t.corners);if(!r)return;return lc.FromPoints(r)}return t}}},{key:"getOutline",value:function(e){return this.getShapeUtil(e).outline(e)}},{key:"getOutlineById",value:function(e){return this.getOutline(this.getShapeById(e))}},{key:"getAncestors",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e.parentId;if(Vo(n))return t.reverse(),t;var r=this.store.get(n);return r?(t.push(r),this.getAncestors(r,t)):t}},{key:"getAncestorsById",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=this.getShapeById(e);return n?this.getAncestors(n,t):t}},{key:"findAncestor",value:function(e,t){var n=e.parentId;if(!Vo(n)){var r=this.getShapeById(n);return r?t(r)?r:this.findAncestor(r,t):void 0}}},{key:"hasAncestor",value:function(e,t){return!!e&&(e.parentId===t||this.hasAncestor(this.getParentShape(e),t))}},{key:"findCommonAncestor",value:function(e,t){var n=this;if(0!==e.length){if(1===e.length){var r,i=e[0].parentId;if(Vo(i))return;return t?null===(r=this.findAncestor(e[0],t))||void 0===r?void 0:r.id:i}for(var o=It(e),a=o[0],s=o.slice(1),u=this.getParentShape(a);u;)if(!t||t(u)){if(s.every((function(e){return n.hasAncestor(e,u.id)})))return u.id;u=this.getParentShape(u)}else u=this.getParentShape(u)}}},{key:"isShapeOrAncestorLocked",value:function(e){return void 0!==e&&(!!e.isLocked||this.isShapeOrAncestorLocked(this.getParentShape(e)))}},{key:"allShapesCommonBounds",get:function(){var e=this,t=null;return this.currentPageShapeIds.forEach((function(n){var r=e.getMaskedPageBoundsById(n);r&&(t?t.expand(r):t=r.clone())})),t}},{key:"getPageCorners",value:function(e){var t=this.getAncestors(e),n=this.getBounds(e).corners,r=mc.Compose.apply(mc,d(t.flatMap((function(e){return[mc.Translate(e.x,e.y),mc.Rotate(e.rotation)]}))).concat([mc.Translate(e.x,e.y),mc.Rotate(e.rotation,0,0)]));return mc.applyToPoints(r,n)}},{key:"isPointInShape",value:function(e,t){var n=this.getShapeUtil(t),r=this._pageMaskCache.get(t.id);if(r&&!ic(e,r))return!1;return n.hitTestPoint(t,this.getPointInShapeSpace(t,e))}},{key:"getShapesAtPoint",value:function(e){var t=this;return this.shapesArray.filter((function(n){var r=t._pageMaskCache.get(n.id);return r?ic(e,r):t.getShapeUtil(n).hitTestPoint(n,t.getPointInShapeSpace(n,e))}))}},{key:"getPointInShapeSpace",value:function(e,t){return mc.applyToPoint(mc.Inverse(this.getPageTransform(e)),t)}},{key:"getPointInParentSpace",value:function(e,t){var n=this.getShapeById(e);if(!n)return new Nl(0,0);if(Vo(n.parentId))return Nl.From(t);var r=this.getPageTransformById(n.parentId);return r?mc.applyToPoint(mc.Inverse(r),t):Nl.From(t)}},{key:"getDeltaInShapeSpace",value:function(e,t){var n=this.getPageTransform(e);return n?Nl.Rot(t,-mc.Decompose(n).rotation):Nl.From(t)}},{key:"getDeltaInParentSpace",value:function(e,t){if(Vo(e.parentId))return Nl.From(t);var n=this.getShapeById(e.parentId);return n?this.getDeltaInShapeSpace(n,t):Nl.From(t)}},{key:"getParentsMappedToChildren",value:function(e){var t=this,n=e.map((function(e){return t.store.get(e)})),r=new Map;return n.forEach((function(e){var t;r.has(e.parentId)||r.set(e.parentId,new Set),null===(t=r.get(e.parentId))||void 0===t||t.add(e)})),r}},{key:"selectedPageBounds",get:function(){var e=this,t=this.pageState.selectedIds;return 0===t.length?null:lc.Common(br(t.map((function(t){return e.getPageBoundsById(t)}))))}},{key:"selectionRotation",get:function(){var e=this,t=this.selectedIds;if(0===t.length)return 0;if(1===t.length)return this.getPageRotationById(this.selectedIds[0]);var n=t.map((function(t){return e.getPageRotationById(t)%(Math.PI/2)}));return n.every((function(e){return Math.abs(e-n[0])<Math.PI/180}))?this.getPageRotationById(t[0]):0}},{key:"selectionBounds",get:function(){var e=this,t=this.selectedIds;if(0!==t.length){var n=this.selectionRotation;if(0===n)return this.selectedPageBounds;if(1===t.length){var r=this.getBounds(this.getShapeById(t[0])).clone();return r.point=mc.applyToPoint(this.getPageTransformById(t[0]),r.point),r}var i=this.selectedIds.flatMap((function(t){var n=e.getPageTransformById(t);return n?e.getOutlineById(t).map((function(e){return mc.applyToPoint(n,e)})):[]})).map((function(e){return Nl.Rot(e,-n)})),o=lc.FromPoints(i);return o.point=o.point.rot(n),o}}},{key:"selectionPageCenter",get:function(){var e=this.selectionBounds,t=this.selectionRotation;return e?Nl.RotWith(e.center,e.point,t):null}},{key:"currentToolId",get:function(){var e,t=this.root.current.value,n=null===t||void 0===t?void 0:t.id;if("select"===n||"zoom"===n){var r,i,o=null===t||void 0===t?void 0:t.current.value;n=null!==(r=null===o||void 0===o||null===(i=o.info)||void 0===i?void 0:i.onInteractionEnd)&&void 0!==r?r:"select"}return null!==(e=n)&&void 0!==e?e:"select"}},{key:"setSelectedTool",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.root.transition(e,t),this}},{key:"getStateDescendant",value:function(e){for(var t=e.split(".").reverse(),n=this.root;t.length>0;){var r,i=t.pop();if(!i)return n;var o=null===(r=n.children)||void 0===r?void 0:r[i];if(!o)return;n=o}return n}},{key:"isIn",value:function(e){for(var t=e.split(".").reverse(),n=this.root;t.length>0;){var r=t.pop();if(!r)return!0;var i=n.current.value;if((null===i||void 0===i?void 0:i.id)!==r)return!1;if(0===t.length)return!0;n=i}return!1}},{key:"isInAny",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.some((function(t){return e.isIn(t)}))}},{key:"_updateInputsFromEvent",value:function(e){var t,n,r=this.inputs,i=r.previousScreenPoint,o=r.previousPagePoint,a=r.currentScreenPoint,s=r.currentPagePoint,u=this.store.unsafeGetWithoutCapture(Ca).screenBounds,l=e.point,c=l.x,d=l.y,f=l.z,h=this.camera,p=h.x,v=h.y,g=h.z;i.setTo(a),o.setTo(s),a.set(c,d),s.set((c-u.x)/g-p,(d-u.y)/g-v,null!==f&&void 0!==f?f:.5),this.inputs.isPen="pointer"===e.type&&e.isPen,"pointer_down"===e.name&&this.inputs.pointerVelocity.set(0,0),this.store.put([{id:Da,typeName:"pointer",x:s.x,y:s.y,lastActivityTimestamp:"pointer"===e.type&&e.pointerId===Pd&&null!==(t=null===(n=this.store.get(Da))||void 0===n?void 0:n.lastActivityTimestamp)&&void 0!==t?t:Date.now()}])}},{key:"cancelDoubleClick",value:function(){this._clickManager.cancelDoubleClickTimeout()}},{key:"dispatch",value:function(e){var t=this;if(this.crashingError)return this;var n=this.inputs,r=e.type;return this.batch((function(){if("misc"===e.type)return"cancel"!==e.name&&"complete"!==e.name||(t.inputs.isDragging=!1,t.inputs.isPanning&&(t.inputs.isPanning=!1,t.setCursor({type:t._prevCursor}))),void t.root.handleEvent(e);e.shiftKey?(clearInterval(t._shiftKeyTimeout),t._shiftKeyTimeout=-1,n.shiftKey=!0):!e.shiftKey&&n.shiftKey&&-1===t._shiftKeyTimeout&&(t._shiftKeyTimeout=setTimeout(t._setShiftKeyTimeout,150)),e.altKey?(clearInterval(t._altKeyTimeout),t._altKeyTimeout=-1,n.altKey=!0):!e.altKey&&n.altKey&&-1===t._altKeyTimeout&&(t._altKeyTimeout=setTimeout(t._setAltKeyTimeout,150)),e.ctrlKey?(clearInterval(t._ctrlKeyTimeout),t._ctrlKeyTimeout=-1,n.ctrlKey=!0):!e.ctrlKey&&n.ctrlKey&&-1===t._ctrlKeyTimeout&&(t._ctrlKeyTimeout=setTimeout(t._setCtrlKeyTimeout,150));var i=n.originPagePoint,o=n.originScreenPoint,a=n.currentPagePoint,s=n.currentScreenPoint;switch(n.isPointing||(n.isDragging=!1),r){case"pinch":if(!t.canMoveCamera)return;switch(t._updateInputsFromEvent(e),e.name){case"pinch_start":if(n.isPinching)return;return void(n.isEditing||(t._pinchStart=t.camera.z,t._selectedIdsAtPointerDown.length||(t._selectedIdsAtPointerDown=t.selectedIds.slice()),t._didPinch=!0,n.isPinching=!0,t.interrupt()));case"pinch":if(!n.isPinching)return;var u=e.point,l=u.x,c=u.y,d=u.z,f=void 0===d?1:d,h=e.delta,p=h.x,v=h.y,g=t.camera,m=g.x,y=g.y,b=g.z,w=Math.min(8,Math.max(xd,f));return void t.setCamera(m+p/b-l/b+l/w,y+v/b-c/b+c/w,w);case"pinch_end":if(!n.isPinching)return t;n.isPinching=!1;var x=t._selectedIdsAtPointerDown;t.setSelectedIds(t._selectedIdsAtPointerDown,!0),t._selectedIdsAtPointerDown=[];var k,S=t.camera,_=S.x,E=S.y,C=S.z;if(C>.9&&C<1.05?k=1:C>.49&&C<.505&&(k=.5),C>t._pinchStart-.1&&C<t._pinchStart+.05&&(k=t._pinchStart),void 0!==k){var P=t.viewportScreenCenter,I=P.x,j=P.y;t.animateCamera(_+(I/k-I)-(I/C-I),E+(j/k-j)-(j/C-j),k,{duration:100})}return void(t._didPinch&&(t._didPinch=!1,requestAnimationFrame((function(){t._didPinch||t.setSelectedIds(x,!0)}))))}case"wheel":if(!t.canMoveCamera)return;if(t.isMenuOpen);else{if(n.ctrlKey){var M,A=t.inputs.currentScreenPoint,T=A.x,O=A.y,N=t.camera,R=N.x,L=N.y,D=N.z,z=Math.min(8,Math.max(xd,D+(null!==(M=e.delta.z)&&void 0!==M?M:0)*D));return void t.setCamera(R+(T/z-T)-(T/D-T),L+(O/z-O)-(O/D-O),z)}t.pan(e.delta.x,e.delta.y),!n.isDragging&&n.isPointing&&i.dist(a)>(t.isCoarsePointer?6:4)/t.zoomLevel&&(n.isDragging=!0)}break;case"pointer":if(n.isPinching)return;t._updateInputsFromEvent(e);var B=e.isPen;switch(e.name){case"pointer_down":if(t._selectedIdsAtPointerDown=t.selectedIds.slice(),0===e.button&&(t.capturedPointerId=e.pointerId),n.buttons.add(e.button),n.isPointing=!0,n.isDragging=!1,t.isPenMode)if(B)t._touchEventsRemainingBeforeExitingPenMode=3;else{if(t._touchEventsRemainingBeforeExitingPenMode--,0!==t._touchEventsRemainingBeforeExitingPenMode)return;t.setPenMode(!1)}else B&&t.setPenMode(!0);if(5===e.button?(t._restoreToolId=t.currentToolId,t.complete(),t.setSelectedTool("eraser")):1===e.button&&(t.inputs.isPanning||(t._prevCursor=t.instanceState.cursor.type),t.inputs.isPanning=!0),t.inputs.isPanning)return t.stopCameraAnimation(),t.setCursor({type:"grabbing"}),t;o.setTo(s),i.setTo(a);break;case"pointer_move":if(!B&&t.isPenMode)return;if(t.inputs.isPanning&&t.inputs.isPointing){var F=t.inputs,U=F.currentScreenPoint,K=F.previousScreenPoint,V=Nl.Sub(U,K);return void t.pan(V.x,V.y)}!n.isDragging&&n.isPointing&&i.dist(a)>(t.isCoarsePointer?6:4)/t.zoomLevel&&(n.isDragging=!0);break;case"pointer_up":if(n.buttons.delete(e.button),n.isPointing=!1,n.isDragging=!1,t.isMenuOpen)return;if(!B&&t.isPenMode)return;t.capturedPointerId===e.pointerId&&(t.capturedPointerId=null,e.button=0),n.isPanning?1===e.button?t.inputs.keys.has(" ")?(t.slideCamera({speed:Math.min(2,t.inputs.pointerVelocity.len()),direction:t.inputs.pointerVelocity,friction:Ed}),t.setCursor({type:"grab"})):(n.isPanning=!1,t.slideCamera({speed:Math.min(2,t.inputs.pointerVelocity.len()),direction:t.inputs.pointerVelocity,friction:Ed}),t.setCursor({type:t._prevCursor})):0===e.button&&(t.slideCamera({speed:Math.min(2,t.inputs.pointerVelocity.len()),direction:t.inputs.pointerVelocity,friction:Ed}),t.setCursor({type:"grab"})):5===e.button&&(t.complete(),t.setSelectedTool(t._restoreToolId))}break;case"keyboard":switch("ShiftRight"===e.key&&(e.key="ShiftLeft"),"AltRight"===e.key&&(e.key="AltLeft"),"ControlRight"===e.code&&(e.code="ControlLeft"),e.name){case"key_down":n.keys.add(e.code),e.ctrlKey||"Space"!==e.code||(t.inputs.isPanning||(t._prevCursor=t.instanceState.cursor.type),t.inputs.isPanning=!0,t.setCursor({type:t.inputs.isPointing?"grabbing":"grab"}));break;case"key_up":n.keys.delete(e.code),"Space"!==e.code||t.inputs.buttons.has(1)||(t.inputs.isPanning=!1,t.setCursor({type:t._prevCursor}))}}if("pointer"===e.type&&(1===e.button?e.name="middle_click":2===e.button&&(e.name="right_click"),e.isPen===t.isPenMode))switch(e.name){case"pointer_down":var W=t._clickManager.transformPointerDownEvent(e);if(e.name!==W.name)return t.root.handleEvent(e),t.emit("event",e),t.root.handleEvent(W),void t.emit("event",W);break;case"pointer_up":var H=t._clickManager.transformPointerUpEvent(e);if(e.name!==H.name)return t.root.handleEvent(e),t.emit("event",e),t.root.handleEvent(H),void t.emit("event",H);break;case"pointer_move":t._clickManager.handleMove()}t.root.handleEvent(e),t.emit("event",e)})),this}},{key:"replaceStoreContentsWithRecordsForOtherDocument",value:function(e){var t=this;Ji((function(){t.store.clear();var n=l(function(e,t){var n,r=[],i=[],o=w(e);try{for(o.s();!(n=o.n()).done;){var a=n.value;t(a)?r.push(a):i.push(a)}}catch(s){o.e(s)}finally{o.f()}return[r,i]}(e,(function(e){return"shape"===e.typeName})),2),r=n[0],i=n[1];t.store.put(i,"initialize"),t.store.ensureStoreIsUsable(),t.store.put(r,"initialize"),t.history.clear(),t.updateViewportScreenBounds(),t.updateRenderingBounds();var o=t.allShapesCommonBounds;o&&t.zoomToBounds(o.minX,o.minY,o.width,o.height,1)}))}},{key:"getContent",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectedIds;if(t&&0!==t.length){var n={},r=yr(t.map((function(t){return e.getShapeById(t)})).sort(mr).flatMap((function(t){var n=[t];return e.visitDescendants(t.id,(function(t){n.push(e.getShapeById(t))})),n})));r=r.map((function(t){if(n[t.id]=e.getPageTransformById(t.id),t=Xr(t),e.isShapeOfType(t,Bv)){var i="binding"===t.props.start.type?t.props.start.boundShapeId:void 0,o="binding"===t.props.end.type?t.props.end.boundShapeId:void 0,a=e.getShapeUtil(Bv).getArrowInfo(t);if("binding"===t.props.start.type&&!r.some((function(e){return e.id===i})))if(null!==a&&void 0!==a&&a.isValid){var s=a.start.point,u=s.x,l=s.y;t.props.start={type:"point",x:u,y:l}}else{var c=kv(e,t).start;t.props.start={type:"point",x:c.x,y:c.y}}if("binding"===t.props.end.type&&!r.some((function(e){return e.id===o})))if(null!==a&&void 0!==a&&a.isValid){var d=a.end.point,f=d.x,h=d.y;t.props.end={type:"point",x:f,y:h}}else{var p=kv(e,t).end;t.props.end={type:"point",x:p.x,y:p.y}}var v=bv(t)?Ev(e,t):Mv(e,t);if(null!==a&&void 0!==a&&a.isValid&&null!==v&&void 0!==v&&v.isValid&&!bv(t)){var g=Nl.Med(a.start.handle,a.end.handle),m=Nl.Dist(a.middle,g),y=Nl.Dist(v.middle,g);t.props.bend<0?t.props.bend+=y-m:t.props.bend-=y-m}return t}return t}));var i=[];r.forEach((function(t){if(void 0===r.find((function(e){return e.id===t.parentId}))){var n=e.getPagePointById(t.id),o=e.getPageRotationById(t.id);t.x=n.x,t.y=n.y,t.rotation=o,t.parentId=e.currentPageId,i.push(t.id)}}));var o=new Set;return r.forEach((function(e){"assetId"in e.props&&null!==e.props.assetId&&o.add(e.props.assetId)})),{shapes:r,rootShapeIds:i,schema:this.store.schema.serialize(),assets:br(Array.from(o).map((function(t){return e.getAssetById(t)})))}}}},{key:"putContent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.isReadOnly)return this;if(!e.schema)throw Error("Could not put content: content is missing a schema.");var r,i=n.select,o=void 0!==i&&i,a=n.preserveIds,s=void 0!==a&&a,u=n.preservePosition,l=void 0!==u&&u,c=n.point,d=void 0===c?void 0:c,f=this.currentPageId,h=e.assets,p=e.shapes,v=e.rootShapeIds,g=new Map(p.map((function(e){return[e.id,Os()]}))),y=this.currentPageId,x=1/0,k=[],S=w(this.selectedShapes);try{for(S.s();!(r=S.n()).done;){var _=r.value;if(0===x)break;var E=this.isShapeOfType(_,Ig),C=this.getAncestors(_);E&&C.push(_);var P=E?C.length+1:C.length;if(P<x)x=P,k=C,y=E?_.id:_.parentId;else if(P===x){if(k.length!==C.length)throw Error("Ancestors: ".concat(k.length," !== ").concat(C.length));if(0===k.length){y=f;break}y=f;for(var I=0;I<k.length&&C[I]===k[I];I++)y=C[I].id}}}catch(V){S.e(V)}finally{S.f()}var j=!1;if(!Vo(y)){var M=this.getShapeById(y);if(M)if(this.viewportPageBounds.includes(this.getPageBounds(M))){if(1===v.length){var A=p.find((function(e){return e.id===v[0]}));this.isShapeOfType(M,Ig)&&this.isShapeOfType(A,Ig)&&A.props.w===(null===M||void 0===M?void 0:M.props.w)&&A.props.h===(null===M||void 0===M?void 0:M.props.h)&&(j=!0)}}else y=f;else y=f}j||(j=g.has(y)),j&&(y=this.getShapeById(y).parentId);var T=this.getHighestIndexForParent(y),O=[],N=p.map((function(e){var n;if(s)n=Nr(e),g.set(e.id,e.id);else{var r=g.get(e.id);n=Nr(mt(mt({},e),{},{id:r}))}if(v.includes(e.id)&&(n.parentId=f,O.push(n)),g.has(n.parentId)?n.parentId=g.get(e.parentId):(v.push(n.id),n.index=T,T=vr(T)),t.isShapeOfType(n,Bv)){if("binding"===n.props.start.type){var i=g.get(n.props.start.boundShapeId);n.props.start=i?mt(mt({},n.props.start),{},{boundShapeId:i}):{type:"point",x:0,y:0}}if("binding"===n.props.end.type){var o=g.get(n.props.end.boundShapeId);n.props.end=o?mt(mt({},n.props.end),{},{boundShapeId:o}):{type:"point",x:0,y:0}}}return n}));if(N.length+this.currentPageShapeIds.size>yd)return Fb(this),this;var R=[];if(h){for(var L=0;L<h.length;L++){var D=h[L],z=this.store.schema.migratePersistedRecord(D,e.schema);if("success"!==z.type)throw Error("Could not put content: could not migrate content for asset:\n".concat(JSON.stringify(D,null,2)));h[L]=z.value}var B=[];R=h.filter((function(e){return!t.store.has(e.id)})).map((function(e){var t;"image"!==e.type&&"video"!==e.type||(e.props.src&&null!==(t=e.props.src)&&void 0!==t&&t.startsWith("data:image")?(B.push(Xr(e)),e.props.src=null):B.push(Xr(e)));return e})),Promise.allSettled(B.map(function(){var e=b(m().mark((function e(n){var r,i,o;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sy(n.props.src,n.props.name,null!==(r=n.props.mimeType)&&void 0!==r?r:"image/png");case 2:return i=e.sent,e.next=5,t.externalContentManager.createAssetFromFile(t,i);case 5:return o=e.sent,e.abrupt("return",[n,o]);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).then((function(e){t.updateAssets(br(e.map((function(e){return"fulfilled"===e.status?mt(mt({},e.value[1]),{},{id:e.value[0].id}):void 0}))))}))}for(var F=0;F<N.length;F++){var U=N[F],K=this.store.schema.migratePersistedRecord(U,e.schema);if("success"!==K.type)throw Error("Could not put content: could not migrate content for shape:\n".concat(JSON.stringify(U,null,2)));N[F]=K.value}return this.batch((function(){R.length>0&&t.createAssets(R),t.createShapes(N,o),y!==f&&t.reparentShapesById(O.map((function(e){return e.id})),y);var e=N.map((function(e){return t.getShapeById(e.id)})),n=lc.Common(e.map((function(e){return t.getPageBounds(e)})));if(void 0===d)if(Vo(y)){var r=t.viewportPageBounds;d=l||r.includes(lc.From(n))?n.center:r.center}else{var i=t.getShapeById(y),a=t.getShapeUtil(i);d=a.center(i)}if(1===O.length){var s=O[0];if(t.isShapeOfType(s,Ig))for(;t.getShapesAtPoint(d).some((function(e){return t.isShapeOfType(e,Ig)&&e.props.w===s.props.w&&e.props.h===s.props.h}));)d.x+=n.w+16}t.updateShapes(O.map((function(e){var t,r,i=(null!==(t=e.x)&&void 0!==t?t:0)-(n.x+n.w/2),o=(null!==(r=e.y)&&void 0!==r?r:0)-(n.y+n.h/2);return{id:e.id,type:e.type,x:d.x+i,y:d.y+o}})))})),this}},{key:"createShapes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._createShapes(e,t),this}},{key:"animateShapes",value:function(e){var t,n,r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i.duration,a=void 0===o?500:o,s=i.ease,u=void 0===s?Ol.linear:s,l=Bp(),c=a,d=[];e.forEach((function(e){if(e){var t={partial:e,values:[]},n=r.getShapeById(e.id);if(n){for(var i=0,o=["x","y","rotation"];i<o.length;i++){var a=o[i];void 0!==e[a]&&n[a]!==e[a]&&t.values.push({prop:a,from:n[a],to:e[a]})}d.push(t),r.animatingShapes.set(n.id,l)}}}));return this.addListener("tick",(function i(o){if((c-=o)<0){var s=r.animatingShapes,f=e.filter((function(e){return e&&s.get(e.id)===l}));return f.length&&r.updateShapes(f,!1),void r.removeListener("tick",i)}t=u(1-c/a);var h=r.animatingShapes;try{for(var p=[],v=0;v<d.length;v++)n=d[v],h.get(n.partial.id)===l&&p.push(mt({id:n.partial.id,type:n.partial.type},n.values.reduce((function(e,n){var r=n.prop,i=n.from,o=n.to;return e[r]=i+(o-i)*t,e}),{})));r._updateShapes(p,!0)}catch(VO){}})),this}},{key:"updateShapes",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=br(e);return this.animatingShapes.size>0&&r.forEach((function(e){return t.animatingShapes.delete(e.id)})),r=r.filter((function(e){var n=t.getShapeById(e.id);return!!n&&!(t.isShapeOrAncestorLocked(n)&&!Object.hasOwn(e,"isLocked"))})),this._updateShapes(r,n),this}},{key:"_getUnlockedShapeIds",value:function(e){var t=this;return e.filter((function(e){var n;return!(null!==(n=t.getShapeById(e))&&void 0!==n&&n.isLocked)}))}},{key:"deleteShapes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectedIds;return this._deleteShapes(this._getUnlockedShapeIds(e)),this}},{key:"locale",get:function(){return this.user.locale}},{key:"setLocale",value:function(e){this.user.updateUserPreferences({locale:e})}},{key:"updatePage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._updatePage(e,t),this}},{key:"createPage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ko.createId(),n=arguments.length>2?arguments[2]:void 0;return this._createPage(e,t,n),this}},{key:"duplicatePage",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.currentPageId,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ko.createId();if(this.pages.length>=40)return this;var r=this.getPageById(t);if(!r)return this;var i=mt({},this.camera),o=this.getContent(this.getSortedChildIds(r.id));return this.batch((function(){if(e.createPage(r.name+" Copy",n,r.index),e.setCurrentPageId(n),e.setCamera(i.x,i.y,i.z),o)return e.putContent(o)})),this}},{key:"deletePage",value:function(e){this._deletePage(e)}},{key:"_assets",get:function(){return this.store.query.records("asset")}},{key:"assets",get:function(){return this._assets.value}},{key:"createAssets",value:function(e){return this._createAssets(e),this}},{key:"deleteAssets",value:function(e){return this._deleteAssets(e),this}},{key:"updateAssets",value:function(e){return this._updateAssets(e),this}},{key:"getAssetBySrc",value:function(e){return this.assets.find((function(t){return t.props.src===e}))}},{key:"getAssetById",value:function(e){return this.store.get(e)}},{key:"renamePage",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.isReadOnly||this.updatePage({id:e,name:t},n),this}},{key:"moveShapesToPage",value:function(e,t){var n=this;if(0===e.length)return this;if(this.isReadOnly)return this;var r=this.currentPageId;if(t===r)return this;if(!this.store.has(t))return this;var i=this.getContent(e);if(!i)return this;if(this.getShapeIdsInPage(t).size+i.shapes.length>yd)return Fb(this,t),this;var o=this.camera.z;return this.history.batch((function(){n.deleteShapes(e),n.setCurrentPageId(t),n.setFocusLayer(null),n.selectNone(),n.putContent(i,{select:!0,preserveIds:!0,preservePosition:!0});var r=n.selectionBounds.center,a=r.x,s=r.y;n.setCamera(n.camera.x,n.camera.y,o),n.centerOnPoint(a,s)})),this}},{key:"toggleLock",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectedIds;if(this.isReadOnly||0===e.length)return this;var t,n=!0,r=!0,i=[],o=w(e);try{for(o.s();!(t=o.n()).done;){var a=t.value,s=this.getShapeById(a);s&&(i.push(s),s.isLocked?r=!1:n=!1)}}catch(u){o.e(u)}finally{o.f()}return r?(this.updateShapes(i.map((function(e){return{id:e.id,type:e.type,isLocked:!0}}))),this.setSelectedIds([])):n?this.updateShapes(i.map((function(e){return{id:e.id,type:e.type,isLocked:!1}}))):this.updateShapes(i.map((function(e){return{id:e.id,type:e.type,isLocked:!0}}))),this}},{key:"reorderShapes",value:function(e,t){var n=this;if(this.isReadOnly)return this;if(0===t.length)return this;var r=this.getParentsMappedToChildren(t),i=[];switch(e){case"toBack":r.forEach((function(e,t){var r=br(n.getSortedChildIds(t).map((function(e){return n.getShapeById(e)})));if(e.size!==r.length){var o,a,s,u=w(r);try{for(u.s();!(s=u.n()).done;){var l=s.value;if(!e.has(l)){a=l.index;break}e.delete(l),o=l.index}}catch(d){u.e(d)}finally{u.f()}if(0!==e.size){var c=fr(o,a,e.size);Array.from(e.values()).sort(mr).forEach((function(e,t){return i.push({id:e.id,type:e.type,index:c[t]})}))}}}));break;case"toFront":r.forEach((function(e,t){var r=br(n.getSortedChildIds(t).map((function(e){return n.getShapeById(e)}))),o=r.length;if(e.size!==o){for(var a,s,u=o-1;u>-1;u--){var l=r[u];if(!e.has(l)){a=l.index;break}e.delete(l),s=l.index}if(0!==e.size){var c=fr(a,s,e.size);Array.from(e.values()).sort(mr).forEach((function(e,t){return i.push({id:e.id,type:e.type,index:c[t]})}))}}}));break;case"forward":r.forEach((function(e,t){var r=br(n.getSortedChildIds(t).map((function(e){return n.getShapeById(e)}))),o=r.length;if(e.size!==o)for(var a,s=new Set(Array.from(e).map((function(e){return r.indexOf(e)}))),u=-1,l=!1,c=0;c<o;c++){var d=s.has(c);if(!l&&d)l=!0,u=c,void 0;else if(l&&!d){var f;l=!1,a=c-u;for(var h=fr(r[c].index,null===(f=r[c+1])||void 0===f?void 0:f.index,a),p=0;p<a;p++){var v=r[u+p];i.push({id:v.id,type:v.type,index:h[p]})}}}}));break;case"backward":r.forEach((function(e,t){var r=br(n.getSortedChildIds(t).map((function(e){return n.getShapeById(e)}))),o=r.length;if(e.size!==o)for(var a,s=new Set(Array.from(e).map((function(e){return r.indexOf(e)}))),u=-1,l=!1,c=o-1;c>-1;c--){var d=s.has(c);if(!l&&d)l=!0,u=c;else if(l&&!d){var f;l=!1,a=u-c;for(var h=fr(null===(f=r[c-1])||void 0===f?void 0:f.index,r[c].index,a),p=0;p<a;p++){var v=r[c+p+1];i.push({id:v.id,type:v.type,index:h[p]})}}}}))}return this.updateShapes(i),this}},{key:"sendToBack",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pageState.selectedIds;return this.reorderShapes("toBack",e),this}},{key:"sendBackward",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pageState.selectedIds;return this.reorderShapes("backward",e),this}},{key:"bringForward",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pageState.selectedIds;return this.reorderShapes("forward",e),this}},{key:"bringToFront",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pageState.selectedIds;return this.reorderShapes("toFront",e),this}},{key:"flipShapes",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selectedIds;if(this.isReadOnly)return this;var r=br(n.map((function(e){return t.getShapeById(e)})));if(!r.length)return this;r=br(r.map((function(e){return t.isShapeOfType(e,Eg)?t.getSortedChildIds(e.id).map((function(e){return t.getShapeById(e)})):e})).flat());var i=lc.Common(br(r.map((function(e){return t.getPageBounds(e)})))).center;return this.batch((function(){var n,o=w(r);try{for(o.s();!(n=o.n()).done;){var a=n.value,s=t.getShapeUtil(a).bounds(a),u=t.getPageTransformById(a.id);u&&t.resizeShape(a.id,{x:"horizontal"===e?-1:1,y:"vertical"===e?-1:1},{initialBounds:s,initialPageTransform:u,initialShape:a,mode:"scale_shape",scaleOrigin:i,scaleAxisRotation:0})}}catch(l){o.e(l)}finally{o.f()}})),this}},{key:"stackShapes",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.pageState.selectedIds,r=arguments.length>2?arguments[2]:void 0;if(this.isReadOnly)return this;var i=br(n.map((function(e){return t.getShapeById(e)}))).filter((function(e){return!!e&&(!t.isShapeOfType(e,Bv)||"binding"!==e.props.start.type&&"binding"!==e.props.end.type)})),o=i.length;if(void 0===r&&o<3||o<2)return this;var a,s,u,l,c,d=Object.fromEntries(i.map((function(e){return[e.id,t.getPageBounds(e)]})));if("horizontal"===e?(a="x",s="minX",u="maxX",l="width"):(a="y",s="minY",u="maxY",l="height"),void 0===r){var f=[];i.sort((function(e,t){return d[e.id][s]-d[t.id][s]}));for(var h=function(){var e=i[p],t=i[p+1],n=d[e.id],r=d[t.id][s]-n[u],o=f.find((function(e){return e.gap===r}));o?o.count++:f.push({gap:r,count:1})},p=0;p<o-1;p++)h();var v=0;f.forEach((function(e){e.count>v&&(v=e.count,c=e.gap)})),1===v&&(c=Math.max(0,f.reduce((function(e,t){return e+t.gap*t.count}),0)/(o-1)))}else c=r;var g=[],m=d[i[0].id][u];return i.forEach((function(e,n){var r,i;if(0!==n){var o={x:0,y:0};o[a]=m+c-d[e.id][a];var s=t.getParentShape(e),u=s?Nl.Rot(o,-t.getPageRotation(s)):o,f=null===(r=(i=t.getShapeUtil(e)).onTranslateStart)||void 0===r?void 0:r.call(i,e);g.push(f?mt(mt({},f),{},vt({},a,e[a]+u[a])):vt({id:e.id,type:e.type},a,e[a]+u[a])),m+=d[e.id][l]+c}})),this.updateShapes(g),this}},{key:"packShapes",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pageState.selectedIds,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16;if(this.isReadOnly)return this;if(t.length<2)return this;for(var r,i,o=br(t.map((function(t){return e.getShapeById(t)})).filter((function(t){return!!t&&(!e.isShapeOfType(t,Bv)||"binding"!==t.props.start.type&&"binding"!==t.props.end.type)}))),a={},s={},u=0,l=0;l<o.length;l++)r=o[l],i=this.getPageBounds(r),a[r.id]=i,s[r.id]=i.clone(),u+=i.width*i.height;var c=lc.Common(br(Object.values(a))),d=c.width;o.sort((function(e,t){return a[t.id].height-a[e.id].height}));for(var f,h,p=Math.max(Math.ceil(Math.sqrt(u/.95)),d),v=[new lc(c.x,c.y,p,1/0)],g=0,m=0,y=0;y<o.length;y++){i=s[(r=o[y]).id];for(var b=v.length-1;b>=0;b--)if(f=v[b],!(i.width>f.width||i.height>f.height)){i.x=f.x,i.y=f.y,m=Math.max(m,i.maxY),g=Math.max(g,i.maxX),i.width===f.width&&i.height===f.height?(h=v.pop(),b<v.length&&(v[b]=h)):i.height===f.height?(f.x+=i.width+n,f.width-=i.width+n):i.width===f.width?(f.y+=i.height+n,f.height-=i.height+n):(v.push(new lc(f.x+(i.width+n),f.y,f.width-(i.width+n),i.height)),f.y+=i.height+n,f.height-=i.height+n);break}}for(var w,x=lc.Common(Object.values(s)),k=Nl.Sub(c.center,x.center),S=[],_=0;_<o.length;_++){var E,C;r=o[_],i=a[r.id],w=s[r.id];var P=this.getDeltaInParentSpace(r,Nl.Sub(w.point,i.point).add(k)),I={id:r.id,type:r.type,x:r.x+P.x,y:r.y+P.y},j=null===(E=(C=this.getShapeUtil(r)).onTranslateStart)||void 0===E?void 0:E.call(C,mt(mt({},r),I));j?S.push(mt(mt({},I),j)):S.push(I)}return S.length&&this.updateShapes(S),this}},{key:"alignShapes",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.pageState.selectedIds;if(this.isReadOnly)return this;if(n.length<2)return this;var r=br(n.map((function(e){return t.getShapeById(e)}))),i=Object.fromEntries(r.map((function(e){return[e.id,t.getPageBounds(e)]}))),o=lc.Common(br(Object.values(i))),a=[];return r.forEach((function(n){var r,s,u=i[n.id];if(u){var l={x:0,y:0};switch(e){case"top":l.y=o.minY-u.minY;break;case"center-vertical":l.y=o.midY-u.minY-u.height/2;break;case"bottom":l.y=o.maxY-u.minY-u.height;break;case"left":l.x=o.minX-u.minX;break;case"center-horizontal":l.x=o.midX-u.minX-u.width/2;break;case"right":l.x=o.maxX-u.minX-u.width}var c=t.getParentShape(n),d=c?Nl.Rot(l,-t.getPageRotation(c)):l,f=null===(r=(s=t.getShapeUtil(n)).onTranslateStart)||void 0===r?void 0:r.call(s,n);a.push(f?mt(mt({},f),{},{x:n.x+d.x,y:n.y+d.y}):{id:n.id,type:n.type,x:n.x+d.x,y:n.y+d.y})}})),this.updateShapes(a),this}},{key:"distributeShapes",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.pageState.selectedIds;if(this.isReadOnly)return this;if(n.length<3)return this;var r,i,o,a,s,u=n.length,l=br(n.map((function(e){return t.getShapeById(e)}))),c=Object.fromEntries(l.map((function(e){return[e.id,t.getPageBounds(e)]})));"horizontal"===e?(r="x",i="minX",o="maxX",a="midX",s="width"):(r="y",i="minY",o="maxY",a="midY",s="height");var d=[],f=l.sort((function(e,t){return c[e.id][i]-c[t.id][i]}))[0],h=l.sort((function(e,t){return c[t.id][o]-c[e.id][o]}))[0],p=c[f.id][a],v=(c[h.id][a]-p)/(u-1),g=p+v;return l.filter((function(e){return e!==f&&e!==h})).sort((function(e,t){return c[e.id][a]-c[t.id][a]})).forEach((function(e,n){var i,o,a={x:0,y:0};a[r]=g+v*n-c[e.id][s]/2-c[e.id][r];var u=t.getParentShape(e),l=u?Nl.Rot(a,-t.getPageRotation(u)):a,f=null===(i=(o=t.getShapeUtil(e)).onTranslateStart)||void 0===i?void 0:i.call(o,e);d.push(f?mt(mt({},f),{},vt({},r,e[r]+l[r])):vt({id:e.id,type:e.type},r,e[r]+l[r]))})),this.updateShapes(d),this}},{key:"_resizeUnalignedShape",value:function(e,t,n){var r=n.initialShape.type,i=new Nl(t.x,t.y);if(Math.abs(t.x)>Math.abs(t.y)?i.x=Math.sign(t.x)*Math.abs(t.y):i.y=Math.sign(t.y)*Math.abs(t.x),this.resizeShape(e,i,{initialShape:n.initialShape,initialBounds:n.initialBounds}),Math.sign(t.x)*Math.sign(t.y)<0){var o=mc.Decompose(n.initialPageTransform).rotation;o-=2*o,this.updateShapes([{id:e,type:r,rotation:o}],!0)}var a=mc.applyToPoint(n.initialPageTransform,n.initialBounds.center),s=this._scalePagePoint(a,n.scaleOrigin,t,n.scaleAxisRotation),u=this.getPageCenterById(e),l=this.getPagePointById(e);if(!u||!l)return this;var c=Nl.Sub(s,u),d=Nl.Add(l,c),f=this.getPointInParentSpace(e,d),h=f.x,p=f.y;return this.updateShapes([{id:e,type:r,x:h,y:p}],!0),this}},{key:"_scalePagePoint",value:function(e,t,n,r){var i=Nl.RotWith(e,t,-r).sub(t),o=Nl.MulV(i,n);return Nl.Add(o,t).rotWith(t,r)}},{key:"resizeShape",value:function(e,t){var n,r,i,o,a,s,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.isReadOnly)return this;Number.isFinite(t.x)||(t=new Nl(1,t.y)),Number.isFinite(t.y)||(t=new Nl(t.x,1));var l=null!==(n=u.initialShape)&&void 0!==n?n:this.getShapeById(e);if(!l)return this;var c=null!==(r=u.scaleOrigin)&&void 0!==r?r:null===(i=this.getPageBoundsById(e))||void 0===i?void 0:i.center;if(!c)return this;var d=this.getPageRotationById(e);if(null==d)return this;var f=null!==(o=u.scaleAxisRotation)&&void 0!==o?o:d,h=null!==(a=u.initialPageTransform)&&void 0!==a?a:this.getPageTransformById(e);if(!h)return this;var p=null!==(s=u.initialBounds)&&void 0!==s?s:this.getBoundsById(e);if(!p)return this;if(!Ql(d,f))return this._resizeUnalignedShape(e,t,mt(mt({},u),{},{initialBounds:p,scaleOrigin:c,scaleAxisRotation:f,initialPageTransform:h,initialShape:l}));var v=this.getShapeUtil(l);if(v.isAspectRatioLocked(l)&&(t=Math.abs(t.x)>Math.abs(t.y)?new Nl(t.x,Math.sign(t.y)*Math.abs(t.x)):new Nl(Math.sign(t.x)*Math.abs(t.y),t.y)),v.onResize&&v.canResize(l)){var g,m,y=this._scalePagePoint(mc.applyToPoint(h,new Nl(0,0)),c,t,f),b=this.getPointInParentSpace(l.id,y),w=new Nl(t.x,t.y),x=Vl((d-f)%Math.PI,0);w.x=x?t.x:t.y,w.y=x?t.y:t.x;var k=mc.applyToPoint(h,new Nl),S=this.getPointInParentSpace(l.id,k),_=S.x,E=S.y;this.updateShapes([mt({id:e,type:l.type,x:b.x,y:b.y},v.onResize(mt(mt({},l),{},{x:_,y:E}),{newPoint:b,handle:null!==(g=u.dragHandle)&&void 0!==g?g:"bottom_right",mode:null!==(m=u.mode)&&void 0!==m?m:"scale_shape",scaleX:w.x,scaleY:w.y,initialBounds:p,initialShape:l}))],!0)}else{var C=mc.applyToPoint(h,p.center),P=this._scalePagePoint(C,c,t,f),I=this.getPointInParentSpace(l.id,C),j=this.getPointInParentSpace(l.id,P),M=Nl.Sub(j,I);this.updateShapes([{id:e,type:l.type,x:l.x+M.x,y:l.y+M.y}],!0)}return this}},{key:"stretchShapes",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.pageState.selectedIds;if(this.isReadOnly)return this;if(n.length<2)return this;var r=br(n.map((function(e){return t.getShapeById(e)}))),i=Object.fromEntries(r.map((function(e){return[e.id,t.getBounds(e)]}))),o=Object.fromEntries(r.map((function(e){return[e.id,t.getPageBounds(e)]}))),a=lc.Common(br(Object.values(o)));switch(e){case"vertical":this.batch((function(){var e,n=w(r);try{for(n.s();!(e=n.n()).done;){var s=e.value;if(!(t.getPageRotation(s)%zl)){var u=i[s.id],l=o[s.id],c=t.getDeltaInParentSpace(s,new Nl(0,a.minY-l.minY)),d=Nl.Add(c,s),f=d.x,h=d.y;t.updateShapes([{id:s.id,type:s.type,x:f,y:h}],!0);var p=new Nl(1,a.height/l.height);t.resizeShape(s.id,p,{initialBounds:u,scaleOrigin:new Nl(l.center.x,a.minY),scaleAxisRotation:0})}}}catch(v){n.e(v)}finally{n.f()}}));break;case"horizontal":this.batch((function(){var e,n=w(r);try{for(n.s();!(e=n.n()).done;){var s=e.value,u=i[s.id],l=o[s.id];if(!(t.getPageRotation(s)%zl)){var c=t.getDeltaInParentSpace(s,new Nl(a.minX-l.minX,0)),d=Nl.Add(c,s),f=d.x,h=d.y;t.updateShapes([{id:s.id,type:s.type,x:f,y:h}],!0);var p=new Nl(a.width/l.width,1);t.resizeShape(s.id,p,{initialBounds:u,scaleOrigin:new Nl(a.minX,l.center.y),scaleAxisRotation:0})}}}catch(v){n.e(v)}finally{n.f()}}))}return this.updateShapes([]),this}},{key:"shapesArray",get:function(){var e=this;return Array.from(this.currentPageShapeIds,(function(t){return e.store.get(t)}))}},{key:"sortedShapesArray",get:function(){var e=this,t=new Set(this.shapesArray.sort(mr)),n=[];function r(e){n.push(e),t.delete(e),t.forEach((function(t){t.parentId===e.id&&r(t)}))}return t.forEach((function(t){As(e.getShapeById(t.parentId))||r(t)})),n}},{key:"selectedShapes",get:function(){var e=this;return br(this.pageState.selectedIds.map((function(t){return e.store.get(t)})))}},{key:"onlySelectedShape",get:function(){var e=this.selectedShapes;return 1===e.length?e[0]:null}},{key:"isShapeOfType",value:function(e,t){return e.type===t.type}},{key:"getShapeById",value:function(e){if(Ts(e))return this.store.get(e)}},{key:"getParentShape",value:function(e){if(void 0!==e&&Ts(e.parentId))return this.store.get(e.parentId)}},{key:"getShapeNearestSibling",value:function(e,t){if(t)return t.parentId===e.parentId?t:this.findAncestor(t,(function(t){return t.parentId===e.parentId}))}},{key:"isShapeInPage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.currentPageId,n=!1;if(e.parentId===t)n=!0;else{var r=this.getShapeById(e.parentId);e:for(;r;){if(r.parentId===t){n=!0;break e}r=this.getShapeById(r.parentId)}}return n}},{key:"getAncestorPageId",value:function(e){if(void 0!==e)return Vo(e.parentId)?e.parentId:this.getAncestorPageId(this.getShapeById(e.parentId))}},{key:"reparentShapesById",value:function(e,t,n){var r,i=this,o=[],a=Vo(t)?mc.Identity():this.getPageTransformById(t),s=a.decompose().rotation,u=[],l=br(this.getSortedChildIds(t).map((function(e){return i.getShapeById(e)})));if(n){var c=l.find((function(e){return e.index===n}));if(c){var d=l[l.indexOf(c)+1];u=d?fr(n,d.index,e.length):hr(n,e.length)}else{var f=l.sort(mr).find((function(e){return e.index>n}));u=f?fr(n,f.index,e.length):hr(n,e.length)}}else{var h=l.length&&l[l.length-1];u=h?hr(h.index,e.length):gr(e.length)}for(var p=0;p<e.length;p++){r=e[p];var v=this.getShapeById(r),g=this.getPagePointById(r);if(v&&g){var m=mc.applyToPoint(mc.Inverse(a),g),y=this.getPageRotation(v)-s;o.push({id:v.id,type:v.type,parentId:t,x:m.x,y:m.y,rotation:y,index:u[p]})}}return this.updateShapes(o),this}},{key:"getHighestIndexForParent",value:function(e){var t=this._parentIdsToChildIds.value[e];return t&&0!==t.length?vr(t[t.length-1][1]):"a1"}},{key:"getSortedChildIds",value:function(e){var t=this._parentIdsToChildIds.value[e];return t?this._childIdsCache.get(t,(function(){return t.map((function(e){return l(e,1)[0]}))})):Li}},{key:"visitDescendants",value:function(e,t){var n,r=w(this.getSortedChildIds(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;!1!==t(i)&&this.visitDescendants(i,t)}}catch(o){r.e(o)}finally{r.f()}}},{key:"getShapeAndDescendantIds",value:function(e){for(var t=new Set,n=d(e);n.length>0;){var r=n.pop();if(!r)break;t.has(r)||(t.add(r),this.getSortedChildIds(r).forEach((function(e){n.push(e)})))}return t}},{key:"getParentIdForNewShapeAtPoint",value:function(e,t){for(var n=this.sortedShapesArray,r=n.length-1;r>=0;r--){var i=n[r],o=this.getShapeUtil(i);if(o.canReceiveNewChildrenOfType(i,t)){var a=this.getMaskedPageBoundsById(i.id);if(a&&a.containsPoint(e)&&o.hitTestPoint(i,this.getPointInShapeSpace(i,e)))return i.id}}return this.focusLayerId}},{key:"getDroppingShape",value:function(e){for(var t,n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=this.sortedShapesArray,o=function(){var t=i[a];if(r.find((function(e){return e.id===t.id||n.hasAncestor(t,e.id)})))return 0;var o=n.getShapeUtil(t);if(!o.canDropShapes(t,r))return 0;var s=n.getMaskedPageBoundsById(t.id);return s&&s.containsPoint(e)&&o.hitTestPoint(t,n.getPointInShapeSpace(t,e))?{v:t}:void 0},a=i.length-1;a>=0;a--)if(0!==(t=o())&&t)return t.v}},{key:"getOutermostSelectableShape",value:function(e,t){for(var n=e,r=e;r;){var i;if(!this.isShapeOfType(r,Eg)||this.focusLayerId===r.id||this.hasAncestor(this.focusLayerShape,r.id)||null!==(i=null===t||void 0===t?void 0:t(r))&&void 0!==i&&!i){if(this.focusLayerId===r.id)break}else n=r;r=this.getParentShape(r)}return n}},{key:"setCurrentPageId",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).stopFollowing,n=void 0===t||t;return this._setCurrentPageId(e,{stopFollowing:n}),this}},{key:"updateInstanceState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this._updateInstanceState(e,t,n),this}},{key:"setCursor",value:function(e){var t=this.cursor,n=mt(mt({},t),{},{rotation:0},e);return t.type===n.type&&t.rotation===n.rotation&&t.color===n.color||this.updateInstanceState({cursor:n},!0),this}},{key:"setScribble",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.updateInstanceState({scribble:e},!0),this}},{key:"setBrush",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e||this.brush?(this.updateInstanceState({brush:e},!0),this):this}},{key:"setZoomBrush",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e||this.zoomBrush?(this.updateInstanceState({zoomBrush:e},!0),this):this}},{key:"rotateShapesBy",value:function(e,t){return e.length<=0||Ey({delta:t,snapshot:_y({editor:this}),editor:this,stage:"one-off"}),this}},{key:"nudgeShapes",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e.length<=0)return this;var i,o=this.isGridMode?n?5*this.gridSize:this.gridSize:n?10:1,a=Nl.Mul(t,o),s=[],u=w(e);try{for(u.s();!(i=u.n()).done;){var l,c,d=i.value,f=this.getShapeById(d);if(!f)throw Error("Could not find a shape with the id ".concat(d,"."));var h=this.getDeltaInParentSpace(f,a),p=null===(l=(c=this.getShapeUtil(f)).onTranslateStart)||void 0===l?void 0:l.call(c,f);s.push(p?mt(mt({},p),{},{x:f.x+h.x,y:f.y+h.y}):{id:d,x:f.x+h.x,y:f.y+h.y,type:f.type})}}catch(v){u.e(v)}finally{u.f()}return this.updateShapes(s,r),this}},{key:"duplicateShapes",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectedIds,n=arguments.length>1?arguments[1]:void 0;if(t.length<=0)return this;for(var r=new Set(t),i=[],o=d(t);o.length>0;){var a=o.pop();if(!a)break;i.push(a),this.getSortedChildIds(a).forEach((function(e){return o.push(e)}))}i.reverse();var s=new Map(i.map((function(e){return[e,Os()]}))),u=br(i.map((function(t){var i,o=e.getShapeById(t);if(!o)return null;var a=s.get(t),u=0,l=0;if(n&&r.has(t)){var c=e.getParentTransform(o),d=new Nl(n.x,n.y).rot(-mc.Decompose(c).rotation);u=d.x,l=d.y}var f=null!==(i=o.parentId)&&void 0!==i?i:e.currentPageId,h=e.getSortedChildIds(f),p=h.indexOf(o.id),v=h[p+1],g=v?e.getShapeById(v):null,m=g?pr(o.index,g.index):vr(o.index),y=Nr(o);if(e.isShapeOfType(o,Bv)&&e.isShapeOfType(y,Bv)){var b=e.getShapeUtil(Bv).getArrowInfo(o),w=void 0,x=void 0;if("binding"===o.props.start.type&&!(w=s.get(o.props.start.boundShapeId)))if(null!==b&&void 0!==b&&b.isValid){var k=b.start.point,S=k.x,_=k.y;y.props.start={type:"point",x:S,y:_}}else{var E=kv(e,o).start;y.props.start={type:"point",x:E.x,y:E.y}}if("binding"===o.props.end.type&&!(x=s.get(o.props.end.boundShapeId)))if(null!==b&&void 0!==b&&b.isValid){var C=b.end.point,P=C.x,I=C.y;y.props.end={type:"point",x:P,y:I}}else{var j=kv(e,o).end;y.props.start={type:"point",x:j.x,y:j.y}}var M=bv(y)?Ev(e,y):Mv(e,y);if(null!==b&&void 0!==b&&b.isValid&&null!==M&&void 0!==M&&M.isValid&&!bv(o)){var A=Nl.Med(b.start.handle,b.end.handle),T=Nl.Dist(b.middle,A),O=Nl.Dist(M.middle,A);y.props.bend<0?y.props.bend+=O-T:y.props.bend-=O-T}"binding"===y.props.start.type&&w&&(y.props.start.boundShapeId=w),"binding"===y.props.end.type&&x&&(y.props.end.boundShapeId=x)}return y=mt(mt({},y),{},{id:a,x:o.x+u,y:o.y+l,index:m})})));return u.forEach((function(e){Ts(e.parentId)&&s.has(e.parentId)&&(e.parentId=s.get(e.parentId))})),this.history.batch((function(){var t=u.length+e.currentPageShapeIds.size>yd;t&&Fb(e);var r=t?u.slice(0,yd-e.currentPageShapeIds.size):u,i=r.map((function(e){return e.id}));if(e.createShapes(r),e.setSelectedIds(i),void 0!==n){var o=e.viewportPageBounds,a=e.selectedPageBounds;a&&!o.contains(a)&&e.centerOnPoint(a.center.x,a.center.y,{duration:bd})}})),this}},{key:"setOpacity",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.history.batch((function(){if(t.isIn("select")){var i=t.pageState.selectedIds,o=[],a=function e(n){var r=t.getShapeById(n);if(r)if(t.isShapeOfType(r,Eg)){var i,a=w(t.getSortedChildIds(n));try{for(a.s();!(i=a.n()).done;){e(i.value)}}catch(s){a.e(s)}finally{a.f()}}else o.push(r)};if(i.length>0){var s,u=w(i);try{for(u.s();!(s=u.n()).done;){a(s.value)}}catch(l){u.e(l)}finally{u.f()}t.updateShapes(o.map((function(t){return{id:t.id,type:t.type,opacity:e}})),n)}}t.updateInstanceState({opacityForNextShape:e},n,r)})),this}},{key:"setStyle",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.history.batch((function(){if(n.isIn("select")){var o=n.pageState.selectedIds;if(o.length>0){var a,s=[],u=function r(i){var o=n.getShapeById(i);if(o)if(n.isShapeOfType(o,Eg)){var a,u=w(n.getSortedChildIds(i));try{for(u.s();!(a=u.n()).done;){r(a.value)}}catch(d){u.e(d)}finally{u.f()}}else{var l=n.getShapeUtil(o);if(l.hasStyle(e)){var c={id:o.id,type:o.type,props:{}};s.push({originalShape:o,updatePartial:l.setStyleInPartial(e,c,t)})}}},l=w(o);try{for(l.s();!(a=l.n()).done;){u(a.value)}}catch(x){l.e(x)}finally{l.f()}n.updateShapes(s.map((function(e){return e.updatePartial})),r);for(var c=[],d=0,f=s;d<f.length;d++){var h=f[d].originalShape,p=n.getShapeById(h.id);if(p){var v=n.getShapeUtil(p),g=v.bounds(h),m=v.bounds(p),y={id:h.id,type:h.type},b=!1;if(g.width!==m.width)if(b=!0,n.isShapeOfType(h,Jh))switch(h.props.align){case"middle":y.x=p.x+(g.width-m.width)/2;break;case"end":y.x=p.x+g.width-m.width}else y.x=p.x+(g.width-m.width)/2;g.height!==m.height&&(b=!0,y.y=p.y+(g.height-m.height)/2),b&&c.push(y)}}c.length&&n.updateShapes(c,r)}}n.updateInstanceState({stylesForNextShape:mt(mt({},n._stylesForNextShape),{},vt({},e.id,t))},r,i)})),this}},{key:"_setCamera",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.camera.z,i=this.camera;if(i.x===e&&i.y===t&&i.z===r)return this;var o=mt(mt({},i),{},{x:e,y:t,z:r});return this.batch((function(){var e;n.store.put([o]);var t=n.inputs.currentScreenPoint;n.dispatch({type:"pointer",target:"canvas",name:"pointer_move",point:t,pointerId:Pd,ctrlKey:n.inputs.ctrlKey,altKey:n.inputs.altKey,shiftKey:n.inputs.shiftKey,button:0,isPen:null!==(e=n.isPenMode)&&void 0!==e&&e}),n._tickCameraState()})),this}},{key:"setCamera",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.camera.z,r=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).stopFollowing,i=void 0===r||r;return this.stopCameraAnimation(),i&&this.instanceState.followingUserId&&this.stopFollowingUser(),e=Number.isNaN(e)?0:e,t=Number.isNaN(t)?0:t,n=Number.isNaN(n)?1:n,this._setCamera(e,t,n),this}},{key:"animateCamera",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.camera.z,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:_d;e=Number.isNaN(e)?0:e,t=Number.isNaN(t)?0:t,n=Number.isNaN(n)?1:n;var i=this.viewportScreenBounds,o=i.width,a=i.height,s=new lc(-e,-t,o/n,a/n);return this._animateToViewport(s,r)}},{key:"centerOnPoint",value:function(e,t,n){if(!this.canMoveCamera)return this;var r=this.viewportPageBounds,i=r.width,o=r.height,a=this.camera;return null!==n&&void 0!==n&&n.duration?this.animateCamera(-(e-i/2),-(t-o/2),a.z,n):this.setCamera(-(e-i/2),-(t-o/2),a.z),this}},{key:"zoomToContent",value:function(){var e,t=null!==(e=this.selectedPageBounds)&&void 0!==e?e:this.allShapesCommonBounds;return t&&this.zoomToBounds(t.minX,t.minY,t.width,t.height,Math.min(1,this.zoomLevel),{duration:220}),this}},{key:"zoomToFit",value:function(e){var t=this;if(!this.canMoveCamera)return this;var n=d(this.currentPageShapeIds);if(n.length<=0)return this;var r=lc.Common(br(n.map((function(e){return t.getPageBoundsById(e)}))));return this.zoomToBounds(r.minX,r.minY,r.width,r.height,void 0,e),this}},{key:"resetZoom",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.viewportScreenCenter,t=arguments.length>1?arguments[1]:void 0;if(!this.canMoveCamera)return this;var n=this.camera,r=n.x,i=n.y,o=n.z,a=e.x,s=e.y;return null!==t&&void 0!==t&&t.duration?this.animateCamera(r+(a/1-a)-(a/o-a),i+(s/1-s)-(s/o-s),1,t):this.setCamera(r+(a/1-a)-(a/o-a),i+(s/1-s)-(s/o-s),1),this}},{key:"zoomIn",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.viewportScreenCenter,t=arguments.length>1?arguments[1]:void 0;if(!this.canMoveCamera)return this;for(var n=this.camera,r=n.x,i=n.y,o=n.z,a=8,s=1;s<wd.length;s++){var u=wd[s];if(!(u-o<=(u-wd[s-1])/2)){a=u;break}}var l=e.x,c=e.y;return null!==t&&void 0!==t&&t.duration?this.animateCamera(r+(l/a-l)-(l/o-l),i+(c/a-c)-(c/o-c),a,t):this.setCamera(r+(l/a-l)-(l/o-l),i+(c/a-c)-(c/o-c),a),this}},{key:"zoomOut",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.viewportScreenCenter,t=arguments.length>1?arguments[1]:void 0;if(!this.canMoveCamera)return this;for(var n=this.camera,r=n.x,i=n.y,o=n.z,a=xd,s=wd.length-1;s>0;s--){var u=wd[s-1],l=wd[s];if(!(l-o>=(l-u)/2)){a=u;break}}var c=e.x,d=e.y;return null!==t&&void 0!==t&&t.duration?this.animateCamera(r+(c/a-c)-(c/o-c),i+(d/a-d)-(d/o-d),a,t):this.setCamera(r+(c/a-c)-(c/o-c),i+(d/a-d)-(d/o-d),a),this}},{key:"zoomToSelection",value:function(e){var t=this;if(!this.canMoveCamera)return this;var n=this.selectedIds;if(n.length<=0)return this;var r=lc.Common(br(n.map((function(e){return t.getPageBoundsById(e)}))));return this.zoomToBounds(r.minX,r.minY,r.width,r.height,Math.max(1,this.camera.z),e),this}},{key:"panZoomIntoView",value:function(e,t){var n=this;if(!this.canMoveCamera)return this;if(e.length<=0)return this;var r=lc.Common(br(e.map((function(e){return n.getPageBoundsById(e)})))),i=this.viewportPageBounds;if(i.h<r.h||i.w<r.w)return this.zoomToBounds(r.minX,r.minY,r.width,r.height,this.camera.z,t),this;var o=this._activeAreaManager.offsets.value,a=i.y+o.top,s=i.maxY-o.right,u=i.maxY-o.bottom,l=i.x+o.left,c=r.y,d=r.maxX,f=r.maxY,h=r.x,p=0,v=0;u<f?v=u-f:a>c&&(v=a-c),s<d?p=s-d:l>h&&(p=l-h);var g=this.camera;return null!==t&&void 0!==t&&t.duration?this.animateCamera(g.x+p,g.y+v,g.z,t):this.setCamera(g.x+p,g.y+v,g.z),this}},{key:"zoomToBounds",value:function(e,t,n,r,i,o){if(!this.canMoveCamera)return this;var a=this.viewportScreenBounds,s=Math.min(256,.28*a.width),u=Ul(Math.min((a.width-s)/n,(a.height-s)/r),xd,8);return void 0!==i&&(u=Math.min(i,u)),null!==o&&void 0!==o&&o.duration?this.animateCamera(-e+(a.width-n*u)/2/u,-t+(a.height-r*u)/2/u,u,o):this.setCamera(-e+(a.width-n*u)/2/u,-t+(a.height-r*u)/2/u,u),this}},{key:"pan",value:function(e,t,n){var r;if(!this.canMoveCamera)return this;var i=this.camera,o=i.x,a=i.y,s=i.z,u=new Nl(e,t).div(s);return null!==(r=null===n||void 0===n?void 0:n.duration)&&void 0!==r&&r?this.animateCamera(o+u.x,a+u.y,s,n):(this.setCamera(o+u.x,a+u.y,s),this)}},{key:"stopCameraAnimation",value:function(){return this.emit("stop-camera-animation"),this}},{key:"_animateViewport",value:function(e){var t=this;if(this._viewportAnimation){var n=function e(){t.removeListener("tick",t._animateViewport),t.removeListener("stop-camera-animation",e),t._viewportAnimation=null};this.once("stop-camera-animation",n),this._viewportAnimation.elapsed+=e;var r=this._viewportAnimation,i=r.elapsed,o=r.easing,a=r.duration,s=r.start,u=r.end;if(i>a){var l=this.viewportScreenBounds.width/u.width,c=-u.x,d=-u.y;return this._setCamera(c,d,l),void n()}var f=o(1-(a-i)/a),h=s.minX+(u.minX-s.minX)*f,p=s.minY+(u.minY-s.minY)*f,v=s.maxX+(u.maxX-s.maxX)*f,g=s.maxY+(u.maxY-s.maxY)*f,m=new lc(h,p,v-h,g-p),y=this.viewportScreenBounds.width/m.width,b=-m.x,w=-m.y;this._setCamera(b,w,y)}}},{key:"_animateToViewport",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.duration,r=void 0===n?0:n,i=t.easing,o=void 0===i?Ol.easeInOutCubic:i,a=this.animationSpeed,s=this.viewportPageBounds;return this.stopCameraAnimation(),this.instanceState.followingUserId&&this.stopFollowingUser(),0===r||0===a?this._setCamera(-e.x,-e.y,this.viewportScreenBounds.width/e.width):(this._viewportAnimation={elapsed:0,duration:r/a,easing:o,start:s.clone(),end:e},this.addListener("tick",this._animateViewport),this)}},{key:"slideCamera",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.canMoveCamera)return this;if(this.stopCameraAnimation(),0!==this.animationSpeed){var n=t.speed,r=t.friction,i=t.direction,o=t.speedThreshold,a=void 0===o?.01:o,s=Math.min(n,1),u=function t(){e.removeListener("tick",l),e.removeListener("stop-camera-animation",t)};this.once("stop-camera-animation",u);var l=function(t){var n=e.camera,o=n.x,l=n.y,c=n.z,d=i.clone().mul(s*t/c);(s*=1-r)<a?u():e._setCamera(o+d.x,l+d.y,c)};return this.addListener("tick",l),this}}},{key:"animateToUser",value:function(e){var t=this,n=d(this.store.query.records("instance_presence",(function(){return{userId:{eq:e}}})).value).sort((function(e,t){return e.lastActivityTimestamp-t.lastActivityTimestamp})).pop();n&&this.batch((function(){null!==t.instanceState.followingUserId&&t.stopFollowingUser();var r=n.currentPageId===t.currentPageId;r||t.setCurrentPageId(n.currentPageId);var i=r?{duration:500}:void 0,o=n.cursor;t.centerOnPoint(o.x,o.y,i);var a=t.instanceState.highlightedUserIds;t.updateInstanceState({highlightedUserIds:[].concat(d(a),[e])}),setTimeout((function(){var n=d(t.instanceState.highlightedUserIds),r=n.indexOf(e);r<0||(n.splice(r,1),t.updateInstanceState({highlightedUserIds:n}))}),3e3)}))}},{key:"startFollowingUser",value:function(e){var t=this,n=this.store.query.records("instance_presence",(function(){return{userId:{eq:e}}})),r=this.user.id;if(r||console.warn("You should set the userId for the current instance before following a user"),!n.value.some((function(e){return e.followingUserId===r}))){Ji((function(){t.stopFollowingUser(),t.updateInstanceState({followingUserId:e},!0)}));var i=!1,o=function(){var e=d(n.value).sort((function(e,t){return e.lastActivityTimestamp-t.lastActivityTimestamp})).pop();if(e){var o=e.currentPageId===t.currentPageId,a=o?.5:1;o||t.setCurrentPageId(e.currentPageId,{stopFollowing:!1});var s=t.viewportPageBounds,u=s.center,l=s.width,c=s.height,f=lc.From(e.screenBounds),h=f.width/e.camera.z,p=f.height/e.camera.z,v=new Nl(h/2-e.camera.x,p/2-e.camera.y),g=l+(h-l)*a,m=c+(p-c)*a,y=e.followingUserId===r?c/m:Math.min(l/g,c/m),b=Ul(t.camera.z*y,xd,8),w=t.viewportScreenBounds.w/b,x=t.viewportScreenBounds.h/b,k=v.sub(u),S=Nl.Add(u,Nl.Mul(k,a)),_=Nl.Sub(S,u).len(),E=Math.abs(b-t.camera.z);_<.1&&E<.005?i=!0:i&&_<.2&&E<.05||(i=!1,t.stopCameraAnimation(),t.setCamera(-(S.x-w/2),-(S.y-x/2),b,{stopFollowing:!1}))}else t.stopFollowingUser()};return this.once("stop-following",(function e(){t.removeListener("frame",o),t.removeListener("stop-following",e)})),this.addListener("frame",o),this}}},{key:"stopFollowingUser",value:function(){return this.updateInstanceState({followingUserId:null},!0),this.emit("stop-following"),this}},{key:"animateToShape",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_d;if(!this.canMoveCamera)return this;var n=Iy(this),r=n.width/n.height,i=this.getPageBoundsById(e);if(!i)return this;var o=i.width/i.height,a=i.clone(),s=i.width/n.width;return a.width+=(n.left+n.right)*s,a.height+=(n.top+n.bottom)*s,a.x-=n.left*s,a.y-=n.top*s,o>r?(a.height=i.width/r,a.y-=(a.height-i.height)/2):(a.width=i.height*r,a.x-=(a.width-i.width)/2),this._animateToViewport(a,t)}},{key:"blur",value:function(){return this.complete(),this.getContainer().blur(),this._isFocused.set(!1),this}},{key:"focus",value:function(){return this.getContainer().focus(),this._isFocused.set(!0),this}},{key:"cancel",value:function(){return this.dispatch({type:"misc",name:"cancel"}),this}},{key:"interrupt",value:function(){return this.dispatch({type:"misc",name:"interrupt"}),this}},{key:"complete",value:function(){return this.dispatch({type:"misc",name:"complete"}),this}},{key:"putExternalContent",value:function(){var e=b(m().mark((function e(t){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.externalContentManager.handleContent(t);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"groupShapes",value:function(){var e,t,n=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectedIds,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Os();if(this.isReadOnly)return this;if(r.length<=1)return this;var o=br(this._getUnlockedShapeIds(r).map((function(e){return n.getShapeById(e)}))),a=o.sort(mr).map((function(e){return e.id})),s=lc.Common(br(o.map((function(e){return n.getPageBounds(e)})))),u=s.point,l=u.x,c=u.y,d=null!==(e=this.findCommonAncestor(o))&&void 0!==e?e:this.currentPageId;if("select"!==this.currentToolId)return this;this.isIn("select.idle")||this.cancel();var f=o.filter((function(e){return e.parentId===d})).sort(mr),h=null===(t=f[f.length-1])||void 0===t?void 0:t.index;return this.batch((function(){n.createShapes([{id:i,type:"group",parentId:d,index:h,x:l,y:c,opacity:1,props:{}}]),n.reparentShapesById(a,i),n.select(i)})),this}},{key:"ungroupShapes",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectedIds;if(this.isReadOnly)return this;if(0===t.length)return this;if("select"!==this.currentToolId)return this;this.isIn("select.idle")||this.cancel();var n=new Set,r=br(t.map((function(t){return e.getShapeById(t)}))),i=[];return r.forEach((function(t){e.isShapeOfType(t,Eg)?i.push(t):n.add(t.id)})),0===i.length||this.batch((function(){for(var t,r=0,o=i.length;r<o;r++){t=i[r];for(var a=e.getSortedChildIds(t.id),s=0,u=a.length;s<u;s++)n.add(a[s]);e.reparentShapesById(a,t.parentId,t.index)}e.deleteShapes(i.map((function(e){return e.id}))),e.select.apply(e,d(n))})),this}},{key:"getSvg",value:function(){var e=b(m().mark((function e(){var t,n,r,i,o,a,s,u,l,c,d,f,h,p,v,g,y,x,k,S,_,E,C,P,I,j,M,A,T,O,N,R,L,D,z,B,F,U,K,V,W,H=this,Y=arguments;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Y.length>0&&void 0!==Y[0]?Y[0]:this.selectedIds.length?this.selectedIds:Object.keys(this.currentPageShapeIds),n=Y.length>1&&void 0!==Y[1]?Y[1]:{},0!==t.length){e.next=4;break}return e.abrupt("return");case 4:if(window.document){e.next=6;break}throw Error("No document");case 6:r=n.scale,i=void 0===r?1:r,o=n.background,a=void 0!==o&&o,s=n.padding,u=void 0===s?32:s,l=n.darkMode,c=void 0===l?this.isDarkMode:l,d=n.preserveAspectRatio,f=void 0!==d&&d,h=this.getContainer(),p=getComputedStyle(h),(v=document.createElement("div")).className="tl-container tl-theme__".concat(c?"dark":"light"," tl-theme__force-sRGB"),document.body.appendChild(v),g=getComputedStyle(v),y=new Map,x={fill:zr(Ys.values.map((function(e){return[e,g.getPropertyValue("--palette-".concat(e))]}))),pattern:zr(Ys.values.map((function(e){return[e,g.getPropertyValue("--palette-".concat(e,"-pattern"))]}))),semi:zr(Ys.values.map((function(e){return[e,g.getPropertyValue("--palette-".concat(e,"-semi"))]}))),highlight:zr(Ys.values.map((function(e){return[e,g.getPropertyValue("--palette-".concat(e,"-highlight"))]}))),text:g.getPropertyValue("--color-text"),background:g.getPropertyValue("--color-background"),solid:g.getPropertyValue("--palette-solid")},document.body.removeChild(v),k=this.getShapeAndDescendantIds(t),S=this.computeUnorderedRenderingShapes([this.currentPageId]).filter((function(e){var t=e.id;return k.has(t)})),_=null,E=w(S),e.prev=20,E.s();case 22:if((C=E.n()).done){e.next=29;break}if(P=C.value.maskedPageBounds){e.next=26;break}return e.abrupt("continue",27);case 26:_?_.union(P):_=P.clone();case 27:e.next=22;break;case 29:e.next=34;break;case 31:e.prev=31,e.t0=e.catch(20),E.e(e.t0);case 34:return e.prev=34,E.f(),e.finish(34);case 37:if(_){e.next=39;break}return e.abrupt("return");case 39:for((I=1===t.length&&this.isShapeOfType(this.getShapeById(t[0]),Ig)?t[0]:null)||_.expandBy(u),j=_.width*i,M=_.height*i,A=window.document.createElementNS("http://www.w3.org/2000/svg","svg"),f&&A.setAttribute("preserveAspectRatio",f),A.setAttribute("direction","ltr"),A.setAttribute("width",j+""),A.setAttribute("height",M+""),A.setAttribute("viewBox","".concat(_.minX," ").concat(_.minY," ").concat(_.width," ").concat(_.height)),A.setAttribute("stroke-linecap","round"),A.setAttribute("stroke-linejoin","round"),a?I?A.style.setProperty("background",x.solid):A.style.setProperty("background-color",x.background):A.style.setProperty("background-color","transparent"),T=window.document.createElementNS("http://www.w3.org/2000/svg","defs"),O=0,N=Array.from(vh(x.solid));O<N.length;O++)R=N[O],T.appendChild(R);try{null===(L=(D=document.body).focus)||void 0===L||L.call(D)}catch(VO){}return A.append(T),e.next=58,Promise.all(S.map(function(){var e=b(m().mark((function e(t){var n,r,i,o,a,s,u,l,c,d,f,h,v,g,b,w,k,S,_,E,C,P,j,M,A,O,N,R;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=t.id,l=t.opacity,c=t.index,d=t.backgroundIndex,u!==I){e.next=3;break}return e.abrupt("return",[]);case 3:if(f=H.getShapeById(u),!H.isShapeOfType(f,Eg)){e.next=6;break}return e.abrupt("return",[]);case 6:return h=H.getShapeUtil(f),(g=h.getStyleIfExists(Gs,f))&&(y.has(g)?v=y.get(g):(v=p.getPropertyValue("--tl-font-".concat(g)),y.set(g,v))),e.next=11,null===(n=h.toSvg)||void 0===n?void 0:n.call(h,f,v,x);case 11:return b=e.sent,e.next=14,null===(r=h.toBackgroundSvg)||void 0===r?void 0:r.call(h,f,v,x);case 14:return w=e.sent,b&&((k=document.createElementNS("http://www.w3.org/2000/svg","g")).appendChild(b),b=k),w&&((S=document.createElementNS("http://www.w3.org/2000/svg","g")).appendChild(w),w=S),b||w||(_=H.getPageBounds(f),(E=window.document.createElementNS("http://www.w3.org/2000/svg","rect")).setAttribute("width",_.width+""),E.setAttribute("height",_.height+""),E.setAttribute("fill",x.solid),E.setAttribute("stroke",x.pattern.grey),E.setAttribute("stroke-width","1"),b=E),C=H.getPageTransform(f).toCssString(),"scale"in f.props&&1!==f.props.scale&&(C="".concat(C," scale(").concat(f.props.scale,", ").concat(f.props.scale,")")),null===(i=b)||void 0===i||i.setAttribute("transform",C),null===(o=w)||void 0===o||o.setAttribute("transform",C),null===(a=b)||void 0===a||a.setAttribute("opacity",l+""),null===(s=w)||void 0===s||s.setAttribute("opacity",l+""),(P=H.getPageMaskById(f.id))&&(j=document.createElementNS("http://www.w3.org/2000/svg","clipPath"),T.appendChild(j),M=fo(),j.id=M,(A=document.createElementNS("http://www.w3.org/2000/svg","path")).setAttribute("d","M".concat(P.map((function(e){var t=e.x,n=e.y;return"".concat(t,",").concat(n)})).join("L"),"Z")),j.appendChild(A),b&&((O=document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute("clip-path","url(#".concat(M,")")),O.appendChild(b),b=O),w&&((N=document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute("clip-path","url(#".concat(M,")")),N.appendChild(w),w=N)),R=[],b&&R.push({zIndex:c,element:b}),w&&R.push({zIndex:d,element:w}),e.abrupt("return",R);case 30:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 58:z=e.sent.flat(),B=w(z.sort((function(e,t){return e.zIndex-t.zIndex})));try{for(B.s();!(F=B.n()).done;)U=F.value.element,A.appendChild(U)}catch(q){B.e(q)}finally{B.f()}return K="",V=window.document.createElementNS("http://www.w3.org/2000/svg","style"),W=[],"fonts"in document&&document.fonts.forEach((function(e){return W.push(e)})),e.next=67,Promise.all(W.map(function(){var e=b(m().mark((function e(t){var n,r,i,o,a,s,u;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=new FileReader,r=!1,y.forEach((function(e){e.includes(t.family)&&(r=!0)})),r){e.next=5;break}return e.abrupt("return");case 5:if(i=t.$$_url,o=t.$$_fontface,!i){e.next=18;break}return e.next=10,fetch(i);case 10:return e.next=12,e.sent.blob();case 12:return a=e.sent,e.next=15,new Promise((function(e,t){n.onload=function(){return e(n.result)},n.onerror=function(){return t(n.error)},n.readAsDataURL(a)}));case 15:s=e.sent,u="\n"+o.replaceAll(i,s),K+=u;case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 67:return V.textContent=K,T.append(V),e.abrupt("return",A);case 70:case"end":return e.stop()}}),e,this,[[20,31,34,37]])})));return function(){return e.apply(this,arguments)}}()}]),n}(av.EventEmitter);function Fb(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.currentPageId,n=e.getPageById(t).name;e.emit("max-shapes",{name:n,pageId:t,count:yd})}zb([so],Bb.prototype,"_pageTransformCache",1),zb([so],Bb.prototype,"_pageBoundsCache",1),zb([so],Bb.prototype,"canUndo",1),zb([so],Bb.prototype,"canRedo",1),zb([so],Bb.prototype,"_stylesForNextShape",1),zb([so({isEqual:function(e,t){return e.equals(t)}})],Bb.prototype,"sharedStyles",1),zb([so],Bb.prototype,"sharedOpacity",1),zb([so],Bb.prototype,"_arrowBindingsIndex",1),zb([so],Bb.prototype,"_allPageStates",1),zb([so],Bb.prototype,"openMenus",1),zb([so],Bb.prototype,"isMenuOpen",1),zb([so],Bb.prototype,"documentSettings",1),zb([so],Bb.prototype,"_pages",1),zb([so],Bb.prototype,"pages",1),zb([so],Bb.prototype,"_pageStates",1),zb([so],Bb.prototype,"pageStateId",1),zb([so],Bb.prototype,"pageState",1),zb([so],Bb.prototype,"selectedIds",1),zb([so],Bb.prototype,"selectedIdsSet",1),zb([so],Bb.prototype,"editingShape",1),zb([so],Bb.prototype,"hoveredId",1),zb([so],Bb.prototype,"hoveredShape",1),zb([so],Bb.prototype,"hintingIds",1),zb([so],Bb.prototype,"erasingIds",1),zb([so],Bb.prototype,"erasingIdsSet",1),zb([so],Bb.prototype,"cameraId",1),zb([so],Bb.prototype,"camera",1),zb([so],Bb.prototype,"zoomLevel",1),zb([so],Bb.prototype,"viewportScreenBounds",1),zb([so],Bb.prototype,"viewportScreenCenter",1),zb([so],Bb.prototype,"viewportPageBounds",1),zb([so],Bb.prototype,"viewportPageCenter",1),zb([so],Bb.prototype,"cameraState",1),zb([so],Bb.prototype,"renderingShapes",1),zb([so],Bb.prototype,"renderingBounds",1),zb([so],Bb.prototype,"renderingBoundsExpanded",1),zb([so],Bb.prototype,"_clipPathCache",1),zb([so],Bb.prototype,"_pageMaskCache",1),zb([so],Bb.prototype,"allShapesCommonBounds",1),zb([so],Bb.prototype,"selectedPageBounds",1),zb([so],Bb.prototype,"selectionRotation",1),zb([so],Bb.prototype,"selectionBounds",1),zb([so],Bb.prototype,"selectionPageCenter",1),zb([so],Bb.prototype,"_assets",1),zb([so],Bb.prototype,"shapesArray",1),zb([so],Bb.prototype,"sortedShapesArray",1),zb([so],Bb.prototype,"selectedShapes",1),zb([so],Bb.prototype,"onlySelectedShape",1);var Ub="TLDRAW_TAB_ID_v2",Kb=globalThis.window;var Vb=null!==(Nb=null!==(Rb=null===Kb||void 0===Kb?void 0:Kb[Ub])&&void 0!==Rb?Rb:null===Kb||void 0===Kb?void 0:Kb.sessionStorage[Ub])&&void 0!==Nb?Nb:"TLDRAW_INSTANCE_STATE_V1_"+Bp();Kb&&(Kb[Ub]=Vb,Kb&&(["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(Kb.navigator.platform)||Kb.navigator.userAgent.includes("Mac")&&"ontouchend"in document)?Kb.sessionStorage[Ub]=Vb:delete Kb.sessionStorage[Ub]),null===Kb||void 0===Kb||Kb.addEventListener("beforeunload",(function(){Kb.sessionStorage[Ub]=Vb}));var Wb=0,Hb=bi({version:si,currentPageId:Uo,isFocusMode:hi,exportBackground:hi,isDebugMode:hi,isToolLocked:hi,isGridMode:hi,pageStates:mi(bi({pageId:Uo,camera:bi({x:si,y:si,z:si}),selectedIds:mi(Ia),focusLayerId:Ia.nullable()}))}),Yb=Eo({currentVersion:Wb});function qb(e,t){var n=function(e){if(!e||"object"!==typeof e)return console.warn("Invalid instance state"),null;if(!("version"in e)||"number"!==typeof e.version)return console.warn("No version in instance state"),null;var t=Io({value:e,fromVersion:e.version,toVersion:Wb,migrations:Yb});if("error"===t.type)return console.warn(t.reason),null;var n=mt(mt({},t.value),{},{version:Wb});try{Hb.validate(n)}catch(VO){return console.warn(VO),null}return n}(t);if(n){var r=e.allRecords().filter((function(e){return"instance_page_state"===e.typeName||"camera"===e.typeName})),i={added:{},updated:{},removed:mt({},zr(r.map((function(e){return[e.id,e]}))))};e.has(Ca)&&(i.removed[Ca]=e.get(Ca));var o,a={removed:{},updated:{},added:vt({},Ca,e.schema.types.instance.create({id:Ca,currentPageId:n.currentPageId,isDebugMode:n.isDebugMode,isFocusMode:n.isFocusMode,isToolLocked:n.isToolLocked,isGridMode:n.isGridMode,exportBackground:n.exportBackground}))},s=w(n.pageStates);try{for(s.s();!(o=s.n()).done;){var u=o.value,l=To.createId(u.pageId),c=Ra.createId(u.pageId);a.added[l]=To.create({id:To.createId(u.pageId),x:u.camera.x,y:u.camera.y,z:u.camera.z}),a.added[c]=Ra.create({id:Ra.createId(u.pageId),pageId:u.pageId,selectedIds:u.selectedIds,focusLayerId:u.focusLayerId})}}catch(d){s.e(d)}finally{s.f()}Ji((function(){e.applyDiff(xo([i,a])),e.ensureStoreIsUsable()}))}}function Xb(e){for(var t=[],n=0,r=Object.values(e);n<r.length;n++){var i,o=r[n];null!==(i=o.typeName)&&void 0!==i&&i.match(/^(instance.*|pointer|camera)$/)&&t.push(o)}var a=t.filter((function(e){return"instance"===e.typeName&&e.id!==Ca}))[0];if(!a)return null;var s={version:Wb,currentPageId:a.currentPageId,exportBackground:!!a.exportBackground,isFocusMode:!!a.isFocusMode,isDebugMode:!!a.isDebugMode,isToolLocked:!!a.isToolLocked,isGridMode:!1,pageStates:t.filter((function(e){return"instance_page_state"===e.typeName&&e.instanceId===a.id})).map((function(t){var n,r=null!==(n=e[t.cameraId])&&void 0!==n?n:{x:0,y:0,z:1};return{pageId:t.pageId,camera:{x:r.x,y:r.y,z:r.z},selectedIds:t.selectedIds,focusLayerId:t.focusLayerId}}))};try{return Hb.validate(s),s}catch(VO){return null}}var $b,Gb,Qb=function(e,t){return t.some((function(t){return e instanceof t}))};var Jb=new WeakMap,Zb=new WeakMap,ew=new WeakMap,tw=new WeakMap,nw=new WeakMap;var rw={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Zb.get(e);if("objectStoreNames"===t)return e.objectStoreNames||ew.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return aw(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function iw(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Gb||(Gb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(sw(this),n),aw(Jb.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return aw(e.apply(sw(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o=e.call.apply(e,[sw(this),t].concat(r));return ew.set(o,t.sort?t.sort():[t]),aw(o)}}function ow(e){return"function"===typeof e?iw(e):(e instanceof IDBTransaction&&function(e){if(!Zb.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=function(){t(),r()},o=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)}));Zb.set(e,t)}}(e),Qb(e,$b||($b=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,rw):e)}function aw(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",o)},i=function(){t(aw(e.result)),r()},o=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)}));return t.then((function(t){t instanceof IDBCursor&&Jb.set(t,e)})).catch((function(){})),nw.set(t,e),t}(e);if(tw.has(e))return tw.get(e);var t=ow(e);return t!==e&&(tw.set(e,t),nw.set(t,e)),t}var sw=function(e){return nw.get(e)};function uw(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,o=n.blocking,a=n.terminated,s=indexedDB.open(e,t),u=aw(s);return i&&s.addEventListener("upgradeneeded",(function(e){i(aw(s.result),e.oldVersion,e.newVersion,aw(s.transaction),e)})),r&&s.addEventListener("blocked",(function(e){return r(e.oldVersion,e.newVersion,e)})),u.then((function(e){a&&e.addEventListener("close",(function(){return a()})),o&&e.addEventListener("versionchange",(function(e){return o(e.oldVersion,e.newVersion,e)}))})).catch((function(){})),u}function lw(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).blocked,n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",(function(e){return t(e.oldVersion,e)})),aw(n).then((function(){}))}var cw=["get","getKey","getAll","getAllKeys","count"],dw=["put","add","delete","clear"],fw=new Map;function hw(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(fw.get(t))return fw.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=dw.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||cw.includes(n))){var o=function(){var e=b(m().mark((function e(t){var o,a,s,u,l,c,d=arguments;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=this.transaction(t,i?"readwrite":"readonly"),s=a.store,u=d.length,l=new Array(u>1?u-1:0),c=1;c<u;c++)l[c-1]=d[c];return r&&(s=s.index(l.shift())),e.next=6,Promise.all([(o=s)[n].apply(o,l),i&&a.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return fw.set(t,o),o}}}rw=function(e){return mt(mt({},e),{},{get:function(t,n,r){return hw(t,n)||e.get(t,n,r)},has:function(t,n){return!!hw(t,n)||e.has(t,n)}})}(rw);var pw="TLDRAW_DOCUMENT_v2",vw="TLDRAW_DB_NAME_INDEX_v2",gw={Records:"records",Schema:"schema",SessionState:"session_state"};function mw(e,t){return yw.apply(this,arguments)}function yw(){return yw=b(m().mark((function e(t,n){var r;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Iw(t),e.next=3,uw(t,3,{upgrade:function(e){e.objectStoreNames.contains(gw.Records)||e.createObjectStore(gw.Records),e.objectStoreNames.contains(gw.Schema)||e.createObjectStore(gw.Schema),e.objectStoreNames.contains(gw.SessionState)||e.createObjectStore(gw.SessionState)}});case 3:return r=e.sent,e.prev=4,e.next=7,n(r);case 7:return e.abrupt("return",e.sent);case 8:return e.prev=8,r.close(),e.finish(8);case 11:case"end":return e.stop()}}),e,null,[[4,,8,11]])}))),yw.apply(this,arguments)}function bw(e){return ww.apply(this,arguments)}function ww(){return ww=b(m().mark((function e(t){var n,r,i,o;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.persistenceKey,r=t.sessionId,i=t.didCancel,o=pw+n,Pw().includes(o)){e.next=4;break}return e.abrupt("return",void 0);case 4:return e.next=6,Ew({persistenceKey:n,didCancel:i});case 6:return e.next=8,mw(o,function(){var e=b(m().mark((function e(t){var n,o,a,s,u,l,c,d,f;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===i||void 0===i||!i()){e.next=2;break}return e.abrupt("return",void 0);case 2:if(o=t.transaction([gw.Records,gw.Schema,gw.SessionState],"readonly"),a=o.objectStore(gw.Records),s=o.objectStore(gw.Schema),u=o.objectStore(gw.SessionState),!r){e.next=21;break}return e.next=9,u.get(r);case 9:if(e.t2=n=e.sent,e.t1=null===e.t2,e.t1){e.next=13;break}e.t1=void 0===n;case 13:if(!e.t1){e.next=17;break}e.t3=void 0,e.next=18;break;case 17:e.t3=n.snapshot;case 18:e.t0=e.t3,e.next=22;break;case 21:e.t0=null;case 22:if(l=e.t0){e.next=28;break}return e.next=26,u.getAll();case 26:d=e.sent,l=null===(c=d.sort((function(e,t){return e.updatedAt-t.updatedAt})).pop())||void 0===c?void 0:c.snapshot;case 28:return e.next=30,a.getAll();case 30:return e.t4=e.sent,e.next=33,s.get(gw.Schema);case 33:if(e.t5=e.sent,e.t6=l,f={records:e.t4,schema:e.t5,sessionStateSnapshot:e.t6},null===i||void 0===i||!i()){e.next=39;break}return o.abort(),e.abrupt("return",void 0);case 39:return e.next=41,o.done;case 41:return e.abrupt("return",f);case 42:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)}))),ww.apply(this,arguments)}function xw(e){return kw.apply(this,arguments)}function kw(){return kw=b(m().mark((function e(t){var n,r,i,o,a,s,u;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.persistenceKey,r=t.schema,i=t.changes,o=t.sessionId,a=t.sessionStateSnapshot,s=t.didCancel,u=pw+n,e.next=4,mw(u,function(){var e=b(m().mark((function e(t){var n,u,c,d,f,h,p,v,g,y,b,w,x,k,S,_;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.transaction([gw.Records,gw.Schema,gw.SessionState],"readwrite"),u=n.objectStore(gw.Records),c=n.objectStore(gw.Schema),d=n.objectStore(gw.SessionState),f=0,h=Object.entries(i.added);case 5:if(!(f<h.length)){e.next=12;break}return p=l(h[f],2),v=p[0],g=p[1],e.next=9,u.put(g,v);case 9:f++,e.next=5;break;case 12:y=0,b=Object.values(i.updated);case 13:if(!(y<b.length)){e.next=20;break}return w=l(b[y],2),w[0],x=w[1],e.next=17,u.put(x,x.id);case 17:y++,e.next=13;break;case 20:k=0,S=Object.keys(i.removed);case 21:if(!(k<S.length)){e.next=28;break}return _=S[k],e.next=25,u.delete(_);case 25:k++,e.next=21;break;case 28:if(c.put(r.serialize(),gw.Schema),a&&o?d.put({snapshot:a,updatedAt:Date.now(),id:o},o):(a||o)&&console.error("sessionStateSnapshot and instanceId must be provided together"),null===s||void 0===s||!s()){e.next=32;break}return e.abrupt("return",n.abort());case 32:return e.next=34,n.done;case 34:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}}),e)}))),kw.apply(this,arguments)}function Sw(e){return _w.apply(this,arguments)}function _w(){return _w=b(m().mark((function e(t){var n,r,i,o,a,s,u;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.persistenceKey,r=t.schema,i=t.snapshot,o=t.sessionId,a=t.sessionStateSnapshot,s=t.didCancel,u=pw+n,e.next=4,mw(u,function(){var e=b(m().mark((function e(t){var n,u,c,d,f,h,p,v,g;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.transaction([gw.Records,gw.Schema,gw.SessionState],"readwrite"),u=n.objectStore(gw.Records),c=n.objectStore(gw.Schema),d=n.objectStore(gw.SessionState),e.next=6,u.clear();case 6:f=0,h=Object.entries(i);case 7:if(!(f<h.length)){e.next=14;break}return p=l(h[f],2),v=p[0],g=p[1],e.next=11,u.put(g,v);case 11:f++,e.next=7;break;case 14:if(c.put(r.serialize(),gw.Schema),a&&o?d.put({snapshot:a,updatedAt:Date.now(),id:o},o):(a||o)&&console.error("sessionStateSnapshot and instanceId must be provided together"),null===s||void 0===s||!s()){e.next=18;break}return e.abrupt("return",n.abort());case 18:return e.next=20,n.done;case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}}),e)}))),_w.apply(this,arguments)}function Ew(e){return Cw.apply(this,arguments)}function Cw(){return Cw=b(m().mark((function e(t){var n,r;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.persistenceKey,r=t.didCancel,e.next=3,mw(pw+n,function(){var e=b(m().mark((function e(t){var n,i,o,a,s,u,l;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.transaction([gw.SessionState],"readwrite"),i=n.objectStore(gw.SessionState),e.next=4,i.getAll();case 4:if(o=e.sent.sort((function(e,t){return e.updatedAt-t.updatedAt})),!(o.length<10)){e.next=9;break}return e.next=8,n.done;case 8:return e.abrupt("return");case 9:a=o.slice(0,o.length-10),s=w(a),e.prev=11,s.s();case 13:if((u=s.n()).done){e.next=19;break}return l=u.value.id,e.next=17,i.delete(l);case 17:e.next=13;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(11),s.e(e.t0);case 24:return e.prev=24,s.f(),e.finish(24);case 27:if(null===r||void 0===r||!r()){e.next=29;break}return e.abrupt("return",n.abort());case 29:return e.next=31,n.done;case 31:case"end":return e.stop()}}),e,null,[[11,21,24,27]])})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)}))),Cw.apply(this,arguments)}function Pw(){var e,t,n=null!==(e=JSON.parse((null===(t=window)||void 0===t?void 0:t.localStorage.getItem(vw))||"[]"))&&void 0!==e?e:[];return Array.isArray(n)?n:[]}function Iw(e){var t,n=new Set(Pw());n.add(e),null===(t=window)||void 0===t||t.localStorage.setItem(vw,JSON.stringify(d(n)))}var jw=Symbol("UPDATE_INSTANCE_STATE"),Mw="undefined"===typeof BroadcastChannel?function(){function e(t){ne(this,e),vt(this,"onmessage",void 0)}return oe(e,[{key:"postMessage",value:function(e){}},{key:"close",value:function(){}}]),e}():BroadcastChannel,Aw=function(){function e(t,n){var r=this,i=n.persistenceKey,o=n.sessionId,a=void 0===o?Vb:o,s=n.onLoad,u=n.onLoadError,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Mw("tldraw-tab-sync-".concat(i));ne(this,e),vt(this,"disposables",new Set),vt(this,"diffQueue",[]),vt(this,"didDispose",!1),vt(this,"shouldDoFullDBWrite",!0),vt(this,"isReloading",!1),vt(this,"persistenceKey",void 0),vt(this,"sessionId",void 0),vt(this,"serializedSchema",void 0),vt(this,"isDebugging",!1),vt(this,"documentTypes",void 0),vt(this,"$sessionStateSnapshot",void 0),vt(this,"initTime",Date.now()),vt(this,"isPersisting",!1),vt(this,"didLastWriteError",!1),vt(this,"scheduledPersistTimeout",null),this.store=t,this.channel=l,"undefined"!==typeof window&&(window.tlsync=this),this.persistenceKey=i,this.sessionId=a,this.serializedSchema=this.store.schema.serialize(),this.$sessionStateSnapshot=function(e){var t=e.query.ids("page");return so("sessionStateSnapshot",(function(){var n=e.get(Ca);if(!n)return null;var r=d(t.value);return{version:Wb,currentPageId:n.currentPageId,exportBackground:n.exportBackground,isFocusMode:n.isFocusMode,isDebugMode:n.isDebugMode,isToolLocked:n.isToolLocked,isGridMode:n.isGridMode,pageStates:r.map((function(t){var n,r,i,o,a,s=e.get(Ra.createId(t)),u=e.get(To.createId(t));return{pageId:t,camera:{x:null!==(n=null===u||void 0===u?void 0:u.x)&&void 0!==n?n:0,y:null!==(r=null===u||void 0===u?void 0:u.y)&&void 0!==r?r:0,z:null!==(i=null===u||void 0===u?void 0:u.z)&&void 0!==i?i:1},selectedIds:null!==(o=null===s||void 0===s?void 0:s.selectedIds)&&void 0!==o?o:[],focusLayerId:null!==(a=null===s||void 0===s?void 0:s.focusLayerId)&&void 0!==a?a:null}}))}}))}(this.store),this.disposables.add(t.listen((function(e){var t=e.changes;r.diffQueue.push(t),r.channel.postMessage({type:"diff",storeId:r.store.id,changes:t,schema:r.serializedSchema}),r.schedulePersist()}),{source:"user",scope:"document"})),this.disposables.add(t.listen((function(){r.diffQueue.push(jw),r.schedulePersist()}),{scope:"session"})),this.connect(s,u),this.documentTypes=new Set(Object.values(this.store.schema.types).filter((function(e){return"document"===e.scope})).map((function(e){return e.typeName})))}return oe(e,[{key:"debug",value:function(){var e;this.isDebugging&&(e=console).debug.apply(e,arguments)}},{key:"connect",value:function(){var e=b(m().mark((function e(t,n){var r,i,o,a,s,u,l=this;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.debug("connecting"),e.prev=1,e.next=4,bw({persistenceKey:this.persistenceKey,sessionId:this.sessionId,didCancel:function(){return l.didDispose}});case 4:r=e.sent,e.next=13;break;case 7:return e.prev=7,e.t0=e.catch(1),n(e.t0),window.alert("Oops! We could not access your browser's storage\u2014and the app won't work correctly without that. We now need to reload the page and try again.\n\nKeep seeing this message?\n\u2022 If you're using tldraw in a private or \"incognito\" window, try loading tldraw in a regular window or in a different browser."),"undefined"!==typeof window&&window.location.reload(),e.abrupt("return");case 13:if(this.debug("loaded data from store",r,"didDispose",this.didDispose),!this.didDispose){e.next=16;break}return e.abrupt("return");case 16:if(e.prev=16,!r){e.next=27;break}if(a=Object.fromEntries(r.records.map((function(e){return[e.id,e]}))),s=null!==(i=r.sessionStateSnapshot)&&void 0!==i?i:Xb(a),"error"!==(u=this.store.schema.migrateStoreSnapshot(a,null!==(o=r.schema)&&void 0!==o?o:this.store.schema.serializeEarliestVersion())).type){e.next=25;break}return console.error("failed to migrate store",u),n(new Error("Failed to migrate store: ".concat(u.reason))),e.abrupt("return");case 25:this.store.mergeRemoteChanges((function(){l.store.put(Object.values(u.value).filter((function(e){return l.documentTypes.has(e.typeName)})),"initialize")})),s&&qb(this.store,s);case 27:this.channel.onmessage=function(e){var t,r=e.data;l.debug("got message",r);var i,o,a=r,s=Ao(l.serializedSchema,null!==(t=a.schema)&&void 0!==t?t:l.store.schema.serializeEarliestVersion());return-1===s?Date.now()-l.initTime<5e3?void n(new Error("Schema mismatch, please close other tabs and reload the page")):(l.debug("reloading"),l.isReloading=!0,void(null===(i=window)||void 0===i||null===(i=i.location)||void 0===i||null===(o=i.reload)||void 0===o||o.call(i))):1===s?(l.debug("telling them to reload"),l.channel.postMessage({type:"announce",schema:l.serializedSchema}),l.shouldDoFullDBWrite=!0,void l.persistIfNeeded()):void("diff"===a.type&&(l.debug("applying diff"),Ji((function(){l.store.mergeRemoteChanges((function(){l.store.applyDiff(a.changes),l.store.ensureStoreIsUsable()}))}))))},this.channel.postMessage({type:"announce",schema:this.serializedSchema}),this.disposables.add((function(){l.channel.close()})),t(this),e.next=40;break;case 33:if(e.prev=33,e.t1=e.catch(16),this.debug("error loading data from store",e.t1),!this.didDispose){e.next=38;break}return e.abrupt("return");case 38:return n(e.t1),e.abrupt("return");case 40:case"end":return e.stop()}}),e,this,[[1,7],[16,33]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.debug("closing"),this.didDispose=!0,this.disposables.forEach((function(e){return e()}))}},{key:"schedulePersist",value:function(){var e=this;this.debug("schedulePersist",this.scheduledPersistTimeout),this.scheduledPersistTimeout||(this.scheduledPersistTimeout=setTimeout((function(){e.scheduledPersistTimeout=null,e.persistIfNeeded()}),this.didLastWriteError?1e4:350))}},{key:"persistIfNeeded",value:function(){this.debug("persistIfNeeded",{isPersisting:this.isPersisting,isReloading:this.isReloading,shouldDoFullDBWrite:this.shouldDoFullDBWrite,diffQueueLength:this.diffQueue.length,storeIsPossiblyCorrupt:this.store.isPossiblyCorrupted()}),this.scheduledPersistTimeout&&(clearTimeout(this.scheduledPersistTimeout),this.scheduledPersistTimeout=null),this.isPersisting||this.isReloading||this.store.isPossiblyCorrupted()||(this.shouldDoFullDBWrite||this.diffQueue.length>0)&&this.doPersist()}},{key:"doPersist",value:function(){var e=b(m().mark((function e(){var t,n,r=this;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_r(!this.isPersisting,"persist already in progress"),this.isPersisting=!0,this.debug("doPersist start"),t=this.diffQueue,this.diffQueue=[],e.prev=5,!this.shouldDoFullDBWrite){e.next=12;break}return this.shouldDoFullDBWrite=!1,e.next=10,Sw({persistenceKey:this.persistenceKey,schema:this.store.schema,snapshot:this.store.serialize(),didCancel:function(){return r.didDispose},sessionId:this.sessionId,sessionStateSnapshot:this.$sessionStateSnapshot.value});case 10:e.next=15;break;case 12:return n=xo(t.filter((function(e){return e!==jw}))),e.next=15,xw({persistenceKey:this.persistenceKey,changes:n,schema:this.store.schema,didCancel:function(){return r.didDispose},sessionId:this.sessionId,sessionStateSnapshot:this.$sessionStateSnapshot.value});case 15:this.didLastWriteError=!1,e.next=25;break;case 18:e.prev=18,e.t0=e.catch(5),this.shouldDoFullDBWrite=!0,this.didLastWriteError=!0,console.error("failed to store changes in indexed db",e.t0),window.alert("Oops! We could not save changes to your browser's storage. We now need to reload the page and try again.\n\nKeep seeing this message?\n\u2022 If you're using tldraw in a private or \"incognito\" window, try loading tldraw in a regular window or in a different browser.\n\u2022 If your hard disk is full, try clearing up some space and then reload the page."),"undefined"!==typeof window&&window.location.reload();case 25:this.isPersisting=!1,this.debug("doPersist end"),this.schedulePersist();case 28:case"end":return e.stop()}}),e,this,[[5,18]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Tw=["initialData","defaultName"];function Ow(e){var t,n=e.initialData,r=e.defaultName,i=void 0===r?"":r,o=So(e,Tw),a="schema"in o?o.schema:Fs({shapes:(t=Wm(o.shapes),Object.fromEntries(t.map((function(e){return[e.type,e]}))))});return new wo({schema:a,initialData:n,props:{defaultName:i}})}function Nw(e){var n=l((0,t.useState)((function(){return Ow(e)})),2),r=n[0],i=n[1],o=function(e){var n=(0,t.useRef)(e);return(0,t.useEffect)((function(){n.current=e})),n.current}(e);if(Object.keys(o).some((function(t){return o[t]!==e[t]}))){var a=Ow(e);return i(a),a}return r}var Rw=["persistenceKey","sessionId"];var Lw=function(e,n){var r=l((0,t.useState)(2),2),i=r[0],o=r[1];return(0,t.useEffect)((function(){var t=n.url,r=n.style,i=void 0===r?"normal":r,a=n.weight,s=void 0===a?"500":a,u=n.display,l=n.featureSettings,c=n.stretch,d=n.unicodeRange,f=n.variant,h=!1;o(2);var p={style:i,weight:s,display:u,featureSettings:l,stretch:c,unicodeRange:d,variant:f},v=new FontFace(e,"url(".concat(t,")"),p);return v.load().then((function(){h||(document.fonts.add(v),o(0))})).catch((function(e){h||(console.error(e),o(1))})),v.$$_url=t,v.$$_fontface="\n@font-face {\n\tfont-family: ".concat(v.family,";\n\tfont-stretch: ").concat(v.stretch,";\n\tfont-weight: ").concat(v.weight,";\n\tfont-style: ").concat(v.style,';\n\tsrc: url("').concat(t,'") format("woff2")\n}'),function(){document.fonts.delete(v),h=!0}}),[e,n]),i};var Dw=!1;if("undefined"!==typeof window){var zw=window.navigator.userAgent,Bw=!!zw.match(/iPad/i)||!!zw.match(/iPhone/i),Fw=!!zw.match(/WebKit/i);Dw=Bw&&Fw&&!zw.match(/CriOS/i)}var Uw=["store","components"],Kw=["store","user"],Vw=[],Ww=[],Hw=(0,t.memo)((function(e){var n,r,i=e.store,o=e.components,a=So(e,Uw),s=l(t.useState(null),2),u=s[0],c=s[1],d=(0,t.useMemo)((function(){return ov()}),[]),h=void 0===(null===o||void 0===o?void 0:o.ErrorFallback)?zp:null===o||void 0===o?void 0:o.ErrorFallback,p=mt(mt({},a),{},{shapes:null!==(n=a.shapes)&&void 0!==n?n:Vw,tools:null!==(r=a.tools)&&void 0!==r?r:Ww});return(0,f.jsx)("div",{ref:c,draggable:!1,className:"tl-container tl-theme__light",tabIndex:0,children:(0,f.jsx)(Ud,{fallback:h?function(e){return(0,f.jsx)(h,{error:e})}:null,onError:function(e){return Ir(e,{tags:{origin:"react.tldraw-before-app"}})},children:u&&(0,f.jsx)(ld,{container:u,children:(0,f.jsx)(qd,{overrides:o,children:i?i instanceof wo?(0,f.jsx)(Xw,mt(mt({},p),{},{store:i,user:d})):(0,f.jsx)(qw,mt(mt({},p),{},{store:i,user:d})):(0,f.jsx)(Yw,mt(mt({},p),{},{store:i,user:d}))})})})})}));function Yw(e){var n=e.defaultName,r=e.initialData,i=e.shapes,o=e.persistenceKey,a=e.sessionId,s=e.user,u=function(e){var n,r=e.persistenceKey,i=e.sessionId,o=So(e,Rw),a=l((0,t.useState)(null),2),s=a[0],u=a[1],c=Nw(o);return(0,t.useEffect)((function(){var e=Bp();if(r){u({id:e,storeWithStatus:{status:"loading"}});var t=function(t){u((function(n){return(null===n||void 0===n?void 0:n.id)===e?{id:e,storeWithStatus:t}:n}))},n=new Aw(c,{sessionId:i,persistenceKey:r,onLoad:function(){t({store:c,status:"synced-local"})},onLoadError:function(e){t({status:"error",error:e})}});return function(){u((function(t){return(null===t||void 0===t?void 0:t.id)===e?null:t})),n.close()}}u({id:e,storeWithStatus:{status:"not-synced",store:c}})}),[r,c,i]),null!==(n=null===s||void 0===s?void 0:s.storeWithStatus)&&void 0!==n?n:{status:"loading"}}({shapes:i,initialData:r,persistenceKey:o,sessionId:a,defaultName:n});return(0,f.jsx)(qw,mt(mt({},e),{},{store:u,user:s}))}var qw=(0,t.memo)((function(e){var n=e.store,r=e.user,i=So(e,Kw),o=cd();switch((0,t.useLayoutEffect)((function(){r.userPreferences.value.isDarkMode&&(o.classList.remove("tl-theme__light"),o.classList.add("tl-theme__dark"))}),[o,r.userPreferences.value.isDarkMode]),n.status){case"error":throw n.error;case"loading":return(0,f.jsx)(Qw,{children:"Connecting..."})}return(0,f.jsx)(Xw,mt(mt({},i),{},{store:n.store,user:r}))}));function Xw(e){var n=e.onMount,r=e.children,i=e.store,o=e.tools,a=e.shapes,s=e.autoFocus,u=e.user,c=e.assetUrls,d=Xd().ErrorFallback,h=cd(),p=l((0,t.useState)(null),2),v=p[0],g=p[1];(0,t.useLayoutEffect)((function(){var e=new Bb({store:i,shapes:a,tools:o,getContainer:function(){return h},user:u});return window.app=e,window.editor=e,g(e),function(){e.dispose()}}),[h,a,o,i,u]),t.useLayoutEffect((function(){v&&s&&v.focus()}),[v,s]);var m=function(e){var n=(0,t.useRef)();return(0,t.useLayoutEffect)((function(){n.current=e})),(0,t.useDebugValue)(e),(0,t.useCallback)((function(){var e=n.current;return _r(e,"fn does not exist"),e.apply(void 0,arguments)}),[])}((function(e){var t=null===n||void 0===n?void 0:n(e);return e.emit("mount"),window.tldrawReady=!0,t}));t.useLayoutEffect((function(){if(v)return null===m||void 0===m?void 0:m(v)}),[v,m]);var y,b=(0,t.useSyncExternalStore)((0,t.useCallback)((function(e){return v?(v.on("crash",e),function(){return v.off("crash",e)}):function(){}}),[v]),(function(){var e;return null!==(e=null===v||void 0===v?void 0:v.crashingError)&&void 0!==e?e:null})),w=function(e){var n=(0,t.useMemo)((function(){return function(e){return{draw:{url:e.fonts.draw},serif:{url:e.fonts.serif},sansSerif:{url:e.fonts.sansSerif},monospace:{url:e.fonts.monospace}}}(e)}),[e]),r=[Lw("tldraw_draw",n.draw),Lw("tldraw_serif",n.serif),Lw("tldraw_sans",n.sansSerif),Lw("tldraw_mono",n.monospace)];return{error:r.some((function(e){return 1===e})),done:!r.some((function(e){return 2===e}))}}((y=c,(0,t.useMemo)((function(){return y?{fonts:Object.assign(mt({},xl.fonts),mt({},null===y||void 0===y?void 0:y.fonts))}:xl}),[y]))),x=w.done;return w.error?(0,f.jsx)(Jw,{children:"Could not load assets. Please refresh the page."}):x?v?(0,f.jsx)(Ud,{fallback:d?function(e){return(0,f.jsx)(d,{error:e,editor:v})}:null,onError:function(e){return v.annotateError(e,{origin:"react.tldraw",willCrashApp:!0})},children:b?(0,f.jsx)(Gw,{crashingError:b}):(0,f.jsx)(jl.Provider,{value:v,children:(0,f.jsx)($w,{children:r})})}):null:(0,f.jsx)(Qw,{children:"Loading assets..."})}function $w(e){var n=e.children;return function(){var e=Ml(),n=cd();t.useEffect((function(){var t=function(e){return n.style.setProperty("--tl-zoom",e.toString())},r=Cr(t,100),i=new uo("useZoomCss",(function(){e.currentPageShapeIds.size<300?t(e.zoomLevel):r(e.zoomLevel)}));return i.attach(),i.execute(),function(){i.detach()}}),[e,n])}(),function(){var e=Ml(),t=cd();gh("useCursor",(function(){var n=e.cursor,r=n.type,i=n.rotation,o=n.color;ap.includes(r)?t.style.setProperty("--tl-cursor","var(--tl-cursor-".concat(r,")")):t.style.setProperty("--tl-cursor",op(r,i,o))}),[e,t])}(),function(){var e=Ml(),n=cd(),r=Il("isDarkMode",(function(){return e.isDarkMode}),[e]),i=Il(Kc.forceSrgb);t.useEffect((function(){r?(n.setAttribute("data-color-mode","dark"),n.classList.remove("tl-theme__light"),n.classList.add("tl-theme__dark"),e.setCursor({color:"white"})):(n.setAttribute("data-color-mode","light"),n.classList.remove("tl-theme__dark"),n.classList.add("tl-theme__light"),e.setCursor({color:"black"})),i?n.classList.add("tl-theme__force-sRGB"):n.classList.remove("tl-theme__force-sRGB")}),[e,n,i,r])}(),function(){var e=Ml();t.useEffect((function(){if(Dw)return document.addEventListener("focusout",t),function(){return document.removeEventListener("focusout",t)};function t(t){(t.target instanceof HTMLInputElement&&"text"===t.target.type||t.target instanceof HTMLTextAreaElement)&&e.complete()}}),[e])}(),function(){var e=l((0,t.useState)(0),2),n=(e[0],e[1]);(0,t.useEffect)((function(){return n((function(e){return e+1}))}),[])}(),n}function Gw(e){throw e.crashingError}function Qw(e){var t=e.children,n=Xd().Spinner;return(0,f.jsxs)("div",{className:"tl-loading",children:[n?(0,f.jsx)(n,{}):null,t]})}function Jw(e){var t=e.children;return(0,f.jsx)("div",{className:"tl-loading",children:t})}var Zw=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"info",{}),vt(_t(e),"scribble",{}),vt(_t(e),"markId",""),vt(_t(e),"excludedShapeIds",new Set),vt(_t(e),"onEnter",(function(t){e.markId=e.editor.mark("erase scribble begin"),e.info=t;var n=e.editor.inputs.originPagePoint;e.excludedShapeIds=new Set(e.editor.shapesArray.filter((function(t){return e.editor.isShapeOrAncestorLocked(t)||(e.editor.isShapeOfType(t,Eg)||e.editor.isShapeOfType(t,Ig))&&e.editor.isPointInShape(n,t)})).map((function(e){return e.id}))),e.startScribble(),e.update()})),vt(_t(e),"startScribble",(function(){var t;e.scribble.tick&&e.editor.off("tick",null===(t=e.scribble)||void 0===t?void 0:t.tick);e.scribble=new Sb({onUpdate:e.onScribbleUpdate,onComplete:e.onScribbleComplete,color:"muted-1",size:12}),e.editor.on("tick",e.scribble.tick)})),vt(_t(e),"pushPointToScribble",(function(){var t=e.editor.inputs.currentPagePoint,n=t.x,r=t.y;e.scribble.addPoint(n,r)})),vt(_t(e),"onScribbleUpdate",(function(t){e.editor.setScribble(t)})),vt(_t(e),"onScribbleComplete",(function(){e.editor.off("tick",e.scribble.tick),e.editor.setScribble(null)})),vt(_t(e),"onExit",(function(){e.scribble.stop()})),vt(_t(e),"onPointerMove",(function(){e.update()})),vt(_t(e),"onPointerUp",(function(){e.complete()})),vt(_t(e),"onCancel",(function(){e.cancel()})),vt(_t(e),"onComplete",(function(){e.complete()})),e}return oe(n,[{key:"update",value:function(){var e=this.editor,t=e.shapesArray,n=e.erasingIdsSet,r=e.inputs,i=r.currentPagePoint,o=r.previousPagePoint,a=this.excludedShapeIds;this.pushPointToScribble();var s,u=new Set(n),l=w(t);try{for(l.s();!(s=l.n()).done;){var c=s.value;if(!this.editor.isShapeOfType(c,Eg)){var f=this.editor.getPageMaskById(c.id);if(!f||ic(i,f)){var h=this.editor.getShapeUtil(c),p=this.editor.getPointInShapeSpace(c,o),v=this.editor.getPointInShapeSpace(c,i);h.hitTestLineSegment(c,p,v)&&u.add(this.editor.getOutermostSelectableShape(c).id)}}}}catch(g){l.e(g)}finally{l.f()}this.editor.setErasingIds(d(u).filter((function(e){return!a.has(e)})))}},{key:"complete",value:function(){this.editor.deleteShapes(this.editor.pageState.erasingIds),this.editor.setErasingIds([]),this.parent.transition("idle",{})}},{key:"cancel",value:function(){this.editor.setErasingIds([]),this.editor.bailToMark(this.markId),this.parent.transition("idle",this.info)}}]),n}(lv);vt(Zw,"id","erasing");var ex=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"onPointerDown",(function(t){e.parent.transition("pointing",t)})),e}return oe(n)}(lv);vt(ex,"id","idle");var tx=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"onEnter",(function(){var t,n=e.editor.inputs,r=new Set,i=r.size,o=w(d(e.editor.sortedShapesArray).reverse());try{for(o.s();!(t=o.n()).done;){var a=t.value;if(e.editor.isPointInShape(n.currentPagePoint,a)){if(e.editor.isShapeOfType(a,Eg))continue;var s=e.editor.getOutermostSelectableShape(a);if(e.editor.isShapeOfType(s,Ig)&&r.size>i)break;r.add(s.id)}}}catch(u){o.e(u)}finally{o.f()}e.editor.setErasingIds(d(r))})),vt(_t(e),"onPointerMove",(function(t){e.editor.inputs.isDragging&&e.parent.transition("erasing",t)})),vt(_t(e),"onPointerUp",(function(){e.complete()})),vt(_t(e),"onCancel",(function(){e.cancel()})),vt(_t(e),"onComplete",(function(){e.complete()})),vt(_t(e),"onInterrupt",(function(){e.cancel()})),e}return oe(n,[{key:"complete",value:function(){var e=this.editor.erasingIds;e.length&&(this.editor.mark("erase end"),this.editor.deleteShapes(e)),this.editor.setErasingIds([]),this.parent.transition("idle",{})}},{key:"cancel",value:function(){this.editor.setErasingIds([]),this.parent.transition("idle",{})}}]),n}(lv);vt(tx,"id","pointing");var nx=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"onEnter",(function(){e.editor.setCursor({type:"cross"})})),e}return oe(n)}(lv);vt(nx,"id","eraser"),vt(nx,"initial","idle"),vt(nx,"children",(function(){return[ex,tx,Zw]}));var rx=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"onEnter",(function(){e.update()})),vt(_t(e),"onPointerMove",(function(){e.update()})),vt(_t(e),"onPointerUp",(function(){e.complete()})),vt(_t(e),"onCancel",(function(){e.complete()})),vt(_t(e),"onComplete",(function(){e.complete()})),e}return oe(n,[{key:"update",value:function(){var e=this.editor.inputs,t=e.currentScreenPoint,n=e.previousScreenPoint,r=Nl.Sub(t,n);(Math.abs(r.x)>0||Math.abs(r.y)>0)&&this.editor.pan(r.x,r.y)}},{key:"complete",value:function(){this.editor.slideCamera({speed:Math.min(2,this.editor.inputs.pointerVelocity.len()),direction:this.editor.inputs.pointerVelocity,friction:Ed}),this.parent.transition("idle",{})}}]),n}(lv);vt(rx,"id","dragging");var ix=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"onEnter",(function(){e.editor.setCursor({type:"grab"})})),vt(_t(e),"onPointerDown",(function(t){e.parent.transition("pointing",t)})),vt(_t(e),"onCancel",(function(){e.editor.setSelectedTool("select")})),e}return oe(n)}(lv);vt(ix,"id","idle");var ox=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"onEnter",(function(){e.editor.stopCameraAnimation(),e.editor.setCursor({type:"grabbing"})})),vt(_t(e),"onPointerMove",(function(t){e.editor.inputs.isDragging&&e.parent.transition("dragging",t)})),vt(_t(e),"onPointerUp",(function(){e.complete()})),vt(_t(e),"onCancel",(function(){e.complete()})),vt(_t(e),"onComplete",(function(){e.complete()})),vt(_t(e),"onInterrupt",(function(){e.complete()})),e}return oe(n,[{key:"complete",value:function(){this.parent.transition("idle",{})}}]),n}(lv);vt(ox,"id","pointing");var ax=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"onDoubleClick",(function(t){if("settle"===t.phase){var n=e.editor.inputs.currentScreenPoint;e.editor.zoomIn(n,{duration:220,easing:Ol.easeOutQuint})}})),vt(_t(e),"onTripleClick",(function(t){if("settle"===t.phase){var n=e.editor.inputs.currentScreenPoint;e.editor.zoomOut(n,{duration:320,easing:Ol.easeOutQuint})}})),vt(_t(e),"onQuadrupleClick",(function(t){if("settle"===t.phase){var n=e.editor,r=n.zoomLevel,i=n.inputs.currentScreenPoint;1===r?e.editor.zoomToFit({duration:400,easing:Ol.easeOutQuint}):e.editor.resetZoom(i,{duration:320,easing:Ol.easeOutQuint})}})),e}return oe(n)}(lv);vt(ax,"id","hand"),vt(ax,"initial","idle"),vt(ax,"children",(function(){return[ix,ox,rx]}));var sx=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"onPointerDown",(function(t){e.parent.transition("lasering",t)})),e}return oe(n)}(lv);vt(sx,"id","idle");var ux=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"scribble",{}),vt(_t(e),"onEnter",(function(){e.startScribble(),e.pushPointToScribble()})),vt(_t(e),"onExit",(function(){e.editor.setErasingIds([]),e.scribble.stop()})),vt(_t(e),"onPointerMove",(function(){e.pushPointToScribble()})),vt(_t(e),"onPointerUp",(function(){e.complete()})),vt(_t(e),"startScribble",(function(){var t;e.scribble.tick&&e.editor.off("tick",null===(t=e.scribble)||void 0===t?void 0:t.tick);e.scribble=new Sb({onUpdate:e.onScribbleUpdate,onComplete:e.onScribbleComplete,color:"laser",opacity:.7,size:4,delay:1200}),e.editor.on("tick",e.scribble.tick)})),vt(_t(e),"pushPointToScribble",(function(){var t=e.editor.inputs.currentPagePoint,n=t.x,r=t.y;e.scribble.addPoint(n,r)})),vt(_t(e),"onScribbleUpdate",(function(t){e.editor.setScribble(t)})),vt(_t(e),"onScribbleComplete",(function(){e.editor.off("tick",e.scribble.tick),e.editor.setScribble(null)})),vt(_t(e),"onCancel",(function(){e.cancel()})),vt(_t(e),"onComplete",(function(){e.complete()})),e}return oe(n,[{key:"complete",value:function(){this.parent.transition("idle",{})}},{key:"cancel",value:function(){this.parent.transition("idle",{})}}]),n}(lv);vt(ux,"id","lasering");var lx=function(e){xt(n,e);var t=Et(n);function n(){var e;ne(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return vt(_t(e=t.call.apply(t,[this].concat(i))),"onEnter",(function(){e.editor.setCursor({type:"cross"})})),e}return oe(n)}(lv);vt(lx,"id","laser"),vt(lx,"initial","idle"),vt(lx,"children",(function(){return[sx,ux]}));var cx=[ax,nx,lx];function dx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dx(Object(n),!0).forEach((function(t){hx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dx(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hx(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function px(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function vx(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(e,t)||mx(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gx(e){return function(e){if(Array.isArray(e))return yx(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||mx(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mx(e,t){if(e){if("string"===typeof e)return yx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yx(e,t):void 0}}function yx(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function bx(e){var t,n,r=e.sizes.shift(),i=Math.max(Math.ceil(r[0]),1),o=Math.max(Math.ceil(r[1]),1),a=[i-1,o-1,1,1],s=Date.now(),u="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope;u?(t=new OffscreenCanvas(1,1),n=new OffscreenCanvas(i,o)):((t=document.createElement("canvas")).width=1,t.height=1,(n=document.createElement("canvas")).width=i,n.height=o);var l=t.getContext("2d"),c=n.getContext("2d");c&&(c.fillRect.apply(c,a),l.drawImage(n,i-1,o-1,1,1,0,0,1,1));var d=l&&0!==l.getImageData(0,0,1,1).data[3],f=Date.now()-s;return[t,n].forEach((function(e){e.height=0,e.width=0})),u?(postMessage({width:i,height:o,benchmark:f,isTestPass:d}),!d&&e.sizes.length&&bx(e)):d?e.onSuccess(i,o,f):(e.onError(i,o,f),e.sizes.length&&bx(e)),d}var wx=[16384,14188,11402,11180,10836,8192,4096,1],xx=[8388607,65535,32767,16384,8192,4096,1],kx=[4194303,65535,32767,16384,8192,4096,1],Sx=["onError","onSuccess"],_x={max:null,min:1,sizes:[],step:1024,usePromise:!1,useWorker:!1,onError:Function.prototype,onSuccess:Function.prototype},Ex={};function Cx(e){var t=e.width===e.height,n=1===e.height,r=1===e.width,i=[];if(e.width&&e.height)for(var o=e.min||_x.min,a=e.step||_x.step,s=Math.max(e.width,e.height);s>=o;){var u=t||n?s:1,l=t||r?s:1;i.push([u,l]),s-=a}else e.sizes.forEach((function(e){var o=t||n?e:1,a=t||r?e:1;i.push([o,a])}));return i}function Px(e){var t=window&&"HTMLCanvasElement"in window,n=window&&"OffscreenCanvas"in window,r=Date.now(),i=e.onError,o=e.onSuccess,a=px(e,Sx),s=null;if(!t)return!1;if(e.useWorker&&n){var u="\n            var canvasTest = ".concat(bx.toString(),";\n            onmessage = function(e) {\n                canvasTest(e.data);\n            };\n        "),l=new Blob([u],{type:"application/javascript"}),c=URL.createObjectURL(l);s=new Worker(c),URL.revokeObjectURL(c),s.onmessage=function(e){var t=e.data,n=t.width,i=t.height,o=t.benchmark;t.isTestPass?(Ex[r].onSuccess(n,i,o),delete Ex[r]):Ex[r].onError(n,i,o)}}return e.usePromise?new Promise((function(t,n){var u=fx(fx({},e),{},{onError:function(t,r,o){var a;if(0===e.sizes.length)a=!0;else{var s=vx(e.sizes.slice(-1),1),u=vx(s[0],2),l=u[0],c=u[1];a=t===l&&r===c}i(t,r,o),a&&n({width:t,height:r,benchmark:o})},onSuccess:function(e,n,r){o(e,n,r),t({width:e,height:n,benchmark:r})}});if(s){var l=u.onError,c=u.onSuccess;Ex[r]={onError:l,onSuccess:c},s.postMessage(a)}else bx(u)})):s?(Ex[r]={onError:i,onSuccess:o},void s.postMessage(a)):bx(e)}var Ix={maxArea:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Cx({width:e.max,height:e.max,min:e.min,step:e.step,sizes:gx(wx)});return Px(fx(fx(fx({},_x),e),{},{sizes:t}))},maxHeight:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Cx({width:1,height:e.max,min:e.min,step:e.step,sizes:gx(xx)});return Px(fx(fx(fx({},_x),e),{},{sizes:t}))},maxWidth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Cx({width:e.max,height:1,min:e.min,step:e.step,sizes:gx(kx)});return Px(fx(fx(fx({},_x),e),{},{sizes:t}))},test:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=fx(fx({},_x),e);return t.sizes=gx(t.sizes),t.width&&t.height&&(t.sizes=[[t.width,t.height]]),Px(t)}},jx=null;function Mx(){return jx||(jx=function(){return Ax.apply(this,arguments)}()),jx}function Ax(){return Ax=b(m().mark((function e(){var t,n,r;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ix.maxWidth({usePromise:!0});case 2:return t=e.sent,e.next=5,Ix.maxHeight({usePromise:!0});case 5:return n=e.sent,e.next=8,Ix.maxArea({usePromise:!0});case 8:return r=e.sent,e.abrupt("return",{maxWidth:t.width,maxHeight:n.height,maxArea:r.width*r.height});case 10:case"end":return e.stop()}}),e)}))),Ax.apply(this,arguments)}function Tx(e){var t=e.cloneNode(!0);return e.setAttribute("width",+e.getAttribute("width")+""),e.setAttribute("height",+e.getAttribute("height")+""),(new XMLSerializer).serializeToString(t).replaceAll("&#10;      ","").replaceAll(/((\s|")[0-9]*\.[0-9]{2})([0-9]*)(\b|"|\))/g,"$1")}function Ox(e,t){return Nx.apply(this,arguments)}function Nx(){return Nx=b(m().mark((function e(t,n){var r,i,o,a,s,u,l,c,d,f,h,p,v,g;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.type,i=n.quality,o=n.scale,a=+t.getAttribute("width"),s=+t.getAttribute("height"),u=a*o,l=s*o,e.next=7,Rx(t);case 7:return c=e.sent,e.next=10,Mx();case 10:return d=e.sent,a>d.maxWidth&&(u=d.maxWidth,l=u/a*s),s>d.maxHeight&&(l=d.maxHeight,u=l/s*a),u*l>d.maxArea&&(f=Math.sqrt(d.maxArea/(u*l)),u*=f,l*=f),u=Math.floor(u),l=Math.floor(l),h=u/a,e.next=19,new Promise((function(e){var t=new Image;t.crossOrigin="anonymous",t.onload=b(m().mark((function n(){var r,i;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,new Promise((function(e){return setTimeout(e,250)}));case 2:r=document.createElement("canvas"),i=r.getContext("2d"),r.width=u,r.height=l,i.imageSmoothingEnabled=!0,i.imageSmoothingQuality="high",i.drawImage(t,0,0,u,l),URL.revokeObjectURL(c),e(r);case 11:case"end":return n.stop()}}),n)}))),t.onerror=function(){e(null)},t.src=c}));case 19:if(p=e.sent){e.next=22;break}return e.abrupt("return",null);case 22:return e.next=24,new Promise((function(e){return p.toBlob((function(t){t&&!Kc.throwToBlob.value||e(null),e(t)}),"image/"+r,i)}));case 24:if(v=e.sent){e.next=27;break}return e.abrupt("return",null);case 27:return e.t0=DataView,e.next=30,v.arrayBuffer();case 30:return e.t1=e.sent,g=new e.t0(e.t1),e.abrupt("return",sy(g,h,{type:"image/"+r}));case 33:case"end":return e.stop()}}),e)}))),Nx.apply(this,arguments)}function Rx(e){return Lx.apply(this,arguments)}function Lx(){return Lx=b(m().mark((function e(t){var n,r,i,o,a,s;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=t.cloneNode(!0)).setAttribute("encoding",'UTF-8"'),r=new FileReader,i=Array.from(n.querySelectorAll("image")),o=m().mark((function e(){var t,n,i,o;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s[a],!(n=t.getAttribute("xlink:href"))){e.next=13;break}if(n.startsWith("data:")){e.next=13;break}return e.next=6,fetch(n);case 6:return e.next=8,e.sent.blob();case 8:return i=e.sent,e.next=11,new Promise((function(e,t){r.onload=function(){return e(r.result)},r.onerror=function(){return t(r.error)},r.readAsDataURL(i)}));case 11:o=e.sent,t.setAttribute("xlink:href",o);case 13:case"end":return e.stop()}}),e)})),a=0,s=i;case 6:if(!(a<s.length)){e.next=11;break}return e.delegateYield(o(),"t0",8);case 8:a++,e.next=6;break;case 11:return e.abrupt("return",Dx(n));case 12:case"end":return e.stop()}}),e)}))),Lx.apply(this,arguments)}function Dx(e){var t=(new XMLSerializer).serializeToString(e),n=window.btoa(unescape(encodeURIComponent(t)));return"data:image/svg+xml;base64,".concat(n)}function zx(e,t){var n=document.createElement("a");n.href=e,n.download=t,n.click()}function Bx(){return Bx=b(m().mark((function e(){var t,n,r=arguments;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(r.length>0&&void 0!==r[0]?r[0]:{}).shouldReload,n=void 0===t||t,sessionStorage.clear(),e.next=4,Promise.all(Pw().map((function(e){return lw(e)})));case 4:localStorage.clear(),n&&window.location.reload();case 6:case"end":return e.stop()}}),e)}))),Bx.apply(this,arguments)}function Fx(){return Fx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fx.apply(this,arguments)}function Ux(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).checkForDefaultPrevented,r=void 0===n||n;return function(n){if(null===e||void 0===e||e(n),!1===r||!n.defaultPrevented)return null===t||void 0===t?void 0:t(n)}}function Kx(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.forEach((function(t){return function(e,t){"function"===typeof e?e(t):null!==e&&void 0!==e&&(e.current=t)}(t,e)}))}}function Vx(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0,t.useCallback)(Kx.apply(void 0,n),n)}"undefined"!==typeof window&&(window.__tldraw__hardReset=function(){return Bx.apply(this,arguments)});var Wx=["children"],Hx=["scope","children"];function Yx(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=[];var i=function(){var n=r.map((function(e){return(0,t.createContext)(e)}));return function(r){var i=(null===r||void 0===r?void 0:r[e])||n;return(0,t.useMemo)((function(){return vt({},"__scope".concat(e),mt(mt({},r),{},vt({},e,i)))}),[r,i])}};return i.scopeName=e,[function(n,i){var o=(0,t.createContext)(i),a=r.length;function s(n){var r=n.scope,i=n.children,s=So(n,Hx),u=(null===r||void 0===r?void 0:r[e][a])||o,l=(0,t.useMemo)((function(){return s}),Object.values(s));return(0,t.createElement)(u.Provider,{value:l},i)}return r=[].concat(d(r),[i]),s.displayName=n+"Provider",[s,function(r,s){var u=(null===s||void 0===s?void 0:s[e][a])||o,l=(0,t.useContext)(u);if(l)return l;if(void 0!==i)return i;throw new Error("`".concat(r,"` must be used within `").concat(n,"`"))}]},qx.apply(void 0,[i].concat(d(n)))]}function qx(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(1===n.length)return i;var o=function(){var e=n.map((function(e){return{useScope:e(),scopeName:e.scopeName}}));return function(n){var r=e.reduce((function(e,t){var r=t.useScope,i=t.scopeName,o=r(n)["__scope".concat(i)];return mt(mt({},e),o)}),{});return(0,t.useMemo)((function(){return vt({},"__scope".concat(i.scopeName),r)}),[r])}};return o.scopeName=i.scopeName,o}var Xx=Boolean(null===globalThis||void 0===globalThis?void 0:globalThis.document)?t.useLayoutEffect:function(){},$x=r["useId".toString()]||function(){},Gx=0;function Qx(e){var n=l(t.useState($x()),2),r=n[0],i=n[1];return Xx((function(){e||i((function(e){return null!==e&&void 0!==e?e:String(Gx++)}))}),[e]),e||(r?"radix-".concat(r):"")}function Jx(e){var n=(0,t.useRef)(e);return(0,t.useEffect)((function(){n.current=e})),(0,t.useMemo)((function(){return function(){for(var e,t,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return null===(t=n.current)||void 0===t?void 0:(e=t).call.apply(e,[n].concat(i))}}),[])}function Zx(e){var n=e.prop,r=e.defaultProp,i=e.onChange,o=void 0===i?function(){}:i,a=function(e){var n=e.defaultProp,r=e.onChange,i=(0,t.useState)(n),o=l(i,1)[0],a=(0,t.useRef)(o),s=Jx(r);return(0,t.useEffect)((function(){a.current!==o&&(s(o),a.current=o)}),[o,a,s]),i}({defaultProp:r,onChange:o}),s=l(a,2),u=s[0],c=s[1],d=void 0!==n,f=d?n:u,h=Jx(o),p=(0,t.useCallback)((function(e){if(d){var t="function"===typeof e?e(n):e;t!==n&&h(t)}else c(e)}),[d,n,c,h]);return[f,p]}var ek=n(4164),tk=["children"],nk=["children"],rk=(0,t.forwardRef)((function(e,n){var r=e.children,i=So(e,tk),o=t.Children.toArray(r),a=o.find(ak);if(a){var s=a.props.children,u=o.map((function(e){return e===a?t.Children.count(s)>1?t.Children.only(null):(0,t.isValidElement)(s)?s.props.children:null:e}));return(0,t.createElement)(ik,Fx({},i,{ref:n}),(0,t.isValidElement)(s)?(0,t.cloneElement)(s,void 0,u):null)}return(0,t.createElement)(ik,Fx({},i,{ref:n}),r)}));rk.displayName="Slot";var ik=(0,t.forwardRef)((function(e,n){var r=e.children,i=So(e,nk);return(0,t.isValidElement)(r)?(0,t.cloneElement)(r,mt(mt({},function(e,t){var n=mt({},t),r=function(){var r=e[i],o=t[i];/^on[A-Z]/.test(i)?r&&o?n[i]=function(){o.apply(void 0,arguments),r.apply(void 0,arguments)}:r&&(n[i]=r):"style"===i?n[i]=mt(mt({},r),o):"className"===i&&(n[i]=[r,o].filter(Boolean).join(" "))};for(var i in t)r();return mt(mt({},e),n)}(i,r.props)),{},{ref:n?Kx(n,r.ref):r.ref})):t.Children.count(r)>1?t.Children.only(null):null}));ik.displayName="SlotClone";var ok=function(e){var n=e.children;return(0,t.createElement)(t.Fragment,null,n)};function ak(e){return(0,t.isValidElement)(e)&&e.type===ok}var sk=["asChild"],uk=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((function(e,n){var r=(0,t.forwardRef)((function(e,r){var i=e.asChild,o=So(e,sk),a=i?rk:n;return(0,t.useEffect)((function(){window[Symbol.for("radix-ui")]=!0}),[]),(0,t.createElement)(a,Fx({},o,{ref:r}))}));return r.displayName="Primitive.".concat(n),mt(mt({},e),{},vt({},n,r))}),{});function lk(e,t){e&&(0,ek.flushSync)((function(){return e.dispatchEvent(t)}))}var ck,dk=["disableOutsidePointerEvents","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss"],fk="dismissableLayer.update",hk="dismissableLayer.pointerDownOutside",pk="dismissableLayer.focusOutside",vk=(0,t.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),gk=(0,t.forwardRef)((function(e,n){var r,i=e.disableOutsidePointerEvents,o=void 0!==i&&i,a=e.onEscapeKeyDown,s=e.onPointerDownOutside,u=e.onFocusOutside,c=e.onInteractOutside,f=e.onDismiss,h=So(e,dk),p=(0,t.useContext)(vk),v=l((0,t.useState)(null),2),g=v[0],m=v[1],y=null!==(r=null===g||void 0===g?void 0:g.ownerDocument)&&void 0!==r?r:null===globalThis||void 0===globalThis?void 0:globalThis.document,b=l((0,t.useState)({}),2)[1],w=Vx(n,(function(e){return m(e)})),x=Array.from(p.layers),k=l(d(p.layersWithOutsidePointerEventsDisabled).slice(-1),1)[0],S=x.indexOf(k),_=g?x.indexOf(g):-1,E=p.layersWithOutsidePointerEventsDisabled.size>0,C=_>=S,P=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document,r=Jx(e),i=(0,t.useRef)(!1),o=(0,t.useRef)((function(){}));return(0,t.useEffect)((function(){var e=function(e){if(e.target&&!i.current){var t=function(){bk(hk,r,a,{discrete:!0})},a={originalEvent:e};"touch"===e.pointerType?(n.removeEventListener("click",o.current),o.current=t,n.addEventListener("click",o.current,{once:!0})):t()}i.current=!1},t=window.setTimeout((function(){n.addEventListener("pointerdown",e)}),0);return function(){window.clearTimeout(t),n.removeEventListener("pointerdown",e),n.removeEventListener("click",o.current)}}),[n,r]),{onPointerDownCapture:function(){return i.current=!0}}}((function(e){var t=e.target,n=d(p.branches).some((function(e){return e.contains(t)}));C&&!n&&(null===s||void 0===s||s(e),null===c||void 0===c||c(e),e.defaultPrevented||null===f||void 0===f||f())}),y),I=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document,r=Jx(e),i=(0,t.useRef)(!1);return(0,t.useEffect)((function(){var e=function(e){e.target&&!i.current&&bk(pk,r,{originalEvent:e},{discrete:!1})};return n.addEventListener("focusin",e),function(){return n.removeEventListener("focusin",e)}}),[n,r]),{onFocusCapture:function(){return i.current=!0},onBlurCapture:function(){return i.current=!1}}}((function(e){var t=e.target;d(p.branches).some((function(e){return e.contains(t)}))||(null===u||void 0===u||u(e),null===c||void 0===c||c(e),e.defaultPrevented||null===f||void 0===f||f())}),y);return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document,r=Jx(e);(0,t.useEffect)((function(){var e=function(e){"Escape"===e.key&&r(e)};return n.addEventListener("keydown",e),function(){return n.removeEventListener("keydown",e)}}),[r,n])}((function(e){_===p.layers.size-1&&(null===a||void 0===a||a(e),!e.defaultPrevented&&f&&(e.preventDefault(),f()))}),y),(0,t.useEffect)((function(){if(g)return o&&(0===p.layersWithOutsidePointerEventsDisabled.size&&(ck=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),p.layersWithOutsidePointerEventsDisabled.add(g)),p.layers.add(g),yk(),function(){o&&1===p.layersWithOutsidePointerEventsDisabled.size&&(y.body.style.pointerEvents=ck)}}),[g,y,o,p]),(0,t.useEffect)((function(){return function(){g&&(p.layers.delete(g),p.layersWithOutsidePointerEventsDisabled.delete(g),yk())}}),[g,p]),(0,t.useEffect)((function(){var e=function(){return b({})};return document.addEventListener(fk,e),function(){return document.removeEventListener(fk,e)}}),[]),(0,t.createElement)(uk.div,Fx({},h,{ref:w,style:mt({pointerEvents:E?C?"auto":"none":void 0},e.style),onFocusCapture:Ux(e.onFocusCapture,I.onFocusCapture),onBlurCapture:Ux(e.onBlurCapture,I.onBlurCapture),onPointerDownCapture:Ux(e.onPointerDownCapture,P.onPointerDownCapture)}))})),mk=(0,t.forwardRef)((function(e,n){var r=(0,t.useContext)(vk),i=(0,t.useRef)(null),o=Vx(n,i);return(0,t.useEffect)((function(){var e=i.current;if(e)return r.branches.add(e),function(){r.branches.delete(e)}}),[r.branches]),(0,t.createElement)(uk.div,Fx({},e,{ref:o}))}));function yk(){var e=new CustomEvent(fk);document.dispatchEvent(e)}function bk(e,t,n,r){var i=r.discrete,o=n.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&o.addEventListener(e,t,{once:!0}),i?lk(o,a):o.dispatchEvent(a)}var wk=gk,xk=mk,kk=["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"],Sk="focusScope.autoFocusOnMount",_k="focusScope.autoFocusOnUnmount",Ek={bubbles:!1,cancelable:!0},Ck=(0,t.forwardRef)((function(e,n){var r=e.loop,i=void 0!==r&&r,o=e.trapped,a=void 0!==o&&o,s=e.onMountAutoFocus,u=e.onUnmountAutoFocus,c=So(e,kk),d=l((0,t.useState)(null),2),f=d[0],h=d[1],p=Jx(s),v=Jx(u),g=(0,t.useRef)(null),m=Vx(n,(function(e){return h(e)})),y=(0,t.useRef)({paused:!1,pause:function(){this.paused=!0},resume:function(){this.paused=!1}}).current;(0,t.useEffect)((function(){if(a){var e=function(e){if(!y.paused&&f){var t=e.target;f.contains(t)?g.current=t:Mk(g.current,{select:!0})}},t=function(e){if(!y.paused&&f){var t=e.relatedTarget;null!==t&&(f.contains(t)||Mk(g.current,{select:!0}))}};document.addEventListener("focusin",e),document.addEventListener("focusout",t);var n=new MutationObserver((function(e){var t,n=document.activeElement,r=w(e);try{for(r.s();!(t=r.n()).done;){t.value.removedNodes.length>0&&(null!==f&&void 0!==f&&f.contains(n)||Mk(f))}}catch(i){r.e(i)}finally{r.f()}}));return f&&n.observe(f,{childList:!0,subtree:!0}),function(){document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),n.disconnect()}}}),[a,f,y.paused]),(0,t.useEffect)((function(){if(f){Ak.add(y);var e=document.activeElement;if(!f.contains(e)){var t=new CustomEvent(Sk,Ek);f.addEventListener(Sk,p),f.dispatchEvent(t),t.defaultPrevented||(!function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.select,i=void 0!==r&&r,o=document.activeElement,a=w(e);try{for(a.s();!(t=a.n()).done;){if(Mk(t.value,{select:i}),document.activeElement!==o)return}}catch(s){a.e(s)}finally{a.f()}}((n=Pk(f),n.filter((function(e){return"A"!==e.tagName}))),{select:!0}),document.activeElement===e&&Mk(f))}return function(){f.removeEventListener(Sk,p),setTimeout((function(){var t=new CustomEvent(_k,Ek);f.addEventListener(_k,v),f.dispatchEvent(t),t.defaultPrevented||Mk(null!==e&&void 0!==e?e:document.body,{select:!0}),f.removeEventListener(_k,v),Ak.remove(y)}),0)}}var n}),[f,p,v,y]);var b=(0,t.useCallback)((function(e){if((i||a)&&!y.paused){var t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,n=document.activeElement;if(t&&n){var r=e.currentTarget,o=function(e){var t=Pk(e),n=Ik(t,e),r=Ik(t.reverse(),e);return[n,r]}(r),s=l(o,2),u=s[0],c=s[1];u&&c?e.shiftKey||n!==c?e.shiftKey&&n===u&&(e.preventDefault(),i&&Mk(c,{select:!0})):(e.preventDefault(),i&&Mk(u,{select:!0})):n===r&&e.preventDefault()}}}),[i,a,y.paused]);return(0,t.createElement)(uk.div,Fx({tabIndex:-1},c,{ref:m,onKeyDown:b}))}));function Pk(e){for(var t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:function(e){var t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});n.nextNode();)t.push(n.currentNode);return t}function Ik(e,t){var n,r=w(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!jk(i,{upTo:t}))return i}}catch(o){r.e(o)}finally{r.f()}}function jk(e,t){var n=t.upTo;if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==n&&e===n)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function Mk(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).select,n=void 0!==t&&t;if(e&&e.focus){var r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&function(e){return e instanceof HTMLInputElement&&"select"in e}(e)&&n&&e.select()}}var Ak=function(){var e=[];return{add:function(t){var n=e[0];t!==n&&(null===n||void 0===n||n.pause()),(e=Tk(e,t)).unshift(t)},remove:function(t){var n;null===(n=(e=Tk(e,t))[0])||void 0===n||n.resume()}}}();function Tk(e,t){var n=d(e),r=n.indexOf(t);return-1!==r&&n.splice(r,1),n}var Ok=["container"],Nk=(0,t.forwardRef)((function(e,n){var r,i=e.container,o=void 0===i?null===globalThis||void 0===globalThis||null===(r=globalThis.document)||void 0===r?void 0:r.body:i,a=So(e,Ok);return o?ek.createPortal((0,t.createElement)(uk.div,Fx({},a,{ref:n})),o):null}));var Rk=function(e){var n=e.present,r=e.children,i=function(e){var n=l((0,t.useState)(),2),r=n[0],i=n[1],o=(0,t.useRef)({}),a=(0,t.useRef)(e),s=(0,t.useRef)("none"),u=e?"mounted":"unmounted",c=function(e,n){return(0,t.useReducer)((function(e,t){var r=n[e][t];return null!==r&&void 0!==r?r:e}),e)}(u,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}}),d=l(c,2),f=d[0],h=d[1];return(0,t.useEffect)((function(){var e=Lk(o.current);s.current="mounted"===f?e:"none"}),[f]),Xx((function(){var t=o.current,n=a.current;if(n!==e){var r=s.current,i=Lk(t);if(e)h("MOUNT");else if("none"===i||"none"===(null===t||void 0===t?void 0:t.display))h("UNMOUNT");else{h(n&&r!==i?"ANIMATION_OUT":"UNMOUNT")}a.current=e}}),[e,h]),Xx((function(){if(r){var e=function(e){var t=Lk(o.current).includes(e.animationName);e.target===r&&t&&(0,ek.flushSync)((function(){return h("ANIMATION_END")}))},t=function(e){e.target===r&&(s.current=Lk(o.current))};return r.addEventListener("animationstart",t),r.addEventListener("animationcancel",e),r.addEventListener("animationend",e),function(){r.removeEventListener("animationstart",t),r.removeEventListener("animationcancel",e),r.removeEventListener("animationend",e)}}h("ANIMATION_END")}),[r,h]),{isPresent:["mounted","unmountSuspended"].includes(f),ref:(0,t.useCallback)((function(e){e&&(o.current=getComputedStyle(e)),i(e)}),[])}}(n),o="function"===typeof r?r({present:i.isPresent}):t.Children.only(r),a=Vx(i.ref,o.ref);return"function"===typeof r||i.isPresent?(0,t.cloneElement)(o,{ref:a}):null};function Lk(e){return(null===e||void 0===e?void 0:e.animationName)||"none"}Rk.displayName="Presence";var Dk=0;function zk(){(0,t.useEffect)((function(){var e,t,n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",null!==(e=n[0])&&void 0!==e?e:Bk()),document.body.insertAdjacentElement("beforeend",null!==(t=n[1])&&void 0!==t?t:Bk()),Dk++,function(){1===Dk&&document.querySelectorAll("[data-radix-focus-guard]").forEach((function(e){return e.remove()})),Dk--}}),[])}function Bk(){var e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}var Fk=function(){return Fk=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Fk.apply(this,arguments)};function Uk(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;function Kk(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;"function"===typeof SuppressedError&&SuppressedError;var Vk="right-scroll-bar-position",Wk="width-before-scroll-bar";function Hk(e,n){return function(e,n){var r=(0,t.useState)((function(){return{value:e,callback:n,facade:{get current(){return r.value},set current(e){var t=r.value;t!==e&&(r.value=e,r.callback(e,t))}}}}))[0];return r.callback=n,r.facade}(n||null,(function(t){return e.forEach((function(e){return function(e,t){return"function"===typeof e?e(t):e&&(e.current=t),e}(e,t)}))}))}function Yk(e){return e}function qk(e,t){void 0===t&&(t=Yk);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(e){var i=t(e,r);return n.push(i),function(){n=n.filter((function(e){return e!==i}))}},assignSyncMedium:function(e){for(r=!0;n.length;){var t=n;n=[],t.forEach(e)}n={push:function(t){return e(t)},filter:function(){return n}}},assignMedium:function(e){r=!0;var t=[];if(n.length){var i=n;n=[],i.forEach(e),t=n}var o=function(){var n=t;t=[],n.forEach(e)},a=function(){return Promise.resolve().then(o)};a(),n={push:function(e){t.push(e),a()},filter:function(e){return t=t.filter(e),n}}}};return i}var Xk=function(e){void 0===e&&(e={});var t=qk(null);return t.options=Fk({async:!0,ssr:!1},e),t}(),$k=function(){},Gk=t.forwardRef((function(e,n){var r=t.useRef(null),i=t.useState({onScrollCapture:$k,onWheelCapture:$k,onTouchMoveCapture:$k}),o=i[0],a=i[1],s=e.forwardProps,u=e.children,l=e.className,c=e.removeScrollBar,d=e.enabled,f=e.shards,h=e.sideCar,p=e.noIsolation,v=e.inert,g=e.allowPinchZoom,m=e.as,y=void 0===m?"div":m,b=Uk(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),w=h,x=Hk([r,n]),k=Fk(Fk({},b),o);return t.createElement(t.Fragment,null,d&&t.createElement(w,{sideCar:Xk,removeScrollBar:c,shards:f,noIsolation:p,inert:v,setCallbacks:a,allowPinchZoom:!!g,lockRef:r}),s?t.cloneElement(t.Children.only(u),Fk(Fk({},k),{ref:x})):t.createElement(y,Fk({},k,{className:l,ref:x}),u))}));Gk.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},Gk.classNames={fullWidth:Wk,zeroRight:Vk};var Qk,Jk=function(e){var n=e.sideCar,r=Uk(e,["sideCar"]);if(!n)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=n.read();if(!i)throw new Error("Sidecar medium not found");return t.createElement(i,Fk({},r))};Jk.isSideCarExport=!0;function Zk(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Qk||n.nc;return t&&e.setAttribute("nonce",t),e}var eS=function(){var e=0,t=null;return{add:function(n){var r,i;0==e&&(t=Zk())&&(i=n,(r=t).styleSheet?r.styleSheet.cssText=i:r.appendChild(document.createTextNode(i)),function(e){(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}(t)),e++},remove:function(){! --e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},tS=function(){var e=function(){var e=eS();return function(n,r){t.useEffect((function(){return e.add(n),function(){e.remove()}}),[n&&r])}}();return function(t){var n=t.styles,r=t.dynamic;return e(n,r),null}},nS={left:0,top:0,right:0,gap:0},rS=function(e){return parseInt(e||"",10)||0},iS=function(e){if(void 0===e&&(e="margin"),"undefined"===typeof window)return nS;var t=function(e){var t=window.getComputedStyle(document.body),n=t["padding"===e?"paddingLeft":"marginLeft"],r=t["padding"===e?"paddingTop":"marginTop"],i=t["padding"===e?"paddingRight":"marginRight"];return[rS(n),rS(r),rS(i)]}(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},oS=tS(),aS=function(e,t,n,r){var i=e.left,o=e.top,a=e.right,s=e.gap;return void 0===n&&(n="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(r,";\n   padding-right: ").concat(s,"px ").concat(r,";\n  }\n  body {\n    overflow: hidden ").concat(r,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(r,";"),"margin"===n&&"\n    padding-left: ".concat(i,"px;\n    padding-top: ").concat(o,"px;\n    padding-right: ").concat(a,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(s,"px ").concat(r,";\n    "),"padding"===n&&"padding-right: ".concat(s,"px ").concat(r,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(Vk," {\n    right: ").concat(s,"px ").concat(r,";\n  }\n  \n  .").concat(Wk," {\n    margin-right: ").concat(s,"px ").concat(r,";\n  }\n  \n  .").concat(Vk," .").concat(Vk," {\n    right: 0 ").concat(r,";\n  }\n  \n  .").concat(Wk," .").concat(Wk," {\n    margin-right: 0 ").concat(r,";\n  }\n  \n  body {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(s,"px;\n  }\n")},sS=function(e){var n=e.noRelative,r=e.noImportant,i=e.gapMode,o=void 0===i?"margin":i,a=t.useMemo((function(){return iS(o)}),[o]);return t.createElement(oS,{styles:aS(a,!n,o,r?"":"!important")})},uS=!1;if("undefined"!==typeof window)try{var lS=Object.defineProperty({},"passive",{get:function(){return uS=!0,!0}});window.addEventListener("test",lS,lS),window.removeEventListener("test",lS,lS)}catch(NG){uS=!1}var cS=!!uS&&{passive:!1},dS=function(e,t){var n=window.getComputedStyle(e);return"hidden"!==n[t]&&!(n.overflowY===n.overflowX&&!function(e){return"TEXTAREA"===e.tagName}(e)&&"visible"===n[t])},fS=function(e,t){var n=t;do{if("undefined"!==typeof ShadowRoot&&n instanceof ShadowRoot&&(n=n.host),hS(e,n)){var r=pS(e,n);if(r[1]>r[2])return!0}n=n.parentNode}while(n&&n!==document.body);return!1},hS=function(e,t){return"v"===e?function(e){return dS(e,"overflowY")}(t):function(e){return dS(e,"overflowX")}(t)},pS=function(e,t){return"v"===e?[(n=t).scrollTop,n.scrollHeight,n.clientHeight]:function(e){return[e.scrollLeft,e.scrollWidth,e.clientWidth]}(t);var n},vS=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},gS=function(e){return[e.deltaX,e.deltaY]},mS=function(e){return e&&"current"in e?e.current:e},yS=function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")},bS=0,wS=[];var xS,kS=(xS=function(e){var n=t.useRef([]),r=t.useRef([0,0]),i=t.useRef(),o=t.useState(bS++)[0],a=t.useState((function(){return tS()}))[0],s=t.useRef(e);t.useEffect((function(){s.current=e}),[e]),t.useEffect((function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(o));var t=Kk([e.lockRef.current],(e.shards||[]).map(mS),!0).filter(Boolean);return t.forEach((function(e){return e.classList.add("allow-interactivity-".concat(o))})),function(){document.body.classList.remove("block-interactivity-".concat(o)),t.forEach((function(e){return e.classList.remove("allow-interactivity-".concat(o))}))}}}),[e.inert,e.lockRef.current,e.shards]);var u=t.useCallback((function(e,t){if("touches"in e&&2===e.touches.length)return!s.current.allowPinchZoom;var n,o=vS(e),a=r.current,u="deltaX"in e?e.deltaX:a[0]-o[0],l="deltaY"in e?e.deltaY:a[1]-o[1],c=e.target,d=Math.abs(u)>Math.abs(l)?"h":"v";if("touches"in e&&"h"===d&&"range"===c.type)return!1;var f=fS(d,c);if(!f)return!0;if(f?n=d:(n="v"===d?"h":"v",f=fS(d,c)),!f)return!1;if(!i.current&&"changedTouches"in e&&(u||l)&&(i.current=n),!n)return!0;var h=i.current||n;return function(e,t,n,r,i){var o=function(e,t){return"h"===e&&"rtl"===t?-1:1}(e,window.getComputedStyle(t).direction),a=o*r,s=n.target,u=t.contains(s),l=!1,c=a>0,d=0,f=0;do{var h=pS(e,s),p=h[0],v=h[1]-h[2]-o*p;(p||v)&&hS(e,s)&&(d+=v,f+=p),s=s.parentNode}while(!u&&s!==document.body||u&&(t.contains(s)||t===s));return(c&&(i&&0===d||!i&&a>d)||!c&&(i&&0===f||!i&&-a>f))&&(l=!0),l}(h,t,e,"h"===h?u:l,!0)}),[]),l=t.useCallback((function(e){var t=e;if(wS.length&&wS[wS.length-1]===a){var r="deltaY"in t?gS(t):vS(t),i=n.current.filter((function(e){return e.name===t.type&&e.target===t.target&&function(e,t){return e[0]===t[0]&&e[1]===t[1]}(e.delta,r)}))[0];if(i&&i.should)t.cancelable&&t.preventDefault();else if(!i){var o=(s.current.shards||[]).map(mS).filter(Boolean).filter((function(e){return e.contains(t.target)}));(o.length>0?u(t,o[0]):!s.current.noIsolation)&&t.cancelable&&t.preventDefault()}}}),[]),c=t.useCallback((function(e,t,r,i){var o={name:e,delta:t,target:r,should:i};n.current.push(o),setTimeout((function(){n.current=n.current.filter((function(e){return e!==o}))}),1)}),[]),d=t.useCallback((function(e){r.current=vS(e),i.current=void 0}),[]),f=t.useCallback((function(t){c(t.type,gS(t),t.target,u(t,e.lockRef.current))}),[]),h=t.useCallback((function(t){c(t.type,vS(t),t.target,u(t,e.lockRef.current))}),[]);t.useEffect((function(){return wS.push(a),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:h}),document.addEventListener("wheel",l,cS),document.addEventListener("touchmove",l,cS),document.addEventListener("touchstart",d,cS),function(){wS=wS.filter((function(e){return e!==a})),document.removeEventListener("wheel",l,cS),document.removeEventListener("touchmove",l,cS),document.removeEventListener("touchstart",d,cS)}}),[]);var p=e.removeScrollBar,v=e.inert;return t.createElement(t.Fragment,null,v?t.createElement(a,{styles:yS(o)}):null,p?t.createElement(sS,{gapMode:"margin"}):null)},Xk.useMedium(xS),Jk),SS=t.forwardRef((function(e,n){return t.createElement(Gk,Fk({},e,{ref:n,sideCar:kS}))}));SS.classNames=Gk.classNames;var _S=SS,ES=function(e){return"undefined"===typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body},CS=new WeakMap,PS=new WeakMap,IS={},jS=0,MS=function e(t){return t&&(t.host||e(t.parentNode))},AS=function(e,t,n,r){var i=function(e,t){return t.map((function(t){if(e.contains(t))return t;var n=MS(t);return n&&e.contains(n)?n:(console.error("aria-hidden",t,"in not contained inside",e,". Doing nothing"),null)})).filter((function(e){return Boolean(e)}))}(t,Array.isArray(e)?e:[e]);IS[n]||(IS[n]=new WeakMap);var o=IS[n],a=[],s=new Set,u=new Set(i);i.forEach((function e(t){t&&!s.has(t)&&(s.add(t),e(t.parentNode))}));return function e(t){t&&!u.has(t)&&Array.prototype.forEach.call(t.children,(function(t){if(s.has(t))e(t);else{var i=t.getAttribute(r),u=null!==i&&"false"!==i,l=(CS.get(t)||0)+1,c=(o.get(t)||0)+1;CS.set(t,l),o.set(t,c),a.push(t),1===l&&u&&PS.set(t,!0),1===c&&t.setAttribute(n,"true"),u||t.setAttribute(r,"true")}}))}(t),s.clear(),jS++,function(){a.forEach((function(e){var t=CS.get(e)-1,i=o.get(e)-1;CS.set(e,t),o.set(e,i),t||(PS.has(e)||e.removeAttribute(r),PS.delete(e)),i||e.removeAttribute(n)})),--jS||(CS=new WeakMap,CS=new WeakMap,PS=new WeakMap,IS={})}},TS=function(e,t,n){void 0===n&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),i=t||ES(e);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),AS(r,i,n,"aria-hidden")):function(){return null}},OS=["forceMount"],NS=["__scopeDialog"],RS=["forceMount"],LS=["__scopeDialog","trapFocus","onOpenAutoFocus","onCloseAutoFocus"],DS=["__scopeDialog"],zS=["__scopeDialog"],BS="Dialog",FS=l(Yx(BS),2),US=FS[0],KS=(FS[1],l(US(BS),2)),VS=KS[0],WS=KS[1],HS=function(e){var n=e.__scopeDialog,r=e.children,i=e.open,o=e.defaultOpen,a=e.onOpenChange,s=e.modal,u=void 0===s||s,c=(0,t.useRef)(null),d=(0,t.useRef)(null),f=l(Zx({prop:i,defaultProp:o,onChange:a}),2),h=f[0],p=void 0!==h&&h,v=f[1];return(0,t.createElement)(VS,{scope:n,triggerRef:c,contentRef:d,contentId:Qx(),titleId:Qx(),descriptionId:Qx(),open:p,onOpenChange:v,onOpenToggle:(0,t.useCallback)((function(){return v((function(e){return!e}))}),[v]),modal:u},r)},YS="DialogPortal",qS=l(US(YS,{forceMount:void 0}),2),XS=qS[0],$S=qS[1],GS=function(e){var n=e.__scopeDialog,r=e.forceMount,i=e.children,o=e.container,a=WS(YS,n);return(0,t.createElement)(XS,{scope:n,forceMount:r},t.Children.map(i,(function(e){return(0,t.createElement)(Rk,{present:r||a.open},(0,t.createElement)(Nk,{asChild:!0,container:o},e))})))},QS="DialogOverlay",JS=(0,t.forwardRef)((function(e,n){var r=$S(QS,e.__scopeDialog),i=e.forceMount,o=void 0===i?r.forceMount:i,a=So(e,OS),s=WS(QS,e.__scopeDialog);return s.modal?(0,t.createElement)(Rk,{present:o||s.open},(0,t.createElement)(ZS,Fx({},a,{ref:n}))):null})),ZS=(0,t.forwardRef)((function(e,n){var r=e.__scopeDialog,i=So(e,NS),o=WS(QS,r);return(0,t.createElement)(_S,{as:rk,allowPinchZoom:!0,shards:[o.contentRef]},(0,t.createElement)(uk.div,Fx({"data-state":l_(o.open)},i,{ref:n,style:mt({pointerEvents:"auto"},i.style)})))})),e_="DialogContent",t_=(0,t.forwardRef)((function(e,n){var r=$S(e_,e.__scopeDialog),i=e.forceMount,o=void 0===i?r.forceMount:i,a=So(e,RS),s=WS(e_,e.__scopeDialog);return(0,t.createElement)(Rk,{present:o||s.open},s.modal?(0,t.createElement)(n_,Fx({},a,{ref:n})):(0,t.createElement)(r_,Fx({},a,{ref:n})))})),n_=(0,t.forwardRef)((function(e,n){var r=WS(e_,e.__scopeDialog),i=(0,t.useRef)(null),o=Vx(n,r.contentRef,i);return(0,t.useEffect)((function(){var e=i.current;if(e)return TS(e)}),[]),(0,t.createElement)(i_,Fx({},e,{ref:o,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ux(e.onCloseAutoFocus,(function(e){var t;e.preventDefault(),null===(t=r.triggerRef.current)||void 0===t||t.focus()})),onPointerDownOutside:Ux(e.onPointerDownOutside,(function(e){var t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey;(2===t.button||n)&&e.preventDefault()})),onFocusOutside:Ux(e.onFocusOutside,(function(e){return e.preventDefault()}))}))})),r_=(0,t.forwardRef)((function(e,n){var r=WS(e_,e.__scopeDialog),i=(0,t.useRef)(!1),o=(0,t.useRef)(!1);return(0,t.createElement)(i_,Fx({},e,{ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:function(t){var n,a;(null===(n=e.onCloseAutoFocus)||void 0===n||n.call(e,t),t.defaultPrevented)||(i.current||null===(a=r.triggerRef.current)||void 0===a||a.focus(),t.preventDefault());i.current=!1,o.current=!1},onInteractOutside:function(t){var n,a;null===(n=e.onInteractOutside)||void 0===n||n.call(e,t),t.defaultPrevented||(i.current=!0,"pointerdown"===t.detail.originalEvent.type&&(o.current=!0));var s=t.target;(null===(a=r.triggerRef.current)||void 0===a?void 0:a.contains(s))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&o.current&&t.preventDefault()}}))})),i_=(0,t.forwardRef)((function(e,n){var r=e.__scopeDialog,i=e.trapFocus,o=e.onOpenAutoFocus,a=e.onCloseAutoFocus,s=So(e,LS),u=WS(e_,r),l=Vx(n,(0,t.useRef)(null));return zk(),(0,t.createElement)(t.Fragment,null,(0,t.createElement)(Ck,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:o,onUnmountAutoFocus:a},(0,t.createElement)(gk,Fx({role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":l_(u.open)},s,{ref:l,onDismiss:function(){return u.onOpenChange(!1)}}))),!1)})),o_="DialogTitle",a_=(0,t.forwardRef)((function(e,n){var r=e.__scopeDialog,i=So(e,DS),o=WS(o_,r);return(0,t.createElement)(uk.h2,Fx({id:o.titleId},i,{ref:n}))})),s_="DialogClose",u_=(0,t.forwardRef)((function(e,n){var r=e.__scopeDialog,i=So(e,zS),o=WS(s_,r);return(0,t.createElement)(uk.button,Fx({type:"button"},i,{ref:n,onClick:Ux(e.onClick,(function(){return o.onOpenChange(!1)}))}))}));function l_(e){return e?"open":"closed"}var c_="DialogTitleWarning",d_=function(e,n){var r=(0,t.createContext)(n);function i(e){var n=e.children,i=So(e,Wx),o=(0,t.useMemo)((function(){return i}),Object.values(i));return(0,t.createElement)(r.Provider,{value:o},n)}return i.displayName=e+"Provider",[i,function(i){var o=(0,t.useContext)(r);if(o)return o;if(void 0!==n)return n;throw new Error("`".concat(i,"` must be used within `").concat(e,"`"))}]}(c_,{contentName:e_,titleName:o_,docsSlug:"dialog"}),f_=l(d_,2),h_=(f_[0],f_[1],HS),p_=GS,v_=JS,g_=t_,m_=(0,t.createContext)(null);function y_(e){var t=e.assetUrls,n=e.children;return(0,f.jsx)(m_.Provider,{value:t,children:n})}function b_(){var e=(0,t.useContext)(m_);if(!e)throw new Error("useAssetUrls must be used within an AssetUrlsProvider");return e}var w_={"action.convert-to-bookmark":"Convert to Bookmark","action.convert-to-embed":"Convert to Embed","action.open-embed-link":"Open link","action.align-bottom":"Align bottom","action.align-center-horizontal":"Align horizontally","action.align-center-vertical":"Align vertically","action.align-center-horizontal.short":"Align H","action.align-center-vertical.short":"Align V","action.align-left":"Align left","action.align-right":"Align right","action.align-top":"Align top","action.back-to-content":"Back to content","action.bring-forward":"Bring forward","action.bring-to-front":"Bring to front","action.copy-as-json.short":"JSON","action.copy-as-json":"Copy as JSON","action.copy-as-png.short":"PNG","action.copy-as-png":"Copy as PNG","action.copy-as-svg.short":"SVG","action.copy-as-svg":"Copy as SVG","action.copy":"Copy","action.cut":"Cut","action.delete":"Delete","action.distribute-horizontal":"Distribute horizontally","action.distribute-vertical":"Distribute vertically","action.distribute-horizontal.short":"Distribute H","action.distribute-vertical.short":"Distribute V","action.duplicate":"Duplicate","action.edit-link":"Edit link","action.exit-pen-mode":"Exit pen mode","action.export-as-json.short":"JSON","action.export-as-json":"Export as JSON","action.export-as-png.short":"PNG","action.export-as-png":"Export as PNG","action.export-as-svg.short":"SVG","action.export-as-svg":"Export as SVG","action.flip-horizontal":"Flip horizontally","action.flip-vertical":"Flip vertically","action.flip-horizontal.short":"Flip H","action.flip-vertical.short":"Flip V","action.fork-project":"Fork this project","action.group":"Group","action.insert-embed":"Insert embed","action.insert-media":"Upload media","action.leave-shared-project":"Leave shared project","action.new-project":"New project","action.new-shared-project":"New shared project","action.open-cursor-chat":"Cursor chat","action.open-file":"Open file","action.pack":"Pack","action.paste":"Paste","action.print":"Print","action.redo":"Redo","action.rotate-ccw":"Rotate counterclockwise","action.rotate-cw":"Rotate clockwise","action.save-copy":"Save a copy","action.select-all":"Select all","action.select-none":"Select none","action.send-backward":"Send backward","action.send-to-back":"Send to back","action.share-project":"Share this project","action.stack-horizontal":"Stack horizontally","action.stack-vertical":"Stack vertically","action.stack-horizontal.short":"Stack H","action.stack-vertical.short":"Stack V","action.stop-following":"Stop following","action.stretch-horizontal":"Stretch horizontally","action.stretch-vertical":"Stretch vertically","action.stretch-horizontal.short":"Stretch H","action.stretch-vertical.short":"Stretch V","action.toggle-auto-size":"Toggle auto size","action.toggle-dark-mode.menu":"Dark mode","action.toggle-dark-mode":"Toggle dark mode","action.toggle-reduce-motion.menu":"Reduce motion","action.toggle-reduce-motion":"Toggle reduce motion","action.toggle-debug-mode.menu":"Debug mode","action.toggle-debug-mode":"Toggle debug mode","action.toggle-focus-mode.menu":"Focus mode","action.toggle-focus-mode":"Toggle focus mode","action.toggle-grid.menu":"Show grid","action.toggle-grid":"Toggle grid","action.toggle-lock":"Toggle locked","action.toggle-snap-mode.menu":"Always snap","action.toggle-snap-mode":"Toggle always snap","action.toggle-tool-lock.menu":"Tool lock","action.toggle-tool-lock":"Toggle tool lock","action.toggle-transparent.context-menu":"Transparent","action.toggle-transparent.menu":"Transparent","action.toggle-transparent":"Toggle transparent background","action.undo":"Undo","action.ungroup":"Ungroup","action.zoom-in":"Zoom in","action.zoom-out":"Zoom out","action.zoom-to-100":"Zoom to 100%","action.zoom-to-fit":"Zoom to fit","action.zoom-to-selection":"Zoom to selection","color-style.black":"Black","color-style.blue":"Blue","color-style.green":"Green","color-style.grey":"Grey","color-style.light-blue":"Light blue","color-style.light-green":"Light green","color-style.light-red":"Light red","color-style.light-violet":"Light violet","color-style.orange":"Orange","color-style.red":"Red","color-style.violet":"Violet","color-style.yellow":"Yellow","fill-style.none":"None","fill-style.semi":"Semi","fill-style.solid":"Solid","fill-style.pattern":"Pattern","dash-style.dashed":"Dashed","dash-style.dotted":"Dotted","dash-style.draw":"Draw","dash-style.solid":"Solid","size-style.s":"Small","size-style.m":"Medium","size-style.l":"Large","size-style.xl":"Extra large","opacity-style.0.1":"10%","opacity-style.0.25":"25%","opacity-style.0.5":"50%","opacity-style.0.75":"75%","opacity-style.1":"100%","font-style.draw":"Draw","font-style.sans":"Sans","font-style.serif":"Serif","font-style.mono":"Mono","align-style.start":"Start","align-style.middle":"Middle","align-style.end":"End","align-style.justify":"Justify","geo-style.arrow-down":"Arrow down","geo-style.arrow-left":"Arrow left","geo-style.arrow-right":"Arrow right","geo-style.arrow-up":"Arrow up","geo-style.diamond":"Diamond","geo-style.ellipse":"Ellipse","geo-style.hexagon":"Hexagon","geo-style.octagon":"Octagon","geo-style.oval":"Oval","geo-style.pentagon":"Pentagon","geo-style.rectangle":"Rectangle","geo-style.rhombus-2":"Rhombus 2","geo-style.rhombus":"Rhombus","geo-style.star":"Star","geo-style.trapezoid":"Trapezoid","geo-style.triangle":"Triangle","geo-style.x-box":"X box","geo-style.check-box":"Check box","arrowheadStart-style.none":"None","arrowheadStart-style.arrow":"Arrow","arrowheadStart-style.bar":"Bar","arrowheadStart-style.diamond":"Diamond","arrowheadStart-style.dot":"Dot","arrowheadStart-style.inverted":"Inverted","arrowheadStart-style.pipe":"Pipe","arrowheadStart-style.square":"Square","arrowheadStart-style.triangle":"Triangle","arrowheadEnd-style.none":"None","arrowheadEnd-style.arrow":"Arrow","arrowheadEnd-style.bar":"Bar","arrowheadEnd-style.diamond":"Diamond","arrowheadEnd-style.dot":"Dot","arrowheadEnd-style.inverted":"Inverted","arrowheadEnd-style.pipe":"Pipe","arrowheadEnd-style.square":"Square","arrowheadEnd-style.triangle":"Triangle","spline-style.line":"Line","spline-style.cubic":"Cubic","tool.select":"Select","tool.hand":"Hand","tool.draw":"Draw","tool.eraser":"Eraser","tool.arrow-down":"Arrow down","tool.arrow-left":"Arrow left","tool.arrow-right":"Arrow right","tool.arrow-up":"Arrow up","tool.arrow":"Arrow","tool.diamond":"Diamond","tool.ellipse":"Ellipse","tool.hexagon":"Hexagon","tool.highlight":"Highlight","tool.line":"Line","tool.octagon":"Octagon","tool.oval":"Oval","tool.pentagon":"Pentagon","tool.rectangle":"Rectangle","tool.rhombus":"Rhombus","tool.star":"Star","tool.trapezoid":"Trapezoid","tool.triangle":"Triangle","tool.x-box":"X box","tool.check-box":"Check box","tool.asset":"Asset","tool.frame":"Frame","tool.note":"Note","tool.laser":"Laser","tool.embed":"Embed","tool.text":"Text","menu.title":"Menu","menu.copy-as":"Copy as","menu.edit":"Edit","menu.export-as":"Export as","menu.file":"File","menu.language":"Language","menu.preferences":"Preferences","menu.view":"View","context-menu.arrange":"Arrange","context-menu.copy-as":"Copy as","context-menu.export-as":"Export as","context-menu.move-to-page":"Move to page","context-menu.reorder":"Reorder","page-menu.title":"Pages","page-menu.create-new-page":"Create new page","page-menu.max-page-count-reached":"Max pages reached","page-menu.new-page-initial-name":"Page 1","page-menu.edit-start":"Edit","page-menu.edit-done":"Done","page-menu.go-to-page":"Go to page","page-menu.submenu.rename":"Rename","page-menu.submenu.duplicate-page":"Duplicate","page-menu.submenu.title":"Menu","page-menu.submenu.move-down":"Move down","page-menu.submenu.move-up":"Move up","page-menu.submenu.delete":"Delete","share-menu.title":"Share","share-menu.save-note":"Download this project to your computer as a .tldr file.","share-menu.fork-note":"Create a new shared project based on this snapshot.","share-menu.share-project":"Share this project","share-menu.default-project-name":"Shared Project","share-menu.copy-link":"Copy share link","share-menu.readonly-link":"Read-only","share-menu.create-snapshot-link":"Copy snapshot link","share-menu.snapshot-link-note":"Capture and share this project as a read-only snapshot link.","share-menu.copy-readonly-link":"Copy read-only link","share-menu.offline-note":"Create a new shared project based on your current project.","share-menu.copy-link-note":"Anyone with the link will be able to view and edit this project.","share-menu.copy-readonly-link-note":"Anyone with the link will be able to view (but not edit) this project.","share-menu.project-too-large":"Sorry, this project can't be shared because it's too large. We're working on it!","share-menu.upload-failed":"Sorry, we couldn't upload your project at the moment. Please try again or let us know if the problem persists.","people-menu.title":"People","people-menu.change-name":"Change name","people-menu.change-color":"Change color","people-menu.follow":"Following","people-menu.following":"Following","people-menu.leading":"Following You","people-menu.user":"(You)","people-menu.invite":"Invite others","help-menu.title":"Help and resources","help-menu.about":"About","help-menu.discord":"Discord","help-menu.github":"GitHub","help-menu.keyboard-shortcuts":"Keyboard shortcuts","help-menu.twitter":"Twitter","actions-menu.title":"Actions","edit-link-dialog.title":"Edit link","edit-link-dialog.invalid-url":"A link must be a valid URL.","edit-link-dialog.detail":"Links will open in a new tab.","edit-link-dialog.url":"URL","edit-link-dialog.clear":"Clear","edit-link-dialog.save":"Continue","edit-link-dialog.cancel":"Cancel","embed-dialog.title":"Insert embed","embed-dialog.back":"Back","embed-dialog.create":"Create","embed-dialog.cancel":"Cancel","embed-dialog.url":"URL","embed-dialog.instruction":"Paste in the site's URL to create the embed.","embed-dialog.invalid-url":"We could not create an embed from that URL.","edit-pages-dialog.move-down":"Move down","edit-pages-dialog.move-up":"Move up","shortcuts-dialog.title":"Keyboard shortcuts","shortcuts-dialog.edit":"Edit","shortcuts-dialog.file":"File","shortcuts-dialog.preferences":"Preferences","shortcuts-dialog.tools":"Tools","shortcuts-dialog.transform":"Transform","shortcuts-dialog.view":"View","shortcuts-dialog.collaboration":"Collaboration","home-project-dialog.title":"Home project","home-project-dialog.description":"This is your local home project. It's just for you!","rename-project-dialog.title":"Rename project","rename-project-dialog.cancel":"Cancel","rename-project-dialog.rename":"Rename","home-project-dialog.ok":"Ok","style-panel.title":"Styles","style-panel.align":"Align","style-panel.vertical-align":"Vertical align","style-panel.position":"Position","style-panel.arrowheads":"Arrowheads","style-panel.arrowhead-start":"Start","style-panel.arrowhead-end":"End","style-panel.color":"Color","style-panel.dash":"Dash","style-panel.fill":"Fill","style-panel.font":"Font","style-panel.geo":"Shape","style-panel.mixed":"Mixed","style-panel.opacity":"Opacity","style-panel.size":"Size","style-panel.spline":"Spline","tool-panel.drawing":"Drawing","tool-panel.shapes":"Shapes","tool-panel.more":"More","debug-panel.more":"More","navigation-zone.toggle-minimap":"Toggle minimap","navigation-zone.zoom":"Zoom","focus-mode.toggle-focus-mode":"Toggle focus mode","toast.close":"Close","file-system.file-open-error.title":"Could not open file","file-system.file-open-error.not-a-tldraw-file":"The file you tried to open doesn't look like a tldraw file.","file-system.file-open-error.file-format-version-too-new":"The file you tried to open is from a newer version of tldraw. Please reload the page and try again.","file-system.file-open-error.generic-corrupted-file":"The file you tried to open is corrupted.","file-system.confirm-open.title":"Overwrite current project?","file-system.confirm-open.description":"Opening a file will replace your current project and any unsaved changes will be lost. Are you sure you want to continue?","file-system.confirm-open.cancel":"Cancel","file-system.confirm-open.open":"Open file","file-system.confirm-open.dont-show-again":"Don't ask again","file-system.confirm-clear.title":"Clear current project?","file-system.confirm-clear.description":"Creating a new project will clear your current project and any unsaved changes will be lost. Are you sure you want to continue?","file-system.confirm-clear.cancel":"Cancel","file-system.confirm-clear.continue":"Continue","file-system.confirm-clear.dont-show-again":"Don't ask again","file-system.shared-document-file-open-error.title":"Could not open file","file-system.shared-document-file-open-error.description":"Opening files from shared projects is not supported.","sharing.confirm-leave.title":"Leave current project?","sharing.confirm-leave.description":"Are you sure you want to leave this shared project? You can return to it by navigating to its URL.","sharing.confirm-leave.cancel":"Cancel","sharing.confirm-leave.leave":"Leave","sharing.confirm-leave.dont-show-again":"Don't ask again","toast.error.export-fail.title":"Failed export","toast.error.export-fail.desc":"Failed to export image","toast.error.copy-fail.title":"Failed copy","toast.error.copy-fail.desc":"Failed to copy image","context.pages.new-page":"New page","vscode.file-open.desc":"We've updated this document to work with the current version of tldraw. If you'd like to keep the original version (which will work on old.tldraw.com), click below to create a backup.","vscode.file-open.open":"Continue","vscode.file-open.backup":"Backup","vscode.file-open.backup-saved":"Backup saved","vscode.file-open.backup-failed":"Backup failed: this is not a .tldr file.","vscode.file-open.dont-show-again":"Don't ask again","cursor-chat.type-to-chat":"Type to chat..."},x_={locale:"en",label:"English",messages:w_};function k_(e,t){return S_.apply(this,arguments)}function S_(){return S_=b(m().mark((function e(t,n){var r,i,o,a,s;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(n.translations.en);case 2:if(e.sent.ok){e.next=6;break}return console.warn("No main translations found."),e.abrupt("return",x_);case 6:if("en"!==t){e.next=8;break}return e.abrupt("return",x_);case 8:if(r=gl.find((function(e){return e.locale===t})),r){e.next=12;break}return console.warn("No translation found for locale ".concat(t)),e.abrupt("return",x_);case 12:return e.next=14,fetch(n.translations[r.locale]);case 14:return i=e.sent,e.next=17,i.json();case 17:if(o=e.sent){e.next=21;break}return console.warn("No messages found for locale ".concat(t)),e.abrupt("return",x_);case 21:for(s in a=[],x_)o[s]||a.push(s);return a.length,e.abrupt("return",{locale:t,label:r.label,messages:mt(mt({},x_.messages),o)});case 25:case"end":return e.stop()}}),e)}))),S_.apply(this,arguments)}var __=t.createContext({}),E_=function(){return t.useContext(__)},C_=Pl((function(e){var n=e.overrides,r=e.children,i=Ml().locale,o=b_(),a=l(t.useState((function(){return n&&n.en?{locale:"en",label:"English",messages:mt(mt({},w_),n.en)}:{locale:"en",label:"English",messages:w_}})),2),s=a[0],u=a[1];return t.useEffect((function(){var e=!1;function t(){return t=b(m().mark((function t(){var r;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k_(i,o);case 2:(r=t.sent)&&!e&&(n&&n[i]?u(mt(mt({},r),{},{messages:mt(mt({},r.messages),n[i])})):u(r));case 4:case"end":return t.stop()}}),t)}))),t.apply(this,arguments)}return function(){t.apply(this,arguments)}(),function(){e=!0}}),[o,i,n]),(0,f.jsx)(__.Provider,{value:s,children:r})}));function P_(){var e=E_();return t.useCallback((function(t){var n;return null!==(n=e.messages[t])&&void 0!==n?n:t}),[e])}function I_(e){return(0,f.jsx)("svg",mt(mt({width:16,height:16,viewBox:"0 0 16 16"},e),{},{children:(0,f.jsxs)("g",{strokeWidth:2,fill:"none",fillRule:"evenodd",children:[(0,f.jsx)("circle",{strokeOpacity:.25,cx:8,cy:8,r:7,stroke:"currentColor"}),(0,f.jsx)("path",{strokeLinecap:"round",d:"M15 8c0-4.5-4.5-7-7-7",stroke:"currentColor",children:(0,f.jsx)("animateTransform",{attributeName:"transform",type:"rotate",from:"0 8 8",to:"360 8 8",dur:"1s",repeatCount:"indefinite"})})]})}))}var j_=["small","invertIcon","icon","color","className"],M_=(0,t.memo)((function(e){var n=e.small,r=e.invertIcon,i=e.icon,o=e.color,a=e.className,s=So(e,j_),u=b_().icons[i],l=(0,t.useRef)(null);return(0,t.useLayoutEffect)((function(){null!==l&&void 0!==l&&l.current&&(l.current.style.webkitMask="url(".concat(u,") center 100% / 100% no-repeat"))}),[l,u]),(0,f.jsx)("div",mt(mt({},s),{},{ref:l,className:kl("tlui-icon",{"tlui-icon__small":n},a),style:{color:o,mask:"url(".concat(u,") center 100% / 100% no-repeat"),transform:r?"scale(-1, 1)":void 0}}))}));var A_="undefined"!==typeof window&&window.navigator.userAgent.toLowerCase().indexOf("mac")>-1,T_=A_?"\u2318":"Ctrl",O_=A_?"\u2325":"Alt";function N_(e){return"\u2014 "+e.split(",")[0].split("").map((function(e){var t=e.replace(/\$/g,T_).replace(/\?/g,O_).replace(/!/g,"\u21e7");return t[0].toUpperCase()+t.slice(1)})).join("\u2009")}function R_(e){var t,n=e.children;return(0,f.jsx)("kbd",{className:"tlui-kbd",children:(t=n,t.split(",")[0].split("").map((function(e){var t=e.replace(/\$/g,T_).replace(/\?/g,O_).replace(/!/g,"\u21e7");return t[0].toUpperCase()+t.slice(1)}))).map((function(e,t){return(0,f.jsx)("span",{children:e},t)}))})}var L_=["label","icon","invertIcon","iconLeft","smallIcon","kbd","isChecked","type","children","spinner"],D_=t.forwardRef((function(e,t){var n,r=e.label,i=e.icon,o=e.invertIcon,a=e.iconLeft,s=e.smallIcon,u=e.kbd,l=e.isChecked,c=void 0!==l&&l,d=e.type,h=void 0===d?"normal":d,p=e.children,v=e.spinner,g=So(e,L_),m=P_(),y=r?m(r):"";return(0,f.jsxs)("button",mt(mt({ref:t,draggable:!1,type:"button"},g),{},{title:null!==(n=g.title)&&void 0!==n?n:y,className:kl("tlui-button","tlui-button__".concat(h),g.className),children:[a&&(0,f.jsx)(M_,{icon:a,className:"tlui-icon-left",small:!0}),p,r&&(0,f.jsxs)("span",{draggable:!1,children:[y,c&&(0,f.jsx)(M_,{icon:"check"})]}),u&&(0,f.jsx)(R_,{children:u}),i&&!v&&(0,f.jsx)(M_,{icon:i,small:!!r||s,invertIcon:o}),v&&(0,f.jsx)(I_,{})]}))}));function z_(e){var t=e.className,n=e.children;return(0,f.jsx)("div",{className:kl("tlui-dialog__header",t),children:n})}function B_(e){var t=e.className,n=e.children;return(0,f.jsx)(a_,{dir:"ltr",className:kl("tlui-dialog__header__title",t),children:n})}function F_(){return(0,f.jsx)("div",{className:"tlui-dialog__header__close",children:(0,f.jsx)(u_,{"data-testid":"dialog.close",dir:"ltr",asChild:!0,children:(0,f.jsx)(D_,{"aria-label":"Close",onTouchEnd:function(e){return e.target.click()},children:(0,f.jsx)(M_,{small:!0,icon:"cross-2"})})})})}function U_(e){var t=e.className,n=e.children,r=e.style;return(0,f.jsx)("div",{className:kl("tlui-dialog__body",t),style:r,children:n})}function K_(e){var t=e.className,n=e.children;return(0,f.jsx)("div",{className:kl("tlui-dialog__footer",t),children:n})}var V_=["scope","children"];function W_(e){var n=e+"CollectionProvider",r=l(Yx(n),2),i=r[0],o=r[1],a=l(i(n,{collectionRef:{current:null},itemMap:new Map}),2),s=a[0],u=a[1],c=function(e){var n=e.scope,r=e.children,i=t.useRef(null),o=t.useRef(new Map).current;return t.createElement(s,{scope:n,itemMap:o,collectionRef:i},r)},d=e+"CollectionSlot",f=t.forwardRef((function(e,n){var r=e.scope,i=e.children,o=Vx(n,u(d,r).collectionRef);return t.createElement(rk,{ref:o},i)})),h=e+"CollectionItemSlot",p="data-radix-collection-item",v=t.forwardRef((function(e,n){var r,i=e.scope,o=e.children,a=So(e,V_),s=t.useRef(null),l=Vx(n,s),c=u(h,i);return t.useEffect((function(){return c.itemMap.set(s,mt({ref:s},a)),function(){c.itemMap.delete(s)}})),t.createElement(rk,(vt(r={},p,""),vt(r,"ref",l),r),o)}));return[{Provider:c,Slot:f,ItemSlot:v},function(n){var r=u(e+"CollectionConsumer",n),i=t.useCallback((function(){var e=r.collectionRef.current;if(!e)return[];var t=Array.from(e.querySelectorAll("[".concat(p,"]"))),n=Array.from(r.itemMap.values()).sort((function(e,n){return t.indexOf(e.ref.current)-t.indexOf(n.ref.current)}));return n}),[r.collectionRef,r.itemMap]);return i},o]}var H_=(0,t.createContext)(void 0);function Y_(e){var n=(0,t.useContext)(H_);return e||n||"ltr"}var q_=["top","right","bottom","left"],X_=Math.min,$_=Math.max,G_=Math.round,Q_=Math.floor,J_=function(e){return{x:e,y:e}},Z_={left:"right",right:"left",bottom:"top",top:"bottom"},eE={start:"end",end:"start"};function tE(e,t,n){return $_(e,X_(t,n))}function nE(e,t){return"function"===typeof e?e(t):e}function rE(e){return e.split("-")[0]}function iE(e){return e.split("-")[1]}function oE(e){return"x"===e?"y":"x"}function aE(e){return"y"===e?"height":"width"}function sE(e){return["top","bottom"].includes(rE(e))?"y":"x"}function uE(e){return oE(sE(e))}function lE(e,t,n){void 0===n&&(n=!1);var r=iE(e),i=uE(e),o=aE(i),a="x"===i?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[o]>t.floating[o]&&(a=hE(a)),[a,hE(a)]}function cE(e){var t=hE(e);return[dE(e),t,dE(t)]}function dE(e){return e.replace(/start|end/g,(function(e){return eE[e]}))}function fE(e,t,n,r){var i=iE(e),o=function(e,t,n){var r=["left","right"],i=["right","left"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?["top","bottom"]:["bottom","top"];default:return[]}}(rE(e),"start"===n,r);return i&&(o=o.map((function(e){return e+"-"+i})),t&&(o=o.concat(o.map(dE)))),o}function hE(e){return e.replace(/left|right|bottom|top/g,(function(e){return Z_[e]}))}function pE(e){return"number"!==typeof e?function(e){return mt({top:0,right:0,bottom:0,left:0},e)}(e):{top:e,right:e,bottom:e,left:e}}function vE(e){return mt(mt({},e),{},{top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height})}var gE=["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","fallbackAxisSideDirection","flipAlignment"],mE=["strategy"],yE=["mainAxis","crossAxis","limiter"],bE=["apply"];function wE(e,t,n){var r,i=e.reference,o=e.floating,a=sE(t),s=uE(t),u=aE(s),l=rE(t),c="y"===a,d=i.x+i.width/2-o.width/2,f=i.y+i.height/2-o.height/2,h=i[u]/2-o[u]/2;switch(l){case"top":r={x:d,y:i.y-o.height};break;case"bottom":r={x:d,y:i.y+i.height};break;case"right":r={x:i.x+i.width,y:f};break;case"left":r={x:i.x-o.width,y:f};break;default:r={x:i.x,y:i.y}}switch(iE(t)){case"start":r[s]-=h*(n&&c?-1:1);break;case"end":r[s]+=h*(n&&c?-1:1)}return r}var xE=function(){var e=b(m().mark((function e(t,n,r){var i,o,a,s,u,l,c,d,f,h,p,v,g,y,b,w,x,k,S,_,E,C,P,I,j,M;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.placement,o=void 0===i?"bottom":i,a=r.strategy,s=void 0===a?"absolute":a,u=r.middleware,l=void 0===u?[]:u,c=r.platform,d=l.filter(Boolean),e.next=4,null==c.isRTL?void 0:c.isRTL(n);case 4:return f=e.sent,e.next=7,c.getElementRects({reference:t,floating:n,strategy:s});case 7:h=e.sent,p=wE(h,o,f),v=p.x,g=p.y,y=o,b={},w=0,x=0;case 13:if(!(x<d.length)){e.next=46;break}return k=d[x],S=k.name,_=k.fn,e.next=17,_({x:v,y:g,initialPlacement:o,placement:y,strategy:s,middlewareData:b,rects:h,platform:c,elements:{reference:t,floating:n}});case 17:if(E=e.sent,C=E.x,P=E.y,I=E.data,j=E.reset,v=null!=C?C:v,g=null!=P?P:g,b=mt(mt({},b),{},vt({},S,mt(mt({},b[S]),I))),!(j&&w<=50)){e.next=43;break}if(w++,"object"!==typeof j){e.next=41;break}if(j.placement&&(y=j.placement),!j.rects){e.next=38;break}if(!0!==j.rects){e.next=36;break}return e.next=33,c.getElementRects({reference:t,floating:n,strategy:s});case 33:e.t0=e.sent,e.next=37;break;case 36:e.t0=j.rects;case 37:h=e.t0;case 38:M=wE(h,y,f),v=M.x,g=M.y;case 41:return x=-1,e.abrupt("continue",43);case 43:x++,e.next=13;break;case 46:return e.abrupt("return",{x:v,y:g,placement:y,strategy:s,middlewareData:b});case 47:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function kE(e,t){return SE.apply(this,arguments)}function SE(){return SE=b(m().mark((function e(t,n){var r,i,o,a,s,u,l,c,d,f,h,p,v,g,y,b,w,x,k,S,_,E,C,P,I;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n={}),i=t.x,o=t.y,a=t.platform,s=t.rects,u=t.elements,l=t.strategy,c=nE(n,t),d=c.boundary,f=void 0===d?"clippingAncestors":d,h=c.rootBoundary,p=void 0===h?"viewport":h,v=c.elementContext,g=void 0===v?"floating":v,y=c.altBoundary,b=void 0!==y&&y,w=c.padding,x=pE(void 0===w?0:w),k="floating"===g?"reference":"floating",S=u[b?k:g],e.t0=vE,e.t1=a,e.next=10,null==a.isElement?void 0:a.isElement(S);case 10:if(e.t2=r=e.sent,null==e.t2){e.next=15;break}e.t3=r,e.next=16;break;case 15:e.t3=!0;case 16:if(!e.t3){e.next=20;break}e.t4=S,e.next=26;break;case 20:if(e.t5=S.contextElement,e.t5){e.next=25;break}return e.next=24,null==a.getDocumentElement?void 0:a.getDocumentElement(u.floating);case 24:e.t5=e.sent;case 25:e.t4=e.t5;case 26:return e.t6=e.t4,e.t7=f,e.t8=p,e.t9=l,e.t10={element:e.t6,boundary:e.t7,rootBoundary:e.t8,strategy:e.t9},e.next=33,e.t1.getClippingRect.call(e.t1,e.t10);case 33:return e.t11=e.sent,_=(0,e.t0)(e.t11),E="floating"===g?mt(mt({},s.floating),{},{x:i,y:o}):s.reference,e.next=38,null==a.getOffsetParent?void 0:a.getOffsetParent(u.floating);case 38:return C=e.sent,e.next=41,null==a.isElement?void 0:a.isElement(C);case 41:if(!e.sent){e.next=50;break}return e.next=44,null==a.getScale?void 0:a.getScale(C);case 44:if(e.t13=e.sent,e.t13){e.next=47;break}e.t13={x:1,y:1};case 47:e.t12=e.t13,e.next=51;break;case 50:e.t12={x:1,y:1};case 51:if(P=e.t12,e.t14=vE,!a.convertOffsetParentRelativeRectToViewportRelativeRect){e.next=59;break}return e.next=56,a.convertOffsetParentRelativeRectToViewportRelativeRect({rect:E,offsetParent:C,strategy:l});case 56:e.t15=e.sent,e.next=60;break;case 59:e.t15=E;case 60:return e.t16=e.t15,I=(0,e.t14)(e.t16),e.abrupt("return",{top:(_.top-I.top+x.top)/P.y,bottom:(I.bottom-_.bottom+x.bottom)/P.y,left:(_.left-I.left+x.left)/P.x,right:(I.right-_.right+x.right)/P.x});case 63:case"end":return e.stop()}}),e)}))),SE.apply(this,arguments)}var _E=function(e){return{name:"arrow",options:e,fn:function(t){return b(m().mark((function n(){var r,i,o,a,s,u,l,c,d,f,h,p,v,g,y,b,w,x,k,S,_,E,C,P,I,j,M,A,T,O,N,R,L,D,z;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=t.x,a=t.y,s=t.placement,u=t.rects,l=t.platform,c=t.elements,d=nE(e,t)||{},f=d.element,h=d.padding,p=void 0===h?0:h,null!=f){n.next=4;break}return n.abrupt("return",{});case 4:return v=pE(p),g={x:o,y:a},y=uE(s),b=aE(y),n.next=10,l.getDimensions(f);case 10:return w=n.sent,k=(x="y"===y)?"top":"left",S=x?"bottom":"right",_=x?"clientHeight":"clientWidth",E=u.reference[b]+u.reference[y]-g[y]-u.floating[b],C=g[y]-u.reference[y],n.next=19,null==l.getOffsetParent?void 0:l.getOffsetParent(f);case 19:if(P=n.sent,I=P?P[_]:0,n.t0=!I,n.t0){n.next=26;break}return n.next=25,null==l.isElement?void 0:l.isElement(P);case 25:n.t0=!n.sent;case 26:if(!n.t0){n.next=28;break}I=c.floating[_]||u.floating[b];case 28:return j=E/2-C/2,M=I/2-w[b]/2-1,A=X_(v[k],M),T=X_(v[S],M),O=A,N=I-w[b]-T,R=I/2-w[b]/2+j,L=tE(O,R,N),D=null!=iE(s)&&R!=L&&u.reference[b]/2-(R<O?A:T)-w[b]/2<0,z=D?R<O?O-R:N-R:0,n.abrupt("return",(vt(i={},y,g[y]-z),vt(i,"data",(vt(r={},y,L),vt(r,"centerOffset",R-L+z),r)),i));case 39:case"end":return n.stop()}}),n)})))()}}};var EE=function(e){return void 0===e&&(e={}),{name:"flip",options:e,fn:function(t){return b(m().mark((function n(){var r,i,o,a,s,u,l,c,f,h,p,v,g,y,b,w,x,k,S,_,E,C,P,I,j,M,A,T,O,N,R,L,D,z,B,F;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.placement,o=t.middlewareData,a=t.rects,s=t.initialPlacement,u=t.platform,l=t.elements,c=nE(e,t),f=c.mainAxis,h=void 0===f||f,p=c.crossAxis,v=void 0===p||p,g=c.fallbackPlacements,y=c.fallbackStrategy,b=void 0===y?"bestFit":y,w=c.fallbackAxisSideDirection,x=void 0===w?"none":w,k=c.flipAlignment,S=void 0===k||k,_=So(c,gE),E=rE(i),C=rE(s)===s,n.next=6,null==u.isRTL?void 0:u.isRTL(l.floating);case 6:return P=n.sent,I=g||(C||!S?[hE(s)]:cE(s)),g||"none"===x||I.push.apply(I,d(fE(s,S,x,P))),j=[s].concat(d(I)),n.next=12,kE(t,_);case 12:if(M=n.sent,A=[],T=(null==(r=o.flip)?void 0:r.overflows)||[],h&&A.push(M[E]),v&&(O=lE(i,a,P),A.push(M[O[0]],M[O[1]])),T=[].concat(d(T),[{placement:i,overflows:A}]),A.every((function(e){return e<=0}))){n.next=35;break}if(L=((null==(N=o.flip)?void 0:N.index)||0)+1,!(D=j[L])){n.next=23;break}return n.abrupt("return",{data:{index:L,overflows:T},reset:{placement:D}});case 23:if(z=null==(R=T.filter((function(e){return e.overflows[0]<=0})).sort((function(e,t){return e.overflows[1]-t.overflows[1]}))[0])?void 0:R.placement,z){n.next=33;break}n.t0=b,n.next="bestFit"===n.t0?28:"initialPlacement"===n.t0?31:33;break;case 28:return F=null==(B=T.map((function(e){return[e.placement,e.overflows.filter((function(e){return e>0})).reduce((function(e,t){return e+t}),0)]})).sort((function(e,t){return e[1]-t[1]}))[0])?void 0:B[0],F&&(z=F),n.abrupt("break",33);case 31:return z=s,n.abrupt("break",33);case 33:if(i===z){n.next=35;break}return n.abrupt("return",{reset:{placement:z}});case 35:return n.abrupt("return",{});case 36:case"end":return n.stop()}}),n)})))()}}};function CE(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function PE(e){return q_.some((function(t){return e[t]>=0}))}var IE=function(e){return void 0===e&&(e={}),{name:"hide",options:e,fn:function(t){return b(m().mark((function n(){var r,i,o,a,s,u,l,c,d;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=t.rects,i=nE(e,t),o=i.strategy,a=void 0===o?"referenceHidden":o,s=So(i,mE),n.t0=a,n.next="referenceHidden"===n.t0?5:"escaped"===n.t0?10:15;break;case 5:return n.next=7,kE(t,mt(mt({},s),{},{elementContext:"reference"}));case 7:return u=n.sent,l=CE(u,r.reference),n.abrupt("return",{data:{referenceHiddenOffsets:l,referenceHidden:PE(l)}});case 10:return n.next=12,kE(t,mt(mt({},s),{},{altBoundary:!0}));case 12:return c=n.sent,d=CE(c,r.floating),n.abrupt("return",{data:{escapedOffsets:d,escaped:PE(d)}});case 15:return n.abrupt("return",{});case 16:case"end":return n.stop()}}),n)})))()}}};function jE(e,t){return ME.apply(this,arguments)}function ME(){return ME=b(m().mark((function e(t,n){var r,i,o,a,s,u,l,c,d,f,h,p,v,g;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.placement,i=t.platform,o=t.elements,e.next=3,null==i.isRTL?void 0:i.isRTL(o.floating);case 3:return a=e.sent,s=rE(r),u=iE(r),l="y"===sE(r),c=["left","top"].includes(s)?-1:1,d=a&&l?-1:1,f=nE(n,t),h="number"===typeof f?{mainAxis:f,crossAxis:0,alignmentAxis:null}:mt({mainAxis:0,crossAxis:0,alignmentAxis:null},f),p=h.mainAxis,v=h.crossAxis,g=h.alignmentAxis,u&&"number"===typeof g&&(v="end"===u?-1*g:g),e.abrupt("return",l?{x:v*d,y:p*c}:{x:p*c,y:v*d});case 13:case"end":return e.stop()}}),e)}))),ME.apply(this,arguments)}var AE=function(e){return void 0===e&&(e=0),{name:"offset",options:e,fn:function(t){return b(m().mark((function n(){var r,i,o;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.x,i=t.y,n.next=3,jE(t,e);case 3:return o=n.sent,n.abrupt("return",{x:r+o.x,y:i+o.y,data:o});case 5:case"end":return n.stop()}}),n)})))()}}},TE=function(e){return void 0===e&&(e={}),{name:"shift",options:e,fn:function(t){return b(m().mark((function n(){var r,i,o,a,s,u,l,c,d,f,h,p,v,g,y,b,w,x,k,S,_,E,C,P,I;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.x,o=t.y,a=t.placement,s=nE(e,t),u=s.mainAxis,l=void 0===u||u,c=s.crossAxis,d=void 0!==c&&c,f=s.limiter,h=void 0===f?{fn:function(e){return{x:e.x,y:e.y}}}:f,p=So(s,yE),v={x:i,y:o},n.next=5,kE(t,p);case 5:return g=n.sent,y=sE(rE(a)),b=oE(y),w=v[b],x=v[y],l&&(k="y"===b?"bottom":"right",S=w+g["y"===b?"top":"left"],_=w-g[k],w=tE(S,w,_)),d&&(E="y"===y?"bottom":"right",C=x+g["y"===y?"top":"left"],P=x-g[E],x=tE(C,x,P)),I=h.fn(mt(mt({},t),{},(vt(r={},b,w),vt(r,y,x),r))),n.abrupt("return",mt(mt({},I),{},{data:{x:I.x-i,y:I.y-o}}));case 14:case"end":return n.stop()}}),n)})))()}}},OE=function(e){return void 0===e&&(e={}),{options:e,fn:function(t){var n,r=t.x,i=t.y,o=t.placement,a=t.rects,s=t.middlewareData,u=nE(e,t),l=u.offset,c=void 0===l?0:l,d=u.mainAxis,f=void 0===d||d,h=u.crossAxis,p=void 0===h||h,v={x:r,y:i},g=sE(o),m=oE(g),y=v[m],b=v[g],w=nE(c,t),x="number"===typeof w?{mainAxis:w,crossAxis:0}:mt({mainAxis:0,crossAxis:0},w);if(f){var k="y"===m?"height":"width",S=a.reference[m]-a.floating[k]+x.mainAxis,_=a.reference[m]+a.reference[k]-x.mainAxis;y<S?y=S:y>_&&(y=_)}if(p){var E,C,P="y"===m?"width":"height",I=["top","left"].includes(rE(o)),j=a.reference[g]-a.floating[P]+(I&&(null==(E=s.offset)?void 0:E[g])||0)+(I?0:x.crossAxis),M=a.reference[g]+a.reference[P]+(I?0:(null==(C=s.offset)?void 0:C[g])||0)-(I?x.crossAxis:0);b<j?b=j:b>M&&(b=M)}return vt(n={},m,y),vt(n,g,b),n}}},NE=function(e){return void 0===e&&(e={}),{name:"size",options:e,fn:function(t){return b(m().mark((function n(){var r,i,o,a,s,u,l,c,d,f,h,p,v,g,y,b,w,x,k,S,_,E,C,P,I,j,M,A,T;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.placement,i=t.rects,o=t.platform,a=t.elements,s=nE(e,t),u=s.apply,l=void 0===u?function(){}:u,c=So(s,bE),n.next=4,kE(t,c);case 4:if(d=n.sent,f=rE(r),h=iE(r),p="y"===sE(r),v=i.floating,g=v.width,y=v.height,"top"!==f&&"bottom"!==f){n.next=28;break}return b=f,n.t0=h,n.next=14,null==o.isRTL?void 0:o.isRTL(a.floating);case 14:if(!n.sent){n.next=18;break}n.t1="start",n.next=19;break;case 18:n.t1="end";case 19:if(n.t2=n.t1,n.t0!==n.t2){n.next=24;break}n.t3="left",n.next=25;break;case 24:n.t3="right";case 25:w=n.t3,n.next=30;break;case 28:w=f,b="end"===h?"top":"bottom";case 30:return x=y-d[b],k=g-d[w],S=!t.middlewareData.shift,_=x,E=k,p?(C=g-d.left-d.right,E=h||S?X_(k,C):C):(P=y-d.top-d.bottom,_=h||S?X_(x,P):P),S&&!h&&(I=$_(d.left,0),j=$_(d.right,0),M=$_(d.top,0),A=$_(d.bottom,0),p?E=g-2*(0!==I||0!==j?I+j:$_(d.left,d.right)):_=y-2*(0!==M||0!==A?M+A:$_(d.top,d.bottom))),n.next=39,l(mt(mt({},t),{},{availableWidth:E,availableHeight:_}));case 39:return n.next=41,o.getDimensions(a.floating);case 41:if(T=n.sent,g===T.width&&y===T.height){n.next=44;break}return n.abrupt("return",{reset:{rects:!0}});case 44:return n.abrupt("return",{});case 45:case"end":return n.stop()}}),n)})))()}}};function RE(e){return zE(e)?(e.nodeName||"").toLowerCase():"#document"}function LE(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function DE(e){var t;return null==(t=(zE(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function zE(e){return e instanceof Node||e instanceof LE(e).Node}function BE(e){return e instanceof Element||e instanceof LE(e).Element}function FE(e){return e instanceof HTMLElement||e instanceof LE(e).HTMLElement}function UE(e){return"undefined"!==typeof ShadowRoot&&(e instanceof ShadowRoot||e instanceof LE(e).ShadowRoot)}function KE(e){var t=qE(e),n=t.overflow,r=t.overflowX,i=t.overflowY,o=t.display;return/auto|scroll|overlay|hidden|clip/.test(n+i+r)&&!["inline","contents"].includes(o)}function VE(e){return["table","td","th"].includes(RE(e))}function WE(e){var t=HE(),n=qE(e);return"none"!==n.transform||"none"!==n.perspective||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||["transform","perspective","filter"].some((function(e){return(n.willChange||"").includes(e)}))||["paint","layout","strict","content"].some((function(e){return(n.contain||"").includes(e)}))}function HE(){return!("undefined"===typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function YE(e){return["html","body","#document"].includes(RE(e))}function qE(e){return LE(e).getComputedStyle(e)}function XE(e){return BE(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function $E(e){if("html"===RE(e))return e;var t=e.assignedSlot||e.parentNode||UE(e)&&e.host||DE(e);return UE(t)?t.host:t}function GE(e){var t=$E(e);return YE(t)?e.ownerDocument?e.ownerDocument.body:e.body:FE(t)&&KE(t)?t:GE(t)}function QE(e,t){var n;void 0===t&&(t=[]);var r=GE(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),o=LE(r);return i?t.concat(o,o.visualViewport||[],KE(r)?r:[]):t.concat(r,QE(r))}function JE(e){var t=qE(e),n=parseFloat(t.width)||0,r=parseFloat(t.height)||0,i=FE(e),o=i?e.offsetWidth:n,a=i?e.offsetHeight:r,s=G_(n)!==o||G_(r)!==a;return s&&(n=o,r=a),{width:n,height:r,$:s}}function ZE(e){return BE(e)?e:e.contextElement}function eC(e){var t=ZE(e);if(!FE(t))return J_(1);var n=t.getBoundingClientRect(),r=JE(t),i=r.width,o=r.height,a=r.$,s=(a?G_(n.width):n.width)/i,u=(a?G_(n.height):n.height)/o;return s&&Number.isFinite(s)||(s=1),u&&Number.isFinite(u)||(u=1),{x:s,y:u}}var tC=J_(0);function nC(e){var t=LE(e);return HE()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:tC}function rC(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1);var i=e.getBoundingClientRect(),o=ZE(e),a=J_(1);t&&(r?BE(r)&&(a=eC(r)):a=eC(e));var s=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==LE(e))&&t}(o,n,r)?nC(o):J_(0),u=(i.left+s.x)/a.x,l=(i.top+s.y)/a.y,c=i.width/a.x,d=i.height/a.y;if(o)for(var f=LE(o),h=r&&BE(r)?LE(r):r,p=f.frameElement;p&&r&&h!==f;){var v=eC(p),g=p.getBoundingClientRect(),m=qE(p),y=g.left+(p.clientLeft+parseFloat(m.paddingLeft))*v.x,b=g.top+(p.clientTop+parseFloat(m.paddingTop))*v.y;u*=v.x,l*=v.y,c*=v.x,d*=v.y,u+=y,l+=b,p=LE(p).frameElement}return vE({width:c,height:d,x:u,y:l})}function iC(e){return rC(DE(e)).left+XE(e).scrollLeft}function oC(e,t,n){var r;if("viewport"===t)r=function(e,t){var n=LE(e),r=DE(e),i=n.visualViewport,o=r.clientWidth,a=r.clientHeight,s=0,u=0;if(i){o=i.width,a=i.height;var l=HE();(!l||l&&"fixed"===t)&&(s=i.offsetLeft,u=i.offsetTop)}return{width:o,height:a,x:s,y:u}}(e,n);else if("document"===t)r=function(e){var t=DE(e),n=XE(e),r=e.ownerDocument.body,i=$_(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=$_(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight),a=-n.scrollLeft+iC(e),s=-n.scrollTop;return"rtl"===qE(r).direction&&(a+=$_(t.clientWidth,r.clientWidth)-i),{width:i,height:o,x:a,y:s}}(DE(e));else if(BE(t))r=function(e,t){var n=rC(e,!0,"fixed"===t),r=n.top+e.clientTop,i=n.left+e.clientLeft,o=FE(e)?eC(e):J_(1);return{width:e.clientWidth*o.x,height:e.clientHeight*o.y,x:i*o.x,y:r*o.y}}(t,n);else{var i=nC(e);r=mt(mt({},t),{},{x:t.x-i.x,y:t.y-i.y})}return vE(r)}function aC(e,t){var n=$E(e);return!(n===t||!BE(n)||YE(n))&&("fixed"===qE(n).position||aC(n,t))}function sC(e,t,n){var r=FE(t),i=DE(t),o="fixed"===n,a=rC(e,!0,o,t),s={scrollLeft:0,scrollTop:0},u=J_(0);if(r||!r&&!o)if(("body"!==RE(t)||KE(i))&&(s=XE(t)),r){var l=rC(t,!0,o,t);u.x=l.x+t.clientLeft,u.y=l.y+t.clientTop}else i&&(u.x=iC(i));return{x:a.left+s.scrollLeft-u.x,y:a.top+s.scrollTop-u.y,width:a.width,height:a.height}}function uC(e,t){return FE(e)&&"fixed"!==qE(e).position?t?t(e):e.offsetParent:null}function lC(e,t){var n=LE(e);if(!FE(e))return n;for(var r=uC(e,t);r&&VE(r)&&"static"===qE(r).position;)r=uC(r,t);return r&&("html"===RE(r)||"body"===RE(r)&&"static"===qE(r).position&&!WE(r))?n:r||function(e){for(var t=$E(e);FE(t)&&!YE(t);){if(WE(t))return t;t=$E(t)}return null}(e)||n}var cC=function(){var e=b(m().mark((function e(t){var n,r,i,o,a;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.reference,r=t.floating,i=t.strategy,o=this.getOffsetParent||lC,a=this.getDimensions,e.t0=sC,e.t1=n,e.next=7,o(r);case 7:return e.t2=e.sent,e.t3=i,e.t4=(0,e.t0)(e.t1,e.t2,e.t3),e.t5=mt,e.t6={x:0,y:0},e.next=14,a(r);case 14:return e.t7=e.sent,e.t8=(0,e.t5)(e.t6,e.t7),e.abrupt("return",{reference:e.t4,floating:e.t8});case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();var dC={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){var t=e.rect,n=e.offsetParent,r=e.strategy,i=FE(n),o=DE(n);if(n===o)return t;var a={scrollLeft:0,scrollTop:0},s=J_(1),u=J_(0);if((i||!i&&"fixed"!==r)&&(("body"!==RE(n)||KE(o))&&(a=XE(n)),FE(n))){var l=rC(n);s=eC(n),u.x=l.x+n.clientLeft,u.y=l.y+n.clientTop}return{width:t.width*s.x,height:t.height*s.y,x:t.x*s.x-a.scrollLeft*s.x+u.x,y:t.y*s.y-a.scrollTop*s.y+u.y}},getDocumentElement:DE,getClippingRect:function(e){var t=e.element,n=e.boundary,r=e.rootBoundary,i=e.strategy,o="clippingAncestors"===n?function(e,t){var n=t.get(e);if(n)return n;for(var r=QE(e).filter((function(e){return BE(e)&&"body"!==RE(e)})),i=null,o="fixed"===qE(e).position,a=o?$E(e):e;BE(a)&&!YE(a);){var s=qE(a),u=WE(a);u||"fixed"!==s.position||(i=null),(o?!u&&!i:!u&&"static"===s.position&&i&&["absolute","fixed"].includes(i.position)||KE(a)&&!u&&aC(e,a))?r=r.filter((function(e){return e!==a})):i=s,a=$E(a)}return t.set(e,r),r}(t,this._c):[].concat(n),a=[].concat(d(o),[r]),s=a[0],u=a.reduce((function(e,n){var r=oC(t,n,i);return e.top=$_(r.top,e.top),e.right=X_(r.right,e.right),e.bottom=X_(r.bottom,e.bottom),e.left=$_(r.left,e.left),e}),oC(t,s,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}},getOffsetParent:lC,getElementRects:cC,getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){return JE(e)},getScale:eC,isElement:BE,isRTL:function(e){return"rtl"===qE(e).direction}};function fC(e,t,n,r){void 0===r&&(r={});var i=r,o=i.ancestorScroll,a=void 0===o||o,s=i.ancestorResize,u=void 0===s||s,c=i.elementResize,f=void 0===c?"function"===typeof ResizeObserver:c,h=i.layoutShift,p=void 0===h?"function"===typeof IntersectionObserver:h,v=i.animationFrame,g=void 0!==v&&v,m=ZE(e),y=a||u?[].concat(d(m?QE(m):[]),d(QE(t))):[];y.forEach((function(e){a&&e.addEventListener("scroll",n,{passive:!0}),u&&e.addEventListener("resize",n)}));var b,w=m&&p?function(e,t){var n,r=null,i=DE(e);function o(){clearTimeout(n),r&&r.disconnect(),r=null}return function a(s,u){void 0===s&&(s=!1),void 0===u&&(u=1),o();var l=e.getBoundingClientRect(),c=l.left,d=l.top,f=l.width,h=l.height;if(s||t(),f&&h){var p={rootMargin:-Q_(d)+"px "+-Q_(i.clientWidth-(c+f))+"px "+-Q_(i.clientHeight-(d+h))+"px "+-Q_(c)+"px",threshold:$_(0,X_(1,u))||1},v=!0;try{r=new IntersectionObserver(g,mt(mt({},p),{},{root:i.ownerDocument}))}catch(VO){r=new IntersectionObserver(g,p)}r.observe(e)}function g(e){var t=e[0].intersectionRatio;if(t!==u){if(!v)return a();t?a(!1,t):n=setTimeout((function(){a(!1,1e-7)}),100)}v=!1}}(!0),o}(m,n):null,x=-1,k=null;f&&(k=new ResizeObserver((function(e){var r=l(e,1)[0];r&&r.target===m&&k&&(k.unobserve(t),cancelAnimationFrame(x),x=requestAnimationFrame((function(){k&&k.observe(t)}))),n()})),m&&!g&&k.observe(m),k.observe(t));var S=g?rC(e):null;return g&&function t(){var r=rC(e);!S||r.x===S.x&&r.y===S.y&&r.width===S.width&&r.height===S.height||n();S=r,b=requestAnimationFrame(t)}(),n(),function(){y.forEach((function(e){a&&e.removeEventListener("scroll",n),u&&e.removeEventListener("resize",n)})),w&&w(),k&&k.disconnect(),k=null,g&&cancelAnimationFrame(b)}}var hC=function(e,t,n){var r=new Map,i=mt({platform:dC},n),o=mt(mt({},i.platform),{},{_c:r});return xE(e,t,mt(mt({},i),{},{platform:o}))},pC=function(e){return{name:"arrow",options:e,fn:function(t){var n="function"===typeof e?e(t):e,r=n.element,i=n.padding;return r&&function(e){return{}.hasOwnProperty.call(e,"current")}(r)?null!=r.current?_E({element:r.current,padding:i}).fn(t):{}:r?_E({element:r,padding:i}).fn(t):{}}}},vC="undefined"!==typeof document?t.useLayoutEffect:t.useEffect;function gC(e,t){if(e===t)return!0;if(typeof e!==typeof t)return!1;if("function"===typeof e&&e.toString()===t.toString())return!0;var n,r,i;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if((n=e.length)!=t.length)return!1;for(r=n;0!==r--;)if(!gC(e[r],t[r]))return!1;return!0}if((n=(i=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(r=n;0!==r--;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;0!==r--;){var o=i[r];if(("_owner"!==o||!e.$$typeof)&&!gC(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function mC(e){return"undefined"===typeof window?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function yC(e,t){var n=mC(e);return Math.round(t*n)/n}function bC(e){var n=t.useRef(e);return vC((function(){n.current=e})),n}function wC(e){var n=l((0,t.useState)(void 0),2),r=n[0],i=n[1];return Xx((function(){if(e){i({width:e.offsetWidth,height:e.offsetHeight});var t=new ResizeObserver((function(t){if(Array.isArray(t)&&t.length){var n,r,o=t[0];if("borderBoxSize"in o){var a=o.borderBoxSize,s=Array.isArray(a)?a[0]:a;n=s.inlineSize,r=s.blockSize}else n=e.offsetWidth,r=e.offsetHeight;i({width:n,height:r})}}));return t.observe(e,{box:"border-box"}),function(){return t.unobserve(e)}}i(void 0)}),[e]),r}var xC=["__scopePopper","virtualRef"],kC=["__scopePopper","side","sideOffset","align","alignOffset","arrowPadding","collisionBoundary","collisionPadding","sticky","hideWhenDetached","avoidCollisions","onPlaced"],SC="Popper",_C=l(Yx(SC),2),EC=_C[0],CC=_C[1],PC=l(EC(SC),2),IC=PC[0],jC=PC[1],MC=function(e){var n=e.__scopePopper,r=e.children,i=l((0,t.useState)(null),2),o=i[0],a=i[1];return(0,t.createElement)(IC,{scope:n,anchor:o,onAnchorChange:a},r)},AC="PopperAnchor",TC=(0,t.forwardRef)((function(e,n){var r=e.__scopePopper,i=e.virtualRef,o=So(e,xC),a=jC(AC,r),s=(0,t.useRef)(null),u=Vx(n,s);return(0,t.useEffect)((function(){a.onAnchorChange((null===i||void 0===i?void 0:i.current)||s.current)})),i?null:(0,t.createElement)(uk.div,Fx({},o,{ref:u}))})),OC="PopperContent",NC=l(EC(OC),2),RC=NC[0],LC=(NC[1],(0,t.forwardRef)((function(e,n){var r,i,o,a,s,u,c,d,f=e.__scopePopper,h=e.side,p=void 0===h?"bottom":h,v=e.sideOffset,g=void 0===v?0:v,m=e.align,y=void 0===m?"center":m,b=e.alignOffset,w=void 0===b?0:b,x=e.arrowPadding,k=void 0===x?0:x,S=e.collisionBoundary,_=void 0===S?[]:S,E=e.collisionPadding,C=void 0===E?0:E,P=e.sticky,I=void 0===P?"partial":P,j=e.hideWhenDetached,M=void 0!==j&&j,A=e.avoidCollisions,T=void 0===A||A,O=e.onPlaced,N=So(e,kC),R=jC(OC,f),L=l((0,t.useState)(null),2),D=L[0],z=L[1],B=Vx(n,(function(e){return z(e)})),F=l((0,t.useState)(null),2),U=F[0],K=F[1],V=wC(U),W=null!==(r=null===V||void 0===V?void 0:V.width)&&void 0!==r?r:0,H=null!==(i=null===V||void 0===V?void 0:V.height)&&void 0!==i?i:0,Y=p+("center"!==y?"-"+y:""),q="number"===typeof C?C:mt({top:0,right:0,bottom:0,left:0},C),X=Array.isArray(_)?_:[_],$=X.length>0,G={padding:q,boundary:X.filter(DC),altBoundary:$},Q=function(e){void 0===e&&(e={});var n=e,r=n.placement,i=void 0===r?"bottom":r,o=n.strategy,a=void 0===o?"absolute":o,s=n.middleware,u=void 0===s?[]:s,c=n.platform,d=n.elements,f=void 0===d?{}:d,h=f.reference,p=f.floating,v=n.transform,g=void 0===v||v,m=n.whileElementsMounted,y=n.open,b=l(t.useState({x:0,y:0,strategy:a,placement:i,middlewareData:{},isPositioned:!1}),2),w=b[0],x=b[1],k=l(t.useState(u),2),S=k[0],_=k[1];gC(S,u)||_(u);var E=l(t.useState(null),2),C=E[0],P=E[1],I=l(t.useState(null),2),j=I[0],M=I[1],A=t.useCallback((function(e){e!=R.current&&(R.current=e,P(e))}),[P]),T=t.useCallback((function(e){e!==L.current&&(L.current=e,M(e))}),[M]),O=h||C,N=p||j,R=t.useRef(null),L=t.useRef(null),D=t.useRef(w),z=bC(m),B=bC(c),F=t.useCallback((function(){if(R.current&&L.current){var e={placement:i,strategy:a,middleware:S};B.current&&(e.platform=B.current),hC(R.current,L.current,e).then((function(e){var t=mt(mt({},e),{},{isPositioned:!0});U.current&&!gC(D.current,t)&&(D.current=t,ek.flushSync((function(){x(t)})))}))}}),[S,i,a,B]);vC((function(){!1===y&&D.current.isPositioned&&(D.current.isPositioned=!1,x((function(e){return mt(mt({},e),{},{isPositioned:!1})})))}),[y]);var U=t.useRef(!1);vC((function(){return U.current=!0,function(){U.current=!1}}),[]),vC((function(){if(O&&(R.current=O),N&&(L.current=N),O&&N){if(z.current)return z.current(O,N,F);F()}}),[O,N,F,z]);var K=t.useMemo((function(){return{reference:R,floating:L,setReference:A,setFloating:T}}),[A,T]),V=t.useMemo((function(){return{reference:O,floating:N}}),[O,N]),W=t.useMemo((function(){var e={position:a,left:0,top:0};if(!V.floating)return e;var t=yC(V.floating,w.x),n=yC(V.floating,w.y);return g?mt(mt({},e),{},{transform:"translate("+t+"px, "+n+"px)"},mC(V.floating)>=1.5&&{willChange:"transform"}):{position:a,left:t,top:n}}),[a,g,V.floating,w.x,w.y]);return t.useMemo((function(){return mt(mt({},w),{},{update:F,refs:K,elements:V,floatingStyles:W})}),[w,F,K,V,W])}({strategy:"fixed",placement:Y,whileElementsMounted:fC,elements:{reference:R.anchor},middleware:[AE({mainAxis:g+H,alignmentAxis:w}),T&&TE(mt({mainAxis:!0,crossAxis:!1,limiter:"partial"===I?OE():void 0},G)),T&&EE(mt({},G)),NE(mt(mt({},G),{},{apply:function(e){var t=e.elements,n=e.rects,r=e.availableWidth,i=e.availableHeight,o=n.reference,a=o.width,s=o.height,u=t.floating.style;u.setProperty("--radix-popper-available-width","".concat(r,"px")),u.setProperty("--radix-popper-available-height","".concat(i,"px")),u.setProperty("--radix-popper-anchor-width","".concat(a,"px")),u.setProperty("--radix-popper-anchor-height","".concat(s,"px"))}})),U&&pC({element:U,padding:k}),zC({arrowWidth:W,arrowHeight:H}),M&&IE({strategy:"referenceHidden"})]}),J=Q.refs,Z=Q.floatingStyles,ee=Q.placement,te=Q.isPositioned,ne=Q.middlewareData,re=l(BC(ee),2),ie=re[0],oe=re[1],ae=Jx(O);Xx((function(){te&&(null===ae||void 0===ae||ae())}),[te,ae]);var se=null===(o=ne.arrow)||void 0===o?void 0:o.x,ue=null===(a=ne.arrow)||void 0===a?void 0:a.y,le=0!==(null===(s=ne.arrow)||void 0===s?void 0:s.centerOffset),ce=l((0,t.useState)(),2),de=ce[0],fe=ce[1];return Xx((function(){D&&fe(window.getComputedStyle(D).zIndex)}),[D]),(0,t.createElement)("div",{ref:J.setFloating,"data-radix-popper-content-wrapper":"",style:mt(mt({},Z),{},vt({transform:te?Z.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:de},"--radix-popper-transform-origin",[null===(u=ne.transformOrigin)||void 0===u?void 0:u.x,null===(c=ne.transformOrigin)||void 0===c?void 0:c.y].join(" "))),dir:e.dir},(0,t.createElement)(RC,{scope:f,placedSide:ie,onArrowChange:K,arrowX:se,arrowY:ue,shouldHideArrow:le},(0,t.createElement)(uk.div,Fx({"data-side":ie,"data-align":oe},N,{ref:B,style:mt(mt({},N.style),{},{animation:te?void 0:"none",opacity:null!==(d=ne.hide)&&void 0!==d&&d.referenceHidden?0:void 0})}))))})));function DC(e){return null!==e}var zC=function(e){return{name:"transformOrigin",options:e,fn:function(t){var n,r,i,o,a,s=t.placement,u=t.rects,c=t.middlewareData,d=0!==(null===(n=c.arrow)||void 0===n?void 0:n.centerOffset),f=d?0:e.arrowWidth,h=d?0:e.arrowHeight,p=l(BC(s),2),v=p[0],g={start:"0%",center:"50%",end:"100%"}[p[1]],m=(null!==(r=null===(i=c.arrow)||void 0===i?void 0:i.x)&&void 0!==r?r:0)+f/2,y=(null!==(o=null===(a=c.arrow)||void 0===a?void 0:a.y)&&void 0!==o?o:0)+h/2,b="",w="";return"bottom"===v?(b=d?g:"".concat(m,"px"),w="".concat(-h,"px")):"top"===v?(b=d?g:"".concat(m,"px"),w="".concat(u.floating.height+h,"px")):"right"===v?(b="".concat(-h,"px"),w=d?g:"".concat(y,"px")):"left"===v&&(b="".concat(u.floating.width+h,"px"),w=d?g:"".concat(y,"px")),{data:{x:b,y:w}}}}};function BC(e){var t=l(e.split("-"),2),n=t[0],r=t[1];return[n,void 0===r?"center":r]}var FC=MC,UC=TC,KC=LC,VC=["__scopeRovingFocusGroup","orientation","loop","dir","currentTabStopId","defaultCurrentTabStopId","onCurrentTabStopIdChange","onEntryFocus"],WC=["__scopeRovingFocusGroup","focusable","active","tabStopId"],HC="rovingFocusGroup.onEntryFocus",YC={bubbles:!1,cancelable:!0},qC="RovingFocusGroup",XC=l(W_(qC),3),$C=XC[0],GC=XC[1],QC=l(Yx(qC,[XC[2]]),2),JC=QC[0],ZC=QC[1],eP=l(JC(qC),2),tP=eP[0],nP=eP[1],rP=(0,t.forwardRef)((function(e,n){return(0,t.createElement)($C.Provider,{scope:e.__scopeRovingFocusGroup},(0,t.createElement)($C.Slot,{scope:e.__scopeRovingFocusGroup},(0,t.createElement)(iP,Fx({},e,{ref:n}))))})),iP=(0,t.forwardRef)((function(e,n){var r=e.__scopeRovingFocusGroup,i=e.orientation,o=e.loop,a=void 0!==o&&o,s=e.dir,u=e.currentTabStopId,c=e.defaultCurrentTabStopId,f=e.onCurrentTabStopIdChange,h=e.onEntryFocus,p=So(e,VC),v=(0,t.useRef)(null),g=Vx(n,v),m=Y_(s),y=l(Zx({prop:u,defaultProp:c,onChange:f}),2),b=y[0],w=void 0===b?null:b,x=y[1],k=l((0,t.useState)(!1),2),S=k[0],_=k[1],E=Jx(h),C=GC(r),P=(0,t.useRef)(!1),I=l((0,t.useState)(0),2),j=I[0],M=I[1];return(0,t.useEffect)((function(){var e=v.current;if(e)return e.addEventListener(HC,E),function(){return e.removeEventListener(HC,E)}}),[E]),(0,t.createElement)(tP,{scope:r,orientation:i,dir:m,loop:a,currentTabStopId:w,onItemFocus:(0,t.useCallback)((function(e){return x(e)}),[x]),onItemShiftTab:(0,t.useCallback)((function(){return _(!0)}),[]),onFocusableItemAdd:(0,t.useCallback)((function(){return M((function(e){return e+1}))}),[]),onFocusableItemRemove:(0,t.useCallback)((function(){return M((function(e){return e-1}))}),[])},(0,t.createElement)(uk.div,Fx({tabIndex:S||0===j?-1:0,"data-orientation":i},p,{ref:g,style:mt({outline:"none"},e.style),onMouseDown:Ux(e.onMouseDown,(function(){P.current=!0})),onFocus:Ux(e.onFocus,(function(e){var t=!P.current;if(e.target===e.currentTarget&&t&&!S){var n=new CustomEvent(HC,YC);if(e.currentTarget.dispatchEvent(n),!n.defaultPrevented){var r=C().filter((function(e){return e.focusable}));uP([r.find((function(e){return e.active})),r.find((function(e){return e.id===w}))].concat(d(r)).filter(Boolean).map((function(e){return e.ref.current})))}}P.current=!1})),onBlur:Ux(e.onBlur,(function(){return _(!1)}))})))})),oP="RovingFocusGroupItem",aP=(0,t.forwardRef)((function(e,n){var r=e.__scopeRovingFocusGroup,i=e.focusable,o=void 0===i||i,a=e.active,s=void 0!==a&&a,u=e.tabStopId,l=So(e,WC),c=Qx(),d=u||c,f=nP(oP,r),h=f.currentTabStopId===d,p=GC(r),v=f.onFocusableItemAdd,g=f.onFocusableItemRemove;return(0,t.useEffect)((function(){if(o)return v(),function(){return g()}}),[o,v,g]),(0,t.createElement)($C.ItemSlot,{scope:r,id:d,focusable:o,active:s},(0,t.createElement)(uk.span,Fx({tabIndex:h?0:-1,"data-orientation":f.orientation},l,{ref:n,onMouseDown:Ux(e.onMouseDown,(function(e){o?f.onItemFocus(d):e.preventDefault()})),onFocus:Ux(e.onFocus,(function(){return f.onItemFocus(d)})),onKeyDown:Ux(e.onKeyDown,(function(e){if("Tab"===e.key&&e.shiftKey)f.onItemShiftTab();else if(e.target===e.currentTarget){var t=function(e,t,n){var r=function(e,t){return"rtl"!==t?e:"ArrowLeft"===e?"ArrowRight":"ArrowRight"===e?"ArrowLeft":e}(e.key,n);return"vertical"===t&&["ArrowLeft","ArrowRight"].includes(r)||"horizontal"===t&&["ArrowUp","ArrowDown"].includes(r)?void 0:sP[r]}(e,f.orientation,f.dir);if(void 0!==t){e.preventDefault();var n=p().filter((function(e){return e.focusable})).map((function(e){return e.ref.current}));if("last"===t)n.reverse();else if("prev"===t||"next"===t){"prev"===t&&n.reverse();var r=n.indexOf(e.currentTarget);n=f.loop?function(e,t){return e.map((function(n,r){return e[(t+r)%e.length]}))}(n,r+1):n.slice(r+1)}setTimeout((function(){return uP(n)}))}}}))})))})),sP={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function uP(e){var t,n=document.activeElement,r=w(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(i===n)return;if(i.focus(),document.activeElement!==n)return}}catch(NG){r.e(NG)}finally{r.f()}}var lP=rP,cP=aP,dP=["__scopeMenu"],fP=["forceMount"],hP=["__scopeMenu","loop","trapFocus","onOpenAutoFocus","onCloseAutoFocus","disableOutsidePointerEvents","onEntryFocus","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss","disableOutsideScroll"],pP=["__scopeMenu"],vP=["disabled","onSelect"],gP=["__scopeMenu","disabled","textValue"],mP=["checked","onCheckedChange"],yP=["__scopeMenu","forceMount"],bP=["forceMount"],wP=["Enter"," "],xP=["ArrowUp","PageDown","End"],kP=[].concat(["ArrowDown","PageUp","Home"],xP),SP={ltr:[].concat(wP,["ArrowRight"]),rtl:[].concat(wP,["ArrowLeft"])},_P={ltr:["ArrowLeft"],rtl:["ArrowRight"]},EP="Menu",CP=l(W_(EP),3),PP=CP[0],IP=CP[1],jP=l(Yx(EP,[CP[2],CC,ZC]),2),MP=jP[0],AP=jP[1],TP=CC(),OP=ZC(),NP=l(MP(EP),2),RP=NP[0],LP=NP[1],DP=l(MP(EP),2),zP=DP[0],BP=DP[1],FP=function(e){var n=e.__scopeMenu,r=e.open,i=void 0!==r&&r,o=e.children,a=e.dir,s=e.onOpenChange,u=e.modal,c=void 0===u||u,d=TP(n),f=l((0,t.useState)(null),2),h=f[0],p=f[1],v=(0,t.useRef)(!1),g=Jx(s),m=Y_(a);return(0,t.useEffect)((function(){var e=function(){v.current=!0,document.addEventListener("pointerdown",t,{capture:!0,once:!0}),document.addEventListener("pointermove",t,{capture:!0,once:!0})},t=function(){return v.current=!1};return document.addEventListener("keydown",e,{capture:!0}),function(){document.removeEventListener("keydown",e,{capture:!0}),document.removeEventListener("pointerdown",t,{capture:!0}),document.removeEventListener("pointermove",t,{capture:!0})}}),[]),(0,t.createElement)(FC,d,(0,t.createElement)(RP,{scope:n,open:i,onOpenChange:g,content:h,onContentChange:p},(0,t.createElement)(zP,{scope:n,onClose:(0,t.useCallback)((function(){return g(!1)}),[g]),isUsingKeyboardRef:v,dir:m,modal:c},o)))},UP=(0,t.forwardRef)((function(e,n){var r=e.__scopeMenu,i=So(e,dP),o=TP(r);return(0,t.createElement)(UC,Fx({},o,i,{ref:n}))})),KP="MenuPortal",VP=l(MP(KP,{forceMount:void 0}),2),WP=VP[0],HP=VP[1],YP=function(e){var n=e.__scopeMenu,r=e.forceMount,i=e.children,o=e.container,a=LP(KP,n);return(0,t.createElement)(WP,{scope:n,forceMount:r},(0,t.createElement)(Rk,{present:r||a.open},(0,t.createElement)(Nk,{asChild:!0,container:o},i)))},qP="MenuContent",XP=l(MP(qP),2),$P=XP[0],GP=XP[1],QP=(0,t.forwardRef)((function(e,n){var r=HP(qP,e.__scopeMenu),i=e.forceMount,o=void 0===i?r.forceMount:i,a=So(e,fP),s=LP(qP,e.__scopeMenu),u=BP(qP,e.__scopeMenu);return(0,t.createElement)(PP.Provider,{scope:e.__scopeMenu},(0,t.createElement)(Rk,{present:o||s.open},(0,t.createElement)(PP.Slot,{scope:e.__scopeMenu},u.modal?(0,t.createElement)(JP,Fx({},a,{ref:n})):(0,t.createElement)(ZP,Fx({},a,{ref:n})))))})),JP=(0,t.forwardRef)((function(e,n){var r=LP(qP,e.__scopeMenu),i=(0,t.useRef)(null),o=Vx(n,i);return(0,t.useEffect)((function(){var e=i.current;if(e)return TS(e)}),[]),(0,t.createElement)(eI,Fx({},e,{ref:o,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:Ux(e.onFocusOutside,(function(e){return e.preventDefault()}),{checkForDefaultPrevented:!1}),onDismiss:function(){return r.onOpenChange(!1)}}))})),ZP=(0,t.forwardRef)((function(e,n){var r=LP(qP,e.__scopeMenu);return(0,t.createElement)(eI,Fx({},e,{ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:function(){return r.onOpenChange(!1)}}))})),eI=(0,t.forwardRef)((function(e,n){var r=e.__scopeMenu,i=e.loop,o=void 0!==i&&i,a=e.trapFocus,s=e.onOpenAutoFocus,u=e.onCloseAutoFocus,c=e.disableOutsidePointerEvents,d=e.onEntryFocus,f=e.onEscapeKeyDown,h=e.onPointerDownOutside,p=e.onFocusOutside,v=e.onInteractOutside,g=e.onDismiss,m=e.disableOutsideScroll,y=So(e,hP),b=LP(qP,r),x=BP(qP,r),k=TP(r),S=OP(r),_=IP(r),E=l((0,t.useState)(null),2),C=E[0],P=E[1],I=(0,t.useRef)(null),j=Vx(n,I,b.onContentChange),M=(0,t.useRef)(0),A=(0,t.useRef)(""),T=(0,t.useRef)(0),O=(0,t.useRef)(null),N=(0,t.useRef)("right"),R=(0,t.useRef)(0),L=m?_S:t.Fragment,D=m?{as:rk,allowPinchZoom:!0}:void 0,z=function(e){var t,n,r=A.current+e,i=_().filter((function(e){return!e.disabled})),o=document.activeElement,a=null===(t=i.find((function(e){return e.ref.current===o})))||void 0===t?void 0:t.textValue,s=function(e,t,n){var r=t.length>1&&Array.from(t).every((function(e){return e===t[0]})),i=r?t[0]:t,o=n?e.indexOf(n):-1,a=function(e,t){return e.map((function(n,r){return e[(t+r)%e.length]}))}(e,Math.max(o,0));1===i.length&&(a=a.filter((function(e){return e!==n})));var s=a.find((function(e){return e.toLowerCase().startsWith(i.toLowerCase())}));return s!==n?s:void 0}(i.map((function(e){return e.textValue})),r,a),u=null===(n=i.find((function(e){return e.textValue===s})))||void 0===n?void 0:n.ref.current;!function e(t){A.current=t,window.clearTimeout(M.current),""!==t&&(M.current=window.setTimeout((function(){return e("")}),1e3))}(r),u&&setTimeout((function(){return u.focus()}))};(0,t.useEffect)((function(){return function(){return window.clearTimeout(M.current)}}),[]),zk();var B=(0,t.useCallback)((function(e){var t,n;return N.current===(null===(t=O.current)||void 0===t?void 0:t.side)&&function(e,t){if(!t)return!1;var n={x:e.clientX,y:e.clientY};return function(e,t){for(var n=e.x,r=e.y,i=!1,o=0,a=t.length-1;o<t.length;a=o++){var s=t[o].x,u=t[o].y,l=t[a].x,c=t[a].y;u>r!==c>r&&n<(l-s)*(r-u)/(c-u)+s&&(i=!i)}return i}(n,t)}(e,null===(n=O.current)||void 0===n?void 0:n.area)}),[]);return(0,t.createElement)($P,{scope:r,searchRef:A,onItemEnter:(0,t.useCallback)((function(e){B(e)&&e.preventDefault()}),[B]),onItemLeave:(0,t.useCallback)((function(e){var t;B(e)||(null===(t=I.current)||void 0===t||t.focus(),P(null))}),[B]),onTriggerLeave:(0,t.useCallback)((function(e){B(e)&&e.preventDefault()}),[B]),pointerGraceTimerRef:T,onPointerGraceIntentChange:(0,t.useCallback)((function(e){O.current=e}),[])},(0,t.createElement)(L,D,(0,t.createElement)(Ck,{asChild:!0,trapped:a,onMountAutoFocus:Ux(s,(function(e){var t;e.preventDefault(),null===(t=I.current)||void 0===t||t.focus()})),onUnmountAutoFocus:u},(0,t.createElement)(gk,{asChild:!0,disableOutsidePointerEvents:c,onEscapeKeyDown:f,onPointerDownOutside:h,onFocusOutside:p,onInteractOutside:v,onDismiss:g},(0,t.createElement)(lP,Fx({asChild:!0},S,{dir:x.dir,orientation:"vertical",loop:o,currentTabStopId:C,onCurrentTabStopIdChange:P,onEntryFocus:Ux(d,(function(e){x.isUsingKeyboardRef.current||e.preventDefault()}))}),(0,t.createElement)(KC,Fx({role:"menu","aria-orientation":"vertical","data-state":SI(b.open),"data-radix-menu-content":"",dir:x.dir},k,y,{ref:j,style:mt({outline:"none"},y.style),onKeyDown:Ux(y.onKeyDown,(function(e){var t=e.target.closest("[data-radix-menu-content]")===e.currentTarget,n=e.ctrlKey||e.altKey||e.metaKey,r=1===e.key.length;t&&("Tab"===e.key&&e.preventDefault(),!n&&r&&z(e.key));var i=I.current;if(e.target===i&&kP.includes(e.key)){e.preventDefault();var o=_().filter((function(e){return!e.disabled})).map((function(e){return e.ref.current}));xP.includes(e.key)&&o.reverse(),function(e){var t,n=document.activeElement,r=w(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(i===n)return;if(i.focus(),document.activeElement!==n)return}}catch(NG){r.e(NG)}finally{r.f()}}(o)}})),onBlur:Ux(e.onBlur,(function(e){e.currentTarget.contains(e.target)||(window.clearTimeout(M.current),A.current="")})),onPointerMove:Ux(e.onPointerMove,CI((function(e){var t=e.target,n=R.current!==e.clientX;if(e.currentTarget.contains(t)&&n){var r=e.clientX>R.current?"right":"left";N.current=r,R.current=e.clientX}})))})))))))})),tI=(0,t.forwardRef)((function(e,n){e.__scopeMenu;var r=So(e,pP);return(0,t.createElement)(uk.div,Fx({role:"group"},r,{ref:n}))})),nI="MenuItem",rI="menu.itemSelect",iI=(0,t.forwardRef)((function(e,n){var r=e.disabled,i=void 0!==r&&r,o=e.onSelect,a=So(e,vP),s=(0,t.useRef)(null),u=BP(nI,e.__scopeMenu),l=GP(nI,e.__scopeMenu),c=Vx(n,s),d=(0,t.useRef)(!1);return(0,t.createElement)(oI,Fx({},a,{ref:c,disabled:i,onClick:Ux(e.onClick,(function(){var e=s.current;if(!i&&e){var t=new CustomEvent(rI,{bubbles:!0,cancelable:!0});e.addEventListener(rI,(function(e){return null===o||void 0===o?void 0:o(e)}),{once:!0}),lk(e,t),t.defaultPrevented?d.current=!1:u.onClose()}})),onPointerDown:function(t){var n;null===(n=e.onPointerDown)||void 0===n||n.call(e,t),d.current=!0},onPointerUp:Ux(e.onPointerUp,(function(e){var t;d.current||null===(t=e.currentTarget)||void 0===t||t.click()})),onKeyDown:Ux(e.onKeyDown,(function(e){var t=""!==l.searchRef.current;i||t&&" "===e.key||wP.includes(e.key)&&(e.currentTarget.click(),e.preventDefault())}))}))})),oI=(0,t.forwardRef)((function(e,n){var r=e.__scopeMenu,i=e.disabled,o=void 0!==i&&i,a=e.textValue,s=So(e,gP),u=GP(nI,r),c=OP(r),d=(0,t.useRef)(null),f=Vx(n,d),h=l((0,t.useState)(!1),2),p=h[0],v=h[1],g=l((0,t.useState)(""),2),m=g[0],y=g[1];return(0,t.useEffect)((function(){var e,t=d.current;t&&y((null!==(e=t.textContent)&&void 0!==e?e:"").trim())}),[s.children]),(0,t.createElement)(PP.ItemSlot,{scope:r,disabled:o,textValue:null!==a&&void 0!==a?a:m},(0,t.createElement)(cP,Fx({asChild:!0},c,{focusable:!o}),(0,t.createElement)(uk.div,Fx({role:"menuitem","data-highlighted":p?"":void 0,"aria-disabled":o||void 0,"data-disabled":o?"":void 0},s,{ref:f,onPointerMove:Ux(e.onPointerMove,CI((function(e){o?u.onItemLeave(e):(u.onItemEnter(e),e.defaultPrevented||e.currentTarget.focus())}))),onPointerLeave:Ux(e.onPointerLeave,CI((function(e){return u.onItemLeave(e)}))),onFocus:Ux(e.onFocus,(function(){return v(!0)})),onBlur:Ux(e.onBlur,(function(){return v(!1)}))}))))})),aI=(0,t.forwardRef)((function(e,n){var r=e.checked,i=void 0!==r&&r,o=e.onCheckedChange,a=So(e,mP);return(0,t.createElement)(dI,{scope:e.__scopeMenu,checked:i},(0,t.createElement)(iI,Fx({role:"menuitemcheckbox","aria-checked":_I(i)?"mixed":i},a,{ref:n,"data-state":EI(i),onSelect:Ux(a.onSelect,(function(){return null===o||void 0===o?void 0:o(!!_I(i)||!i)}),{checkForDefaultPrevented:!1})})))})),sI="MenuRadioGroup",uI=l(MP(sI,{value:void 0,onValueChange:function(){}}),2),lI=(uI[0],uI[1],"MenuItemIndicator"),cI=l(MP(lI,{checked:!1}),2),dI=cI[0],fI=cI[1],hI=(0,t.forwardRef)((function(e,n){var r=e.__scopeMenu,i=e.forceMount,o=So(e,yP),a=fI(lI,r);return(0,t.createElement)(Rk,{present:i||_I(a.checked)||!0===a.checked},(0,t.createElement)(uk.span,Fx({},o,{ref:n,"data-state":EI(a.checked)})))})),pI="MenuSub",vI=l(MP(pI),2),gI=vI[0],mI=vI[1],yI=function(e){var n=e.__scopeMenu,r=e.children,i=e.open,o=void 0!==i&&i,a=e.onOpenChange,s=LP(pI,n),u=TP(n),c=l((0,t.useState)(null),2),d=c[0],f=c[1],h=l((0,t.useState)(null),2),p=h[0],v=h[1],g=Jx(a);return(0,t.useEffect)((function(){return!1===s.open&&g(!1),function(){return g(!1)}}),[s.open,g]),(0,t.createElement)(FC,u,(0,t.createElement)(RP,{scope:n,open:o,onOpenChange:g,content:p,onContentChange:v},(0,t.createElement)(gI,{scope:n,contentId:Qx(),triggerId:Qx(),trigger:d,onTriggerChange:f},r)))},bI="MenuSubTrigger",wI=(0,t.forwardRef)((function(e,n){var r=LP(bI,e.__scopeMenu),i=BP(bI,e.__scopeMenu),o=mI(bI,e.__scopeMenu),a=GP(bI,e.__scopeMenu),s=(0,t.useRef)(null),u=a.pointerGraceTimerRef,l=a.onPointerGraceIntentChange,c={__scopeMenu:e.__scopeMenu},d=(0,t.useCallback)((function(){s.current&&window.clearTimeout(s.current),s.current=null}),[]);return(0,t.useEffect)((function(){return d}),[d]),(0,t.useEffect)((function(){var e=u.current;return function(){window.clearTimeout(e),l(null)}}),[u,l]),(0,t.createElement)(UP,Fx({asChild:!0},c),(0,t.createElement)(oI,Fx({id:o.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":o.contentId,"data-state":SI(r.open)},e,{ref:Kx(n,o.onTriggerChange),onClick:function(t){var n;null===(n=e.onClick)||void 0===n||n.call(e,t),e.disabled||t.defaultPrevented||(t.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:Ux(e.onPointerMove,CI((function(t){a.onItemEnter(t),t.defaultPrevented||e.disabled||r.open||s.current||(a.onPointerGraceIntentChange(null),s.current=window.setTimeout((function(){r.onOpenChange(!0),d()}),100))}))),onPointerLeave:Ux(e.onPointerLeave,CI((function(e){var t;d();var n=null===(t=r.content)||void 0===t?void 0:t.getBoundingClientRect();if(n){var i,o=null===(i=r.content)||void 0===i?void 0:i.dataset.side,s="right"===o,l=s?-5:5,c=n[s?"left":"right"],f=n[s?"right":"left"];a.onPointerGraceIntentChange({area:[{x:e.clientX+l,y:e.clientY},{x:c,y:n.top},{x:f,y:n.top},{x:f,y:n.bottom},{x:c,y:n.bottom}],side:o}),window.clearTimeout(u.current),u.current=window.setTimeout((function(){return a.onPointerGraceIntentChange(null)}),300)}else{if(a.onTriggerLeave(e),e.defaultPrevented)return;a.onPointerGraceIntentChange(null)}}))),onKeyDown:Ux(e.onKeyDown,(function(t){var n,o=""!==a.searchRef.current;e.disabled||o&&" "===t.key||SP[i.dir].includes(t.key)&&(r.onOpenChange(!0),null===(n=r.content)||void 0===n||n.focus(),t.preventDefault())}))})))})),xI="MenuSubContent",kI=(0,t.forwardRef)((function(e,n){var r=HP(qP,e.__scopeMenu),i=e.forceMount,o=void 0===i?r.forceMount:i,a=So(e,bP),s=LP(qP,e.__scopeMenu),u=BP(qP,e.__scopeMenu),l=mI(xI,e.__scopeMenu),c=(0,t.useRef)(null),d=Vx(n,c);return(0,t.createElement)(PP.Provider,{scope:e.__scopeMenu},(0,t.createElement)(Rk,{present:o||s.open},(0,t.createElement)(PP.Slot,{scope:e.__scopeMenu},(0,t.createElement)(eI,Fx({id:l.contentId,"aria-labelledby":l.triggerId},a,{ref:d,align:"start",side:"rtl"===u.dir?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:function(e){var t;u.isUsingKeyboardRef.current&&(null===(t=c.current)||void 0===t||t.focus()),e.preventDefault()},onCloseAutoFocus:function(e){return e.preventDefault()},onFocusOutside:Ux(e.onFocusOutside,(function(e){e.target!==l.trigger&&s.onOpenChange(!1)})),onEscapeKeyDown:Ux(e.onEscapeKeyDown,(function(e){u.onClose(),e.preventDefault()})),onKeyDown:Ux(e.onKeyDown,(function(e){var t,n=e.currentTarget.contains(e.target),r=_P[u.dir].includes(e.key);n&&r&&(s.onOpenChange(!1),null===(t=l.trigger)||void 0===t||t.focus(),e.preventDefault())}))})))))}));function SI(e){return e?"open":"closed"}function _I(e){return"indeterminate"===e}function EI(e){return _I(e)?"indeterminate":e?"checked":"unchecked"}function CI(e){return function(t){return"mouse"===t.pointerType?e(t):void 0}}var PI=FP,II=UP,jI=YP,MI=QP,AI=tI,TI=iI,OI=aI,NI=hI,RI=yI,LI=wI,DI=kI,zI=["__scopeDropdownMenu","disabled"],BI=["__scopeDropdownMenu"],FI=["__scopeDropdownMenu"],UI=["__scopeDropdownMenu"],KI=["__scopeDropdownMenu"],VI=["__scopeDropdownMenu"],WI=["__scopeDropdownMenu"],HI=["__scopeDropdownMenu"],YI=["__scopeDropdownMenu"],qI="DropdownMenu",XI=l(Yx(qI,[AP]),2),$I=XI[0],GI=(XI[1],AP()),QI=l($I(qI),2),JI=QI[0],ZI=QI[1],ej=function(e){var n=e.__scopeDropdownMenu,r=e.children,i=e.dir,o=e.open,a=e.defaultOpen,s=e.onOpenChange,u=e.modal,c=void 0===u||u,d=GI(n),f=(0,t.useRef)(null),h=l(Zx({prop:o,defaultProp:a,onChange:s}),2),p=h[0],v=void 0!==p&&p,g=h[1];return(0,t.createElement)(JI,{scope:n,triggerId:Qx(),triggerRef:f,contentId:Qx(),open:v,onOpenChange:g,onOpenToggle:(0,t.useCallback)((function(){return g((function(e){return!e}))}),[g]),modal:c},(0,t.createElement)(PI,Fx({},d,{open:v,onOpenChange:g,dir:i,modal:c}),r))},tj="DropdownMenuTrigger",nj=(0,t.forwardRef)((function(e,n){var r=e.__scopeDropdownMenu,i=e.disabled,o=void 0!==i&&i,a=So(e,zI),s=ZI(tj,r),u=GI(r);return(0,t.createElement)(II,Fx({asChild:!0},u),(0,t.createElement)(uk.button,Fx({type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":o?"":void 0,disabled:o},a,{ref:Kx(n,s.triggerRef),onPointerDown:Ux(e.onPointerDown,(function(e){o||0!==e.button||!1!==e.ctrlKey||(s.onOpenToggle(),s.open||e.preventDefault())})),onKeyDown:Ux(e.onKeyDown,(function(e){o||(["Enter"," "].includes(e.key)&&s.onOpenToggle(),"ArrowDown"===e.key&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(e.key)&&e.preventDefault())}))})))})),rj=function(e){var n=e.__scopeDropdownMenu,r=So(e,BI),i=GI(n);return(0,t.createElement)(jI,Fx({},i,r))},ij="DropdownMenuContent",oj=(0,t.forwardRef)((function(e,n){var r=e.__scopeDropdownMenu,i=So(e,FI),o=ZI(ij,r),a=GI(r),s=(0,t.useRef)(!1);return(0,t.createElement)(MI,Fx({id:o.contentId,"aria-labelledby":o.triggerId},a,i,{ref:n,onCloseAutoFocus:Ux(e.onCloseAutoFocus,(function(e){var t;s.current||null===(t=o.triggerRef.current)||void 0===t||t.focus(),s.current=!1,e.preventDefault()})),onInteractOutside:Ux(e.onInteractOutside,(function(e){var t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey,r=2===t.button||n;o.modal&&!r||(s.current=!0)})),style:mt(mt({},e.style),{},{"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"})}))})),aj=(0,t.forwardRef)((function(e,n){var r=e.__scopeDropdownMenu,i=So(e,UI),o=GI(r);return(0,t.createElement)(AI,Fx({},o,i,{ref:n}))})),sj=(0,t.forwardRef)((function(e,n){var r=e.__scopeDropdownMenu,i=So(e,KI),o=GI(r);return(0,t.createElement)(TI,Fx({},o,i,{ref:n}))})),uj=(0,t.forwardRef)((function(e,n){var r=e.__scopeDropdownMenu,i=So(e,VI),o=GI(r);return(0,t.createElement)(OI,Fx({},o,i,{ref:n}))})),lj=(0,t.forwardRef)((function(e,n){var r=e.__scopeDropdownMenu,i=So(e,WI),o=GI(r);return(0,t.createElement)(NI,Fx({},o,i,{ref:n}))})),cj=(0,t.forwardRef)((function(e,n){var r=e.__scopeDropdownMenu,i=So(e,HI),o=GI(r);return(0,t.createElement)(LI,Fx({},o,i,{ref:n}))})),dj=(0,t.forwardRef)((function(e,n){var r=e.__scopeDropdownMenu,i=So(e,YI),o=GI(r);return(0,t.createElement)(DI,Fx({},o,i,{ref:n,style:mt(mt({},e.style),{},{"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"})}))})),fj=ej,hj=nj,pj=rj,vj=oj,gj=aj,mj=sj,yj=uj,bj=lj,wj=function(e){var n=e.__scopeDropdownMenu,r=e.children,i=e.open,o=e.onOpenChange,a=e.defaultOpen,s=GI(n),u=l(Zx({prop:i,defaultProp:a,onChange:o}),2),c=u[0],d=void 0!==c&&c,f=u[1];return(0,t.createElement)(RI,Fx({},s,{open:d,onOpenChange:f}),r)},xj=cj,kj=dj,Sj=function(){},_j=t.createContext({});function Ej(e){var t=e.onEvent,n=e.children;return(0,f.jsx)(_j.Provider,{value:null!==t&&void 0!==t?t:Sj,children:n})}function Cj(){return t.useContext(_j)}function Pj(e,n){var r=Ml(),i=(0,t.useRef)(!1),o=Cj(),a=(0,t.useCallback)((function(t){i.current=t,r.batch((function(){t?(r.complete(),r.addOpenMenu(e)):(r.deleteOpenMenu(e),r.openMenus.forEach((function(t){t.startsWith(e)&&r.deleteOpenMenu(t)}))),null===n||void 0===n||n(t)}))}),[r,e,n]);return(0,t.useEffect)((function(){return i.current&&(o("open-menu",{source:"unknown",id:e}),r.addOpenMenu(e)),function(){i.current&&(r.deleteOpenMenu(e),r.openMenus.forEach((function(t){t.startsWith(e)&&(o("close-menu",{source:"unknown",id:e}),r.deleteOpenMenu(t))})),i.current=!1)}}),[r,e,o]),[Il("is menu open",(function(){return r.openMenus.includes(e)}),[r,e]),a]}var Ij=["noClose"],jj=["children","onSelect"],Mj=["children","onSelect"];function Aj(e){var t=e.id,n=e.children,r=e.modal,i=void 0!==r&&r,o=l(Pj(t),2),a=o[0],s=o[1];return(0,f.jsx)(fj,{open:a,dir:"ltr",modal:i,onOpenChange:s,children:n})}function Tj(e){var t=e.children,n=e["data-testid"];return(0,f.jsx)(hj,{dir:"ltr","data-testid":n,asChild:!0,children:t})}function Oj(e){var t=e.side,n=void 0===t?"bottom":t,r=e.align,i=void 0===r?"start":r,o=e.sideOffset,a=void 0===o?8:o,s=e.alignOffset,u=void 0===s?8:s,l=e.children,c=cd();return(0,f.jsx)(pj,{dir:"ltr",container:c,children:(0,f.jsx)(vj,{className:"tlui-menu",align:i,sideOffset:a,side:n,alignOffset:u,collisionPadding:4,children:l})})}function Nj(e){var t=e.id,n=e.children,r=l(Pj(t),2),i=r[0],o=r[1];return(0,f.jsx)(wj,{open:i,onOpenChange:o,children:n})}function Rj(e){var t=e.label,n=e["data-testid"],r=e["data-direction"];return(0,f.jsx)(xj,{dir:"ltr","data-direction":r,"data-testid":n,asChild:!0,children:(0,f.jsx)(D_,{className:"tlui-menu__button tlui-menu__submenu__trigger",label:t,icon:"chevron-right"})})}function Lj(e){var t=e.alignOffset,n=void 0===t?0:t,r=e.sideOffset,i=void 0===r?5:r,o=e.children,a=cd();return(0,f.jsx)(pj,{container:a,dir:"ltr",children:(0,f.jsx)(kj,{className:"tlui-menu tlui-menu__submenu__content",alignOffset:n,sideOffset:i,collisionPadding:4,children:o})})}function Dj(e){var t=e.children,n=e.size,r=void 0===n?"medium":n;return(0,f.jsx)(gj,{dir:"ltr",className:"tlui-menu__group","data-size":r,children:t})}function zj(e){var t=e.noClose,n=So(e,Ij);return(0,f.jsx)(mj,{dir:"ltr",asChild:!0,onClick:t||void 0!==n.isChecked?$c:void 0,children:(0,f.jsx)(D_,mt({className:"tlui-menu__button"},n))})}function Bj(e){var t=e.children,n=e.onSelect,r=So(e,jj);return(0,f.jsxs)(yj,mt(mt({dir:"ltr",className:"tlui-button tlui-menu__button tlui-menu__checkbox-item",onSelect:function(e){null===n||void 0===n||n(e),$c(e)}},r),{},{children:[(0,f.jsx)("div",{className:"tlui-menu__checkbox-item__check",style:{transformOrigin:"75% center",transform:"scale(".concat(r.checked?1:.5,")"),opacity:r.checked?1:.5},children:(0,f.jsx)(M_,{small:!0,icon:r.checked?"check":"checkbox-empty"})}),t]}))}function Fj(e){var t=e.children,n=e.onSelect,r=So(e,Mj);return(0,f.jsxs)(yj,mt(mt({dir:"ltr",className:"tlui-button tlui-menu__button tlui-menu__checkbox-item",onSelect:function(e){null===n||void 0===n||n(e),$c(e)}},r),{},{children:[(0,f.jsx)(bj,{dir:"ltr",className:"tlui-menu__checkbox-item__check",children:(0,f.jsx)(M_,{icon:"check"})}),t]}))}var Uj=(0,t.forwardRef)((function(e,n){return(0,t.createElement)(uk.span,Fx({},e,{ref:n,style:mt({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"},e.style)}))})),Kj=["__scopeToast","hotkey","label"],Vj=["__scopeToast","onFocusFromOutsideViewport"],Wj=["forceMount","open","defaultOpen","onOpenChange"],Hj=["__scopeToast","type","duration","open","onClose","onEscapeKeyDown","onPause","onResume","onSwipeStart","onSwipeMove","onSwipeCancel","onSwipeEnd"],Yj=["__scopeToast","children"],qj=["__scopeToast"],Xj=["__scopeToast"],$j=["altText"],Gj=["__scopeToast"],Qj=["__scopeToast","altText"],Jj="ToastProvider",Zj=l(W_("Toast"),3),eM=Zj[0],tM=Zj[1],nM=l(Yx("Toast",[Zj[2]]),2),rM=nM[0],iM=(nM[1],l(rM(Jj),2)),oM=iM[0],aM=iM[1],sM=function(e){var n=e.__scopeToast,r=e.label,i=void 0===r?"Notification":r,o=e.duration,a=void 0===o?5e3:o,s=e.swipeDirection,u=void 0===s?"right":s,c=e.swipeThreshold,d=void 0===c?50:c,f=e.children,h=l((0,t.useState)(null),2),p=h[0],v=h[1],g=l((0,t.useState)(0),2),m=g[0],y=g[1],b=(0,t.useRef)(!1),w=(0,t.useRef)(!1);return(0,t.createElement)(eM.Provider,{scope:n},(0,t.createElement)(oM,{scope:n,label:i,duration:a,swipeDirection:u,swipeThreshold:d,toastCount:m,viewport:p,onViewportChange:v,onToastAdd:(0,t.useCallback)((function(){return y((function(e){return e+1}))}),[]),onToastRemove:(0,t.useCallback)((function(){return y((function(e){return e-1}))}),[]),isFocusedToastEscapeKeyDownRef:b,isClosePausedRef:w},f))};sM.propTypes={label:function(e){if(e.label&&"string"===typeof e.label&&!e.label.trim()){var t="Invalid prop `label` supplied to `".concat(Jj,"`. Expected non-empty `string`.");return new Error(t)}return null}};var uM="ToastViewport",lM=["F8"],cM="toast.viewportPause",dM="toast.viewportResume",fM=(0,t.forwardRef)((function(e,n){var r=e.__scopeToast,i=e.hotkey,o=void 0===i?lM:i,a=e.label,s=void 0===a?"Notifications ({hotkey})":a,u=So(e,Kj),l=aM(uM,r),c=tM(r),f=(0,t.useRef)(null),h=(0,t.useRef)(null),p=(0,t.useRef)(null),v=(0,t.useRef)(null),g=Vx(n,v,l.onViewportChange),m=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=l.toastCount>0;(0,t.useEffect)((function(){var e=function(e){var t;o.every((function(t){return e[t]||e.code===t}))&&(null===(t=v.current)||void 0===t||t.focus())};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}),[o]),(0,t.useEffect)((function(){var e=f.current,t=v.current;if(y&&e&&t){var n=function(){if(!l.isClosePausedRef.current){var e=new CustomEvent(cM);t.dispatchEvent(e),l.isClosePausedRef.current=!0}},r=function(){if(l.isClosePausedRef.current){var e=new CustomEvent(dM);t.dispatchEvent(e),l.isClosePausedRef.current=!1}},i=function(t){!e.contains(t.relatedTarget)&&r()},o=function(){e.contains(document.activeElement)||r()};return e.addEventListener("focusin",n),e.addEventListener("focusout",i),e.addEventListener("pointermove",n),e.addEventListener("pointerleave",o),window.addEventListener("blur",n),window.addEventListener("focus",r),function(){e.removeEventListener("focusin",n),e.removeEventListener("focusout",i),e.removeEventListener("pointermove",n),e.removeEventListener("pointerleave",o),window.removeEventListener("blur",n),window.removeEventListener("focus",r)}}}),[y,l.isClosePausedRef]);var b=(0,t.useCallback)((function(e){var t=e.tabbingDirection,n=c().map((function(e){var n=e.ref.current,r=[n].concat(d(function(e){var t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:function(e){var t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}(n)));return"forwards"===t?r:r.reverse()}));return("forwards"===t?n.reverse():n).flat()}),[c]);return(0,t.useEffect)((function(){var e=v.current;if(e){var t=function(t){var n=t.altKey||t.ctrlKey||t.metaKey;if("Tab"===t.key&&!n){var r,i=document.activeElement,o=t.shiftKey;if(t.target===e&&o)return void(null===(r=h.current)||void 0===r||r.focus());var a,s,u=b({tabbingDirection:o?"backwards":"forwards"}),l=u.findIndex((function(e){return e===i}));if(TM(u.slice(l+1)))t.preventDefault();else o?null===(a=h.current)||void 0===a||a.focus():null===(s=p.current)||void 0===s||s.focus()}};return e.addEventListener("keydown",t),function(){return e.removeEventListener("keydown",t)}}}),[c,b]),(0,t.createElement)(xk,{ref:f,role:"region","aria-label":s.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:y?void 0:"none"}},y&&(0,t.createElement)(pM,{ref:h,onFocusFromOutsideViewport:function(){TM(b({tabbingDirection:"forwards"}))}}),(0,t.createElement)(eM.Slot,{scope:r},(0,t.createElement)(uk.ol,Fx({tabIndex:-1},u,{ref:g}))),y&&(0,t.createElement)(pM,{ref:p,onFocusFromOutsideViewport:function(){TM(b({tabbingDirection:"backwards"}))}}))})),hM="ToastFocusProxy",pM=(0,t.forwardRef)((function(e,n){var r=e.__scopeToast,i=e.onFocusFromOutsideViewport,o=So(e,Vj),a=aM(hM,r);return(0,t.createElement)(Uj,Fx({"aria-hidden":!0,tabIndex:0},o,{ref:n,style:{position:"fixed"},onFocus:function(e){var t,n=e.relatedTarget;!(null!==(t=a.viewport)&&void 0!==t&&t.contains(n))&&i()}}))})),vM="Toast",gM=(0,t.forwardRef)((function(e,n){var r=e.forceMount,i=e.open,o=e.defaultOpen,a=e.onOpenChange,s=So(e,Wj),u=l(Zx({prop:i,defaultProp:o,onChange:a}),2),c=u[0],d=void 0===c||c,f=u[1];return(0,t.createElement)(Rk,{present:r||d},(0,t.createElement)(wM,Fx({open:d},s,{ref:n,onClose:function(){return f(!1)},onPause:Jx(e.onPause),onResume:Jx(e.onResume),onSwipeStart:Ux(e.onSwipeStart,(function(e){e.currentTarget.setAttribute("data-swipe","start")})),onSwipeMove:Ux(e.onSwipeMove,(function(e){var t=e.detail.delta,n=t.x,r=t.y;e.currentTarget.setAttribute("data-swipe","move"),e.currentTarget.style.setProperty("--radix-toast-swipe-move-x","".concat(n,"px")),e.currentTarget.style.setProperty("--radix-toast-swipe-move-y","".concat(r,"px"))})),onSwipeCancel:Ux(e.onSwipeCancel,(function(e){e.currentTarget.setAttribute("data-swipe","cancel"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")})),onSwipeEnd:Ux(e.onSwipeEnd,(function(e){var t=e.detail.delta,n=t.x,r=t.y;e.currentTarget.setAttribute("data-swipe","end"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.setProperty("--radix-toast-swipe-end-x","".concat(n,"px")),e.currentTarget.style.setProperty("--radix-toast-swipe-end-y","".concat(r,"px")),f(!1)}))})))})),mM=l(rM(vM,{onClose:function(){}}),2),yM=mM[0],bM=mM[1],wM=(0,t.forwardRef)((function(e,n){var r=e.__scopeToast,i=e.type,o=void 0===i?"foreground":i,a=e.duration,s=e.open,u=e.onClose,c=e.onEscapeKeyDown,d=e.onPause,f=e.onResume,h=e.onSwipeStart,p=e.onSwipeMove,v=e.onSwipeCancel,g=e.onSwipeEnd,m=So(e,Hj),y=aM(vM,r),b=l((0,t.useState)(null),2),w=b[0],x=b[1],k=Vx(n,(function(e){return x(e)})),S=(0,t.useRef)(null),_=(0,t.useRef)(null),E=a||y.duration,C=(0,t.useRef)(0),P=(0,t.useRef)(E),I=(0,t.useRef)(0),j=y.onToastAdd,M=y.onToastRemove,A=Jx((function(){var e;(null===w||void 0===w?void 0:w.contains(document.activeElement))&&(null===(e=y.viewport)||void 0===e||e.focus()),u()})),T=(0,t.useCallback)((function(e){e&&e!==1/0&&(window.clearTimeout(I.current),C.current=(new Date).getTime(),I.current=window.setTimeout(A,e))}),[A]);(0,t.useEffect)((function(){var e=y.viewport;if(e){var t=function(){T(P.current),null===f||void 0===f||f()},n=function(){var e=(new Date).getTime()-C.current;P.current=P.current-e,window.clearTimeout(I.current),null===d||void 0===d||d()};return e.addEventListener(cM,n),e.addEventListener(dM,t),function(){e.removeEventListener(cM,n),e.removeEventListener(dM,t)}}}),[y.viewport,E,d,f,T]),(0,t.useEffect)((function(){s&&!y.isClosePausedRef.current&&T(E)}),[s,E,y.isClosePausedRef,T]),(0,t.useEffect)((function(){return j(),function(){return M()}}),[j,M]);var O=(0,t.useMemo)((function(){return w?jM(w):null}),[w]);return y.viewport?(0,t.createElement)(t.Fragment,null,O&&(0,t.createElement)(xM,{__scopeToast:r,role:"status","aria-live":"foreground"===o?"assertive":"polite","aria-atomic":!0},O),(0,t.createElement)(yM,{scope:r,onClose:A},(0,ek.createPortal)((0,t.createElement)(eM.ItemSlot,{scope:r},(0,t.createElement)(wk,{asChild:!0,onEscapeKeyDown:Ux(c,(function(){y.isFocusedToastEscapeKeyDownRef.current||A(),y.isFocusedToastEscapeKeyDownRef.current=!1}))},(0,t.createElement)(uk.li,Fx({role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":y.swipeDirection},m,{ref:k,style:mt({userSelect:"none",touchAction:"none"},e.style),onKeyDown:Ux(e.onKeyDown,(function(e){"Escape"===e.key&&(null===c||void 0===c||c(e.nativeEvent),e.nativeEvent.defaultPrevented||(y.isFocusedToastEscapeKeyDownRef.current=!0,A()))})),onPointerDown:Ux(e.onPointerDown,(function(e){0===e.button&&(S.current={x:e.clientX,y:e.clientY})})),onPointerMove:Ux(e.onPointerMove,(function(e){if(S.current){var t=e.clientX-S.current.x,n=e.clientY-S.current.y,r=Boolean(_.current),i=["left","right"].includes(y.swipeDirection),o=["left","up"].includes(y.swipeDirection)?Math.min:Math.max,a=i?o(0,t):0,s=i?0:o(0,n),u="touch"===e.pointerType?10:2,l={x:a,y:s},c={originalEvent:e,delta:l};r?(_.current=l,MM("toast.swipeMove",p,c,{discrete:!1})):AM(l,y.swipeDirection,u)?(_.current=l,MM("toast.swipeStart",h,c,{discrete:!1}),e.target.setPointerCapture(e.pointerId)):(Math.abs(t)>u||Math.abs(n)>u)&&(S.current=null)}})),onPointerUp:Ux(e.onPointerUp,(function(e){var t=_.current,n=e.target;if(n.hasPointerCapture(e.pointerId)&&n.releasePointerCapture(e.pointerId),_.current=null,S.current=null,t){var r=e.currentTarget,i={originalEvent:e,delta:t};AM(t,y.swipeDirection,y.swipeThreshold)?MM("toast.swipeEnd",g,i,{discrete:!0}):MM("toast.swipeCancel",v,i,{discrete:!0}),r.addEventListener("click",(function(e){return e.preventDefault()}),{once:!0})}}))})))),y.viewport))):null}));wM.propTypes={type:function(e){if(e.type&&!["foreground","background"].includes(e.type)){var t="Invalid prop `type` supplied to `".concat(vM,"`. Expected `foreground | background`.");return new Error(t)}return null}};var xM=function(e){var n=e.__scopeToast,r=e.children,i=So(e,Yj),o=aM(vM,n),a=l((0,t.useState)(!1),2),s=a[0],u=a[1],c=l((0,t.useState)(!1),2),d=c[0],f=c[1];return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=Jx(e);Xx((function(){var e=0,n=0;return e=window.requestAnimationFrame((function(){return n=window.requestAnimationFrame(t)})),function(){window.cancelAnimationFrame(e),window.cancelAnimationFrame(n)}}),[t])}((function(){return u(!0)})),(0,t.useEffect)((function(){var e=window.setTimeout((function(){return f(!0)}),1e3);return function(){return window.clearTimeout(e)}}),[]),d?null:(0,t.createElement)(Nk,{asChild:!0},(0,t.createElement)(Uj,i,s&&(0,t.createElement)(t.Fragment,null,o.label," ",r)))},kM=(0,t.forwardRef)((function(e,n){e.__scopeToast;var r=So(e,qj);return(0,t.createElement)(uk.div,Fx({},r,{ref:n}))})),SM=(0,t.forwardRef)((function(e,n){e.__scopeToast;var r=So(e,Xj);return(0,t.createElement)(uk.div,Fx({},r,{ref:n}))})),_M="ToastAction",EM=(0,t.forwardRef)((function(e,n){var r=e.altText,i=So(e,$j);return r?(0,t.createElement)(IM,{altText:r,asChild:!0},(0,t.createElement)(PM,Fx({},i,{ref:n}))):null}));EM.propTypes={altText:function(e){return e.altText?null:new Error("Missing prop `altText` expected on `".concat(_M,"`"))}};var CM="ToastClose",PM=(0,t.forwardRef)((function(e,n){var r=e.__scopeToast,i=So(e,Gj),o=bM(CM,r);return(0,t.createElement)(IM,{asChild:!0},(0,t.createElement)(uk.button,Fx({type:"button"},i,{ref:n,onClick:Ux(e.onClick,o.onClose)})))})),IM=(0,t.forwardRef)((function(e,n){e.__scopeToast;var r=e.altText,i=So(e,Qj);return(0,t.createElement)(uk.div,Fx({"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0},i,{ref:n}))}));function jM(e){var t=[];return Array.from(e.childNodes).forEach((function(e){if(e.nodeType===e.TEXT_NODE&&e.textContent&&t.push(e.textContent),function(e){return e.nodeType===e.ELEMENT_NODE}(e)){var n=e.ariaHidden||e.hidden||"none"===e.style.display,r=""===e.dataset.radixToastAnnounceExclude;if(!n)if(r){var i=e.dataset.radixToastAnnounceAlt;i&&t.push(i)}else t.push.apply(t,d(jM(e)))}})),t}function MM(e,t,n,r){var i=r.discrete,o=n.originalEvent.currentTarget,a=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&o.addEventListener(e,t,{once:!0}),i?lk(o,a):o.dispatchEvent(a)}var AM=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Math.abs(e.x),i=Math.abs(e.y),o=r>i;return"left"===t||"right"===t?o&&r>n:!o&&i>n};function TM(e){var t=document.activeElement;return e.some((function(e){return e===t||(e.focus(),document.activeElement!==t)}))}var OM=gM,NM=kM,RM=SM,LM=EM,DM=PM,zM="2.0.0-canary.4b8491d388aa",BM=mt(mt({},xl),{},{icons:Object.fromEntries(["align-bottom-center","align-bottom-left","align-bottom-right","align-bottom","align-center-center","align-center-horizontal","align-center-left","align-center-right","align-center-vertical","align-left","align-right","align-top-center","align-top-left","align-top-right","align-top","arrow-left","arrowhead-arrow","arrowhead-bar","arrowhead-diamond","arrowhead-dot","arrowhead-none","arrowhead-square","arrowhead-triangle-inverted","arrowhead-triangle","aspect-ratio","avatar","blob","bring-forward","bring-to-front","check","checkbox-checked","checkbox-empty","chevron-down","chevron-left","chevron-right","chevron-up","chevrons-ne","chevrons-sw","clipboard-copied","clipboard-copy","code","collab","color","comment","cross-2","cross","dash-dashed","dash-dotted","dash-draw","dash-solid","discord","distribute-horizontal","distribute-vertical","dot","dots-horizontal","dots-vertical","drag-handle-dots","duplicate","edit","external-link","file","fill-none","fill-pattern","fill-semi","fill-solid","follow","following","font-draw","font-mono","font-sans","font-serif","geo-arrow-down","geo-arrow-left","geo-arrow-right","geo-arrow-up","geo-check-box","geo-diamond","geo-ellipse","geo-hexagon","geo-octagon","geo-oval","geo-pentagon","geo-rectangle","geo-rhombus-2","geo-rhombus","geo-star","geo-trapezoid","geo-triangle","geo-x-box","github","group","hidden","image","info-circle","leading","link","lock-small","lock","menu","minus","mixed","pack","page","plus","question-mark-circle","question-mark","redo","reset-zoom","rotate-ccw","rotate-cw","ruler","search","send-backward","send-to-back","settings-horizontal","settings-vertical-1","settings-vertical","share-1","share-2","size-extra-large","size-large","size-medium","size-small","spline-cubic","spline-line","stack-horizontal","stack-vertical","stretch-horizontal","stretch-vertical","text-align-center","text-align-justify","text-align-left","text-align-right","tool-arrow","tool-embed","tool-eraser","tool-frame","tool-hand","tool-highlight","tool-laser","tool-line","tool-media","tool-note","tool-pencil","tool-pointer","tool-text","trash","triangle-down","triangle-up","twitter","undo","ungroup","unlock-small","unlock","vertical-align-center","vertical-align-end","vertical-align-start","visible","warning-triangle","zoom-in","zoom-out"].map((function(e){return[e,"https://unpkg.com/@tldraw/assets@".concat(zM,"/icons/icon/").concat(e,".svg")]}))),translations:Object.fromEntries(gl.map((function(e){return[e.locale,"https://unpkg.com/@tldraw/assets@".concat(zM,"/translations/").concat(e.locale,".json")]}))),embedIcons:Object.fromEntries(xu.map((function(e){return[e.type,"https://unpkg.com/@tldraw/assets@".concat(zM,"/embed-icons/").concat(e.type,".png")]})))});function FM(e){return e?{fonts:Object.assign(mt({},BM.fonts),mt({},null===e||void 0===e?void 0:e.fonts)),icons:Object.assign(mt({},BM.icons),mt({},null===e||void 0===e?void 0:e.icons)),embedIcons:Object.assign(mt({},BM.embedIcons),mt({},null===e||void 0===e?void 0:e.embedIcons)),translations:Object.assign(mt({},BM.translations),mt({},null===e||void 0===e?void 0:e.translations))}:BM}var UM=t.forwardRef((function(e,n){var r=e.className,i=e.label,o=e.icon,a=e.iconLeft,s=e.autoselect,u=void 0!==s&&s,c=e.autofocus,d=void 0!==c&&c,h=e.defaultValue,p=e.placeholder,v=e.onComplete,g=e.onValueChange,m=e.onCancel,y=e.onBlur,b=e.shouldManuallyMaintainScrollPositionWhenFocused,w=void 0!==b&&b,x=e.children,k=e.value,S=t.useRef(null);t.useImperativeHandle(n,(function(){return S.current}));var _=P_(),E=t.useRef(null!==h&&void 0!==h?h:""),C=t.useRef(null!==h&&void 0!==h?h:""),P=l(t.useState(!1),2),I=P[0],j=P[1],M=t.useCallback((function(e){j(!0);var t=e.currentTarget;C.current=t.value,requestAnimationFrame((function(){u&&t.select()}))}),[u]),A=t.useCallback((function(e){var t=e.currentTarget.value;C.current=t,null===g||void 0===g||g(t)}),[g]),T=t.useCallback((function(e){switch(e.key){case"Enter":e.currentTarget.blur(),e.stopPropagation(),null===v||void 0===v||v(e.currentTarget.value);break;case"Escape":e.currentTarget.value=E.current,e.currentTarget.blur(),e.stopPropagation(),null===m||void 0===m||m(e.currentTarget.value)}}),[v,m]),O=t.useCallback((function(e){j(!1);var t=e.currentTarget.value;null===y||void 0===y||y(t)}),[y]);return t.useEffect((function(){var e=window.visualViewport;if(I&&w&&e){var t=function(){var e;null===(e=S.current)||void 0===e||e.scrollIntoView({block:"center"})};return e.addEventListener("resize",t),e.addEventListener("scroll",t),requestAnimationFrame((function(){var e;null===(e=S.current)||void 0===e||e.scrollIntoView({block:"center"})})),function(){e.removeEventListener("resize",t),e.removeEventListener("scroll",t)}}}),[I,w]),(0,f.jsxs)("div",{draggable:!1,className:"tlui-input__wrapper",children:[x,i&&(0,f.jsx)("label",{children:_(i)}),a&&(0,f.jsx)(M_,{icon:a,className:"tlui-icon-left",small:!0}),(0,f.jsx)("input",{ref:S,className:kl("tlui-input",r),type:"text",defaultValue:h,onKeyUp:T,onChange:A,onFocus:M,onBlur:O,autoFocus:d,placeholder:p,value:k}),o&&(0,f.jsx)(M_,{icon:o,small:!!i})]})}));function KM(e){return Kp(e)?{isValid:!0,hasProtocol:!0}:Kp("https://"+e)?{isValid:!0,hasProtocol:!1}:{isValid:!1,hasProtocol:!1}}var VM=Pl((function(e){var t=e.onClose,n=Ml().onlySelectedShape;return n&&"url"in n.props&&"string"===typeof n.props.url?(0,f.jsx)(WM,{onClose:t,selectedShape:n}):null})),WM=Pl((function(e){var n=e.onClose,r=e.selectedShape,i=Ml(),o=P_(),a=(0,t.useRef)(null);(0,t.useEffect)((function(){requestAnimationFrame((function(){var e;return null===(e=a.current)||void 0===e?void 0:e.focus()}))}),[]);var s=(0,t.useRef)(r.props.url),u=l((0,t.useState)((function(){var e=KM(r.props.url),t=!0===e.isValid?e.hasProtocol?r.props.url:"https://"+r.props.url:"https://";return{actual:t,safe:t,valid:!0}})),2),c=u[0],d=u[1],h=(0,t.useCallback)((function(e){var t=e.replace(/https?:\/\/(https?:\/\/)/,(function(e,t){return t})),n=KM(t),r=!0===n.isValid?n.hasProtocol?t:"https://"+t:"https://";d({actual:t,safe:r,valid:n.isValid})}),[]),p=(0,t.useCallback)((function(){var e=i.onlySelectedShape;e&&(i.updateShapes([{id:e.id,type:e.type,props:{url:""}}]),n())}),[i,n]),v=(0,t.useCallback)((function(){var e=i.onlySelectedShape;e&&(e&&"url"in e.props&&e.props.url!==c.safe&&i.updateShapes([{id:e.id,type:e.type,props:{url:c.safe}}]),n())}),[i,n,c]),g=(0,t.useCallback)((function(){n()}),[n]);if(!r)return n(),null;var m=s.current&&!c.valid;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(z_,{children:[(0,f.jsx)(B_,{children:o("edit-link-dialog.title")}),(0,f.jsx)(F_,{})]}),(0,f.jsx)(U_,{children:(0,f.jsxs)("div",{className:"tlui-edit-link-dialog",children:[(0,f.jsx)(UM,{ref:a,className:"tlui-edit-link-dialog__input",label:"edit-link-dialog.url",autofocus:!0,value:c.actual,onValueChange:h,onComplete:v,onCancel:g}),(0,f.jsx)("div",{children:c.valid?o("edit-link-dialog.detail"):o("edit-link-dialog.invalid-url")})]})}),(0,f.jsxs)(K_,{className:"tlui-dialog__footer__actions",children:[(0,f.jsx)(D_,{onClick:g,onTouchEnd:g,children:o("edit-link-dialog.cancel")}),m?(0,f.jsx)(D_,{type:"danger",onTouchEnd:p,onClick:p,children:o("edit-link-dialog.clear")}):(0,f.jsx)(D_,{type:"primary",disabled:!c.valid,onTouchEnd:v,onClick:v,children:o("edit-link-dialog.save")})]})]})})),HM=Pl((function(e){var n=e.onClose,r=Ml(),i=P_(),o=b_(),a=l((0,t.useState)(null),2),s=a[0],u=a[1],c=l((0,t.useState)(""),2),d=c[0],h=c[1],p=l((0,t.useState)(null),2),v=p[0],g=p[1],m=l((0,t.useState)(!1),2),y=m[0],b=m[1],w=(0,t.useRef)(-1);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(z_,{children:[(0,f.jsx)(B_,{children:s?"".concat(i("embed-dialog.title")," \u2014 ").concat(s.title):i("embed-dialog.title")}),(0,f.jsx)(F_,{})]}),s?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(U_,{className:"tlui-embed-dialog__enter",children:[(0,f.jsx)(UM,{className:"tlui-embed-dialog__input",label:"embed-dialog.url",placeholder:"http://example.com",autofocus:!0,onValueChange:function(e){h(e);var t=jh(e);g(t&&t.definition.type===s.type?t:null),b(!1),clearTimeout(w.current),w.current=setTimeout((function(){return b(!t)}),320)}}),""===d?(0,f.jsxs)("div",{className:"tlui-embed-dialog__instruction",children:[(0,f.jsx)("span",{children:i("embed-dialog.instruction")})," ",s.instructionLink&&(0,f.jsxs)("a",{target:"_blank",rel:"noopener noreferrer",href:s.instructionLink,className:"tlui-embed-dialog__instruction__link",children:["Learn more.",(0,f.jsx)(M_,{icon:"external-link",small:!0})]})]}):(0,f.jsx)("div",{className:"tlui-embed-dialog__warning",children:y?i("embed-dialog.invalid-url"):"\xa0"})]}),(0,f.jsxs)(K_,{className:"tlui-dialog__footer__actions",children:[(0,f.jsx)(D_,{onClick:function(){u(null),g(null),h("")},label:"embed-dialog.back"}),(0,f.jsx)("div",{className:"tlui-embed__spacer"}),(0,f.jsx)(D_,{label:"embed-dialog.cancel",onClick:n}),(0,f.jsx)(D_,{type:"primary",disabled:!v,label:"embed-dialog.create",onClick:function(){v&&(r.putExternalContent({type:"embed",url:d,point:r.viewportPageCenter,embed:v.definition}),n())}})]})]}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(U_,{className:"tlui-embed-dialog__list",children:xu.map((function(e){return(0,f.jsxs)("button",{className:"tlui-embed-dialog__item",onClick:function(){return u(e)},children:[(0,f.jsx)("div",{className:"tlui-embed-dialog__item__image",children:(0,f.jsx)("div",{className:"tlui-embed-dialog__item__image__img",style:{backgroundImage:"url(".concat(o.embedIcons[e.type],")")}})}),(0,f.jsx)("div",{className:"tlui-embed-dialog__item__title",children:e.title})]},e.type)}))}),(0,f.jsx)("div",{className:"tlui-dialog__scrim"})]})]})})),YM=n(4235);function qM(e,t,n){return XM.apply(this,arguments)}function XM(){return XM=b(m().mark((function e(t,n,r){var i,o,a,s,u,c,d,f,h,p,v,g,y,b,x,k,S,_,E,C,P,I,j,M,A,T;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=n.elements,o=n.files,a={shapes:[],rootShapeIds:[],assets:[],schema:t.store.schema.serialize()},s=new Map,u=new Map,c=t.currentPageId,d=new Map,f=[],h=new Set,i.forEach((function(e){if(d.set(e.id,Os()),null!==e.boundElements){var t,n=w(e.boundElements);try{for(n.s();!(t=n.n()).done;){var r=t.value;"text"===r.type&&h.add(r.id)}}catch(NG){n.e(NG)}finally{n.f()}}})),p="a1",v=w(i),e.prev=11,y=m().mark((function e(){var t,n,r,v,y,b,x,k,S,_,E,C,P,I,j,M,A,T,O,N,R,L,D,z,B,F,U,K,V,W,H,Y,q,X,$,G,Q,J,Z,ee;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=g.value,!h.has(t.id)){e.next=3;break}return e.abrupt("return",1);case 3:n=d.get(t.id),r={id:n,typeName:"shape",parentId:c,index:p,x:t.x,y:t.y,rotation:0,isLocked:t.locked,opacity:$M(t.opacity)},0!==t.angle&&u.set(n,t.angle),t.groupIds&&t.groupIds.length>0?s.has(t.groupIds[0])?null===(v=s.get(t.groupIds[0]))||void 0===v||v.push(n):s.set(t.groupIds[0],[n]):f.push(n),e.t0=t.type,e.next="rectangle"===e.t0||"ellipse"===e.t0||"diamond"===e.t0?10:"freedraw"===e.t0?32:"line"===e.t0?34:"arrow"===e.t0?39:"text"===e.t0?63:"image"===e.t0?66:72;break;case 10:if(k="",S="middle",null===t.boundElements){e.next=29;break}_=w(t.boundElements),e.prev=14,C=m().mark((function e(){var t,n;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"text"===(t=E.value).type&&(n=i.find((function(e){return e.id===t.id})))&&(k=n.text,S=rA[n.textAlign]);case 2:case"end":return e.stop()}}),e)})),_.s();case 17:if((E=_.n()).done){e.next=21;break}return e.delegateYield(C(),"t1",19);case 19:e.next=17;break;case 21:e.next=26;break;case 23:e.prev=23,e.t2=e.catch(14),_.e(e.t2);case 26:return e.prev=26,_.f(),e.finish(26);case 29:return P="transparent"===t.backgroundColor?t.strokeColor:t.backgroundColor,a.shapes.push(mt(mt({},r),{},{type:"geo",props:{geo:t.type,url:null!==(y=t.link)&&void 0!==y?y:"",w:t.width,h:t.height,size:null!==(b=GM[t.strokeWidth])&&void 0!==b?b:"draw",color:null!==(x=eA[P])&&void 0!==x?x:"black",text:k,align:S,dash:aA(t),fill:sA(t)}})),e.abrupt("break",72);case 32:return a.shapes.push(mt(mt({},r),{},{type:"draw",props:{dash:aA(t),size:GM[t.strokeWidth],color:null!==(I=eA[t.strokeColor])&&void 0!==I?I:"black",segments:[{type:"free",points:t.points.map((function(e){var t=l(e,3),n=t[0],r=t[1],i=t[2];return{x:n,y:r,z:void 0===i?.5:i}}))}]}})),e.abrupt("break",72);case 34:return M=t.points[0],A=t.points[t.points.length-1],T=gr(t.points.length),a.shapes.push(mt(mt({},r),{},{type:"line",props:{dash:aA(t),size:GM[t.strokeWidth],color:null!==(j=eA[t.strokeColor])&&void 0!==j?j:"black",spline:t.roundness?"cubic":"line",handles:mt({start:{id:"start",type:"vertex",index:T[0],x:M[0],y:M[1]},end:{id:"end",type:"vertex",index:T[T.length-1],x:A[0],y:A[1]}},Object.fromEntries(t.points.slice(1,-1).map((function(e,t){var n=l(e,2),r=n[0],i=n[1],o=Bp();return[o,{id:o,type:"vertex",index:T[t+1],x:r,y:i}]}))))}})),e.abrupt("break",72);case 39:if(B="",null===t.boundElements){e.next=57;break}F=w(t.boundElements),e.prev=42,K=m().mark((function e(){var t,n;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"text"===(t=U.value).type&&(n=i.find((function(e){return e.id===t.id})))&&(B=n.text);case 2:case"end":return e.stop()}}),e)})),F.s();case 45:if((U=F.n()).done){e.next=49;break}return e.delegateYield(K(),"t3",47);case 47:e.next=45;break;case 49:e.next=54;break;case 51:e.prev=51,e.t4=e.catch(42),F.e(e.t4);case 54:return e.prev=54,F.f(),e.finish(54);case 57:return V=t.points[0],W=t.points[t.points.length-1],H=d.get(null===(O=t.startBinding)||void 0===O?void 0:O.elementId),Y=d.get(null===(N=t.endBinding)||void 0===N?void 0:N.elementId),a.shapes.push(mt(mt({},r),{},{type:"arrow",props:{text:B,bend:oA(t,V,W),dash:aA(t),size:null!==(R=GM[t.strokeWidth])&&void 0!==R?R:"m",color:null!==(L=eA[t.strokeColor])&&void 0!==L?L:"black",start:H?{type:"binding",boundShapeId:H,normalizedAnchor:{x:.5,y:.5},isExact:!1}:{type:"point",x:V[0],y:V[1]},end:Y?{type:"binding",boundShapeId:Y,normalizedAnchor:{x:.5,y:.5},isExact:!1}:{type:"point",x:W[0],y:W[1]},arrowheadEnd:null!==(D=iA[t.endArrowhead])&&void 0!==D?D:"none",arrowheadStart:null!==(z=iA[t.startArrowhead])&&void 0!==z?z:"none"}})),e.abrupt("break",72);case 63:return $=JM(t.fontSize),G=$.size,Q=$.scale,a.shapes.push(mt(mt({},r),{},{type:"text",props:{size:G,scale:Q,font:null!==(q=ZM[t.fontFamily])&&void 0!==q?q:"draw",color:null!==(X=eA[t.strokeColor])&&void 0!==X?X:"black",text:t.text,align:rA[t.textAlign]}})),e.abrupt("break",72);case 66:if(Z=o[t.fileId]){e.next=69;break}return e.abrupt("break",72);case 69:ee=ks.createId(),a.assets.push({id:ee,typeName:"asset",type:"image",props:{w:t.width,h:t.height,name:null!==(J=t.id)&&void 0!==J?J:"Untitled",isAnimated:!1,mimeType:Z.mimeType,src:Z.dataURL}}),a.shapes.push(mt(mt({},r),{},{type:"image",props:{w:t.width,h:t.height,assetId:ee}}));case 72:p=vr(p);case 73:case"end":return e.stop()}}),e,null,[[14,23,26,29],[42,51,54,57]])})),v.s();case 14:if((g=v.n()).done){e.next=20;break}return e.delegateYield(y(),"t0",16);case 16:if(!e.t0){e.next=18;break}return e.abrupt("continue",18);case 18:e.next=14;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(11),v.e(e.t1);case 25:return e.prev=25,v.f(),e.finish(25);case 28:b=null!==r&&void 0!==r?r:t.inputs.shiftKey?t.inputs.currentPagePoint:void 0,t.mark("paste"),t.putContent(a,{point:b,select:!1,preserveIds:!0}),x=w(s.values());try{for(x.s();!(k=x.n()).done;)(S=k.value).length>1&&(t.groupShapes(S),null!==(_=t.getShapeById(S[0]))&&void 0!==_&&_.parentId&&Ts(_.parentId)&&f.push(_.parentId))}catch(NG){x.e(NG)}finally{x.f()}E=w(u);try{for(E.s();!(C=E.n()).done;)P=l(C.value,2),I=P[0],j=P[1],t.select(I),t.rotateShapesBy([I],j)}catch(NG){E.e(NG)}finally{E.f()}M=br(f.map((function(e){return t.getShapeById(e)}))),A=lc.Common(M.map((function(e){return t.getPageBounds(e)}))),T=t.viewportPageBounds.center,t.updateShapes(M.map((function(e){var t,n,r=(null!==(t=e.x)&&void 0!==t?t:0)-(A.x+A.w/2),i=(null!==(n=e.y)&&void 0!==n?n:0)-(A.y+A.h/2);return{id:e.id,type:e.type,x:T.x+r,y:T.y+i}}))),t.setSelectedIds(f);case 40:case"end":return e.stop()}}),e,null,[[11,22,25,28]])}))),XM.apply(this,arguments)}var $M=function(e){var t=e/100;return t<.2?.1:t<.4?.25:t<.6?.5:t<.8?.75:1},GM={1:"s",2:"m",3:"l",4:"xl"},QM={16:"s",20:"m",28:"l",36:"xl"};function JM(e){var t=QM[e];return t?{size:t,scale:1}:e<16?{size:"s",scale:e/16}:e>36?{size:"xl",scale:e/36}:{size:"m",scale:1}}var ZM={1:"draw",2:"sans",3:"mono"},eA={"#ffffff":"grey","#000000":"black","#343a40":"black","#495057":"grey","#c92a2a":"red","#a61e4d":"light-red","#862e9c":"violet","#5f3dc4":"light-violet","#364fc7":"blue","#1864ab":"light-blue","#0b7285":"light-green","#087f5b":"light-green","#2b8a3e":"green","#5c940d":"light-green","#e67700":"yellow","#d9480f":"orange","#ced4da":"grey","#868e96":"grey","#fa5252":"light-red","#e64980":"red","#be4bdb":"light-violet","#7950f2":"violet","#4c6ef5":"blue","#228be6":"light-blue","#15aabf":"light-green","#12b886":"green","#40c057":"green","#82c91e":"light-green","#fab005":"yellow","#fd7e14":"orange","#212529":"grey"},tA={solid:"draw",dashed:"dashed",dotted:"dotted"},nA={"cross-hatch":"pattern",hachure:"pattern",solid:"solid"},rA={left:"start",center:"middle",right:"end"},iA={arrow:"arrow",dot:"dot",triangle:"triangle",bar:"pipe"};function oA(e,t,n){var r=0;if(e.points.length>2){var i=new Nl(t[0],t[1]),o=new Nl(n[0],n[1]),a=new Nl(e.points[1][0],e.points[1][1]),s=Nl.Sub(o,i),u=Nl.Per(s),l=Nl.Med(o,i),c=Nl.Sub(l,u),d=Nl.Add(l,u),f=Nl.NearestPointOnLineSegment(c,d,a,!1);r=Nl.Dist(f,l),Nl.Clockwise(f,o,l)&&(r*=-1)}return r}var aA=function(e){var t,n=null!==(t=tA[e.strokeStyle])&&void 0!==t?t:"draw";return"draw"===n&&0===e.roughness&&(n="solid"),n},sA=function(e){var t;return"transparent"===e.backgroundColor?"none":null!==(t=nA[e.fillStyle])&&void 0!==t?t:"solid"};function uA(e,t,n){return lA.apply(this,arguments)}function lA(){return lA=b(m().mark((function e(t,n,r){var i,o;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(n.map(function(){var e=b(m().mark((function e(t){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return e.next=4,e.sent.blob();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return i=e.sent,o=i.map((function(e){return new File([e],"tldrawFile",{type:e.type})})),t.mark("paste"),e.next=7,t.putExternalContent({type:"files",files:o,point:r,ignoreParent:!1});case 7:n.forEach((function(e){return URL.revokeObjectURL(e)}));case 8:case"end":return e.stop()}}),e)}))),lA.apply(this,arguments)}function cA(e,t,n){var r=null!==n&&void 0!==n?n:e.inputs.shiftKey?e.inputs.currentPagePoint:void 0;e.mark("paste"),e.putContent(t,{point:r,select:!0})}function dA(e,t,n){return fA.apply(this,arguments)}function fA(){return fA=b(m().mark((function e(t,n,r){var i,o;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(n);case 3:if(o=e.sent,null===(i=o.headers.get("content-type"))||void 0===i||!i.match(/^image\//)){e.next=8;break}return t.mark("paste"),uA(t,[n]),e.abrupt("return");case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),"Failed to fetch"!==e.t0.message&&console.error(e.t0);case 13:return t.mark("paste"),e.next=16,t.putExternalContent({type:"url",point:r,url:n});case 16:return e.abrupt("return",e.sent);case 17:case"end":return e.stop()}}),e,null,[[0,10]])}))),fA.apply(this,arguments)}function hA(){var e=Ml();return Il("editor.isFocused",(function(){return e.isFocused}),[e])}var pA=["input","select","textarea"];function vA(e){var t=document.activeElement;return e.isMenuOpen||t&&(t.getAttribute("contenteditable")||pA.indexOf(t.tagName.toLowerCase())>-1)}function gA(e){return mA.apply(this,arguments)}function mA(){return mA=b(m().mark((function e(t){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new FileReader;r.addEventListener("loadend",(function(){var t=r.result;e(t)})),r.addEventListener("error",(function(){n(r.error)})),r.readAsText(t)})));case 1:case"end":return e.stop()}}),e)}))),mA.apply(this,arguments)}function yA(e){var t=document.implementation.createHTMLDocument("");return t.documentElement.innerHTML=e.trim(),t.body.textContent||t.body.innerText||""}var bA=function(e){return e.types.find((function(e){return e.match(/^image\//)}))},wA=function(e,t,n){var r=function(e){var t,n=e.split(/[\n\s]/),r=w(n);try{for(r.s();!(t=r.n()).done;){var i=t.value;try{var o=new URL(i);if("http:"!==o.protocol&&"https:"!==o.protocol)return}catch(VO){return}}}catch(NG){r.e(NG)}finally{r.f()}return mh(n)}(t);if(r){var i,o=w(r);try{for(o.s();!(i=o.n()).done;){dA(e,i.value,n)}}catch(NG){o.e(NG)}finally{o.f()}}else!function(e){try{var t=new URL(e);return"http:"===t.protocol||"https:"===t.protocol}catch(VO){return!1}}(t)?/^<svg/.test(t)?(e.mark("paste"),e.putExternalContent({type:"svg-text",text:t,point:n})):(e.mark("paste"),e.putExternalContent({type:"text",text:t,point:n})):dA(e,t,n)},xA=function(){var e=b(m().mark((function e(t,n,r){var i,o,a,s;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===t.editingId){e.next=2;break}return e.abrupt("return");case 2:if(n){e.next=4;break}throw Error("No clipboard data");case 4:i=[],o=m().mark((function e(){var t;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=s[a],e.t0=t.kind,e.next="file"===e.t0?4:"string"===e.t0?6:8;break;case 4:return i.push({type:"file",source:new Promise((function(e){return e(t.getAsFile())}))}),e.abrupt("break",8);case 6:return"text/html"===t.type?i.push({type:"html",source:new Promise((function(e){return t.getAsString(e)}))}):"text/plain"===t.type?i.push({type:"text",source:new Promise((function(e){return t.getAsString(e)}))}):i.push({type:t.type,source:new Promise((function(e){return t.getAsString(e)}))}),e.abrupt("break",8);case 8:case"end":return e.stop()}}),e)})),a=0,s=Object.values(n.items);case 7:if(!(a<s.length)){e.next=12;break}return e.delegateYield(o(),"t0",9);case 9:a++,e.next=7;break;case 12:SA(t,i,r);case 13:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),kA=function(){var e=b(m().mark((function e(t,n,r){var i,o,a,s;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=[],o=w(n),e.prev=2,s=m().mark((function e(){var t,n,r,o;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.value,bA(t)){n=w(t.types);try{for(n.s();!(r=n.n()).done;)(o=r.value).match(/^image\//)&&i.push({type:"blob",source:t.getType(o)})}catch(NG){n.e(NG)}finally{n.f()}}t.types.includes("text/html")&&i.push({type:"html",source:new Promise((function(e){return t.getType("text/html").then((function(t){return gA(t).then(e)}))}))}),t.types.includes("text/uri-list")&&i.push({type:"url",source:new Promise((function(e){return t.getType("text/uri-list").then((function(t){return gA(t).then(e)}))}))}),t.types.includes("text/plain")&&i.push({type:"text",source:new Promise((function(e){return t.getType("text/plain").then((function(t){return gA(t).then(e)}))}))});case 5:case"end":return e.stop()}}),e)})),o.s();case 5:if((a=o.n()).done){e.next=9;break}return e.delegateYield(s(),"t0",7);case 7:e.next=5;break;case 9:e.next=14;break;case 11:e.prev=11,e.t1=e.catch(2),o.e(e.t1);case 14:return e.prev=14,o.f(),e.finish(14);case 17:return e.next=19,SA(t,i,r);case 19:return e.abrupt("return",e.sent);case 20:case"end":return e.stop()}}),e,null,[[2,11,14,17]])})));return function(t,n,r){return e.apply(this,arguments)}}();function SA(e,t,n){return _A.apply(this,arguments)}function _A(){return _A=b(m().mark((function e(t,n,r){var i,o,a,s,u,l,c,d,f,h,p,v,g,y,b,x,k,S,_,E,C,P;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.filter((function(e){return("file"===e.type||"blob"===e.type)&&null!==e.source})),!i.length){e.next=9;break}return e.next=4,Promise.all(i.map((function(e){return e.source})));case 4:return o=e.sent,a=o.filter(Boolean).map((function(e){return URL.createObjectURL(e)})),e.next=8,uA(t,a,r);case 8:return e.abrupt("return",e.sent);case 9:return e.next=11,Promise.all(n.filter((function(e){return"file"!==e.type})).map((function(e){return new Promise((function(t){var n=e;"file"!==n.type?n.source.then((function(e){var r,i=null===(r=e.match(/<tldraw[^>]*>(.*)<\/tldraw>/))||void 0===r?void 0:r[1];if(i)try{var o=(0,YM.decompressFromBase64)(i);if(null===o)return void t({type:"error",data:o,reason:"found tldraw data comment but could not parse base64"});var a=JSON.parse(o);return"application/tldraw"!==a.type&&t({type:"error",data:a,reason:"found tldraw data comment but JSON was of a different type: ".concat(a.type)}),"string"===typeof a.data?void t({type:"error",data:a,reason:"found tldraw json but data was a string instead of a TLClipboardModel object"}):void t({type:"tldraw",data:a.data})}catch(VO){return void t({type:"error",data:i,reason:"found tldraw json but data was a string instead of a TLClipboardModel object"})}else{if("html"===n.type)return void t({type:"text",data:e,subtype:"html"});if("url"===n.type)return void t({type:"text",data:e,subtype:"url"});try{var s=JSON.parse(e);return"excalidraw/clipboard"===s.type?void t({type:"excalidraw",data:s}):void t({type:"text",data:e,subtype:"json"})}catch(VO){return void t({type:"text",data:e,subtype:"text"})}}t({type:"error",data:e,reason:"unhandled case"})})):t({type:"error",data:null,reason:"unexpected file"})}))})));case 11:s=e.sent,u=w(s),e.prev=13,u.s();case 15:if((l=u.n()).done){e.next=22;break}if("tldraw"!==(c=l.value).type){e.next=20;break}return cA(t,c.data,r),e.abrupt("return");case 20:e.next=15;break;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(13),u.e(e.t0);case 27:return e.prev=27,u.f(),e.finish(27);case 30:d=w(s),e.prev=31,d.s();case 33:if((f=d.n()).done){e.next=40;break}if("excalidraw"!==(h=f.value).type){e.next=38;break}return qM(t,h.data,r),e.abrupt("return");case 38:e.next=33;break;case 40:e.next=45;break;case 42:e.prev=42,e.t1=e.catch(31),d.e(e.t1);case 45:return e.prev=45,d.f(),e.finish(45);case 48:p=w(s),e.prev=49,p.s();case 51:if((v=p.n()).done){e.next=66;break}if("text"!==(g=v.value).type||"html"!==g.subtype){e.next=64;break}if(y=(new DOMParser).parseFromString(g.data,"text/html"),b=y.querySelector("body"),!(b&&1===Array.from(b.children).filter((function(e){return 1===e.nodeType})).length&&b.firstElementChild&&"A"===b.firstElementChild.tagName&&b.firstElementChild.hasAttribute("href")&&""!==b.firstElementChild.getAttribute("href"))){e.next=61;break}return x=b.firstElementChild.getAttribute("href"),wA(t,x,r),e.abrupt("return");case 61:if(s.some((function(e){return"text"===e.type&&"html"!==e.subtype}))||!g.data.trim()){e.next=64;break}return wA(t,yA(g.data),r),e.abrupt("return");case 64:e.next=51;break;case 66:e.next=71;break;case 68:e.prev=68,e.t2=e.catch(49),p.e(e.t2);case 71:return e.prev=71,p.f(),e.finish(71);case 74:k=w(s),e.prev=75,k.s();case 77:if((S=k.n()).done){e.next=84;break}if("text"!==(_=S.value).type||"url"!==_.subtype){e.next=82;break}return dA(t,_.data,r),e.abrupt("return");case 82:e.next=77;break;case 84:e.next=89;break;case 86:e.prev=86,e.t3=e.catch(75),k.e(e.t3);case 89:return e.prev=89,k.f(),e.finish(89);case 92:E=w(s),e.prev=93,E.s();case 95:if((C=E.n()).done){e.next=102;break}if("text"!==(P=C.value).type||"text"!==P.subtype||!P.data.trim()){e.next=100;break}return wA(t,P.data,r),e.abrupt("return");case 100:e.next=95;break;case 102:e.next=107;break;case 104:e.prev=104,e.t4=e.catch(93),E.e(e.t4);case 107:return e.prev=107,E.f(),e.finish(107);case 110:case"end":return e.stop()}}),e,null,[[13,24,27,30],[31,42,45,48],[49,68,71,74],[75,86,89,92],[93,104,107,110]])}))),_A.apply(this,arguments)}var EA=function(e){var t=e.getContent();if(t){var n=(0,YM.compressToBase64)(JSON.stringify({type:"application/tldraw",kind:"content",data:t}));if("undefined"!==typeof navigator){var r,i=t.shapes.map((function(t){return e.isShapeOfType(t,Jh)||e.isShapeOfType(t,$g)||e.isShapeOfType(t,Bv)?t.props.text:e.isShapeOfType(t,$v)||e.isShapeOfType(t,Lh)?t.props.url:null})).filter(qr);if(null!==(r=navigator.clipboard)&&void 0!==r&&r.write){var o=new Blob(["<tldraw>".concat(n,"</tldraw>")],{type:"text/html"}),a=i.join(" ");""===a&&(a=" "),navigator.clipboard.write([new ClipboardItem({"text/html":o,"text/plain":new Blob([a],{type:"text/plain"})})])}else navigator.clipboard.writeText&&navigator.clipboard.writeText("<tldraw>".concat(n,"</tldraw>"))}}else navigator&&navigator.clipboard&&navigator.clipboard.writeText("")};var CA=(0,t.createContext)({});function PA(e){var n=e.children,r=l((0,t.useState)([]),2),i=r[0],o=r[1],a=(0,t.useCallback)((function(e){var t,n=null!==(t=e.id)&&void 0!==t?t:Bp();return o((function(t){return[].concat(d(t.filter((function(t){return t.id!==e.id}))),[mt(mt({},e),{},{id:n})])})),n}),[]),s=(0,t.useCallback)((function(e){return o((function(t){return t.filter((function(t){return t.id!==e}))})),e}),[]),u=(0,t.useCallback)((function(){o((function(){return[]}))}),[]);return(0,f.jsx)(CA.Provider,{value:{toasts:i,addToast:a,removeToast:s,clearToasts:u},children:n})}function IA(){var e=(0,t.useContext)(CA);if(!e)throw new Error("useToasts must be used within a ToastsProvider");return e}function jA(){var e=Ml(),n=IA().addToast,r=P_();return(0,t.useCallback)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.selectedIds,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"svg";if(0===t.length&&(t=d(e.currentPageShapeIds)),0!==t.length)switch(i){case"svg":window.navigator.clipboard&&(window.navigator.clipboard.write?window.navigator.clipboard.write([new ClipboardItem({"text/plain":TA(e,t)})]):RA(b(m().mark((function n(){return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=Tx,n.next=3,MA(e,t);case 3:return n.t1=n.sent,n.abrupt("return",(0,n.t0)(n.t1));case 5:case"end":return n.stop()}}),n)})))));break;case"jpeg":case"png":var o="jpeg"===i?"image/jpeg":"image/png",a=function(e,t,n){return NA.apply(this,arguments)}(e,t,i).then((function(e){if(e){if(window.navigator.clipboard)return e;throw new Error("Copy not supported")}throw n({id:"copy-fail",icon:"warning-triangle",title:r("toast.error.copy-fail.title"),description:r("toast.error.copy-fail.desc")}),new Error("Copy not possible")}));window.navigator.clipboard.write([new ClipboardItem(vt({},o,a))]).catch((function(e){e.toString().match(/^TypeError: DOMString not supported/)||console.error(e),a.then((function(e){window.navigator.clipboard.write([new ClipboardItem(vt({},o,e))])}))}));break;case"json":var s=e.getContent(t);if(window.navigator.clipboard){var u=JSON.stringify(s);window.navigator.clipboard.write?window.navigator.clipboard.write([new ClipboardItem({"text/plain":new Blob([u],{type:"text/plain"})})]):RA(b(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u);case 1:case"end":return e.stop()}}),e)}))))}break;default:throw new Error("Copy type ".concat(i," not supported."))}}),[e,n,r])}function MA(e,t){return AA.apply(this,arguments)}function AA(){return(AA=b(m().mark((function e(t,n){var r;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getSvg(n,{scale:1,background:t.instanceState.exportBackground});case 2:if(r=e.sent){e.next=5;break}throw new Error("Could not construct SVG.");case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function TA(e,t){return OA.apply(this,arguments)}function OA(){return(OA=b(m().mark((function e(t,n){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Blob,e.t1=Tx,e.next=4,MA(t,n);case 4:return e.t2=e.sent,e.t3=(0,e.t1)(e.t2),e.t4=[e.t3],e.t5={type:"text/plain"},e.abrupt("return",new e.t0(e.t4,e.t5));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function NA(){return NA=b(m().mark((function e(t,n,r){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Ox,e.next=3,MA(t,n);case 3:return e.t1=e.sent,e.t2={type:r,quality:1,scale:2},e.next=7,(0,e.t0)(e.t1,e.t2);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)}))),NA.apply(this,arguments)}function RA(e){return LA.apply(this,arguments)}function LA(){return(LA=b(m().mark((function e(t){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator&&navigator.clipboard){e.next=2;break}return e.abrupt("return");case 2:return e.t0=navigator.clipboard,e.next=5,t();case 5:e.t1=e.sent,e.t0.writeText.call(e.t0,e.t1);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var DA=(0,t.createContext)({});function zA(e){var n=e.children,r=Ml(),i=Cj(),o=l((0,t.useState)([]),2),a=o[0],s=o[1],u=(0,t.useCallback)((function(e){var t,n=null!==(t=e.id)&&void 0!==t?t:Bp();return s((function(t){return[].concat(d(t.filter((function(t){return t.id!==e.id}))),[mt(mt({},e),{},{id:n})])})),i("open-menu",{source:"dialog",id:n}),r.addOpenMenu(n),n}),[r,i]),c=(0,t.useCallback)((function(e,t){return s((function(n){return n.map((function(n){return n.id===e?mt(mt({},n),t):n}))})),i("open-menu",{source:"dialog",id:e}),r.addOpenMenu(e),e}),[r,i]),h=(0,t.useCallback)((function(e){return s((function(t){return t.filter((function(t){var n;return t.id!==e||(null===(n=t.onClose)||void 0===n||n.call(t),!1)}))})),i("close-menu",{source:"dialog",id:e}),r.deleteOpenMenu(e),e}),[r,i]),p=(0,t.useCallback)((function(){s((function(e){return e.forEach((function(e){var t;null===(t=e.onClose)||void 0===t||t.call(e),i("close-menu",{source:"dialog",id:e.id}),r.deleteOpenMenu(e.id)})),[]}))}),[r,i]);return(0,f.jsx)(DA.Provider,{value:{dialogs:a,addDialog:u,removeDialog:h,clearDialogs:p,updateDialog:c},children:n})}function BA(){var e=(0,t.useContext)(DA);if(!e)throw new Error("useDialogs must be used within a DialogsProvider");return e}function FA(){var e=Ml(),n=(0,t.useRef)();return(0,t.useEffect)((function(){var t=window.document.createElement("input");function r(e){return i.apply(this,arguments)}function i(){return i=b(m().mark((function n(r){var i;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((i=r.target.files)&&0!==i.length){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,e.putExternalContent({type:"files",files:Array.from(i),point:e.viewportPageBounds.center,ignoreParent:!1});case 5:t.value="";case 6:case"end":return n.stop()}}),n)}))),i.apply(this,arguments)}return t.type="file",t.accept=cy,t.multiple=!0,n.current=t,t.addEventListener("change",r),function(){n.current=void 0,t.removeEventListener("change",r)}}),[e]),(0,t.useCallback)((function(){var e;null===(e=n.current)||void 0===e||e.click()}),[n])}var UA=t.createContext({});function KA(e){var n=e.overrides,r=e.children,i=Ml(),o=BA(),a=o.addDialog,s=o.clearDialogs,u=IA().clearToasts,l=FA(),c=function(){var e=Ml(),n=(0,t.useRef)(null),r=(0,t.useRef)(null);return(0,t.useCallback)(function(){var t=b(m().mark((function t(){var i,o,a,s,u,l,c,d,f,h,p,v,g,y,b,w,x,k,S,_;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(f=function(){e.isChromeForIos?(l(),window.print()):e.isSafari?(l(),document.execCommand("print",!1)):window.print()},d=function(e,t,n){try{i.innerHTML+='<div class="'.concat(s,'__item">\n        <div class="').concat(s,'__item__header">\n          ').concat(e.replace(/</g,"&lt;").replace(/>/g,"&gt;"),'\n        </div>\n        <div class="').concat(s,'__item__main">\n          ').concat(n.outerHTML,'\n        </div>\n        <div class="').concat(s,"__item__footer ").concat(s,"__item__footer__").concat(t?"":"hide",'">\n          ').concat(null!==t&&void 0!==t?t:"","\n        </div>\n      </div>")}catch(VO){console.error(VO)}},i=document.createElement("div"),o=document.createElement("style"),(a=function(e,t){e&&(e.innerHTML=""),t&&document.head.contains(t)&&document.head.removeChild(t),e&&document.body.contains(e)&&document.body.removeChild(e)})(n.current,r.current),n.current=i,r.current=o,s="tl-print-surface-".concat(Bp()),i.className=s,u=!1,o.innerHTML="\n\t\t\t.".concat(s," {\n\t\t\t\tdisplay: none;\n\t\t\t}\n\n\t\t\t.").concat(s," svg {\n\t\t\t\tmax-width: 100%;\n\t\t\t\theight: 100%;\n\t\t\t\tdisplay: block;\n\t\t\t}\n\n\t\t\t@media print {\t\t\t\t  \n\t\t\t\thtml, body {\n\t\t\t\t\tmin-height: 100%;\n\t\t\t\t\theight: 100%;\n\t\t\t\t\tmargin: 0;\n\t\t\t\t}\n\n\t\t\t\tbody {\n\t\t\t\t\tposition: relative;\n\t\t\t\t}\n\n\t\t\t\tbody > * {\n\t\t\t\t\tdisplay: none;\n\t\t\t\t}\n\n\t\t\t\t.").concat(s," {\n\t\t\t\t\tdisplay: block !important;\n\t\t\t\t\tbackground: white;\n\t\t\t\t\tmin-height: 100%;\n\t\t\t\t\theight: 100%;\n\t\t\t\t\tmax-width: 100%;\n\t\t\t\t}\n\n\t\t\t\t.").concat(s,"__item {\n\t\t\t\t\tpadding: 10mm;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tmin-height: 100%;\n\t\t\t\t\tflex-direction: column;\n\t\t\t\t\tpage-break-after: always;\n\t\t\t\t\tposition: relative;\n\t\t\t\t\toverflow: hidden;\n\t\t\t\t\theight: 100%;\n\t\t\t\t}\n\n\t\t\t\t.").concat(s,"__item__main {\n\t\t\t\t\tflex: 1;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tjustify-content: center;\n\t\t\t\t\tmax-height: 100%;\n\t\t\t\t}\n\n\t\t\t\t.").concat(s,"__item__header {\n\t\t\t\t\tdisplay: none;\n\t\t\t\t}\n\n\t\t\t\t.").concat(s,"__item__footer {\n\t\t\t\t\tdisplay: none;\n\t\t\t\t\ttext-align: right;\n\t\t\t\t}\n\n\t\t\t\t.").concat(s,"__item__footer__hide {\n\t\t\t\t\tdisplay: none;\n\t\t\t\t}\n\n\t\t\t\t").concat("","\n\t\t\t}\n\n\t\t"),l=function(){document.head.appendChild(o),document.body.appendChild(i)},c=function(){e.once("change-history",(function(){a(i,o)}))},window.addEventListener("beforeprint",l),window.addEventListener("afterprint",c),h=e.pages,p=e.currentPageId,v=e.selectedIds,g={scale:1,background:!1,darkMode:!1,preserveAspectRatio:"xMidYMid meet"},!(e.selectedIds.length>0)){t.next=27;break}return t.next=23,e.getSvg(v,g);case 23:(y=t.sent)&&(b=h.find((function(e){return e.id===p})),d("tldraw \u2014 ".concat(null===b||void 0===b?void 0:b.name),null,y),f()),t.next=46;break;case 27:if(!u){t.next=41;break}w=0;case 29:if(!(w<h.length)){t.next=38;break}return x=h[w],t.next=33,e.getSvg(e.getSortedChildIds(x.id),g);case 33:(k=t.sent)&&d("tldraw \u2014 ".concat(x.name),"".concat(w,"/").concat(h.length),k);case 35:w++,t.next=29;break;case 38:f(),t.next=46;break;case 41:return S=e.currentPage,t.next=44,e.getSvg(e.getSortedChildIds(S.id),g);case 44:(_=t.sent)&&(d("tldraw \u2014 ".concat(S.name),null,_),f());case 46:window.removeEventListener("beforeprint",l),window.removeEventListener("afterprint",c);case 48:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),[e])}(),h=function(){var e=Ml(),n=Cj(),r=(0,t.useCallback)((function(t){0!==e.selectedIds.length&&(EA(e),n("copy",{source:t}))}),[e,n]),i=(0,t.useCallback)((function(t){0!==e.selectedIds.length&&(EA(e),e.deleteShapes(),n("cut",{source:t}))}),[e,n]),o=(0,t.useCallback)(function(){var t=b(m().mark((function t(r,i,a){return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===e.editingId&&!vA(e)){t.next=2;break}return t.abrupt("return");case 2:Array.isArray(r)&&r[0]instanceof ClipboardItem?(kA(e,r,a),n("paste",{source:"menu"})):navigator.clipboard.read().then((function(e){o(e,i,a)}));case 3:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),[e,n]);return{copy:r,cut:i,paste:o}}(),p=h.cut,v=h.copy,g=h.paste,y=jA(),x=function(){var e=Ml(),n=IA().addToast,r=P_();return(0,t.useCallback)(function(){var t=b(m().mark((function t(){var i,o,a,s,u,l,c,f,h,p,v=arguments;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>0&&void 0!==v[0]?v[0]:e.selectedIds,o=v.length>1&&void 0!==v[1]?v[1]:"png",0===i.length&&(i=d(e.currentPageShapeIds)),0!==i.length){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,e.getSvg(i,{scale:1,background:e.instanceState.exportBackground});case 7:if(a=t.sent){t.next=10;break}throw new Error("Could not construct SVG.");case 10:s="shapes",1===i.length&&(u=e.getShapeById(i[0]),s=e.isShapeOfType(u,Ig)?null!==(l=u.props.name)&&void 0!==l?l:"frame":u.id.replace(/:/,"_")),t.t0=o,t.next="svg"===t.t0?15:"webp"===t.t0||"png"===t.t0?20:"json"===t.t0?30:35;break;case 15:return t.next=17,Rx(a);case 17:return zx(t.sent,"".concat(s||"shapes",".svg")),t.abrupt("return");case 20:return t.next=22,Ox(a,{type:o,quality:1,scale:2});case 22:if(c=t.sent){t.next=26;break}return n({id:"export-fail",title:r("toast.error.export-fail.title"),description:r("toast.error.export-fail.desc")}),t.abrupt("return");case 26:return zx(f=URL.createObjectURL(c),"".concat(s||"shapes",".").concat(o)),URL.revokeObjectURL(f),t.abrupt("return");case 30:return h=e.getContent(i),zx(p=URL.createObjectURL(new Blob([JSON.stringify(h,null,4)],{type:"application/json"})),"".concat(s||"shapes",".json")),URL.revokeObjectURL(p),t.abrupt("return");case 35:throw new Error("Export type ".concat(o," not supported."));case 36:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),[e,n,r])}(),k=Cj(),S=t.useMemo((function(){var e=function(e){return Object.fromEntries(e.map((function(e){return[e.id,e]})))}([{id:"edit-link",label:"action.edit-link",icon:"link",readonlyOk:!1,onSelect:function(e){k("edit-link",{source:e}),i.mark("edit-link"),a({component:VM})}},{id:"insert-embed",label:"action.insert-embed",readonlyOk:!1,kbd:"$i",onSelect:function(e){k("insert-embed",{source:e}),a({component:HM})}},{id:"insert-media",label:"action.insert-media",kbd:"$u",readonlyOk:!1,onSelect:function(e){k("insert-media",{source:e}),l()}},{id:"undo",label:"action.undo",icon:"undo",kbd:"$z",readonlyOk:!1,onSelect:function(e){k("undo",{source:e}),i.undo()}},{id:"redo",label:"action.redo",icon:"redo",kbd:"$!z",readonlyOk:!1,onSelect:function(e){k("redo",{source:e}),i.redo()}},{id:"export-as-svg",label:"action.export-as-svg",menuLabel:"action.export-as-svg.short",contextMenuLabel:"action.export-as-svg.short",readonlyOk:!0,onSelect:function(e){k("export-as",{format:"svg",source:e}),x(i.selectedIds,"svg")}},{id:"export-as-png",label:"action.export-as-png",menuLabel:"action.export-as-png.short",contextMenuLabel:"action.export-as-png.short",readonlyOk:!0,onSelect:function(e){k("export-as",{format:"png",source:e}),x(i.selectedIds,"png")}},{id:"export-as-json",label:"action.export-as-json",menuLabel:"action.export-as-json.short",contextMenuLabel:"action.export-as-json.short",readonlyOk:!0,onSelect:function(e){k("export-as",{format:"json",source:e}),x(i.selectedIds,"json")}},{id:"copy-as-svg",label:"action.copy-as-svg",menuLabel:"action.copy-as-svg.short",contextMenuLabel:"action.copy-as-svg.short",kbd:"$!c",readonlyOk:!0,onSelect:function(e){k("copy-as",{format:"svg",source:e}),y(i.selectedIds,"svg")}},{id:"copy-as-png",label:"action.copy-as-png",menuLabel:"action.copy-as-png.short",contextMenuLabel:"action.copy-as-png.short",readonlyOk:!0,onSelect:function(e){k("copy-as",{format:"png",source:e}),y(i.selectedIds,"png")}},{id:"copy-as-json",label:"action.copy-as-json",menuLabel:"action.copy-as-json.short",contextMenuLabel:"action.copy-as-json.short",readonlyOk:!0,onSelect:function(e){k("copy-as",{format:"json",source:e}),y(i.selectedIds,"json")}},{id:"toggle-auto-size",label:"action.toggle-auto-size",readonlyOk:!1,onSelect:function(e){k("toggle-auto-size",{source:e}),i.mark(),i.updateShapes(i.selectedShapes.filter((function(e){return i.isShapeOfType(e,Jh)&&!1===e.props.autoSize})).map((function(e){return{id:e.id,type:e.type,props:mt(mt({},e.props),{},{w:8,autoSize:!0})}})))}},{id:"open-embed-link",label:"action.open-embed-link",readonlyOk:!0,onSelect:function(e){k("open-embed-link",{source:e});var t=i.selectedIds,n="No embed shapes selected";if(1===t.length){var r=i.getShapeById(t[0]);r&&i.isShapeOfType(r,Lh)?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_blank";Al.openWindow(e,t)}(r.props.url,"_blank"):console.error(n)}else console.error(n)}},{id:"convert-to-bookmark",label:"action.convert-to-bookmark",readonlyOk:!1,onSelect:function(e){k("convert-to-bookmark",{source:e});var t,n=[],r=[],o=w(i.selectedShapes);try{for(o.s();!(t=o.n()).done;){var a=t.value;if(a&&i.isShapeOfType(a,Lh)&&a.props.url){var s=new Nl(a.x,a.y);s.rot(-a.rotation),s.add(new Nl(a.props.w/2-150,a.props.h/2-160)),s.rot(a.rotation),n.push({id:Os(),type:"bookmark",rotation:a.rotation,x:s.x,y:s.y,props:{url:a.props.url,opacity:"1"}}),r.push(a.id)}}}catch(NG){o.e(NG)}finally{o.f()}i.mark("convert shapes to bookmark"),i.deleteShapes(r),i.createShapes(n)}},{id:"convert-to-embed",label:"action.convert-to-embed",readonlyOk:!1,onSelect:function(e){k("convert-to-embed",{source:e});var t,n=br(i.selectedIds.map((function(e){return i.getShapeById(e)}))),r=[],o=[],a=w(n);try{for(a.s();!(t=a.n()).done;){var s=t.value;if(i.isShapeOfType(s,$v)){var u=s.props.url,l=jh(s.props.url);if(l&&l.definition){var c=l.definition,d=c.width,f=c.height,h=new Nl(s.x,s.y);h.rot(-s.rotation),h.add(new Nl(s.props.w/2-d/2,s.props.h/2-f/2)),h.rot(s.rotation);var p={id:Os(),type:"embed",x:h.x,y:h.y,rotation:s.rotation,props:{url:u,w:d,h:f}};r.push(p),o.push(s.id)}}}}catch(NG){a.e(NG)}finally{a.f()}i.mark("convert shapes to embed"),i.deleteShapes(o),i.createShapes(r)}},{id:"duplicate",kbd:"$d",label:"action.duplicate",icon:"duplicate",readonlyOk:!1,onSelect:function(e){if("select"===i.currentToolId){k("duplicate-shapes",{source:e});var t=i.selectedIds,n=lc.Common(br(t.map((function(e){return i.getPageBoundsById(e)})))),r=i.canMoveCamera?{x:n.width+10,y:0}:{x:16/i.zoomLevel,y:16/i.zoomLevel};i.mark("duplicate shapes"),i.duplicateShapes(t,r)}}},{id:"ungroup",label:"action.ungroup",kbd:"$!g",icon:"ungroup",readonlyOk:!1,onSelect:function(e){k("ungroup-shapes",{source:e}),i.mark("ungroup"),i.ungroupShapes(i.selectedIds)}},{id:"group",label:"action.group",kbd:"$g",icon:"group",readonlyOk:!1,onSelect:function(e){k("group-shapes",{source:e});var t=i.onlySelectedShape;t&&i.isShapeOfType(t,Eg)?(i.mark("ungroup"),i.ungroupShapes(i.selectedIds)):(i.mark("group"),i.groupShapes(i.selectedIds))}},{id:"align-left",label:"action.align-left",kbd:"?A",icon:"align-left",readonlyOk:!1,onSelect:function(e){k("align-shapes",{operation:"left",source:e}),i.mark("align left"),i.alignShapes("left",i.selectedIds)}},{id:"align-center-horizontal",label:"action.align-center-horizontal",contextMenuLabel:"action.align-center-horizontal.short",kbd:"?H",icon:"align-center-horizontal",readonlyOk:!1,onSelect:function(e){k("align-shapes",{operation:"center-horizontal",source:e}),i.mark("align center horizontal"),i.alignShapes("center-horizontal",i.selectedIds)}},{id:"align-right",label:"action.align-right",kbd:"?D",icon:"align-right",readonlyOk:!1,onSelect:function(e){k("align-shapes",{operation:"right",source:e}),i.mark("align right"),i.alignShapes("right",i.selectedIds)}},{id:"align-center-vertical",label:"action.align-center-vertical",contextMenuLabel:"action.align-center-vertical.short",kbd:"?V",icon:"align-center-vertical",readonlyOk:!1,onSelect:function(e){k("align-shapes",{operation:"center-vertical",source:e}),i.mark("align center vertical"),i.alignShapes("center-vertical",i.selectedIds)}},{id:"align-top",label:"action.align-top",icon:"align-top",kbd:"?W",readonlyOk:!1,onSelect:function(e){k("align-shapes",{operation:"top",source:e}),i.mark("align top"),i.alignShapes("top",i.selectedIds)}},{id:"align-bottom",label:"action.align-bottom",icon:"align-bottom",kbd:"?S",readonlyOk:!1,onSelect:function(e){k("align-shapes",{operation:"bottom",source:e}),i.mark("align bottom"),i.alignShapes("bottom",i.selectedIds)}},{id:"distribute-horizontal",label:"action.distribute-horizontal",contextMenuLabel:"action.distribute-horizontal.short",icon:"distribute-horizontal",kbd:"?!h",readonlyOk:!1,onSelect:function(e){k("distribute-shapes",{operation:"horizontal",source:e}),i.mark("distribute horizontal"),i.distributeShapes("horizontal",i.selectedIds)}},{id:"distribute-vertical",label:"action.distribute-vertical",contextMenuLabel:"action.distribute-vertical.short",icon:"distribute-vertical",kbd:"?!V",readonlyOk:!1,onSelect:function(e){k("distribute-shapes",{operation:"vertical",source:e}),i.mark("distribute vertical"),i.distributeShapes("vertical",i.selectedIds)}},{id:"stretch-horizontal",label:"action.stretch-horizontal",contextMenuLabel:"action.stretch-horizontal.short",icon:"stretch-horizontal",readonlyOk:!1,onSelect:function(e){k("stretch-shapes",{operation:"horizontal",source:e}),i.mark("stretch horizontal"),i.stretchShapes("horizontal",i.selectedIds)}},{id:"stretch-vertical",label:"action.stretch-vertical",contextMenuLabel:"action.stretch-vertical.short",icon:"stretch-vertical",readonlyOk:!1,onSelect:function(e){k("stretch-shapes",{operation:"vertical",source:e}),i.mark("stretch vertical"),i.stretchShapes("vertical",i.selectedIds)}},{id:"flip-horizontal",label:"action.flip-horizontal",contextMenuLabel:"action.flip-horizontal.short",kbd:"!h",readonlyOk:!1,onSelect:function(e){k("flip-shapes",{operation:"horizontal",source:e}),i.mark("flip horizontal"),i.flipShapes("horizontal",i.selectedIds)}},{id:"flip-vertical",label:"action.flip-vertical",contextMenuLabel:"action.flip-vertical.short",kbd:"!v",readonlyOk:!1,onSelect:function(e){k("flip-shapes",{operation:"vertical",source:e}),i.mark("flip vertical"),i.flipShapes("vertical",i.selectedIds)}},{id:"pack",label:"action.pack",icon:"pack",readonlyOk:!1,onSelect:function(e){k("pack-shapes",{source:e}),i.mark("pack"),i.packShapes(i.selectedIds)}},{id:"stack-vertical",label:"action.stack-vertical",contextMenuLabel:"action.stack-vertical.short",icon:"stack-vertical",readonlyOk:!1,onSelect:function(e){k("stack-shapes",{operation:"vertical",source:e}),i.mark("stack-vertical"),i.stackShapes("vertical",i.selectedIds)}},{id:"stack-horizontal",label:"action.stack-horizontal",contextMenuLabel:"action.stack-horizontal.short",icon:"stack-horizontal",readonlyOk:!1,onSelect:function(e){k("stack-shapes",{operation:"horizontal",source:e}),i.mark("stack-horizontal"),i.stackShapes("horizontal",i.selectedIds)}},{id:"bring-to-front",label:"action.bring-to-front",kbd:"]",icon:"bring-to-front",readonlyOk:!1,onSelect:function(e){k("reorder-shapes",{operation:"toFront",source:e}),i.mark("bring to front"),i.bringToFront()}},{id:"bring-forward",label:"action.bring-forward",icon:"bring-forward",kbd:"?]",readonlyOk:!1,onSelect:function(e){k("reorder-shapes",{operation:"forward",source:e}),i.mark("bring forward"),i.bringForward()}},{id:"send-backward",label:"action.send-backward",icon:"send-backward",kbd:"?[",readonlyOk:!1,onSelect:function(e){k("reorder-shapes",{operation:"backward",source:e}),i.mark("send backward"),i.sendBackward()}},{id:"send-to-back",label:"action.send-to-back",icon:"send-to-back",kbd:"[",readonlyOk:!1,onSelect:function(e){k("reorder-shapes",{operation:"toBack",source:e}),i.mark("send to back"),i.sendToBack()}},{id:"cut",label:"action.cut",kbd:"$x",readonlyOk:!1,onSelect:function(e){i.mark("cut"),p(e)}},{id:"copy",label:"action.copy",kbd:"$c",readonlyOk:!0,onSelect:function(e){v(e)}},{id:"paste",label:"action.paste",kbd:"$v",readonlyOk:!1,onSelect:function(e){var t;null===(t=navigator.clipboard)||void 0===t||t.read().then((function(t){g(t,e,"context-menu"===e?i.inputs.currentPagePoint:void 0)}))}},{id:"select-all",label:"action.select-all",kbd:"$a",readonlyOk:!0,onSelect:function(e){k("select-all-shapes",{source:e}),"select"!==i.currentToolId&&(i.cancel(),i.setSelectedTool("select")),i.mark("select all kbd"),i.selectAll()}},{id:"select-none",label:"action.select-none",readonlyOk:!0,onSelect:function(e){k("select-none-shapes",{source:e}),i.mark("select none"),i.selectNone()}},{id:"delete",label:"action.delete",kbd:"\u232b,del,backspace",icon:"trash",readonlyOk:!1,onSelect:function(e){"select"===i.currentToolId&&(k("delete-shapes",{source:e}),i.mark("delete"),i.deleteShapes())}},{id:"rotate-cw",label:"action.rotate-cw",icon:"rotate-cw",readonlyOk:!1,onSelect:function(e){if(0!==i.selectedIds.length){k("rotate-cw",{source:e}),i.mark("rotate-cw");var t=i.selectionRotation%(Dl/2),n=Vl(t,0)||Vl(t,Dl/2);i.rotateShapesBy(i.selectedIds,Dl/2-(n?0:t))}}},{id:"rotate-ccw",label:"action.rotate-ccw",icon:"rotate-ccw",readonlyOk:!1,onSelect:function(e){if(0!==i.selectedIds.length){k("rotate-ccw",{source:e}),i.mark("rotate-ccw");var t=i.selectionRotation%(Dl/2),n=Vl(t,0);i.rotateShapesBy(i.selectedIds,n?-Dl/2:-t)}}},{id:"zoom-in",label:"action.zoom-in",kbd:"$=,=",readonlyOk:!0,onSelect:function(e){k("zoom-in",{source:e}),i.zoomIn(i.viewportScreenCenter,{duration:bd})}},{id:"zoom-out",label:"action.zoom-out",kbd:"$-,-",readonlyOk:!0,onSelect:function(e){k("zoom-out",{source:e}),i.zoomOut(i.viewportScreenCenter,{duration:bd})}},{id:"zoom-to-100",label:"action.zoom-to-100",icon:"reset-zoom",kbd:"!0",readonlyOk:!0,onSelect:function(e){k("reset-zoom",{source:e}),i.resetZoom(i.viewportScreenCenter,{duration:bd})}},{id:"zoom-to-fit",label:"action.zoom-to-fit",kbd:"!1",readonlyOk:!0,onSelect:function(e){k("zoom-to-fit",{source:e}),i.zoomToFit({duration:bd})}},{id:"zoom-to-selection",label:"action.zoom-to-selection",kbd:"!2",readonlyOk:!0,onSelect:function(e){k("zoom-to-selection",{source:e}),i.zoomToSelection({duration:bd})}},{id:"toggle-snap-mode",label:"action.toggle-snap-mode",menuLabel:"action.toggle-snap-mode.menu",readonlyOk:!1,onSelect:function(e){k("toggle-snap-mode",{source:e}),i.setSnapMode(!i.isSnapMode)},checkbox:!0},{id:"toggle-dark-mode",label:"action.toggle-dark-mode",menuLabel:"action.toggle-dark-mode.menu",kbd:"$/",readonlyOk:!0,onSelect:function(e){k("toggle-dark-mode",{source:e}),i.setDarkMode(!i.isDarkMode)},checkbox:!0},{id:"toggle-reduce-motion",label:"action.toggle-reduce-motion",menuLabel:"action.toggle-reduce-motion.menu",readonlyOk:!0,onSelect:function(e){k("toggle-reduce-motion",{source:e}),i.setAnimationSpeed(0===i.animationSpeed?1:0)},checkbox:!0},{id:"toggle-transparent",label:"action.toggle-transparent",menuLabel:"action.toggle-transparent.menu",contextMenuLabel:"action.toggle-transparent.context-menu",readonlyOk:!0,onSelect:function(e){k("toggle-transparent",{source:e}),i.updateInstanceState({exportBackground:!i.instanceState.exportBackground},!0)},checkbox:!0},{id:"toggle-tool-lock",label:"action.toggle-tool-lock",menuLabel:"action.toggle-tool-lock.menu",readonlyOk:!1,kbd:"q",onSelect:function(e){k("toggle-tool-lock",{source:e}),i.setToolLocked(!i.isToolLocked)},checkbox:!0},{id:"toggle-focus-mode",label:"action.toggle-focus-mode",menuLabel:"action.toggle-focus-mode.menu",readonlyOk:!0,kbd:"$.",checkbox:!0,onSelect:function(e){requestAnimationFrame((function(){i.batch((function(){k("toggle-focus-mode",{source:e}),s(),u(),i.setFocusMode(!i.isFocusMode)}))}))}},{id:"toggle-grid",label:"action.toggle-grid",menuLabel:"action.toggle-grid.menu",readonlyOk:!0,kbd:"$'",onSelect:function(e){k("toggle-grid-mode",{source:e}),i.setGridMode(!i.isGridMode)},checkbox:!0},{id:"toggle-debug-mode",label:"action.toggle-debug-mode",menuLabel:"action.toggle-debug-mode.menu",readonlyOk:!0,onSelect:function(e){k("toggle-debug-mode",{source:e}),i.updateInstanceState({isDebugMode:!i.instanceState.isDebugMode},!0)},checkbox:!0},{id:"print",label:"action.print",kbd:"$p",readonlyOk:!0,onSelect:function(e){k("print",{source:e}),c()}},{id:"exit-pen-mode",label:"action.exit-pen-mode",icon:"cross-2",readonlyOk:!0,onSelect:function(e){k("exit-pen-mode",{source:e}),i.setPenMode(!1)}},{id:"stop-following",label:"action.stop-following",icon:"cross-2",readonlyOk:!0,onSelect:function(e){k("stop-following",{source:e}),i.stopFollowingUser()}},{id:"back-to-content",label:"action.back-to-content",icon:"arrow-left",readonlyOk:!0,onSelect:function(e){k("zoom-to-content",{source:e}),i.zoomToContent()}},{id:"toggle-lock",label:"action.toggle-lock",readonlyOk:!1,kbd:"!$l",onSelect:function(e){k("toggle-lock",{source:e}),i.toggleLock()}}]);return n?n(i,e,void 0):e}),[k,n,i,a,l,x,y,p,v,g,s,u,c]);return(0,f.jsx)(UA.Provider,{value:S,children:r})}function VA(){var e=t.useContext(UA);if(!e)throw new Error("useTools must be used within a ToolProvider");return e}function WA(e){return e.filter((function(e){return void 0!==e&&null!==e&&!1!==e}))}function HA(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=WA(n);return 0===i.length?null:{id:e,type:"group",checkbox:i.every((function(e){return"item"===e.type&&e.actionItem.checkbox})),disabled:i.every((function(e){return e.disabled})),readonlyOk:i.some((function(e){return e.readonlyOk})),children:i}}function YA(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=WA(r);return 0===o.length?null:{id:e,type:"submenu",label:t,children:o,disabled:o.every((function(e){return e.disabled})),readonlyOk:o.some((function(e){return e.readonlyOk}))}}function qA(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.readonlyOk,r=void 0===n||n,i=t.disabled;return{id:e,type:"custom",disabled:void 0!==i&&i,readonlyOk:r}}function XA(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)throw Error("No action item provided to menuItem");if(!e.label)throw Error("Trying to create menu item for action item that doesn't have a label");var n=t.checked,r=void 0!==n&&n,i=t.disabled,o=void 0!==i&&i;return{id:e.id,type:"item",actionItem:e,disabled:o,checked:r,readonlyOk:e.readonlyOk}}function $A(e){var t=e.selectedIds.map((function(t){return e.getShapeById(t)}));return t.filter((function(t){return!!t&&((!e.isShapeOfType(t,Bv)||"binding"!==t.props.start.type)&&(!e.isShapeOfType(t,Bv)||"binding"!==t.props.end.type))}))}var GA=function(){var e=Ml();return Il("threeStackableItems",(function(){return $A(e).length>2}),[e])},QA=function(){var e=Ml();return Il("allowGroup",(function(){return $A(e).length>1}),[e])},JA=function(){var e=Ml();return Il("allowUngroup",(function(){return e.selectedIds.some((function(t){var n;return"group"===(null===(n=e.getShapeById(t))||void 0===n?void 0:n.type)}))}),[])};var ZA="undefined"!==typeof window&&"navigator"in window&&Boolean(navigator.clipboard)&&Boolean(navigator.clipboard.read),eT=[0,380,420,460,580,640,840,1023],tT=t.createContext(0);function nT(e){var t=e.children,n=Ml(),r=Il("breakpoint",(function(){for(var e=n.viewportScreenBounds.width,t=eT,r=0;r<t.length-1;r++)if(e>t[r]&&e<=t[r+1])return r;return t.length}),[n]);return(0,f.jsx)(tT.Provider,{value:r,children:t})}function rT(){var e=(0,t.useContext)(tT),n=new URL(window.location.href).searchParams.get("layout");return"desktop"===n?e=7:"mobile"===n&&(e=1),e}function iT(){var e=Ml();return Il("hasLinkShapeSelected",(function(){var t=e.selectedShapes;return 1===t.length&&"url"in t[0].props&&"embed"!==t[0].type}),[e])}var oT=t.createContext({}),aT=Pl((function(e){var n=e.overrides,r=e.children,i=Ml(),o=VA(),a=i.selectedIds.length,s=a>0,u=a>1,l=a>2,c=GA(),d=QA(),h=JA(),p=iT(),v=rT(),g=1===i.zoomLevel,m=(0,t.useMemo)((function(){var e=[XA(o["align-left"],{disabled:!u}),XA(o["align-center-horizontal"],{disabled:!u}),XA(o["align-right"],{disabled:!u}),XA(o["stretch-horizontal"],{disabled:!u}),XA(o["align-top"],{disabled:!u}),XA(o["align-center-vertical"],{disabled:!u}),XA(o["align-bottom"],{disabled:!u}),XA(o["stretch-vertical"],{disabled:!u}),XA(o["distribute-horizontal"],{disabled:!l}),XA(o["distribute-vertical"],{disabled:!l}),XA(o["stack-horizontal"],{disabled:!c}),XA(o["stack-vertical"],{disabled:!c}),XA(o["send-to-back"],{disabled:!s}),XA(o["send-backward"],{disabled:!s}),XA(o["bring-forward"],{disabled:!s}),XA(o["bring-to-front"],{disabled:!s}),v<5?XA(o["zoom-to-100"],{disabled:!!g}):XA(o["rotate-ccw"],{disabled:!s}),XA(o["rotate-cw"],{disabled:!s}),XA(o["edit-link"],{disabled:!p}),d?XA(o.group,{disabled:!u}):h?XA(o.ungroup):XA(o.group,{disabled:!u})];return n?n(i,e,{actions:o,oneSelected:s,twoSelected:u,threeSelected:l}):e}),[i,g,d,n,o,s,u,l,c,h,p,v]);return(0,f.jsx)(oT.Provider,{value:m,children:r})}));function sT(){var e=Ml();return Il("showAutoSizeToggle",(function(){var t=e.selectedShapes;return 1===t.length&&e.isShapeOfType(t[0],Jh)&&!1===t[0].props.autoSize}),[e])}var uT=t.createContext({}),lT=Pl((function(e){var n,r=e.overrides,i=e.children,o=Ml(),a=VA(),s=sT(),u=function(){var e=Ml();return Il("onlyFlippableShape",(function(){var t=e.selectedShapes;return 1===t.length&&t.every((function(t){return e.isShapeOfType(t,Eg)||e.isShapeOfType(t,Bv)||e.isShapeOfType(t,wm)||e.isShapeOfType(t,sg)}))}),[e])}(),l=o.selectedIds.length,c=l>0,d=Il("oneEmbedSelected",(function(){return 1===o.selectedIds.length&&o.selectedIds.some((function(e){var t=o.getShapeById(e);return t&&o.isShapeOfType(t,Lh)&&t.props.url}))}),[]),h=Il("oneEmbeddableBookmarkSelected",(function(){return 1===o.selectedIds.length&&o.selectedIds.some((function(e){var t=o.getShapeById(e);return t&&o.isShapeOfType(t,$v)&&t.props.url&&jh(t.props.url)}))}),[]),p=l>1,v=l>2,g=GA(),m=Il("atLeastOneShapeOnPage",(function(){return o.currentPageShapeIds.size>0}),[]),y=Il("isTransparentBg",(function(){return o.instanceState.exportBackground}),[]),b=QA(),w=JA(),x=Boolean(null===(n=window.navigator.clipboard)||void 0===n?void 0:n.write),k=iT(),S=o.onlySelectedShape,_=S&&o.isShapeOrAncestorLocked(S),E=(0,t.useMemo)((function(){var e=WA([HA("selection",d&&XA(a["open-embed-link"]),d&&!_&&XA(a["convert-to-bookmark"]),h&&XA(a["convert-to-embed"]),s&&XA(a["toggle-auto-size"]),k&&!_&&XA(a["edit-link"]),c&&!_&&XA(a.duplicate),b&&!_&&XA(a.group),w&&!_&&XA(a.ungroup),c&&XA(a["toggle-lock"])),HA("modify",(p||u)&&YA("arrange","context-menu.arrange",p&&HA("align",XA(a["align-left"]),XA(a["align-center-horizontal"]),XA(a["align-right"]),XA(a["align-top"]),XA(a["align-center-vertical"]),XA(a["align-bottom"])),v&&HA("distribute",XA(a["distribute-horizontal"]),XA(a["distribute-vertical"])),p&&HA("stretch",XA(a["stretch-horizontal"]),XA(a["stretch-vertical"])),u&&!_&&HA("flip",XA(a["flip-horizontal"]),XA(a["flip-vertical"])),p&&HA("order",XA(a.pack,{disabled:!p}),g&&XA(a["stack-vertical"]),g&&XA(a["stack-horizontal"]))),c&&!_&&YA("reorder","context-menu.reorder",HA("reorder",XA(a["bring-to-front"]),XA(a["bring-forward"]),XA(a["send-backward"]),XA(a["send-to-back"]))),c&&!_&&qA("MOVE_TO_PAGE_MENU",{readonlyOk:!1})),HA("clipboard-group",c&&!_&&XA(a.cut),c&&XA(a.copy),ZA&&XA(a.paste)),m&&HA("conversions",YA("copy-as","context-menu.copy-as",HA("copy-as-group",XA(a["copy-as-svg"]),x&&XA(a["copy-as-png"]),XA(a["copy-as-json"])),HA("export-bg",XA(a["toggle-transparent"],{checked:!y}))),YA("export-as","context-menu.export-as",HA("export-as-group",XA(a["export-as-svg"]),XA(a["export-as-png"]),XA(a["export-as-json"])),HA("export-bg,",XA(a["toggle-transparent"],{checked:!y})))),m&&HA("set-selection-group",XA(a["select-all"]),c&&XA(a["select-none"])),c&&!_&&HA("delete-group",XA(a.delete))]);return r&&(e=r(o,e,{actions:a,oneSelected:c,twoSelected:p,threeSelected:v,showAutoSizeToggle:s,showUngroup:w,onlyFlippableShapeSelected:u})),e}),[o,r,a,c,p,v,s,u,m,g,b,w,x,k,d,h,y,_]);return(0,f.jsx)(uT.Provider,{value:E,children:i})}));function cT(){var e=t.useContext(uT);if(!e)throw new Error("useContextMenuSchema must be used inside of a TLUiContextMenuSchemaProvider.");return e}var dT=t.createContext({});function fT(e){var n=e.overrides,r=e.children,i=Ml(),o=Cj(),a=BA().addDialog,s=FA(),u=Il(Uc.highlighterTool),l=t.useMemo((function(){var e=[{id:"select",label:"tool.select",icon:"tool-pointer",kbd:"v",readonlyOk:!0,onSelect:function(e){i.setSelectedTool("select"),o("select-tool",{source:e,id:"select"})}},{id:"hand",label:"tool.hand",icon:"tool-hand",kbd:"h",readonlyOk:!0,onSelect:function(e){i.setSelectedTool("hand"),o("select-tool",{source:e,id:"hand"})}},{id:"eraser",label:"tool.eraser",icon:"tool-eraser",kbd:"e",readonlyOk:!1,onSelect:function(e){i.setSelectedTool("eraser"),o("select-tool",{source:e,id:"eraser"})}},{id:"draw",label:"tool.draw",readonlyOk:!1,icon:"tool-pencil",kbd:"d,b,x",onSelect:function(e){i.setSelectedTool("draw"),o("select-tool",{source:e,id:"draw"})}}].concat(d(d(Ru.values).map((function(e){return{id:e,label:"tool.".concat(e),readonlyOk:!1,meta:{geo:e},kbd:"rectangle"===e?"r":"ellipse"===e?"o":void 0,icon:"geo-"+e,onSelect:function(t){i.batch((function(){i.updateInstanceState({stylesForNextShape:mt(mt({},i.instanceState.stylesForNextShape),{},vt({},Ru.id,e))},!0),i.setSelectedTool("geo"),o("select-tool",{source:t,id:"geo-".concat(e)})}))}}}))),[{id:"arrow",label:"tool.arrow",readonlyOk:!1,icon:"tool-arrow",kbd:"a",onSelect:function(e){i.setSelectedTool("arrow"),o("select-tool",{source:e,id:"arrow"})}},{id:"line",label:"tool.line",readonlyOk:!1,icon:"tool-line",kbd:"l",onSelect:function(e){i.setSelectedTool("line"),o("select-tool",{source:e,id:"line"})}},{id:"frame",label:"tool.frame",readonlyOk:!1,icon:"tool-frame",kbd:"f",onSelect:function(e){i.setSelectedTool("frame"),o("select-tool",{source:e,id:"frame"})}},{id:"text",label:"tool.text",readonlyOk:!1,icon:"tool-text",kbd:"t",onSelect:function(e){i.setSelectedTool("text"),o("select-tool",{source:e,id:"text"})}},{id:"asset",label:"tool.asset",readonlyOk:!1,icon:"tool-media",kbd:"$u",onSelect:function(e){s(),o("select-tool",{source:e,id:"media"})}},{id:"note",label:"tool.note",readonlyOk:!1,icon:"tool-note",kbd:"n",onSelect:function(e){i.setSelectedTool("note"),o("select-tool",{source:e,id:"note"})}},{id:"laser",label:"tool.laser",readonlyOk:!0,icon:"tool-laser",kbd:"k",onSelect:function(e){i.setSelectedTool("laser"),o("select-tool",{source:e,id:"laser"})}},{id:"embed",label:"tool.embed",readonlyOk:!1,icon:"tool-embed",onSelect:function(e){a({component:HM}),o("select-tool",{source:e,id:"embed"})}}]);u&&e.push({id:"highlight",label:"tool.highlight",readonlyOk:!0,icon:"tool-highlight",kbd:"!d",onSelect:function(e){i.setSelectedTool("highlight"),o("select-tool",{source:e,id:"highlight"})}});var t=Object.fromEntries(e.map((function(e){return[e.id,e]})));return n?n(i,t,{insertMedia:s}):t}),[u,n,i,o,s,a]);return(0,f.jsx)(dT.Provider,{value:l,children:r})}function hT(){var e=t.useContext(dT);if(!e)throw new Error("useTools must be used within a ToolProvider");return e}var pT=t.createContext({}),vT=Pl((function(e){var n=e.overrides,r=e.children,i=Ml(),o=hT(),a=VA(),s=(0,t.useMemo)((function(){var e=br([HA("shortcuts-dialog.tools",XA(a["toggle-tool-lock"]),XA(o.select),XA(o.draw),XA(o.eraser),XA(o.hand),XA(o.rectangle),XA(o.ellipse),XA(o.arrow),XA(o.line),XA(o.text),XA(o.frame),XA(o.note),XA(o.laser)),HA("shortcuts-dialog.file",XA(a["insert-media"]),XA(a.print)),HA("shortcuts-dialog.preferences",XA(a["toggle-dark-mode"]),XA(a["toggle-focus-mode"]),XA(a["toggle-grid"])),HA("shortcuts-dialog.edit",XA(a.undo),XA(a.redo),XA(a.cut),XA(a.copy),XA(a.paste),XA(a["select-all"]),XA(a.delete),XA(a.duplicate),XA(a["export-as-svg"]),XA(a["export-as-png"])),HA("shortcuts-dialog.view",XA(a["zoom-in"]),XA(a["zoom-out"]),XA(a["zoom-to-100"]),XA(a["zoom-to-fit"]),XA(a["zoom-to-selection"])),HA("shortcuts-dialog.transform",XA(a["bring-to-front"]),XA(a["bring-forward"]),XA(a["send-backward"]),XA(a["send-to-back"]),XA(a.group),XA(a.ungroup),XA(a["flip-horizontal"]),XA(a["flip-vertical"]),XA(a["align-top"]),XA(a["align-center-vertical"]),XA(a["align-bottom"]),XA(a["align-left"]),XA(a["align-center-horizontal"]),XA(a["align-right"]))]);return n?n(i,e,{tools:o,actions:a}):e}),[i,n,a,o]);return(0,f.jsx)(pT.Provider,{value:s,children:r})}));function gT(){var e=Ml();return Il("isReadOnlyMode",(function(){return e.isReadOnly}),[e])}var mT=function(){var e=P_(),n=gT(),r=function(){var e=t.useContext(pT);if(!e)throw new Error("Shortcuts must be used inside of a ShortcutsProvider.");return e}();return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(z_,{className:"tlui-shortcuts-dialog__header",children:[(0,f.jsx)(B_,{children:e("shortcuts-dialog.title")}),(0,f.jsx)(F_,{})]}),(0,f.jsx)(U_,{className:"tlui-shortcuts-dialog__body",children:r.map((function t(r){if(n&&!r.readonlyOk)return null;switch(r.type){case"group":return(0,f.jsxs)("div",{className:"tlui-shortcuts-dialog__group",children:[(0,f.jsx)("h2",{className:"tlui-shortcuts-dialog__group__title",children:e(r.id)}),(0,f.jsx)("div",{className:"tlui-shortcuts-dialog__group__content",children:r.children.filter((function(e){return"item"===e.type&&e.actionItem.kbd})).map(t)})]},r.id);case"item":var i=r.actionItem,o=i.id,a=i.label,s=i.shortcutsLabel,u=i.kbd;return(0,f.jsxs)("div",{className:"tlui-shortcuts-dialog__key-pair",children:[(0,f.jsx)("div",{className:"tlui-shortcuts-dialog__key-pair__key",children:e(null!==s&&void 0!==s?s:a)}),(0,f.jsx)("div",{className:"tlui-shortcuts-dialog__key-pair__value",children:(0,f.jsx)(R_,{children:u})})]},o)}}))}),(0,f.jsx)("div",{className:"tlui-dialog__scrim"})]})};function yT(){var e=Ml();return{languages:gl,currentLanguage:e.locale}}var bT=t.createContext({}),wT=Pl((function(e){var n=e.overrides,r=e.children,i=Ml(),o=VA(),a=i.selectedIds.length,s=a>0,u=a>1,l=a>2,c=yT(),d=c.languages,h=c.currentLanguage,p=BA().addDialog,v=(0,t.useMemo)((function(){var e=br([HA("top",qA("LANGUAGE_MENU",{readonlyOk:!0}),XA({id:"keyboard-shortcuts",label:"help-menu.keyboard-shortcuts",readonlyOk:!0,onSelect:function(){p({component:mT})}}))]);return n?n(i,e,{actions:o,currentLanguage:h,languages:d,oneSelected:s,twoSelected:u,threeSelected:l}):e}),[i,n,d,o,s,u,l,h,p]);return(0,f.jsx)(bT.Provider,{value:v,children:r})}));function xT(){var e=Ml();return Il("useCanRedo",(function(){return e.canRedo}),[e])}function kT(){var e=Ml();return Il("useCanUndo",(function(){return e.canUndo}),[e])}var ST=t.createContext({});function _T(e){var n,r=e.overrides,i=e.children,o=Ml(),a=VA(),s=rT()<5,u=Il("isDarkMode",(function(){return o.isDarkMode}),[o]),l=Il("animationSpeed",(function(){return o.animationSpeed}),[o]),c=Il("isGridMode",(function(){return o.isGridMode}),[o]),d=Il("isSnapMode",(function(){return o.isSnapMode}),[o]),h=Il("isToolLock",(function(){return o.instanceState.isToolLocked}),[o]),p=Il("isFocusMode",(function(){return o.instanceState.isFocusMode}),[o]),v=Il("isDebugMode",(function(){return o.instanceState.isDebugMode}),[o]),g=Il("exportBackground",(function(){return o.instanceState.exportBackground}),[o]),m=Il("emptyPage",(function(){return 0===o.currentPageShapeIds.size}),[o]),y=Il("selectedCount",(function(){return o.selectedIds.length}),[o]),b=0===y,w=y>0,x=y>1,k=y>2,S=Boolean(null===(n=window.navigator.clipboard)||void 0===n?void 0:n.write),_=iT(),E=sT(),C=QA(),P=JA(),I=kT(),j=xT(),M=Il("isZoomedTo100",(function(){return 1===o.zoomLevel}),[o]),A=(0,t.useMemo)((function(){var e=br([HA("menu",YA("file","menu.file",HA("print",XA(a.print,{disabled:m}))),YA("edit","menu.edit",HA("undo-actions",XA(a.undo,{disabled:!I}),XA(a.redo,{disabled:!j})),HA("clipboard-actions",XA(a.cut,{disabled:b}),XA(a.copy,{disabled:b}),XA(a.paste,{disabled:!ZA})),HA("conversions",YA("copy-as","menu.copy-as",HA("copy-as-group",XA(a["copy-as-svg"],{disabled:m}),XA(a["copy-as-png"],{disabled:m||!S}),XA(a["copy-as-json"],{disabled:m})),HA("export-bg",XA(a["toggle-transparent"],{checked:!g}))),YA("export-as","menu.export-as",HA("export-as-group",XA(a["export-as-svg"],{disabled:m}),XA(a["export-as-png"],{disabled:m}),XA(a["export-as-json"],{disabled:m})),HA("export-bg",XA(a["toggle-transparent"],{checked:!g})))),HA("set-selection-group",XA(a["select-all"],{disabled:m}),XA(a["select-none"],{disabled:!w})),HA("selection",E&&XA(a["toggle-auto-size"]),_&&XA(a["edit-link"]),XA(a.duplicate,{disabled:!w}),C&&XA(a.group),P&&XA(a.ungroup)),HA("delete-group",XA(a.delete,{disabled:!w}))),YA("view","menu.view",HA("view-actions",XA(a["zoom-in"]),XA(a["zoom-out"]),XA(a["zoom-to-100"],{disabled:M}),XA(a["zoom-to-fit"],{disabled:m}),XA(a["zoom-to-selection"],{disabled:m||!w})))),HA("extras",XA(a["insert-embed"]),XA(a["insert-media"])),HA("preferences",YA("preferences","menu.preferences",HA("preferences-actions",XA(a["toggle-snap-mode"],{checked:d}),XA(a["toggle-tool-lock"],{checked:h}),XA(a["toggle-grid"],{checked:c}),XA(a["toggle-dark-mode"],{checked:u}),XA(a["toggle-focus-mode"],{checked:p}),XA(a["toggle-reduce-motion"],{checked:0===l}),XA(a["toggle-debug-mode"],{checked:v}))),s&&qA("LANGUAGE_MENU",{readonlyOk:!0}))]);return r?r(o,e,{actions:a,noneSelected:b,oneSelected:w,twoSelected:x,threeSelected:k}):e}),[o,r,a,w,x,k,m,s,C,P,_,S,E,b,I,j,l,u,c,d,h,p,g,v,M]);return(0,f.jsx)(ST.Provider,{value:A,children:i})}function ET(e){return{id:e.id,type:"item",readonlyOk:e.readonlyOk,toolItem:e}}var CT=t.createContext([]);function PT(e){var n=e.overrides,r=e.children,i=Ml(),o=hT(),a=Il(Uc.highlighterTool),s=t.useMemo((function(){var e=br([ET(o.select),ET(o.hand),ET(o.draw),ET(o.eraser),ET(o.arrow),ET(o.text),ET(o.note),ET(o.asset),ET(o.rectangle),ET(o.ellipse),ET(o.diamond),ET(o.triangle),ET(o.trapezoid),ET(o.rhombus),ET(o.pentagon),ET(o.hexagon),ET(o.star),ET(o.oval),ET(o["x-box"]),ET(o["check-box"]),ET(o["arrow-left"]),ET(o["arrow-up"]),ET(o["arrow-down"]),ET(o["arrow-right"]),ET(o.frame),ET(o.line),a?ET(o.highlight):null,ET(o.laser)]);return n?n(i,e,{tools:o}):e}),[i,a,n,o]);return(0,f.jsx)(CT.Provider,{value:s,children:r})}function IT(e){return(0,t.useMemo)((function(){return e}),e)}function jT(e){var n=IT(null==e?[]:Array.isArray(e)?e:[e]);return(0,t.useMemo)((function(){var e,t={},r=w(n);try{for(r.s();!(e=r.n()).done;){var i=e.value;if(i.translations){var o,a=w(Dr(i.translations));try{for(a.s();!(o=a.n()).done;){var s=l(o.value,2),u=s[0],c=s[1],d=t[u];d||(d=t[u]={}),Object.assign(d,c)}}catch(NG){a.e(NG)}finally{a.f()}}}}catch(NG){r.e(NG)}finally{r.f()}return t}),[n])}function MT(e){var n=function(){var e=IA(),n=e.addToast,r=e.removeToast,i=e.clearToasts,o=BA(),a=o.addDialog,s=o.clearDialogs,u=o.removeDialog,l=o.updateDialog,c=rT()<5,d=P_();return(0,t.useMemo)((function(){return{addToast:n,removeToast:r,clearToasts:i,addDialog:a,clearDialogs:s,removeDialog:u,updateDialog:l,msg:d,isMobile:c}}),[a,n,s,i,d,u,r,l,c])}(),r=IT(null==e?[]:Array.isArray(e)?e:[e]);return(0,t.useMemo)((function(){return function(e,t){var n,r={},i=w(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o.translations){var a,s=w(Dr(o.translations));try{for(s.s();!(a=s.n()).done;){var u=l(a.value,2),c=u[0],d=u[1],f=r[c];f||(f=r[c]={}),Object.assign(f,d)}}catch(NG){s.e(NG)}finally{s.f()}}}}catch(NG){i.e(NG)}finally{i.f()}return{actionsMenu:function(n,r,i){var o,a=w(e);try{for(a.s();!(o=a.n()).done;){var s=o.value;s.actionsMenu&&(r=s.actionsMenu(n,r,mt(mt({},t),i)))}}catch(NG){a.e(NG)}finally{a.f()}return r},actions:function(n,r){var i,o=w(e);try{for(o.s();!(i=o.n()).done;){var a=i.value;a.actions&&(r=a.actions(n,r,t))}}catch(NG){o.e(NG)}finally{o.f()}return r},contextMenu:function(n,r,i){var o,a=w(e);try{for(a.s();!(o=a.n()).done;){var s=o.value;s.contextMenu&&(r=s.contextMenu(n,r,mt(mt({},t),i)))}}catch(NG){a.e(NG)}finally{a.f()}return r},helpMenu:function(n,r,i){var o,a=w(e);try{for(a.s();!(o=a.n()).done;){var s=o.value;s.helpMenu&&(r=s.helpMenu(n,r,mt(mt({},t),i)))}}catch(NG){a.e(NG)}finally{a.f()}return r},menu:function(n,r,i){var o,a=w(e);try{for(a.s();!(o=a.n()).done;){var s=o.value;s.menu&&(r=s.menu(n,r,mt(mt({},t),i)))}}catch(NG){a.e(NG)}finally{a.f()}return r},toolbar:function(n,r,i){var o,a=w(e);try{for(a.s();!(o=a.n()).done;){var s=o.value;s.toolbar&&(r=s.toolbar(n,r,mt(mt({},t),i)))}}catch(NG){a.e(NG)}finally{a.f()}return r},keyboardShortcutsMenu:function(n,r,i){var o,a=w(e);try{for(a.s();!(o=a.n()).done;){var s=o.value;s.keyboardShortcutsMenu&&(r=s.keyboardShortcutsMenu(n,r,mt(mt({},t),i)))}}catch(NG){a.e(NG)}finally{a.f()}return r},tools:function(n,r,i){var o,a=w(e);try{for(a.s();!(o=a.n()).done;){var s=o.value;s.tools&&(r=s.tools(n,r,mt(mt({},t),i)))}}catch(NG){a.e(NG)}finally{a.f()}return r},translations:r}}(r,n)}),[r,n])}function AT(e){var t=e.overrides,n=e.assetUrls,r=e.onUiEvent,i=e.children;return(0,f.jsx)(y_,{assetUrls:FM(n),children:(0,f.jsx)(C_,{overrides:jT(t),children:(0,f.jsx)(Ej,{onEvent:r,children:(0,f.jsx)(PA,{children:(0,f.jsx)(zA,{children:(0,f.jsx)(nT,{children:(0,f.jsx)(TT,{overrides:t,children:i})})})})})})})}function TT(e){var t=e.overrides,n=e.children,r=MT(t);return(0,f.jsx)(KA,{overrides:r.actions,children:(0,f.jsx)(fT,{overrides:r.tools,children:(0,f.jsx)(PT,{overrides:r.toolbar,children:(0,f.jsx)(aT,{overrides:r.actionsMenu,children:(0,f.jsx)(vT,{overrides:r.keyboardShortcutsMenu,children:(0,f.jsx)(lT,{overrides:r.contextMenu,children:(0,f.jsx)(wT,{overrides:r.helpMenu,children:(0,f.jsx)(_T,{overrides:r.menu,children:n})})})})})})})})}function OT(){var e=Ml(),n=VA()["back-to-content"],r=l((0,t.useState)(!1),2),i=r[0],o=r[1];return(0,t.useEffect)((function(){var t=!1,n=setInterval((function(){var n=e.renderingShapes.filter((function(e){return e.isInViewport})),r=0===n.length&&e.shapesArray.length>0;t!==r&&(o(r),t=r)}),1e3);return function(){clearInterval(n)}}),[e]),i?(0,f.jsx)(D_,{iconLeft:n.icon,label:n.label,onClick:function(){n.onSelect("helper-buttons"),o(!1)}}):null}var NT=0;var RT=t.memo((function(e){var t=e.renderDebugMenuItems,n=P_();return(0,f.jsxs)("div",{className:"tlui-debug-panel",children:[(0,f.jsx)(LT,{}),(0,f.jsx)(DT,{}),(0,f.jsxs)(Aj,{id:"debug",children:[(0,f.jsx)(Tj,{children:(0,f.jsx)(D_,{icon:"dots-horizontal",title:n("debug-panel.more")})}),(0,f.jsx)(Oj,{side:"top",align:"end",alignOffset:0,children:(0,f.jsx)(zT,{renderDebugMenuItems:t})})]})]})})),LT=Pl((function(){var e=Ml();return(0,f.jsx)("div",{className:"tlui-debug-panel__current-state",children:e.root.path.value})})),DT=function(){var e=Ml(),t=Il("rendering shapes count",(function(){return e.renderingShapes.length}),[e]);return(0,f.jsxs)("div",{children:[t," Shapes"]})},zT=Pl((function(e){var n=e.renderDebugMenuItems,r=Ml(),i=IA().addToast,o=BA().addDialog,a=l(t.useState(!1),2),s=a[0],u=a[1];return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(Dj,{children:[(0,f.jsx)(zj,{onClick:function(){i({id:Bp(),title:"Something happened",description:"Hey, attend to this thing over here. It might be important!"})},children:(0,f.jsx)("span",{children:"Show toast"})}),(0,f.jsx)(zj,{onClick:function(){o({component:function(e){var t=e.onClose;return(0,f.jsx)(KT,{displayDontShowAgain:!0,onCancel:function(){t()},onContinue:function(){t()}})},onClose:function(){}})},children:(0,f.jsx)("span",{children:"Show dialog"})}),(0,f.jsx)(zj,{onClick:function(){return function(e,t){for(var n=Array(t),r=Math.floor(Math.sqrt(t)),i=0;i<t;i++)NT++,n[i]={id:Os("box"+NT),type:"geo",x:i%r*132,y:132*Math.floor(i/r)};e.batch((function(){e.createShapes(n).setSelectedIds(n.map((function(e){return e.id})))}))}(r,100)},children:(0,f.jsx)("span",{children:"Create 100 shapes"})}),(0,f.jsx)(zj,{onClick:function(){function e(t){var n=t.children,r=0;if(!n.length)return 0;for(var i=0,o=d(n);i<o.length;i++){r++,r+=e(o[i])}return r}var t,n=r.selectedShapes,i=0===n.length?r.renderingShapes:n,o=i.map((function(e){return document.getElementById(e.id).parentElement})),a=o.length,s=w(o);try{for(s.s();!(t=s.n()).done;){a+=e(t.value)}}catch(NG){s.e(NG)}finally{s.f()}window.alert("Shapes ".concat(i.length,", DOM nodes:").concat(a))},children:(0,f.jsx)("span",{children:"Count shapes and nodes"})}),function(){if(s)throw Error("oh no!")}(),(0,f.jsx)(zj,{onClick:function(){u(!0)},children:(0,f.jsx)("span",{children:"Throw error"})}),(0,f.jsx)(zj,{onClick:function(){Tl()},children:(0,f.jsx)("span",{children:"Hard reset"})})]}),(0,f.jsxs)(Dj,{children:[(0,f.jsx)(BT,{label:"Read-only",value:r.isReadOnly,onChange:function(e){return r.setReadOnly(e)}}),(0,f.jsx)(FT,{flag:Kc.debugSvg}),(0,f.jsx)(FT,{flag:Kc.forceSrgb}),(0,f.jsx)(FT,{flag:Kc.debugCursors,onChange:function(e){if(e){var t=UT.map((function(e,t){return{id:Os(),type:"geo",x:t%5*175,y:175*Math.floor(t/5),props:{text:e,w:150,h:150,fill:"semi"}}}));r.createShapes(t)}}})]}),(0,f.jsx)(Dj,{children:Object.values(Uc).map((function(e){return(0,f.jsx)(FT,{flag:e},e.name)}))}),null===n||void 0===n?void 0:n()]})}));function BT(e){var t=e.label,n=e.value,r=e.onChange;return(0,f.jsx)(Bj,{title:t,checked:n,onSelect:function(){return r(!n)},children:t})}var FT=Pl((function(e){var t=e.flag,n=e.onChange;return(0,f.jsx)(BT,{label:t.name.replace(/([a-z0-9])([A-Z])/g,(function(e){return"".concat(e[0]," ").concat(e[1].toLowerCase())})).replace(/^[a-z]/,(function(e){return e.toUpperCase()})),value:t.value,onChange:function(e){t.set(e),null===n||void 0===n||n(e)}})})),UT=["none","default","pointer","cross","move","grab","grabbing","text","ew-resize","ns-resize","nesw-resize","nwse-resize","nwse-rotate","nesw-rotate","senw-rotate","swne-rotate","zoom-in","zoom-out"];function KT(e){var n=e.title,r=void 0===n?"title":n,i=e.body,o=void 0===i?"hello hello hello":i,a=e.cancel,s=void 0===a?"Cancel":a,u=e.confirm,c=void 0===u?"Continue":u,d=e.displayDontShowAgain,h=void 0!==d&&d,p=e.onCancel,v=e.onContinue,g=l(t.useState(!1),2),y=g[0],w=g[1];return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(z_,{children:[(0,f.jsx)(B_,{children:r}),(0,f.jsx)(F_,{})]}),(0,f.jsx)(U_,{style:{maxWidth:350},children:o}),(0,f.jsxs)(K_,{className:"tlui-dialog__footer__actions",children:[h&&(0,f.jsx)(D_,{onClick:function(){return w(!y)},iconLeft:y?"checkbox-checked":"checkbox-empty",style:{marginRight:"auto"},children:"Don't show again"}),(0,f.jsx)(D_,{onClick:p,children:s}),(0,f.jsx)(D_,{type:"primary",onClick:function(){var e=b(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),children:c})]})]})}var VT=function(e){var n=e.id,r=e.component,i=e.onClose,o=BA().removeDialog,a=cd(),s=(0,t.useCallback)((function(e){if(!e){if(i)try{i()}catch(NG){console.warn(NG)}o(n)}}),[n,i,o]);return(0,f.jsx)(h_,{onOpenChange:s,defaultOpen:!0,children:(0,f.jsx)(p_,{container:a,children:(0,f.jsx)(v_,{dir:"ltr",className:"tlui-dialog__overlay",children:(0,f.jsx)(g_,{dir:"ltr",className:"tlui-dialog__content",children:(0,f.jsx)(r,{onClose:function(){return s(!1)}})})})})})};var WT=t.memo((function(){var e=BA().dialogs;return(0,f.jsx)(f.Fragment,{children:e.map((function(e){return(0,f.jsx)(VT,mt({},e),e.id)}))})}));function HT(){var e=Ml(),t=Il("follow",(function(){return e.instanceState.followingUserId}),[e]);return t?(0,f.jsx)(YT,{userId:t}):null}function YT(e){var t=bh(e.userId);return t?(0,f.jsx)("div",{className:"tlui-following",style:{borderColor:t.color}}):null}function qT(){var e=Ml(),n=yT(),r=n.languages,i=n.currentLanguage,o=(0,t.useCallback)((function(t){return e.setLocale(t)}),[e]);return(0,f.jsxs)(Nj,{id:"help menu language",children:[(0,f.jsx)(Rj,{label:"menu.language","data-direction":"left"}),(0,f.jsx)(Lj,{sideOffset:-4,children:(0,f.jsx)(Dj,{children:r.map((function(e){var t=e.locale,n=e.label;return(0,f.jsx)(Fj,{title:t,checked:t===i,onSelect:function(){return o(t)},children:(0,f.jsx)("span",{children:n})},t)}))})})]})}var XT=t.memo((function(){var e=cd(),t=P_(),n=l(Pj("help menu"),2),r=n[0],i=n[1];return(0,f.jsx)("div",{className:"tlui-help-menu",children:(0,f.jsxs)(fj,{dir:"ltr",open:r,onOpenChange:i,modal:!1,children:[(0,f.jsx)(hj,{className:"tlui-button tlui-help-menu__button",dir:"ltr",title:t("help-menu.title"),children:(0,f.jsx)(M_,{icon:"question-mark"})}),(0,f.jsx)(pj,{container:e,dir:"ltr",children:(0,f.jsx)(vj,{className:"tlui-menu",side:"top",sideOffset:8,align:"end",alignOffset:0,collisionPadding:4,children:(0,f.jsx)($T,{})})})]})})}));function $T(){var e=function(){var e=t.useContext(bT);if(!e)throw new Error("useHelpMenuSchema must be used inside of a helpTLUiMenuSchemaProvider.");return e}(),n=gT();return(0,f.jsx)(f.Fragment,{children:e.map((function e(t){if(n&&!t.readonlyOk)return null;switch(t.type){case"custom":if("LANGUAGE_MENU"===t.id)return(0,f.jsx)(qT,{},"item");break;case"group":return(0,f.jsx)(Dj,{size:"small",children:t.children.map(e)},t.id);case"submenu":return(0,f.jsxs)(Nj,{id:"help menu ".concat(t.id),children:[(0,f.jsx)(Rj,{label:t.label}),(0,f.jsx)(Lj,{children:t.children.map(e)})]},t.id);case"item":var r=t.actionItem,i=r.id,o=r.kbd,a=r.label,s=r.onSelect,u=r.icon;return(0,f.jsx)(zj,{kbd:o,label:a,onClick:function(){return s("help-menu")},iconLeft:u},i)}}))})}function GT(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).checkForDefaultPrevented,r=void 0===n||n;return function(n){if(null===e||void 0===e||e(n),!1===r||!n.defaultPrevented)return null===t||void 0===t?void 0:t(n)}}function QT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.forEach((function(t){return function(e,t){"function"===typeof e?e(t):null!==e&&void 0!==e&&(e.current=t)}(t,e)}))}}function JT(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0,t.useCallback)(QT.apply(void 0,n),n)}var ZT=["scope","children"];function eO(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=[];var i=function(){var n=r.map((function(e){return(0,t.createContext)(e)}));return function(r){var i=(null===r||void 0===r?void 0:r[e])||n;return(0,t.useMemo)((function(){return vt({},"__scope".concat(e),mt(mt({},r),{},vt({},e,i)))}),[r,i])}};return i.scopeName=e,[function(n,i){var o=(0,t.createContext)(i),a=r.length;function s(n){var r=n.scope,i=n.children,s=So(n,ZT),u=(null===r||void 0===r?void 0:r[e][a])||o,l=(0,t.useMemo)((function(){return s}),Object.values(s));return(0,t.createElement)(u.Provider,{value:l},i)}return r=[].concat(d(r),[i]),s.displayName=n+"Provider",[s,function(r,s){var u=(null===s||void 0===s?void 0:s[e][a])||o,l=(0,t.useContext)(u);if(l)return l;if(void 0!==i)return i;throw new Error("`".concat(r,"` must be used within `").concat(n,"`"))}]},tO.apply(void 0,[i].concat(d(n)))]}function tO(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(1===n.length)return i;var o=function(){var e=n.map((function(e){return{useScope:e(),scopeName:e.scopeName}}));return function(n){var r=e.reduce((function(e,t){var r=t.useScope,i=t.scopeName,o=r(n)["__scope".concat(i)];return mt(mt({},e),o)}),{});return(0,t.useMemo)((function(){return vt({},"__scope".concat(i.scopeName),r)}),[r])}};return o.scopeName=i.scopeName,o}var nO=["children"],rO=["children"],iO=(0,t.forwardRef)((function(e,n){var r=e.children,i=So(e,nO),o=t.Children.toArray(r),a=o.find(sO);if(a){var s=a.props.children,u=o.map((function(e){return e===a?t.Children.count(s)>1?t.Children.only(null):(0,t.isValidElement)(s)?s.props.children:null:e}));return(0,t.createElement)(oO,Fx({},i,{ref:n}),(0,t.isValidElement)(s)?(0,t.cloneElement)(s,void 0,u):null)}return(0,t.createElement)(oO,Fx({},i,{ref:n}),r)}));iO.displayName="Slot";var oO=(0,t.forwardRef)((function(e,n){var r=e.children,i=So(e,rO);return(0,t.isValidElement)(r)?(0,t.cloneElement)(r,mt(mt({},function(e,t){var n=mt({},t),r=function(){var r=e[i],o=t[i];/^on[A-Z]/.test(i)?r&&o?n[i]=function(){o.apply(void 0,arguments),r.apply(void 0,arguments)}:r&&(n[i]=r):"style"===i?n[i]=mt(mt({},r),o):"className"===i&&(n[i]=[r,o].filter(Boolean).join(" "))};for(var i in t)r();return mt(mt({},e),n)}(i,r.props)),{},{ref:QT(n,r.ref)})):t.Children.count(r)>1?t.Children.only(null):null}));oO.displayName="SlotClone";var aO=function(e){var n=e.children;return(0,t.createElement)(t.Fragment,null,n)};function sO(e){return(0,t.isValidElement)(e)&&e.type===aO}var uO=["asChild"],lO=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((function(e,n){var r=(0,t.forwardRef)((function(e,r){var i=e.asChild,o=So(e,uO),a=i?iO:n;return(0,t.useEffect)((function(){window[Symbol.for("radix-ui")]=!0}),[]),(0,t.createElement)(a,Fx({},o,{ref:r}))}));return r.displayName="Primitive.".concat(n),mt(mt({},e),{},vt({},n,r))}),{});function cO(e){var n=(0,t.useRef)(e);return(0,t.useEffect)((function(){n.current=e})),(0,t.useMemo)((function(){return function(){for(var e,t,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return null===(t=n.current)||void 0===t?void 0:(e=t).call.apply(e,[n].concat(i))}}),[])}var dO,fO=["disableOutsidePointerEvents","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss"],hO="dismissableLayer.update",pO="dismissableLayer.pointerDownOutside",vO="dismissableLayer.focusOutside",gO=(0,t.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),mO=(0,t.forwardRef)((function(e,n){var r,i=e.disableOutsidePointerEvents,o=void 0!==i&&i,a=e.onEscapeKeyDown,s=e.onPointerDownOutside,u=e.onFocusOutside,c=e.onInteractOutside,f=e.onDismiss,h=So(e,fO),p=(0,t.useContext)(gO),v=l((0,t.useState)(null),2),g=v[0],m=v[1],y=null!==(r=null===g||void 0===g?void 0:g.ownerDocument)&&void 0!==r?r:null===globalThis||void 0===globalThis?void 0:globalThis.document,b=l((0,t.useState)({}),2)[1],w=JT(n,(function(e){return m(e)})),x=Array.from(p.layers),k=l(d(p.layersWithOutsidePointerEventsDisabled).slice(-1),1)[0],S=x.indexOf(k),_=g?x.indexOf(g):-1,E=p.layersWithOutsidePointerEventsDisabled.size>0,C=_>=S,P=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document,r=cO(e),i=(0,t.useRef)(!1),o=(0,t.useRef)((function(){}));return(0,t.useEffect)((function(){var e=function(e){if(e.target&&!i.current){var t=function(){bO(pO,r,a,{discrete:!0})},a={originalEvent:e};"touch"===e.pointerType?(n.removeEventListener("click",o.current),o.current=t,n.addEventListener("click",o.current,{once:!0})):t()}i.current=!1},t=window.setTimeout((function(){n.addEventListener("pointerdown",e)}),0);return function(){window.clearTimeout(t),n.removeEventListener("pointerdown",e),n.removeEventListener("click",o.current)}}),[n,r]),{onPointerDownCapture:function(){return i.current=!0}}}((function(e){var t=e.target,n=d(p.branches).some((function(e){return e.contains(t)}));C&&!n&&(null===s||void 0===s||s(e),null===c||void 0===c||c(e),e.defaultPrevented||null===f||void 0===f||f())}),y),I=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document,r=cO(e),i=(0,t.useRef)(!1);return(0,t.useEffect)((function(){var e=function(e){e.target&&!i.current&&bO(vO,r,{originalEvent:e},{discrete:!1})};return n.addEventListener("focusin",e),function(){return n.removeEventListener("focusin",e)}}),[n,r]),{onFocusCapture:function(){return i.current=!0},onBlurCapture:function(){return i.current=!1}}}((function(e){var t=e.target;d(p.branches).some((function(e){return e.contains(t)}))||(null===u||void 0===u||u(e),null===c||void 0===c||c(e),e.defaultPrevented||null===f||void 0===f||f())}),y);return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document,r=cO(e);(0,t.useEffect)((function(){var e=function(e){"Escape"===e.key&&r(e)};return n.addEventListener("keydown",e),function(){return n.removeEventListener("keydown",e)}}),[r,n])}((function(e){_===p.layers.size-1&&(null===a||void 0===a||a(e),!e.defaultPrevented&&f&&(e.preventDefault(),f()))}),y),(0,t.useEffect)((function(){if(g)return o&&(0===p.layersWithOutsidePointerEventsDisabled.size&&(dO=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),p.layersWithOutsidePointerEventsDisabled.add(g)),p.layers.add(g),yO(),function(){o&&1===p.layersWithOutsidePointerEventsDisabled.size&&(y.body.style.pointerEvents=dO)}}),[g,y,o,p]),(0,t.useEffect)((function(){return function(){g&&(p.layers.delete(g),p.layersWithOutsidePointerEventsDisabled.delete(g),yO())}}),[g,p]),(0,t.useEffect)((function(){var e=function(){return b({})};return document.addEventListener(hO,e),function(){return document.removeEventListener(hO,e)}}),[]),(0,t.createElement)(lO.div,Fx({},h,{ref:w,style:mt({pointerEvents:E?C?"auto":"none":void 0},e.style),onFocusCapture:GT(e.onFocusCapture,I.onFocusCapture),onBlurCapture:GT(e.onBlurCapture,I.onBlurCapture),onPointerDownCapture:GT(e.onPointerDownCapture,P.onPointerDownCapture)}))}));function yO(){var e=new CustomEvent(hO);document.dispatchEvent(e)}function bO(e,t,n,r){var i=r.discrete,o=n.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&o.addEventListener(e,t,{once:!0}),i?function(e,t){e&&(0,ek.flushSync)((function(){return e.dispatchEvent(t)}))}(o,a):o.dispatchEvent(a)}var wO=0;function xO(){(0,t.useEffect)((function(){var e,t,n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",null!==(e=n[0])&&void 0!==e?e:kO()),document.body.insertAdjacentElement("beforeend",null!==(t=n[1])&&void 0!==t?t:kO()),wO++,function(){1===wO&&document.querySelectorAll("[data-radix-focus-guard]").forEach((function(e){return e.remove()})),wO--}}),[])}function kO(){var e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}var SO=["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"],_O="focusScope.autoFocusOnMount",EO="focusScope.autoFocusOnUnmount",CO={bubbles:!1,cancelable:!0},PO=(0,t.forwardRef)((function(e,n){var r=e.loop,i=void 0!==r&&r,o=e.trapped,a=void 0!==o&&o,s=e.onMountAutoFocus,u=e.onUnmountAutoFocus,c=So(e,SO),d=l((0,t.useState)(null),2),f=d[0],h=d[1],p=cO(s),v=cO(u),g=(0,t.useRef)(null),m=JT(n,(function(e){return h(e)})),y=(0,t.useRef)({paused:!1,pause:function(){this.paused=!0},resume:function(){this.paused=!1}}).current;(0,t.useEffect)((function(){if(a){var e=function(e){if(!y.paused&&f){var t=e.target;f.contains(t)?g.current=t:AO(g.current,{select:!0})}},t=function(e){!y.paused&&f&&(f.contains(e.relatedTarget)||AO(g.current,{select:!0}))};return document.addEventListener("focusin",e),document.addEventListener("focusout",t),function(){document.removeEventListener("focusin",e),document.removeEventListener("focusout",t)}}}),[a,f,y.paused]),(0,t.useEffect)((function(){if(f){TO.add(y);var e=document.activeElement;if(!f.contains(e)){var t=new CustomEvent(_O,CO);f.addEventListener(_O,p),f.dispatchEvent(t),t.defaultPrevented||(!function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.select,i=void 0!==r&&r,o=document.activeElement,a=w(e);try{for(a.s();!(t=a.n()).done;){if(AO(t.value,{select:i}),document.activeElement!==o)return}}catch(NG){a.e(NG)}finally{a.f()}}((n=IO(f),n.filter((function(e){return"A"!==e.tagName}))),{select:!0}),document.activeElement===e&&AO(f))}return function(){f.removeEventListener(_O,p),setTimeout((function(){var t=new CustomEvent(EO,CO);f.addEventListener(EO,v),f.dispatchEvent(t),t.defaultPrevented||AO(null!==e&&void 0!==e?e:document.body,{select:!0}),f.removeEventListener(EO,v),TO.remove(y)}),0)}}var n}),[f,p,v,y]);var b=(0,t.useCallback)((function(e){if((i||a)&&!y.paused){var t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,n=document.activeElement;if(t&&n){var r=e.currentTarget,o=function(e){var t=IO(e),n=jO(t,e),r=jO(t.reverse(),e);return[n,r]}(r),s=l(o,2),u=s[0],c=s[1];u&&c?e.shiftKey||n!==c?e.shiftKey&&n===u&&(e.preventDefault(),i&&AO(c,{select:!0})):(e.preventDefault(),i&&AO(u,{select:!0})):n===r&&e.preventDefault()}}}),[i,a,y.paused]);return(0,t.createElement)(lO.div,Fx({tabIndex:-1},c,{ref:m,onKeyDown:b}))}));function IO(e){for(var t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:function(e){var t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});n.nextNode();)t.push(n.currentNode);return t}function jO(e,t){var n,r=w(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!MO(i,{upTo:t}))return i}}catch(NG){r.e(NG)}finally{r.f()}}function MO(e,t){var n=t.upTo;if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==n&&e===n)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function AO(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).select,n=void 0!==t&&t;if(e&&e.focus){var r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&function(e){return e instanceof HTMLInputElement&&"select"in e}(e)&&n&&e.select()}}var TO=function(){var e=[];return{add:function(t){var n=e[0];t!==n&&(null===n||void 0===n||n.pause()),(e=OO(e,t)).unshift(t)},remove:function(t){var n;null===(n=(e=OO(e,t))[0])||void 0===n||n.resume()}}}();function OO(e,t){var n=d(e),r=n.indexOf(t);return-1!==r&&n.splice(r,1),n}var NO=Boolean(null===globalThis||void 0===globalThis?void 0:globalThis.document)?t.useLayoutEffect:function(){},RO=r["useId".toString()]||function(){},LO=0;function DO(e){var n=l(t.useState(RO()),2),r=n[0],i=n[1];return NO((function(){e||i((function(e){return null!==e&&void 0!==e?e:String(LO++)}))}),[e]),e||(r?"radix-".concat(r):"")}var zO=["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","flipAlignment"],BO=["strategy"],FO=["mainAxis","crossAxis","limiter"],UO=["apply"];function KO(e){return e.split("-")[0]}function VO(e){return e.split("-")[1]}function WO(e){return["top","bottom"].includes(KO(e))?"x":"y"}function HO(e){return"y"===e?"height":"width"}function YO(e,t,n){var r,i=e.reference,o=e.floating,a=i.x+i.width/2-o.width/2,s=i.y+i.height/2-o.height/2,u=WO(t),l=HO(u),c=i[l]/2-o[l]/2,d="x"===u;switch(KO(t)){case"top":r={x:a,y:i.y-o.height};break;case"bottom":r={x:a,y:i.y+i.height};break;case"right":r={x:i.x+i.width,y:s};break;case"left":r={x:i.x-o.width,y:s};break;default:r={x:i.x,y:i.y}}switch(VO(t)){case"start":r[u]-=c*(n&&d?-1:1);break;case"end":r[u]+=c*(n&&d?-1:1)}return r}var qO=function(){var e=b(m().mark((function e(t,n,r){var i,o,a,s,u,l,c,d,f,h,p,v,g,y,b,w,x,k,S,_,E,C,P,I,j;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.placement,o=void 0===i?"bottom":i,a=r.strategy,s=void 0===a?"absolute":a,u=r.middleware,l=void 0===u?[]:u,c=r.platform,e.next=9,null==c.isRTL?void 0:c.isRTL(n);case 9:return d=e.sent,e.next=12,c.getElementRects({reference:t,floating:n,strategy:s});case 12:f=e.sent,h=YO(f,o,d),p=h.x,v=h.y,g=o,y={},b=0,w=0;case 20:if(!(w<l.length)){e.next=55;break}return k=l[w],S=k.name,_=k.fn,e.next=26,_({x:p,y:v,initialPlacement:o,placement:g,strategy:s,middlewareData:y,rects:f,platform:c,elements:{reference:t,floating:n}});case 26:if(E=e.sent,C=E.x,P=E.y,I=E.data,j=E.reset,p=null!=C?C:p,v=null!=P?P:v,y=mt(mt({},y),{},vt({},S,mt(mt({},y[S]),I))),e.t0=j&&b<=50,!e.t0){e.next=52;break}if(b++,e.t1="object"==typeof j,!e.t1){e.next=51;break}if(j.placement&&(g=j.placement),e.t2=j.rects,!e.t2){e.next=50;break}if(!0!==j.rects){e.next=48;break}return e.next=45,c.getElementRects({reference:t,floating:n,strategy:s});case 45:e.t3=e.sent,e.next=49;break;case 48:e.t3=j.rects;case 49:f=e.t3;case 50:x=YO(f,g,d),p=x.x,v=x.y;case 51:w=-1;case 52:w++,e.next=20;break;case 55:return e.abrupt("return",{x:p,y:v,placement:g,strategy:s,middlewareData:y});case 56:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function XO(e){return"number"!=typeof e?function(e){return mt({top:0,right:0,bottom:0,left:0},e)}(e):{top:e,right:e,bottom:e,left:e}}function $O(e){return mt(mt({},e),{},{top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height})}function GO(e,t){return QO.apply(this,arguments)}function QO(){return QO=b(m().mark((function e(t,n){var r,i,o,a,s,u,l,c,d,f,h,p,v,g,y,b,w,x,k,S,_;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n={}),i=t.x,o=t.y,a=t.platform,s=t.rects,u=t.elements,l=t.strategy,d=(c=n).boundary,f=void 0===d?"clippingAncestors":d,h=c.rootBoundary,p=void 0===h?"viewport":h,v=c.elementContext,g=void 0===v?"floating":v,y=c.altBoundary,b=void 0!==y&&y,w=c.padding,x=XO(void 0===w?0:w),k=u[b?"floating"===g?"reference":"floating":g],e.t0=$O,e.t1=a,e.next=24,null==a.isElement?void 0:a.isElement(k);case 24:if(e.t3=r=e.sent,e.t2=null==e.t3,e.t2){e.next=28;break}e.t2=r;case 28:if(!e.t2){e.next=32;break}e.t4=k,e.next=38;break;case 32:if(e.t5=k.contextElement,e.t5){e.next=37;break}return e.next=36,null==a.getDocumentElement?void 0:a.getDocumentElement(u.floating);case 36:e.t5=e.sent;case 37:e.t4=e.t5;case 38:return e.t6=e.t4,e.t7=f,e.t8=p,e.t9=l,e.t10={element:e.t6,boundary:e.t7,rootBoundary:e.t8,strategy:e.t9},e.next=45,e.t1.getClippingRect.call(e.t1,e.t10);case 45:if(e.t11=e.sent,S=(0,e.t0)(e.t11),e.t12=$O,!a.convertOffsetParentRelativeRectToViewportRelativeRect){e.next=61;break}return e.t14=a,e.t15="floating"===g?mt(mt({},s.floating),{},{x:i,y:o}):s.reference,e.next=53,null==a.getOffsetParent?void 0:a.getOffsetParent(u.floating);case 53:return e.t16=e.sent,e.t17=l,e.t18={rect:e.t15,offsetParent:e.t16,strategy:e.t17},e.next=58,e.t14.convertOffsetParentRelativeRectToViewportRelativeRect.call(e.t14,e.t18);case 58:e.t13=e.sent,e.next=62;break;case 61:e.t13=s[g];case 62:return e.t19=e.t13,_=(0,e.t12)(e.t19),e.abrupt("return",{top:S.top-_.top+x.top,bottom:_.bottom-S.bottom+x.bottom,left:S.left-_.left+x.left,right:_.right-S.right+x.right});case 65:case"end":return e.stop()}}),e)}))),QO.apply(this,arguments)}var JO=Math.min,ZO=Math.max;function eN(e,t,n){return ZO(e,JO(t,n))}var tN=function(e){return{name:"arrow",options:e,fn:function(t){return b(m().mark((function n(){var r,i,o,a,s,u,l,c,d,f,h,p,v,g,y,b,w,x,k,S,_,E,C,P,I,j,M,A,T;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=(o=null!=e?e:{}).element,s=o.padding,u=void 0===s?0:s,l=t.x,c=t.y,d=t.placement,f=t.rects,h=t.platform,null!=a){n.next=3;break}return n.abrupt("return",{});case 3:return p=XO(u),v={x:l,y:c},g=WO(d),y=VO(d),b=HO(g),n.next=10,h.getDimensions(a);case 10:return w=n.sent,x="y"===g?"top":"left",k="y"===g?"bottom":"right",S=f.reference[b]+f.reference[g]-v[g]-f.floating[b],_=v[g]-f.reference[g],n.next=17,null==h.getOffsetParent?void 0:h.getOffsetParent(a);case 17:return E=n.sent,0===(C=E?"y"===g?E.clientHeight||0:E.clientWidth||0:0)&&(C=f.floating[b]),P=S/2-_/2,I=p[x],j=C-w[b]-p[k],M=C/2-w[b]/2+P,A=eN(I,M,j),T=("start"===y?p[x]:p[k])>0&&M!==A&&f.reference[b]<=f.floating[b],n.abrupt("return",(vt(i={},g,v[g]-(T?M<I?I-M:j-M:0)),vt(i,"data",(vt(r={},g,A),vt(r,"centerOffset",M-A),r)),i));case 22:case"end":return n.stop()}}),n)})))()}}},nN={left:"right",right:"left",bottom:"top",top:"bottom"};function rN(e){return e.replace(/left|right|bottom|top/g,(function(e){return nN[e]}))}function iN(e,t,n){void 0===n&&(n=!1);var r=VO(e),i=WO(e),o=HO(i),a="x"===i?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[o]>t.floating[o]&&(a=rN(a)),{main:a,cross:rN(a)}}var oN={start:"end",end:"start"};function aN(e){return e.replace(/start|end/g,(function(e){return oN[e]}))}var sN=["top","right","bottom","left"],uN=(sN.reduce((function(e,t){return e.concat(t,t+"-start",t+"-end")}),[]),function(e){return void 0===e&&(e={}),{name:"flip",options:e,fn:function(t){return b(m().mark((function n(){var r,i,o,a,s,u,l,c,f,h,p,v,g,y,b,w,x,k,S,_,E,C,P,I,j,M,A,T,O,N,R,L,D,z;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.placement,o=t.middlewareData,a=t.rects,s=t.initialPlacement,u=t.platform,l=t.elements,f=(c=e).mainAxis,h=void 0===f||f,p=c.crossAxis,v=void 0===p||p,g=c.fallbackPlacements,y=c.fallbackStrategy,b=void 0===y?"bestFit":y,w=c.flipAlignment,x=void 0===w||w,k=So(c,zO),S=KO(i),_=g||(S!==s&&x?function(e){var t=rN(e);return[aN(e),t,aN(t)]}(s):[rN(s)]),E=[s].concat(d(_)),n.next=22,GO(t,k);case 22:if(C=n.sent,P=[],I=(null==(r=o.flip)?void 0:r.overflows)||[],h&&P.push(C[S]),!v){n.next=36;break}return n.t0=iN,n.t1=i,n.t2=a,n.next=31,null==u.isRTL?void 0:u.isRTL(l.floating);case 31:n.t3=n.sent,j=(0,n.t0)(n.t1,n.t2,n.t3),M=j.main,A=j.cross,P.push(C[M],C[A]);case 36:if(I=[].concat(d(I),[{placement:i,overflows:P}]),P.every((function(e){return e<=0}))){n.next=50;break}if(N=(null!=(T=null==(O=o.flip)?void 0:O.index)?T:0)+1,!(R=E[N])){n.next=40;break}return n.abrupt("return",{data:{index:N,overflows:I},reset:{placement:R}});case 40:L="bottom",n.t4=b,n.next="bestFit"===n.t4?44:"initialPlacement"===n.t4?47:48;break;case 44:return z=null==(D=I.map((function(e){return[e,e.overflows.filter((function(e){return e>0})).reduce((function(e,t){return e+t}),0)]})).sort((function(e,t){return e[1]-t[1]}))[0])?void 0:D[0].placement,z&&(L=z),n.abrupt("break",48);case 47:L=s;case 48:if(i===L){n.next=50;break}return n.abrupt("return",{reset:{placement:L}});case 50:return n.abrupt("return",{});case 51:case"end":return n.stop()}}),n)})))()}}});function lN(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function cN(e){return sN.some((function(t){return e[t]>=0}))}var dN=function(e){var t=void 0===e?{}:e,n=t.strategy,r=void 0===n?"referenceHidden":n,i=So(t,BO);return{name:"hide",fn:function(e){return b(m().mark((function t(){var n,o,a;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.rects,t.t0=r,t.next="referenceHidden"===t.t0?4:"escaped"===t.t0?11:18;break;case 4:return t.t1=lN,t.next=7,GO(e,mt(mt({},i),{},{elementContext:"reference"}));case 7:return t.t2=t.sent,t.t3=n.reference,o=(0,t.t1)(t.t2,t.t3),t.abrupt("return",{data:{referenceHiddenOffsets:o,referenceHidden:cN(o)}});case 11:return t.t4=lN,t.next=14,GO(e,mt(mt({},i),{},{altBoundary:!0}));case 14:return t.t5=t.sent,t.t6=n.floating,a=(0,t.t4)(t.t5,t.t6),t.abrupt("return",{data:{escapedOffsets:a,escaped:cN(a)}});case 18:return t.abrupt("return",{});case 19:case"end":return t.stop()}}),t)})))()}}},fN=function(e){return void 0===e&&(e=0),{name:"offset",options:e,fn:function(t){return b(m().mark((function n(){var r,i,o;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.x,i=t.y,n.next=4,function(){var e=b(m().mark((function e(t,n){var r,i,o,a,s,u,l,c,d,f,h,p,v,g;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.placement,i=t.platform,o=t.elements,e.next=5,null==i.isRTL?void 0:i.isRTL(o.floating);case 5:return a=e.sent,s=KO(r),u=VO(r),l="x"===WO(r),c=["left","top"].includes(s)?-1:1,d=a&&l?-1:1,f="function"==typeof n?n(t):n,h="number"==typeof f?{mainAxis:f,crossAxis:0,alignmentAxis:null}:mt({mainAxis:0,crossAxis:0,alignmentAxis:null},f),p=h.mainAxis,v=h.crossAxis,g=h.alignmentAxis,e.abrupt("return",(u&&"number"==typeof g&&(v="end"===u?-1*g:g),l?{x:v*d,y:p*c}:{x:p*c,y:v*d}));case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,e);case 4:return o=n.sent,n.abrupt("return",{x:r+o.x,y:i+o.y,data:o});case 6:case"end":return n.stop()}}),n)})))()}}};function hN(e){return"x"===e?"y":"x"}var pN=function(e){return void 0===e&&(e={}),{name:"shift",options:e,fn:function(t){return b(m().mark((function n(){var r,i,o,a,s,u,l,c,d,f,h,p,v,g,y,b,w,x,k,S,_;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.x,o=t.y,a=t.placement,u=(s=e).mainAxis,l=void 0===u||u,c=s.crossAxis,d=void 0!==c&&c,f=s.limiter,h=void 0===f?{fn:function(e){return{x:e.x,y:e.y}}}:f,p=So(s,FO),v={x:i,y:o},n.next=14,GO(t,p);case 14:return g=n.sent,y=WO(KO(a)),b=hN(y),w=v[y],x=v[b],l&&(k="y"===y?"bottom":"right",w=eN(w+g["y"===y?"top":"left"],w,w-g[k])),d&&(S="y"===b?"bottom":"right",x=eN(x+g["y"===b?"top":"left"],x,x-g[S])),_=h.fn(mt(mt({},t),{},(vt(r={},y,w),vt(r,b,x),r))),n.abrupt("return",mt(mt({},_),{},{data:{x:_.x-i,y:_.y-o}}));case 22:case"end":return n.stop()}}),n)})))()}}},vN=function(e){return void 0===e&&(e={}),{options:e,fn:function(t){var n,r=t.x,i=t.y,o=t.placement,a=t.rects,s=t.middlewareData,u=e,l=u.offset,c=void 0===l?0:l,d=u.mainAxis,f=void 0===d||d,h=u.crossAxis,p=void 0===h||h,v={x:r,y:i},g=WO(o),m=hN(g),y=v[g],b=v[m],w="function"==typeof c?c(mt(mt({},a),{},{placement:o})):c,x="number"==typeof w?{mainAxis:w,crossAxis:0}:mt({mainAxis:0,crossAxis:0},w);if(f){var k="y"===g?"height":"width",S=a.reference[g]-a.floating[k]+x.mainAxis,_=a.reference[g]+a.reference[k]-x.mainAxis;y<S?y=S:y>_&&(y=_)}if(p){var E,C,P,I,j="y"===g?"width":"height",M=["top","left"].includes(KO(o)),A=a.reference[m]-a.floating[j]+(M&&null!=(E=null==(C=s.offset)?void 0:C[m])?E:0)+(M?0:x.crossAxis),T=a.reference[m]+a.reference[j]+(M?0:null!=(P=null==(I=s.offset)?void 0:I[m])?P:0)-(M?x.crossAxis:0);b<A?b=A:b>T&&(b=T)}return vt(n={},g,y),vt(n,m,b),n}}},gN=function(e){return void 0===e&&(e={}),{name:"size",options:e,fn:function(t){return b(m().mark((function n(){var r,i,o,a,s,u,l,c,d,f,h,p,v,g,y,b,w,x,k;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.placement,i=t.rects,o=t.platform,a=t.elements,u=(s=e).apply,l=So(s,UO),n.next=9,GO(t,l);case 9:if(c=n.sent,d=KO(r),f=VO(r),"top"!==d&&"bottom"!==d){n.next=31;break}return h=d,n.t0=f,n.next=17,null==o.isRTL?void 0:o.isRTL(a.floating);case 17:if(!n.sent){n.next=21;break}n.t1="start",n.next=22;break;case 21:n.t1="end";case 22:if(n.t2=n.t1,n.t0!==n.t2){n.next=27;break}n.t3="left",n.next=28;break;case 27:n.t3="right";case 28:p=n.t3,n.next=32;break;case 31:p=d,h="end"===f?"top":"bottom";case 32:return v=ZO(c.left,0),g=ZO(c.right,0),y=ZO(c.top,0),b=ZO(c.bottom,0),w={availableHeight:i.floating.height-(["left","right"].includes(r)?2*(0!==y||0!==b?y+b:ZO(c.top,c.bottom)):c[h]),availableWidth:i.floating.width-(["top","bottom"].includes(r)?2*(0!==v||0!==g?v+g:ZO(c.left,c.right)):c[p])},n.next=39,o.getDimensions(a.floating);case 39:return x=n.sent,null==u||u(mt(mt({},t),w)),n.next=43,o.getDimensions(a.floating);case 43:return k=n.sent,n.abrupt("return",x.width!==k.width||x.height!==k.height?{reset:{rects:!0}}:{});case 45:case"end":return n.stop()}}),n)})))()}}};function mN(e){return e&&e.document&&e.location&&e.alert&&e.setInterval}function yN(e){if(null==e)return window;if(!mN(e)){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function bN(e){return yN(e).getComputedStyle(e)}function wN(e){return mN(e)?"":e?(e.nodeName||"").toLowerCase():""}function xN(){var e=navigator.userAgentData;return null!=e&&e.brands?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}function kN(e){return e instanceof yN(e).HTMLElement}function SN(e){return e instanceof yN(e).Element}function _N(e){return"undefined"!=typeof ShadowRoot&&(e instanceof yN(e).ShadowRoot||e instanceof ShadowRoot)}function EN(e){var t=bN(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function CN(e){return["table","td","th"].includes(wN(e))}function PN(e){var t=/firefox/i.test(xN()),n=bN(e);return"none"!==n.transform||"none"!==n.perspective||"paint"===n.contain||["transform","perspective"].includes(n.willChange)||t&&"filter"===n.willChange||t&&!!n.filter&&"none"!==n.filter}function IN(){return!/^((?!chrome|android).)*safari/i.test(xN())}var jN=Math.min,MN=Math.max,AN=Math.round;function TN(e,t,n){var r,i,o,a;void 0===t&&(t=!1),void 0===n&&(n=!1);var s=e.getBoundingClientRect(),u=1,l=1;t&&kN(e)&&(u=e.offsetWidth>0&&AN(s.width)/e.offsetWidth||1,l=e.offsetHeight>0&&AN(s.height)/e.offsetHeight||1);var c=SN(e)?yN(e):window,d=!IN()&&n,f=(s.left+(d&&null!=(r=null==(i=c.visualViewport)?void 0:i.offsetLeft)?r:0))/u,h=(s.top+(d&&null!=(o=null==(a=c.visualViewport)?void 0:a.offsetTop)?o:0))/l,p=s.width/u,v=s.height/l;return{width:p,height:v,top:h,right:f+p,bottom:h+v,left:f,x:f,y:h}}function ON(e){return(t=e,(t instanceof yN(t).Node?e.ownerDocument:e.document)||window.document).documentElement;var t}function NN(e){return SN(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function RN(e){return TN(ON(e)).left+NN(e).scrollLeft}function LN(e,t,n){var r=kN(t),i=ON(t),o=TN(e,r&&function(e){var t=TN(e);return AN(t.width)!==e.offsetWidth||AN(t.height)!==e.offsetHeight}(t),"fixed"===n),a={scrollLeft:0,scrollTop:0},s={x:0,y:0};if(r||!r&&"fixed"!==n)if(("body"!==wN(t)||EN(i))&&(a=NN(t)),kN(t)){var u=TN(t,!0);s.x=u.x+t.clientLeft,s.y=u.y+t.clientTop}else i&&(s.x=RN(i));return{x:o.left+a.scrollLeft-s.x,y:o.top+a.scrollTop-s.y,width:o.width,height:o.height}}function DN(e){return"html"===wN(e)?e:e.assignedSlot||e.parentNode||(_N(e)?e.host:null)||ON(e)}function zN(e){return kN(e)&&"fixed"!==getComputedStyle(e).position?e.offsetParent:null}function BN(e){for(var t=yN(e),n=zN(e);n&&CN(n)&&"static"===getComputedStyle(n).position;)n=zN(n);return n&&("html"===wN(n)||"body"===wN(n)&&"static"===getComputedStyle(n).position&&!PN(n))?t:n||function(e){var t=DN(e);for(_N(t)&&(t=t.host);kN(t)&&!["html","body"].includes(wN(t));){if(PN(t))return t;t=t.parentNode}return null}(e)||t}function FN(e){if(kN(e))return{width:e.offsetWidth,height:e.offsetHeight};var t=TN(e);return{width:t.width,height:t.height}}function UN(e){var t=DN(e);return["html","body","#document"].includes(wN(t))?e.ownerDocument.body:kN(t)&&EN(t)?t:UN(t)}function KN(e,t){var n;void 0===t&&(t=[]);var r=UN(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),o=yN(r),a=i?[o].concat(o.visualViewport||[],EN(r)?r:[]):r,s=t.concat(a);return i?s:s.concat(KN(a))}function VN(e,t,n){return"viewport"===t?$O(function(e,t){var n=yN(e),r=ON(e),i=n.visualViewport,o=r.clientWidth,a=r.clientHeight,s=0,u=0;if(i){o=i.width,a=i.height;var l=IN();(l||!l&&"fixed"===t)&&(s=i.offsetLeft,u=i.offsetTop)}return{width:o,height:a,x:s,y:u}}(e,n)):SN(t)?function(e,t){var n=TN(e,!1,"fixed"===t),r=n.top+e.clientTop,i=n.left+e.clientLeft;return{top:r,left:i,x:i,y:r,right:i+e.clientWidth,bottom:r+e.clientHeight,width:e.clientWidth,height:e.clientHeight}}(t,n):$O(function(e){var t,n=ON(e),r=NN(e),i=null==(t=e.ownerDocument)?void 0:t.body,o=MN(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),a=MN(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),s=-r.scrollLeft+RN(e),u=-r.scrollTop;return"rtl"===bN(i||n).direction&&(s+=MN(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:a,x:s,y:u}}(ON(e)))}var WN={getClippingRect:function(e){var t=e.element,n=e.boundary,r=e.rootBoundary,i=e.strategy,o=[].concat(d("clippingAncestors"===n?function(e){var t=KN(e),n=["absolute","fixed"].includes(bN(e).position)&&kN(e)?BN(e):e;return SN(n)?t.filter((function(e){return SN(e)&&function(e,t){var n=null==t.getRootNode?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&_N(n)){var r=t;do{if(r&&e===r)return!0;r=r.parentNode||r.host}while(r)}return!1}(e,n)&&"body"!==wN(e)})):[]}(t):[].concat(n)),[r]),a=o[0],s=o.reduce((function(e,n){var r=VN(t,n,i);return e.top=MN(r.top,e.top),e.right=jN(r.right,e.right),e.bottom=jN(r.bottom,e.bottom),e.left=MN(r.left,e.left),e}),VN(t,a,i));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(e){var t=e.rect,n=e.offsetParent,r=e.strategy,i=kN(n),o=ON(n);if(n===o)return t;var a={scrollLeft:0,scrollTop:0},s={x:0,y:0};if((i||!i&&"fixed"!==r)&&(("body"!==wN(n)||EN(o))&&(a=NN(n)),kN(n))){var u=TN(n,!0);s.x=u.x+n.clientLeft,s.y=u.y+n.clientTop}return mt(mt({},t),{},{x:t.x-a.scrollLeft+s.x,y:t.y-a.scrollTop+s.y})},isElement:SN,getDimensions:FN,getOffsetParent:BN,getDocumentElement:ON,getElementRects:function(e){var t=e.reference,n=e.floating,r=e.strategy;return{reference:LN(t,BN(n),r),floating:mt(mt({},FN(n)),{},{x:0,y:0})}},getClientRects:function(e){return Array.from(e.getClientRects())},isRTL:function(e){return"rtl"===bN(e).direction}};function HN(e,t,n,r){void 0===r&&(r={});var i=r,o=i.ancestorScroll,a=void 0===o||o,s=i.ancestorResize,u=void 0===s||s,l=i.elementResize,c=void 0===l||l,f=i.animationFrame,h=void 0!==f&&f,p=a&&!h,v=u&&!h,g=p||v?[].concat(d(SN(e)?KN(e):[]),d(KN(t))):[];g.forEach((function(e){p&&e.addEventListener("scroll",n,{passive:!0}),v&&e.addEventListener("resize",n)}));var m,y=null;if(c){var b=!0;y=new ResizeObserver((function(){b||n(),b=!1})),SN(e)&&!h&&y.observe(e),y.observe(t)}var w=h?TN(e):null;return h&&function t(){var r=TN(e);!w||r.x===w.x&&r.y===w.y&&r.width===w.width&&r.height===w.height||n(),w=r,m=requestAnimationFrame(t)}(),n(),function(){var e;g.forEach((function(e){p&&e.removeEventListener("scroll",n),v&&e.removeEventListener("resize",n)})),null==(e=y)||e.disconnect(),y=null,h&&cancelAnimationFrame(m)}}var YN="undefined"!==typeof document?t.useLayoutEffect:t.useEffect;function qN(e,t){if(e===t)return!0;if(typeof e!==typeof t)return!1;if("function"===typeof e&&e.toString()===t.toString())return!0;var n,r,i;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if((n=e.length)!=t.length)return!1;for(r=n;0!==r--;)if(!qN(e[r],t[r]))return!1;return!0}if((n=(i=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(r=n;0!==r--;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;0!==r--;){var o=i[r];if(("_owner"!==o||!e.$$typeof)&&!qN(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function XN(e){var n=void 0===e?{}:e,r=n.middleware,i=n.placement,o=void 0===i?"bottom":i,a=n.strategy,s=void 0===a?"absolute":a,u=n.whileElementsMounted,c=t.useRef(null),d=t.useRef(null),f=function(e){var n=t.useRef(e);return YN((function(){n.current=e})),n}(u),h=t.useRef(null),p=l(t.useState({x:null,y:null,strategy:s,placement:o,middlewareData:{}}),2),v=p[0],g=p[1],m=l(t.useState(r),2),y=m[0],b=m[1];qN(null==y?void 0:y.map((function(e){return e.options})),null==r?void 0:r.map((function(e){return e.options})))||b(r);var w=t.useCallback((function(){c.current&&d.current&&function(e,t,n){return qO(e,t,mt({platform:WN},n))}(c.current,d.current,{middleware:y,placement:o,strategy:s}).then((function(e){x.current&&ek.flushSync((function(){g(e)}))}))}),[y,o,s]);YN((function(){x.current&&w()}),[w]);var x=t.useRef(!1);YN((function(){return x.current=!0,function(){x.current=!1}}),[]);var k=t.useCallback((function(){if("function"===typeof h.current&&(h.current(),h.current=null),c.current&&d.current)if(f.current){var e=f.current(c.current,d.current,w);h.current=e}else w()}),[w,f]),S=t.useCallback((function(e){c.current=e,k()}),[k]),_=t.useCallback((function(e){d.current=e,k()}),[k]),E=t.useMemo((function(){return{reference:c,floating:d}}),[]);return t.useMemo((function(){return mt(mt({},v),{},{update:w,refs:E,reference:S,floating:_})}),[v,w,E,S,_])}var $N=function(e){var t=e.element,n=e.padding;return{name:"arrow",options:e,fn:function(e){return function(e){return Object.prototype.hasOwnProperty.call(e,"current")}(t)?null!=t.current?tN({element:t.current,padding:n}).fn(e):{}:t?tN({element:t,padding:n}).fn(e):{}}}};var GN=["__scopePopper","virtualRef"],QN=["__scopePopper","side","sideOffset","align","alignOffset","arrowPadding","collisionBoundary","collisionPadding","sticky","hideWhenDetached","avoidCollisions","onPlaced"],JN="Popper",ZN=l(eO(JN),2),eR=ZN[0],tR=ZN[1],nR=l(eR(JN),2),rR=nR[0],iR=nR[1],oR=function(e){var n=e.__scopePopper,r=e.children,i=l((0,t.useState)(null),2),o=i[0],a=i[1];return(0,t.createElement)(rR,{scope:n,anchor:o,onAnchorChange:a},r)},aR="PopperAnchor",sR=(0,t.forwardRef)((function(e,n){var r=e.__scopePopper,i=e.virtualRef,o=So(e,GN),a=iR(aR,r),s=(0,t.useRef)(null),u=JT(n,s);return(0,t.useEffect)((function(){a.onAnchorChange((null===i||void 0===i?void 0:i.current)||s.current)})),i?null:(0,t.createElement)(lO.div,Fx({},o,{ref:u}))})),uR="PopperContent",lR=l(eR(uR),2),cR=lR[0],dR=(lR[1],l(eR(uR,{hasParent:!1,positionUpdateFns:new Set}),2)),fR=dR[0],hR=dR[1],pR=(0,t.forwardRef)((function(e,n){var r,i,o,a,s,u,c,d,f=e.__scopePopper,h=e.side,p=void 0===h?"bottom":h,v=e.sideOffset,g=void 0===v?0:v,m=e.align,y=void 0===m?"center":m,b=e.alignOffset,w=void 0===b?0:b,x=e.arrowPadding,k=void 0===x?0:x,S=e.collisionBoundary,_=void 0===S?[]:S,E=e.collisionPadding,C=void 0===E?0:E,P=e.sticky,I=void 0===P?"partial":P,j=e.hideWhenDetached,M=void 0!==j&&j,A=e.avoidCollisions,T=void 0===A||A,O=e.onPlaced,N=So(e,QN),R=iR(uR,f),L=l((0,t.useState)(null),2),D=L[0],z=L[1],B=JT(n,(function(e){return z(e)})),F=l((0,t.useState)(null),2),U=F[0],K=F[1],V=function(e){var n=l((0,t.useState)(void 0),2),r=n[0],i=n[1];return NO((function(){if(e){i({width:e.offsetWidth,height:e.offsetHeight});var t=new ResizeObserver((function(t){if(Array.isArray(t)&&t.length){var n,r,o=t[0];if("borderBoxSize"in o){var a=o.borderBoxSize,s=Array.isArray(a)?a[0]:a;n=s.inlineSize,r=s.blockSize}else n=e.offsetWidth,r=e.offsetHeight;i({width:n,height:r})}}));return t.observe(e,{box:"border-box"}),function(){return t.unobserve(e)}}i(void 0)}),[e]),r}(U),W=null!==(r=null===V||void 0===V?void 0:V.width)&&void 0!==r?r:0,H=null!==(i=null===V||void 0===V?void 0:V.height)&&void 0!==i?i:0,Y=p+("center"!==y?"-"+y:""),q="number"===typeof C?C:mt({top:0,right:0,bottom:0,left:0},C),X=Array.isArray(_)?_:[_],$=X.length>0,G={padding:q,boundary:X.filter(gR),altBoundary:$},Q=XN({strategy:"fixed",placement:Y,whileElementsMounted:HN,middleware:[fN({mainAxis:g+H,alignmentAxis:w}),T?pN(mt({mainAxis:!0,crossAxis:!1,limiter:"partial"===I?vN():void 0},G)):void 0,T?uN(mt({},G)):void 0,gN(mt(mt({},G),{},{apply:function(e){var t=e.elements,n=e.rects,r=e.availableWidth,i=e.availableHeight,o=n.reference,a=o.width,s=o.height,u=t.floating.style;u.setProperty("--radix-popper-available-width","".concat(r,"px")),u.setProperty("--radix-popper-available-height","".concat(i,"px")),u.setProperty("--radix-popper-anchor-width","".concat(a,"px")),u.setProperty("--radix-popper-anchor-height","".concat(s,"px"))}})),U?$N({element:U,padding:k}):void 0,mR({arrowWidth:W,arrowHeight:H}),M?dN({strategy:"referenceHidden"}):void 0].filter(vR)}),J=Q.reference,Z=Q.floating,ee=Q.strategy,te=Q.x,ne=Q.y,re=Q.placement,ie=Q.middlewareData,oe=Q.update;NO((function(){J(R.anchor)}),[J,R.anchor]);var ae=null!==te&&null!==ne,se=l(yR(re),2),ue=se[0],le=se[1],ce=cO(O);NO((function(){ae&&(null===ce||void 0===ce||ce())}),[ae,ce]);var de=null===(o=ie.arrow)||void 0===o?void 0:o.x,fe=null===(a=ie.arrow)||void 0===a?void 0:a.y,he=0!==(null===(s=ie.arrow)||void 0===s?void 0:s.centerOffset),pe=l((0,t.useState)(),2),ve=pe[0],ge=pe[1];NO((function(){D&&ge(window.getComputedStyle(D).zIndex)}),[D]);var me=hR(uR,f),ye=me.hasParent,be=me.positionUpdateFns,we=!ye;(0,t.useLayoutEffect)((function(){if(!we)return be.add(oe),function(){be.delete(oe)}}),[we,be,oe]),NO((function(){we&&ae&&Array.from(be).reverse().forEach((function(e){return requestAnimationFrame(e)}))}),[we,ae,be]);var xe=mt(mt({"data-side":ue,"data-align":le},N),{},{ref:B,style:mt(mt({},N.style),{},{animation:ae?void 0:"none",opacity:null!==(u=ie.hide)&&void 0!==u&&u.referenceHidden?0:void 0})});return(0,t.createElement)("div",{ref:Z,"data-radix-popper-content-wrapper":"",style:vt({position:ee,left:0,top:0,transform:ae?"translate3d(".concat(Math.round(te),"px, ").concat(Math.round(ne),"px, 0)"):"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:ve},"--radix-popper-transform-origin",[null===(c=ie.transformOrigin)||void 0===c?void 0:c.x,null===(d=ie.transformOrigin)||void 0===d?void 0:d.y].join(" ")),dir:e.dir},(0,t.createElement)(cR,{scope:f,placedSide:ue,onArrowChange:K,arrowX:de,arrowY:fe,shouldHideArrow:he},we?(0,t.createElement)(fR,{scope:f,hasParent:!0,positionUpdateFns:be},(0,t.createElement)(lO.div,xe)):(0,t.createElement)(lO.div,xe)))}));function vR(e){return void 0!==e}function gR(e){return null!==e}var mR=function(e){return{name:"transformOrigin",options:e,fn:function(t){var n,r,i,o,a,s=t.placement,u=t.rects,c=t.middlewareData,d=0!==(null===(n=c.arrow)||void 0===n?void 0:n.centerOffset),f=d?0:e.arrowWidth,h=d?0:e.arrowHeight,p=l(yR(s),2),v=p[0],g={start:"0%",center:"50%",end:"100%"}[p[1]],m=(null!==(r=null===(i=c.arrow)||void 0===i?void 0:i.x)&&void 0!==r?r:0)+f/2,y=(null!==(o=null===(a=c.arrow)||void 0===a?void 0:a.y)&&void 0!==o?o:0)+h/2,b="",w="";return"bottom"===v?(b=d?g:"".concat(m,"px"),w="".concat(-h,"px")):"top"===v?(b=d?g:"".concat(m,"px"),w="".concat(u.floating.height+h,"px")):"right"===v?(b="".concat(-h,"px"),w=d?g:"".concat(y,"px")):"left"===v&&(b="".concat(u.floating.width+h,"px"),w=d?g:"".concat(y,"px")),{data:{x:b,y:w}}}}};function yR(e){var t=l(e.split("-"),2),n=t[0],r=t[1];return[n,void 0===r?"center":r]}var bR=oR,wR=sR,xR=pR,kR=["container"],SR=(0,t.forwardRef)((function(e,n){var r,i=e.container,o=void 0===i?null===globalThis||void 0===globalThis||null===(r=globalThis.document)||void 0===r?void 0:r.body:i,a=So(e,kR);return o?ek.createPortal((0,t.createElement)(lO.div,Fx({},a,{ref:n})),o):null}));var _R=function(e){var n=e.present,r=e.children,i=function(e){var n=l((0,t.useState)(),2),r=n[0],i=n[1],o=(0,t.useRef)({}),a=(0,t.useRef)(e),s=(0,t.useRef)("none"),u=e?"mounted":"unmounted",c=function(e,n){return(0,t.useReducer)((function(e,t){var r=n[e][t];return null!==r&&void 0!==r?r:e}),e)}(u,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}}),d=l(c,2),f=d[0],h=d[1];return(0,t.useEffect)((function(){var e=ER(o.current);s.current="mounted"===f?e:"none"}),[f]),NO((function(){var t=o.current,n=a.current;if(n!==e){var r=s.current,i=ER(t);if(e)h("MOUNT");else if("none"===i||"none"===(null===t||void 0===t?void 0:t.display))h("UNMOUNT");else{h(n&&r!==i?"ANIMATION_OUT":"UNMOUNT")}a.current=e}}),[e,h]),NO((function(){if(r){var e=function(e){var t=ER(o.current).includes(e.animationName);e.target===r&&t&&(0,ek.flushSync)((function(){return h("ANIMATION_END")}))},t=function(e){e.target===r&&(s.current=ER(o.current))};return r.addEventListener("animationstart",t),r.addEventListener("animationcancel",e),r.addEventListener("animationend",e),function(){r.removeEventListener("animationstart",t),r.removeEventListener("animationcancel",e),r.removeEventListener("animationend",e)}}h("ANIMATION_END")}),[r,h]),{isPresent:["mounted","unmountSuspended"].includes(f),ref:(0,t.useCallback)((function(e){e&&(o.current=getComputedStyle(e)),i(e)}),[])}}(n),o="function"===typeof r?r({present:i.isPresent}):t.Children.only(r),a=JT(i.ref,o.ref);return"function"===typeof r||i.isPresent?(0,t.cloneElement)(o,{ref:a}):null};function ER(e){return(null===e||void 0===e?void 0:e.animationName)||"none"}function CR(e){var n=e.prop,r=e.defaultProp,i=e.onChange,o=void 0===i?function(){}:i,a=function(e){var n=e.defaultProp,r=e.onChange,i=(0,t.useState)(n),o=l(i,1)[0],a=(0,t.useRef)(o),s=cO(r);return(0,t.useEffect)((function(){a.current!==o&&(s(o),a.current=o)}),[o,a,s]),i}({defaultProp:r,onChange:o}),s=l(a,2),u=s[0],c=s[1],d=void 0!==n,f=d?n:u,h=cO(o),p=(0,t.useCallback)((function(e){if(d){var t="function"===typeof e?e(n):e;t!==n&&h(t)}else c(e)}),[d,n,c,h]);return[f,p]}_R.displayName="Presence";var PR=["__scopePopover"],IR=["forceMount"],jR=["__scopePopover","trapFocus","onOpenAutoFocus","onCloseAutoFocus","disableOutsidePointerEvents","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside"],MR="Popover",AR=l(eO(MR,[tR]),2),TR=AR[0],OR=(AR[1],tR()),NR=l(TR(MR),2),RR=NR[0],LR=NR[1],DR=function(e){var n=e.__scopePopover,r=e.children,i=e.open,o=e.defaultOpen,a=e.onOpenChange,s=e.modal,u=void 0!==s&&s,c=OR(n),d=(0,t.useRef)(null),f=l((0,t.useState)(!1),2),h=f[0],p=f[1],v=l(CR({prop:i,defaultProp:o,onChange:a}),2),g=v[0],m=void 0!==g&&g,y=v[1];return(0,t.createElement)(bR,c,(0,t.createElement)(RR,{scope:n,contentId:DO(),triggerRef:d,open:m,onOpenChange:y,onOpenToggle:(0,t.useCallback)((function(){return y((function(e){return!e}))}),[y]),hasCustomAnchor:h,onCustomAnchorAdd:(0,t.useCallback)((function(){return p(!0)}),[]),onCustomAnchorRemove:(0,t.useCallback)((function(){return p(!1)}),[]),modal:u},r))},zR="PopoverTrigger",BR=(0,t.forwardRef)((function(e,n){var r=e.__scopePopover,i=So(e,PR),o=LR(zR,r),a=OR(r),s=JT(n,o.triggerRef),u=(0,t.createElement)(lO.button,Fx({type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":GR(o.open)},i,{ref:s,onClick:GT(e.onClick,o.onOpenToggle)}));return o.hasCustomAnchor?u:(0,t.createElement)(wR,Fx({asChild:!0},a),u)})),FR="PopoverPortal",UR=l(TR(FR,{forceMount:void 0}),2),KR=UR[0],VR=UR[1],WR=function(e){var n=e.__scopePopover,r=e.forceMount,i=e.children,o=e.container,a=LR(FR,n);return(0,t.createElement)(KR,{scope:n,forceMount:r},(0,t.createElement)(_R,{present:r||a.open},(0,t.createElement)(SR,{asChild:!0,container:o},i)))},HR="PopoverContent",YR=(0,t.forwardRef)((function(e,n){var r=VR(HR,e.__scopePopover),i=e.forceMount,o=void 0===i?r.forceMount:i,a=So(e,IR),s=LR(HR,e.__scopePopover);return(0,t.createElement)(_R,{present:o||s.open},s.modal?(0,t.createElement)(qR,Fx({},a,{ref:n})):(0,t.createElement)(XR,Fx({},a,{ref:n})))})),qR=(0,t.forwardRef)((function(e,n){var r=LR(HR,e.__scopePopover),i=(0,t.useRef)(null),o=JT(n,i),a=(0,t.useRef)(!1);return(0,t.useEffect)((function(){var e=i.current;if(e)return TS(e)}),[]),(0,t.createElement)(_S,{as:iO,allowPinchZoom:!0},(0,t.createElement)($R,Fx({},e,{ref:o,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:GT(e.onCloseAutoFocus,(function(e){var t;e.preventDefault(),a.current||null===(t=r.triggerRef.current)||void 0===t||t.focus()})),onPointerDownOutside:GT(e.onPointerDownOutside,(function(e){var t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey,r=2===t.button||n;a.current=r}),{checkForDefaultPrevented:!1}),onFocusOutside:GT(e.onFocusOutside,(function(e){return e.preventDefault()}),{checkForDefaultPrevented:!1})})))})),XR=(0,t.forwardRef)((function(e,n){var r=LR(HR,e.__scopePopover),i=(0,t.useRef)(!1),o=(0,t.useRef)(!1);return(0,t.createElement)($R,Fx({},e,{ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:function(t){var n,a;(null===(n=e.onCloseAutoFocus)||void 0===n||n.call(e,t),t.defaultPrevented)||(i.current||null===(a=r.triggerRef.current)||void 0===a||a.focus(),t.preventDefault());i.current=!1,o.current=!1},onInteractOutside:function(t){var n,a;null===(n=e.onInteractOutside)||void 0===n||n.call(e,t),t.defaultPrevented||(i.current=!0,"pointerdown"===t.detail.originalEvent.type&&(o.current=!0));var s=t.target;(null===(a=r.triggerRef.current)||void 0===a?void 0:a.contains(s))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&o.current&&t.preventDefault()}}))})),$R=(0,t.forwardRef)((function(e,n){var r=e.__scopePopover,i=e.trapFocus,o=e.onOpenAutoFocus,a=e.onCloseAutoFocus,s=e.disableOutsidePointerEvents,u=e.onEscapeKeyDown,l=e.onPointerDownOutside,c=e.onFocusOutside,d=e.onInteractOutside,f=So(e,jR),h=LR(HR,r),p=OR(r);return xO(),(0,t.createElement)(PO,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:o,onUnmountAutoFocus:a},(0,t.createElement)(mO,{asChild:!0,disableOutsidePointerEvents:s,onInteractOutside:d,onEscapeKeyDown:u,onPointerDownOutside:l,onFocusOutside:c,onDismiss:function(){return h.onOpenChange(!1)}},(0,t.createElement)(xR,Fx({"data-state":GR(h.open),role:"dialog",id:h.contentId},p,f,{ref:n,style:mt(mt({},f.style),{},{"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"})}))))}));function GR(e){return e?"open":"closed"}var QR=DR,JR=BR,ZR=WR,eL=YR,tL=function(e){var t=e.id,n=e.children,r=l(Pj(t,e.onOpenChange),2),i=r[0],o=r[1];return(0,f.jsx)(QR,{onOpenChange:o,open:i,children:(0,f.jsx)("div",{className:"tlui-popover",children:n})})},nL=function(e){var t=e.children,n=e.disabled,r=e["data-testid"];return(0,f.jsx)(JR,{"data-testid":r,disabled:n,asChild:!0,dir:"ltr",children:t})},rL=function(e){var t=e.side,n=e.children,r=e.align,i=void 0===r?"center":r,o=e.sideOffset,a=void 0===o?8:o,s=e.alignOffset,u=void 0===s?0:s,l=cd();return(0,f.jsx)(ZR,{dir:"ltr",container:l,children:(0,f.jsx)(eL,{className:"tlui-popover__content",side:t,sideOffset:a,align:i,alignOffset:u,dir:"ltr",children:n})})},iL=(0,t.memo)((function(){var e=P_(),n=cd(),r=function(){var e=t.useContext(oT);if(!e)throw new Error("useActionsMenuSchema must be used inside of a ActionsMenuSchemaProvider.");return e}(),i=gT();return(0,f.jsxs)(tL,{id:"actions menu",children:[(0,f.jsx)(nL,{children:(0,f.jsx)(D_,{className:"tlui-menu__trigger","data-testid":"main.action-menu",icon:"dots-vertical",title:e("actions-menu.title"),smallIcon:!0})}),(0,f.jsx)(ZR,{dir:"ltr",container:n,children:(0,f.jsx)(eL,{className:"tlui-popover__content",side:"bottom",dir:"ltr",sideOffset:6,children:(0,f.jsx)("div",{className:"tlui-actions-menu tlui-button-grid__four",children:r.map((function(t){if(i&&!t.readonlyOk)return null;if("item"===t.type){var n=t.actionItem,r=n.id,o=n.icon,a=n.label,s=n.kbd,u=n.onSelect;return(0,f.jsx)(D_,{className:"tlui-button-grid__button","data-testid":"menu-item.".concat(t.id),icon:o,title:a?s?"".concat(e(a)," ").concat(N_(s)):"".concat(e(a)):s?"".concat(N_(s)):"",onClick:function(){return u("actions-menu")},disabled:t.disabled},r)}}))})})})]})})),oL=Pl((function(){var e=Ml(),t=VA(),n=P_(),r=t.duplicate,i=e.selectedIds.length<=0;return(0,f.jsx)(D_,{icon:r.icon,onClick:function(){return r.onSelect("quick-actions")},disabled:i,title:"".concat(n(r.label)," ").concat(N_(r.kbd)),smallIcon:!0})})),aL=t.memo((function(){var e=P_();return(0,f.jsxs)(Aj,{id:"main menu",children:[(0,f.jsx)(Tj,{children:(0,f.jsx)(D_,{className:"tlui-menu__trigger","data-testid":"main.menu",title:e("menu.title"),icon:"menu"})}),(0,f.jsx)(Oj,{alignOffset:0,sideOffset:6,children:(0,f.jsx)(sL,{})})]})}));function sL(){var e=Ml(),n=P_(),r=function(){var e=t.useContext(ST);if(!e)throw new Error("useMenuSchema must be used inside of a TLUiMenuSchemaProvider.");return e}(),i=rT(),o=gT();function a(e,t,r,s){switch(t.type){case"custom":return o&&!t.readonlyOk?null:"LANGUAGE_MENU"===t.id?(0,f.jsx)(qT,{},"item"):null;case"group":return o&&!t.readonlyOk?null:(0,f.jsx)(Dj,{size:s<=1?"medium":i<3||"submenu"===(null===r||void 0===r?void 0:r.type)&&s>2?"tiny":"medium",children:t.children.map((function(n){return a(e,n,t,s+1)}))},t.id);case"submenu":return o&&!t.readonlyOk?null:(0,f.jsxs)(Nj,{id:"main menu ".concat(r?r.id+" ":"").concat(t.id),children:[(0,f.jsx)(Rj,{label:t.label,"data-testid":"menu-item.".concat(t.id)}),(0,f.jsx)(Lj,{sideOffset:-4,alignOffset:-1,children:t.children.map((function(n){return a(e,n,t,s+1)}))})]},t.id);case"item":if(o&&!t.readonlyOk)return null;var u=t.actionItem,l=u.id,c=u.checkbox,d=u.menuLabel,h=u.label,p=u.onSelect,v=u.kbd,g=null!==d&&void 0!==d?d:h,m=g?n(g):void 0;return c?(0,f.jsxs)(Bj,{onSelect:function(){return p("menu")},title:m||"",checked:t.checked,disabled:t.disabled,children:[m&&(0,f.jsx)("span",{children:m}),v&&(0,f.jsx)(R_,{children:v})]},l):(0,f.jsx)(zj,{"data-testid":"menu-item.".concat(t.id),kbd:v,label:g,onClick:function(){return p("menu")},disabled:t.disabled},l)}}return(0,f.jsx)(f.Fragment,{children:r.map((function(t){return a(e,t,null,0)}))})}var uL=function(e){var n=e.name,r=e.id,i=e.isCurrentPage,o=Ml(),a=(0,t.useRef)(null),s=(0,t.useCallback)((function(e){o.renamePage(r,e||"New Page",!0)}),[o,r]),u=(0,t.useCallback)((function(e){o.mark("rename page"),o.renamePage(r,e||"New Page",!1)}),[o,r]);return(0,f.jsx)(UM,{className:"tlui-page-menu__item__input",ref:function(e){return a.current=e},defaultValue:n,onValueChange:s,onComplete:u,onCancel:u,shouldManuallyMaintainScrollPositionWhenFocused:!0,autofocus:i,autoselect:!0})},lL=function(e,t,n,r){var i,o=e.pages,a=n>r?o[r-1]:o[r],s=n>r?o[r]:o[r+1];(i=a&&!s?vr(a.index):!a&&s?function(e){return dr(void 0,e,1)[0]}(o[0].index):pr(a.index,s.index))!==o[n].index&&(e.mark("moving page"),e.updatePage({id:t,index:i}))},cL=Pl((function(e){var n=e.index,r=e.listSize,i=e.item,o=e.onRename,a=Ml(),s=P_(),u=a.pages,l=(0,t.useCallback)((function(){a.mark("creating page");var e=Ko.createId();a.duplicatePage(i.id,e)}),[a,i]),c=(0,t.useCallback)((function(){lL(a,i.id,n,n-1)}),[a,i,n]),d=(0,t.useCallback)((function(){lL(a,i.id,n,n+1)}),[a,i,n]),h=(0,t.useCallback)((function(){a.mark("deleting page"),a.deletePage(i.id)}),[a,i]);return(0,f.jsxs)(Aj,{id:"page item submenu ".concat(n),children:[(0,f.jsx)(Tj,{children:(0,f.jsx)(D_,{title:s("page-menu.submenu.title"),icon:"dots-vertical"})}),(0,f.jsxs)(Oj,{alignOffset:0,children:[(0,f.jsxs)(Dj,{children:[o&&(0,f.jsx)(mj,{dir:"ltr",onSelect:o,asChild:!0,children:(0,f.jsx)(D_,{className:"tlui-menu__button",label:"page-menu.submenu.rename"})}),(0,f.jsx)(mj,{dir:"ltr",onSelect:l,disabled:u.length>=40,asChild:!0,children:(0,f.jsx)(D_,{className:"tlui-menu__button",label:"page-menu.submenu.duplicate-page"})}),n>0&&(0,f.jsx)(mj,{dir:"ltr",onSelect:c,asChild:!0,children:(0,f.jsx)(D_,{className:"tlui-menu__button",label:"page-menu.submenu.move-up"})}),n<r-1&&(0,f.jsx)(mj,{dir:"ltr",onSelect:d,asChild:!0,children:(0,f.jsx)(D_,{className:"tlui-menu__button",label:"page-menu.submenu.move-down"})})]}),r>1&&(0,f.jsx)(Dj,{children:(0,f.jsx)(mj,{dir:"ltr",onSelect:h,asChild:!0,children:(0,f.jsx)(D_,{className:"tlui-menu__button",label:"page-menu.submenu.delete"})})})]})]})})),dL=function(){var e=Ml(),n=P_(),r=rT(),i=l(Pj("page-menu",(0,t.useCallback)((function(){return y(!1)}),[])),2),o=i[0],a=i[1],s=r<5?36:40,u=(0,t.useRef)(null),c=Il("pages",(function(){return e.pages}),[e]),d=Il("currentPage",(function(){return e.currentPage}),[e]),h=Il("isReadonlyMode",(function(){return e.isReadOnly}),[e]),p=Il("maxPageCountReached",(function(){return e.pages.length>=40}),[e]),v=Il("isCoarsePointer",(function(){return e.isCoarsePointer}),[e]),g=l((0,t.useState)(!1),2),m=g[0],y=g[1],b=(0,t.useCallback)((function(){h||y((function(e){return!e}))}),[h]),w=(0,t.useRef)({isPointing:!1,status:"idle",pointing:null,startY:0,startIndex:0,dragIndex:0}),x=(0,t.useState)(Object.fromEntries(c.map((function(e,t){return[e.id,{y:t*s,offsetY:0,isSelected:!1}]})))),k=l(x,2),S=k[0],_=k[1];(0,t.useLayoutEffect)((function(){_(Object.fromEntries(c.map((function(e,t){return[e.id,{y:t*s,offsetY:0,isSelected:!1}]}))))}),[s,c]),(0,t.useEffect)((function(){o&&requestAnimationFrame((function(){var e=document.querySelector('[data-testid="page-menu-item-'.concat(d.id,'"]'));if(e){var t=u.current;if(!t)return;var n=e.offsetTop;n<t.scrollTop&&t.scrollTo({top:n});var r=n+s;r>t.scrollTop+t.offsetHeight&&t.scrollTo({top:r-t.offsetHeight})}}))}),[s,d,o]);var E=(0,t.useCallback)((function(e){var t=e.clientY,n=e.currentTarget.dataset,r=n.id,i=n.index;if(r&&i){var o=w.current;e.currentTarget.setPointerCapture(e.pointerId),o.status="pointing",o.pointing={id:r,index:+i};var a=S[r].y;o.startY=t,o.startIndex=Math.max(0,Math.min(Math.round(a/s),c.length-1))}}),[s,c.length,S]),C=(0,t.useCallback)((function(e){var t=w.current;if("pointing"===t.status){var n=e.clientY-t.startY;Math.abs(n)>5&&(t.status="dragging")}if("dragging"===t.status){var r=e.clientY-t.startY,i=S[t.pointing.id],o=t.startIndex,a=t.pointing,u=i.y+r,l=Math.max(0,Math.min(Math.round(u/s),c.length-1)),d=mt({},S);if(d[a.id]={y:i.y,offsetY:r,isSelected:!0},l!==t.dragIndex){t.dragIndex=l;for(var f=0;f<c.length;f++){var h=c[f];if(h.id!==t.pointing.id){var p=d[h.id].y;l===o?p=f*s:l<o?p=l<=f&&f<o?(f+1)*s:f*s:l>o&&(p=l>=f&&f>o?(f-1)*s:f*s),p!==d[h.id].y&&(d[h.id]={y:p,offsetY:0,isSelected:!0})}}}_(d)}}),[s,c,S]),P=(0,t.useCallback)((function(t){var n=w.current;if("dragging"===n.status){var r=n.pointing,i=r.id,o=r.index;lL(e,i,o,n.dragIndex)}t.currentTarget.releasePointerCapture(t.pointerId),n.status="idle"}),[e]),I=(0,t.useCallback)((function(e){var t=w.current;"Escape"===e.key&&("dragging"===t.status&&_(Object.fromEntries(c.map((function(e,t){return[e.id,{y:t*s,offsetY:0,isSelected:!1}]})))),t.status="idle")}),[s,c]),j=(0,t.useCallback)((function(){if(!h){e.mark("creating page");var t=Ko.createId();e.createPage(n("page-menu.new-page-initial-name"),t),y(!0)}}),[e,n,h]);return(0,f.jsxs)(tL,{id:"page menu",onOpenChange:a,open:o,children:[(0,f.jsx)(nL,{children:(0,f.jsx)(D_,{className:"tlui-page-menu__trigger tlui-menu__trigger","data-testid":"main.page-menu",icon:"chevron-down",title:d.name,children:(0,f.jsx)("div",{className:"tlui-page-menu__name",children:d.name})})}),(0,f.jsx)(rL,{side:"bottom",align:"start",sideOffset:6,children:(0,f.jsxs)("div",{className:"tlui-page-menu__wrapper",children:[(0,f.jsxs)("div",{className:"tlui-page-menu__header",children:[(0,f.jsx)("div",{className:"tlui-page-menu__header__title",children:n("page-menu.title")}),!h&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(D_,{"data-testid":"page-menu.edit",title:n(m?"page-menu.edit-done":"page-menu.edit-start"),icon:m?"check":"edit",onClick:b}),(0,f.jsx)(D_,{"data-testid":"page-menu.create",icon:"plus",title:n(p?"page-menu.max-page-count-reached":"page-menu.create-new-page"),disabled:p,onClick:j})]})]}),(0,f.jsx)("div",{className:"tlui-page-menu__list tlui-menu__group",style:{height:s*c.length+4},ref:u,children:c.map((function(t,i){var o,a=null!==(o=S[t.id])&&void 0!==o?o:{position:40*i,offsetY:0};return m?(0,f.jsxs)("div",{"data-testid":"page-menu-item-".concat(t.id),className:"tlui-page_menu__item__sortable",style:{zIndex:t.id===d.id?888:i,transform:"translate(0px, ".concat(a.y+a.offsetY,"px)")},children:[(0,f.jsx)(D_,{tabIndex:-1,className:"tlui-page_menu__item__sortable__handle",icon:"drag-handle-dots",onPointerDown:E,onPointerUp:P,onPointerMove:C,onKeyDown:I,"data-id":t.id,"data-index":i}),r<5&&v?(0,f.jsx)(D_,{className:"tlui-page-menu__item__button",onClick:function(){var n=window.prompt("Rename page",t.name);n&&n!==t.name&&e.renamePage(t.id,n)},onDoubleClick:b,isChecked:t.id===d.id,children:(0,f.jsx)("span",{children:t.name})}):(0,f.jsx)("div",{id:"page-menu-item-".concat(t.id),"data-testid":"page-menu-item-".concat(t.id),className:"tlui-page_menu__item__sortable__title",style:{height:s},children:(0,f.jsx)(uL,{id:t.id,name:t.name,isCurrentPage:t.id===d.id})}),!h&&(0,f.jsx)("div",{className:"tlui-page_menu__item__submenu","data-isediting":m,children:(0,f.jsx)(cL,{index:i,item:t,listSize:c.length})})]},t.id+"_editing"):(0,f.jsxs)("div",{"data-testid":"page-menu-item-".concat(t.id),className:"tlui-page-menu__item",children:[(0,f.jsxs)(D_,{className:"tlui-page-menu__item__button tlui-page-menu__item__button__checkbox",onClick:function(){return e.setCurrentPageId(t.id)},onDoubleClick:b,isChecked:t.id===d.id,title:n("page-menu.go-to-page"),children:[(0,f.jsx)("div",{className:"tlui-page-menu__item__button__check",children:t.id===d.id&&(0,f.jsx)(M_,{icon:"check"})}),(0,f.jsx)("span",{children:t.name})]}),!h&&(0,f.jsx)("div",{className:"tlui-page_menu__item__submenu",children:(0,f.jsx)(cL,{index:i,item:t,listSize:c.length,onRename:function(){if(e.isIos){var n=window.prompt("Rename page",t.name);n&&n!==t.name&&e.renamePage(t.id,n)}else y(!0),e.setCurrentPageId(t.id)}})})]},t.id)}))})]})})]})},fL=(0,t.memo)((function(){var e=P_(),t=xT(),n=VA().redo;return(0,f.jsx)(D_,{"data-testid":"main.redo",icon:n.icon,title:"".concat(e(n.label)," ").concat(N_(n.kbd)),disabled:!t,onClick:function(){return n.onSelect("quick-actions")},smallIcon:!0})})),hL=Pl((function(){var e=Ml(),t=VA(),n=P_(),r=t.delete;if(gT())return null;var i=e.selectedIds.length<=0;return(0,f.jsx)(D_,{icon:r.icon,onClick:function(){return r.onSelect("quick-actions")},disabled:i,title:"".concat(n(r.label)," ").concat(N_(r.kbd)),smallIcon:!0})})),pL=(0,t.memo)((function(){var e=P_(),t=kT(),n=VA().undo;return(0,f.jsx)(D_,{"data-testid":"main.undo",icon:n.icon,title:"".concat(e(n.label)," ").concat(N_(n.kbd)),disabled:!t,onClick:function(){return n.onSelect("quick-actions")},smallIcon:!0})})),vL=Pl((function(){var e=Ml(),t=rT(),n=!gT()&&!e.isInAny("hand","zoom","eraser");return(0,f.jsx)("div",{className:"tlui-menu-zone",children:(0,f.jsxs)("div",{className:"tlui-menu-zone__controls",children:[(0,f.jsx)(aL,{}),(0,f.jsx)("div",{className:"tlui-menu-zone__divider"}),(0,f.jsx)(dL,{}),t>=6&&n&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"tlui-menu-zone__divider"}),(0,f.jsx)(pL,{}),(0,f.jsx)(fL,{}),(0,f.jsx)(hL,{}),(0,f.jsx)(oL,{}),(0,f.jsx)(iL,{})]})]})})}));var gL=function(){function e(t,n){var r=this;ne(this,e),vt(this,"colors",{shapeFill:"rgba(144, 144, 144, .1)",selectFill:"#2f80ed",viewportFill:"rgba(144, 144, 144, .1)"}),vt(this,"id",Bp()),vt(this,"cvs",null),vt(this,"pageBounds",[]),vt(this,"collaborators",[]),vt(this,"canvasScreenBounds",new lc),vt(this,"canvasPageBounds",new lc),vt(this,"contentPageBounds",new lc),vt(this,"contentScreenBounds",new lc),vt(this,"originPagePoint",new Nl),vt(this,"originPageCenter",new Nl),vt(this,"isInViewport",!1),vt(this,"debug",!1),vt(this,"updateContentScreenBounds",(function(){var e=r.contentScreenBounds,t=r.contentPageBounds,n=r.canvasScreenBounds,i=e.x,o=e.y,a=e.w,s=e.h;if(t.w>t.h){var u=n.w/(t.w/t.h);u>n.h?(i=(n.w-n.w*(n.h/u))/2,o=0,a=n.w*(n.h/u),s=n.h):(i=0,o=(n.h-u)/2,a=n.w,s=u)}else if(t.w<t.h){var l=n.h/(t.h/t.w);i=(n.w-l)/2,o=0,a=l,s=n.h}else i=n.h/2,o=0,a=n.h,s=n.h;e.set(i,o,a,s)})),vt(this,"updateCanvasPageBounds",(function(){var e=r.canvasPageBounds,t=r.canvasScreenBounds,n=r.contentPageBounds,i=r.contentScreenBounds;e.set(0,0,n.width/(i.width/t.width),n.height/(i.height/t.height)),e.center=n.center})),vt(this,"getScreenPoint",(function(e,t){var n=r.canvasScreenBounds;return{x:(e-n.minX)*r.dpr,y:(t-n.minY)*r.dpr}})),vt(this,"getPagePoint",(function(e,t){var n=r.contentPageBounds,i=r.contentScreenBounds,o=r.canvasPageBounds,a=r.getScreenPoint(e,t),s=a.x,u=a.y;return{x:o.minX+s*n.width/i.width,y:o.minY+u*n.height/i.height,z:1}})),vt(this,"minimapScreenPointToPagePoint",(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=r.editor.viewportPageBounds,a=r.getPagePoint(e,t),s=a.x,u=a.y;if(i){var l,c,d,f,h=r.editor.allShapesCommonBounds,p=o,v=(null!==(l=null===h||void 0===h?void 0:h.minX)&&void 0!==l?l:0)-p.width/2,g=(null!==(c=null===h||void 0===h?void 0:h.maxX)&&void 0!==c?c:0)+p.width/2,m=(null!==(d=null===h||void 0===h?void 0:h.minY)&&void 0!==d?d:0)-p.height/2,y=(null!==(f=null===h||void 0===h?void 0:h.maxY)&&void 0!==f?f:0)+p.height/2,b=Math.max(0,v+p.width-s),w=Math.max(0,-(g-p.width-s)),x=Math.max(0,m+p.height-u),k=Math.max(0,-(y-p.height-u)),S=Math.max(0,b-w),_=Math.max(0,w-b),E=Math.max(0,x-k),C=Math.max(0,k-x);S&&S>_?s+=S/2:_&&(s-=_/2),E&&E>C?u+=E/2:C&&(u-=C/2),s=Ul(s,v,g),u=Ul(u,m,y)}if(n){var P=r.originPagePoint;Math.abs(s-P.x)>Math.abs(u-P.y)?u=P.y:s=P.x}return{x:s,y:u}})),vt(this,"render",(function(){var t=r.cvs,n=r.pageBounds;r.updateCanvasPageBounds();var i=r.editor,o=r.canvasScreenBounds,a=r.canvasPageBounds,s=r.contentPageBounds,u=r.contentScreenBounds,l=o.width,c=o.height,d=i.viewportPageBounds,f=i.selectedIds;if(t&&n){var h=t.getContext("2d");if(!h)throw new Error("Minimap (shapes): Could not get context");h.resetTransform(),h.globalAlpha=1,h.clearRect(0,0,l,c);var p=u.width/s.width,v=u.height/s.height;h.translate((l-u.width)/2,(c-u.height)/2),h.scale(p,v),h.translate(-s.minX,-s.minY);for(var g,m=8/p,y=8/p,b=1/p,w=1/p,x=m/4,k=y/4,S=new Path2D,_=new Path2D,E=r.colors,C=E.shapeFill,P=E.selectFill,I=E.viewportFill,j=0,M=n.length;j<M;j++)g=n[j],e.roundedRect(f.includes(g.id)?_:S,g.minX,g.minY,g.width,g.height,Ul(m,b,g.width/x),Ul(y,w,g.height/k));if(h.fillStyle=C,h.fill(S),h.fillStyle=P,h.fill(_),r.debug){var A=lc.Common(n),T=A.minX,O=A.minY,N=A.width,R=A.height;h.strokeStyle="green",h.lineWidth=2/p,h.strokeRect(T+1/p,O+1/v,N-2/p,R-2/v)}var L=i.brush;if(L){var D=L.x,z=L.y,B=L.w,F=L.h;h.beginPath(),e.sharpRect(h,D,z,B,F),h.closePath(),h.fillStyle=I,h.fill()}var U=d.minX,K=d.minY,V=d.width,W=d.height;h.beginPath();var H=12/p,Y=12/p;e.roundedRect(h,U,K,V,W,Math.min(V/4,H),Math.min(W/4,Y)),h.closePath(),h.fillStyle=I,h.fill(),r.debug&&(h.strokeStyle="orange",h.strokeRect(U+1/p,K+1/v,V-2/p,W-2/v));for(var q,X=2.5/p,$=2.5/v,G=i.currentPageId,Q=0;Q<r.collaborators.length;Q++)(q=r.collaborators[Q]).currentPageId===G&&(h.beginPath(),h.ellipse(Ul(q.cursor.x,a.minX+X,a.maxX-X),Ul(q.cursor.y,a.minY+$,a.maxY-$),5/p,5/v,0,0,zl),h.fillStyle=q.color,h.fill());if(r.debug){h.lineWidth=2/p;var J=s.minX,Z=s.minY,ee=s.width,te=s.height;h.strokeStyle="red",h.strokeRect(J+1/p,Z+1/v,ee-2/p,te-2/v);var ne=a.minX,re=a.minY,ie=a.width,oe=a.height;h.strokeStyle="blue",h.strokeRect(ne+1/p,re+1/v,ie-2/p,oe-2/v)}}})),this.editor=t,this.dpr=n}return oe(e,[{key:"setDpr",value:function(e){this.dpr=+e.toFixed(2)}}],[{key:"roundedRect",value:function(e,t,n,r,i,o,a){o<1&&a<1?e.rect(t,n,r,i):(e.moveTo(t+o,n),e.lineTo(t+r-o,n),e.quadraticCurveTo(t+r,n,t+r,n+a),e.lineTo(t+r,n+i-a),e.quadraticCurveTo(t+r,n+i,t+r-o,n+i),e.lineTo(t+o,n+i),e.quadraticCurveTo(t,n+i,t,n+i-a),e.lineTo(t,n+a),e.quadraticCurveTo(t,n,t+o,n))}},{key:"sharpRect",value:function(e,t,n,r,i,o,a){e.rect(t,n,r,i)}}]),e}(),mL=Pl((function(e){var n=e.shapeFill,r=e.selectFill,i=e.viewportFill,o=Ml(),a=t.useRef(null),s=cd(),u=t.useRef(!1),l=t.useMemo((function(){return new gL(o,o.devicePixelRatio)}),[o]),c=o.isDarkMode;t.useEffect((function(){var e=requestAnimationFrame((function(){var e=getComputedStyle(s);l.colors={shapeFill:e.getPropertyValue(n).trim(),selectFill:e.getPropertyValue(r).trim(),viewportFill:e.getPropertyValue(i).trim()},l.render()}));return function(){cancelAnimationFrame(e)}}),[s,r,n,i,l,c]);var d=t.useCallback((function(e){if(o.currentPageShapeIds.size){var t=l.minimapScreenPointToPagePoint(e.clientX,e.clientY,!1,!1),n=t.x,r=t.y,i=l.minimapScreenPointToPagePoint(e.clientX,e.clientY,!1,!0);l.originPagePoint.setTo(i),l.originPageCenter.setTo(o.viewportPageBounds.center),o.centerOnPoint(n,r,{duration:bd})}}),[o,l]),h=t.useCallback((function(e){if(e.currentTarget.setPointerCapture(e.pointerId),o.currentPageShapeIds.size){u.current=!0,l.isInViewport=!1;var t=l.minimapScreenPointToPagePoint(e.clientX,e.clientY,!1,!1),n=t.x,r=t.y,i=l.minimapScreenPointToPagePoint(e.clientX,e.clientY,!1,!0),a=o.viewportPageBounds;l.originPagePoint.setTo(i),l.originPageCenter.setTo(a.center),l.isInViewport=a.containsPoint(i),l.isInViewport||o.centerOnPoint(n,r,{duration:bd})}}),[o,l]),p=t.useCallback((function(e){if(u.current){var t=l.minimapScreenPointToPagePoint(e.clientX,e.clientY,e.shiftKey,!0),n=t.x,r=t.y;if(l.isInViewport){var i=Nl.Sub({x:n,y:r},l.originPagePoint),a=Nl.Add(l.originPageCenter,i);return void o.centerOnPoint(a.x,a.y)}o.centerOnPoint(n,r)}var s=l.getPagePoint(e.clientX,e.clientY),c=o.pageToScreen(s.x,s.y),d=mt(mt({type:"pointer",target:"canvas",name:"pointer_move"},function(e){return e.isKilled=!0,{point:{x:e.clientX,y:e.clientY,z:e.pressure},shiftKey:e.shiftKey,altKey:e.altKey,ctrlKey:e.metaKey||e.ctrlKey,pointerId:e.pointerId,button:e.button,isPen:"pen"===e.pointerType}}(e)),{},{point:c,isPen:o.isPenMode});o.dispatch(d)}),[o,l]),v=t.useCallback((function(e){u.current=!1}),[]),g=t.useCallback((function(e){var t=ah(e);o.dispatch({type:"wheel",name:"wheel",delta:t,shiftKey:e.shiftKey,altKey:e.altKey,ctrlKey:e.metaKey||e.ctrlKey})}),[o]);gh("update dpr",(function(){var e=o.devicePixelRatio;l.setDpr(e);var t=a.current,n=t.getBoundingClientRect(),r=n.width*e,i=n.height*e;t.width=r,t.height=i,l.canvasScreenBounds.set(n.x,n.y,r,i),l.cvs=a.current}),[o,l]);var m=t.useMemo((function(){return o.store.query.records("instance_presence")}),[o]);return gh("minimap render when pagebounds or collaborators changes",(function(){o.devicePixelRatio;var e=o.viewportPageBounds,t=o.allShapesCommonBounds;l.contentPageBounds=t?lc.Expand(t,e):e,l.updateContentScreenBounds();var n=[];o.currentPageShapeIds.forEach((function(e){var t=o.getPageBoundsById(e),r=o.getPageMaskById(e);if(r){var i=Rc(r,t.corners);if(!i)return;t=lc.FromPoints(i)}t&&(t.id=e,n.push(t))})),l.pageBounds=n,l.collaborators=m.value,l.render()}),[o,l]),(0,f.jsx)("div",{className:"tlui-minimap",children:(0,f.jsx)("canvas",{ref:a,className:"tlui-minimap__canvas",onDoubleClick:d,onPointerMove:p,onPointerDown:h,onPointerUp:v,onWheel:g})})}));var yL=Pl((function(){var e=Ml(),n=P_(),r=rT(),i=e.zoomLevel,o=e.currentPageShapeIds.size>0,a=e.selectedIds.length>0,s=1===e.zoomLevel,u=t.useCallback((function(){e.resetZoom(e.viewportScreenCenter,{duration:bd})}),[e]);return(0,f.jsxs)(Aj,{id:"zoom",children:[(0,f.jsx)(Tj,{children:(0,f.jsx)(D_,{title:"".concat(n("navigation-zone.zoom")),"data-testid":"minimap.zoom-menu",className:r<5?"tlui-zoom-menu__button":"tlui-zoom-menu__button__pct",onDoubleClick:u,icon:r<4?"zoom-in":void 0,children:r<4?null:(0,f.jsxs)("span",{style:{flexGrow:0,textAlign:"center"},children:[Math.floor(100*i),"%"]})})}),(0,f.jsx)(Oj,{side:"top",align:"start",alignOffset:0,children:(0,f.jsxs)(Dj,{children:[(0,f.jsx)(bL,{action:"zoom-in","data-testid":"minimap.zoom-menu.zoom-in",noClose:!0}),(0,f.jsx)(bL,{action:"zoom-out","data-testid":"minimap.zoom-menu.zoom-out",noClose:!0}),(0,f.jsx)(bL,{action:"zoom-to-100","data-testid":"minimap.zoom-menu.zoom-to-100",noClose:!0,disabled:s}),(0,f.jsx)(bL,{action:"zoom-to-fit",disabled:!o,"data-testid":"minimap.zoom-menu.zoom-to-fit",noClose:!0}),(0,f.jsx)(bL,{action:"zoom-to-selection",disabled:!a,"data-testid":"minimap.zoom-menu.zoom-to-selection",noClose:!0})]})})]})}));function bL(e){var t=e.action,n=e.disabled,r=void 0!==n&&n,i=e.noClose,o=void 0!==i&&i,a=VA();return(0,f.jsx)(zj,{label:a[t].label,kbd:a[t].kbd,"data-testid":e["data-testid"],onClick:function(){return a[t].onSelect("zoom-menu")},noClose:o,disabled:r})}var wL=(0,t.memo)((function(){var e=VA(),n=P_(),r=rT(),i=function(e,n){var r=l(t.useState(n),2),i=r[0],o=r[1];t.useLayoutEffect((function(){var t=localStorage.getItem(e);if(t)try{o(JSON.parse(t))}catch(VO){console.error("Could not restore value ".concat(e," from local storage."))}}),[e]);var a=t.useCallback((function(t){o((function(n){var r="function"===typeof t?t(n):t;return localStorage.setItem(e,JSON.stringify(r)),r}))}),[e]);return[i,a]}("minimap",!0),o=l(i,2),a=o[0],s=o[1],u=(0,t.useCallback)((function(){s((function(e){return!e}))}),[s]);return r<4?null:(0,f.jsxs)("div",{className:"tlui-navigation-zone",children:[(0,f.jsx)("div",{className:"tlui-navigation-zone__controls",children:r<6?(0,f.jsx)(yL,{}):a?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(yL,{}),(0,f.jsx)(D_,{title:n("navigation-zone.toggle-minimap"),className:"tlui-navigation-zone__toggle","data-testid":"minimap.toggle",onClick:u,icon:a?"chevrons-ne":"chevrons-sw"})]}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(D_,{icon:"minus","data-testid":"minimap.zoom-out",title:"".concat(n(e["zoom-out"].label)," ").concat(N_(e["zoom-out"].kbd)),onClick:function(){return e["zoom-out"].onSelect("navigation-zone")}}),(0,f.jsx)(yL,{}),(0,f.jsx)(D_,{icon:"plus","data-testid":"minimap.zoom-in",title:"".concat(n(e["zoom-in"].label)," ").concat(N_(e["zoom-in"].kbd)),onClick:function(){return e["zoom-in"].onSelect("navigation-zone")}}),(0,f.jsx)(D_,{title:n("navigation-zone.toggle-minimap"),className:"tlui-navigation-zone__toggle",onClick:u,icon:a?"chevrons-ne":"chevrons-sw"})]})}),r>=6&&!a&&(0,f.jsx)(mL,{viewportFill:"--color-muted-1",selectFill:"--color-selected",shapeFill:"--color-text-3"})]})})),xL=Pl((function(){var e=Ml().isPenMode,t=VA();if(!e)return null;var n=t["exit-pen-mode"];return(0,f.jsx)(D_,{label:n.label,iconLeft:n.icon,onClick:function(){return n.onSelect("helper-buttons")}})})),kL=Pl((function(){var e=Ml(),t=VA();if(!e.instanceState.followingUserId)return null;var n=t["stop-following"];return(0,f.jsx)(D_,{label:n.label,iconLeft:n.icon,onClick:function(){return n.onSelect("people-menu")}})}));var SL=t.memo((function(e){var n=e.uiType,r=e.items,i=e.title,o=e.style,a=e.value,s=e.columns,u=void 0===s?Ul(r.length,2,4):s,l=e.onValueChange,c=Ml(),d=P_(),h=(0,t.useRef)(!1),p=t.useMemo((function(){var e=function e(){h.current=!1,window.removeEventListener("pointerup",e)};return{handleButtonClick:function(e){var t=e.currentTarget.dataset.id;"shared"===a.type&&a.value===t||(c.mark("point picker item"),l(o,t,!1))},handleButtonPointerDown:function(t){var n=t.currentTarget.dataset.id;c.mark("point picker item"),l(o,n,!0),h.current=!0,window.addEventListener("pointerup",e)},handleButtonPointerEnter:function(e){if(h.current){var t=e.currentTarget.dataset.id;l(o,t,!0)}},handleButtonPointerUp:function(e){var t=e.currentTarget.dataset.id;l(o,t,!1)}}}),[a,c,l,o]),v=p.handleButtonClick,g=p.handleButtonPointerDown,m=p.handleButtonPointerEnter,y=p.handleButtonPointerUp;return(0,f.jsx)("div",{className:kl("tlui-button-grid",{"tlui-button-grid__two":2===u,"tlui-button-grid__three":3===u,"tlui-button-grid__four":4===u}),children:r.map((function(e){return(0,f.jsx)(D_,{"data-id":e.value,"data-testid":"style.".concat(n,".").concat(e.value),"aria-label":e.value,"data-state":"shared"===a.type&&a.value===e.value?"hinted":void 0,title:i+" \u2014 "+d("".concat(n,"-style.").concat(e.value)),className:kl("tlui-button-grid__button"),style:o===Ys?{color:"var(--palette-".concat(e.value,")")}:void 0,onPointerEnter:m,onPointerDown:g,onPointerUp:y,onClick:v,icon:e.icon},e.value)}))})}));function _L(e,t){var n=l(t,2),r=n[0],i=n[1];return Math.min(i,Math.max(r,e))}var EL=["name","min","max","step","orientation","disabled","minStepsBetweenThumbs","defaultValue","value","onValueChange","onValueCommit","inverted"],CL=["min","max","dir","inverted","onSlideStart","onSlideMove","onSlideEnd","onStepKeyDown"],PL=["min","max","inverted","onSlideStart","onSlideMove","onSlideEnd","onStepKeyDown"],IL=["__scopeSlider","onSlideStart","onSlideMove","onSlideEnd","onHomeKeyDown","onEndKeyDown","onStepKeyDown"],jL=["__scopeSlider"],ML=["__scopeSlider"],AL=["__scopeSlider","index"],TL=["value"],OL=["PageUp","PageDown"],NL=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],RL={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},LL="Slider",DL=l(W_(LL),3),zL=DL[0],BL=DL[1],FL=DL[2],UL=l(Yx(LL,[FL]),2),KL=UL[0],VL=(UL[1],l(KL(LL),2)),WL=VL[0],HL=VL[1],YL=(0,t.forwardRef)((function(e,n){var r=e.name,i=e.min,o=void 0===i?0:i,a=e.max,s=void 0===a?100:a,u=e.step,c=void 0===u?1:u,f=e.orientation,h=void 0===f?"horizontal":f,p=e.disabled,v=void 0!==p&&p,g=e.minStepsBetweenThumbs,m=void 0===g?0:g,y=e.defaultValue,b=void 0===y?[o]:y,w=e.value,x=e.onValueChange,k=void 0===x?function(){}:x,S=e.onValueCommit,_=void 0===S?function(){}:S,E=e.inverted,C=void 0!==E&&E,P=So(e,EL),I=l((0,t.useState)(null),2),j=I[0],M=I[1],A=Vx(n,(function(e){return M(e)})),T=(0,t.useRef)(new Set),O=(0,t.useRef)(0),N="horizontal"===h,R=!j||Boolean(j.closest("form")),L=N?GL:QL,D=Zx({prop:w,defaultProp:b,onChange:function(e){var t;null===(t=d(T.current)[O.current])||void 0===t||t.focus(),k(e)}}),z=l(D,2),B=z[0],F=void 0===B?[]:B,U=z[1],K=(0,t.useRef)(F);function V(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{commit:!1}).commit,r=function(e){return(String(e).split(".")[1]||"").length}(c),i=function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n}(Math.round((e-o)/c)*c+o,r),a=_L(i,[o,s]);U((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=d(e);return r[n]=t,r.sort((function(e,t){return e-t}))}(e,a,t);if(function(e,t){if(t>0){var n=function(e){return e.slice(0,-1).map((function(t,n){return e[n+1]-t}))}(e);return Math.min.apply(Math,d(n))>=t}return!0}(r,m*c)){O.current=r.indexOf(a);var i=String(r)!==String(e);return i&&n&&_(r),i?r:e}return e}))}return(0,t.createElement)(WL,{scope:e.__scopeSlider,disabled:v,min:o,max:s,valueIndexToChangeRef:O,thumbs:T.current,values:F,orientation:h},(0,t.createElement)(zL.Provider,{scope:e.__scopeSlider},(0,t.createElement)(zL.Slot,{scope:e.__scopeSlider},(0,t.createElement)(L,Fx({"aria-disabled":v,"data-disabled":v?"":void 0},P,{ref:A,onPointerDown:Ux(P.onPointerDown,(function(){v||(K.current=F)})),min:o,max:s,inverted:C,onSlideStart:v?void 0:function(e){var t=function(e,t){if(1===e.length)return 0;var n=e.map((function(e){return Math.abs(e-t)})),r=Math.min.apply(Math,d(n));return n.indexOf(r)}(F,e);V(e,t)},onSlideMove:v?void 0:function(e){V(e,O.current)},onSlideEnd:v?void 0:function(){var e=K.current[O.current];F[O.current]!==e&&_(F)},onHomeKeyDown:function(){return!v&&V(o,0,{commit:!0})},onEndKeyDown:function(){return!v&&V(s,F.length-1,{commit:!0})},onStepKeyDown:function(e){var t=e.event,n=e.direction;if(!v){var r=OL.includes(t.key)||t.shiftKey&&NL.includes(t.key)?10:1,i=O.current;V(F[i]+c*r*n,i,{commit:!0})}}})))),R&&F.map((function(e,n){return(0,t.createElement)(aD,{key:n,name:r?r+(F.length>1?"[]":""):void 0,value:e})})))})),qL=l(KL(LL,{startEdge:"left",endEdge:"right",size:"width",direction:1}),2),XL=qL[0],$L=qL[1],GL=(0,t.forwardRef)((function(e,n){var r=e.min,i=e.max,o=e.dir,a=e.inverted,s=e.onSlideStart,u=e.onSlideMove,c=e.onSlideEnd,d=e.onStepKeyDown,f=So(e,CL),h=l((0,t.useState)(null),2),p=h[0],v=h[1],g=Vx(n,(function(e){return v(e)})),m=(0,t.useRef)(),y=Y_(o),b="ltr"===y,w=b&&!a||!b&&a;function x(e){var t=m.current||p.getBoundingClientRect(),n=uD([0,t.width],w?[r,i]:[i,r]);return m.current=t,n(e-t.left)}return(0,t.createElement)(XL,{scope:e.__scopeSlider,startEdge:w?"left":"right",endEdge:w?"right":"left",direction:w?1:-1,size:"width"},(0,t.createElement)(JL,Fx({dir:y,"data-orientation":"horizontal"},f,{ref:g,style:mt(mt({},f.style),{},vt({},"--radix-slider-thumb-transform","translateX(-50%)")),onSlideStart:function(e){var t=x(e.clientX);null===s||void 0===s||s(t)},onSlideMove:function(e){var t=x(e.clientX);null===u||void 0===u||u(t)},onSlideEnd:function(){m.current=void 0,null===c||void 0===c||c()},onStepKeyDown:function(e){var t=RL[w?"from-left":"from-right"].includes(e.key);null===d||void 0===d||d({event:e,direction:t?-1:1})}})))})),QL=(0,t.forwardRef)((function(e,n){var r=e.min,i=e.max,o=e.inverted,a=e.onSlideStart,s=e.onSlideMove,u=e.onSlideEnd,l=e.onStepKeyDown,c=So(e,PL),d=(0,t.useRef)(null),f=Vx(n,d),h=(0,t.useRef)(),p=!o;function v(e){var t=h.current||d.current.getBoundingClientRect(),n=uD([0,t.height],p?[i,r]:[r,i]);return h.current=t,n(e-t.top)}return(0,t.createElement)(XL,{scope:e.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1},(0,t.createElement)(JL,Fx({"data-orientation":"vertical"},c,{ref:f,style:mt(mt({},c.style),{},vt({},"--radix-slider-thumb-transform","translateY(50%)")),onSlideStart:function(e){var t=v(e.clientY);null===a||void 0===a||a(t)},onSlideMove:function(e){var t=v(e.clientY);null===s||void 0===s||s(t)},onSlideEnd:function(){h.current=void 0,null===u||void 0===u||u()},onStepKeyDown:function(e){var t=RL[p?"from-bottom":"from-top"].includes(e.key);null===l||void 0===l||l({event:e,direction:t?-1:1})}})))})),JL=(0,t.forwardRef)((function(e,n){var r=e.__scopeSlider,i=e.onSlideStart,o=e.onSlideMove,a=e.onSlideEnd,s=e.onHomeKeyDown,u=e.onEndKeyDown,l=e.onStepKeyDown,c=So(e,IL),d=HL(LL,r);return(0,t.createElement)(uk.span,Fx({},c,{ref:n,onKeyDown:Ux(e.onKeyDown,(function(e){"Home"===e.key?(s(e),e.preventDefault()):"End"===e.key?(u(e),e.preventDefault()):OL.concat(NL).includes(e.key)&&(l(e),e.preventDefault())})),onPointerDown:Ux(e.onPointerDown,(function(e){var t=e.target;t.setPointerCapture(e.pointerId),e.preventDefault(),d.thumbs.has(t)?t.focus():i(e)})),onPointerMove:Ux(e.onPointerMove,(function(e){e.target.hasPointerCapture(e.pointerId)&&o(e)})),onPointerUp:Ux(e.onPointerUp,(function(e){var t=e.target;t.hasPointerCapture(e.pointerId)&&(t.releasePointerCapture(e.pointerId),a(e))}))}))})),ZL="SliderTrack",eD=(0,t.forwardRef)((function(e,n){var r=e.__scopeSlider,i=So(e,jL),o=HL(ZL,r);return(0,t.createElement)(uk.span,Fx({"data-disabled":o.disabled?"":void 0,"data-orientation":o.orientation},i,{ref:n}))})),tD="SliderRange",nD=(0,t.forwardRef)((function(e,n){var r,i=e.__scopeSlider,o=So(e,ML),a=HL(tD,i),s=$L(tD,i),u=Vx(n,(0,t.useRef)(null)),l=a.values.length,c=a.values.map((function(e){return sD(e,a.min,a.max)})),f=l>1?Math.min.apply(Math,d(c)):0,h=100-Math.max.apply(Math,d(c));return(0,t.createElement)(uk.span,Fx({"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0},o,{ref:u,style:mt(mt({},e.style),{},(r={},vt(r,s.startEdge,f+"%"),vt(r,s.endEdge,h+"%"),r))}))})),rD="SliderThumb",iD=(0,t.forwardRef)((function(e,n){var r=BL(e.__scopeSlider),i=l((0,t.useState)(null),2),o=i[0],a=i[1],s=Vx(n,(function(e){return a(e)})),u=(0,t.useMemo)((function(){return o?r().findIndex((function(e){return e.ref.current===o})):-1}),[r,o]);return(0,t.createElement)(oD,Fx({},e,{ref:s,index:u}))})),oD=(0,t.forwardRef)((function(e,n){var r=e.__scopeSlider,i=e.index,o=So(e,AL),a=HL(rD,r),s=$L(rD,r),u=l((0,t.useState)(null),2),c=u[0],d=u[1],f=Vx(n,(function(e){return d(e)})),h=wC(c),p=a.values[i],v=void 0===p?0:sD(p,a.min,a.max),g=function(e,t){return t>2?"Value ".concat(e+1," of ").concat(t):2===t?["Minimum","Maximum"][e]:void 0}(i,a.values.length),m=null===h||void 0===h?void 0:h[s.size],y=m?function(e,t,n){var r=e/2,i=uD([0,50],[0,r]);return(r-i(t)*n)*n}(m,v,s.direction):0;return(0,t.useEffect)((function(){if(c)return a.thumbs.add(c),function(){a.thumbs.delete(c)}}),[c,a.thumbs]),(0,t.createElement)("span",{style:vt({transform:"var(--radix-slider-thumb-transform)",position:"absolute"},s.startEdge,"calc(".concat(v,"% + ").concat(y,"px)"))},(0,t.createElement)(zL.ItemSlot,{scope:e.__scopeSlider},(0,t.createElement)(uk.span,Fx({role:"slider","aria-label":e["aria-label"]||g,"aria-valuemin":a.min,"aria-valuenow":p,"aria-valuemax":a.max,"aria-orientation":a.orientation,"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,tabIndex:a.disabled?void 0:0},o,{ref:f,style:void 0===p?{display:"none"}:e.style,onFocus:Ux(e.onFocus,(function(){a.valueIndexToChangeRef.current=i}))}))))})),aD=function(e){var n=e.value,r=So(e,TL),i=(0,t.useRef)(null),o=function(e){var n=(0,t.useRef)({value:e,previous:e});return(0,t.useMemo)((function(){return n.current.value!==e&&(n.current.previous=n.current.value,n.current.value=e),n.current.previous}),[e])}(n);return(0,t.useEffect)((function(){var e=i.current,t=window.HTMLInputElement.prototype,r=Object.getOwnPropertyDescriptor(t,"value").set;if(o!==n&&r){var a=new Event("input",{bubbles:!0});r.call(e,n),e.dispatchEvent(a)}}),[o,n]),(0,t.createElement)("input",Fx({style:{display:"none"}},r,{ref:i,defaultValue:n}))};function sD(e,t,n){return _L(100/(n-t)*(e-t),[0,100])}function uD(e,t){return function(n){if(e[0]===e[1]||t[0]===t[1])return t[0];var r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}var lD=YL,cD=eD,dD=nD,fD=iD;function hD(e){var n=e.title,r=e.steps,i=e.value,o=e.label,a=e.onValueChange,s=Ml(),u=P_(),l=(0,t.useCallback)((function(e){a(e[0],!0)}),[a]),c=(0,t.useCallback)((function(){s.mark("click slider")}),[s]),d=(0,t.useCallback)((function(){i&&a(i,!1)}),[i,a]);return(0,f.jsx)("div",{className:"tlui-slider__container",children:(0,f.jsxs)(lD,{"data-testid":e["data-testid"],className:"tlui-slider","area-label":"Opacity",dir:"ltr",min:0,max:r,step:1,value:i?[i]:void 0,onPointerDown:c,onValueChange:l,onPointerUp:d,title:n+" \u2014 "+u(o),children:[(0,f.jsx)(cD,{className:"tlui-slider__track",dir:"ltr",children:null!==i&&(0,f.jsx)(dD,{className:"tlui-slider__range",dir:"ltr"})}),null!==i&&(0,f.jsx)(fD,{className:"tlui-slider__thumb",dir:"ltr"})]})})}var pD=t.memo((function(e){var n=e.label,r=e.uiTypeA,i=e.uiTypeB,o=e.labelA,a=e.labelB,s=e.itemsA,u=e.itemsB,l=e.styleA,c=e.styleB,d=e.valueA,h=e.valueB,p=e.onValueChange,v=P_(),g=t.useMemo((function(){var e,t;return null!==(e=null===(t=s.find((function(e){return"shared"===d.type&&d.value===e.value})))||void 0===t?void 0:t.icon)&&void 0!==e?e:"mixed"}),[s,d]),m=t.useMemo((function(){var e,t;return null!==(e=null===(t=u.find((function(e){return"shared"===h.type&&h.value===e.value})))||void 0===t?void 0:t.icon)&&void 0!==e?e:"mixed"}),[u,h]);return void 0===d&&void 0===h?null:(0,f.jsxs)("div",{className:"tlui-style-panel__double-select-picker",children:[(0,f.jsx)("div",{title:v(n),className:"tlui-style-panel__double-select-picker-label",children:v(n)}),(0,f.jsxs)(Aj,{id:"style panel ".concat(r," A"),children:[(0,f.jsx)(hj,{asChild:!0,children:(0,f.jsx)(D_,{"data-testid":"style.".concat(r),title:v(o)+" \u2014 "+v(null===d?"style-panel.mixed":"".concat(r,"-style.").concat(d)),icon:g,invertIcon:!0,smallIcon:!0})}),(0,f.jsx)(Oj,{side:"bottom",align:"end",sideOffset:0,alignOffset:-2,children:(0,f.jsx)("div",{className:kl("tlui-button-grid",{"tlui-button-grid__two":s.length<4,"tlui-button-grid__four":s.length>=4}),children:s.map((function(e){return(0,f.jsx)(zj,{className:"tlui-button-grid__button",title:v(o)+" \u2014 "+v("".concat(r,"-style.").concat(e.value)),"data-testid":"style.".concat(r,".").concat(e.value),icon:e.icon,onClick:function(){return p(l,e.value,!1)},invertIcon:!0},e.value)}))})})]}),(0,f.jsxs)(Aj,{id:"style panel ".concat(i),children:[(0,f.jsx)(hj,{asChild:!0,children:(0,f.jsx)(D_,{"data-testid":"style.".concat(i),title:v(a)+" \u2014 "+v(null===h?"style-panel.mixed":"".concat(i,"-style.").concat(h)),icon:m,smallIcon:!0})}),(0,f.jsx)(Oj,{side:"bottom",align:"end",sideOffset:0,alignOffset:-2,children:(0,f.jsx)("div",{className:kl("tlui-button-grid",{"tlui-button-grid__two":s.length<4,"tlui-button-grid__four":s.length>=4}),children:u.map((function(e){return(0,f.jsx)(zj,{className:"tlui-button-grid__button",title:v(a)+" \u2014 "+v("".concat(i,"-style.").concat(e.value)),"data-testid":"style.".concat(i,".").concat(e.value),icon:e.icon,onClick:function(){return p(c,e.value,!1)}},e.value)}))})})]})]})})),vD=t.memo((function(e){var n=e.id,r=e.label,i=e.uiType,o=e.style,a=e.items,s=e.value,u=e.onValueChange,l=P_(),c=t.useMemo((function(){var e;return null===(e=a.find((function(e){return"shared"===s.type&&e.value===s.value})))||void 0===e?void 0:e.icon}),[a,s]);return(0,f.jsxs)(Aj,{id:"style panel ".concat(n),children:[(0,f.jsx)(hj,{asChild:!0,children:(0,f.jsx)(D_,{"data-testid":"style.".concat(i),title:"mixed"===s.type?l("style-panel.mixed"):l("".concat(i,"-style.").concat(s.value)),label:r,icon:null!==c&&void 0!==c?c:"mixed"})}),(0,f.jsx)(Oj,{side:"left",align:"center",alignOffset:0,children:(0,f.jsx)("div",{className:kl("tlui-button-grid",{"tlui-button-grid__two":a.length<3,"tlui-button-grid__three":3==a.length,"tlui-button-grid__four":a.length>=4}),children:a.map((function(e){return(0,f.jsx)(zj,{className:"tlui-button-grid__button","data-testid":"style.".concat(i,".").concat(e.value),title:l("".concat(i,"-style.").concat(e.value)),icon:e.icon,onClick:function(){return u(o,e.value,!1)}},e.value)}))})})]})})),gD={color:[{value:"black",icon:"color"},{value:"grey",icon:"color"},{value:"light-violet",icon:"color"},{value:"violet",icon:"color"},{value:"blue",icon:"color"},{value:"light-blue",icon:"color"},{value:"yellow",icon:"color"},{value:"orange",icon:"color"},{value:"green",icon:"color"},{value:"light-green",icon:"color"},{value:"light-red",icon:"color"},{value:"red",icon:"color"}],fill:[{value:"none",icon:"fill-none"},{value:"semi",icon:"fill-semi"},{value:"solid",icon:"fill-solid"},{value:"pattern",icon:"fill-pattern"}],dash:[{value:"draw",icon:"dash-draw"},{value:"dashed",icon:"dash-dashed"},{value:"dotted",icon:"dash-dotted"},{value:"solid",icon:"dash-solid"}],size:[{value:"s",icon:"size-small"},{value:"m",icon:"size-medium"},{value:"l",icon:"size-large"},{value:"xl",icon:"size-extra-large"}],font:[{value:"draw",icon:"font-draw"},{value:"sans",icon:"font-sans"},{value:"serif",icon:"font-serif"},{value:"mono",icon:"font-mono"}],horizontalAlign:[{value:"start",icon:"text-align-left"},{value:"middle",icon:"text-align-center"},{value:"end",icon:"text-align-right"}],verticalAlign:[{value:"start",icon:"vertical-align-start"},{value:"middle",icon:"vertical-align-center"},{value:"end",icon:"vertical-align-end"}],geo:[{value:"rectangle",icon:"geo-rectangle"},{value:"ellipse",icon:"geo-ellipse"},{value:"triangle",icon:"geo-triangle"},{value:"diamond",icon:"geo-diamond"},{value:"pentagon",icon:"geo-pentagon"},{value:"hexagon",icon:"geo-hexagon"},{value:"octagon",icon:"geo-octagon"},{value:"star",icon:"geo-star"},{value:"rhombus",icon:"geo-rhombus"},{value:"rhombus-2",icon:"geo-rhombus-2"},{value:"oval",icon:"geo-oval"},{value:"trapezoid",icon:"geo-trapezoid"},{value:"arrow-right",icon:"geo-arrow-right"},{value:"arrow-left",icon:"geo-arrow-left"},{value:"arrow-up",icon:"geo-arrow-up"},{value:"arrow-down",icon:"geo-arrow-down"},{value:"x-box",icon:"geo-x-box"},{value:"check-box",icon:"geo-check-box"}],arrowheadStart:[{value:"none",icon:"arrowhead-none"},{value:"arrow",icon:"arrowhead-arrow"},{value:"triangle",icon:"arrowhead-triangle"},{value:"square",icon:"arrowhead-square"},{value:"dot",icon:"arrowhead-dot"},{value:"diamond",icon:"arrowhead-diamond"},{value:"inverted",icon:"arrowhead-triangle-inverted"},{value:"bar",icon:"arrowhead-bar"}],arrowheadEnd:[{value:"none",icon:"arrowhead-none"},{value:"arrow",icon:"arrowhead-arrow"},{value:"triangle",icon:"arrowhead-triangle"},{value:"square",icon:"arrowhead-square"},{value:"dot",icon:"arrowhead-dot"},{value:"diamond",icon:"arrowhead-diamond"},{value:"inverted",icon:"arrowhead-triangle-inverted"},{value:"bar",icon:"arrowhead-bar"}],spline:[{value:"line",icon:"spline-line"},{value:"cubic",icon:"spline-cubic"}]},mD=[Ys,Xs,$s,Qs];var yD=function(e){var n=e.isMobile,r=Ml(),i=Il("getRelevantStyles",(function(){return function(e){var t,n=new qm(e.sharedStyles),r=e.selectedIds.length>0||!(null===(t=e.root.current.value)||void 0===t||!t.shapeType);if(0===n.size&&e.isIn("select")&&0===e.selectedIds.length)for(var i=0,o=mD;i<o.length;i++){var a=o[i];n.applyValue(a,e.getStyleForNextShape(a))}return 0!==n.size||r?{styles:n,opacity:e.sharedOpacity}:null}(r)}),[r]),o=(0,t.useCallback)((function(){n||(r.isChangingStyle=!1)}),[r,n]);if(!i)return null;var a=i.styles,s=i.opacity,u=a.get(Ru),l=a.get(tu),c=a.get(eu),d=void 0===u,h=void 0===l&&void 0===c,p=void 0===a.get(Zu),v=void 0===a.get(Gs);return(0,f.jsxs)("div",{className:"tlui-style-panel","data-ismobile":n,onPointerLeave:o,children:[(0,f.jsx)(xD,{styles:a,opacity:s}),!v&&(0,f.jsx)(kD,{styles:a}),!(d&&h&&p)&&(0,f.jsxs)("div",{className:"tlui-style-panel__section","aria-label":"style panel styles",children:[(0,f.jsx)(SD,{styles:a}),(0,f.jsx)(ED,{styles:a}),(0,f.jsx)(_D,{styles:a})]})]})};function bD(){var e=Ml();return t.useMemo((function(){return function(t,n,r){e.setStyle(t,n,r),e.isChangingStyle=!0}}),[e])}var wD=[.1,.25,.5,.75,1];function xD(e){var n=e.styles,r=e.opacity,i=Ml(),o=P_(),a=bD(),s=t.useCallback((function(e,t){var n=wD[e];i.setOpacity(n,t),i.isChangingStyle=!0}),[i]),u=n.get(Ys),l=n.get($s),c=n.get(Xs),d=n.get(Qs),h=void 0!==l||void 0!==c||void 0!==d,p="mixed"===r.type?-1:wD.indexOf(xr(wD,(function(e){return Math.abs(e-r.value)})));return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:"tlui-style-panel__section__common","aria-label":"style panel styles",children:[void 0===u?null:(0,f.jsx)(SL,{title:o("style-panel.color"),uiType:"color",style:Ys,items:gD.color,value:u,onValueChange:a}),void 0===r?null:(0,f.jsx)(hD,{"data-testid":"style.opacity",value:p>=0?p:wD.length-1,label:"mixed"===r.type?"style-panel.mixed":"opacity-style.".concat(r),onValueChange:s,steps:wD.length-1,title:o("style-panel.opacity")})]}),h&&(0,f.jsxs)("div",{className:"tlui-style-panel__section","aria-label":"style panel styles",children:[void 0===l?null:(0,f.jsx)(SL,{title:o("style-panel.fill"),uiType:"fill",style:$s,items:gD.fill,value:l,onValueChange:a}),void 0===c?null:(0,f.jsx)(SL,{title:o("style-panel.dash"),uiType:"dash",style:Xs,items:gD.dash,value:c,onValueChange:a}),void 0===d?null:(0,f.jsx)(SL,{title:o("style-panel.size"),uiType:"size",style:Qs,items:gD.size,value:d,onValueChange:a})]})]})}function kD(e){var t=e.styles,n=P_(),r=bD(),i=t.get(Gs),o=t.get(Mu),a=t.get(Au);return void 0===i&&void 0===o?null:(0,f.jsxs)("div",{className:"tlui-style-panel__section","aria-label":"style panel text",children:[void 0===i?null:(0,f.jsx)(SL,{title:n("style-panel.font"),uiType:"font",style:Gs,items:gD.font,value:i,onValueChange:r}),void 0===o?null:(0,f.jsxs)("div",{className:"tlui-style-panel__row",children:[(0,f.jsx)(SL,{title:n("style-panel.align"),uiType:"align",style:Mu,items:gD.horizontalAlign,value:o,onValueChange:r}),void 0===a?(0,f.jsx)(D_,{title:n("style-panel.vertical-align"),"data-testid":"vertical-align",icon:"vertical-align-center",disabled:!0}):(0,f.jsx)(vD,{id:"geo-vertical-alignment",uiType:"verticalAlign",style:Au,items:gD.verticalAlign,value:a,onValueChange:r})]})]})}function SD(e){var t=e.styles,n=bD(),r=t.get(Ru);return void 0===r?null:(0,f.jsx)(vD,{id:"geo",label:"style-panel.geo",uiType:"geo",style:Ru,items:gD.geo,value:r,onValueChange:n})}function _D(e){var t=e.styles,n=bD(),r=t.get(Zu);return void 0===r?null:(0,f.jsx)(vD,{id:"spline",label:"style-panel.spline",uiType:"spline",style:Zu,items:gD.spline,value:r,onValueChange:n})}function ED(e){var t=e.styles,n=bD(),r=t.get(tu),i=t.get(eu);return r&&i?(0,f.jsx)(pD,{label:"style-panel.arrowheads",uiTypeA:"arrowheadStart",styleA:eu,itemsA:gD.arrowheadStart,valueA:i,uiTypeB:"arrowheadEnd",styleB:tu,itemsB:gD.arrowheadEnd,valueB:r,onValueChange:n,labelA:"style-panel.arrowhead-start",labelB:"style-panel.arrowhead-end"}):null}function CD(e){var t,n,r=e.toast,i=IA().removeToast,o=P_(),a=r.actions&&r.actions.length>0;return(0,f.jsxs)(OM,{onOpenChange:function(e){e||i(r.id)},className:"tlui-toast__container",duration:r.keepOpen?1/0:5e3,children:[r.icon&&(0,f.jsx)("div",{className:"tlui-toast__icon",children:(0,f.jsx)(M_,{icon:r.icon})}),(0,f.jsxs)("div",{className:"tlui-toast__main",children:[(0,f.jsxs)("div",{className:"tlui-toast__content",children:[(0,f.jsx)(NM,{className:"tlui-toast__title",children:r.title}),(0,f.jsx)(RM,{className:"tlui-toast__description",children:r.description})]}),r.actions&&(0,f.jsxs)("div",{className:"tlui-toast__actions",children:[r.actions.map((function(e,t){return(0,f.jsx)(LM,{altText:e.label,asChild:!0,onClick:e.onClick,children:(0,f.jsx)(D_,{className:"warn"===e.type?"tlui-button__warning":"tlui-button__primary",children:e.label})},t)})),a&&(0,f.jsx)(DM,{asChild:!0,children:(0,f.jsx)(D_,{className:"tlui-toast__close",style:{marginLeft:"auto"},children:null!==(t=r.closeLabel)&&void 0!==t?t:o("toast.close")})})]})]}),!a&&(0,f.jsx)(DM,{asChild:!0,children:(0,f.jsx)(D_,{className:"tlui-toast__close",children:null!==(n=r.closeLabel)&&void 0!==n?n:o("toast.close")})})]})}var PD=t.memo((function(){var e=IA().toasts;return(0,f.jsx)(f.Fragment,{children:e.map((function(e){return(0,f.jsx)(CD,{toast:e},e.id)}))})}));function ID(){var e=IA().toasts,n=l(t.useState(!1),2),r=n[0],i=n[1];return t.useEffect((function(){var t=!1;return e.length?i(!0):setTimeout((function(){t||i(!1)}),1e3),function(){t=!0}}),[e.length,i]),r?(0,f.jsx)(fM,{className:"tlui-toast__viewport"}):null}function jD(){var e=Ml(),n=P_(),r=Il("current color",(function(){var t=e.sharedStyles.get(Ys);return t?"mixed"===t.type?null:"var(--palette-".concat(t,")"):"var(--color-muted-1)"}),[e]),i=Il("isHandOrEraserToolActive",(function(){return e.isInAny("hand","zoom","eraser")}),[e]),o=(0,t.useCallback)((function(t){t||(e.isChangingStyle=!1)}),[e]);return(0,f.jsxs)(tL,{id:"style menu",onOpenChange:o,children:[(0,f.jsx)(nL,{disabled:i,children:(0,f.jsx)(D_,{className:"tlui-toolbar__tools__button tlui-toolbar__styles__button","data-testid":"mobile.styles",style:{color:null!==r&&void 0!==r?r:"var(--color-text)"},title:n("style-panel.title"),children:(0,f.jsx)(M_,{icon:r?"blob":"mixed"})})}),(0,f.jsx)(rL,{side:"top",align:"end",children:(0,f.jsx)(yD,{isMobile:!0})})]})}var MD=["select","hand","draw","eraser","text","zoom","laser"];function AD(e){var t=e.activeToolId,n=Ml(),r=rT(),i=P_(),o=Il("is tool locked",(function(){return n.instanceState.isToolLocked}),[n]);return!t||MD.includes(t)?null:(0,f.jsx)(D_,{title:i("action.toggle-tool-lock"),className:kl("tlui-toolbar__lock-button",{"tlui-toolbar__lock-button__mobile":r<5}),icon:o?"lock":"unlock",onClick:function(){return n.updateInstanceState({isToolLocked:!o})},smallIcon:!0})}var TD=function(){var e=Ml(),n=P_(),r=rT(),i=t.useRef(void 0),o=gT(),a=function(){var e=t.useContext(CT);if(!e)throw new Error("useToolbarSchema must be used within a ToolbarSchemaProvider");return e}(),s=a.find((function(e){return"laser"===e.toolItem.id})),u=Il("current tool id",(function(){return e.currentToolId}),[e]),l="hand"===u,c=Il("geo",(function(){return e.sharedStyles.getAsKnownValue(Ru)}),[e]),d=!o,h=!(o||l),p=function(e){return e.label?"".concat(n(e.label)," ").concat(e.kbd?N_(e.kbd):""):""},v=a.find((function(e){return RD(e.toolItem,u,c)})),g=t.useMemo((function(){for(var e,t=[],n=[],o=Math.min(8,5+r),s=4;s<a.length;s++){var u=a[s];s<o?t.push(u):(u===v&&(e=u),n.push(u))}return e||(i.current||(i.current=n[0]),e=i.current,n.includes(e)||(e=n[0])),i.current=e,n.length<=2&&(t.push.apply(t,n),n.length=0),{itemsInPanel:t,itemsInDropdown:n,dropdownFirstItem:e}}),[a,v,r]),m=g.itemsInPanel,y=g.itemsInDropdown,b=g.dropdownFirstItem;return(0,f.jsx)("div",{className:"tlui-toolbar",children:(0,f.jsxs)("div",{className:"tlui-toolbar__inner",children:[(0,f.jsxs)("div",{className:"tlui-toolbar__left",children:[!o&&(0,f.jsxs)("div",{className:kl("tlui-toolbar__extras",{"tlui-toolbar__extras__hidden":!h}),children:[r<6&&(0,f.jsxs)("div",{className:"tlui-toolbar__extras__controls",children:[(0,f.jsx)(pL,{}),(0,f.jsx)(fL,{}),(0,f.jsx)(hL,{}),(0,f.jsx)(oL,{}),(0,f.jsx)(iL,{})]}),(0,f.jsx)(AD,{activeToolId:u})]}),(0,f.jsxs)("div",{className:kl("tlui-toolbar__tools",{"tlui-toolbar__tools__mobile":r<5}),children:[a.slice(0,2).map((function(e){var t=e.toolItem;return(0,f.jsx)(ND,{item:t,title:p(t),isSelected:RD(t,u,c)},t.id)})),o&&s&&(0,f.jsx)(ND,{item:s.toolItem,title:p(s.toolItem),isSelected:RD(s.toolItem,u,c)},s.toolItem.id),d&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"tlui-toolbar__divider"}),a.slice(2,4).map((function(e){var t=e.toolItem;return(0,f.jsx)(ND,{item:t,title:p(t),isSelected:RD(t,u,c)},t.id)})),(0,f.jsx)("div",{className:"tlui-toolbar__divider"}),m.map((function(e){var t=e.toolItem;return(0,f.jsx)(ND,{item:t,title:p(t),isSelected:RD(t,u,c)},t.id)})),y.length?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(ND,{item:b.toolItem,title:p(b.toolItem),isSelected:RD(b.toolItem,u,c)},b.toolItem.id),(0,f.jsxs)(Aj,{id:"toolbar overflow",modal:!1,children:[(0,f.jsx)(Tj,{children:(0,f.jsx)(D_,{className:"tlui-toolbar__tools__button tlui-toolbar__overflow",icon:"chevron-up","data-testid":"tools.more",title:n("tool-panel.more")})}),(0,f.jsx)(Oj,{side:"top",align:"center",children:(0,f.jsx)(OD,{toolbarItems:y})})]})]}):null]})]})]}),r<5&&!o&&(0,f.jsx)("div",{className:"tlui-toolbar__tools",children:(0,f.jsx)(jD,{})})]})})},OD=Pl((function(e){var t=e.toolbarItems,n=P_();return(0,f.jsx)("div",{className:"tlui-button-grid__four tlui-button-grid__reverse",children:t.map((function(e){var t,r=e.toolItem,i=r.id,o=r.meta,a=r.kbd,s=r.label,u=r.onSelect,l=r.icon;return(0,f.jsx)(zj,{className:"tlui-button-grid__button","data-testid":"tools.".concat(i),"data-tool":i,"data-geo":null!==(t=null===o||void 0===o?void 0:o.geo)&&void 0!==t?t:"","aria-label":s,onClick:function(){return u("toolbar")},title:s?"".concat(n(s)," ").concat(a?N_(a):""):"",icon:l},i)}))})}));function ND(e){var t,n,r=e.item,i=e.title,o=e.isSelected;return(0,f.jsx)(D_,{className:"tlui-toolbar__tools__button","data-testid":"tools.".concat(r.id),"data-tool":r.id,"data-geo":null!==(t=null===(n=r.meta)||void 0===n?void 0:n.geo)&&void 0!==t?t:"","aria-label":r.label,title:i,icon:r.icon,"data-state":o?"selected":void 0,onClick:function(){return r.onSelect("toolbar")},onTouchStart:function(e){$c(e),r.onSelect("toolbar")}})}var RD=function(e,t,n){var r,i;return null!==(r=e.meta)&&void 0!==r&&r.geo?"geo"===t&&n===(null===(i=e.meta)||void 0===i?void 0:i.geo):t===e.id};var LD="undefined"!==typeof navigator&&navigator.userAgent.toLowerCase().indexOf("firefox")>0;function DD(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r):e.attachEvent&&e.attachEvent("on".concat(t),(function(){n(window.event)}))}function zD(e,t){for(var n=t.slice(0,t.length-1),r=0;r<n.length;r++)n[r]=e[n[r].toLowerCase()];return n}function BD(e){"string"!==typeof e&&(e="");for(var t=(e=e.replace(/\s/g,"")).split(","),n=t.lastIndexOf("");n>=0;)t[n-1]+=",",t.splice(n,1),n=t.lastIndexOf("");return t}for(var FD={backspace:8,"\u232b":8,tab:9,clear:12,enter:13,"\u21a9":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"\u21ea":20,",":188,".":190,"/":191,"`":192,"-":LD?173:189,"=":LD?61:187,";":LD?59:186,"'":222,"[":219,"]":221,"\\":220},UD={"\u21e7":16,shift:16,"\u2325":18,alt:18,option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91,cmd:91,command:91},KD={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},VD={16:!1,18:!1,17:!1,91:!1},WD={},HD=1;HD<20;HD++)FD["f".concat(HD)]=111+HD;var YD=[],qD=!1,XD="all",$D=[],GD=function(e){return FD[e.toLowerCase()]||UD[e.toLowerCase()]||e.toUpperCase().charCodeAt(0)};function QD(e){XD=e||"all"}function JD(){return XD||"all"}var ZD=function(e){var t=e.key,n=e.scope,r=e.method,i=e.splitKey,o=void 0===i?"+":i;BD(t).forEach((function(e){var t=e.split(o),i=t.length,a=t[i-1],s="*"===a?"*":GD(a);if(WD[s]){n||(n=JD());var u=i>1?zD(UD,t):[];WD[s]=WD[s].filter((function(e){return!((!r||e.method===r)&&e.scope===n&&function(e,t){for(var n=e.length>=t.length?e:t,r=e.length>=t.length?t:e,i=!0,o=0;o<n.length;o++)-1===r.indexOf(n[o])&&(i=!1);return i}(e.mods,u))}))}}))};function ez(e,t,n,r){var i;if(t.element===r&&(t.scope===n||"all"===t.scope)){for(var o in i=t.mods.length>0,VD)Object.prototype.hasOwnProperty.call(VD,o)&&(!VD[o]&&t.mods.indexOf(+o)>-1||VD[o]&&-1===t.mods.indexOf(+o))&&(i=!1);(0!==t.mods.length||VD[16]||VD[18]||VD[17]||VD[91])&&!i&&"*"!==t.shortcut||(t.keys=[],t.keys=t.keys.concat(YD),!1===t.method(e,t)&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0)))}}function tz(e,t){var n=WD["*"],r=e.keyCode||e.which||e.charCode;if(nz.filter.call(this,e)){if(93!==r&&224!==r||(r=91),-1===YD.indexOf(r)&&229!==r&&YD.push(r),["ctrlKey","altKey","shiftKey","metaKey"].forEach((function(t){var n=KD[t];e[t]&&-1===YD.indexOf(n)?YD.push(n):!e[t]&&YD.indexOf(n)>-1?YD.splice(YD.indexOf(n),1):"metaKey"===t&&e[t]&&3===YD.length&&(e.ctrlKey||e.shiftKey||e.altKey||(YD=YD.slice(YD.indexOf(n))))})),r in VD){for(var i in VD[r]=!0,UD)UD[i]===r&&(nz[i]=!0);if(!n)return}for(var o in VD)Object.prototype.hasOwnProperty.call(VD,o)&&(VD[o]=e[KD[o]]);e.getModifierState&&(!e.altKey||e.ctrlKey)&&e.getModifierState("AltGraph")&&(-1===YD.indexOf(17)&&YD.push(17),-1===YD.indexOf(18)&&YD.push(18),VD[17]=!0,VD[18]=!0);var a=JD();if(n)for(var s=0;s<n.length;s++)n[s].scope===a&&("keydown"===e.type&&n[s].keydown||"keyup"===e.type&&n[s].keyup)&&ez(e,n[s],a,t);if(r in WD)for(var u=0;u<WD[r].length;u++)if(("keydown"===e.type&&WD[r][u].keydown||"keyup"===e.type&&WD[r][u].keyup)&&WD[r][u].key){for(var l=WD[r][u],c=l.splitKey,d=l.key.split(c),f=[],h=0;h<d.length;h++)f.push(GD(d[h]));f.sort().join("")===YD.sort().join("")&&ez(e,l,a,t)}}}function nz(e,t,n){YD=[];var r=BD(e),i=[],o="all",a=document,s=0,u=!1,l=!0,c="+",d=!1;for(void 0===n&&"function"===typeof t&&(n=t),"[object Object]"===Object.prototype.toString.call(t)&&(t.scope&&(o=t.scope),t.element&&(a=t.element),t.keyup&&(u=t.keyup),void 0!==t.keydown&&(l=t.keydown),void 0!==t.capture&&(d=t.capture),"string"===typeof t.splitKey&&(c=t.splitKey)),"string"===typeof t&&(o=t);s<r.length;s++)i=[],(e=r[s].split(c)).length>1&&(i=zD(UD,e)),(e="*"===(e=e[e.length-1])?"*":GD(e))in WD||(WD[e]=[]),WD[e].push({keyup:u,keydown:l,scope:o,mods:i,shortcut:r[s],method:n,key:r[s],splitKey:c,element:a});"undefined"!==typeof a&&!function(e){return $D.indexOf(e)>-1}(a)&&window&&($D.push(a),DD(a,"keydown",(function(e){tz(e,a)}),d),qD||(qD=!0,DD(window,"focus",(function(){YD=[]}),d)),DD(a,"keyup",(function(e){tz(e,a),function(e){var t=e.keyCode||e.which||e.charCode,n=YD.indexOf(t);if(n>=0&&YD.splice(n,1),e.key&&"meta"===e.key.toLowerCase()&&YD.splice(0,YD.length),93!==t&&224!==t||(t=91),t in VD)for(var r in VD[t]=!1,UD)UD[r]===t&&(nz[r]=!1)}(e)}),d))}var rz={getPressedKeyString:function(){return YD.map((function(e){return function(e){return Object.keys(FD).find((function(t){return FD[t]===e}))}(e)||function(e){return Object.keys(UD).find((function(t){return UD[t]===e}))}(e)||String.fromCharCode(e)}))},setScope:QD,getScope:JD,deleteScope:function(e,t){var n,r;for(var i in e||(e=JD()),WD)if(Object.prototype.hasOwnProperty.call(WD,i))for(n=WD[i],r=0;r<n.length;)n[r].scope===e?n.splice(r,1):r++;JD()===e&&QD(t||"all")},getPressedKeyCodes:function(){return YD.slice(0)},getAllKeyCodes:function(){var e=[];return Object.keys(WD).forEach((function(t){WD[t].forEach((function(t){var n=t.key,r=t.scope,i=t.mods,o=t.shortcut;e.push({scope:r,shortcut:o,mods:i,keys:n.split("+").map((function(e){return GD(e)}))})}))})),e},isPressed:function(e){return"string"===typeof e&&(e=GD(e)),-1!==YD.indexOf(e)},filter:function(e){var t=e.target||e.srcElement,n=t.tagName,r=!0;return!t.isContentEditable&&("INPUT"!==n&&"TEXTAREA"!==n&&"SELECT"!==n||t.readOnly)||(r=!1),r},trigger:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";Object.keys(WD).forEach((function(n){WD[n].filter((function(n){return n.scope===t&&n.shortcut===e})).forEach((function(e){e&&e.method&&e.method()}))}))},unbind:function(e){if("undefined"===typeof e)Object.keys(WD).forEach((function(e){return delete WD[e]}));else if(Array.isArray(e))e.forEach((function(e){e.key&&ZD(e)}));else if("object"===typeof e)e.key&&ZD(e);else if("string"===typeof e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n[0],o=n[1];"function"===typeof i&&(o=i,i=""),ZD({key:e,scope:i,method:o,splitKey:"+"})}},keyMap:FD,modifier:UD,modifierMap:KD};for(var iz in rz)Object.prototype.hasOwnProperty.call(rz,iz)&&(nz[iz]=rz[iz]);if("undefined"!==typeof window){var oz=window.hotkeys;nz.noConflict=function(e){return e&&window.hotkeys===nz&&(window.hotkeys=oz),nz},window.hotkeys=nz}var az=["copy","cut","paste","asset"];function sz(e){return function(e){"string"!==typeof e&&(e="");for(var t=(e=e.replace(/\s/g,"")).split(","),n=t.lastIndexOf("");n>=0;)t[n-1]+=",",t.splice(n,1),n=t.lastIndexOf("");return t}(e).map((function(e){var t=e.split("");return 1===t.length?t[0]:"!"===t[0]?"shift+".concat(t[1]):"?"===t[0]?"alt+".concat(t[1]):"$"===t[0]?"!"===t[1]?"cmd+shift+".concat(t[2],",ctrl+shift+").concat(t[2]):"?"===t[1]?"cmd+\u2325+".concat(t[2],",ctrl+alt+").concat(t[2]):"cmd+".concat(t[1],",ctrl+").concat(t[1]):e})).join(",")}var uz=["shareZone","topZone","renderDebugMenuItems","children","hideUi"],lz=["children","hideUi"],cz=t.memo((function(e){var t=e.shareZone,n=e.topZone,r=e.renderDebugMenuItems,i=e.children,o=e.hideUi,a=So(e,uz);return(0,f.jsx)(AT,mt(mt({},a),{},{children:(0,f.jsx)(dz,{hideUi:o,shareZone:t,topZone:n,renderDebugMenuItems:r,children:i})}))})),dz=t.memo((function(e){var t=e.children,n=e.hideUi,r=So(e,lz);return(0,f.jsxs)(f.Fragment,{children:[t,n?null:(0,f.jsx)(fz,mt({},r))]})})),fz=t.memo((function(e){var n=e.shareZone,r=e.topZone,i=e.renderDebugMenuItems,o=Ml(),a=P_(),s=rT(),u=Il("isReadOnlyMode",(function(){return o.isReadOnly}),[o]),l=Il("focus",(function(){return o.instanceState.isFocusMode}),[o]),c=Il("debug",(function(){return o.instanceState.isDebugMode}),[o]);!function(){var e=Ml(),n=hA(),r=gT(),i=VA(),o=hT();(0,t.useEffect)((function(){if(n){for(var t=e.getContainer(),a=function(n,r){nz(n,{element:t,scope:e.store.id},r)},s=function(){return e.isMenuOpen||null!==e.editingId||e.crashingError},u=function(){var e=c[l];return e.kbd?r&&!e.readonlyOk||az.includes(e.id)?0:void a(sz(e.kbd),(function(t){s()||($c(t),e.onSelect("kbd"))})):0},l=0,c=Object.values(i);l<c.length;l++)u();for(var d=function(){var t=h[f];return!t.kbd||!t.readonlyOk&&e.isReadOnly||az.includes(t.id)?0:void a(sz(t.kbd),(function(e){s()||($c(e),t.onSelect("kbd"))}))},f=0,h=Object.values(o);f<h.length;f++)d();return nz.setScope(e.store.id),function(){nz.deleteScope(e.store.id)}}}),[i,o,r,e,n])}(),function(){var e=Ml(),n=Cj(),r=hA();(0,t.useEffect)((function(){if(r){var t=function(){0===e.selectedIds.length||null!==e.editingId||vA(e)||(EA(e),n("copy",{source:"kbd"}))},i=!1,o=function(e){1===e.button&&(i=!0,requestAnimationFrame((function(){i=!1})))},a=function(t){i?t.stopPropagation():null!==e.editingId||vA(e)||(t.clipboardData&&!e.inputs.shiftKey?xA(e,t.clipboardData):navigator.clipboard.read().then((function(t){Array.isArray(t)&&t[0]instanceof ClipboardItem&&kA(e,t,e.inputs.currentPagePoint)})),n("paste",{source:"kbd"}))};return document.addEventListener("copy",t),document.addEventListener("cut",s),document.addEventListener("paste",a),document.addEventListener("pointerup",o),function(){document.removeEventListener("copy",t),document.removeEventListener("cut",s),document.removeEventListener("paste",a),document.removeEventListener("pointerup",o)}}function s(){0===e.selectedIds.length||null!==e.editingId||vA(e)||(EA(e),e.deleteShapes(),n("cut",{source:"kbd"}))}}),[e,n,r])}(),function(){var e=Ml(),n=IA().addToast;(0,t.useEffect)((function(){function t(e){var t=e.name,r=e.count;n({title:"Maximum Shapes Reached",description:"You've reached the maximum number of shapes allowed on ".concat(t," (").concat(r,"). Please delete some shapes or move to a different page to continue.")})}return e.addListener("max-shapes",t),function(){e.removeListener("max-shapes",t)}}),[e,n])}();var d=VA()["toggle-focus-mode"];return(0,f.jsx)(sM,{children:(0,f.jsxs)("main",{"data-tldraw-area":"active-drawing",className:kl("tlui-layout",{"tlui-layout__mobile":s<5}),children:[l?(0,f.jsx)("div",{className:"tlui-layout__top",children:(0,f.jsx)(D_,{className:"tlui-focus-button",title:"".concat(a("focus-mode.toggle-focus-mode")),icon:"dot",onClick:function(){return d.onSelect("menu")}})}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:"tlui-layout__top",children:[(0,f.jsxs)("div",{className:"tlui-layout__top__left",children:[(0,f.jsx)(vL,{}),(0,f.jsxs)("div",{className:"tlui-helper-buttons",children:[(0,f.jsx)(xL,{}),(0,f.jsx)(OT,{}),(0,f.jsx)(kL,{})]})]}),(0,f.jsx)("div",{className:"tlui-layout__top__center",children:r}),(0,f.jsxs)("div",{className:"tlui-layout__top__right",children:[n,s>=5&&!u&&(0,f.jsx)("div",{className:"tlui-style-panel__wrapper",children:(0,f.jsx)(yD,{})})]})]}),(0,f.jsxs)("div",{className:"tlui-layout__bottom",children:[(0,f.jsxs)("div",{className:"tlui-layout__bottom__main",children:[(0,f.jsx)(wL,{}),(0,f.jsx)(TD,{}),s>=4&&(0,f.jsx)(XT,{})]}),c&&(0,f.jsx)(RT,{renderDebugMenuItems:null!==i&&void 0!==i?i:null})]})]}),(0,f.jsx)(PD,{}),(0,f.jsx)(WT,{}),(0,f.jsx)(ID,{}),(0,f.jsx)(HT,{})]})})})),hz=["__scopeContextMenu","disabled"],pz=["__scopeContextMenu"],vz=["__scopeContextMenu"],gz=["__scopeContextMenu"],mz=["__scopeContextMenu"],yz=["__scopeContextMenu"],bz=["__scopeContextMenu"],wz=["__scopeContextMenu"],xz="ContextMenu",kz=l(Yx(xz,[AP]),2),Sz=kz[0],_z=(kz[1],AP()),Ez=l(Sz(xz),2),Cz=Ez[0],Pz=Ez[1],Iz=function(e){var n=e.__scopeContextMenu,r=e.children,i=e.onOpenChange,o=e.dir,a=e.modal,s=void 0===a||a,u=l((0,t.useState)(!1),2),c=u[0],d=u[1],f=_z(n),h=Jx(i),p=(0,t.useCallback)((function(e){d(e),h(e)}),[h]);return(0,t.createElement)(Cz,{scope:n,open:c,onOpenChange:p,modal:s},(0,t.createElement)(PI,Fx({},f,{dir:o,open:c,onOpenChange:p,modal:s}),r))},jz="ContextMenuTrigger",Mz=(0,t.forwardRef)((function(e,n){var r=e.__scopeContextMenu,i=e.disabled,o=void 0!==i&&i,a=So(e,hz),s=Pz(jz,r),u=_z(r),l=(0,t.useRef)({x:0,y:0}),c=(0,t.useRef)({getBoundingClientRect:function(){return DOMRect.fromRect(mt({width:0,height:0},l.current))}}),d=(0,t.useRef)(0),f=(0,t.useCallback)((function(){return window.clearTimeout(d.current)}),[]),h=function(e){l.current={x:e.clientX,y:e.clientY},s.onOpenChange(!0)};return(0,t.useEffect)((function(){return f}),[f]),(0,t.useEffect)((function(){o&&f()}),[o,f]),(0,t.createElement)(t.Fragment,null,(0,t.createElement)(II,Fx({},u,{virtualRef:c})),(0,t.createElement)(uk.span,Fx({"data-state":s.open?"open":"closed","data-disabled":o?"":void 0},a,{ref:n,style:mt({WebkitTouchCallout:"none"},e.style),onContextMenu:o?e.onContextMenu:Ux(e.onContextMenu,(function(e){f(),h(e),e.preventDefault()})),onPointerDown:o?e.onPointerDown:Ux(e.onPointerDown,Fz((function(e){f(),d.current=window.setTimeout((function(){return h(e)}),700)}))),onPointerMove:o?e.onPointerMove:Ux(e.onPointerMove,Fz(f)),onPointerCancel:o?e.onPointerCancel:Ux(e.onPointerCancel,Fz(f)),onPointerUp:o?e.onPointerUp:Ux(e.onPointerUp,Fz(f))})))})),Az=function(e){var n=e.__scopeContextMenu,r=So(e,pz),i=_z(n);return(0,t.createElement)(jI,Fx({},i,r))},Tz="ContextMenuContent",Oz=(0,t.forwardRef)((function(e,n){var r=e.__scopeContextMenu,i=So(e,vz),o=Pz(Tz,r),a=_z(r),s=(0,t.useRef)(!1);return(0,t.createElement)(MI,Fx({},a,i,{ref:n,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:function(t){var n;null===(n=e.onCloseAutoFocus)||void 0===n||n.call(e,t),!t.defaultPrevented&&s.current&&t.preventDefault(),s.current=!1},onInteractOutside:function(t){var n;null===(n=e.onInteractOutside)||void 0===n||n.call(e,t),t.defaultPrevented||o.modal||(s.current=!0)},style:mt(mt({},e.style),{},{"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"})}))})),Nz=(0,t.forwardRef)((function(e,n){var r=e.__scopeContextMenu,i=So(e,gz),o=_z(r);return(0,t.createElement)(AI,Fx({},o,i,{ref:n}))})),Rz=(0,t.forwardRef)((function(e,n){var r=e.__scopeContextMenu,i=So(e,mz),o=_z(r);return(0,t.createElement)(TI,Fx({},o,i,{ref:n}))})),Lz=(0,t.forwardRef)((function(e,n){var r=e.__scopeContextMenu,i=So(e,yz),o=_z(r);return(0,t.createElement)(OI,Fx({},o,i,{ref:n}))})),Dz=function(e){var n=e.__scopeContextMenu,r=e.children,i=e.onOpenChange,o=e.open,a=e.defaultOpen,s=_z(n),u=l(Zx({prop:o,defaultProp:a,onChange:i}),2),c=u[0],d=u[1];return(0,t.createElement)(RI,Fx({},s,{open:c,onOpenChange:d}),r)},zz=(0,t.forwardRef)((function(e,n){var r=e.__scopeContextMenu,i=So(e,bz),o=_z(r);return(0,t.createElement)(LI,Fx({},o,i,{ref:n}))})),Bz=(0,t.forwardRef)((function(e,n){var r=e.__scopeContextMenu,i=So(e,wz),o=_z(r);return(0,t.createElement)(DI,Fx({},o,i,{ref:n,style:mt(mt({},e.style),{},{"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"})}))}));function Fz(e){return function(t){return"mouse"!==t.pointerType?e(t):void 0}}var Uz=Iz,Kz=Mz,Vz=Az,Wz=Oz,Hz=Nz,Yz=Rz,qz=Lz,Xz=Dz,$z=zz,Gz=Bz,Qz=Pl((function(){var e=Ml(),t=cd(),n=e.pages,r=e.currentPageId,i=P_(),o=IA().addToast;return(0,f.jsxs)(Xz,{children:[(0,f.jsx)($z,{dir:"ltr",asChild:!0,children:(0,f.jsx)(D_,{className:"tlui-menu__button",label:"context-menu.move-to-page","data-testid":"menu-item.move-to-page",icon:"chevron-right"})}),(0,f.jsx)(Vz,{container:t,dir:"ltr",children:(0,f.jsxs)(Gz,{className:"tlui-menu",sideOffset:-4,collisionPadding:4,children:[(0,f.jsx)(Hz,{dir:"ltr",className:"tlui-menu__group","data-testid":"menu-item.pages",children:n.map((function(t){return(0,f.jsx)(Yz,{disabled:r===t.id,onSelect:function(){e.mark("move_shapes_to_page"),e.moveShapesToPage(e.selectedIds,t.id);var n=e.getPageById(t.id);n&&o({title:"Changed Page",description:"Moved to ".concat(n.name,"."),actions:[{label:"Go Back",type:"primary",onClick:function(){e.mark("change-page"),e.setCurrentPageId(r)}}]})},asChild:!0,children:(0,f.jsx)(D_,{title:t.name,className:"tlui-menu__button tlui-context-menu__move-to-page__name",children:(0,f.jsx)("span",{children:t.name})})},t.id)}))},"pages"),(0,f.jsx)(Hz,{dir:"ltr",className:"tlui-menu__group","data-testid":"menu-item.new-page",children:(0,f.jsx)(Yz,{onSelect:function(){e.mark("move_shapes_to_page");var t=Ko.createId(),n=e.selectedIds,r=e.currentPageId;e.batch((function(){e.createPage("Page 1",t),e.setCurrentPageId(r),e.moveShapesToPage(n,t)}))},asChild:!0,children:(0,f.jsx)(D_,{title:i("context.pages.new-page"),className:"tlui-menu__button tlui-context-menu__move-to-page__name",children:i("context.pages.new-page")})},"new-page")},"new-page")]})})]})})),Jz=function(e){var n=e.children,r=Ml(),i=cT(),o=(0,t.useCallback)((function(e){if(e){if(r.isCoarsePointer){var t=r.selectedShapes,n=r.inputs.currentPagePoint,i=r.getShapesAtPoint(n);if(!r.selectedShapes.length||!i.some((function(e){return t.includes(e)}))){var o=i.filter((function(e){return r.isShapeOrAncestorLocked(e)}));o.length&&r.select.apply(r,d(o.map((function(e){return e.id}))))}}}else{var a=r.onlySelectedShape;a&&r.isShapeOrAncestorLocked(a)&&r.setSelectedIds([])}}),[r]),a=l(Pj("context menu",o),2),s=(a[0],a[1]),u=gT(),c=0===i.length||u&&i.every((function(e){return!e.readonlyOk})),h=!Il("isSelectToolActive",(function(){return"select"===r.currentToolId}),[r])||c;return(0,f.jsxs)(Uz,{dir:"ltr",onOpenChange:s,children:[(0,f.jsx)(Kz,{onContextMenu:h?$c:void 0,dir:"ltr",disabled:h,children:n}),(0,f.jsx)(Zz,{})]})};function Zz(){var e=Ml(),n=P_(),r=cT(),i=l(Pj("context menu sub"),2),o=(i[0],i[1]),a=gT(),s=rT(),u=cd(),c=l((0,t.useState)(!1),2),d=c[0],h=c[1];function p(e,t,r,i){if(a&&!t.readonlyOk)return null;switch(t.type){case"custom":if("MOVE_TO_PAGE_MENU"===t.id)return(0,f.jsx)(Qz,{},t.id);break;case"group":return(0,f.jsx)(Hz,{dir:"ltr",className:kl("tlui-menu__group",{"tlui-menu__group__small":"submenu"===(null===r||void 0===r?void 0:r.type)}),"data-testid":"menu-item.".concat(t.id),children:t.children.map((function(n){return p(e,n,t,i+1)}))},t.id);case"submenu":return(0,f.jsxs)(Xz,{onOpenChange:o,children:[(0,f.jsx)($z,{dir:"ltr",disabled:t.disabled,asChild:!0,children:(0,f.jsx)(D_,{className:"tlui-menu__button",label:t.label,"data-testid":"menu-item.".concat(t.id),icon:"chevron-right"})}),(0,f.jsx)(Vz,{container:u,dir:"ltr",children:(0,f.jsx)(Gz,{className:"tlui-menu",sideOffset:-4,collisionPadding:4,children:t.children.map((function(n){return p(e,n,t,i+1)}))})})]},t.id);case"item":if(a&&!t.readonlyOk)return null;var l=t.actionItem,c=l.id,v=l.checkbox,g=l.contextMenuLabel,m=l.label,y=l.onSelect,b=l.kbd,w=l.icon,x=null!==g&&void 0!==g?g:m,k=x?n(x):void 0;return v?(0,f.jsxs)(qz,{className:"tlui-button tlui-menu__button tlui-menu__checkbox-item",dir:"ltr",disabled:t.disabled,onSelect:function(e){y("context-menu"),$c(e)},title:k||void 0,checked:t.checked,children:[(0,f.jsx)("div",{className:"tlui-menu__checkbox-item__check",style:{transformOrigin:"75% center",transform:"scale(".concat(t.checked?1:.5,")"),opacity:t.checked?1:.5},children:(0,f.jsx)(M_,{small:!0,icon:t.checked?"check":"checkbox-empty"})}),k&&(0,f.jsx)("span",{children:k}),b&&(0,f.jsx)(R_,{children:b})]},c):(0,f.jsx)(Yz,{dir:"ltr",asChild:!0,children:(0,f.jsx)(D_,{className:"tlui-menu__button","data-testid":"menu-item.".concat(c),kbd:b,label:x,disabled:t.disabled,iconLeft:s<3&&i>2?w:void 0,onClick:function(){d?h(!1):y("context-menu")}})},c)}}return(0,f.jsx)(Vz,{dir:"ltr",container:u,children:(0,f.jsx)(Wz,{className:"tlui-menu scrollable",alignOffset:-4,collisionPadding:4,onContextMenu:$c,children:r.map((function(t){return p(e,t,null,0)}))})})}var eB=["children"];function tB(e){var n=e.children,r=So(e,eB),i=mt(mt({},r),{},{shapes:(0,t.useMemo)((function(){var e;return[].concat(d(Km),d(null!==(e=r.shapes)&&void 0!==e?e:[]))}),[r.shapes]),tools:(0,t.useMemo)((function(){var e;return[].concat(d(cx),d(null!==(e=r.tools)&&void 0!==e?e:[]))}),[r.tools])});return(0,f.jsx)(Hw,mt(mt({},i),{},{children:(0,f.jsxs)(cz,mt(mt({},i),{},{children:[(0,f.jsx)(Jz,{children:(0,f.jsx)(bp,{})}),n]}))}))}var nB="http://localhost:5004/api/users";var rB=function(){var e=JSON.parse(localStorage.getItem("userData")),n=l((0,t.useState)(null),2),r=(n[0],n[1]),i=l((0,t.useState)(!1),2),o=i[0],a=i[1],s=l((0,t.useState)([]),2),u=s[0],c=s[1],d=l((0,t.useState)([]),2),h=d[0],p=d[1],v=l((0,t.useState)([]),2),g=v[0],y=v[1],w=l((0,t.useState)(null),2),x=(w[0],w[1]),k=Sn();Ml();(0,t.useEffect)((function(){y(function(){var e=new Date,t=[],n=5-e.getDay();n<=0&&(n+=7);for(var r=0;r<3;r++){var i=new Date(e);i.setDate(e.getDate()+n+7*r),t.push(i)}return t}())}),[]),(0,t.useEffect)((function(){var t=function(){var t=b(m().mark((function t(){var n;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,lt.post("".concat(nB,"/group-members"),{groupNumber:e.groupNumber,userEmail:e.email});case 3:n=t.sent,c(n.data),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),x("Error fetching group members."),console.error("Error fetching group members:",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),n=function(){var t=b(m().mark((function t(){var n;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,lt.post("".concat(nB,"/group-mentor"),{groupNumber:e.groupNumber,userEmail:e.email});case 3:n=t.sent,p(n.data),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),x("Error fetching mentor."),console.error("Error fetching mentor:",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();e&&e.email&&e.groupNumber&&(t(),n())}),[e]);var S=l((0,t.useState)({}),2),_=S[0],E=S[1];function C(){return"#"+Math.floor(16777215*Math.random()).toString(16)}(0,t.useEffect)((function(){var e=mt({},_);u.forEach((function(t){e[t.id]||(e[t.id]=C())})),E(e)}),[u]),(0,t.useEffect)((function(){var e=mt({},_);u.forEach((function(t){e["".concat(t.name).concat(t.surname)]||(e["".concat(t.name).concat(t.surname)]=C())})),E(e)}),[u]);var P=function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").charAt(0).toUpperCase()+e.charAt(0).toUpperCase()},I=l((0,t.useState)(null),2),j=I[0],M=I[1],A=l((0,t.useState)(!0),2),T=(A[0],A[1]);(0,t.useEffect)((function(){fetch("https://api.quotable.io/random").then((function(e){if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((function(e){M({content:e.content,author:e.author}),T(!1)})).catch((function(e){x(e.message),T(!1)}))}),[]);var O=function(e){r(e),a(!o),k("/Whiteboard",{state:{pageName:e}})};return(0,f.jsxs)("div",{className:"whole-dashboard-container",children:[(0,f.jsxs)("div",{className:"left-container",children:[(0,f.jsx)("img",{className:"logo-dashboard",src:Kn,alt:"MentKnow Logo"}),(0,f.jsxs)("div",{className:"logout-style",children:[(0,f.jsx)("img",{className:"signout-image-container",src:Hn,alt:"Sign out"}),(0,f.jsx)("h1",{className:"logout-text-stye",onClick:function(){localStorage.removeItem("userData"),k("/signin")},children:"Log Out"})]})]}),(0,f.jsxs)("div",{className:"middle-container",children:[(0,f.jsxs)("div",{className:"middle-header",children:[(0,f.jsx)("img",{src:Yn,className:"middle-logo",alt:"Frame Logo"}),(0,f.jsxs)("div",{children:[(0,f.jsxs)("h1",{className:"hello-container",children:[" Hello ",e.name,"!"]}),(0,f.jsx)("p1",{className:"hello-container-subline",children:"It's good to see you again."})]})]}),(0,f.jsx)("h1",{className:"activities-header",children:"Activities"}),(0,f.jsx)("p",{className:"activity-topics-style",children:"Activity Topics"}),(0,f.jsxs)("div",{className:"awareness-container",children:[(0,f.jsx)("img",{className:"all-image-icons-style",src:qn,alt:""}),(0,f.jsx)("h1",{className:"activity-name",children:"Awareness"}),(0,f.jsx)("img",{className:"calender-image-icons",src:Zn,alt:""}),(0,f.jsx)("h2",{className:"date-style",children:"15/09/2023"}),(0,f.jsx)("h1",{type:"button",className:"button-to-activity-style",onClick:function(){return O("Awareness")},children:"View Activity"})]}),(0,f.jsxs)("div",{className:"all-others-container",children:[(0,f.jsx)("span",{className:"all-image-icons-stye-outer",children:(0,f.jsx)("img",{className:"all-image-icons-style",src:Xn,alt:""})}),(0,f.jsx)("h1",{className:"activity-name",children:"Goal Setting"}),(0,f.jsx)("img",{className:"calender-image-icons1",src:Zn,alt:""}),(0,f.jsx)("h2",{className:"date-style",children:"22/09/2023"}),(0,f.jsx)("h1",{className:"button-to-activity-style",onClick:function(){return O("Goal Setting")},children:"View Activity"})]}),(0,f.jsxs)("div",{className:"all-others-container",children:[(0,f.jsx)("img",{className:"all-image-icons-style",src:$n,alt:""}),(0,f.jsx)("h1",{className:"activity-name",children:"Time Management"}),(0,f.jsx)("img",{className:"calender-image-icons2",src:Zn,alt:""}),(0,f.jsx)("h2",{className:"date-style",children:"29/09/2023"}),(0,f.jsx)("h1",{className:"button-to-activity-style",onClick:function(){return O("Time Management")},children:"View Activity"})]}),(0,f.jsxs)("div",{className:"all-others-container",children:[(0,f.jsx)("img",{className:"all-image-icons-style",src:Gn,alt:""}),(0,f.jsx)("h1",{className:"activity-name",children:"Study Skills"}),(0,f.jsx)("img",{className:"calender-image-icons3",src:Zn,alt:""}),(0,f.jsx)("h2",{className:"date-style",children:"06/10/2023"}),(0,f.jsx)("h1",{className:"button-to-activity-style",onClick:function(){return O("Study Skills")},children:"View Activity"})]}),(0,f.jsxs)("div",{className:"all-others-container",children:[(0,f.jsx)("img",{className:"all-image-icons-style",src:Qn,alt:""}),(0,f.jsx)("h1",{className:"activity-name",children:"Stress Management"}),(0,f.jsx)("img",{className:"calender-image-icons4",src:Zn,alt:""}),(0,f.jsx)("h2",{className:"date-style",children:"13/10/2023"}),(0,f.jsx)("h1",{className:"button-to-activity-style",onClick:function(){return O("Stress Management")},children:"View Activity"})]}),(0,f.jsxs)("div",{className:"all-others-container",children:[(0,f.jsx)("img",{className:"all-image-icons-style",src:Jn,alt:""}),(0,f.jsx)("h1",{className:"activity-name",children:"Exam Preparation"}),(0,f.jsx)("img",{className:"calender-image-icons5",src:Zn,alt:""}),(0,f.jsx)("h2",{className:"date-style",children:"20/10/2023"}),(0,f.jsx)("h1",{className:"button-to-activity-style",onClick:function(){return O("Exam Preparation")},children:"View Activity"})]})]}),(0,f.jsxs)("div",{className:"right-container",children:[(0,f.jsxs)("div",{className:"right-top-container",children:[(0,f.jsx)("h1",{className:"right-top-title",children:" Upcoming Sessions"}),(0,f.jsx)("div",{children:g.map((function(e,t){return(0,f.jsxs)("div",{children:[(0,f.jsx)("img",{className:"top-right-icons",src:Zn}),(0,f.jsxs)("span",{className:"date-text",children:["Friday, ",e.toLocaleDateString(),", 13:00 PM"," "]})]},t)}))})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("h2",{className:"mentor-container-header",children:"My Mentor"}),h&&h.length>0?(0,f.jsxs)("div",{className:"mentor-container",children:[(0,f.jsx)("div",{className:"initial-outer-container",style:{backgroundColor:"#F39F18"},children:(0,f.jsx)("span",{className:"initials-container",children:(0,f.jsx)("div",{className:"initials-container-style",children:P(h[0].name,h[0].surname)})})}),(0,f.jsxs)("h1",{className:"mentor-name-component",children:[h[0].name," ",h[0].surname]})]}):(0,f.jsx)("span",{className:"mentor-container",children:(0,f.jsx)("div",{children:"Mentor currently not assigned"})})]}),(0,f.jsxs)("h1",{className:"group-heading-container",children:["Group ",e.groupNumber," peers"," "]}),(0,f.jsx)("div",{children:u.map((function(e,t){return(0,f.jsxs)("div",{className:"mentees-container",children:[(0,f.jsx)("div",{className:"mentees-initials-container",style:{backgroundColor:_["".concat(e.name).concat(e.surname)]||"#FFF"},children:(0,f.jsx)("div",{className:"initials-container",children:(0,f.jsx)("div",{className:"initials-container-style",children:P(e.name,e.surname)})})}),(0,f.jsxs)("div",{className:"mentees-names-style",children:[e.name," ",e.surname]})]},t)}))}),(0,f.jsxs)("div",{className:"affirmation-container",children:[(0,f.jsx)("h1",{className:"affirmation-header",children:"Today\u2019s Affirmation"}),(0,f.jsx)("div",{className:"quotes-style",children:j?(0,f.jsxs)("blockquote",{children:['"',j.content,'"',(0,f.jsxs)("footer",{children:["\u2014 ",j.author]})]}):(0,f.jsx)("div",{className:"loading-ball"})})]})]})]})};var iB=n.p+"static/media/Line_up.45a40f8d4a918bc5a9a17ab04d4a8af6.svg",oB="http://localhost:5004/api/users";var aB=function(){var e=JSON.parse(localStorage.getItem("userData")),n=l((0,t.useState)(null),2),r=(n[0],n[1]),i=l((0,t.useState)(!1),2),o=i[0],a=i[1],s=l((0,t.useState)([]),2),u=s[0],c=s[1],d=l((0,t.useState)([]),2),h=(d[0],d[1]),p=l((0,t.useState)([]),2),v=p[0],g=p[1],y=l((0,t.useState)(null),2),w=(y[0],y[1]),x=Sn();(0,t.useEffect)((function(){g(function(){var e=new Date,t=[],n=5-e.getDay();n<=0&&(n+=7);for(var r=0;r<3;r++){var i=new Date(e);i.setDate(e.getDate()+n+7*r),t.push(i)}return t}())}),[]),(0,t.useEffect)((function(){var t=function(){var t=b(m().mark((function t(){var n;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,lt.post("".concat(oB,"/group-members"),{groupNumber:e.groupNumber,userEmail:e.email});case 3:n=t.sent,c(n.data),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),w("Error fetching group members."),console.error("Error fetching group members:",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),n=function(){var t=b(m().mark((function t(){var n;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,lt.post("".concat(oB,"/group-mentor"),{groupNumber:e.groupNumber,userEmail:e.email});case 3:n=t.sent,h(n.data),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),w("Error fetching mentor."),console.error("Error fetching mentor:",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();e&&e.email&&e.groupNumber&&(t(),n())}),[e]);var k=l((0,t.useState)({}),2),S=k[0],_=k[1];function E(){return"#"+Math.floor(16777215*Math.random()).toString(16)}(0,t.useEffect)((function(){var e=mt({},S);u.forEach((function(t){e[t.id]||(e[t.id]=E())})),_(e)}),[u]),(0,t.useEffect)((function(){var e=mt({},S);u.forEach((function(t){e["".concat(t.name).concat(t.surname)]||(e["".concat(t.name).concat(t.surname)]=E())})),_(e)}),[u]);var C=function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").charAt(0).toUpperCase()+e.charAt(0).toUpperCase()},P=l((0,t.useState)(null),2),I=P[0],j=P[1],M=l((0,t.useState)(!0),2),A=(M[0],M[1]);(0,t.useEffect)((function(){fetch("https://api.quotable.io/random").then((function(e){if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((function(e){j({content:e.content,author:e.author}),A(!1)})).catch((function(e){w(e.message),A(!1)}))}),[]);var T=function(e){r(e),a(!o),x("/Whiteboard",{state:{pageName:e}})};return(0,f.jsxs)("div",{className:"whole-dashboard-container",children:[(0,f.jsxs)("div",{className:"left-container",onClick:function(){localStorage.removeItem("userData"),x("/signin")},children:[(0,f.jsx)("img",{className:"logo-dashboard",src:Kn,alt:"MentKnow Logo"}),(0,f.jsxs)("div",{className:"logout-style",children:[(0,f.jsx)("img",{className:"signout-image-container",src:Hn,alt:"Sign out"}),(0,f.jsx)("h1",{className:"logout-text-stye",children:"Log Out"})]})]}),(0,f.jsxs)("div",{className:"middle-container",children:[(0,f.jsxs)("div",{className:"middle-header",children:[(0,f.jsx)("img",{src:Yn,className:"middle-logo",alt:"Frame Logo"}),(0,f.jsxs)("div",{children:[(0,f.jsxs)("h1",{className:"hello-container",children:[" Hello ",e.name,"!"]}),(0,f.jsx)("p1",{className:"hello-container-subline",children:"It's good to see you again."})]})]}),(0,f.jsx)("h1",{className:"activities-header",children:"Activities"}),(0,f.jsx)("p1",{className:"activity-topics-style",children:"Activity Topics"}),(0,f.jsxs)("div",{className:"awareness-container",children:[(0,f.jsx)("img",{className:"all-image-icons-style",src:qn,alt:""}),(0,f.jsx)("h1",{className:"activity-name",children:"Awareness"}),(0,f.jsx)("img",{className:"calender-image-icons",src:Zn,alt:""}),(0,f.jsx)("h2",{className:"date-style",children:"15/09/2023"}),(0,f.jsx)("h1",{className:"button-to-activity-style",onClick:function(){return T("Awareness")},children:"View Activity"})]}),(0,f.jsxs)("div",{className:"all-others-container",children:[(0,f.jsx)("img",{className:"all-image-icons-style",src:Xn,alt:""}),(0,f.jsx)("h1",{className:"activity-name",children:"Goal Setting"}),(0,f.jsx)("img",{className:"calender-image-icons1",src:Zn,alt:""}),(0,f.jsx)("h2",{className:"date-style",children:"22/09/2023"}),(0,f.jsx)("h1",{className:"button-to-activity-style",onClick:function(){return T("Goal Setting")},children:"View Activity"})]}),(0,f.jsxs)("div",{className:"all-others-container",children:[(0,f.jsx)("img",{className:"all-image-icons-style",src:$n,alt:""}),(0,f.jsx)("h1",{className:"activity-name",children:"Time Management"}),(0,f.jsx)("img",{className:"calender-image-icons2",src:Zn,alt:""}),(0,f.jsx)("h2",{className:"date-style",children:"29/09/2023"}),(0,f.jsx)("h1",{className:"button-to-activity-style",onClick:function(){return T("Time Management")},children:"View Activity"})]}),(0,f.jsxs)("div",{className:"all-others-container",children:[(0,f.jsx)("img",{className:"all-image-icons-style",src:Gn,alt:""}),(0,f.jsx)("h1",{className:"activity-name",children:"Study Skills"}),(0,f.jsx)("img",{className:"calender-image-icons3",src:Zn,alt:""}),(0,f.jsx)("h2",{className:"date-style",children:"06/10/2023"}),(0,f.jsx)("h1",{className:"button-to-activity-style",onClick:function(){return T("Study Skills")},children:"View Activity"})]}),(0,f.jsxs)("div",{className:"all-others-container",children:[(0,f.jsx)("img",{className:"all-image-icons-style",src:Qn,alt:""}),(0,f.jsx)("h1",{className:"activity-name",children:"Stress Management"}),(0,f.jsx)("img",{className:"calender-image-icons4",src:Zn,alt:""}),(0,f.jsx)("h2",{className:"date-style",children:"13/10/2023"}),(0,f.jsx)("h1",{className:"button-to-activity-style",onClick:function(){return T("Stress Management")},children:"View Activity"})]}),(0,f.jsxs)("div",{className:"all-others-container",children:[(0,f.jsx)("img",{className:"all-image-icons-style",src:Jn,alt:""}),(0,f.jsx)("h1",{className:"activity-name",children:"Exam Preparation"}),(0,f.jsx)("img",{className:"calender-image-icons5",src:Zn,alt:""}),(0,f.jsx)("h2",{className:"date-style",children:"20/10/2023"}),(0,f.jsx)("h1",{className:"button-to-activity-style",onClick:function(){return T("Exam Preparation")},children:"View Activity"})]})]}),(0,f.jsxs)("div",{className:"right-container",children:[(0,f.jsxs)("div",{className:"right-top-container",children:[(0,f.jsx)("h1",{className:"right-top-title",children:" Upcoming Sessions"}),(0,f.jsx)("div",{children:v.map((function(e,t){return(0,f.jsxs)("div",{children:[(0,f.jsx)("img",{className:"top-right-icons",src:Zn}),(0,f.jsxs)("span",{className:"date-text",children:["Friday, ",e.toLocaleDateString(),", 13:00 PM"," "]})]},t)}))})]}),(0,f.jsxs)("h1",{className:"group-heading-container",children:["Group ",e.groupNumber," mentees"," "]}),(0,f.jsxs)("div",{className:"analytics-style",onClick:function(){x("/Analytics")},children:[(0,f.jsx)("img",{src:iB,alt:"lineup",className:"image-analytics-mentor"}),(0,f.jsx)("h1",{className:"analytics-heading-text",children:"View Statistics"})]}),(0,f.jsx)("div",{children:u.map((function(e,t){return(0,f.jsxs)("div",{className:"mentees-container",children:[(0,f.jsx)("div",{className:"mentees-initials-container",style:{backgroundColor:S["".concat(e.name).concat(e.surname)]||"#FFF"},children:(0,f.jsx)("div",{className:"initials-container",children:(0,f.jsx)("div",{className:"initials-container-style",children:C(e.name,e.surname)})})}),(0,f.jsxs)("div",{className:"mentees-names-style",children:[e.name," ",e.surname]})]},t)}))}),(0,f.jsxs)("div",{className:"affirmation-container",children:[(0,f.jsx)("h1",{className:"affirmation-header",children:"Today\u2019s Affirmation"}),(0,f.jsx)("div",{className:"quotes-style",children:I?(0,f.jsxs)("blockquote",{children:['"',I.content,'"',(0,f.jsxs)("footer",{children:["\u2014 ",I.author]})]}):(0,f.jsx)("div",{children:"Loading quote..."})})]})]})]})},sB=function(){return new Map},uB=function(e){var t=sB();return e.forEach((function(e,n){t.set(n,e)})),t},lB=function(e,t,n){var r=e.get(t);return void 0===r&&e.set(t,r=n()),r},cB=function(){return new Set},dB=String.fromCharCode,fB=(String.fromCodePoint,dB(65535),/^\s*/g),hB=/([A-Z])/g,pB=function(e,t){return function(e){return e.replace(fB,"")}(e.replace(hB,(function(e){return"".concat(t).concat(function(e){return e.toLowerCase()}(e))})))},vB="undefined"!==typeof TextEncoder?new TextEncoder:null,gB=vB?function(e){return vB.encode(e)}:function(e){for(var t=unescape(encodeURIComponent(e)),n=t.length,r=new Uint8Array(n),i=0;i<n;i++)r[i]=t.codePointAt(i);return r},mB="undefined"===typeof TextDecoder?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});mB&&1===mB.decode(new Uint8Array).length&&(mB=null);var yB=function(e){return void 0===e?null:e},bB=new(function(){function e(){ne(this,e),this.map=new Map}return oe(e,[{key:"setItem",value:function(e,t){this.map.set(e,t)}},{key:"getItem",value:function(e){return this.map.get(e)}}]),e}()),wB=!0;try{"undefined"!==typeof localStorage&&(bB=localStorage,wB=!1)}catch(VO){}var xB,kB,SB,_B=bB,EB=function(e){return e[e.length-1]},CB=function(e,t){for(var n=0;n<t.length;n++)e.push(t[n])},PB=Array.from,IB=Array.isArray,jB=(Object.assign,Object.keys),MB=function(e){return jB(e).length},AB=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},TB=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;try{for(;r<t.length;r++)t[r].apply(t,d(n))}finally{r<t.length&&e(t,n,r+1)}},OB=function e(t,n){if(null==t||null==n)return function(e,t){return e===t}(t,n);if(t.constructor!==n.constructor)return!1;if(t===n)return!0;switch(t.constructor){case ArrayBuffer:t=new Uint8Array(t),n=new Uint8Array(n);case Uint8Array:if(t.byteLength!==n.byteLength)return!1;for(var r=0;r<t.length;r++)if(t[r]!==n[r])return!1;break;case Set:if(t.size!==n.size)return!1;var i,o=w(t);try{for(o.s();!(i=o.n()).done;){var a=i.value;if(!n.has(a))return!1}}catch(NG){o.e(NG)}finally{o.f()}break;case Map:if(t.size!==n.size)return!1;var s,u=w(t.keys());try{for(u.s();!(s=u.n()).done;){var l=s.value;if(!n.has(l)||!e(t.get(l),n.get(l)))return!1}}catch(NG){u.e(NG)}finally{u.f()}break;case Object:if(MB(t)!==MB(n))return!1;for(var c in t)if(!AB(t,c)||!e(t[c],n[c]))return!1;break;case Array:if(t.length!==n.length)return!1;for(var d=0;d<t.length;d++)if(!e(t[d],n[d]))return!1;break;default:return!1}return!0},NB="undefined"!==typeof process&&process.release&&/node|io\.js/.test(process.release.name),RB="undefined"!==typeof window&&"undefined"!==typeof document&&!NB,LB=("undefined"!==typeof navigator&&/Mac/.test(navigator.platform),[]),DB=function(){if(void 0===xB)if(NB){xB=sB();for(var e=process.argv,t=null,n=0;n<e.length;n++){var r=e[n];"-"===r[0]?(null!==t&&xB.set(t,""),t=r):null!==t?(xB.set(t,r),t=null):LB.push(r)}null!==t&&xB.set(t,"")}else"object"===typeof location?(xB=sB(),(location.search||"?").slice(1).split("&").forEach((function(e){if(0!==e.length){var t=l(e.split("="),2),n=t[0],r=t[1];xB.set("--".concat(pB(n,"-")),r),xB.set("-".concat(pB(n,"-")),r)}}))):xB=sB();return xB},zB=function(e){return DB().has(e)},BB=function(e){return yB(NB?{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}[e.toUpperCase()]:_B.getItem(e))},FB=(kB="production",zB("--"+kB)||BB(kB),NB&&function(e,t){return t.includes(e)}({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FORCE_COLOR,["true","1","2"])),UB=!zB("no-colors")&&(!NB||process.stdout.isTTY||FB)&&(!NB||zB("color")||FB||null!==BB("COLORTERM")||(BB("TERM")||"").includes("color")),KB=function(e){return new Uint8Array(e)},VB=function(e,t,n){return new Uint8Array(e,t,n)},WB=RB?function(e){for(var t="",n=0;n<e.byteLength;n++)t+=dB(e[n]);return btoa(t)}:function(e){return Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("base64")},HB=RB?function(e){for(var t=atob(e),n=KB(t.length),r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}:function(e){var t=Buffer.from(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)},YB=new Map,qB=function(){function e(t){var n=this;ne(this,e),this.room=t,this.onmessage=null,this._onChange=function(e){return e.key===t&&null!==n.onmessage&&n.onmessage({data:HB(e.newValue||"")})},function(e){wB||addEventListener("storage",e)}(this._onChange)}return oe(e,[{key:"postMessage",value:function(e){_B.setItem(this.room,WB(function(e){return new Uint8Array(e)}(e)))}},{key:"close",value:function(){!function(e){wB||removeEventListener("storage",e)}(this._onChange)}}]),e}(),XB="undefined"===typeof BroadcastChannel?qB:BroadcastChannel,$B=function(e){return lB(YB,e,(function(){var t=cB(),n=new XB(e);return n.onmessage=function(e){return t.forEach((function(t){return t(e.data,"broadcastchannel")}))},{bc:n,subs:t}}))},GB=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=$B(e);r.bc.postMessage(t),r.subs.forEach((function(e){return e(t,n)}))},QB=Date.now,JB=Math.floor,ZB=(Math.ceil,Math.abs),eF=(Math.imul,Math.round,Math.log10,Math.log2,Math.log,Math.sqrt,function(e,t){return e<t?e:t}),tF=function(e,t){return e>t?e:t},nF=(Number.isNaN,Math.pow),rF=(Math.sign,function(e){return 0!==e?e<0:1/e<0}),iF=64,oF=128,aF=127,sF=2147483647,uF=Number.MAX_SAFE_INTEGER,lF=(Number.MIN_SAFE_INTEGER,Number.isInteger||function(e){return"number"===typeof e&&isFinite(e)&&JB(e)===e}),cF=(Number.isNaN,Number.parseInt,oe((function e(){ne(this,e),this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}))),dF=function(){return new cF},fF=function(e){for(var t=e.cpos,n=0;n<e.bufs.length;n++)t+=e.bufs[n].length;return t},hF=function(e){for(var t=new Uint8Array(fF(e)),n=0,r=0;r<e.bufs.length;r++){var i=e.bufs[r];t.set(i,n),n+=i.length}return t.set(VB(e.cbuf.buffer,0,e.cpos),n),t},pF=function(e,t){var n=e.cbuf.length;e.cpos===n&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(2*n),e.cpos=0),e.cbuf[e.cpos++]=t},vF=pF,gF=function(e,t){for(;t>aF;)pF(e,oF|aF&t),t=JB(t/128);pF(e,aF&t)},mF=function(e,t){var n=rF(t);for(n&&(t=-t),pF(e,(t>63?oF:0)|(n?iF:0)|63&t),t=JB(t/64);t>0;)pF(e,(t>aF?oF:0)|aF&t),t=JB(t/128)},yF=new Uint8Array(3e4),bF=yF.length/3,wF=vB&&vB.encodeInto?function(e,t){if(t.length<bF){var n=vB.encodeInto(t,yF).written||0;gF(e,n);for(var r=0;r<n;r++)pF(e,yF[r])}else kF(e,gB(t))}:function(e,t){var n=unescape(encodeURIComponent(t)),r=n.length;gF(e,r);for(var i=0;i<r;i++)pF(e,n.codePointAt(i))},xF=function(e,t){var n=e.cbuf.length,r=e.cpos,i=eF(n-r,t.length),o=t.length-i;e.cbuf.set(t.subarray(0,i),r),e.cpos+=i,o>0&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(tF(2*n,o)),e.cbuf.set(t.subarray(i)),e.cpos=o)},kF=function(e,t){gF(e,t.byteLength),xF(e,t)},SF=function(e,t){!function(e,t){var n=e.cbuf.length;n-e.cpos<t&&(e.bufs.push(VB(e.cbuf.buffer,0,e.cpos)),e.cbuf=new Uint8Array(2*tF(n,t)),e.cpos=0)}(e,t);var n=new DataView(e.cbuf.buffer,e.cpos,t);return e.cpos+=t,n},_F=new DataView(new ArrayBuffer(4)),EF=function e(t,n){switch(typeof n){case"string":pF(t,119),wF(t,n);break;case"number":lF(n)&&ZB(n)<=sF?(pF(t,125),mF(t,n)):(s=n,_F.setFloat32(0,s),_F.getFloat32(0)===s?(pF(t,124),function(e,t){SF(e,4).setFloat32(0,t,!1)}(t,n)):(pF(t,123),function(e,t){SF(e,8).setFloat64(0,t,!1)}(t,n)));break;case"bigint":pF(t,122),function(e,t){SF(e,8).setBigInt64(0,t,!1)}(t,n);break;case"object":if(null===n)pF(t,126);else if(IB(n)){pF(t,117),gF(t,n.length);for(var r=0;r<n.length;r++)e(t,n[r])}else if(n instanceof Uint8Array)pF(t,116),kF(t,n);else{pF(t,118);var i=Object.keys(n);gF(t,i.length);for(var o=0;o<i.length;o++){var a=i[o];wF(t,a),e(t,n[a])}}break;case"boolean":pF(t,n?120:121);break;default:pF(t,127)}var s},CF=function(e){xt(n,e);var t=Et(n);function n(e){var r;return ne(this,n),(r=t.call(this)).w=e,r.s=null,r.count=0,r}return oe(n,[{key:"write",value:function(e){this.s===e?this.count++:(this.count>0&&gF(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}]),n}(cF),PF=function(e){e.count>0&&(mF(e.encoder,1===e.count?e.s:-e.s),e.count>1&&gF(e.encoder,e.count-2))},IF=function(){function e(){ne(this,e),this.encoder=new cF,this.s=0,this.count=0}return oe(e,[{key:"write",value:function(e){this.s===e?this.count++:(PF(this),this.count=1,this.s=e)}},{key:"toUint8Array",value:function(){return PF(this),hF(this.encoder)}}]),e}(),jF=function(e){if(e.count>0){var t=2*e.diff+(1===e.count?0:1);mF(e.encoder,t),e.count>1&&gF(e.encoder,e.count-2)}},MF=function(){function e(){ne(this,e),this.encoder=new cF,this.s=0,this.count=0,this.diff=0}return oe(e,[{key:"write",value:function(e){this.diff===e-this.s?(this.s=e,this.count++):(jF(this),this.count=1,this.diff=e-this.s,this.s=e)}},{key:"toUint8Array",value:function(){return jF(this),hF(this.encoder)}}]),e}(),AF=function(){function e(){ne(this,e),this.sarr=[],this.s="",this.lensE=new IF}return oe(e,[{key:"write",value:function(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}},{key:"toUint8Array",value:function(){var e=new cF;return this.sarr.push(this.s),this.s="",wF(e,this.sarr.join("")),xF(e,this.lensE.toUint8Array()),hF(e)}}]),e}(),TF=function(e){return new Error(e)},OF=function(){throw TF("Method unimplemented")},NF=function(){throw TF("Unexpected case")},RF=TF("Unexpected end of array"),LF=TF("Integer out of Range"),DF=oe((function e(t){ne(this,e),this.arr=t,this.pos=0})),zF=function(e){return new DF(e)},BF=function(e){return e.pos!==e.arr.length},FF=function(e,t){var n=VB(e.arr.buffer,e.pos+e.arr.byteOffset,t);return e.pos+=t,n},UF=function(e){return FF(e,VF(e))},KF=function(e){return e.arr[e.pos++]},VF=function(e){for(var t=0,n=1,r=e.arr.length;e.pos<r;){var i=e.arr[e.pos++];if(t+=(i&aF)*n,n*=128,i<oF)return t;if(t>uF)throw LF}throw RF},WF=function(e){var t=e.arr[e.pos++],n=63&t,r=64,i=(t&iF)>0?-1:1;if(0===(t&oF))return i*n;for(var o=e.arr.length;e.pos<o;){if(n+=((t=e.arr[e.pos++])&aF)*r,r*=128,t<oF)return i*n;if(n>uF)throw LF}throw RF},HF=mB?function(e){return mB.decode(UF(e))}:function(e){var t=VF(e);if(0===t)return"";var n=String.fromCodePoint(KF(e));if(--t<100)for(;t--;)n+=String.fromCodePoint(KF(e));else for(;t>0;){var r=t<1e4?t:1e4,i=e.arr.subarray(e.pos,e.pos+r);e.pos+=r,n+=String.fromCodePoint.apply(null,i),t-=r}return decodeURIComponent(escape(n))},YF=function(e,t){var n=new DataView(e.arr.buffer,e.arr.byteOffset+e.pos,t);return e.pos+=t,n},qF=[function(e){},function(e){return null},WF,function(e){return YF(e,4).getFloat32(0,!1)},function(e){return YF(e,8).getFloat64(0,!1)},function(e){return YF(e,8).getBigInt64(0,!1)},function(e){return!1},function(e){return!0},HF,function(e){for(var t=VF(e),n={},r=0;r<t;r++){n[HF(e)]=XF(e)}return n},function(e){for(var t=VF(e),n=[],r=0;r<t;r++)n.push(XF(e));return n},UF],XF=function(e){return qF[127-KF(e)](e)},$F=function(e){xt(n,e);var t=Et(n);function n(e,r){var i;return ne(this,n),(i=t.call(this,e)).reader=r,i.s=null,i.count=0,i}return oe(n,[{key:"read",value:function(){return 0===this.count&&(this.s=this.reader(this),BF(this)?this.count=VF(this)+1:this.count=-1),this.count--,this.s}}]),n}(DF),GF=function(e){xt(n,e);var t=Et(n);function n(e){var r;return ne(this,n),(r=t.call(this,e)).s=0,r.count=0,r}return oe(n,[{key:"read",value:function(){if(0===this.count){this.s=WF(this);var e=rF(this.s);this.count=1,e&&(this.s=-this.s,this.count=VF(this)+2)}return this.count--,this.s}}]),n}(DF),QF=function(e){xt(n,e);var t=Et(n);function n(e){var r;return ne(this,n),(r=t.call(this,e)).s=0,r.count=0,r.diff=0,r}return oe(n,[{key:"read",value:function(){if(0===this.count){var e=WF(this),t=1&e;this.diff=JB(e/2),this.count=1,t&&(this.count=VF(this)+2)}return this.s+=this.diff,this.count--,this.s}}]),n}(DF),JF=function(){function e(t){ne(this,e),this.decoder=new GF(t),this.str=HF(this.decoder),this.spos=0}return oe(e,[{key:"read",value:function(){var e=this.spos+this.decoder.read(),t=this.str.slice(this.spos,e);return this.spos=e,t}}]),e}(),ZF=function(){function e(){ne(this,e),this._observers=sB()}return oe(e,[{key:"on",value:function(e,t){lB(this._observers,e,cB).add(t)}},{key:"once",value:function(e,t){var n=this;this.on(e,(function r(){n.off(e,r),t.apply(void 0,arguments)}))}},{key:"off",value:function(e,t){var n=this._observers.get(e);void 0!==n&&(n.delete(t),0===n.size&&this._observers.delete(e))}},{key:"emit",value:function(e,t){return PB((this._observers.get(e)||sB()).values()).forEach((function(e){return e.apply(void 0,d(t))}))}},{key:"destroy",value:function(){this._observers=sB()}}]),e}(),eU=(crypto.subtle,crypto.getRandomValues.bind(crypto)),tU=(Math.random,function(){return eU(new Uint32Array(1))[0]}),nU=[1e7]+-1e3+-4e3+-8e3+-1e11,rU=function(e){return new Promise(e)},iU=(Promise.all.bind(Promise),oe((function e(t,n){ne(this,e),this.left=t,this.right=n}))),oU=function(e,t){return new iU(e,t)},aU="undefined"!==typeof document?document:{},sU=("undefined"!==typeof DOMParser&&new DOMParser,function(e){return function(e,t){var n,r=[],i=w(e);try{for(i.s();!(n=i.n()).done;){var o=l(n.value,2),a=o[0],s=o[1];r.push(t(s,a))}}catch(NG){i.e(NG)}finally{i.f()}return r}(e,(function(e,t){return"".concat(t,":").concat(e,";")})).join("")}),uU=(aU.ELEMENT_NODE,aU.TEXT_NODE,aU.CDATA_SECTION_NODE,aU.COMMENT_NODE,aU.DOCUMENT_NODE,aU.DOCUMENT_TYPE_NODE,aU.DOCUMENT_FRAGMENT_NODE,Symbol),lU=uU(),cU=uU(),dU=uU(),fU=uU(),hU=uU(),pU=uU(),vU=uU(),gU=uU(),mU=uU(),yU=(QB(),vt(SB={},lU,oU("font-weight","bold")),vt(SB,cU,oU("font-weight","normal")),vt(SB,dU,oU("color","blue")),vt(SB,hU,oU("color","green")),vt(SB,fU,oU("color","grey")),vt(SB,pU,oU("color","red")),vt(SB,vU,oU("color","purple")),vt(SB,gU,oU("color","orange")),vt(SB,mU,oU("color","black")),SB),bU=UB?function(e){for(var t=[],n=[],r=sB(),i=[],o=0;o<e.length;o++){var a=e[o],s=yU[a];if(void 0!==s)r.set(s.left,s.right);else{if(a.constructor!==String&&a.constructor!==Number)break;var u=sU(r);o>0||u.length>0?(t.push("%c"+a),n.push(u)):t.push(a)}}for(o>0&&(i=n).unshift(t.join(""));o<e.length;o++){var l=e[o];l instanceof Symbol||i.push(l)}return i}:function(e){for(var t=[],n=[],r=0;r<e.length;r++){var i=e[r];i.constructor===String||i.constructor===Number?t.push(i):i.constructor===Object&&n.push(JSON.stringify(i))}return n},wU=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).log.apply(e,d(bU(n))),xU.forEach((function(e){return e.print(n)}))},xU=cB(),kU=function(e){var t;return vt(t={},Symbol.iterator,(function(){return this})),vt(t,"next",e),t},SU=function(e,t){return kU((function(){var n=e.next(),r=n.done,i=n.value;return{done:r,value:r?void 0:t(i)}}))},_U=m().mark(TK),EU=oe((function e(t,n){ne(this,e),this.clock=t,this.len=n})),CU=oe((function e(){ne(this,e),this.clients=new Map})),PU=function(e,t,n){return t.clients.forEach((function(t,r){for(var i=e.doc.store.clients.get(r),o=0;o<t.length;o++){var a=t[o];SK(e,i,a.clock,a.len,n)}}))},IU=function(e,t){var n=e.clients.get(t.client);return void 0!==n&&null!==function(e,t){for(var n=0,r=e.length-1;n<=r;){var i=JB((n+r)/2),o=e[i],a=o.clock;if(a<=t){if(t<a+o.len)return i;n=i+1}else r=i-1}return null}(n,t.clock)},jU=function(e){e.clients.forEach((function(e){var t,n;for(e.sort((function(e,t){return e.clock-t.clock})),t=1,n=1;t<e.length;t++){var r=e[n-1],i=e[t];r.clock+r.len>=i.clock?r.len=tF(r.len,i.clock+i.len-r.clock):(n<t&&(e[n]=i),n++)}e.length=n}))},MU=function(e){for(var t=new CU,n=function(n){e[n].clients.forEach((function(r,i){if(!t.clients.has(i)){for(var o=r.slice(),a=n+1;a<e.length;a++)CB(o,e[a].clients.get(i)||[]);t.clients.set(i,o)}}))},r=0;r<e.length;r++)n(r);return jU(t),t},AU=function(e,t,n,r){lB(e.clients,t,(function(){return[]})).push(new EU(n,r))},TU=function(){return new CU},OU=function(e){var t=TU();return e.clients.forEach((function(e,n){for(var r=[],i=0;i<e.length;i++){var o=e[i];if(o.deleted){var a=o.id.clock,s=o.length;if(i+1<e.length)for(var u=e[i+1];i+1<e.length&&u.deleted;u=e[1+ ++i])s+=u.length;r.push(new EU(a,s))}}r.length>0&&t.clients.set(n,r)})),t},NU=function(e,t){gF(e.restEncoder,t.clients.size),PB(t.clients.entries()).sort((function(e,t){return t[0]-e[0]})).forEach((function(t){var n=l(t,2),r=n[0],i=n[1];e.resetDsCurVal(),gF(e.restEncoder,r);var o=i.length;gF(e.restEncoder,o);for(var a=0;a<o;a++){var s=i[a];e.writeDsClock(s.clock),e.writeDsLen(s.len)}}))},RU=function(e){for(var t=new CU,n=VF(e.restDecoder),r=0;r<n;r++){e.resetDsCurVal();var i=VF(e.restDecoder),o=VF(e.restDecoder);if(o>0)for(var a=lB(t.clients,i,(function(){return[]})),s=0;s<o;s++)a.push(new EU(e.readDsClock(),e.readDsLen()))}return t},LU=function(e,t,n){for(var r=new CU,i=VF(e.restDecoder),o=0;o<i;o++){e.resetDsCurVal();for(var a=VF(e.restDecoder),s=VF(e.restDecoder),u=n.clients.get(a)||[],l=gK(n,a),c=0;c<s;c++){var d=e.readDsClock(),f=d+e.readDsLen();if(d<l){l<f&&AU(r,a,l,f-l);var h=yK(u,d),p=u[h];for(!p.deleted&&p.id.clock<d&&(u.splice(h+1,0,iW(t,p,d-p.id.clock)),h++);h<u.length&&(p=u[h++]).id.clock<f;)p.deleted||(f<p.id.clock+p.length&&u.splice(h,0,iW(t,p,f-p.id.clock)),p.delete(t))}else AU(r,a,d,f-d)}}if(r.clients.size>0){var v=new YU;return gF(v.restEncoder,0),NU(v,r),v.toUint8Array()}return null},DU=tU,zU=function(e){xt(n,e);var t=Et(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.guid,o=void 0===i?nU.replace(/[018]/g,(function(e){return(e^tU()&15>>e/4).toString(16)})):i,a=r.collectionid,s=void 0===a?null:a,u=r.gc,l=void 0===u||u,c=r.gcFilter,d=void 0===c?function(){return!0}:c,f=r.meta,h=void 0===f?null:f,p=r.autoLoad,v=void 0!==p&&p,g=r.shouldLoad,m=void 0===g||g;ne(this,n),(e=t.call(this)).gc=l,e.gcFilter=d,e.clientID=DU(),e.guid=o,e.collectionid=s,e.share=new Map,e.store=new pK,e._transaction=null,e._transactionCleanups=[],e.subdocs=new Set,e._item=null,e.shouldLoad=m,e.autoLoad=v,e.meta=h,e.isLoaded=!1,e.isSynced=!1,e.whenLoaded=rU((function(t){e.on("load",(function(){e.isLoaded=!0,t(_t(e))}))}));var y=function(){return rU((function(t){e.on("sync",(function n(r){void 0!==r&&!0!==r||(e.off("sync",n),t())}))}))};return e.on("sync",(function(t){!1===t&&e.isSynced&&(e.whenSynced=y()),e.isSynced=void 0===t||!0===t,e.isLoaded||e.emit("load",[])})),e.whenSynced=y(),e}return oe(n,[{key:"load",value:function(){var e=this,t=this._item;null===t||this.shouldLoad||AK(t.parent.doc,(function(t){t.subdocsLoaded.add(e)}),null,!0),this.shouldLoad=!0}},{key:"getSubdocs",value:function(){return this.subdocs}},{key:"getSubdocGuids",value:function(){return new Set(PB(this.subdocs).map((function(e){return e.guid})))}},{key:"transact",value:function(e){return AK(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)}},{key:"get",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:JK,r=lB(this.share,e,(function(){var e=new n;return e._integrate(t,null),e})),i=r.constructor;if(n!==JK&&i!==n){if(i===JK){var o=new n;o._map=r._map,r._map.forEach((function(e){for(;null!==e;e=e.left)e.parent=o})),o._start=r._start;for(var a=o._start;null!==a;a=a.right)a.parent=o;return o._length=r._length,this.share.set(e,o),o._integrate(this,null),o}throw new Error("Type with the name ".concat(e," has already been defined with a different constructor"))}return r}},{key:"getArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.get(e,vV)}},{key:"getText",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.get(e,AV)}},{key:"getMap",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.get(e,mV)}},{key:"getXmlFragment",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.get(e,OV)}},{key:"toJSON",value:function(){var e={};return this.share.forEach((function(t,n){e[n]=t.toJSON()})),e}},{key:"destroy",value:function(){var e=this;PB(this.subdocs).forEach((function(e){return e.destroy()}));var t=this._item;if(null!==t){this._item=null;var r=t.content;r.doc=new n(mt(mt({guid:this.guid},r.opts),{},{shouldLoad:!1})),r.doc._item=t,AK(t.parent.doc,(function(n){var i=r.doc;t.deleted||n.subdocsAdded.add(i),n.subdocsRemoved.add(e)}),null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),Gd(kt(n.prototype),"destroy",this).call(this)}},{key:"on",value:function(e,t){Gd(kt(n.prototype),"on",this).call(this,e,t)}},{key:"off",value:function(e,t){Gd(kt(n.prototype),"off",this).call(this,e,t)}}]),n}(ZF),BU=function(){function e(t){ne(this,e),this.restDecoder=t}return oe(e,[{key:"resetDsCurVal",value:function(){}},{key:"readDsClock",value:function(){return VF(this.restDecoder)}},{key:"readDsLen",value:function(){return VF(this.restDecoder)}}]),e}(),FU=function(e){xt(n,e);var t=Et(n);function n(){return ne(this,n),t.apply(this,arguments)}return oe(n,[{key:"readLeftID",value:function(){return uK(VF(this.restDecoder),VF(this.restDecoder))}},{key:"readRightID",value:function(){return uK(VF(this.restDecoder),VF(this.restDecoder))}},{key:"readClient",value:function(){return VF(this.restDecoder)}},{key:"readInfo",value:function(){return KF(this.restDecoder)}},{key:"readString",value:function(){return HF(this.restDecoder)}},{key:"readParentInfo",value:function(){return 1===VF(this.restDecoder)}},{key:"readTypeRef",value:function(){return VF(this.restDecoder)}},{key:"readLen",value:function(){return VF(this.restDecoder)}},{key:"readAny",value:function(){return XF(this.restDecoder)}},{key:"readBuf",value:function(){return function(e){var t=KB(e.byteLength);return t.set(e),t}(UF(this.restDecoder))}},{key:"readJSON",value:function(){return JSON.parse(HF(this.restDecoder))}},{key:"readKey",value:function(){return HF(this.restDecoder)}}]),n}(BU),UU=function(){function e(t){ne(this,e),this.dsCurrVal=0,this.restDecoder=t}return oe(e,[{key:"resetDsCurVal",value:function(){this.dsCurrVal=0}},{key:"readDsClock",value:function(){return this.dsCurrVal+=VF(this.restDecoder),this.dsCurrVal}},{key:"readDsLen",value:function(){var e=VF(this.restDecoder)+1;return this.dsCurrVal+=e,e}}]),e}(),KU=function(e){xt(n,e);var t=Et(n);function n(e){var r;return ne(this,n),(r=t.call(this,e)).keys=[],VF(e),r.keyClockDecoder=new QF(UF(e)),r.clientDecoder=new GF(UF(e)),r.leftClockDecoder=new QF(UF(e)),r.rightClockDecoder=new QF(UF(e)),r.infoDecoder=new $F(UF(e),KF),r.stringDecoder=new JF(UF(e)),r.parentInfoDecoder=new $F(UF(e),KF),r.typeRefDecoder=new GF(UF(e)),r.lenDecoder=new GF(UF(e)),r}return oe(n,[{key:"readLeftID",value:function(){return new aK(this.clientDecoder.read(),this.leftClockDecoder.read())}},{key:"readRightID",value:function(){return new aK(this.clientDecoder.read(),this.rightClockDecoder.read())}},{key:"readClient",value:function(){return this.clientDecoder.read()}},{key:"readInfo",value:function(){return this.infoDecoder.read()}},{key:"readString",value:function(){return this.stringDecoder.read()}},{key:"readParentInfo",value:function(){return 1===this.parentInfoDecoder.read()}},{key:"readTypeRef",value:function(){return this.typeRefDecoder.read()}},{key:"readLen",value:function(){return this.lenDecoder.read()}},{key:"readAny",value:function(){return XF(this.restDecoder)}},{key:"readBuf",value:function(){return UF(this.restDecoder)}},{key:"readJSON",value:function(){return XF(this.restDecoder)}},{key:"readKey",value:function(){var e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];var t=this.stringDecoder.read();return this.keys.push(t),t}}]),n}(UU),VU=function(){function e(){ne(this,e),this.restEncoder=dF()}return oe(e,[{key:"toUint8Array",value:function(){return hF(this.restEncoder)}},{key:"resetDsCurVal",value:function(){}},{key:"writeDsClock",value:function(e){gF(this.restEncoder,e)}},{key:"writeDsLen",value:function(e){gF(this.restEncoder,e)}}]),e}(),WU=function(e){xt(n,e);var t=Et(n);function n(){return ne(this,n),t.apply(this,arguments)}return oe(n,[{key:"writeLeftID",value:function(e){gF(this.restEncoder,e.client),gF(this.restEncoder,e.clock)}},{key:"writeRightID",value:function(e){gF(this.restEncoder,e.client),gF(this.restEncoder,e.clock)}},{key:"writeClient",value:function(e){gF(this.restEncoder,e)}},{key:"writeInfo",value:function(e){vF(this.restEncoder,e)}},{key:"writeString",value:function(e){wF(this.restEncoder,e)}},{key:"writeParentInfo",value:function(e){gF(this.restEncoder,e?1:0)}},{key:"writeTypeRef",value:function(e){gF(this.restEncoder,e)}},{key:"writeLen",value:function(e){gF(this.restEncoder,e)}},{key:"writeAny",value:function(e){EF(this.restEncoder,e)}},{key:"writeBuf",value:function(e){kF(this.restEncoder,e)}},{key:"writeJSON",value:function(e){wF(this.restEncoder,JSON.stringify(e))}},{key:"writeKey",value:function(e){wF(this.restEncoder,e)}}]),n}(VU),HU=function(){function e(){ne(this,e),this.restEncoder=dF(),this.dsCurrVal=0}return oe(e,[{key:"toUint8Array",value:function(){return hF(this.restEncoder)}},{key:"resetDsCurVal",value:function(){this.dsCurrVal=0}},{key:"writeDsClock",value:function(e){var t=e-this.dsCurrVal;this.dsCurrVal=e,gF(this.restEncoder,t)}},{key:"writeDsLen",value:function(e){0===e&&NF(),gF(this.restEncoder,e-1),this.dsCurrVal+=e}}]),e}(),YU=function(e){xt(n,e);var t=Et(n);function n(){var e;return ne(this,n),(e=t.call(this)).keyMap=new Map,e.keyClock=0,e.keyClockEncoder=new MF,e.clientEncoder=new IF,e.leftClockEncoder=new MF,e.rightClockEncoder=new MF,e.infoEncoder=new CF(vF),e.stringEncoder=new AF,e.parentInfoEncoder=new CF(vF),e.typeRefEncoder=new IF,e.lenEncoder=new IF,e}return oe(n,[{key:"toUint8Array",value:function(){var e=dF();return gF(e,0),kF(e,this.keyClockEncoder.toUint8Array()),kF(e,this.clientEncoder.toUint8Array()),kF(e,this.leftClockEncoder.toUint8Array()),kF(e,this.rightClockEncoder.toUint8Array()),kF(e,hF(this.infoEncoder)),kF(e,this.stringEncoder.toUint8Array()),kF(e,hF(this.parentInfoEncoder)),kF(e,this.typeRefEncoder.toUint8Array()),kF(e,this.lenEncoder.toUint8Array()),xF(e,hF(this.restEncoder)),hF(e)}},{key:"writeLeftID",value:function(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}},{key:"writeRightID",value:function(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}},{key:"writeClient",value:function(e){this.clientEncoder.write(e)}},{key:"writeInfo",value:function(e){this.infoEncoder.write(e)}},{key:"writeString",value:function(e){this.stringEncoder.write(e)}},{key:"writeParentInfo",value:function(e){this.parentInfoEncoder.write(e?1:0)}},{key:"writeTypeRef",value:function(e){this.typeRefEncoder.write(e)}},{key:"writeLen",value:function(e){this.lenEncoder.write(e)}},{key:"writeAny",value:function(e){EF(this.restEncoder,e)}},{key:"writeBuf",value:function(e){kF(this.restEncoder,e)}},{key:"writeJSON",value:function(e){EF(this.restEncoder,e)}},{key:"writeKey",value:function(e){var t=this.keyMap.get(e);void 0===t?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(t)}}]),n}(HU),qU=function(e,t,n){var r=new Map;n.forEach((function(e,n){gK(t,n)>e&&r.set(n,e)})),vK(t).forEach((function(e,t){n.has(t)||r.set(t,0)})),gF(e.restEncoder,r.size),PB(r.entries()).sort((function(e,t){return t[0]-e[0]})).forEach((function(n){var r=l(n,2),i=r[0],o=r[1];!function(e,t,n,r){r=tF(r,t[0].id.clock);var i=yK(t,r);gF(e.restEncoder,t.length-i),e.writeClient(n),gF(e.restEncoder,r);var o=t[i];o.write(e,r-o.id.clock);for(var a=i+1;a<t.length;a++)t[a].write(e,0)}(e,t.clients.get(i),i,o)}))},XU=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new KU(e);return AK(t,(function(e){e.local=!1;var t=!1,n=e.doc,i=n.store,o=function(e,t){for(var n=sB(),r=VF(e.restDecoder),i=0;i<r;i++){var o=VF(e.restDecoder),a=new Array(o),s=e.readClient(),u=VF(e.restDecoder);n.set(s,{i:0,refs:a});for(var l=0;l<o;l++){var c=e.readInfo();switch(31&c){case 0:var d=e.readLen();a[l]=new BV(uK(s,u),d),u+=d;break;case 10:var f=VF(e.restDecoder);a[l]=new uW(uK(s,u),f),u+=f;break;default:var h=0===(192&c),p=new oW(uK(s,u),null,(c&oF)===oF?e.readLeftID():null,null,(c&iF)===iF?e.readRightID():null,h?e.readParentInfo()?t.get(e.readString()):e.readLeftID():null,h&&32===(32&c)?e.readString():null,aW(e,c));a[l]=p,u+=p.length}}}return n}(r,n),a=function(e,t,n){var r=[],i=PB(n.keys()).sort((function(e,t){return e-t}));if(0===i.length)return null;var o=function(){if(0===i.length)return null;for(var e=n.get(i[i.length-1]);e.refs.length===e.i;){if(i.pop(),!(i.length>0))return null;e=n.get(i[i.length-1])}return e},a=o();if(null===a&&0===r.length)return null;for(var s=new pK,u=new Map,l=function(e,t){var n=u.get(e);(null==n||n>t)&&u.set(e,t)},c=a.refs[a.i++],d=new Map,f=function(){for(var e=function(){var e=o[t],r=e.id.client,a=n.get(r);a?(a.i--,s.clients.set(r,a.refs.slice(a.i)),n.delete(r),a.i=0,a.refs=[]):s.clients.set(r,[e]),i=i.filter((function(e){return e!==r}))},t=0,o=r;t<o.length;t++)e();r.length=0};;){if(c.constructor!==uW){var h=lB(d,c.id.client,(function(){return gK(t,c.id.client)}))-c.id.clock;if(h<0)r.push(c),l(c.id.client,c.id.clock-1),f();else{var p=c.getMissing(e,t);if(null!==p){r.push(c);var v=n.get(p)||{refs:[],i:0};if(v.refs.length!==v.i){c=v.refs[v.i++];continue}l(p,gK(t,p)),f()}else(0===h||h<c.length)&&(c.integrate(e,h),d.set(c.id.client,c.id.clock+c.length))}}if(r.length>0)c=r.pop();else if(null!==a&&a.i<a.refs.length)c=a.refs[a.i++];else{if(null===(a=o()))break;c=a.refs[a.i++]}}if(s.clients.size>0){var g=new YU;return qU(g,s,new Map),gF(g.restEncoder,0),{missing:u,update:g.toUint8Array()}}return null}(e,i,o),s=i.pendingStructs;if(s){var u,c=w(s.missing);try{for(c.s();!(u=c.n()).done;){var d=l(u.value,2),f=d[0];if(d[1]<gK(i,f)){t=!0;break}}}catch(NG){c.e(NG)}finally{c.f()}if(a){var h,p=w(a.missing);try{for(p.s();!(h=p.n()).done;){var v=l(h.value,2),g=v[0],m=v[1],y=s.missing.get(g);(null==y||y>m)&&s.missing.set(g,m)}}catch(NG){p.e(NG)}finally{p.f()}s.update=DK([s.update,a.update])}}else i.pendingStructs=a;var b=LU(r,e,i);if(i.pendingDs){var x=new KU(zF(i.pendingDs));VF(x.restDecoder);var k=LU(x,e,i);i.pendingDs=b&&k?DK([b,k]):b||k}else i.pendingDs=b;if(t){var S=i.pendingStructs.update;i.pendingStructs=null,$U(e.doc,S)}}),n,!1)},$U=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:KU,i=zF(t);XU(i,e,n,new r(i))},GU=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint8Array([0]),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new YU;!function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map;qU(e,t.store,n),NU(e,OU(t.store))}(n,e,JU(t));var r=[n.toUint8Array()];if(e.store.pendingDs&&r.push(e.store.pendingDs),e.store.pendingStructs&&r.push(zK(e.store.pendingStructs.update,t)),r.length>1){if(n.constructor===WU)return RK(r.map((function(e,t){return 0===t?e:VK(e)})));if(n.constructor===YU)return DK(r)}return r[0]},QU=function(e){for(var t=new Map,n=VF(e.restDecoder),r=0;r<n;r++){var i=VF(e.restDecoder),o=VF(e.restDecoder);t.set(i,o)}return t},JU=function(e){return QU(new BU(zF(e)))},ZU=function(e,t){return gF(e.restEncoder,t.size),PB(t.entries()).sort((function(e,t){return t[0]-e[0]})).forEach((function(t){var n=l(t,2),r=n[0],i=n[1];gF(e.restEncoder,r),gF(e.restEncoder,i)})),e},eK=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new HU;return e instanceof Map?ZU(t,e):function(e,t){ZU(e,vK(t.store))}(t,e),t.toUint8Array()},tK=oe((function e(){ne(this,e),this.l=[]})),nK=function(){return new tK},rK=function(e,t){return e.l.push(t)},iK=function(e,t){var n=e.l,r=n.length;e.l=n.filter((function(e){return t!==e})),r===e.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},oK=function(e,t,n){return TB(e.l,[t,n])},aK=oe((function e(t,n){ne(this,e),this.client=t,this.clock=n})),sK=function(e,t){return e===t||null!==e&&null!==t&&e.client===t.client&&e.clock===t.clock},uK=function(e,t){return new aK(e,t)},lK=function(e){var t,n=w(e.doc.share.entries());try{for(n.s();!(t=n.n()).done;){var r=l(t.value,2),i=r[0];if(r[1]===e)return i}}catch(NG){n.e(NG)}finally{n.f()}throw NF()},cK=oe((function e(t,n){ne(this,e),this.ds=t,this.sv=n})),dK=function(e,t){return new cK(e,t)},fK=(dK(TU(),new Map),function(e,t){return void 0===t?!e.deleted:t.sv.has(e.id.client)&&(t.sv.get(e.id.client)||0)>e.id.clock&&!IU(t.ds,e.id)}),hK=function e(t,n){var r=lB(t.meta,e,cB),i=t.doc.store;r.has(n)||(n.sv.forEach((function(e,n){e<gK(i,n)&&xK(t,uK(n,e))})),PU(t,n.ds,(function(e){})),r.add(n))},pK=oe((function e(){ne(this,e),this.clients=new Map,this.pendingStructs=null,this.pendingDs=null})),vK=function(e){var t=new Map;return e.clients.forEach((function(e,n){var r=e[e.length-1];t.set(n,r.id.clock+r.length)})),t},gK=function(e,t){var n=e.clients.get(t);if(void 0===n)return 0;var r=n[n.length-1];return r.id.clock+r.length},mK=function(e,t){var n=e.clients.get(t.id.client);if(void 0===n)n=[],e.clients.set(t.id.client,n);else{var r=n[n.length-1];if(r.id.clock+r.length!==t.id.clock)throw NF()}n.push(t)},yK=function(e,t){var n=0,r=e.length-1,i=e[r],o=i.id.clock;if(o===t)return r;for(var a=JB(t/(o+i.length-1)*r);n<=r;){if((o=(i=e[a]).id.clock)<=t){if(t<o+i.length)return a;n=a+1}else r=a-1;a=JB((n+r)/2)}throw NF()},bK=function(e,t){var n=e.clients.get(t.client);return n[yK(n,t.clock)]},wK=function(e,t,n){var r=yK(t,n),i=t[r];return i.id.clock<n&&i instanceof oW?(t.splice(r+1,0,iW(e,i,n-i.id.clock)),r+1):r},xK=function(e,t){var n=e.doc.store.clients.get(t.client);return n[wK(e,n,t.clock)]},kK=function(e,t,n){var r=t.clients.get(n.client),i=yK(r,n.clock),o=r[i];return n.clock!==o.id.clock+o.length-1&&o.constructor!==BV&&r.splice(i+1,0,iW(e,o,n.clock-o.id.clock+1)),o},SK=function(e,t,n,r,i){if(0!==r){var o,a=n+r,s=wK(e,t,n);do{a<(o=t[s++]).id.clock+o.length&&wK(e,t,a),i(o)}while(s<t.length&&t[s].id.clock<a)}},_K=oe((function e(t,n,r){ne(this,e),this.doc=t,this.deleteSet=new CU,this.beforeState=vK(t.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=n,this.meta=new Map,this.local=r,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set})),EK=function(e,t){return!(0===t.deleteSet.clients.size&&!function(e,t){var n,r=w(e);try{for(r.s();!(n=r.n()).done;){var i=l(n.value,2),o=i[0];if(t(i[1],o))return!0}}catch(NG){r.e(NG)}finally{r.f()}return!1}(t.afterState,(function(e,n){return t.beforeState.get(n)!==e})))&&(jU(t.deleteSet),function(e,t){qU(e,t.doc.store,t.beforeState)}(e,t),NU(e,t.deleteSet),!0)},CK=function(e,t,n){var r=t._item;(null===r||r.id.clock<(e.beforeState.get(r.id.client)||0)&&!r.deleted)&&lB(e.changed,t,cB).add(n)},PK=function(e,t){var n=e[t-1],r=e[t];n.deleted===r.deleted&&n.constructor===r.constructor&&n.mergeWith(r)&&(e.splice(t,1),r instanceof oW&&null!==r.parentSub&&r.parent._map.get(r.parentSub)===r&&r.parent._map.set(r.parentSub,n))},IK=function(e,t,n){var r,i=w(e.clients.entries());try{for(i.s();!(r=i.n()).done;)for(var o=l(r.value,2),a=o[0],s=o[1],u=t.clients.get(a),c=s.length-1;c>=0;c--)for(var d=s[c],f=d.clock+d.len,h=yK(u,d.clock),p=u[h];h<u.length&&p.id.clock<f;p=u[++h]){var v=u[h];if(d.clock+d.len<=v.id.clock)break;v instanceof oW&&v.deleted&&!v.keep&&n(v)&&v.gc(t,!1)}}catch(NG){i.e(NG)}finally{i.f()}},jK=function(e,t){e.clients.forEach((function(e,n){for(var r=t.clients.get(n),i=e.length-1;i>=0;i--)for(var o=e[i],a=eF(r.length-1,1+yK(r,o.clock+o.len-1)),s=r[a];a>0&&s.id.clock>=o.clock;s=r[--a])PK(r,a)}))},MK=function e(t,n){if(n<t.length){var r=t[n],i=r.doc,o=i.store,a=r.deleteSet,s=r._mergeStructs;try{jU(a),r.afterState=vK(r.doc.store),i.emit("beforeObserverCalls",[r,i]);var u=[];r.changed.forEach((function(e,t){return u.push((function(){null!==t._item&&t._item.deleted||t._callObserver(r,e)}))})),u.push((function(){r.changedParentTypes.forEach((function(e,t){return u.push((function(){null!==t._item&&t._item.deleted||((e=e.filter((function(e){return null===e.target._item||!e.target._item.deleted}))).forEach((function(e){e.currentTarget=t})),e.sort((function(e,t){return e.path.length-t.path.length})),oK(t._dEH,e,r))}))})),u.push((function(){return i.emit("afterTransaction",[r,i])}))})),TB(u,[])}finally{i.gc&&IK(a,o,i.gcFilter),jK(a,o),r.afterState.forEach((function(e,t){var n=r.beforeState.get(t)||0;if(n!==e)for(var i=o.clients.get(t),a=tF(yK(i,n),1),s=i.length-1;s>=a;s--)PK(i,s)}));for(var l=0;l<s.length;l++){var c=s[l].id,d=c.client,f=c.clock,h=o.clients.get(d),p=yK(h,f);p+1<h.length&&PK(h,p+1),p>0&&PK(h,p)}if(r.local||r.afterState.get(i.clientID)===r.beforeState.get(i.clientID)||(wU(gU,lU,"[yjs] ",cU,pU,"Changed the client-id because another client seems to be using it."),i.clientID=DU()),i.emit("afterTransactionCleanup",[r,i]),i._observers.has("update")){var v=new WU;EK(v,r)&&i.emit("update",[v.toUint8Array(),r.origin,i,r])}if(i._observers.has("updateV2")){var g=new YU;EK(g,r)&&i.emit("updateV2",[g.toUint8Array(),r.origin,i,r])}var m=r.subdocsAdded,y=r.subdocsLoaded,b=r.subdocsRemoved;(m.size>0||b.size>0||y.size>0)&&(m.forEach((function(e){e.clientID=i.clientID,null==e.collectionid&&(e.collectionid=i.collectionid),i.subdocs.add(e)})),b.forEach((function(e){return i.subdocs.delete(e)})),i.emit("subdocs",[{loaded:y,added:m,removed:b},i,r]),b.forEach((function(e){return e.destroy()}))),t.length<=n+1?(i._transactionCleanups=[],i.emit("afterAllTransactions",[i,t])):e(t,n+1)}}},AK=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=e._transactionCleanups,o=!1,a=null;null===e._transaction&&(o=!0,e._transaction=new _K(e,n,r),i.push(e._transaction),1===i.length&&e.emit("beforeAllTransactions",[e]),e.emit("beforeTransaction",[e._transaction,e]));try{a=t(e._transaction)}finally{if(o){var s=e._transaction===i[0];e._transaction=null,s&&MK(i,0)}}return a};function TK(e){var t,n,r,i,o,a,s,u,l,c,d;return m().wrap((function(f){for(;;)switch(f.prev=f.next){case 0:t=VF(e.restDecoder),n=0;case 2:if(!(n<t)){f.next=34;break}r=VF(e.restDecoder),i=e.readClient(),o=VF(e.restDecoder),a=0;case 7:if(!(a<r)){f.next=31;break}if(10!==(s=e.readInfo())){f.next=16;break}return u=VF(e.restDecoder),f.next=13,new uW(uK(i,o),u);case 13:o+=u,f.next=28;break;case 16:if(0===(31&s)){f.next=24;break}return l=0===(192&s),c=new oW(uK(i,o),null,(s&oF)===oF?e.readLeftID():null,null,(s&iF)===iF?e.readRightID():null,l?e.readParentInfo()?e.readString():e.readLeftID():null,l&&32===(32&s)?e.readString():null,aW(e,s)),f.next=21,c;case 21:o+=c.length,f.next=28;break;case 24:return d=e.readLen(),f.next=27,new BV(uK(i,o),d);case 27:o+=d;case 28:a++,f.next=7;break;case 31:n++,f.next=2;break;case 34:case"end":return f.stop()}}),_U)}var OK=function(){function e(t,n){ne(this,e),this.gen=TK(t),this.curr=null,this.done=!1,this.filterSkips=n,this.next()}return oe(e,[{key:"next",value:function(){do{this.curr=this.gen.next().value||null}while(this.filterSkips&&null!==this.curr&&this.curr.constructor===uW);return this.curr}}]),e}(),NK=oe((function e(t){ne(this,e),this.currClient=0,this.startClock=0,this.written=0,this.encoder=t,this.clientStructs=[]})),RK=function(e){return DK(e,FU,WU)},LK=function(e,t){if(e.constructor===BV){var n=e.id,r=n.client,i=n.clock;return new BV(uK(r,i+t),e.length-t)}if(e.constructor===uW){var o=e.id,a=o.client,s=o.clock;return new uW(uK(a,s+t),e.length-t)}var u=e,l=u.id,c=l.client,d=l.clock;return new oW(uK(c,d+t),null,uK(c,d+t-1),null,u.rightOrigin,u.parent,u.parentSub,u.content.splice(t))},DK=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:KU,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:YU;if(1===e.length)return e[0];for(var r=e.map((function(e){return new t(zF(e))})),i=r.map((function(e){return new OK(e,!0)})),o=null,a=new n,s=new NK(a);(i=i.filter((function(e){return null!==e.curr}))).sort((function(e,t){if(e.curr.id.client===t.curr.id.client){var n=e.curr.id.clock-t.curr.id.clock;return 0===n?e.curr.constructor===t.curr.constructor?0:e.curr.constructor===uW?1:-1:n}return t.curr.id.client-e.curr.id.client})),0!==i.length;){var u=i[0],l=u.curr.id.client;if(null!==o){for(var c=u.curr,d=!1;null!==c&&c.id.clock+c.length<=o.struct.id.clock+o.struct.length&&c.id.client>=o.struct.id.client;)c=u.next(),d=!0;if(null===c||c.id.client!==l||d&&c.id.clock>o.struct.id.clock+o.struct.length)continue;if(l!==o.struct.id.client)FK(s,o.struct,o.offset),o={struct:c,offset:0},u.next();else if(o.struct.id.clock+o.struct.length<c.id.clock)if(o.struct.constructor===uW)o.struct.length=c.id.clock+c.length-o.struct.id.clock;else{FK(s,o.struct,o.offset);var f=c.id.clock-o.struct.id.clock-o.struct.length;o={struct:new uW(uK(l,o.struct.id.clock+o.struct.length),f),offset:0}}else{var h=o.struct.id.clock+o.struct.length-c.id.clock;h>0&&(o.struct.constructor===uW?o.struct.length-=h:c=LK(c,h)),o.struct.mergeWith(c)||(FK(s,o.struct,o.offset),o={struct:c,offset:0},u.next())}}else o={struct:u.curr,offset:0},u.next();for(var p=u.curr;null!==p&&p.id.client===l&&p.id.clock===o.struct.id.clock+o.struct.length&&p.constructor!==uW;p=u.next())FK(s,o.struct,o.offset),o={struct:p,offset:0}}null!==o&&(FK(s,o.struct,o.offset),o=null),UK(s);var v=r.map((function(e){return RU(e)})),g=MU(v);return NU(a,g),a.toUint8Array()},zK=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:KU,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:YU,i=JU(t),o=new r,a=new NK(o),s=new n(zF(e)),u=new OK(s,!1);u.curr;){var l=u.curr,c=l.id.client,d=i.get(c)||0;if(u.curr.constructor!==uW)if(l.id.clock+l.length>d)for(FK(a,l,tF(d-l.id.clock,0)),u.next();u.curr&&u.curr.id.client===c;)FK(a,u.curr,0),u.next();else for(;u.curr&&u.curr.id.client===c&&u.curr.id.clock+u.curr.length<=d;)u.next();else u.next()}UK(a);var f=RU(s);return NU(o,f),o.toUint8Array()},BK=function(e){e.written>0&&(e.clientStructs.push({written:e.written,restEncoder:hF(e.encoder.restEncoder)}),e.encoder.restEncoder=dF(),e.written=0)},FK=function(e,t,n){e.written>0&&e.currClient!==t.id.client&&BK(e),0===e.written&&(e.currClient=t.id.client,e.encoder.writeClient(t.id.client),gF(e.encoder.restEncoder,t.id.clock+n)),t.write(e.encoder,n),e.written++},UK=function(e){BK(e);var t=e.encoder.restEncoder;gF(t,e.clientStructs.length);for(var n=0;n<e.clientStructs.length;n++){var r=e.clientStructs[n];gF(t,r.written),xF(t,r.restEncoder)}},KK=function(e,t,n){for(var r=new t(zF(e)),i=new OK(r,!1),o=new n,a=new NK(o),s=i.curr;null!==s;s=i.next())FK(a,s,0);UK(a);var u=RU(r);return NU(o,u),o.toUint8Array()},VK=function(e){return KK(e,KU,WU)},WK=function(){function e(t,n){ne(this,e),this.target=t,this.currentTarget=t,this.transaction=n,this._changes=null,this._keys=null,this._delta=null}return oe(e,[{key:"path",get:function(){return HK(this.currentTarget,this.target)}},{key:"deletes",value:function(e){return IU(this.transaction.deleteSet,e.id)}},{key:"keys",get:function(){var e=this;if(null===this._keys){var t=new Map,n=this.target;this.transaction.changed.get(n).forEach((function(r){if(null!==r){var i,o,a=n._map.get(r);if(e.adds(a)){for(var s=a.left;null!==s&&e.adds(s);)s=s.left;if(e.deletes(a)){if(null===s||!e.deletes(s))return;i="delete",o=EB(s.content.getContent())}else null!==s&&e.deletes(s)?(i="update",o=EB(s.content.getContent())):(i="add",o=void 0)}else{if(!e.deletes(a))return;i="delete",o=EB(a.content.getContent())}t.set(r,{action:i,oldValue:o})}})),this._keys=t}return this._keys}},{key:"delta",get:function(){return this.changes.delta}},{key:"adds",value:function(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}},{key:"changes",get:function(){var e=this._changes;if(null===e){var t=this.target,n=cB(),r=cB(),i=[];if(e={added:n,deleted:r,delta:i,keys:this.keys},this.transaction.changed.get(t).has(null)){for(var o=null,a=function(){o&&i.push(o)},s=t._start;null!==s;s=s.right)s.deleted?this.deletes(s)&&!this.adds(s)&&(null!==o&&void 0!==o.delete||(a(),o={delete:0}),o.delete+=s.length,r.add(s)):this.adds(s)?(null!==o&&void 0!==o.insert||(a(),o={insert:[]}),o.insert=o.insert.concat(s.content.getContent()),n.add(s)):(null!==o&&void 0!==o.retain||(a(),o={retain:0}),o.retain+=s.length);null!==o&&void 0===o.retain&&a()}this._changes=e}return e}}]),e}(),HK=function(e,t){for(var n=[];null!==t._item&&t!==e;){if(null!==t._item.parentSub)n.unshift(t._item.parentSub);else{for(var r=0,i=t._item.parent._start;i!==t._item&&null!==i;)i.deleted||r++,i=i.right;n.unshift(r)}t=t._item.parent}return n},YK=0,qK=oe((function e(t,n){ne(this,e),t.marker=!0,this.p=t,this.index=n,this.timestamp=YK++})),XK=function(e,t,n){e.p.marker=!1,e.p=t,t.marker=!0,e.index=n,e.timestamp=YK++},$K=function(e,t){if(null===e._start||0===t||null===e._searchMarker)return null;var n=0===e._searchMarker.length?null:e._searchMarker.reduce((function(e,n){return ZB(t-e.index)<ZB(t-n.index)?e:n})),r=e._start,i=0;for(null!==n&&(r=n.p,i=n.index,function(e){e.timestamp=YK++}(n));null!==r.right&&i<t;){if(!r.deleted&&r.countable){if(t<i+r.length)break;i+=r.length}r=r.right}for(;null!==r.left&&i>t;)!(r=r.left).deleted&&r.countable&&(i-=r.length);for(;null!==r.left&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)!(r=r.left).deleted&&r.countable&&(i-=r.length);return null!==n&&ZB(n.index-i)<r.parent.length/80?(XK(n,r,i),n):function(e,t,n){if(e.length>=80){var r=e.reduce((function(e,t){return e.timestamp<t.timestamp?e:t}));return XK(r,t,n),r}var i=new qK(t,n);return e.push(i),i}(e._searchMarker,r,i)},GK=function(e,t,n){for(var r=e.length-1;r>=0;r--){var i=e[r];if(n>0){var o=i.p;for(o.marker=!1;o&&(o.deleted||!o.countable);)(o=o.left)&&!o.deleted&&o.countable&&(i.index-=o.length);if(null===o||!0===o.marker){e.splice(r,1);continue}i.p=o,o.marker=!0}(t<i.index||n>0&&t===i.index)&&(i.index=tF(t,i.index+n))}},QK=function(e,t,n){for(var r=e,i=t.changedParentTypes;lB(i,e,(function(){return[]})).push(n),null!==e._item;)e=e._item.parent;oK(r._eH,n,t)},JK=function(){function e(){ne(this,e),this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=nK(),this._dEH=nK(),this._searchMarker=null}return oe(e,[{key:"parent",get:function(){return this._item?this._item.parent:null}},{key:"_integrate",value:function(e,t){this.doc=e,this._item=t}},{key:"_copy",value:function(){throw OF()}},{key:"clone",value:function(){throw OF()}},{key:"_write",value:function(e){}},{key:"_first",get:function(){for(var e=this._start;null!==e&&e.deleted;)e=e.right;return e}},{key:"_callObserver",value:function(e,t){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}},{key:"observe",value:function(e){rK(this._eH,e)}},{key:"observeDeep",value:function(e){rK(this._dEH,e)}},{key:"unobserve",value:function(e){iK(this._eH,e)}},{key:"unobserveDeep",value:function(e){iK(this._dEH,e)}},{key:"toJSON",value:function(){}}]),e}(),ZK=function(e,t,n){t<0&&(t=e._length+t),n<0&&(n=e._length+n);for(var r=n-t,i=[],o=e._start;null!==o&&r>0;){if(o.countable&&!o.deleted){var a=o.content.getContent();if(a.length<=t)t-=a.length;else{for(var s=t;s<a.length&&r>0;s++)i.push(a[s]),r--;t=0}}o=o.right}return i},eV=function(e){for(var t=[],n=e._start;null!==n;){if(n.countable&&!n.deleted)for(var r=n.content.getContent(),i=0;i<r.length;i++)t.push(r[i]);n=n.right}return t},tV=function(e,t){for(var n=0,r=e._start;null!==r;){if(r.countable&&!r.deleted)for(var i=r.content.getContent(),o=0;o<i.length;o++)t(i[o],n++,e);r=r.right}},nV=function(e,t){var n=[];return tV(e,(function(r,i){n.push(t(r,i,e))})),n},rV=function(e,t){var n=$K(e,t),r=e._start;for(null!==n&&(r=n.p,t-=n.index);null!==r;r=r.right)if(!r.deleted&&r.countable){if(t<r.length)return r.content.getContent()[t];t-=r.length}},iV=function(e,t,n,r){var i=n,o=e.doc,a=o.clientID,s=o.store,u=null===n?t._start:n.right,l=[],c=function(){l.length>0&&((i=new oW(uK(a,gK(s,a)),i,i&&i.lastId,u,u&&u.id,t,null,new qV(l))).integrate(e,0),l=[])};r.forEach((function(n){if(null===n)l.push(n);else switch(n.constructor){case Number:case Object:case Boolean:case Array:case String:l.push(n);break;default:switch(c(),n.constructor){case Uint8Array:case ArrayBuffer:(i=new oW(uK(a,gK(s,a)),i,i&&i.lastId,u,u&&u.id,t,null,new FV(new Uint8Array(n)))).integrate(e,0);break;case zU:(i=new oW(uK(a,gK(s,a)),i,i&&i.lastId,u,u&&u.id,t,null,new VV(n))).integrate(e,0);break;default:if(!(n instanceof JK))throw new Error("Unexpected content type in insert operation");(i=new oW(uK(a,gK(s,a)),i,i&&i.lastId,u,u&&u.id,t,null,new rW(n))).integrate(e,0)}}})),c()},oV=TF("Length exceeded!"),aV=function(e,t,n,r){if(n>t._length)throw oV;if(0===n)return t._searchMarker&&GK(t._searchMarker,n,r.length),iV(e,t,null,r);var i=n,o=$K(t,n),a=t._start;for(null!==o&&(a=o.p,0===(n-=o.index)&&(n+=(a=a.prev)&&a.countable&&!a.deleted?a.length:0));null!==a;a=a.right)if(!a.deleted&&a.countable){if(n<=a.length){n<a.length&&xK(e,uK(a.id.client,a.id.clock+n));break}n-=a.length}return t._searchMarker&&GK(t._searchMarker,i,r.length),iV(e,t,a,r)},sV=function(e,t,n,r){if(0!==r){var i=n,o=r,a=$K(t,n),s=t._start;for(null!==a&&(s=a.p,n-=a.index);null!==s&&n>0;s=s.right)!s.deleted&&s.countable&&(n<s.length&&xK(e,uK(s.id.client,s.id.clock+n)),n-=s.length);for(;r>0&&null!==s;)s.deleted||(r<s.length&&xK(e,uK(s.id.client,s.id.clock+r)),s.delete(e),r-=s.length),s=s.right;if(r>0)throw oV;t._searchMarker&&GK(t._searchMarker,i,-o+r)}},uV=function(e,t,n){var r=t._map.get(n);void 0!==r&&r.delete(e)},lV=function(e,t,n,r){var i,o=t._map.get(n)||null,a=e.doc,s=a.clientID;if(null==r)i=new qV([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:i=new qV([r]);break;case Uint8Array:i=new FV(r);break;case zU:i=new VV(r);break;default:if(!(r instanceof JK))throw new Error("Unexpected content type");i=new rW(r)}new oW(uK(s,gK(a.store,s)),o,o&&o.lastId,null,null,t,n,i).integrate(e,0)},cV=function(e,t){var n=e._map.get(t);return void 0===n||n.deleted?void 0:n.content.getContent()[n.length-1]},dV=function(e){var t={};return e._map.forEach((function(e,n){e.deleted||(t[n]=e.content.getContent()[e.length-1])})),t},fV=function(e,t){var n=e._map.get(t);return void 0!==n&&!n.deleted},hV=function(e){return function(e,t){return kU((function(){var n;do{n=e.next()}while(!n.done&&!t(n.value));return n}))}(e.entries(),(function(e){return!e[1].deleted}))},pV=function(e){xt(n,e);var t=Et(n);function n(e,r){var i;return ne(this,n),(i=t.call(this,e,r))._transaction=r,i}return oe(n)}(WK),vV=function(e,t){xt(r,e);var n=Et(r);function r(){var e;return ne(this,r),(e=n.call(this))._prelimContent=[],e._searchMarker=[],e}return oe(r,[{key:"_integrate",value:function(e,t){Gd(kt(r.prototype),"_integrate",this).call(this,e,t),this.insert(0,this._prelimContent),this._prelimContent=null}},{key:"_copy",value:function(){return new r}},{key:"clone",value:function(){var e=new r;return e.insert(0,this.toArray().map((function(e){return e instanceof JK?e.clone():e}))),e}},{key:"length",get:function(){return null===this._prelimContent?this._length:this._prelimContent.length}},{key:"_callObserver",value:function(e,t){Gd(kt(r.prototype),"_callObserver",this).call(this,e,t),QK(this,e,new pV(this,e))}},{key:"insert",value:function(e,t){var n,r=this;null!==this.doc?AK(this.doc,(function(n){aV(n,r,e,t)})):(n=this._prelimContent).splice.apply(n,[e,0].concat(d(t)))}},{key:"push",value:function(e){var t,n=this;null!==this.doc?AK(this.doc,(function(t){!function(e,t,n){var r=(t._searchMarker||[]).reduce((function(e,t){return t.index>e.index?t:e}),{index:0,p:t._start}).p;if(r)for(;r.right;)r=r.right;iV(e,t,r,n)}(t,n,e)})):(t=this._prelimContent).push.apply(t,d(e))}},{key:"unshift",value:function(e){this.insert(0,e)}},{key:"delete",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;null!==this.doc?AK(this.doc,(function(r){sV(r,t,e,n)})):this._prelimContent.splice(e,n)}},{key:"get",value:function(e){return rV(this,e)}},{key:"toArray",value:function(){return eV(this)}},{key:"slice",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;return ZK(this,e,t)}},{key:"toJSON",value:function(){return this.map((function(e){return e instanceof JK?e.toJSON():e}))}},{key:"map",value:function(e){return nV(this,e)}},{key:"forEach",value:function(e){tV(this,e)}},{key:t,value:function(){return function(e){var t,n=e._start,r=null,i=0;return vt(t={},Symbol.iterator,(function(){return this})),vt(t,"next",(function(){if(null===r){for(;null!==n&&n.deleted;)n=n.right;if(null===n)return{done:!0,value:void 0};r=n.content.getContent(),i=0,n=n.right}var e=r[i++];return r.length<=i&&(r=null),{done:!1,value:e}})),t}(this)}},{key:"_write",value:function(e){e.writeTypeRef(GV)}}],[{key:"from",value:function(e){var t=new r;return t.push(e),t}}]),r}(JK,Symbol.iterator),gV=function(e){xt(n,e);var t=Et(n);function n(e,r,i){var o;return ne(this,n),(o=t.call(this,e,r)).keysChanged=i,o}return oe(n)}(WK),mV=function(e,t){xt(r,e);var n=Et(r);function r(e){var t;return ne(this,r),(t=n.call(this))._prelimContent=null,t._prelimContent=void 0===e?new Map:new Map(e),t}return oe(r,[{key:"_integrate",value:function(e,t){var n=this;Gd(kt(r.prototype),"_integrate",this).call(this,e,t),this._prelimContent.forEach((function(e,t){n.set(t,e)})),this._prelimContent=null}},{key:"_copy",value:function(){return new r}},{key:"clone",value:function(){var e=new r;return this.forEach((function(t,n){e.set(n,t instanceof JK?t.clone():t)})),e}},{key:"_callObserver",value:function(e,t){QK(this,e,new gV(this,e,t))}},{key:"toJSON",value:function(){var e={};return this._map.forEach((function(t,n){if(!t.deleted){var r=t.content.getContent()[t.length-1];e[n]=r instanceof JK?r.toJSON():r}})),e}},{key:"size",get:function(){return d(hV(this._map)).length}},{key:"keys",value:function(){return SU(hV(this._map),(function(e){return e[0]}))}},{key:"values",value:function(){return SU(hV(this._map),(function(e){return e[1].content.getContent()[e[1].length-1]}))}},{key:"entries",value:function(){return SU(hV(this._map),(function(e){return[e[0],e[1].content.getContent()[e[1].length-1]]}))}},{key:"forEach",value:function(e){var t=this;this._map.forEach((function(n,r){n.deleted||e(n.content.getContent()[n.length-1],r,t)}))}},{key:t,value:function(){return this.entries()}},{key:"delete",value:function(e){var t=this;null!==this.doc?AK(this.doc,(function(n){uV(n,t,e)})):this._prelimContent.delete(e)}},{key:"set",value:function(e,t){var n=this;return null!==this.doc?AK(this.doc,(function(r){lV(r,n,e,t)})):this._prelimContent.set(e,t),t}},{key:"get",value:function(e){return cV(this,e)}},{key:"has",value:function(e){return fV(this,e)}},{key:"clear",value:function(){var e=this;null!==this.doc?AK(this.doc,(function(t){e.forEach((function(e,n,r){uV(t,r,n)}))})):this._prelimContent.clear()}},{key:"_write",value:function(e){e.writeTypeRef(QV)}}]),r}(JK,Symbol.iterator),yV=function(e,t){return e===t||"object"===typeof e&&"object"===typeof t&&e&&t&&function(e,t){return e===t||MB(e)===MB(t)&&function(e,t){for(var n in e)if(!t(e[n],n))return!1;return!0}(e,(function(e,n){return(void 0!==e||AB(t,n))&&t[n]===e}))}(e,t)},bV=function(){function e(t,n,r,i){ne(this,e),this.left=t,this.right=n,this.index=r,this.currentAttributes=i}return oe(e,[{key:"forward",value:function(){if(null===this.right&&NF(),this.right.content.constructor===HV)this.right.deleted||SV(this.currentAttributes,this.right.content);else this.right.deleted||(this.index+=this.right.length);this.left=this.right,this.right=this.right.right}}]),e}(),wV=function(e,t,n){for(;null!==t.right&&n>0;){if(t.right.content.constructor===HV)t.right.deleted||SV(t.currentAttributes,t.right.content);else t.right.deleted||(n<t.right.length&&xK(e,uK(t.right.id.client,t.right.id.clock+n)),t.index+=t.right.length,n-=t.right.length);t.left=t.right,t.right=t.right.right}return t},xV=function(e,t,n){var r=new Map,i=$K(t,n);if(i){var o=new bV(i.p.left,i.p,i.index,r);return wV(e,o,n-i.index)}var a=new bV(null,t._start,0,r);return wV(e,a,n)},kV=function(e,t,n,r){for(;null!==n.right&&(!0===n.right.deleted||n.right.content.constructor===HV&&yV(r.get(n.right.content.key),n.right.content.value));)n.right.deleted||r.delete(n.right.content.key),n.forward();var i=e.doc,o=i.clientID;r.forEach((function(r,a){var s=n.left,u=n.right,l=new oW(uK(o,gK(i.store,o)),s,s&&s.lastId,u,u&&u.id,t,null,new HV(a,r));l.integrate(e,0),n.right=l,n.forward()}))},SV=function(e,t){var n=t.key,r=t.value;null===r?e.delete(n):e.set(n,r)},_V=function(e,t){for(;null!==e.right&&(e.right.deleted||e.right.content.constructor===HV&&yV(t[e.right.content.key]||null,e.right.content.value));)e.forward()},EV=function(e,t,n,r){var i=e.doc,o=i.clientID,a=new Map;for(var s in r){var u=r[s],l=n.currentAttributes.get(s)||null;if(!yV(l,u)){a.set(s,l);var c=n.left,d=n.right;n.right=new oW(uK(o,gK(i.store,o)),c,c&&c.lastId,d,d&&d.id,t,null,new HV(s,u)),n.right.integrate(e,0),n.forward()}}return a},CV=function(e,t,n,r,i){n.currentAttributes.forEach((function(e,t){void 0===i[t]&&(i[t]=null)}));var o=e.doc,a=o.clientID;_V(n,i);var s=EV(e,t,n,i),u=r.constructor===String?new XV(r):r instanceof JK?new rW(r):new WV(r),l=n.left,c=n.right,d=n.index;t._searchMarker&&GK(t._searchMarker,n.index,u.getLength()),(c=new oW(uK(a,gK(o.store,a)),l,l&&l.lastId,c,c&&c.id,t,null,u)).integrate(e,0),n.right=c,n.index=d,n.forward(),kV(e,t,n,s)},PV=function(e,t,n,r,i){var o=e.doc,a=o.clientID;_V(n,i);var s=EV(e,t,n,i);e:for(;null!==n.right&&(r>0||s.size>0&&(n.right.deleted||n.right.content.constructor===HV));){if(!n.right.deleted)if(n.right.content.constructor===HV){var u=n.right.content,l=u.key,c=u.value,d=i[l];if(void 0!==d){if(yV(d,c))s.delete(l);else{if(0===r)break e;s.set(l,c)}n.right.delete(e)}else n.currentAttributes.set(l,c)}else r<n.right.length&&xK(e,uK(n.right.id.client,n.right.id.clock+r)),r-=n.right.length;n.forward()}if(r>0){for(var f="";r>0;r--)f+="\n";n.right=new oW(uK(a,gK(o.store,a)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,t,null,new XV(f)),n.right.integrate(e,0),n.forward()}kV(e,t,n,s)},IV=function(e,t,n,r,i){for(var o=t,a=sB();o&&(!o.countable||o.deleted);){if(!o.deleted&&o.content.constructor===HV){var s=o.content;a.set(s.key,s)}o=o.right}for(var u=0,l=!1;t!==o;){if(n===t&&(l=!0),!t.deleted){var c=t.content;if(c.constructor===HV){var d=c.key,f=c.value,h=r.get(d)||null;a.get(d)===c&&h!==f||(t.delete(e),u++,l||(i.get(d)||null)!==f||h===f||(null===h?i.delete(d):i.set(d,h))),l||t.deleted||SV(i,c)}}t=t.right}return u},jV=function(e,t,n){for(var r=n,i=uB(t.currentAttributes),o=t.right;n>0&&null!==t.right;){if(!1===t.right.deleted)switch(t.right.content.constructor){case rW:case WV:case XV:n<t.right.length&&xK(e,uK(t.right.id.client,t.right.id.clock+n)),n-=t.right.length,t.right.delete(e)}t.forward()}o&&IV(e,o,t.right,i,t.currentAttributes);var a=(t.left||t.right).parent;return a._searchMarker&&GK(a._searchMarker,t.index,-r+n),t},MV=function(e){xt(n,e);var t=Et(n);function n(e,r,i){var o;return ne(this,n),(o=t.call(this,e,r)).childListChanged=!1,o.keysChanged=new Set,i.forEach((function(e){null===e?o.childListChanged=!0:o.keysChanged.add(e)})),o}return oe(n,[{key:"changes",get:function(){if(null===this._changes){var e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}},{key:"delta",get:function(){var e=this;if(null===this._delta){var t=this.target.doc,n=[];AK(t,(function(t){for(var r=new Map,i=new Map,o=e.target._start,a=null,s={},u="",l=0,c=0,d=function(){if(null!==a){var e;switch(a){case"delete":e={delete:c},c=0;break;case"insert":e={insert:u},r.size>0&&(e.attributes={},r.forEach((function(t,n){null!==t&&(e.attributes[n]=t)}))),u="";break;case"retain":if(e={retain:l},Object.keys(s).length>0)for(var t in e.attributes={},s)e.attributes[t]=s[t];l=0}n.push(e),a=null}};null!==o;){switch(o.content.constructor){case rW:case WV:e.adds(o)?e.deletes(o)||(d(),a="insert",u=o.content.getContent()[0],d()):e.deletes(o)?("delete"!==a&&(d(),a="delete"),c+=1):o.deleted||("retain"!==a&&(d(),a="retain"),l+=1);break;case XV:e.adds(o)?e.deletes(o)||("insert"!==a&&(d(),a="insert"),u+=o.content.str):e.deletes(o)?("delete"!==a&&(d(),a="delete"),c+=o.length):o.deleted||("retain"!==a&&(d(),a="retain"),l+=o.length);break;case HV:var f=o.content,h=f.key,p=f.value;if(e.adds(o)){if(!e.deletes(o)){var v=r.get(h)||null;yV(v,p)?null!==p&&o.delete(t):("retain"===a&&d(),yV(p,i.get(h)||null)?delete s[h]:s[h]=p)}}else if(e.deletes(o)){i.set(h,p);var g=r.get(h)||null;yV(g,p)||("retain"===a&&d(),s[h]=g)}else if(!o.deleted){i.set(h,p);var m=s[h];void 0!==m&&(yV(m,p)?null!==m&&o.delete(t):("retain"===a&&d(),null===p?delete s[h]:s[h]=p))}o.deleted||("insert"===a&&d(),SV(r,o.content))}o=o.right}for(d();n.length>0;){var y=n[n.length-1];if(void 0===y.retain||void 0!==y.attributes)break;n.pop()}})),this._delta=n}return this._delta}}]),n}(WK),AV=function(e){xt(n,e);var t=Et(n);function n(e){var r;return ne(this,n),(r=t.call(this))._pending=void 0!==e?[function(){return r.insert(0,e)}]:[],r._searchMarker=[],r}return oe(n,[{key:"length",get:function(){return this._length}},{key:"_integrate",value:function(e,t){Gd(kt(n.prototype),"_integrate",this).call(this,e,t);try{this._pending.forEach((function(e){return e()}))}catch(VO){console.error(VO)}this._pending=null}},{key:"_copy",value:function(){return new n}},{key:"clone",value:function(){var e=new n;return e.applyDelta(this.toDelta()),e}},{key:"_callObserver",value:function(e,t){var r=this;Gd(kt(n.prototype),"_callObserver",this).call(this,e,t);var i=new MV(this,e,t),o=e.doc;if(QK(this,e,i),!e.local){var a,s=!1,u=w(e.afterState.entries());try{for(u.s();!(a=u.n()).done;){var c=l(a.value,2),d=c[0],f=c[1],h=e.beforeState.get(d)||0;if(f!==h&&(SK(e,o.store.clients.get(d),h,f,(function(e){e.deleted||e.content.constructor!==HV||(s=!0)})),s))break}}catch(NG){u.e(NG)}finally{u.f()}s||PU(e,e.deleteSet,(function(e){e instanceof BV||s||e.parent===r&&e.content.constructor===HV&&(s=!0)})),AK(o,(function(e){s?function(e){var t=0;AK(e.doc,(function(n){for(var r=e._start,i=e._start,o=sB(),a=uB(o);i;)!1===i.deleted&&(i.content.constructor===HV?SV(a,i.content):(t+=IV(n,r,i,o,a),o=uB(a),r=i)),i=i.right}))}(r):PU(e,e.deleteSet,(function(t){t instanceof BV||t.parent===r&&function(e,t){for(;t&&t.right&&(t.right.deleted||!t.right.countable);)t=t.right;for(var n=new Set;t&&(t.deleted||!t.countable);){if(!t.deleted&&t.content.constructor===HV){var r=t.content.key;n.has(r)?t.delete(e):n.add(r)}t=t.left}}(e,t)}))}))}}},{key:"toString",value:function(){for(var e="",t=this._start;null!==t;)!t.deleted&&t.countable&&t.content.constructor===XV&&(e+=t.content.str),t=t.right;return e}},{key:"toJSON",value:function(){return this.toString()}},{key:"applyDelta",value:function(e){var t=this,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).sanitize,r=void 0===n||n;null!==this.doc?AK(this.doc,(function(n){for(var i=new bV(null,t._start,0,new Map),o=0;o<e.length;o++){var a=e[o];if(void 0!==a.insert){var s=r||"string"!==typeof a.insert||o!==e.length-1||null!==i.right||"\n"!==a.insert.slice(-1)?a.insert:a.insert.slice(0,-1);("string"!==typeof s||s.length>0)&&CV(n,t,i,s,a.attributes||{})}else void 0!==a.retain?PV(n,t,i,a.retain,a.attributes||{}):void 0!==a.delete&&jV(n,i,a.delete)}})):this._pending.push((function(){return t.applyDelta(e)}))}},{key:"toDelta",value:function(e,t,n){var r=[],i=new Map,o=this.doc,a="",s=this._start;function u(){if(a.length>0){var e={},t=!1;i.forEach((function(n,r){t=!0,e[r]=n}));var n={insert:a};t&&(n.attributes=e),r.push(n),a=""}}var l=function(){for(var o=function(){if(fK(s,e)||void 0!==t&&fK(s,t))switch(s.content.constructor){case XV:var o=i.get("ychange");void 0===e||fK(s,e)?void 0===t||fK(s,t)?void 0!==o&&(u(),i.delete("ychange")):void 0!==o&&o.user===s.id.client&&"added"===o.type||(u(),i.set("ychange",n?n("added",s.id):{type:"added"})):void 0!==o&&o.user===s.id.client&&"removed"===o.type||(u(),i.set("ychange",n?n("removed",s.id):{type:"removed"})),a+=s.content.str;break;case rW:case WV:u();var l={insert:s.content.getContent()[0]};if(i.size>0){var c={};l.attributes=c,i.forEach((function(e,t){c[t]=e}))}r.push(l);break;case HV:fK(s,e)&&(u(),SV(i,s.content))}s=s.right};null!==s;)o();u()};return e||t?AK(o,(function(n){e&&hK(n,e),t&&hK(n,t),l()}),"cleanup"):l(),r}},{key:"insert",value:function(e,t,n){var r=this;if(!(t.length<=0)){var i=this.doc;null!==i?AK(i,(function(i){var o=xV(i,r,e);n||(n={},o.currentAttributes.forEach((function(e,t){n[t]=e}))),CV(i,r,o,t,n)})):this._pending.push((function(){return r.insert(e,t,n)}))}}},{key:"insertEmbed",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.doc;null!==i?AK(i,(function(i){var o=xV(i,n,e);CV(i,n,o,t,r)})):this._pending.push((function(){return n.insertEmbed(e,t,r)}))}},{key:"delete",value:function(e,t){var n=this;if(0!==t){var r=this.doc;null!==r?AK(r,(function(r){jV(r,xV(r,n,e),t)})):this._pending.push((function(){return n.delete(e,t)}))}}},{key:"format",value:function(e,t,n){var r=this;if(0!==t){var i=this.doc;null!==i?AK(i,(function(i){var o=xV(i,r,e);null!==o.right&&PV(i,r,o,t,n)})):this._pending.push((function(){return r.format(e,t,n)}))}}},{key:"removeAttribute",value:function(e){var t=this;null!==this.doc?AK(this.doc,(function(n){uV(n,t,e)})):this._pending.push((function(){return t.removeAttribute(e)}))}},{key:"setAttribute",value:function(e,t){var n=this;null!==this.doc?AK(this.doc,(function(r){lV(r,n,e,t)})):this._pending.push((function(){return n.setAttribute(e,t)}))}},{key:"getAttribute",value:function(e){return cV(this,e)}},{key:"getAttributes",value:function(){return dV(this)}},{key:"_write",value:function(e){e.writeTypeRef(JV)}}]),n}(JK),TV=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0};ne(this,t),this._filter=n,this._root=e,this._currentNode=e._start,this._firstCall=!0}return oe(t,[{key:Symbol.iterator,value:function(){return this}},{key:"next",value:function(){var e=this._currentNode,t=e&&e.content&&e.content.type;if(null!==e&&(!this._firstCall||e.deleted||!this._filter(t)))do{if(t=e.content.type,e.deleted||t.constructor!==NV&&t.constructor!==OV||null===t._start)for(;null!==e;){if(null!==e.right){e=e.right;break}e=e.parent===this._root?null:e.parent._item}else e=t._start}while(null!==e&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,null===e?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}]),t}(),OV=function(e){xt(n,e);var t=Et(n);function n(){var e;return ne(this,n),(e=t.call(this))._prelimContent=[],e}return oe(n,[{key:"firstChild",get:function(){var e=this._first;return e?e.content.getContent()[0]:null}},{key:"_integrate",value:function(e,t){Gd(kt(n.prototype),"_integrate",this).call(this,e,t),this.insert(0,this._prelimContent),this._prelimContent=null}},{key:"_copy",value:function(){return new n}},{key:"clone",value:function(){var e=new n;return e.insert(0,this.toArray().map((function(e){return e instanceof JK?e.clone():e}))),e}},{key:"length",get:function(){return null===this._prelimContent?this._length:this._prelimContent.length}},{key:"createTreeWalker",value:function(e){return new TV(this,e)}},{key:"querySelector",value:function(e){e=e.toUpperCase();var t=new TV(this,(function(t){return t.nodeName&&t.nodeName.toUpperCase()===e})).next();return t.done?null:t.value}},{key:"querySelectorAll",value:function(e){return e=e.toUpperCase(),PB(new TV(this,(function(t){return t.nodeName&&t.nodeName.toUpperCase()===e})))}},{key:"_callObserver",value:function(e,t){QK(this,e,new RV(this,t,e))}},{key:"toString",value:function(){return nV(this,(function(e){return e.toString()})).join("")}},{key:"toJSON",value:function(){return this.toString()}},{key:"toDOM",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=e.createDocumentFragment();return void 0!==n&&n._createAssociation(r,this),tV(this,(function(i){r.insertBefore(i.toDOM(e,t,n),null)})),r}},{key:"insert",value:function(e,t){var n,r=this;null!==this.doc?AK(this.doc,(function(n){aV(n,r,e,t)})):(n=this._prelimContent).splice.apply(n,[e,0].concat(d(t)))}},{key:"insertAfter",value:function(e,t){var n=this;if(null!==this.doc)AK(this.doc,(function(r){var i=e&&e instanceof JK?e._item:e;iV(r,n,i,t)}));else{var r=this._prelimContent,i=null===e?0:r.findIndex((function(t){return t===e}))+1;if(0===i&&null!==e)throw TF("Reference item not found");r.splice.apply(r,[i,0].concat(d(t)))}}},{key:"delete",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;null!==this.doc?AK(this.doc,(function(r){sV(r,t,e,n)})):this._prelimContent.splice(e,n)}},{key:"toArray",value:function(){return eV(this)}},{key:"push",value:function(e){this.insert(this.length,e)}},{key:"unshift",value:function(e){this.insert(0,e)}},{key:"get",value:function(e){return rV(this,e)}},{key:"slice",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;return ZK(this,e,t)}},{key:"forEach",value:function(e){tV(this,e)}},{key:"_write",value:function(e){e.writeTypeRef(eW)}}]),n}(JK),NV=function(e){xt(n,e);var t=Et(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"UNDEFINED";return ne(this,n),(e=t.call(this)).nodeName=r,e._prelimAttrs=new Map,e}return oe(n,[{key:"nextSibling",get:function(){var e=this._item?this._item.next:null;return e?e.content.type:null}},{key:"prevSibling",get:function(){var e=this._item?this._item.prev:null;return e?e.content.type:null}},{key:"_integrate",value:function(e,t){var r=this;Gd(kt(n.prototype),"_integrate",this).call(this,e,t),this._prelimAttrs.forEach((function(e,t){r.setAttribute(t,e)})),this._prelimAttrs=null}},{key:"_copy",value:function(){return new n(this.nodeName)}},{key:"clone",value:function(){var e=new n(this.nodeName),t=this.getAttributes();for(var r in t)e.setAttribute(r,t[r]);return e.insert(0,this.toArray().map((function(e){return e instanceof JK?e.clone():e}))),e}},{key:"toString",value:function(){var e=this.getAttributes(),t=[],r=[];for(var i in e)r.push(i);r.sort();for(var o=r.length,a=0;a<o;a++){var s=r[a];t.push(s+'="'+e[s]+'"')}var u=this.nodeName.toLocaleLowerCase(),l=t.length>0?" "+t.join(" "):"";return"<".concat(u).concat(l,">").concat(Gd(kt(n.prototype),"toString",this).call(this),"</").concat(u,">")}},{key:"removeAttribute",value:function(e){var t=this;null!==this.doc?AK(this.doc,(function(n){uV(n,t,e)})):this._prelimAttrs.delete(e)}},{key:"setAttribute",value:function(e,t){var n=this;null!==this.doc?AK(this.doc,(function(r){lV(r,n,e,t)})):this._prelimAttrs.set(e,t)}},{key:"getAttribute",value:function(e){return cV(this,e)}},{key:"hasAttribute",value:function(e){return fV(this,e)}},{key:"getAttributes",value:function(){return dV(this)}},{key:"toDOM",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=e.createElement(this.nodeName),i=this.getAttributes();for(var o in i)r.setAttribute(o,i[o]);return tV(this,(function(i){r.appendChild(i.toDOM(e,t,n))})),void 0!==n&&n._createAssociation(r,this),r}},{key:"_write",value:function(e){e.writeTypeRef(ZV),e.writeKey(this.nodeName)}}]),n}(OV),RV=function(e){xt(n,e);var t=Et(n);function n(e,r,i){var o;return ne(this,n),(o=t.call(this,e,i)).childListChanged=!1,o.attributesChanged=new Set,r.forEach((function(e){null===e?o.childListChanged=!0:o.attributesChanged.add(e)})),o}return oe(n)}(WK),LV=function(e){xt(n,e);var t=Et(n);function n(e){var r;return ne(this,n),(r=t.call(this)).hookName=e,r}return oe(n,[{key:"_copy",value:function(){return new n(this.hookName)}},{key:"clone",value:function(){var e=new n(this.hookName);return this.forEach((function(t,n){e.set(n,t)})),e}},{key:"toDOM",value:function(){arguments.length>0&&void 0!==arguments[0]||document;var e,t=arguments.length>2?arguments[2]:void 0,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})[this.hookName];return(e=void 0!==n?n.createDom(this):document.createElement(this.hookName)).setAttribute("data-yjs-hook",this.hookName),void 0!==t&&t._createAssociation(e,this),e}},{key:"_write",value:function(e){e.writeTypeRef(tW),e.writeKey(this.hookName)}}]),n}(mV),DV=function(e){xt(n,e);var t=Et(n);function n(){return ne(this,n),t.apply(this,arguments)}return oe(n,[{key:"nextSibling",get:function(){var e=this._item?this._item.next:null;return e?e.content.type:null}},{key:"prevSibling",get:function(){var e=this._item?this._item.prev:null;return e?e.content.type:null}},{key:"_copy",value:function(){return new n}},{key:"clone",value:function(){var e=new n;return e.applyDelta(this.toDelta()),e}},{key:"toDOM",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=arguments.length>2?arguments[2]:void 0,n=e.createTextNode(this.toString());return void 0!==t&&t._createAssociation(n,this),n}},{key:"toString",value:function(){return this.toDelta().map((function(e){var t=[];for(var n in e.attributes){var r=[];for(var i in e.attributes[n])r.push({key:i,value:e.attributes[n][i]});r.sort((function(e,t){return e.key<t.key?-1:1})),t.push({nodeName:n,attrs:r})}t.sort((function(e,t){return e.nodeName<t.nodeName?-1:1}));for(var o="",a=0;a<t.length;a++){var s=t[a];o+="<".concat(s.nodeName);for(var u=0;u<s.attrs.length;u++){var l=s.attrs[u];o+=" ".concat(l.key,'="').concat(l.value,'"')}o+=">"}o+=e.insert;for(var c=t.length-1;c>=0;c--)o+="</".concat(t[c].nodeName,">");return o})).join("")}},{key:"toJSON",value:function(){return this.toString()}},{key:"_write",value:function(e){e.writeTypeRef(nW)}}]),n}(AV),zV=function(){function e(t,n){ne(this,e),this.id=t,this.length=n}return oe(e,[{key:"deleted",get:function(){throw OF()}},{key:"mergeWith",value:function(e){return!1}},{key:"write",value:function(e,t,n){throw OF()}},{key:"integrate",value:function(e,t){throw OF()}}]),e}(),BV=function(e){xt(n,e);var t=Et(n);function n(){return ne(this,n),t.apply(this,arguments)}return oe(n,[{key:"deleted",get:function(){return!0}},{key:"delete",value:function(){}},{key:"mergeWith",value:function(e){return this.constructor===e.constructor&&(this.length+=e.length,!0)}},{key:"integrate",value:function(e,t){t>0&&(this.id.clock+=t,this.length-=t),mK(e.doc.store,this)}},{key:"write",value:function(e,t){e.writeInfo(0),e.writeLen(this.length-t)}},{key:"getMissing",value:function(e,t){return null}}]),n}(zV),FV=function(){function e(t){ne(this,e),this.content=t}return oe(e,[{key:"getLength",value:function(){return 1}},{key:"getContent",value:function(){return[this.content]}},{key:"isCountable",value:function(){return!0}},{key:"copy",value:function(){return new e(this.content)}},{key:"splice",value:function(e){throw OF()}},{key:"mergeWith",value:function(e){return!1}},{key:"integrate",value:function(e,t){}},{key:"delete",value:function(e){}},{key:"gc",value:function(e){}},{key:"write",value:function(e,t){e.writeBuf(this.content)}},{key:"getRef",value:function(){return 3}}]),e}(),UV=function(){function e(t){ne(this,e),this.len=t}return oe(e,[{key:"getLength",value:function(){return this.len}},{key:"getContent",value:function(){return[]}},{key:"isCountable",value:function(){return!1}},{key:"copy",value:function(){return new e(this.len)}},{key:"splice",value:function(t){var n=new e(this.len-t);return this.len=t,n}},{key:"mergeWith",value:function(e){return this.len+=e.len,!0}},{key:"integrate",value:function(e,t){AU(e.deleteSet,t.id.client,t.id.clock,this.len),t.markDeleted()}},{key:"delete",value:function(e){}},{key:"gc",value:function(e){}},{key:"write",value:function(e,t){e.writeLen(this.len-t)}},{key:"getRef",value:function(){return 1}}]),e}(),KV=function(e,t){return new zU(mt(mt({guid:e},t),{},{shouldLoad:t.shouldLoad||t.autoLoad||!1}))},VV=function(){function e(t){ne(this,e),t._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=t;var n={};this.opts=n,t.gc||(n.gc=!1),t.autoLoad&&(n.autoLoad=!0),null!==t.meta&&(n.meta=t.meta)}return oe(e,[{key:"getLength",value:function(){return 1}},{key:"getContent",value:function(){return[this.doc]}},{key:"isCountable",value:function(){return!0}},{key:"copy",value:function(){return new e(KV(this.doc.guid,this.opts))}},{key:"splice",value:function(e){throw OF()}},{key:"mergeWith",value:function(e){return!1}},{key:"integrate",value:function(e,t){this.doc._item=t,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}},{key:"delete",value:function(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}},{key:"gc",value:function(e){}},{key:"write",value:function(e,t){e.writeString(this.doc.guid),e.writeAny(this.opts)}},{key:"getRef",value:function(){return 9}}]),e}(),WV=function(){function e(t){ne(this,e),this.embed=t}return oe(e,[{key:"getLength",value:function(){return 1}},{key:"getContent",value:function(){return[this.embed]}},{key:"isCountable",value:function(){return!0}},{key:"copy",value:function(){return new e(this.embed)}},{key:"splice",value:function(e){throw OF()}},{key:"mergeWith",value:function(e){return!1}},{key:"integrate",value:function(e,t){}},{key:"delete",value:function(e){}},{key:"gc",value:function(e){}},{key:"write",value:function(e,t){e.writeJSON(this.embed)}},{key:"getRef",value:function(){return 5}}]),e}(),HV=function(){function e(t,n){ne(this,e),this.key=t,this.value=n}return oe(e,[{key:"getLength",value:function(){return 1}},{key:"getContent",value:function(){return[]}},{key:"isCountable",value:function(){return!1}},{key:"copy",value:function(){return new e(this.key,this.value)}},{key:"splice",value:function(e){throw OF()}},{key:"mergeWith",value:function(e){return!1}},{key:"integrate",value:function(e,t){t.parent._searchMarker=null}},{key:"delete",value:function(e){}},{key:"gc",value:function(e){}},{key:"write",value:function(e,t){e.writeKey(this.key),e.writeJSON(this.value)}},{key:"getRef",value:function(){return 6}}]),e}(),YV=function(){function e(t){ne(this,e),this.arr=t}return oe(e,[{key:"getLength",value:function(){return this.arr.length}},{key:"getContent",value:function(){return this.arr}},{key:"isCountable",value:function(){return!0}},{key:"copy",value:function(){return new e(this.arr)}},{key:"splice",value:function(t){var n=new e(this.arr.slice(t));return this.arr=this.arr.slice(0,t),n}},{key:"mergeWith",value:function(e){return this.arr=this.arr.concat(e.arr),!0}},{key:"integrate",value:function(e,t){}},{key:"delete",value:function(e){}},{key:"gc",value:function(e){}},{key:"write",value:function(e,t){var n=this.arr.length;e.writeLen(n-t);for(var r=t;r<n;r++){var i=this.arr[r];e.writeString(void 0===i?"undefined":JSON.stringify(i))}}},{key:"getRef",value:function(){return 2}}]),e}(),qV=function(){function e(t){ne(this,e),this.arr=t}return oe(e,[{key:"getLength",value:function(){return this.arr.length}},{key:"getContent",value:function(){return this.arr}},{key:"isCountable",value:function(){return!0}},{key:"copy",value:function(){return new e(this.arr)}},{key:"splice",value:function(t){var n=new e(this.arr.slice(t));return this.arr=this.arr.slice(0,t),n}},{key:"mergeWith",value:function(e){return this.arr=this.arr.concat(e.arr),!0}},{key:"integrate",value:function(e,t){}},{key:"delete",value:function(e){}},{key:"gc",value:function(e){}},{key:"write",value:function(e,t){var n=this.arr.length;e.writeLen(n-t);for(var r=t;r<n;r++){var i=this.arr[r];e.writeAny(i)}}},{key:"getRef",value:function(){return 8}}]),e}(),XV=function(){function e(t){ne(this,e),this.str=t}return oe(e,[{key:"getLength",value:function(){return this.str.length}},{key:"getContent",value:function(){return this.str.split("")}},{key:"isCountable",value:function(){return!0}},{key:"copy",value:function(){return new e(this.str)}},{key:"splice",value:function(t){var n=new e(this.str.slice(t));this.str=this.str.slice(0,t);var r=this.str.charCodeAt(t-1);return r>=55296&&r<=56319&&(this.str=this.str.slice(0,t-1)+"\ufffd",n.str="\ufffd"+n.str.slice(1)),n}},{key:"mergeWith",value:function(e){return this.str+=e.str,!0}},{key:"integrate",value:function(e,t){}},{key:"delete",value:function(e){}},{key:"gc",value:function(e){}},{key:"write",value:function(e,t){e.writeString(0===t?this.str:this.str.slice(t))}},{key:"getRef",value:function(){return 4}}]),e}(),$V=[function(e){return new vV},function(e){return new mV},function(e){return new AV},function(e){return new NV(e.readKey())},function(e){return new OV},function(e){return new LV(e.readKey())},function(e){return new DV}],GV=0,QV=1,JV=2,ZV=3,eW=4,tW=5,nW=6,rW=function(){function e(t){ne(this,e),this.type=t}return oe(e,[{key:"getLength",value:function(){return 1}},{key:"getContent",value:function(){return[this.type]}},{key:"isCountable",value:function(){return!0}},{key:"copy",value:function(){return new e(this.type._copy())}},{key:"splice",value:function(e){throw OF()}},{key:"mergeWith",value:function(e){return!1}},{key:"integrate",value:function(e,t){this.type._integrate(e.doc,t)}},{key:"delete",value:function(e){for(var t=this.type._start;null!==t;)t.deleted?e._mergeStructs.push(t):t.delete(e),t=t.right;this.type._map.forEach((function(t){t.deleted?e._mergeStructs.push(t):t.delete(e)})),e.changed.delete(this.type)}},{key:"gc",value:function(e){for(var t=this.type._start;null!==t;)t.gc(e,!0),t=t.right;this.type._start=null,this.type._map.forEach((function(t){for(;null!==t;)t.gc(e,!0),t=t.left})),this.type._map=new Map}},{key:"write",value:function(e,t){this.type._write(e)}},{key:"getRef",value:function(){return 7}}]),e}(),iW=function(e,t,n){var r=t.id,i=r.client,o=r.clock,a=new oW(uK(i,o+n),t,uK(i,o+n-1),t.right,t.rightOrigin,t.parent,t.parentSub,t.content.splice(n));return t.deleted&&a.markDeleted(),t.keep&&(a.keep=!0),null!==t.redone&&(a.redone=uK(t.redone.client,t.redone.clock+n)),t.right=a,null!==a.right&&(a.right.left=a),e._mergeStructs.push(a),null!==a.parentSub&&null===a.right&&a.parent._map.set(a.parentSub,a),t.length=n,a},oW=function(e){xt(n,e);var t=Et(n);function n(e,r,i,o,a,s,u,l){var c;return ne(this,n),(c=t.call(this,e,l.getLength())).origin=i,c.left=r,c.right=o,c.rightOrigin=a,c.parent=s,c.parentSub=u,c.redone=null,c.content=l,c.info=c.content.isCountable()?2:0,c}return oe(n,[{key:"marker",get:function(){return(8&this.info)>0},set:function(e){(8&this.info)>0!==e&&(this.info^=8)}},{key:"keep",get:function(){return(1&this.info)>0},set:function(e){this.keep!==e&&(this.info^=1)}},{key:"countable",get:function(){return(2&this.info)>0}},{key:"deleted",get:function(){return(4&this.info)>0},set:function(e){this.deleted!==e&&(this.info^=4)}},{key:"markDeleted",value:function(){this.info|=4}},{key:"getMissing",value:function(e,t){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=gK(t,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=gK(t,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===aK&&this.id.client!==this.parent.client&&this.parent.clock>=gK(t,this.parent.client))return this.parent.client;if(this.origin&&(this.left=kK(e,t,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=xK(e,this.rightOrigin),this.rightOrigin=this.right.id),(this.left&&this.left.constructor===BV||this.right&&this.right.constructor===BV)&&(this.parent=null),this.parent){if(this.parent.constructor===aK){var r=bK(t,this.parent);r.constructor===BV?this.parent=null:this.parent=r.content.type}}else this.left&&this.left.constructor===n&&(this.parent=this.left.parent,this.parentSub=this.left.parentSub),this.right&&this.right.constructor===n&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);return null}},{key:"integrate",value:function(e,t){if(t>0&&(this.id.clock+=t,this.left=kK(e,e.doc.store,uK(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(t),this.length-=t),this.parent){if(!this.left&&(!this.right||null!==this.right.left)||this.left&&this.left.right!==this.right){var n,r=this.left;if(null!==r)n=r.right;else if(null!==this.parentSub)for(n=this.parent._map.get(this.parentSub)||null;null!==n&&null!==n.left;)n=n.left;else n=this.parent._start;for(var i=new Set,o=new Set;null!==n&&n!==this.right;){if(o.add(n),i.add(n),sK(this.origin,n.origin)){if(n.id.client<this.id.client)r=n,i.clear();else if(sK(this.rightOrigin,n.rightOrigin))break}else{if(null===n.origin||!o.has(bK(e.doc.store,n.origin)))break;i.has(bK(e.doc.store,n.origin))||(r=n,i.clear())}n=n.right}this.left=r}if(null!==this.left){var a=this.left.right;this.right=a,this.left.right=this}else{var s;if(null!==this.parentSub)for(s=this.parent._map.get(this.parentSub)||null;null!==s&&null!==s.left;)s=s.left;else s=this.parent._start,this.parent._start=this;this.right=s}null!==this.right?this.right.left=this:null!==this.parentSub&&(this.parent._map.set(this.parentSub,this),null!==this.left&&this.left.delete(e)),null===this.parentSub&&this.countable&&!this.deleted&&(this.parent._length+=this.length),mK(e.doc.store,this),this.content.integrate(e,this),CK(e,this.parent,this.parentSub),(null!==this.parent._item&&this.parent._item.deleted||null!==this.parentSub&&null!==this.right)&&this.delete(e)}else new BV(this.id,this.length).integrate(e,0)}},{key:"next",get:function(){for(var e=this.right;null!==e&&e.deleted;)e=e.right;return e}},{key:"prev",get:function(){for(var e=this.left;null!==e&&e.deleted;)e=e.left;return e}},{key:"lastId",get:function(){return 1===this.length?this.id:uK(this.id.client,this.id.clock+this.length-1)}},{key:"mergeWith",value:function(e){var t=this;if(this.constructor===e.constructor&&sK(e.origin,this.lastId)&&this.right===e&&sK(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&null===this.redone&&null===e.redone&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){var n=this.parent._searchMarker;return n&&n.forEach((function(n){n.p===e&&(n.p=t,!t.deleted&&t.countable&&(n.index-=t.length))})),e.keep&&(this.keep=!0),this.right=e.right,null!==this.right&&(this.right.left=this),this.length+=e.length,!0}return!1}},{key:"delete",value:function(e){if(!this.deleted){var t=this.parent;this.countable&&null===this.parentSub&&(t._length-=this.length),this.markDeleted(),AU(e.deleteSet,this.id.client,this.id.clock,this.length),CK(e,t,this.parentSub),this.content.delete(e)}}},{key:"gc",value:function(e,t){if(!this.deleted)throw NF();this.content.gc(e),t?function(e,t,n){var r=e.clients.get(t.id.client);r[yK(r,t.id.clock)]=n}(e,this,new BV(this.id,this.length)):this.content=new UV(this.length)}},{key:"write",value:function(e,t){var n=t>0?uK(this.id.client,this.id.clock+t-1):this.origin,r=this.rightOrigin,i=this.parentSub,o=31&this.content.getRef()|(null===n?0:oF)|(null===r?0:iF)|(null===i?0:32);if(e.writeInfo(o),null!==n&&e.writeLeftID(n),null!==r&&e.writeRightID(r),null===n&&null===r){var a=this.parent;if(void 0!==a._item){var s=a._item;if(null===s){var u=lK(a);e.writeParentInfo(!0),e.writeString(u)}else e.writeParentInfo(!1),e.writeLeftID(s.id)}else a.constructor===String?(e.writeParentInfo(!0),e.writeString(a)):a.constructor===aK?(e.writeParentInfo(!1),e.writeLeftID(a)):NF();null!==i&&e.writeString(i)}this.content.write(e,t)}}]),n}(zV),aW=function(e,t){return sW[31&t](e)},sW=[function(){NF()},function(e){return new UV(e.readLen())},function(e){for(var t=e.readLen(),n=[],r=0;r<t;r++){var i=e.readString();"undefined"===i?n.push(void 0):n.push(JSON.parse(i))}return new YV(n)},function(e){return new FV(e.readBuf())},function(e){return new XV(e.readString())},function(e){return new WV(e.readJSON())},function(e){return new HV(e.readKey(),e.readJSON())},function(e){return new rW($V[e.readTypeRef()](e))},function(e){for(var t=e.readLen(),n=[],r=0;r<t;r++)n.push(e.readAny());return new qV(n)},function(e){return new VV(KV(e.readString(),e.readAny()))},function(){NF()}],uW=function(e){xt(n,e);var t=Et(n);function n(){return ne(this,n),t.apply(this,arguments)}return oe(n,[{key:"deleted",get:function(){return!0}},{key:"delete",value:function(){}},{key:"mergeWith",value:function(e){return this.constructor===e.constructor&&(this.length+=e.length,!0)}},{key:"integrate",value:function(e,t){NF()}},{key:"write",value:function(e,t){e.writeInfo(10),gF(e.restEncoder,this.length-t)}},{key:"getMissing",value:function(e,t){return null}}]),n}(zV),lW="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{},cW="__ $YJS$ __";!0===lW[cW]&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438"),lW[cW]=!0;var dW=function(e,t){gF(e,0);var n=function(e){return eK(e,new VU)}(t);kF(e,n)},fW=function(e,t,n){gF(e,1),kF(e,function(e,t){return GU(e,t,new WU)}(t,n))},hW=function(e,t,n){try{!function(e,t,n){$U(e,t,n,FU)}(t,UF(e),n)}catch(r){console.error("Caught error while handling a Yjs update",r)}},pW=hW,vW=function(e,t,n,r){var i=VF(e);switch(i){case 0:!function(e,t,n){fW(t,n,UF(e))}(e,t,n);break;case 1:hW(e,n,r);break;case 2:pW(e,n,r);break;default:throw new Error("Unknown message type")}return i},gW=3e4,mW=function(e){xt(n,e);var t=Et(n);function n(e){var r;return ne(this,n),(r=t.call(this)).doc=e,r.clientID=e.clientID,r.states=new Map,r.meta=new Map,r._checkInterval=setInterval((function(){var e=QB();null!==r.getLocalState()&&15e3<=e-r.meta.get(r.clientID).lastUpdated&&r.setLocalState(r.getLocalState());var t=[];r.meta.forEach((function(n,i){i!==r.clientID&&gW<=e-n.lastUpdated&&r.states.has(i)&&t.push(i)})),t.length>0&&yW(_t(r),t,"timeout")}),JB(3e3)),e.on("destroy",(function(){r.destroy()})),r.setLocalState({}),r}return oe(n,[{key:"destroy",value:function(){this.emit("destroy",[this]),this.setLocalState(null),Gd(kt(n.prototype),"destroy",this).call(this),clearInterval(this._checkInterval)}},{key:"getLocalState",value:function(){return this.states.get(this.clientID)||null}},{key:"setLocalState",value:function(e){var t=this.clientID,n=this.meta.get(t),r=void 0===n?0:n.clock+1,i=this.states.get(t);null===e?this.states.delete(t):this.states.set(t,e),this.meta.set(t,{clock:r,lastUpdated:QB()});var o=[],a=[],s=[],u=[];null===e?u.push(t):null==i?null!=e&&o.push(t):(a.push(t),OB(i,e)||s.push(t)),(o.length>0||s.length>0||u.length>0)&&this.emit("change",[{added:o,updated:s,removed:u},"local"]),this.emit("update",[{added:o,updated:a,removed:u},"local"])}},{key:"setLocalStateField",value:function(e,t){var n=this.getLocalState();null!==n&&this.setLocalState(mt(mt({},n),{},vt({},e,t)))}},{key:"getStates",value:function(){return this.states}}]),n}(ZF),yW=function(e,t,n){for(var r=[],i=0;i<t.length;i++){var o=t[i];if(e.states.has(o)){if(e.states.delete(o),o===e.clientID){var a=e.meta.get(o);e.meta.set(o,{clock:a.clock+1,lastUpdated:QB()})}r.push(o)}}r.length>0&&(e.emit("change",[{added:[],updated:[],removed:r},n]),e.emit("update",[{added:[],updated:[],removed:r},n]))},bW=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.states,r=t.length,i=dF();gF(i,r);for(var o=0;o<r;o++){var a=t[o],s=n.get(a)||null,u=e.meta.get(a).clock;gF(i,a),gF(i,u),wF(i,JSON.stringify(s))}return hF(i)};var wW=[];wW[0]=function(e,t,n,r,i){gF(e,0);var o=vW(t,e,n.doc,n);r&&1===o&&!n.synced&&(n.synced=!0)},wW[3]=function(e,t,n,r,i){gF(e,1),kF(e,bW(n.awareness,Array.from(n.awareness.getStates().keys())))},wW[1]=function(e,t,n,r,i){!function(e,t,n){for(var r=zF(t),i=QB(),o=[],a=[],s=[],u=[],l=VF(r),c=0;c<l;c++){var d=VF(r),f=VF(r),h=JSON.parse(HF(r)),p=e.meta.get(d),v=e.states.get(d),g=void 0===p?0:p.clock;(g<f||g===f&&null===h&&e.states.has(d))&&(null===h?d===e.clientID&&null!=e.getLocalState()?f++:e.states.delete(d):e.states.set(d,h),e.meta.set(d,{clock:f,lastUpdated:i}),void 0===p&&null!==h?o.push(d):void 0!==p&&null===h?u.push(d):null!==h&&(OB(h,v)||s.push(d),a.push(d)))}(o.length>0||s.length>0||u.length>0)&&e.emit("change",[{added:o,updated:s,removed:u},n]),(o.length>0||a.length>0||u.length>0)&&e.emit("update",[{added:o,updated:a,removed:u},n])}(n.awareness,UF(t),n)},wW[2]=function(e,t,n,r,i){!function(e,t,n){0===VF(e)&&n(t,HF(e))}(t,n.doc,(function(e,t){return function(e,t){console.warn("Permission denied to access ".concat(e.url,".\n").concat(t))}(n,t)}))};function xW(e,t,n){var r=zF(t),i=dF(),o=VF(r),a=e.messageHandlers[o];return a?a(i,r,e,n,o):console.error("Unable to compute message"),i}function kW(e){if(e.shouldConnect&&null===e.ws){var t=new e._WS(e.url);t.binaryType="arraybuffer",e.ws=t,e.wsconnecting=!0,e.wsconnected=!1,e.synced=!1,t.onmessage=function(n){if("ping"!==n.data){e.wsLastMessageReceived=QB();var r=xW(e,new Uint8Array(n.data),!0);fF(r)>1&&t.send(hF(r))}else t.send("pong")},t.onerror=function(t){e.emit("connection-error",[t,e])},t.onclose=function(t){e.emit("connection-close",[t,e]),e.ws=null,e.wsconnecting=!1,e.wsconnected?(e.wsconnected=!1,e.synced=!1,yW(e.awareness,Array.from(e.awareness.getStates().keys()).filter((function(t){return t!==e.doc.clientID})),e),e.emit("status",[{status:"disconnected"}])):e.wsUnsuccessfulReconnects++,setTimeout(kW,eF(100*nF(2,e.wsUnsuccessfulReconnects),e.maxBackoffTime),e)},t.onopen=function(){e.wsLastMessageReceived=QB(),e.wsconnecting=!1,e.wsconnected=!0,e.wsUnsuccessfulReconnects=0,e.emit("status",[{status:"connected"}]);var n=dF();if(gF(n,0),dW(n,e.doc),t.send(hF(n)),null!==e.awareness.getLocalState()){var r=dF();gF(r,1),kF(r,bW(e.awareness,[e.doc.clientID])),t.send(hF(r))}},e.emit("status",[{status:"connecting"}])}}function SW(e,t){var n=e.ws;e.wsconnected&&n&&n.readyState===n.OPEN&&n.send(t),e.bcconnected&&GB(e.bcChannel,t,e)}var _W=function(e){xt(n,e);var t=Et(n);function n(e,r,i){var o,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=a.connect,u=void 0===s||s,l=a.awareness,c=void 0===l?new mW(i):l,d=a.params,f=void 0===d?{}:d,h=a.WebSocketPolyfill,p=void 0===h?WebSocket:h,v=a.resyncInterval,g=void 0===v?-1:v,m=a.maxBackoffTime,y=void 0===m?2500:m,b=a.disableBc,w=void 0!==b&&b;for(ne(this,n),vt(_t(o=t.call(this)),"maxBackoffTime",void 0),vt(_t(o),"bcChannel",void 0),vt(_t(o),"url",void 0),vt(_t(o),"roomname",void 0),vt(_t(o),"doc",void 0),vt(_t(o),"_WS",void 0),vt(_t(o),"awareness",void 0),vt(_t(o),"wsconnected",void 0),vt(_t(o),"wsconnecting",void 0),vt(_t(o),"bcconnected",void 0),vt(_t(o),"disableBc",void 0),vt(_t(o),"wsUnsuccessfulReconnects",void 0),vt(_t(o),"messageHandlers",void 0),vt(_t(o),"_synced",void 0),vt(_t(o),"ws",void 0),vt(_t(o),"wsLastMessageReceived",void 0),vt(_t(o),"shouldConnect",void 0),vt(_t(o),"_resyncInterval",void 0),vt(_t(o),"_bcSubscriber",void 0),vt(_t(o),"_updateHandler",void 0),vt(_t(o),"_awarenessUpdateHandler",void 0),vt(_t(o),"_unloadHandler",void 0),vt(_t(o),"_checkInterval",void 0);"/"===e[e.length-1];)e=e.slice(0,e.length-1);var x=function(e){return function(e,t){var n=[];for(var r in e)n.push(t(e[r],r));return n}(e,(function(e,t){return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e))})).join("&")}(f);return o.maxBackoffTime=y,o.bcChannel=e+"/"+r,o.url=e+"/"+r+(0===x.length?"":"?"+x),o.roomname=r,o.doc=i,o._WS=p,o.awareness=c,o.wsconnected=!1,o.wsconnecting=!1,o.bcconnected=!1,o.disableBc=w,o.wsUnsuccessfulReconnects=0,o.messageHandlers=wW.slice(),o._synced=!1,o.ws=null,o.wsLastMessageReceived=0,o.shouldConnect=u,o._resyncInterval=0,g>0&&(o._resyncInterval=setInterval((function(){if(o.ws&&o.ws.readyState===WebSocket.OPEN){var e=dF();gF(e,0),dW(e,i),o.ws.send(hF(e))}}),g)),o._bcSubscriber=function(e,t){if(t!==_t(o)){var n=xW(_t(o),new Uint8Array(e),!1);fF(n)>1&&GB(o.bcChannel,hF(n),_t(o))}},o._updateHandler=function(e,t){if(t!==_t(o)){var n=dF();gF(n,0),function(e,t){gF(e,2),kF(e,t)}(n,e),SW(_t(o),hF(n))}},o.doc.on("update",o._updateHandler),o._awarenessUpdateHandler=function(e,t){var n=e.added,r=e.updated,i=e.removed,a=n.concat(r).concat(i),s=dF();gF(s,1),kF(s,bW(c,a)),SW(_t(o),hF(s))},o._unloadHandler=function(){yW(o.awareness,[i.clientID],"window unload")},"undefined"!==typeof window?window.addEventListener("unload",o._unloadHandler):"undefined"!==typeof process&&process.on("exit",o._unloadHandler),c.on("update",o._awarenessUpdateHandler),o._checkInterval=setInterval((function(){o.wsconnected&&3e4<QB()-o.wsLastMessageReceived&&(!function(e,t){if(!e)throw new Error(t)}(null!==o.ws,"ws must not be null"),o.ws.close())}),3e3),u&&o.connect(),o}return oe(n,[{key:"synced",get:function(){return this._synced},set:function(e){this._synced!==e&&(this._synced=e,this.emit("synced",[e]),this.emit("sync",[e]))}},{key:"destroy",value:function(){0!==this._resyncInterval&&clearInterval(this._resyncInterval),clearInterval(this._checkInterval),this.disconnect(),"undefined"!==typeof window?window.removeEventListener("unload",this._unloadHandler):"undefined"!==typeof process&&process.off("exit",this._unloadHandler),this.awareness.off("update",this._awarenessUpdateHandler),this.doc.off("update",this._updateHandler),Gd(kt(n.prototype),"destroy",this).call(this)}},{key:"connectBc",value:function(){if(!this.disableBc){this.bcconnected||(!function(e,t){$B(e).subs.add(t)}(this.bcChannel,this._bcSubscriber),this.bcconnected=!0);var e=dF();gF(e,0),dW(e,this.doc),GB(this.bcChannel,hF(e),this);var t=dF();gF(t,0),fW(t,this.doc),GB(this.bcChannel,hF(t),this);var n=dF();gF(n,3),GB(this.bcChannel,hF(n),this);var r=dF();gF(r,1),kF(r,bW(this.awareness,[this.doc.clientID])),GB(this.bcChannel,hF(r),this)}}},{key:"disconnectBc",value:function(){var e=dF();gF(e,1),kF(e,bW(this.awareness,[this.doc.clientID],new Map)),SW(this,hF(e)),this.bcconnected&&(!function(e,t){var n=$B(e),r=n.subs.delete(t);r&&0===n.subs.size&&(n.bc.close(),YB.delete(e))}(this.bcChannel,this._bcSubscriber),this.bcconnected=!1)}},{key:"disconnect",value:function(){this.shouldConnect=!1,this.disconnectBc(),null!==this.ws&&this.ws.close()}},{key:"connect",value:function(){this.shouldConnect=!0,this.wsconnected||null!==this.ws||(kW(this),this.connectBc())}}]),n}(ZF);function EW(){if(crypto.randomUUID)return crypto.randomUUID();var e=(new Date).getTime(),t="undefined"!==typeof performance&&performance.now&&1e3*performance.now()||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(n){var r=16*Math.random();return e>0?(r=(e+r)%16|0,e=Math.floor(e/16)):(r=(t+r)%16|0,t=Math.floor(t/16)),("x"===n?r:3&r|8).toString(16)}))}var CW=function(e){xt(n,e);var t=Et(n);function n(e,r,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};ne(this,n);var a="".concat(e.startsWith("localhost:")||e.startsWith("127.0.0.1:")?"ws":"wss","://").concat(e,"/party");return void 0===o.params?o.params={_pk:EW()}:o.params._pk=EW(),t.call(this,a,r,i,o)}return oe(n)}(_W);var PW=n.p+"static/media/Discussion.14f4c5847f5d983935598725a843df77.svg",IW=function(){return(0,f.jsx)("img",{src:PW,alt:"Bullet Point",style:{width:"12px",height:"12px",verticalAlign:"middle"}})},jW=function(e){var n=e.activityName,r=e.Topic,i=e.QuestionsTags,o=e.text,a=e.data,s=l((0,t.useState)([]),2),u=s[0],c=s[1],h=l((0,t.useState)(""),2),p=h[0],v=h[1],g=a.toString(),y=function(){var e=b(m().mark((function e(){var t,a;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=p.trim()){e.next=3;break}return e.abrupt("return");case 3:return!t.endsWith("?")&&t.length>0&&!0===i&&"Resource"!==o?t+="?":!t.endsWith(".")&&t.length>0&&!1===i&&"Resource"!==o&&(t+="."),e.prev=4,e.next=7,lt.post("http://localhost:5004/api/activities/activities",{activityName:n,discussion:"Question"==o?t:"",activities:"Activity"==o?t:"",resources:"Resource"==o?t+"{}":""});case 7:e.sent,a=(0,f.jsxs)("p",{className:"ActivitiesText",children:["Discussion Questions"===r&&"Resource"!==o?(0,f.jsx)(IW,{}):"\u2022",(0,f.jsx)("span",{style:{marginLeft:"5px"},className:"ActivitiesText",children:" ".concat(t)})]},Date.now()),c((function(e){return[].concat(d(e),[a])})),v(""),t="",e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),console.error(e.t0);case 17:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(){return e.apply(this,arguments)}}(),w=JSON.parse(localStorage.getItem("userData")).userType;return(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)("div",{className:"sub-container",children:["Resources"!==r&&(0,f.jsx)("h3",{className:"Act-H",children:r}),"Resources"===r&&(0,f.jsx)("br",{}),(0,f.jsxs)("div",{className:"editable-container",children:["mentor"==w&&(0,f.jsx)("input",{className:"Activity-text",id:o,type:"text",placeholder:'Enter "'.concat(o,'" here'),value:p,onChange:function(e){return v(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&(e.preventDefault(),y())}}),(0,f.jsxs)("div",{className:"editable",onKeyDown:function(e){"Enter"===e.key&&e.preventDefault()},children:[function(){if("Resource"===o){var e=g.split("{}");return(0,f.jsx)("div",{children:e.map((function(e,t){return(0,f.jsx)("a",{style:{marginLeft:"4px"},href:e,target:"_blank",rel:"noopener noreferrer",children:e+"\n"},t)}))})}return g.split(/[.?]/).map((function(e,t){return(0,f.jsxs)("p",{className:"activitesText",style:{display:"flex",alignItems:"center"},children:[""!==e.trim()?"Discussion Questions"===r?(0,f.jsx)(IW,{}):"\u2022":null,(0,f.jsxs)("span",{style:{marginLeft:"4px"},children:[" ".concat(e.trim()),""!==e.trim()?"Discussion Questions"===r?"?":".":null]})]},t)}))}(),u]})]})]})})};var MW=n.p+"static/media/Awareness.18388175acf8afd701f560f3bbc1564b.svg";var AW=n.p+"static/media/goals.533815b584cbc0d75a9278365c7eec33.svg";var TW=n.p+"static/media/time.6fcb95a9d74e258761d7a0671bbceb93.svg";var OW=n.p+"static/media/study.9758ac4e0240bd351e7ee2a7aa382f47.svg";var NW=n.p+"static/media/stress.a69237eaa6a15ad3599b258635fc7041.svg";var RW=n.p+"static/media/Exam.f21ef0dce6ee41d3c2531041b6965a4e.svg",LW=function(e){var n=e.activityName,r=e.isResourcesClicked,i=e.isDiscussionClicked,o=l((0,t.useState)([]),2),a=o[0],s=o[1],u=l((0,t.useState)([]),2),c=u[0],d=u[1],h=l((0,t.useState)([]),2),p=h[0],v=h[1],g={Awareness:MW,Goal:AW,Time:TW,Study:OW,Stress:NW,Exam:RW};return(0,t.useEffect)((function(){lt.get("http://localhost:5004/api/activities/activities").then((function(e){var t=e.data;if(console.log(e.data),"object"===typeof t){var r=t.find((function(e){return e.activityName===n}));r?(s(r.discussion||[]),d(r.activities||[]),v(r.resources||[])):console.error("Activity not found")}else console.error("Invalid data format from the API")})).catch((function(e){console.error("Error fetching data:",e)}))}),[n]),(0,f.jsxs)(f.Fragment,{children:[i&&(0,f.jsxs)("div",{className:"main-container",children:[(0,f.jsxs)("h1",{className:"TopicName",children:[(0,f.jsx)("img",{className:"icon-H",src:g[n.split(" ")[0]],alt:"TopicIcon"}),n]}),(0,f.jsx)(jW,{activityName:n,Topic:"Discussion Questions",QuestionsTags:!0,text:"Question",data:a}),(0,f.jsx)(jW,{activityName:n,Topic:"Activities",QuestionsTags:!1,text:"Activity",data:c})]}),r&&(0,f.jsxs)("div",{className:"resources-container",children:[(0,f.jsx)("h3",{className:"Act-H",children:"Resources"}),(0,f.jsx)(jW,{activityName:n,Topic:"Resources",QuestionsTags:!1,text:"Resource",data:p})]})]})};var DW=n.p+"static/media/Activity_icon.24a42cfa5c983da6219a062b1aaac697.svg";function zW(e){var n=e.activityName,r=l((0,t.useState)(!1),2),i=r[0],o=r[1],a=l((0,t.useState)(!1),2),s=a[0],u=a[1],c=l((0,t.useState)(!1),2),d=c[0],h=c[1],p=function(){o(!i)};return(0,f.jsxs)("div",{className:"nav-3",children:[(0,f.jsxs)("div",{className:"activity-dropdown",onMouseEnter:p,onMouseLeave:p,children:[(0,f.jsxs)("div",{className:"nav-button ".concat(s||d?"clicked":""),children:[(0,f.jsx)("img",{src:DW,alt:"book",className:"icon"}),"Activity"]}),i&&(0,f.jsxs)("div",{className:"dropdown-content",children:[(0,f.jsx)("button",{className:"dropdown-button ".concat(s?"clicked":""),onClick:function(){u(!s)},children:"Discussions"}),(0,f.jsx)("button",{className:"dropdown-button ".concat(d?"clicked":""),onClick:function(){h(!d)},children:"Resources"})]})]}),(0,f.jsxs)("div",{children:[s&&(0,f.jsx)(LW,{activityName:n,isDiscussionClicked:s,isResourcesClicked:d}),d&&(0,f.jsx)(LW,{activityName:n,isDiscussionClicked:s,isResourcesClicked:d})]})]})}var BW=n.p+"static/media/Template_icon.d835741f8a363b19f7ce9bd2c2dafc4d.svg";var FW=n.p+"static/media/Dashboard_icon.40964ffc5a8632d5a57b1349274a9ecb.svg",UW=n(5778);var KW=n.p+"static/media/error.3557151bcd86f06856dcf8b57184760a.svg";var VW=function(e){var n=e.activityName,r=e.numContributions,i=l((0,t.useState)(0),2),o=i[0],a=i[1],s=l((0,t.useState)(!1),2),u=s[0],c=s[1],d=l((0,t.useState)(null),2),h=d[0],p=d[1],v=Sn(),g=JSON.parse(localStorage.getItem("userData")),y=function(){var e=b(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(o<=0)){e.next=3;break}return p("Please select a rating before exiting."),e.abrupt("return");case 3:return e.prev=3,e.next=6,lt.post("http://localhost:5004/api/ratings",{activityName:n,totalRating:o,numContributions:r});case 6:e.sent,c(!0),"mentee"===g.userType?v("/dashboard"):v("/mentorDashboard"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),p("Error submitting rating. Please try again later."),console.error("Error submitting rating:",e.t0);case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}}();return(0,f.jsx)("div",{className:"Ratings",children:(0,f.jsxs)("div",{className:"content",children:[(0,f.jsxs)("p",{id:"rating-p",children:["How would you rate the ",n," activity?"]}),(0,f.jsxs)("div",{id:"error",children:[h&&(0,f.jsx)("img",{src:KW,alt:"exclamation",className:"Erroricon"}),h&&(0,f.jsx)("p",{className:"error-msg",children:h})]}),(0,f.jsx)(UW.Z,{rating:o,starRatedColor:u?"rgb(203, 211, 227)":"gold",changeRating:function(e){a(e),c(!1),p(null)},numberOfStars:5,name:"rating",disabled:u}),(0,f.jsx)("br",{}),u?(0,f.jsx)("p",{children:"Thank you for your rating!"}):(0,f.jsx)("button",{id:"rating-btn",onClick:y,disabled:u,children:"Submit"})]})})};function WW(e){var n=e.editor,r=e.activityName,i=l((0,t.useState)(0),2),o=i[0],a=i[1],s=l((0,t.useState)(!1),2),u=s[0],c=s[1];return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"nav-2",children:(0,f.jsxs)("div",{className:"nav-button ".concat(u?"active":""),onClick:function(){console.log("handleReviewBoardClick "+u),c(!u);for(var e=0,t=0;t<n.shapesArray.length;t++){var r;"note"===n.shapesArray.at(t).type&&""!==(null===(r=n.shapesArray.at(t))||void 0===r?void 0:r.props.text)&&(e+=1)}a(e)},children:[(0,f.jsx)("img",{src:FW,alt:"arrowhead",className:"icon"}),"Dashboard"]})}),u&&(0,f.jsx)(VW,{activityName:r,numContributions:o})]})}var HW=Pl((function(e){var n=e.pageName,r=Ml(),i=r.user,o=i.color,a=i.name,s=l((0,t.useState)(!1),2),u=s[0],c=s[1],d=n,h=Os("s1"),p=Os("s2");return(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)("div",{style:{pointerEvents:"all",display:"flex"},children:[(0,f.jsx)(WW,{editor:r,activityName:d}),(0,f.jsx)(zW,{activityName:d}),(0,f.jsx)("div",{className:"nav-4",children:(0,f.jsxs)("div",{className:"nav-button ".concat(u?"active":""),onClick:function(){c(!u),console.log("Templates clicked: "+u),0==u?function(e){e.createShapes([{id:h,type:"geo",x:128,y:80,props:{geo:"rectangle",w:500,h:680,dash:"draw",color:"light-red",size:"m",text:"What's the problem?",fill:"solid"}}]),e.createShapes([{id:p,type:"geo",x:700,y:80,props:{geo:"rectangle",w:500,h:680,dash:"draw",color:"light-green",size:"m",text:"What's the solution?",fill:"solid"}}])}(r):r.deleteShapes([h,p])},children:[(0,f.jsx)("img",{src:BW,alt:"TemplateIcon",className:"icon"}),"Template"]})}),(0,f.jsx)("input",{type:"color",value:o,onChange:function(e){r.user.updateUserPreferences({color:e.currentTarget.value})}}),(0,f.jsx)("input",{value:a,onChange:function(e){r.user.updateUserPreferences({name:e.currentTarget.value})}})]})})}));function YW(){var e=xn().state.pageName,n=function(e){var n=e.roomId,r=void 0===n?"MENTKNOW":n,i=e.hostUrl,o=void 0===i?"yjs.threepointone.partykit.dev":i,a=l((0,t.useState)((function(){return Ow({shapes:Km})})),1)[0],s=l((0,t.useState)({status:"loading"}),2),u=s[0],c=s[1],d=(0,t.useMemo)((function(){var e=new zU({gc:!0});return{doc:e,room:new CW(o,r,e,{connect:!0}),yRecords:e.getMap("tl_".concat(r))}}),[o,r]),f=d.doc,h=d.room,p=d.yRecords,v=(0,t.useRef)(!1);return(0,t.useEffect)((function(){var e=[];return h.on("status",(function(t){var n=t.status;if("connecting"!==n&&"disconnected"!==n){if("connected"===n)if(v.current)c({store:a,status:"synced-remote",connectionStatus:"online"});else{v.current=!0,0===p.size?(Ji((function(){a.put([Qa.create({id:"document:document"}),Ko.create({id:"page:page",name:"Page 1",index:"a1"})])})),f.transact((function(){var e,t=w(a.allRecords());try{for(t.s();!(e=t.n()).done;){var n=e.value;p.set(n.id,n)}}catch(NG){t.e(NG)}finally{t.f()}}))):Ji((function(){a.clear(),a.put(Array.from(p.values()))})),e.push(a.listen((function(e){var t=e.changes;f.transact((function(){Object.values(t.added).forEach((function(e){p.set(e.id,e)})),Object.values(t.updated).forEach((function(e){var t=l(e,2),n=(t[0],t[1]);p.set(n.id,n)})),Object.values(t.removed).forEach((function(e){p.delete(e.id)}))}))}),{source:"user",scope:"document"}));var r=function(e,t){if(!t.local){var n=[],r=[];e.forEach((function(e){e.changes.keys.forEach((function(e,t){switch(e.action){case"add":case"update":r.push(p.get(t));break;case"delete":n.push(t)}}))})),a.mergeRemoteChanges((function(){n.length&&a.remove(n),r.length&&a.put(r)}))}};p.observeDeep(r),e.push((function(){return p.unobserveDeep(r)}));var i=h.awareness.clientID.toString(),o=Ha.createId(i),s=so("ok",(function(){return iv()})),u=Ya(s,o)(a);h.awareness.setLocalStateField("presence",u.value),e.push(lo("when presence changes",(function(){var e=u.value;requestAnimationFrame((function(){h.awareness.setLocalStateField("presence",e)}))})));var d=function(e){var t,n=h.awareness.getStates(),r=[],i=[],s=w(e.added);try{for(s.s();!(t=s.n()).done;){var u=t.value,l=n.get(u);null!==l&&void 0!==l&&l.presence&&l.presence.id!==o&&i.push(l.presence)}}catch(NG){s.e(NG)}finally{s.f()}var c,d=w(e.updated);try{for(d.s();!(c=d.n()).done;){var f=c.value,p=n.get(f);null!==p&&void 0!==p&&p.presence&&p.presence.id!==o&&i.push(p.presence)}}catch(NG){d.e(NG)}finally{d.f()}var v,g=w(e.removed);try{for(g.s();!(v=g.n()).done;){var m=v.value;r.push(Ha.createId(m.toString()))}}catch(NG){g.e(NG)}finally{g.f()}a.mergeRemoteChanges((function(){r.length&&a.remove(r),i.length&&a.put(i)}))};h.awareness.on("update",d),e.push((function(){return h.awareness.off("update",d)})),c({store:a,status:"synced-remote",connectionStatus:"online"})}}else c({store:a,status:"synced-remote",connectionStatus:"offline"})})),function(){e.forEach((function(e){return e()})),e.length=0}}),[h,f,a,p]),u}({roomId:e+"1234"});return(0,f.jsx)(f.Fragment,{children:(0,f.jsx)("div",{className:"tldraw__editor",children:(0,f.jsx)(tB,{store:n,autoFocus:!0,shareZone:(0,f.jsx)(HW,{pageName:e})})})})}var qW=n.p+"static/media/Arrow_left_light.f42244ced70c72f0930666f1b5d81e99.svg";function XW(e,t){var n;if(void 0===t){var r,i=w(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;null!=o&&(n<o||void 0===n&&o>=o)&&(n=o)}}catch(NG){i.e(NG)}finally{i.f()}}else{var a,s=-1,u=w(e);try{for(u.s();!(a=u.n()).done;){var l=a.value;null!=(l=t(l,++s,e))&&(n<l||void 0===n&&l>=l)&&(n=l)}}catch(NG){u.e(NG)}finally{u.f()}}return n}function $W(e){return e}var GW=1,QW=2,JW=3,ZW=4,eH=1e-6;function tH(e){return"translate("+e+",0)"}function nH(e){return"translate(0,"+e+")"}function rH(e){return function(t){return+e(t)}}function iH(e,t){return t=Math.max(0,e.bandwidth()-2*t)/2,e.round()&&(t=Math.round(t)),function(n){return+e(n)+t}}function oH(){return!this.__axis}function aH(e,t){var n=[],r=null,i=null,o=6,a=6,s=3,u="undefined"!==typeof window&&window.devicePixelRatio>1?0:.5,l=e===GW||e===ZW?-1:1,c=e===ZW||e===QW?"x":"y",d=e===GW||e===JW?tH:nH;function f(f){var h=null==r?t.ticks?t.ticks.apply(t,n):t.domain():r,p=null==i?t.tickFormat?t.tickFormat.apply(t,n):$W:i,v=Math.max(o,0)+s,g=t.range(),m=+g[0]+u,y=+g[g.length-1]+u,b=(t.bandwidth?iH:rH)(t.copy(),u),w=f.selection?f.selection():f,x=w.selectAll(".domain").data([null]),k=w.selectAll(".tick").data(h,t).order(),S=k.exit(),_=k.enter().append("g").attr("class","tick"),E=k.select("line"),C=k.select("text");x=x.merge(x.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),k=k.merge(_),E=E.merge(_.append("line").attr("stroke","currentColor").attr(c+"2",l*o)),C=C.merge(_.append("text").attr("fill","currentColor").attr(c,l*v).attr("dy",e===GW?"0em":e===JW?"0.71em":"0.32em")),f!==w&&(x=x.transition(f),k=k.transition(f),E=E.transition(f),C=C.transition(f),S=S.transition(f).attr("opacity",eH).attr("transform",(function(e){return isFinite(e=b(e))?d(e+u):this.getAttribute("transform")})),_.attr("opacity",eH).attr("transform",(function(e){var t=this.parentNode.__axis;return d((t&&isFinite(t=t(e))?t:b(e))+u)}))),S.remove(),x.attr("d",e===ZW||e===QW?a?"M"+l*a+","+m+"H"+u+"V"+y+"H"+l*a:"M"+u+","+m+"V"+y:a?"M"+m+","+l*a+"V"+u+"H"+y+"V"+l*a:"M"+m+","+u+"H"+y),k.attr("opacity",1).attr("transform",(function(e){return d(b(e)+u)})),E.attr(c+"2",l*o),C.attr(c,l*v).text(p),w.filter(oH).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===QW?"start":e===ZW?"end":"middle"),w.each((function(){this.__axis=b}))}return f.scale=function(e){return arguments.length?(t=e,f):t},f.ticks=function(){return n=Array.from(arguments),f},f.tickArguments=function(e){return arguments.length?(n=null==e?[]:Array.from(e),f):n.slice()},f.tickValues=function(e){return arguments.length?(r=null==e?null:Array.from(e),f):r&&r.slice()},f.tickFormat=function(e){return arguments.length?(i=e,f):i},f.tickSize=function(e){return arguments.length?(o=a=+e,f):o},f.tickSizeInner=function(e){return arguments.length?(o=+e,f):o},f.tickSizeOuter=function(e){return arguments.length?(a=+e,f):a},f.tickPadding=function(e){return arguments.length?(s=+e,f):s},f.offset=function(e){return arguments.length?(u=+e,f):u},f}function sH(e){return aH(JW,e)}function uH(e){return aH(ZW,e)}function lH(){}function cH(e){return null==e?lH:function(){return this.querySelector(e)}}function dH(){return[]}function fH(e){return null==e?dH:function(){return this.querySelectorAll(e)}}function hH(e){return function(){return function(e){return null==e?[]:Array.isArray(e)?e:Array.from(e)}(e.apply(this,arguments))}}function pH(e){return function(){return this.matches(e)}}function vH(e){return function(t){return t.matches(e)}}var gH=Array.prototype.find;function mH(){return this.firstElementChild}var yH=Array.prototype.filter;function bH(){return Array.from(this.children)}function wH(e){return new Array(e.length)}function xH(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function kH(e,t,n,r,i,o){for(var a,s=0,u=t.length,l=o.length;s<l;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new xH(e,o[s]);for(;s<u;++s)(a=t[s])&&(i[s]=a)}function SH(e,t,n,r,i,o,a){var s,u,l,c=new Map,d=t.length,f=o.length,h=new Array(d);for(s=0;s<d;++s)(u=t[s])&&(h[s]=l=a.call(u,u.__data__,s,t)+"",c.has(l)?i[s]=u:c.set(l,u));for(s=0;s<f;++s)l=a.call(e,o[s],s,o)+"",(u=c.get(l))?(r[s]=u,u.__data__=o[s],c.delete(l)):n[s]=new xH(e,o[s]);for(s=0;s<d;++s)(u=t[s])&&c.get(h[s])===u&&(i[s]=u)}function _H(e){return e.__data__}function EH(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function CH(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}xH.prototype={constructor:xH,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var PH="http://www.w3.org/1999/xhtml",IH={svg:"http://www.w3.org/2000/svg",xhtml:PH,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function jH(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),IH.hasOwnProperty(t)?{space:IH[t],local:e}:e}function MH(e){return function(){this.removeAttribute(e)}}function AH(e){return function(){this.removeAttributeNS(e.space,e.local)}}function TH(e,t){return function(){this.setAttribute(e,t)}}function OH(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function NH(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function RH(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function LH(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function DH(e){return function(){this.style.removeProperty(e)}}function zH(e,t,n){return function(){this.style.setProperty(e,t,n)}}function BH(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function FH(e,t){return e.style.getPropertyValue(t)||LH(e).getComputedStyle(e,null).getPropertyValue(t)}function UH(e){return function(){delete this[e]}}function KH(e,t){return function(){this[e]=t}}function VH(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function WH(e){return e.trim().split(/^|\s+/)}function HH(e){return e.classList||new YH(e)}function YH(e){this._node=e,this._names=WH(e.getAttribute("class")||"")}function qH(e,t){for(var n=HH(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function XH(e,t){for(var n=HH(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function $H(e){return function(){qH(this,e)}}function GH(e){return function(){XH(this,e)}}function QH(e,t){return function(){(t.apply(this,arguments)?qH:XH)(this,e)}}function JH(){this.textContent=""}function ZH(e){return function(){this.textContent=e}}function eY(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function tY(){this.innerHTML=""}function nY(e){return function(){this.innerHTML=e}}function rY(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function iY(){this.nextSibling&&this.parentNode.appendChild(this)}function oY(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function aY(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===PH&&t.documentElement.namespaceURI===PH?t.createElement(e):t.createElementNS(n,e)}}function sY(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function uY(e){var t=jH(e);return(t.local?sY:aY)(t)}function lY(){return null}function cY(){var e=this.parentNode;e&&e.removeChild(this)}function dY(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function fY(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function hY(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,o=t.length;r<o;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?t.length=i:delete this.__on}}}function pY(e,t,n){return function(){var r,i=this.__on,o=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(i)for(var a=0,s=i.length;a<s;++a)if((r=i[a]).type===e.type&&r.name===e.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),void(r.value=t);this.addEventListener(e.type,o,n),r={type:e.type,name:e.name,value:t,listener:o,options:n},i?i.push(r):this.__on=[r]}}function vY(e,t,n){var r=LH(e),i=r.CustomEvent;"function"===typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function gY(e,t){return function(){return vY(this,e,t)}}function mY(e,t){return function(){return vY(this,e,t.apply(this,arguments))}}YH.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var yY=m().mark(bY);function bY(){var e,t,n,r,i,o,a;return m().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:e=this._groups,t=0,n=e.length;case 1:if(!(t<n)){s.next=13;break}r=e[t],i=0,o=r.length;case 3:if(!(i<o)){s.next=10;break}if(!(a=r[i])){s.next=7;break}return s.next=7,a;case 7:++i,s.next=3;break;case 10:++t,s.next=1;break;case 13:case"end":return s.stop()}}),yY,this)}var wY=[null];function xY(e,t){this._groups=e,this._parents=t}function kY(){return new xY([[document.documentElement]],wY)}xY.prototype=kY.prototype=vt({constructor:xY,select:function(e){"function"!==typeof e&&(e=cH(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=t[i],u=s.length,l=r[i]=new Array(u),c=0;c<u;++c)(o=s[c])&&(a=e.call(o,o.__data__,c,s))&&("__data__"in o&&(a.__data__=o.__data__),l[c]=a);return new xY(r,this._parents)},selectAll:function(e){e="function"===typeof e?hH(e):fH(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var a,s=t[o],u=s.length,l=0;l<u;++l)(a=s[l])&&(r.push(e.call(a,a.__data__,l,s)),i.push(a));return new xY(r,i)},selectChild:function(e){return this.select(null==e?mH:function(e){return function(){return gH.call(this.children,e)}}("function"===typeof e?e:vH(e)))},selectChildren:function(e){return this.selectAll(null==e?bH:function(e){return function(){return yH.call(this.children,e)}}("function"===typeof e?e:vH(e)))},filter:function(e){"function"!==typeof e&&(e=pH(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a=t[i],s=a.length,u=r[i]=[],l=0;l<s;++l)(o=a[l])&&e.call(o,o.__data__,l,a)&&u.push(o);return new xY(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,_H);var n=t?SH:kH,r=this._parents,i=this._groups;"function"!==typeof e&&(e=function(e){return function(){return e}}(e));for(var o=i.length,a=new Array(o),s=new Array(o),u=new Array(o),l=0;l<o;++l){var c=r[l],d=i[l],f=d.length,h=EH(e.call(c,c&&c.__data__,l,r)),p=h.length,v=s[l]=new Array(p),g=a[l]=new Array(p);n(c,d,v,g,u[l]=new Array(f),h,t);for(var m,y,b=0,w=0;b<p;++b)if(m=v[b]){for(b>=w&&(w=b+1);!(y=g[w])&&++w<p;);m._next=y||null}}return(a=new xY(a,r))._enter=s,a._exit=u,a},enter:function(){return new xY(this._enter||this._groups.map(wH),this._parents)},exit:function(){return new xY(this._exit||this._groups.map(wH),this._parents)},join:function(e,t,n){var r=this.enter(),i=this,o=this.exit();return"function"===typeof e?(r=e(r))&&(r=r.selection()):r=r.append(e+""),null!=t&&(i=t(i))&&(i=i.selection()),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,a=Math.min(i,o),s=new Array(i),u=0;u<a;++u)for(var l,c=n[u],d=r[u],f=c.length,h=s[u]=new Array(f),p=0;p<f;++p)(l=c[p]||d[p])&&(h[p]=l);for(;u<i;++u)s[u]=n[u];return new xY(s,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=CH);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],u=s.length,l=i[o]=new Array(u),c=0;c<u;++c)(a=s[c])&&(l[c]=a);l.sort(t)}return new xY(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){var e,t=0,n=w(this);try{for(n.s();!(e=n.n()).done;){e.value;++t}}catch(NG){n.e(NG)}finally{n.f()}return t},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,o=t[n],a=0,s=o.length;a<s;++a)(i=o[a])&&e.call(i,i.__data__,a,o);return this},attr:function(e,t){var n=jH(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?AH:MH:"function"===typeof t?n.local?RH:NH:n.local?OH:TH)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?DH:"function"===typeof t?BH:zH)(e,t,null==n?"":n)):FH(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?UH:"function"===typeof t?VH:KH)(e,t)):this.node()[e]},classed:function(e,t){var n=WH(e+"");if(arguments.length<2){for(var r=HH(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"===typeof t?QH:t?$H:GH)(n,t))},text:function(e){return arguments.length?this.each(null==e?JH:("function"===typeof e?eY:ZH)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?tY:("function"===typeof e?rY:nY)(e)):this.node().innerHTML},raise:function(){return this.each(iY)},lower:function(){return this.each(oY)},append:function(e){var t="function"===typeof e?e:uY(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"===typeof e?e:uY(e),r=null==t?lY:"function"===typeof t?t:cH(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(cY)},clone:function(e){return this.select(e?fY:dY)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,i,o=function(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}(e+""),a=o.length;if(!(arguments.length<2)){for(s=t?pY:hY,r=0;r<a;++r)this.each(s(o[r],t,n));return this}var s=this.node().__on;if(s)for(var u,l=0,c=s.length;l<c;++l)for(r=0,u=s[l];r<a;++r)if((i=o[r]).type===u.type&&i.name===u.name)return u.value},dispatch:function(e,t){return this.each(("function"===typeof t?mY:gY)(e,t))}},Symbol.iterator,bY);var SY=kY,_Y={value:function(){}};function EY(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new CY(r)}function CY(e){this._=e}function PY(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function IY(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=_Y,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}CY.prototype=EY.prototype={constructor:CY,on:function(e,t){var n,r,i=this._,o=(r=i,(e+"").trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!r.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}}))),a=-1,s=o.length;if(!(arguments.length<2)){if(null!=t&&"function"!==typeof t)throw new Error("invalid callback: "+t);for(;++a<s;)if(n=(e=o[a]).type)i[n]=IY(i[n],e.name,t);else if(null==t)for(n in i)i[n]=IY(i[n],e.name,null);return this}for(;++a<s;)if((n=(e=o[a]).type)&&(n=PY(i[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new CY(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=0,n=(r=this._[e]).length;o<n;++o)r[o].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};var jY,MY,AY=EY,TY=0,OY=0,NY=0,RY=1e3,LY=0,DY=0,zY=0,BY="object"===typeof performance&&performance.now?performance:Date,FY="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function UY(){return DY||(FY(KY),DY=BY.now()+zY)}function KY(){DY=0}function VY(){this._call=this._time=this._next=null}function WY(e,t,n){var r=new VY;return r.restart(e,t,n),r}function HY(){DY=(LY=BY.now())+zY,TY=OY=0;try{!function(){UY(),++TY;for(var e,t=jY;t;)(e=DY-t._time)>=0&&t._call.call(void 0,e),t=t._next;--TY}()}finally{TY=0,function(){var e,t,n=jY,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:jY=t);MY=e,qY(r)}(),DY=0}}function YY(){var e=BY.now(),t=e-LY;t>RY&&(zY-=t,LY=e)}function qY(e){TY||(OY&&(OY=clearTimeout(OY)),e-DY>24?(e<1/0&&(OY=setTimeout(HY,e-BY.now()-zY)),NY&&(NY=clearInterval(NY))):(NY||(LY=BY.now(),NY=setInterval(YY,RY)),TY=1,FY(HY)))}function XY(e,t,n){var r=new VY;return t=null==t?0:+t,r.restart((function(n){r.stop(),e(n+t)}),t,n),r}VY.prototype=WY.prototype={constructor:VY,restart:function(e,t,n){if("function"!==typeof e)throw new TypeError("callback is not a function");n=(null==n?UY():+n)+(null==t?0:+t),this._next||MY===this||(MY?MY._next=this:jY=this,MY=this),this._call=e,this._time=n,qY()},stop:function(){this._call&&(this._call=null,this._time=1/0,qY())}};var $Y=AY("start","end","cancel","interrupt"),GY=[],QY=0,JY=1,ZY=2,eq=3,tq=4,nq=5,rq=6;function iq(e,t,n,r,i,o){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};!function(e,t,n){var r,i=e.__transition;function o(e){n.state=JY,n.timer.restart(a,n.delay,n.time),n.delay<=e&&a(e-n.delay)}function a(o){var l,c,d,f;if(n.state!==JY)return u();for(l in i)if((f=i[l]).name===n.name){if(f.state===eq)return XY(a);f.state===tq?(f.state=rq,f.timer.stop(),f.on.call("interrupt",e,e.__data__,f.index,f.group),delete i[l]):+l<t&&(f.state=rq,f.timer.stop(),f.on.call("cancel",e,e.__data__,f.index,f.group),delete i[l])}if(XY((function(){n.state===eq&&(n.state=tq,n.timer.restart(s,n.delay,n.time),s(o))})),n.state=ZY,n.on.call("start",e,e.__data__,n.index,n.group),n.state===ZY){for(n.state=eq,r=new Array(d=n.tween.length),l=0,c=-1;l<d;++l)(f=n.tween[l].value.call(e,e.__data__,n.index,n.group))&&(r[++c]=f);r.length=c+1}}function s(t){for(var i=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(u),n.state=nq,1),o=-1,a=r.length;++o<a;)r[o].call(e,i);n.state===nq&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){for(var r in n.state=rq,n.timer.stop(),delete i[t],i)return;delete e.__transition}i[t]=n,n.timer=WY(o,0,n.time)}(e,n,{name:t,index:r,group:i,on:$Y,tween:GY,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:QY})}function oq(e,t){var n=sq(e,t);if(n.state>QY)throw new Error("too late; already scheduled");return n}function aq(e,t){var n=sq(e,t);if(n.state>eq)throw new Error("too late; already running");return n}function sq(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function uq(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var lq,cq=180/Math.PI,dq={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function fq(e,t,n,r,i,o){var a,s,u;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),e*r<t*n&&(e=-e,t=-t,u=-u,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*cq,skewX:Math.atan(u)*cq,scaleX:a,scaleY:s}}function hq(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}return function(o,a){var s=[],u=[];return o=e(o),a=e(a),function(e,r,i,o,a,s){if(e!==i||r!==o){var u=a.push("translate(",null,t,null,n);s.push({i:u-4,x:uq(e,i)},{i:u-2,x:uq(r,o)})}else(i||o)&&a.push("translate("+i+t+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,s,u),function(e,t,n,o){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:uq(e,t)})):t&&n.push(i(n)+"rotate("+t+r)}(o.rotate,a.rotate,s,u),function(e,t,n,o){e!==t?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:uq(e,t)}):t&&n.push(i(n)+"skewX("+t+r)}(o.skewX,a.skewX,s,u),function(e,t,n,r,o,a){if(e!==n||t!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:uq(e,n)},{i:s-2,x:uq(t,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,u),o=a=null,function(e){for(var t,n=-1,r=u.length;++n<r;)s[(t=u[n]).i]=t.x(e);return s.join("")}}}var pq=hq((function(e){var t=new("function"===typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?dq:fq(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),vq=hq((function(e){return null==e?dq:(lq||(lq=document.createElementNS("http://www.w3.org/2000/svg","g")),lq.setAttribute("transform",e),(e=lq.transform.baseVal.consolidate())?fq((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):dq)}),", ",")",")");function gq(e,t){var n,r;return function(){var i=aq(this,e),o=i.tween;if(o!==n)for(var a=0,s=(r=n=o).length;a<s;++a)if(r[a].name===t){(r=r.slice()).splice(a,1);break}i.tween=r}}function mq(e,t,n){var r,i;if("function"!==typeof n)throw new Error;return function(){var o=aq(this,e),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=s;break}u===l&&i.push(s)}o.tween=i}}function yq(e,t,n){var r=e._id;return e.each((function(){var e=aq(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return sq(e,r).value[t]}}function bq(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function wq(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function xq(){}var kq=.7,Sq=1/kq,_q="\\s*([+-]?\\d+)\\s*",Eq="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Cq="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Pq=/^#([0-9a-f]{3,8})$/,Iq=new RegExp("^rgb\\(".concat(_q,",").concat(_q,",").concat(_q,"\\)$")),jq=new RegExp("^rgb\\(".concat(Cq,",").concat(Cq,",").concat(Cq,"\\)$")),Mq=new RegExp("^rgba\\(".concat(_q,",").concat(_q,",").concat(_q,",").concat(Eq,"\\)$")),Aq=new RegExp("^rgba\\(".concat(Cq,",").concat(Cq,",").concat(Cq,",").concat(Eq,"\\)$")),Tq=new RegExp("^hsl\\(".concat(Eq,",").concat(Cq,",").concat(Cq,"\\)$")),Oq=new RegExp("^hsla\\(".concat(Eq,",").concat(Cq,",").concat(Cq,",").concat(Eq,"\\)$")),Nq={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Rq(){return this.rgb().formatHex()}function Lq(){return this.rgb().formatRgb()}function Dq(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Pq.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?zq(t):3===n?new Uq(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?Bq(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?Bq(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=Iq.exec(e))?new Uq(t[1],t[2],t[3],1):(t=jq.exec(e))?new Uq(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Mq.exec(e))?Bq(t[1],t[2],t[3],t[4]):(t=Aq.exec(e))?Bq(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Tq.exec(e))?qq(t[1],t[2]/100,t[3]/100,1):(t=Oq.exec(e))?qq(t[1],t[2]/100,t[3]/100,t[4]):Nq.hasOwnProperty(e)?zq(Nq[e]):"transparent"===e?new Uq(NaN,NaN,NaN,0):null}function zq(e){return new Uq(e>>16&255,e>>8&255,255&e,1)}function Bq(e,t,n,r){return r<=0&&(e=t=n=NaN),new Uq(e,t,n,r)}function Fq(e,t,n,r){return 1===arguments.length?function(e){return e instanceof xq||(e=Dq(e)),e?new Uq((e=e.rgb()).r,e.g,e.b,e.opacity):new Uq}(e):new Uq(e,t,n,null==r?1:r)}function Uq(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function Kq(){return"#".concat(Yq(this.r)).concat(Yq(this.g)).concat(Yq(this.b))}function Vq(){var e=Wq(this.opacity);return"".concat(1===e?"rgb(":"rgba(").concat(Hq(this.r),", ").concat(Hq(this.g),", ").concat(Hq(this.b)).concat(1===e?")":", ".concat(e,")"))}function Wq(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Hq(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Yq(e){return((e=Hq(e))<16?"0":"")+e.toString(16)}function qq(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new $q(e,t,n,r)}function Xq(e){if(e instanceof $q)return new $q(e.h,e.s,e.l,e.opacity);if(e instanceof xq||(e=Dq(e)),!e)return new $q;if(e instanceof $q)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,s=o-i,u=(o+i)/2;return s?(a=t===o?(n-r)/s+6*(n<r):n===o?(r-t)/s+2:(t-n)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new $q(a,s,u,e.opacity)}function $q(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Gq(e){return(e=(e||0)%360)<0?e+360:e}function Qq(e){return Math.max(0,Math.min(1,e||0))}function Jq(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function Zq(e,t,n,r,i){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*r+a*i)/6}bq(xq,Dq,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:Rq,formatHex:Rq,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Xq(this).formatHsl()},formatRgb:Lq,toString:Lq}),bq(Uq,Fq,wq(xq,{brighter:function(e){return e=null==e?Sq:Math.pow(Sq,e),new Uq(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?kq:Math.pow(kq,e),new Uq(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},clamp:function(){return new Uq(Hq(this.r),Hq(this.g),Hq(this.b),Wq(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Kq,formatHex:Kq,formatHex8:function(){return"#".concat(Yq(this.r)).concat(Yq(this.g)).concat(Yq(this.b)).concat(Yq(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:Vq,toString:Vq})),bq($q,(function(e,t,n,r){return 1===arguments.length?Xq(e):new $q(e,t,n,null==r?1:r)}),wq(xq,{brighter:function(e){return e=null==e?Sq:Math.pow(Sq,e),new $q(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?kq:Math.pow(kq,e),new $q(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Uq(Jq(e>=240?e-240:e+120,i,r),Jq(e,i,r),Jq(e<120?e+240:e-120,i,r),this.opacity)},clamp:function(){return new $q(Gq(this.h),Qq(this.s),Qq(this.l),Wq(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=Wq(this.opacity);return"".concat(1===e?"hsl(":"hsla(").concat(Gq(this.h),", ").concat(100*Qq(this.s),"%, ").concat(100*Qq(this.l),"%").concat(1===e?")":", ".concat(e,")"))}}));var eX=function(e){return function(){return e}};function tX(e,t){return function(n){return e+n*t}}function nX(e){return 1===(e=+e)?rX:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):eX(isNaN(t)?n:t)}}function rX(e,t){var n=t-e;return n?tX(e,n):eX(isNaN(e)?t:e)}var iX=function e(t){var n=nX(t);function r(e,t){var r=n((e=Fq(e)).r,(t=Fq(t)).r),i=n(e.g,t.g),o=n(e.b,t.b),a=rX(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=o(t),e.opacity=a(t),e+""}}return r.gamma=e,r}(1);function oX(e){return function(t){var n,r,i=t.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=Fq(t[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=e(o),a=e(a),s=e(s),r.opacity=1,function(e){return r.r=o(e),r.g=a(e),r.b=s(e),r+""}}}oX((function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],a=r>0?e[r-1]:2*i-o,s=r<t-1?e[r+2]:2*o-i;return Zq((n-r/t)*t,a,i,o,s)}})),oX((function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],a=e[(r+1)%t],s=e[(r+2)%t];return Zq((n-r/t)*t,i,o,a,s)}}));var aX=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,sX=new RegExp(aX.source,"g");function uX(e,t){var n,r,i,o=aX.lastIndex=sX.lastIndex=0,a=-1,s=[],u=[];for(e+="",t+="";(n=aX.exec(e))&&(r=sX.exec(t));)(i=r.index)>o&&(i=t.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,u.push({i:a,x:uq(n,r)})),o=sX.lastIndex;return o<t.length&&(i=t.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?function(e){return function(t){return e(t)+""}}(u[0].x):function(e){return function(){return e}}(t):(t=u.length,function(e){for(var n,r=0;r<t;++r)s[(n=u[r]).i]=n.x(e);return s.join("")})}function lX(e,t){var n;return("number"===typeof t?uq:t instanceof Dq?iX:(n=Dq(t))?(t=n,iX):uX)(e,t)}function cX(e){return function(){this.removeAttribute(e)}}function dX(e){return function(){this.removeAttributeNS(e.space,e.local)}}function fX(e,t,n){var r,i,o=n+"";return function(){var a=this.getAttribute(e);return a===o?null:a===r?i:i=t(r=a,n)}}function hX(e,t,n){var r,i,o=n+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===o?null:a===r?i:i=t(r=a,n)}}function pX(e,t,n){var r,i,o;return function(){var a,s,u=n(this);if(null!=u)return(a=this.getAttribute(e))===(s=u+"")?null:a===r&&s===i?o:(i=s,o=t(r=a,u));this.removeAttribute(e)}}function vX(e,t,n){var r,i,o;return function(){var a,s,u=n(this);if(null!=u)return(a=this.getAttributeNS(e.space,e.local))===(s=u+"")?null:a===r&&s===i?o:(i=s,o=t(r=a,u));this.removeAttributeNS(e.space,e.local)}}function gX(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}(e,i)),n}return i._value=t,i}function mX(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&function(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}(e,i)),n}return i._value=t,i}function yX(e,t){return function(){oq(this,e).delay=+t.apply(this,arguments)}}function bX(e,t){return t=+t,function(){oq(this,e).delay=t}}function wX(e,t){return function(){aq(this,e).duration=+t.apply(this,arguments)}}function xX(e,t){return t=+t,function(){aq(this,e).duration=t}}var kX=SY.prototype.constructor;function SX(e){return function(){this.style.removeProperty(e)}}var _X=0;function EX(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function CX(){return++_X}var PX=SY.prototype;EX.prototype=function(e){return SY().transition(e)}.prototype=vt({constructor:EX,select:function(e){var t=this._name,n=this._id;"function"!==typeof e&&(e=cH(e));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s,u,l=r[a],c=l.length,d=o[a]=new Array(c),f=0;f<c;++f)(s=l[f])&&(u=e.call(s,s.__data__,f,l))&&("__data__"in s&&(u.__data__=s.__data__),d[f]=u,iq(d[f],t,n,f,d,sq(s,n)));return new EX(o,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!==typeof e&&(e=fH(e));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var u,l=r[s],c=l.length,d=0;d<c;++d)if(u=l[d]){for(var f,h=e.call(u,u.__data__,d,l),p=sq(u,n),v=0,g=h.length;v<g;++v)(f=h[v])&&iq(f,t,n,v,h,p);o.push(h),a.push(u)}return new EX(o,a,t,n)},selectChild:PX.selectChild,selectChildren:PX.selectChildren,filter:function(e){"function"!==typeof e&&(e=pH(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a=t[i],s=a.length,u=r[i]=[],l=0;l<s;++l)(o=a[l])&&e.call(o,o.__data__,l,a)&&u.push(o);return new EX(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u,l=t[s],c=n[s],d=l.length,f=a[s]=new Array(d),h=0;h<d;++h)(u=l[h]||c[h])&&(f[h]=u);for(;s<r;++s)a[s]=t[s];return new EX(a,this._parents,this._name,this._id)},selection:function(){return new kX(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=CX(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],u=s.length,l=0;l<u;++l)if(a=s[l]){var c=sq(a,t);iq(a,e,n,l,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new EX(r,this._parents,e,n)},call:PX.call,nodes:PX.nodes,node:PX.node,size:PX.size,empty:PX.empty,each:PX.each,on:function(e,t){var n=this._id;return arguments.length<2?sq(this.node(),n).on.on(e):this.each(function(e,t,n){var r,i,o=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?oq:aq;return function(){var a=o(this,e),s=a.on;s!==r&&(i=(r=s).copy()).on(t,n),a.on=i}}(n,e,t))},attr:function(e,t){var n=jH(e),r="transform"===n?vq:lX;return this.attrTween(e,"function"===typeof t?(n.local?vX:pX)(n,r,yq(this,"attr."+e,t)):null==t?(n.local?dX:cX)(n):(n.local?hX:fX)(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!==typeof t)throw new Error;var r=jH(e);return this.tween(n,(r.local?gX:mX)(r,t))},style:function(e,t,n){var r="transform"===(e+="")?pq:lX;return null==t?this.styleTween(e,function(e,t){var n,r,i;return function(){var o=FH(this,e),a=(this.style.removeProperty(e),FH(this,e));return o===a?null:o===n&&a===r?i:i=t(n=o,r=a)}}(e,r)).on("end.style."+e,SX(e)):"function"===typeof t?this.styleTween(e,function(e,t,n){var r,i,o;return function(){var a=FH(this,e),s=n(this),u=s+"";return null==s&&(this.style.removeProperty(e),u=s=FH(this,e)),a===u?null:a===r&&u===i?o:(i=u,o=t(r=a,s))}}(e,r,yq(this,"style."+e,t))).each(function(e,t){var n,r,i,o,a="style."+t,s="end."+a;return function(){var u=aq(this,e),l=u.on,c=null==u.value[a]?o||(o=SX(t)):void 0;l===n&&i===c||(r=(n=l).copy()).on(s,i=c),u.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,i,o=n+"";return function(){var a=FH(this,e);return a===o?null:a===r?i:i=t(r=a,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!==typeof t)throw new Error;return this.tween(r,function(e,t,n){var r,i;function o(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&function(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}(e,o,n)),r}return o._value=t,o}(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"===typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(yq(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!==typeof e)throw new Error;return this.tween(t,function(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&function(e){return function(t){this.textContent=e.call(this,t)}}(r)),t}return r._value=e,r}(e))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,i=sq(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===e)return r.value;return null}return this.each((null==t?gq:mq)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?yX:bX)(t,e)):sq(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?wX:xX)(t,e)):sq(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!==typeof t)throw new Error;return function(){aq(this,e).ease=t}}(t,e)):sq(this.node(),t).ease},easeVarying:function(e){if("function"!==typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!==typeof n)throw new Error;aq(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,r=n._id,i=n.size();return new Promise((function(o,a){var s={value:a},u={value:function(){0===--i&&o()}};n.each((function(){var n=aq(this,r),i=n.on;i!==e&&((t=(e=i).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(u)),n.on=t})),0===i&&o()}))}},Symbol.iterator,PX[Symbol.iterator]);var IX={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function jX(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error("transition ".concat(t," not found"));return n}SY.prototype.interrupt=function(e){return this.each((function(){!function(e,t){var n,r,i,o=e.__transition,a=!0;if(o){for(i in t=null==t?null:t+"",o)(n=o[i]).name===t?(r=n.state>ZY&&n.state<nq,n.state=rq,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete e.__transition}}(this,e)}))},SY.prototype.transition=function(e){var t,n;e instanceof EX?(t=e._id,e=e._name):(t=CX(),(n=IX).time=UY(),e=null==e?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],u=s.length,l=0;l<u;++l)(a=s[l])&&iq(a,e,t,l,s,n||jX(a,t));return new EX(r,this._parents,e,t)};Math.abs,Math.max,Math.min;function MX(e){return[+e[0],+e[1]]}function AX(e){return[MX(e[0]),MX(e[1])]}["w","e"].map(TX),["n","s"].map(TX),["n","w","e","s","nw","ne","sw","se"].map(TX);function TX(e){return{type:e}}function OX(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}var NX=function(e){xt(n,e);var t=Et(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zX;if(ne(this,n),r=t.call(this),Object.defineProperties(_t(r),{_intern:{value:new Map},_key:{value:i}}),null!=e){var o,a=w(e);try{for(a.s();!(o=a.n()).done;){var s=l(o.value,2),u=s[0],c=s[1];r.set(u,c)}}catch(NG){a.e(NG)}finally{a.f()}}return r}return oe(n,[{key:"get",value:function(e){return Gd(kt(n.prototype),"get",this).call(this,RX(this,e))}},{key:"has",value:function(e){return Gd(kt(n.prototype),"has",this).call(this,RX(this,e))}},{key:"set",value:function(e,t){return Gd(kt(n.prototype),"set",this).call(this,LX(this,e),t)}},{key:"delete",value:function(e){return Gd(kt(n.prototype),"delete",this).call(this,DX(this,e))}}]),n}(Pt(Map));function RX(e,t){var n=e._intern,r=(0,e._key)(t);return n.has(r)?n.get(r):t}function LX(e,t){var n=e._intern,r=(0,e._key)(t);return n.has(r)?n.get(r):(n.set(r,t),t)}function DX(e,t){var n=e._intern,r=(0,e._key)(t);return n.has(r)&&(t=n.get(r),n.delete(r)),t}function zX(e){return null!==e&&"object"===typeof e?e.valueOf():e}var BX=Symbol("implicit");function FX(){var e=new NX,t=[],n=[],r=BX;function i(i){var o=e.get(i);if(void 0===o){if(r!==BX)return r;e.set(i,o=t.push(i)-1)}return n[o%n.length]}return i.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new NX;var r,o=w(n);try{for(o.s();!(r=o.n()).done;){var a=r.value;e.has(a)||e.set(a,t.push(a)-1)}}catch(NG){o.e(NG)}finally{o.f()}return i},i.range=function(e){return arguments.length?(n=Array.from(e),i):n.slice()},i.unknown=function(e){return arguments.length?(r=e,i):r},i.copy=function(){return FX(t,n).unknown(r)},OX.apply(i,arguments),i}function UX(){var e,t,n=FX().unknown(void 0),r=n.domain,i=n.range,o=0,a=1,s=!1,u=0,c=0,d=.5;function f(){var n=r().length,l=a<o,f=l?a:o,h=l?o:a;e=(h-f)/Math.max(1,n-u+2*c),s&&(e=Math.floor(e)),f+=(h-f-e*(n-u))*d,t=e*(1-u),s&&(f=Math.round(f),t=Math.round(t));var p=function(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),o=new Array(i);++r<i;)o[r]=e+r*n;return o}(n).map((function(t){return f+e*t}));return i(l?p.reverse():p)}return delete n.unknown,n.domain=function(e){return arguments.length?(r(e),f()):r()},n.range=function(e){var t;return arguments.length?(t=l(e,2),o=t[0],a=t[1],o=+o,a=+a,f()):[o,a]},n.rangeRound=function(e){var t;return t=l(e,2),o=t[0],a=t[1],o=+o,a=+a,s=!0,f()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(s=!!e,f()):s},n.padding=function(e){return arguments.length?(u=Math.min(1,c=+e),f()):u},n.paddingInner=function(e){return arguments.length?(u=Math.min(1,e),f()):u},n.paddingOuter=function(e){return arguments.length?(c=+e,f()):c},n.align=function(e){return arguments.length?(d=Math.max(0,Math.min(1,e)),f()):d},n.copy=function(){return UX(r(),[o,a]).round(s).paddingInner(u).paddingOuter(c).align(d)},OX.apply(f(),arguments)}var KX=Math.sqrt(50),VX=Math.sqrt(10),WX=Math.sqrt(2);function HX(e,t,n){var r,i,o,a=(t-e)/Math.max(0,n),s=Math.floor(Math.log10(a)),u=a/Math.pow(10,s),l=u>=KX?10:u>=VX?5:u>=WX?2:1;return s<0?(o=Math.pow(10,-s)/l,(r=Math.round(e*o))/o<e&&++r,(i=Math.round(t*o))/o>t&&--i,o=-o):(o=Math.pow(10,s)*l,(r=Math.round(e/o))*o<e&&++r,(i=Math.round(t/o))*o>t&&--i),i<r&&.5<=n&&n<2?HX(e,t,2*n):[r,i,o]}function YX(e,t,n){return HX(e=+e,t=+t,n=+n)[2]}function qX(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function XX(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function $X(e){var t,n,r;function i(e,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(i<o){if(0!==t(r,r))return o;do{var a=i+o>>>1;n(e[a],r)<0?i=a+1:o=a}while(i<o)}return i}return 2!==e.length?(t=qX,n=function(t,n){return qX(e(t),n)},r=function(t,n){return e(t)-n}):(t=e===qX||e===XX?e:GX,n=e,r=e),{left:i,center:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=i(e,t,n,(arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length)-1);return o>n&&r(e[o-1],t)>-r(e[o],t)?o-1:o},right:function(e,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(i<o){if(0!==t(r,r))return o;do{var a=i+o>>>1;n(e[a],r)<=0?i=a+1:o=a}while(i<o)}return i}}}function GX(){return 0}var QX=$X(qX),JX=QX.right,ZX=(QX.left,$X((function(e){return null===e?NaN:+e})).center,JX);function e$(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=i$(e[n],t[n]);for(;n<r;++n)a[n]=t[n];return function(e){for(n=0;n<i;++n)a[n]=o[n](e);return a}}function t$(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function n$(e,t){var n,r={},i={};for(n in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)n in e?r[n]=i$(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}}function r$(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(o){for(n=0;n<r;++n)i[n]=e[n]*(1-o)+t[n]*o;return i}}function i$(e,t){var n,r=typeof t;return null==t||"boolean"===r?eX(t):("number"===r?uq:"string"===r?(n=Dq(t))?(t=n,iX):uX:t instanceof Dq?iX:t instanceof Date?t$:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}(t)?r$:Array.isArray(t)?e$:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?n$:uq)(e,t)}function o$(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function a$(e){return+e}var s$=[0,1];function u$(e){return e}function l$(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:function(e){return function(){return e}}(isNaN(t)?NaN:.5)}function c$(e,t,n){var r=e[0],i=e[1],o=t[0],a=t[1];return i<r?(r=l$(i,r),o=n(a,o)):(r=l$(r,i),o=n(o,a)),function(e){return o(r(e))}}function d$(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=l$(e[a],e[a+1]),o[a]=n(t[a],t[a+1]);return function(t){var n=ZX(e,t,1,r)-1;return o[n](i[n](t))}}function f$(){var e,t,n,r,i,o,a=s$,s=s$,u=i$,l=u$;function c(){var e=Math.min(a.length,s.length);return l!==u$&&(l=function(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}(a[0],a[e-1])),r=e>2?d$:c$,i=o=null,d}function d(t){return null==t||isNaN(t=+t)?n:(i||(i=r(a.map(e),s,u)))(e(l(t)))}return d.invert=function(n){return l(t((o||(o=r(s,a.map(e),uq)))(n)))},d.domain=function(e){return arguments.length?(a=Array.from(e,a$),c()):a.slice()},d.range=function(e){return arguments.length?(s=Array.from(e),c()):s.slice()},d.rangeRound=function(e){return s=Array.from(e),u=o$,c()},d.clamp=function(e){return arguments.length?(l=!!e||u$,c()):l!==u$},d.interpolate=function(e){return arguments.length?(u=e,c()):u},d.unknown=function(e){return arguments.length?(n=e,d):n},function(n,r){return e=n,t=r,c()}}var h$,p$=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function v$(e){if(!(t=p$.exec(e)))throw new Error("invalid format: "+e);var t;return new g$({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function g$(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function m$(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function y$(e){return(e=m$(Math.abs(e)))?e[1]:NaN}function b$(e,t){var n=m$(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}v$.prototype=g$.prototype,g$.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var w$={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return b$(100*e,t)},r:b$,s:function(e,t){var n=m$(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(h$=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+m$(e,Math.max(0,t+o-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};function x$(e){return e}var k$,S$,_$,E$=Array.prototype.map,C$=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function P$(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?x$:(t=E$.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var i=e.length,o=[],a=0,s=t[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),o.push(e.substring(i-=s,i+s)),!((u+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(n)}),i=void 0===e.currency?"":e.currency[0]+"",o=void 0===e.currency?"":e.currency[1]+"",a=void 0===e.decimal?".":e.decimal+"",s=void 0===e.numerals?x$:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(E$.call(e.numerals,String)),u=void 0===e.percent?"%":e.percent+"",l=void 0===e.minus?"\u2212":e.minus+"",c=void 0===e.nan?"NaN":e.nan+"";function d(e){var t=(e=v$(e)).fill,n=e.align,d=e.sign,f=e.symbol,h=e.zero,p=e.width,v=e.comma,g=e.precision,m=e.trim,y=e.type;"n"===y?(v=!0,y="g"):w$[y]||(void 0===g&&(g=12),m=!0,y="g"),(h||"0"===t&&"="===n)&&(h=!0,t="0",n="=");var b="$"===f?i:"#"===f&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",w="$"===f?o:/[%p]/.test(y)?u:"",x=w$[y],k=/[defgprs%]/.test(y);function S(e){var i,o,u,f=b,S=w;if("c"===y)S=x(e)+S,e="";else{var _=(e=+e)<0||1/e<0;if(e=isNaN(e)?c:x(Math.abs(e),g),m&&(e=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(!+e[r])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}(e)),_&&0===+e&&"+"!==d&&(_=!1),f=(_?"("===d?d:l:"-"===d||"("===d?"":d)+f,S=("s"===y?C$[8+h$/3]:"")+S+(_&&"("===d?")":""),k)for(i=-1,o=e.length;++i<o;)if(48>(u=e.charCodeAt(i))||u>57){S=(46===u?a+e.slice(i+1):e.slice(i))+S,e=e.slice(0,i);break}}v&&!h&&(e=r(e,1/0));var E=f.length+e.length+S.length,C=E<p?new Array(p-E+1).join(t):"";switch(v&&h&&(e=r(C+e,C.length?p-S.length:1/0),C=""),n){case"<":e=f+e+S+C;break;case"=":e=f+C+e+S;break;case"^":e=C.slice(0,E=C.length>>1)+f+e+S+C.slice(E);break;default:e=C+f+e+S}return s(e)}return g=void 0===g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),S.toString=function(){return e+""},S}return{format:d,formatPrefix:function(e,t){var n=d(((e=v$(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(y$(t)/3))),i=Math.pow(10,-r),o=C$[8+r/3];return function(e){return n(i*e)+o}}}}function I$(e,t,n,r){var i,o=function(e,t,n){n=+n;var r=(t=+t)<(e=+e),i=r?YX(t,e,n):YX(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}(e,t,n);switch((r=v$(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(i=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(y$(t)/3)))-y$(Math.abs(e)))}(o,a))||(r.precision=i),_$(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,y$(t)-y$(e))+1}(o,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(e){return Math.max(0,-y$(Math.abs(e)))}(o))||(r.precision=i-2*("%"===r.type))}return S$(r)}function j$(e){var t=e.domain;return e.ticks=function(e){var n=t();return function(e,t,n){if(!((n=+n)>0))return[];if((e=+e)===(t=+t))return[e];var r=t<e,i=l(r?HX(t,e,n):HX(e,t,n),3),o=i[0],a=i[1],s=i[2];if(!(a>=o))return[];var u=a-o+1,c=new Array(u);if(r)if(s<0)for(var d=0;d<u;++d)c[d]=(a-d)/-s;else for(var f=0;f<u;++f)c[f]=(a-f)*s;else if(s<0)for(var h=0;h<u;++h)c[h]=(o+h)/-s;else for(var p=0;p<u;++p)c[p]=(o+p)*s;return c}(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return I$(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,i,o=t(),a=0,s=o.length-1,u=o[a],l=o[s],c=10;for(l<u&&(i=u,u=l,l=i,i=a,a=s,s=i);c-- >0;){if((i=YX(u,l,n))===r)return o[a]=u,o[s]=l,t(o);if(i>0)u=Math.floor(u/i)*i,l=Math.ceil(l/i)*i;else{if(!(i<0))break;u=Math.ceil(u*i)/i,l=Math.floor(l*i)/i}r=i}return e},e}function M$(){var e=f$()(u$,u$);return e.copy=function(){return t=e,M$().domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown());var t},OX.apply(e,arguments),j$(e)}function A$(e,t){if(e=function(e){for(var t;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function T$(e){return"string"===typeof e?new xY([[document.querySelector(e)]],[document.documentElement]):new xY([[e]],wY)}function O$(e){return function(){return e}}k$=P$({thousands:",",grouping:[3],currency:["$",""]}),S$=k$.format,_$=k$.formatPrefix;var N$,R$,L$,D$,z$,B$,F$,U$,K$,V$,W$,H$,Y$,q$,X$=Math.abs,$$=Math.atan2,G$=Math.cos,Q$=Math.max,J$=Math.min,Z$=Math.sin,eG=Math.sqrt,tG=1e-12,nG=Math.PI,rG=nG/2,iG=2*nG;function oG(e){return e>=1?rG:e<=-1?-rG:Math.asin(e)}function aG(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var sG=Math.PI,uG=2*sG,lG=1e-6,cG=uG-lG;function dG(e){this._+=e[0];for(var t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}var fG=function(){function e(t){ne(this,e),this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==t?dG:function(e){var t=Math.floor(e);if(!(t>=0))throw new Error("invalid digits: ".concat(e));if(t>15)return dG;var n=Math.pow(10,t);return function(e){this._+=e[0];for(var t=1,r=e.length;t<r;++t)this._+=Math.round(arguments[t]*n)/n+e[t]}}(t)}return oe(e,[{key:"moveTo",value:function(e,t){this._append(N$||(N$=aG(["M",",",""])),this._x0=this._x1=+e,this._y0=this._y1=+t)}},{key:"closePath",value:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append(R$||(R$=aG(["Z"]))))}},{key:"lineTo",value:function(e,t){this._append(L$||(L$=aG(["L",",",""])),this._x1=+e,this._y1=+t)}},{key:"quadraticCurveTo",value:function(e,t,n,r){this._append(D$||(D$=aG(["Q",",",",",",",""])),+e,+t,this._x1=+n,this._y1=+r)}},{key:"bezierCurveTo",value:function(e,t,n,r,i,o){this._append(z$||(z$=aG(["C",",",",",",",",",",",""])),+e,+t,+n,+r,this._x1=+i,this._y1=+o)}},{key:"arcTo",value:function(e,t,n,r,i){if(e=+e,t=+t,n=+n,r=+r,(i=+i)<0)throw new Error("negative radius: ".concat(i));var o=this._x1,a=this._y1,s=n-e,u=r-t,l=o-e,c=a-t,d=l*l+c*c;if(null===this._x1)this._append(B$||(B$=aG(["M",",",""])),this._x1=e,this._y1=t);else if(d>lG)if(Math.abs(c*s-u*l)>lG&&i){var f=n-o,h=r-a,p=s*s+u*u,v=f*f+h*h,g=Math.sqrt(p),m=Math.sqrt(d),y=i*Math.tan((sG-Math.acos((p+d-v)/(2*g*m)))/2),b=y/m,w=y/g;Math.abs(b-1)>lG&&this._append(U$||(U$=aG(["L",",",""])),e+b*l,t+b*c),this._append(K$||(K$=aG(["A",",",",0,0,",",",",",""])),i,i,+(c*f>l*h),this._x1=e+w*s,this._y1=t+w*u)}else this._append(F$||(F$=aG(["L",",",""])),this._x1=e,this._y1=t);else;}},{key:"arc",value:function(e,t,n,r,i,o){if(e=+e,t=+t,o=!!o,(n=+n)<0)throw new Error("negative radius: ".concat(n));var a=n*Math.cos(r),s=n*Math.sin(r),u=e+a,l=t+s,c=1^o,d=o?r-i:i-r;null===this._x1?this._append(V$||(V$=aG(["M",",",""])),u,l):(Math.abs(this._x1-u)>lG||Math.abs(this._y1-l)>lG)&&this._append(W$||(W$=aG(["L",",",""])),u,l),n&&(d<0&&(d=d%uG+uG),d>cG?this._append(H$||(H$=aG(["A",",",",0,1,",",",",","A",",",",0,1,",",",",",""])),n,n,c,e-a,t-s,n,n,c,this._x1=u,this._y1=l):d>lG&&this._append(Y$||(Y$=aG(["A",",",",0,",",",",",",",""])),n,n,+(d>=sG),c,this._x1=e+n*Math.cos(i),this._y1=t+n*Math.sin(i)))}},{key:"rect",value:function(e,t,n,r){this._append(q$||(q$=aG(["M",",","h","v","h","Z"])),this._x0=this._x1=+e,this._y0=this._y1=+t,n=+n,+r,-n)}},{key:"toString",value:function(){return this._}}]),e}();function hG(e){return e.innerRadius}function pG(e){return e.outerRadius}function vG(e){return e.startAngle}function gG(e){return e.endAngle}function mG(e){return e&&e.padAngle}function yG(e,t,n,r,i,o,a){var s=e-n,u=t-r,l=(a?o:-o)/eG(s*s+u*u),c=l*u,d=-l*s,f=e+c,h=t+d,p=n+c,v=r+d,g=(f+p)/2,m=(h+v)/2,y=p-f,b=v-h,w=y*y+b*b,x=i-o,k=f*v-p*h,S=(b<0?-1:1)*eG(Q$(0,x*x*w-k*k)),_=(k*b-y*S)/w,E=(-k*y-b*S)/w,C=(k*b+y*S)/w,P=(-k*y+b*S)/w,I=_-g,j=E-m,M=C-g,A=P-m;return I*I+j*j>M*M+A*A&&(_=C,E=P),{cx:_,cy:E,x01:-c,y01:-d,x11:_*(i/x-1),y11:E*(i/x-1)}}function bG(){var e=hG,t=pG,n=O$(0),r=null,i=vG,o=gG,a=mG,s=null,u=function(e){var t=3;return e.digits=function(n){if(!arguments.length)return t;if(null==n)t=null;else{var r=Math.floor(n);if(!(r>=0))throw new RangeError("invalid digits: ".concat(n));t=r}return e},function(){return new fG(t)}}(l);function l(){var l,c,d=+e.apply(this,arguments),f=+t.apply(this,arguments),h=i.apply(this,arguments)-rG,p=o.apply(this,arguments)-rG,v=X$(p-h),g=p>h;if(s||(s=l=u()),f<d&&(c=f,f=d,d=c),f>tG)if(v>iG-tG)s.moveTo(f*G$(h),f*Z$(h)),s.arc(0,0,f,h,p,!g),d>tG&&(s.moveTo(d*G$(p),d*Z$(p)),s.arc(0,0,d,p,h,g));else{var m,y,b=h,w=p,x=h,k=p,S=v,_=v,E=a.apply(this,arguments)/2,C=E>tG&&(r?+r.apply(this,arguments):eG(d*d+f*f)),P=J$(X$(f-d)/2,+n.apply(this,arguments)),I=P,j=P;if(C>tG){var M=oG(C/d*Z$(E)),A=oG(C/f*Z$(E));(S-=2*M)>tG?(x+=M*=g?1:-1,k-=M):(S=0,x=k=(h+p)/2),(_-=2*A)>tG?(b+=A*=g?1:-1,w-=A):(_=0,b=w=(h+p)/2)}var T=f*G$(b),O=f*Z$(b),N=d*G$(k),R=d*Z$(k);if(P>tG){var L,D=f*G$(w),z=f*Z$(w),B=d*G$(x),F=d*Z$(x);if(v<nG)if(L=function(e,t,n,r,i,o,a,s){var u=n-e,l=r-t,c=a-i,d=s-o,f=d*u-c*l;if(!(f*f<tG))return[e+(f=(c*(t-o)-d*(e-i))/f)*u,t+f*l]}(T,O,B,F,D,z,N,R)){var U=T-L[0],K=O-L[1],V=D-L[0],W=z-L[1],H=1/Z$(function(e){return e>1?0:e<-1?nG:Math.acos(e)}((U*V+K*W)/(eG(U*U+K*K)*eG(V*V+W*W)))/2),Y=eG(L[0]*L[0]+L[1]*L[1]);I=J$(P,(d-Y)/(H-1)),j=J$(P,(f-Y)/(H+1))}else I=j=0}_>tG?j>tG?(m=yG(B,F,T,O,f,j,g),y=yG(D,z,N,R,f,j,g),s.moveTo(m.cx+m.x01,m.cy+m.y01),j<P?s.arc(m.cx,m.cy,j,$$(m.y01,m.x01),$$(y.y01,y.x01),!g):(s.arc(m.cx,m.cy,j,$$(m.y01,m.x01),$$(m.y11,m.x11),!g),s.arc(0,0,f,$$(m.cy+m.y11,m.cx+m.x11),$$(y.cy+y.y11,y.cx+y.x11),!g),s.arc(y.cx,y.cy,j,$$(y.y11,y.x11),$$(y.y01,y.x01),!g))):(s.moveTo(T,O),s.arc(0,0,f,b,w,!g)):s.moveTo(T,O),d>tG&&S>tG?I>tG?(m=yG(N,R,D,z,d,-I,g),y=yG(T,O,B,F,d,-I,g),s.lineTo(m.cx+m.x01,m.cy+m.y01),I<P?s.arc(m.cx,m.cy,I,$$(m.y01,m.x01),$$(y.y01,y.x01),!g):(s.arc(m.cx,m.cy,I,$$(m.y01,m.x01),$$(m.y11,m.x11),!g),s.arc(0,0,d,$$(m.cy+m.y11,m.cx+m.x11),$$(y.cy+y.y11,y.cx+y.x11),g),s.arc(y.cx,y.cy,I,$$(y.y11,y.x11),$$(y.y01,y.x01),!g))):s.arc(0,0,d,k,x,g):s.lineTo(N,R)}else s.moveTo(0,0);if(s.closePath(),l)return s=null,l+""||null}return l.centroid=function(){var n=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-nG/2;return[G$(r)*n,Z$(r)*n]},l.innerRadius=function(t){return arguments.length?(e="function"===typeof t?t:O$(+t),l):e},l.outerRadius=function(e){return arguments.length?(t="function"===typeof e?e:O$(+e),l):t},l.cornerRadius=function(e){return arguments.length?(n="function"===typeof e?e:O$(+e),l):n},l.padRadius=function(e){return arguments.length?(r=null==e?null:"function"===typeof e?e:O$(+e),l):r},l.startAngle=function(e){return arguments.length?(i="function"===typeof e?e:O$(+e),l):i},l.endAngle=function(e){return arguments.length?(o="function"===typeof e?e:O$(+e),l):o},l.padAngle=function(e){return arguments.length?(a="function"===typeof e?e:O$(+e),l):a},l.context=function(e){return arguments.length?(s=null==e?null:e,l):s},l}fG.prototype;Array.prototype.slice;function wG(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function xG(e){return e}function kG(){var e=xG,t=wG,n=null,r=O$(0),i=O$(iG),o=O$(0);function a(a){var s,u,l,c,d,f=(a=function(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}(a)).length,h=0,p=new Array(f),v=new Array(f),g=+r.apply(this,arguments),m=Math.min(iG,Math.max(-iG,i.apply(this,arguments)-g)),y=Math.min(Math.abs(m)/f,o.apply(this,arguments)),b=y*(m<0?-1:1);for(s=0;s<f;++s)(d=v[p[s]=s]=+e(a[s],s,a))>0&&(h+=d);for(null!=t?p.sort((function(e,n){return t(v[e],v[n])})):null!=n&&p.sort((function(e,t){return n(a[e],a[t])})),s=0,l=h?(m-f*b)/h:0;s<f;++s,g=c)u=p[s],c=g+((d=v[u])>0?d*l:0)+b,v[u]={data:a[u],index:s,value:d,startAngle:g,endAngle:c,padAngle:y};return v}return a.value=function(t){return arguments.length?(e="function"===typeof t?t:O$(+t),a):e},a.sortValues=function(e){return arguments.length?(t=e,n=null,a):t},a.sort=function(e){return arguments.length?(n=e,t=null,a):n},a.startAngle=function(e){return arguments.length?(r="function"===typeof e?e:O$(+e),a):r},a.endAngle=function(e){return arguments.length?(i="function"===typeof e?e:O$(+e),a):i},a.padAngle=function(e){return arguments.length?(o="function"===typeof e?e:O$(+e),a):o},a}function SG(e,t,n){this.k=e,this.x=t,this.y=n}SG.prototype={constructor:SG,scale:function(e){return 1===e?this:new SG(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new SG(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new SG(1,0,0);SG.prototype;var _G=function(){var e=l((0,t.useState)(!0),2),n=e[0],r=e[1],i=l((0,t.useState)([]),2),o=i[0],a=i[1],s=(0,t.useRef)(),u=(0,t.useRef)();return(0,t.useEffect)((function(){fetch("http://localhost:5004/api/analytics").then((function(e){return e.json()})).then((function(e){var t=e.map((function(e){return mt(mt({},e),{},{averageRating:parseFloat(e.averageRating.toFixed(2))})}));a(t),r(!1)}))}),[]),(0,t.useEffect)((function(){if(o&&0!==o.length){var e=T$(s.current);e.selectAll("*").remove();var t=42,n=73,r=67,i=108,a=UX().domain(o.map((function(e){return e.activityName}))).range([i,600-n]).padding(.1),c=M$().domain([0,XW(o,(function(e){return e.averageRating}))]).nice().range([366-r,t]),d=FX().domain(o.map((function(e){return e.activityName}))).range(["#B5179E","#F72585","#7209B7","#D2D2D2","#46236E","#3A0CA3"]);e.append("g").selectAll("rect").data(o).join("rect").attr("x",(function(e){return a(e.activityName)})).attr("y",(function(e){return c(e.averageRating)})).attr("height",(function(e){return c(0)-c(e.averageRating)})).attr("width",a.bandwidth()).attr("fill",(function(e){return d(e.activityName)})).on("mouseover",(function(t,n){T$(this).transition().duration(100).style("opacity",.6);var r=l(A$(t,e.node()),2),i=r[0],o=r[1];T$(u.current).style("visibility","visible").text(n.activityName+": "+n.averageRating).style("top",o-30+"px").style("left",i+15+"px")})).on("mouseout",(function(e){T$(this).transition().duration(100).style("opacity",1),T$(u.current).style("visibility","hidden")})),e.append("text").attr("transform","rotate(-90)").attr("y",65).attr("x",-183).attr("dy","1em").style("text-anchor","middle").style("font-size","14px").style("fill","#000").style("font-style","normal").style("font-weight","500").style("line-height","normal").style("font-family","Familjen Grotesk").text("Average Rating (Stars)"),e.append("text").attr("x",300).attr("y",t/2).attr("text-anchor","middle").style("font-size","16px").style("fill","#000").style("font-style","normal").style("font-weight","500").style("line-height","27.5px").style("font-family","Familjen Grotesk").style("letter-spacing","-0.32px").text("Average Rating per Topic"),e.append("g").attr("transform","translate(0,".concat(366-r,")")).call(sH(a).tickSize(0)).selectAll("text").attr("transform","rotate(-45)").attr("dy","0.35em").attr("dx","-0.75em").style("text-anchor","end"),e.append("g").attr("transform","translate(".concat(i,",0)")).call(uH(c).tickSize(0)),e.append("g").attr("transform","translate(".concat(i,",0)")).call(uH(c).tickSize(0))}}),[o]),(0,f.jsx)("div",{className:"outer-container-bargraph",children:n?(0,f.jsx)("div",{className:"loading-spinner"}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{ref:u,className:"tooltip",style:{position:"absolute",visibility:"hidden",background:"#eee",padding:"5px",borderRadius:"5px"}}),(0,f.jsx)("svg",{ref:s,width:600,height:400})]})})};var EG=function(){var e=l((0,t.useState)([]),2),n=e[0],r=e[1],i=(0,t.useRef)(),o=l((0,t.useState)(!0),2),a=o[0],s=o[1];return(0,t.useEffect)((function(){fetch("http://localhost:5004/api/analytics").then((function(e){return e.json()})).then((function(e){var t=e.map((function(e){return mt(mt({},e),{},{averageRating:parseFloat(e.averageRating.toFixed(1))})}));r(t),s(!1)}))}),[]),(0,t.useEffect)((function(){if(n&&0!==n.length){var e=T$(i.current);e.selectAll("*").remove();e.append("text").attr("x",160).attr("y",33).attr("text-anchor","middle").style("fill","#000").style("font-family","Familjen Grotesk").style("font-size","16px").style("font-style","normal").style("font-weight","500").style("line-height","27.5px").style("letter-spacing","-0.32px").text("Number of contribution each topic");var t=bG().innerRadius(0).outerRadius(112),r=bG().innerRadius(0).outerRadius(122),o=kG().value((function(e){return e.numContributions})),a=FX().domain(n.map((function(e){return e.activityName}))).range(["#B5179E","#F72585","#7209B7","#D2D2D2","#46236E","#3A0CA3"]),s=o(n),u=function(e,t){var n=0;if(void 0===t){var r,i=w(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;(o=+o)&&(n+=o)}}catch(NG){i.e(NG)}finally{i.f()}}else{var a,s=-1,u=w(e);try{for(u.s();!(a=u.n()).done;){var l=a.value;(l=+t(l,++s,e))&&(n+=l)}}catch(NG){u.e(NG)}finally{u.f()}}return n}(n,(function(e){return e.numContributions})),l=(e.append("g").attr("transform","translate(".concat(160,", ").concat(155,")")).selectAll("path").data(s).join("path").attr("fill",(function(e){return a(e.data.activityName)})).attr("d",t).on("mouseover",(function(){T$(this).transition().duration(200).attr("d",r)})).on("mouseout",(function(){T$(this).transition().duration(200).attr("d",t)})).append("title").text((function(e){return"".concat((e.data.numContributions/u*100).toFixed(1),"%")})),e.append("g").attr("transform","translate(".concat(160,", ").concat(155,")")).selectAll("text").data(s).join("text").attr("transform",(function(e){return"translate(".concat(t.centroid(e),")")})).attr("dy","0.35em").attr("text-anchor","middle").text((function(e){return 0!==e.data.numContributions?"".concat((e.data.numContributions/u*100).toFixed(1),"%"):""})));l.on("mouseover",(function(){T$(this).style("font-size","18px")})).on("mouseout",(function(){T$(this).style("font-size","16px")}));e.append("text").attr("x",310).attr("y",105).style("fill","#000").style("font-family","Familjen Grotesk").style("font-size","16px").style("font-style","normal").style("font-weight","500").style("line-height","22.5px").style("letter-spacing","-0.32px").text("Activity topic");var c=e.append("g").attr("transform","translate(".concat(280,", ").concat(120,")")).selectAll("g").data(s.filter((function(e){return 0!==e.data.numContributions}))).join("g").attr("transform",(function(e,t){return"translate(".concat(t%2*120,", ").concat(20*Math.floor(t/2),")")}));c.append("rect").attr("width",10).attr("height",10).attr("fill",(function(e){return a(e.data.activityName)})),c.append("text").attr("x",15).attr("y",9).style("font-size","10px").style("fill","#000").style("font-style","normal").style("font-weight","500").style("line-height","normal").style("font-family","Familjen Grotesk").text((function(e){return e.data.activityName}))}}),[n]),a?(0,f.jsx)("div",{className:"spinning-spinner"}):(0,f.jsx)("div",{className:"pie-chart-container",children:(0,f.jsx)("svg",{ref:i,width:560,height:312})})};var CG=function(){var e=l((0,t.useState)([]),2),n=e[0],r=e[1],i=(0,t.useRef)(),o=l((0,t.useState)(!0),2),a=o[0],s=o[1];return(0,t.useEffect)((function(){s(!0),fetch("http://localhost:5004/api/analytics").then((function(e){return e.json()})).then((function(e){r(e.map((function(e){return{avgRating:parseFloat(e.averageRating.toFixed(2)),contributions:e.numContributions,activityName:e.activityName}}))),s(!1)}))}),[]),(0,t.useEffect)((function(){if(n&&0!==n.length){var e=T$(i.current);e.selectAll("*").remove();var t=20,r=20,o=40,a=40,s=450-a-r,u=300,l=M$().domain([0,XW(n,(function(e){return e.contributions}))]).range([a,s-r]),c=M$().domain([0,5]).range([u-o,t]),d=FX().domain(n.map((function(e){return e.activityName}))).range(["#B5179E","#F72585","#7209B7","#D2D2D2","#46236E","#3A0CA3"]),f=e.append("text").attr("font-size","12px").style("opacity",0);e.append("g").selectAll("circle").data(n).join("circle").attr("cx",(function(e){return l(e.contributions)})).attr("cy",(function(e){return c(e.avgRating)})).attr("r",6).attr("fill",(function(e){return d(e.activityName)})).on("mouseover",(function(e,t){T$(e.currentTarget).transition().attr("r",12);var n=A$(e)[0],r=A$(e)[1];f.attr("x",n+15).attr("y",r).text("".concat(t.activityName," (").concat(t.contributions,", ").concat(t.avgRating,")")).style("opacity",1)})).on("mouseout",(function(e){T$(e.currentTarget).transition().attr("r",6),f.style("opacity",0)})),e.append("g").attr("transform","translate(0,".concat(u-o,")")).call(sH(l).ticks(4).tickSize(0).tickSizeOuter(0)).selectAll("path").attr("stroke","none"),e.append("g").attr("transform","translate(".concat(a,",0)")).call(uH(c).ticks(4).tickSize(0)).selectAll("path").attr("stroke","none"),e.append("text").attr("transform","translate(".concat(s/2+40,",").concat(u-o+40,")")).style("text-anchor","middle").text("Number of Contributions (Sticky Notes)").attr("fill","#000").attr("font-family","Familjen Grotesk").attr("font-size","14px").attr("font-weight","500"),e.append("text").attr("transform","rotate(-90)").attr("y",a-45).attr("x",-150).attr("dy","1em").style("text-anchor","middle").text("Average Rating (Stars)").attr("fill","#000").attr("font-family","Familjen Grotesk").attr("font-size","14px").attr("font-weight","500")}}),[n]),(0,f.jsx)("div",{className:"bottom-left-span",children:a?(0,f.jsx)("div",{className:"loading-spinner"}):(0,f.jsxs)("div",{className:"panel-mover",children:[(0,f.jsx)("p",{className:"scatter-plot-heading-style",children:"Topic Rating vs Number of Contributions"}),(0,f.jsx)("svg",{ref:i,width:800,height:400})]})})};var PG=function(){var e=l((0,t.useState)([]),2),n=e[0],r=e[1],i=Sn(),o=l((0,t.useState)(null),2),a=(o[0],o[1],JSON.parse(localStorage.getItem("userData")),l((0,t.useState)(0),2)),s=a[0],u=a[1],c=l((0,t.useState)(0),2),d=c[0],h=c[1];(0,t.useEffect)((function(){fetch("http://localhost:5004/api/analytics").then((function(e){return e.json()})).then((function(e){return r(e)}))}),[]),(0,t.useEffect)((function(){fetch("http://localhost:5004/api/totalContributions").then((function(e){return e.json()})).then((function(e){return h(e.totalContributions)})).catch((function(e){return console.error("Error fetching total contributions:",e)}))}),[]);var p=n.reduce((function(e,t){return t.numContributions>e.numContributions?t:e}),n[0]),v=n.reduce((function(e,t){return t.averageRating>e.averageRating?t:e}),n[0]);(0,t.useEffect)((function(){fetch("http://localhost:5004/api/users/total-mentees-count").then((function(e){return e.json()})).then((function(e){u(e.menteeCount)}))}),[]);var g=0;return s>0&&d>0&&(g=d/s,g=parseFloat(g.toFixed(2))),(0,f.jsxs)("div",{className:"whole-dashboard-container2",children:[(0,f.jsxs)("div",{className:"left-container",children:[(0,f.jsx)("img",{className:"logo-dashboard",src:Kn,alt:"MentKnow Logo"}),(0,f.jsxs)("div",{className:"logout-style",onClick:function(){localStorage.removeItem("userData"),i("/signin")},children:[(0,f.jsx)("img",{className:"signout-image-container",src:Hn,alt:"Sign out"}),(0,f.jsx)("h1",{className:"logout-text-stye",children:"Log Out"})]})]}),(0,f.jsxs)("div",{className:"right-container1",children:[(0,f.jsxs)("div",{className:"move-back-container",onClick:function(){i("/mentorDashboard")},children:[(0,f.jsx)("img",{className:"dashboard-image-container",src:qW,alt:"Sign out"}),(0,f.jsx)("p",{className:"go-to-dashboard-text",children:"Dashboard"})]}),(0,f.jsxs)("div",{className:"Analytics-middle-container",children:[(0,f.jsx)("div",{className:"mentor-header-heading-outer1",children:(0,f.jsx)("div",{className:"mentor-header-heading-inner1",children:(0,f.jsx)("h1",{className:"mentee-text-style",children:"Mentee Analytics Dashboard"})})}),(0,f.jsxs)("div",{className:"top-row",children:[(0,f.jsxs)("div",{className:"top-left-stat-container",children:[(0,f.jsxs)("div",{className:"upper-part-row-style",children:[(0,f.jsxs)("div",{className:"top-left-style",children:[v&&(0,f.jsx)("h1",{className:"top-left-tile-text-header",children:v.activityName}),(0,f.jsx)("p",{className:"top-left-tile-text-paragraph",children:"Most Popular"})]}),(0,f.jsxs)("div",{className:"top-right-style",children:[p&&(0,f.jsx)("h1",{className:"top-left-tile-text-header",children:p.activityName}),(0,f.jsx)("p",{className:"top-left-tile-text-paragraph",children:"Most Contributions"})]})]}),(0,f.jsxs)("div",{className:"upper-part-row-style",children:[(0,f.jsx)("div",{className:"bottom-left-style",children:(0,f.jsxs)("div",{className:"mentee-count-container-seperator",children:[(0,f.jsx)("h1",{className:"total-mentees-count-style",children:g}),(0,f.jsxs)("div",{children:[(0,f.jsx)("p",{className:"mentee-para",children:"Avg. Contribution"}),(0,f.jsx)("p",{className:"mentee-para1",children:"/mentee"})]})]})}),(0,f.jsx)("div",{className:"bottom-right-style",children:(0,f.jsxs)("div",{className:"mentee-count-container-seperator",children:[(0,f.jsx)("h1",{className:"total-mentees-count-style",children:s}),(0,f.jsxs)("div",{children:[(0,f.jsx)("p",{className:"mentee-para",children:"Mentees in the"}),(0,f.jsx)("p",{className:"mentee-para1",children:"Program"})]})]})})]})]}),(0,f.jsx)(EG,{})]}),(0,f.jsxs)("div",{className:"upper-part-row-style",children:[(0,f.jsx)(_G,{}),(0,f.jsx)(CG,{})]})]})]})]})};new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);var IG=r.startTransition;function jG(e){var n=e.basename,r=e.children,i=e.future,o=e.window,a=t.useRef();null==a.current&&(a.current=function(e){return void 0===e&&(e={}),zt((function(e,t){var n=e.location;return Rt("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:Lt(t)}),null,e)}({window:o,v5Compat:!0}));var s=a.current,u=l(t.useState({action:s.action,location:s.location}),2),c=u[0],d=u[1],f=(i||{}).v7_startTransition,h=t.useCallback((function(e){f&&IG?IG((function(){return d(e)})):d(e)}),[d,f]);return t.useLayoutEffect((function(){return s.listen(h)}),[s,h]),t.createElement(Dn,{basename:n,children:r,location:c.location,navigationType:c.action,navigator:s})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var MG,AG;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher"})(MG||(MG={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(AG||(AG={}));function TG(){var e=l((0,t.useState)(null),2),n=e[0],r=e[1],i=localStorage.getItem("token");return i&&(lt.defaults.headers.common["x-auth-token"]=i),(0,f.jsx)(bt.Provider,{value:{user:n,setUser:r},children:(0,f.jsx)(jG,{children:(0,f.jsxs)(zn,{children:[(0,f.jsx)(Ln,{path:"/Whiteboard",element:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(YW,{}),(0,f.jsx)(pt,{className:"NavigationBar"})]})}),(0,f.jsx)(Ln,{path:"/signin",element:(0,f.jsx)(Vn,{})}),(0,f.jsx)(Ln,{path:"/dashboard",element:(0,f.jsx)(rB,{})}),(0,f.jsx)(Ln,{path:"/register",element:(0,f.jsx)(Wn,{})}),(0,f.jsx)(Ln,{path:"/createPoll",element:(0,f.jsx)(ht,{})}),(0,f.jsx)(Ln,{path:"/",element:(0,f.jsx)(Rn,{to:"/signin"})}),(0,f.jsx)(Ln,{path:"/mentorDashboard",element:(0,f.jsx)(aB,{})}),(0,f.jsx)(Ln,{path:"/Analytics",element:(0,f.jsx)(PG,{})}),(0,f.jsx)(Ln,{path:"/barchart",element:(0,f.jsx)(_G,{})}),(0,f.jsx)(Ln,{path:"/piechart",element:(0,f.jsx)(EG,{})}),(0,f.jsx)(Ln,{path:"/histogram",element:(0,f.jsx)(CG,{})})]})})})}var OG=document.getElementById("root");i.createRoot(OG).render((0,f.jsxs)(t.StrictMode,{children:[(0,f.jsx)("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/icon?family=Material+Icons"}),(0,f.jsx)(TG,{})]}))}()}();
//# sourceMappingURL=main.445e208a.js.map