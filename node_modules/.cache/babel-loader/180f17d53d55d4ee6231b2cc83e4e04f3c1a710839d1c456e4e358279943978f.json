{"ast":null,"code":"import _objectSpread from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _classCallCheck from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _assertThisInitialized from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _inherits from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport _defineProperty from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport { createShapeId } from \"@tldraw/tlschema\";\nimport { NoteShapeUtil } from \"../../../shapes/note/NoteShapeUtil.mjs\";\nimport { StateNode } from \"../../../tools/StateNode.mjs\";\nvar Pointing = /*#__PURE__*/function (_StateNode) {\n  _inherits(Pointing, _StateNode);\n  var _super = _createSuper(Pointing);\n  function Pointing() {\n    var _this;\n    _classCallCheck(this, Pointing);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _super.call.apply(_super, [this].concat(args));\n    _defineProperty(_assertThisInitialized(_this), \"dragged\", false);\n    _defineProperty(_assertThisInitialized(_this), \"info\", {});\n    _defineProperty(_assertThisInitialized(_this), \"wasFocusedOnEnter\", false);\n    _defineProperty(_assertThisInitialized(_this), \"markPointId\", \"creating\");\n    _defineProperty(_assertThisInitialized(_this), \"onEnter\", function () {\n      _this.wasFocusedOnEnter = !_this.editor.isMenuOpen;\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onPointerMove\", function (info) {\n      if (_this.editor.inputs.isDragging) {\n        _this.editor.mark(_this.markPointId);\n        var shape = _this.createShape();\n        if (!shape) return;\n        _this.editor.setSelectedTool(\"select.translating\", _objectSpread(_objectSpread({}, info), {}, {\n          target: \"shape\",\n          shape: shape,\n          isCreating: true,\n          editAfterComplete: true,\n          onInteractionEnd: \"note\"\n        }));\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onPointerUp\", function () {\n      _this.complete();\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onInterrupt\", function () {\n      _this.cancel();\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onComplete\", function () {\n      _this.complete();\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onCancel\", function () {\n      _this.cancel();\n    });\n    return _this;\n  }\n  _createClass(Pointing, [{\n    key: \"complete\",\n    value: function complete() {\n      if (!this.wasFocusedOnEnter) {\n        return;\n      }\n      this.editor.mark(this.markPointId);\n      var shape = this.createShape();\n      if (this.editor.instanceState.isToolLocked) {\n        this.parent.transition(\"idle\", {});\n      } else {\n        if (!shape) return;\n        this.editor.setEditingId(shape.id);\n        this.editor.setSelectedTool(\"select.editing_shape\", _objectSpread(_objectSpread({}, this.info), {}, {\n          target: \"shape\",\n          shape: shape\n        }));\n      }\n    }\n  }, {\n    key: \"cancel\",\n    value: function cancel() {\n      this.editor.bailToMark(this.markPointId);\n      this.parent.transition(\"idle\", this.info);\n    }\n  }, {\n    key: \"createShape\",\n    value: function createShape() {\n      var originPagePoint = this.editor.inputs.originPagePoint;\n      var id = createShapeId();\n      this.editor.createShapes([{\n        id: id,\n        type: \"note\",\n        x: originPagePoint.x,\n        y: originPagePoint.y\n      }], true);\n      var util = this.editor.getShapeUtil(NoteShapeUtil);\n      var shape = this.editor.getShapeById(id);\n      var bounds = util.bounds(shape);\n      this.editor.updateShapes([{\n        id: id,\n        type: \"note\",\n        x: shape.x - bounds.width / 2,\n        y: shape.y - bounds.height / 2\n      }]);\n      return this.editor.getShapeById(id);\n    }\n  }]);\n  return Pointing;\n}(StateNode);\n_defineProperty(Pointing, \"id\", \"pointing\");\nexport { Pointing };","map":{"version":3,"names":["createShapeId","NoteShapeUtil","StateNode","Pointing","_StateNode","_inherits","_super","_createSuper","_this","_classCallCheck","_len","arguments","length","args","Array","_key","call","apply","concat","_defineProperty","_assertThisInitialized","wasFocusedOnEnter","editor","isMenuOpen","info","inputs","isDragging","mark","markPointId","shape","createShape","setSelectedTool","_objectSpread","target","isCreating","editAfterComplete","onInteractionEnd","complete","cancel","_createClass","key","value","instanceState","isToolLocked","parent","transition","setEditingId","id","bailToMark","originPagePoint","createShapes","type","x","y","util","getShapeUtil","getShapeById","bounds","updateShapes","width","height"],"sources":["/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@tldraw/editor/src/lib/editor/shapes/note/toolStates/Pointing.ts"],"sourcesContent":["import { TLNoteShape, createShapeId } from '@tldraw/tlschema'\nimport { NoteShapeUtil } from '../../../shapes/note/NoteShapeUtil'\nimport { StateNode } from '../../../tools/StateNode'\nimport { TLEventHandlers, TLInterruptEvent, TLPointerEventInfo } from '../../../types/event-types'\n\nexport class Pointing extends StateNode {\n\tstatic override id = 'pointing'\n\n\tdragged = false\n\n\tinfo = {} as TLPointerEventInfo\n\n\twasFocusedOnEnter = false\n\n\tmarkPointId = 'creating'\n\n\tonEnter = () => {\n\t\tthis.wasFocusedOnEnter = !this.editor.isMenuOpen\n\t}\n\n\tonPointerMove: TLEventHandlers['onPointerMove'] = (info) => {\n\t\tif (this.editor.inputs.isDragging) {\n\t\t\tthis.editor.mark(this.markPointId)\n\t\t\tconst shape = this.createShape()\n\t\t\tif (!shape) return\n\n\t\t\tthis.editor.setSelectedTool('select.translating', {\n\t\t\t\t...info,\n\t\t\t\ttarget: 'shape',\n\t\t\t\tshape,\n\t\t\t\tisCreating: true,\n\t\t\t\teditAfterComplete: true,\n\t\t\t\tonInteractionEnd: 'note',\n\t\t\t})\n\t\t}\n\t}\n\n\tonPointerUp: TLEventHandlers['onPointerUp'] = () => {\n\t\tthis.complete()\n\t}\n\n\tonInterrupt: TLInterruptEvent = () => {\n\t\tthis.cancel()\n\t}\n\n\tonComplete: TLEventHandlers['onComplete'] = () => {\n\t\tthis.complete()\n\t}\n\n\tonCancel: TLEventHandlers['onCancel'] = () => {\n\t\tthis.cancel()\n\t}\n\n\tprivate complete() {\n\t\tif (!this.wasFocusedOnEnter) {\n\t\t\treturn\n\t\t}\n\n\t\tthis.editor.mark(this.markPointId)\n\t\tconst shape = this.createShape()\n\n\t\tif (this.editor.instanceState.isToolLocked) {\n\t\t\tthis.parent.transition('idle', {})\n\t\t} else {\n\t\t\tif (!shape) return\n\n\t\t\tthis.editor.setEditingId(shape.id)\n\t\t\tthis.editor.setSelectedTool('select.editing_shape', {\n\t\t\t\t...this.info,\n\t\t\t\ttarget: 'shape',\n\t\t\t\tshape,\n\t\t\t})\n\t\t}\n\t}\n\n\tprivate cancel() {\n\t\tthis.editor.bailToMark(this.markPointId)\n\t\tthis.parent.transition('idle', this.info)\n\t}\n\n\tprivate createShape() {\n\t\tconst {\n\t\t\tinputs: { originPagePoint },\n\t\t} = this.editor\n\n\t\tconst id = createShapeId()\n\n\t\tthis.editor.createShapes(\n\t\t\t[\n\t\t\t\t{\n\t\t\t\t\tid,\n\t\t\t\t\ttype: 'note',\n\t\t\t\t\tx: originPagePoint.x,\n\t\t\t\t\ty: originPagePoint.y,\n\t\t\t\t},\n\t\t\t],\n\t\t\ttrue\n\t\t)\n\n\t\tconst util = this.editor.getShapeUtil(NoteShapeUtil)\n\t\tconst shape = this.editor.getShapeById<TLNoteShape>(id)!\n\t\tconst bounds = util.bounds(shape)\n\n\t\t// Center the text around the created point\n\t\tthis.editor.updateShapes([\n\t\t\t{\n\t\t\t\tid,\n\t\t\t\ttype: 'note',\n\t\t\t\tx: shape.x - bounds.width / 2,\n\t\t\t\ty: shape.y - bounds.height / 2,\n\t\t\t},\n\t\t])\n\n\t\treturn this.editor.getShapeById(id)\n\t}\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}