{"ast":null,"code":"import { jsx, jsxs } from \"react/jsx-runtime\";\nimport { forwardRef, useCallback } from \"react\";\nimport { useEditor } from \"../../../../hooks/useEditor.mjs\";\nimport { defaultEmptyAs } from \"../../../../utils/string.mjs\";\nvar FrameLabelInput = forwardRef(function (_ref, ref) {\n  var id = _ref.id,\n    name = _ref.name,\n    isEditing = _ref.isEditing;\n  var editor = useEditor();\n  var handleKeyDown = useCallback(function (e) {\n    if (e.key === \"Enter\") {\n      e.stopPropagation();\n      e.currentTarget.blur();\n      editor.setEditingId(null);\n    }\n  }, [editor]);\n  var handleBlur = useCallback(function (e) {\n    var shape = editor.getShapeById(id);\n    if (!shape) return;\n    var name2 = shape.props.name;\n    var value = e.currentTarget.value.trim();\n    if (name2 === value) return;\n    editor.updateShapes([{\n      id: id,\n      type: \"frame\",\n      props: {\n        name: value\n      }\n    }], true);\n  }, [id, editor]);\n  var handleChange = useCallback(function (e) {\n    var shape = editor.getShapeById(id);\n    if (!shape) return;\n    var name2 = shape.props.name;\n    var value = e.currentTarget.value;\n    if (name2 === value) return;\n    editor.updateShapes([{\n      id: id,\n      type: \"frame\",\n      props: {\n        name: value\n      }\n    }], true);\n  }, [id, editor]);\n  return /* @__PURE__ */jsxs(\"div\", {\n    className: \"tl-frame-label \".concat(isEditing ? \"tl-frame-label__editing\" : \"\"),\n    children: [/* @__PURE__ */jsx(\"input\", {\n      className: \"tl-frame-name-input\",\n      ref: ref,\n      style: {\n        display: isEditing ? void 0 : \"none\"\n      },\n      value: name,\n      autoFocus: true,\n      onKeyDown: handleKeyDown,\n      onBlur: handleBlur,\n      onChange: handleChange\n    }), defaultEmptyAs(name, \"Frame\") + String.fromCharCode(8203)]\n  });\n});\nexport { FrameLabelInput };","map":{"version":3,"names":["jsx","jsxs","forwardRef","useCallback","useEditor","defaultEmptyAs","FrameLabelInput","_ref","ref","id","name","isEditing","editor","handleKeyDown","e","key","stopPropagation","currentTarget","blur","setEditingId","handleBlur","shape","getShapeById","name2","props","value","trim","updateShapes","type","handleChange","className","concat","children","style","display","autoFocus","onKeyDown","onBlur","onChange","String","fromCharCode"],"sources":["/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@tldraw/editor/src/lib/editor/shapes/frame/components/FrameLabelInput.tsx"],"sourcesContent":["import { TLFrameShape, TLShapeId } from '@tldraw/tlschema'\nimport { forwardRef, useCallback } from 'react'\nimport { useEditor } from '../../../../hooks/useEditor'\nimport { defaultEmptyAs } from '../../../../utils/string'\n\nexport const FrameLabelInput = forwardRef<\n\tHTMLInputElement,\n\t{ id: TLShapeId; name: string; isEditing: boolean }\n>(({ id, name, isEditing }, ref) => {\n\tconst editor = useEditor()\n\n\tconst handleKeyDown = useCallback(\n\t\t(e: React.KeyboardEvent<HTMLInputElement>) => {\n\t\t\tif (e.key === 'Enter') {\n\t\t\t\t// need to prevent the enter keydown making it's way up to the Idle state\n\t\t\t\t// and sending us back into edit mode\n\t\t\t\te.stopPropagation()\n\t\t\t\te.currentTarget.blur()\n\t\t\t\teditor.setEditingId(null)\n\t\t\t}\n\t\t},\n\t\t[editor]\n\t)\n\n\tconst handleBlur = useCallback(\n\t\t(e: React.FocusEvent<HTMLInputElement>) => {\n\t\t\tconst shape = editor.getShapeById<TLFrameShape>(id)\n\t\t\tif (!shape) return\n\n\t\t\tconst name = shape.props.name\n\t\t\tconst value = e.currentTarget.value.trim()\n\t\t\tif (name === value) return\n\n\t\t\teditor.updateShapes(\n\t\t\t\t[\n\t\t\t\t\t{\n\t\t\t\t\t\tid,\n\t\t\t\t\t\ttype: 'frame',\n\t\t\t\t\t\tprops: { name: value },\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\ttrue\n\t\t\t)\n\t\t},\n\t\t[id, editor]\n\t)\n\n\tconst handleChange = useCallback(\n\t\t(e: React.ChangeEvent<HTMLInputElement>) => {\n\t\t\tconst shape = editor.getShapeById<TLFrameShape>(id)\n\t\t\tif (!shape) return\n\n\t\t\tconst name = shape.props.name\n\t\t\tconst value = e.currentTarget.value\n\t\t\tif (name === value) return\n\n\t\t\teditor.updateShapes(\n\t\t\t\t[\n\t\t\t\t\t{\n\t\t\t\t\t\tid,\n\t\t\t\t\t\ttype: 'frame',\n\t\t\t\t\t\tprops: { name: value },\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\ttrue\n\t\t\t)\n\t\t},\n\t\t[id, editor]\n\t)\n\n\treturn (\n\t\t<div className={`tl-frame-label ${isEditing ? 'tl-frame-label__editing' : ''}`}>\n\t\t\t<input\n\t\t\t\tclassName=\"tl-frame-name-input\"\n\t\t\t\tref={ref}\n\t\t\t\tstyle={{ display: isEditing ? undefined : 'none' }}\n\t\t\t\tvalue={name}\n\t\t\t\tautoFocus\n\t\t\t\tonKeyDown={handleKeyDown}\n\t\t\t\tonBlur={handleBlur}\n\t\t\t\tonChange={handleChange}\n\t\t\t/>\n\t\t\t{defaultEmptyAs(name, 'Frame') + String.fromCharCode(8203)}\n\t\t</div>\n\t)\n})\n"],"mappings":"AAuEE,SACCA,GAAA,EADDC,IAAA;AAtEF,SAASC,UAAA,EAAYC,WAAA,QAAmB;AACxC,SAASC,SAAA,QAAiB;AAC1B,SAASC,cAAA,QAAsB;AAExB,IAAMC,eAAA,GAAkBJ,UAAA,CAG7B,UAAAK,IAAA,EAA0BC,GAAA,EAAQ;EAAA,IAA/BC,EAAA,GAAAF,IAAA,CAAAE,EAAA;IAAIC,IAAA,GAAAH,IAAA,CAAAG,IAAA;IAAMC,SAAA,GAAAJ,IAAA,CAAAI,SAAA;EACd,IAAMC,MAAA,GAASR,SAAA,CAAU;EAEzB,IAAMS,aAAA,GAAgBV,WAAA,CACrB,UAACW,CAAA,EAA6C;IAC7C,IAAIA,CAAA,CAAEC,GAAA,KAAQ,SAAS;MAGtBD,CAAA,CAAEE,eAAA,CAAgB;MAClBF,CAAA,CAAEG,aAAA,CAAcC,IAAA,CAAK;MACrBN,MAAA,CAAOO,YAAA,CAAa,IAAI;IACzB;EACD,GACA,CAACP,MAAM,CACR;EAEA,IAAMQ,UAAA,GAAajB,WAAA,CAClB,UAACW,CAAA,EAA0C;IAC1C,IAAMO,KAAA,GAAQT,MAAA,CAAOU,YAAA,CAA2Bb,EAAE;IAClD,IAAI,CAACY,KAAA,EAAO;IAEZ,IAAME,KAAA,GAAOF,KAAA,CAAMG,KAAA,CAAMd,IAAA;IACzB,IAAMe,KAAA,GAAQX,CAAA,CAAEG,aAAA,CAAcQ,KAAA,CAAMC,IAAA,CAAK;IACzC,IAAIH,KAAA,KAASE,KAAA,EAAO;IAEpBb,MAAA,CAAOe,YAAA,CACN,CACC;MACClB,EAAA,EAAAA,EAAA;MACAmB,IAAA,EAAM;MACNJ,KAAA,EAAO;QAAEd,IAAA,EAAMe;MAAM;IACtB,EACD,EACA,IACD;EACD,GACA,CAAChB,EAAA,EAAIG,MAAM,CACZ;EAEA,IAAMiB,YAAA,GAAe1B,WAAA,CACpB,UAACW,CAAA,EAA2C;IAC3C,IAAMO,KAAA,GAAQT,MAAA,CAAOU,YAAA,CAA2Bb,EAAE;IAClD,IAAI,CAACY,KAAA,EAAO;IAEZ,IAAME,KAAA,GAAOF,KAAA,CAAMG,KAAA,CAAMd,IAAA;IACzB,IAAMe,KAAA,GAAQX,CAAA,CAAEG,aAAA,CAAcQ,KAAA;IAC9B,IAAIF,KAAA,KAASE,KAAA,EAAO;IAEpBb,MAAA,CAAOe,YAAA,CACN,CACC;MACClB,EAAA,EAAAA,EAAA;MACAmB,IAAA,EAAM;MACNJ,KAAA,EAAO;QAAEd,IAAA,EAAMe;MAAM;IACtB,EACD,EACA,IACD;EACD,GACA,CAAChB,EAAA,EAAIG,MAAM,CACZ;EAEA,OACC,eAAAX,IAAA,CAAC;IAAI6B,SAAA,oBAAAC,MAAA,CAA6BpB,SAAA,GAAY,4BAA4B;IACzEqB,QAAA,kBAAAhC,GAAA,CAAC;MACA8B,SAAA,EAAU;MACVtB,GAAA,EAAAA,GAAA;MACAyB,KAAA,EAAO;QAAEC,OAAA,EAASvB,SAAA,GAAY,SAAY;MAAO;MACjDc,KAAA,EAAOf,IAAA;MACPyB,SAAA,EAAS;MACTC,SAAA,EAAWvB,aAAA;MACXwB,MAAA,EAAQjB,UAAA;MACRkB,QAAA,EAAUT;IAAA,CACX,GACCxB,cAAA,CAAeK,IAAA,EAAM,OAAO,IAAI6B,MAAA,CAAOC,YAAA,CAAa,IAAI;EAAA,CAC1D;AAEF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}