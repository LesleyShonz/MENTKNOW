{"ast":null,"code":"import _regeneratorRuntime from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _objectSpread from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _classCallCheck from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _assertThisInitialized from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _inherits from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport _defineProperty from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport { jsx, jsxs } from \"react/jsx-runtime\";\nimport { toDomPrecision } from \"@tldraw/primitives\";\nimport { AssetRecordType } from \"@tldraw/tlschema\";\nimport { debounce, getHashForString } from \"@tldraw/utils\";\nimport { HTMLContainer } from \"../../../components/HTMLContainer.mjs\";\nimport { isValidUrl } from \"../../../utils/data.mjs\";\nimport { getRotatedBoxShadow, stopEventPropagation, truncateStringWithEllipsis } from \"../../../utils/dom.mjs\";\nimport { BaseBoxShapeUtil } from \"../BaseBoxShapeUtil.mjs\";\nimport { HyperlinkButton } from \"../shared/HyperlinkButton.mjs\";\nvar BookmarkShapeUtil = /*#__PURE__*/function (_BaseBoxShapeUtil) {\n  _inherits(BookmarkShapeUtil, _BaseBoxShapeUtil);\n  var _super = _createSuper(BookmarkShapeUtil);\n  function BookmarkShapeUtil() {\n    var _this;\n    _classCallCheck(this, BookmarkShapeUtil);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _super.call.apply(_super, [this].concat(args));\n    _defineProperty(_assertThisInitialized(_this), \"canResize\", function () {\n      return false;\n    });\n    _defineProperty(_assertThisInitialized(_this), \"hideSelectionBoundsBg\", function () {\n      return true;\n    });\n    _defineProperty(_assertThisInitialized(_this), \"hideSelectionBoundsFg\", function () {\n      return true;\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onBeforeCreate\", function (shape) {\n      updateBookmarkAssetOnUrlChange(_this.editor, shape);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onBeforeUpdate\", function (prev, shape) {\n      if (prev.props.url !== shape.props.url) {\n        if (!isValidUrl(shape.props.url)) {\n          return _objectSpread(_objectSpread({}, shape), {}, {\n            props: _objectSpread(_objectSpread({}, shape.props), {}, {\n              url: prev.props.url\n            })\n          });\n        } else {\n          updateBookmarkAssetOnUrlChange(_this.editor, shape);\n        }\n      }\n    });\n    return _this;\n  }\n  _createClass(BookmarkShapeUtil, [{\n    key: \"defaultProps\",\n    value: function defaultProps() {\n      return {\n        url: \"\",\n        w: 300,\n        h: 320,\n        assetId: null\n      };\n    }\n  }, {\n    key: \"component\",\n    value: function component(shape) {\n      var asset = shape.props.assetId ? this.editor.getAssetById(shape.props.assetId) : null;\n      var pageRotation = this.editor.getPageRotation(shape);\n      var address = getHumanReadableAddress(shape);\n      return /* @__PURE__ */jsx(HTMLContainer, {\n        children: /* @__PURE__ */jsxs(\"div\", {\n          className: \"tl-bookmark__container tl-hitarea-stroke\",\n          style: {\n            boxShadow: getRotatedBoxShadow(pageRotation)\n          },\n          children: [/* @__PURE__ */jsxs(\"div\", {\n            className: \"tl-bookmark__image_container\",\n            children: [asset !== null && asset !== void 0 && asset.props.image ? /* @__PURE__ */jsx(\"img\", {\n              className: \"tl-bookmark__image\",\n              draggable: false,\n              src: asset === null || asset === void 0 ? void 0 : asset.props.image,\n              alt: (asset === null || asset === void 0 ? void 0 : asset.props.title) || \"\"\n            }) : /* @__PURE__ */jsx(\"div\", {\n              className: \"tl-bookmark__placeholder\"\n            }), /* @__PURE__ */jsx(HyperlinkButton, {\n              url: shape.props.url,\n              zoomLevel: this.editor.zoomLevel\n            })]\n          }), /* @__PURE__ */jsxs(\"div\", {\n            className: \"tl-bookmark__copy_container\",\n            children: [(asset === null || asset === void 0 ? void 0 : asset.props.title) && /* @__PURE__ */jsx(\"h2\", {\n              className: \"tl-bookmark__heading\",\n              children: truncateStringWithEllipsis((asset === null || asset === void 0 ? void 0 : asset.props.title) || \"\", 54)\n            }), (asset === null || asset === void 0 ? void 0 : asset.props.description) && /* @__PURE__ */jsx(\"p\", {\n              className: \"tl-bookmark__description\",\n              children: truncateStringWithEllipsis((asset === null || asset === void 0 ? void 0 : asset.props.description) || \"\", 128)\n            }), /* @__PURE__ */jsx(\"a\", {\n              className: \"tl-bookmark__link\",\n              href: shape.props.url || \"\",\n              target: \"_blank\",\n              rel: \"noopener noreferrer\",\n              onPointerDown: stopEventPropagation,\n              onPointerUp: stopEventPropagation,\n              onClick: stopEventPropagation,\n              children: truncateStringWithEllipsis(address, 45)\n            })]\n          })]\n        })\n      });\n    }\n  }, {\n    key: \"indicator\",\n    value: function indicator(shape) {\n      return /* @__PURE__ */jsx(\"rect\", {\n        width: toDomPrecision(shape.props.w),\n        height: toDomPrecision(shape.props.h),\n        rx: \"8\",\n        ry: \"8\"\n      });\n    }\n  }]);\n  return BookmarkShapeUtil;\n}(BaseBoxShapeUtil);\n_defineProperty(BookmarkShapeUtil, \"type\", \"bookmark\");\nvar getHumanReadableAddress = function getHumanReadableAddress(shape) {\n  try {\n    var url = new URL(shape.props.url);\n    var path = url.pathname.replace(/\\/*$/, \"\");\n    return \"\".concat(url.hostname).concat(path);\n  } catch (e) {\n    return shape.props.url;\n  }\n};\nfunction updateBookmarkAssetOnUrlChange(editor, shape) {\n  var url = shape.props.url;\n  var assetId = AssetRecordType.createId(getHashForString(url));\n  if (editor.getAssetById(assetId)) {\n    if (shape.props.assetId !== assetId) {\n      editor.updateShapes([{\n        id: shape.id,\n        type: shape.type,\n        props: {\n          assetId: assetId\n        }\n      }]);\n    }\n  } else {\n    editor.updateShapes([{\n      id: shape.id,\n      type: shape.type,\n      props: {\n        assetId: null\n      }\n    }]);\n    createBookmarkAssetOnUrlChange(editor, shape);\n  }\n}\nvar createBookmarkAssetOnUrlChange = debounce( /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(editor, shape) {\n    var url, asset;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          url = shape.props.url;\n          _context.next = 3;\n          return editor.externalContentManager.createAssetFromUrl(editor, url);\n        case 3:\n          asset = _context.sent;\n          if (asset) {\n            _context.next = 6;\n            break;\n          }\n          return _context.abrupt(\"return\");\n        case 6:\n          editor.batch(function () {\n            editor.createAssets([asset]);\n            editor.updateShapes([{\n              id: shape.id,\n              type: shape.type,\n              props: {\n                assetId: asset.id\n              }\n            }]);\n          });\n        case 7:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function (_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}(), 500);\nexport { BookmarkShapeUtil, getHumanReadableAddress };","map":{"version":3,"names":["jsx","jsxs","toDomPrecision","AssetRecordType","debounce","getHashForString","HTMLContainer","isValidUrl","getRotatedBoxShadow","stopEventPropagation","truncateStringWithEllipsis","BaseBoxShapeUtil","HyperlinkButton","BookmarkShapeUtil","_BaseBoxShapeUtil","_inherits","_super","_createSuper","_this","_classCallCheck","_len","arguments","length","args","Array","_key","call","apply","concat","_defineProperty","_assertThisInitialized","shape","updateBookmarkAssetOnUrlChange","editor","prev","props","url","_objectSpread","_createClass","key","value","defaultProps","w","h","assetId","component","asset","getAssetById","pageRotation","getPageRotation","address","getHumanReadableAddress","children","className","style","boxShadow","image","draggable","src","alt","title","zoomLevel","description","href","target","rel","onPointerDown","onPointerUp","onClick","indicator","width","height","rx","ry","URL","path","pathname","replace","hostname","e","createId","updateShapes","id","type","createBookmarkAssetOnUrlChange","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","next","externalContentManager","createAssetFromUrl","sent","abrupt","batch","createAssets","stop","_x","_x2"],"sources":["/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@tldraw/editor/src/lib/editor/shapes/bookmark/BookmarkShapeUtil.tsx"],"sourcesContent":["import { toDomPrecision } from '@tldraw/primitives'\nimport { AssetRecordType, TLAssetId, TLBookmarkAsset, TLBookmarkShape } from '@tldraw/tlschema'\nimport { debounce, getHashForString } from '@tldraw/utils'\nimport { HTMLContainer } from '../../../components/HTMLContainer'\n\nimport { isValidUrl } from '../../../utils/data'\nimport {\n\tgetRotatedBoxShadow,\n\tstopEventPropagation,\n\ttruncateStringWithEllipsis,\n} from '../../../utils/dom'\nimport { Editor } from '../../Editor'\nimport { BaseBoxShapeUtil } from '../BaseBoxShapeUtil'\nimport { TLOnBeforeCreateHandler, TLOnBeforeUpdateHandler } from '../ShapeUtil'\nimport { HyperlinkButton } from '../shared/HyperlinkButton'\n\n/** @public */\nexport class BookmarkShapeUtil extends BaseBoxShapeUtil<TLBookmarkShape> {\n\tstatic override type = 'bookmark' as const\n\n\toverride canResize = () => false\n\n\toverride hideSelectionBoundsBg = () => true\n\toverride hideSelectionBoundsFg = () => true\n\n\toverride defaultProps(): TLBookmarkShape['props'] {\n\t\treturn {\n\t\t\turl: '',\n\t\t\tw: 300,\n\t\t\th: 320,\n\t\t\tassetId: null,\n\t\t}\n\t}\n\n\toverride component(shape: TLBookmarkShape) {\n\t\tconst asset = (\n\t\t\tshape.props.assetId ? this.editor.getAssetById(shape.props.assetId) : null\n\t\t) as TLBookmarkAsset\n\n\t\tconst pageRotation = this.editor.getPageRotation(shape)\n\n\t\tconst address = getHumanReadableAddress(shape)\n\n\t\treturn (\n\t\t\t<HTMLContainer>\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"tl-bookmark__container tl-hitarea-stroke\"\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tboxShadow: getRotatedBoxShadow(pageRotation),\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"tl-bookmark__image_container\">\n\t\t\t\t\t\t{asset?.props.image ? (\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tclassName=\"tl-bookmark__image\"\n\t\t\t\t\t\t\t\tdraggable={false}\n\t\t\t\t\t\t\t\tsrc={asset?.props.image}\n\t\t\t\t\t\t\t\talt={asset?.props.title || ''}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<div className=\"tl-bookmark__placeholder\" />\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<HyperlinkButton url={shape.props.url} zoomLevel={this.editor.zoomLevel} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"tl-bookmark__copy_container\">\n\t\t\t\t\t\t{asset?.props.title && (\n\t\t\t\t\t\t\t<h2 className=\"tl-bookmark__heading\">\n\t\t\t\t\t\t\t\t{truncateStringWithEllipsis(asset?.props.title || '', 54)}\n\t\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{asset?.props.description && (\n\t\t\t\t\t\t\t<p className=\"tl-bookmark__description\">\n\t\t\t\t\t\t\t\t{truncateStringWithEllipsis(asset?.props.description || '', 128)}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\tclassName=\"tl-bookmark__link\"\n\t\t\t\t\t\t\thref={shape.props.url || ''}\n\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\trel=\"noopener noreferrer\"\n\t\t\t\t\t\t\tonPointerDown={stopEventPropagation}\n\t\t\t\t\t\t\tonPointerUp={stopEventPropagation}\n\t\t\t\t\t\t\tonClick={stopEventPropagation}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{truncateStringWithEllipsis(address, 45)}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</HTMLContainer>\n\t\t)\n\t}\n\n\toverride indicator(shape: TLBookmarkShape) {\n\t\treturn (\n\t\t\t<rect\n\t\t\t\twidth={toDomPrecision(shape.props.w)}\n\t\t\t\theight={toDomPrecision(shape.props.h)}\n\t\t\t\trx=\"8\"\n\t\t\t\try=\"8\"\n\t\t\t/>\n\t\t)\n\t}\n\n\toverride onBeforeCreate?: TLOnBeforeCreateHandler<TLBookmarkShape> = (shape) => {\n\t\tupdateBookmarkAssetOnUrlChange(this.editor, shape)\n\t}\n\n\toverride onBeforeUpdate?: TLOnBeforeUpdateHandler<TLBookmarkShape> = (prev, shape) => {\n\t\tif (prev.props.url !== shape.props.url) {\n\t\t\tif (!isValidUrl(shape.props.url)) {\n\t\t\t\treturn { ...shape, props: { ...shape.props, url: prev.props.url } }\n\t\t\t} else {\n\t\t\t\tupdateBookmarkAssetOnUrlChange(this.editor, shape)\n\t\t\t}\n\t\t}\n\t}\n}\n\n/** @internal */\nexport const getHumanReadableAddress = (shape: TLBookmarkShape) => {\n\ttry {\n\t\tconst url = new URL(shape.props.url)\n\t\tconst path = url.pathname.replace(/\\/*$/, '')\n\t\treturn `${url.hostname}${path}`\n\t} catch (e) {\n\t\treturn shape.props.url\n\t}\n}\n\nfunction updateBookmarkAssetOnUrlChange(editor: Editor, shape: TLBookmarkShape) {\n\tconst { url } = shape.props\n\n\t// Derive the asset id from the URL\n\tconst assetId: TLAssetId = AssetRecordType.createId(getHashForString(url))\n\n\tif (editor.getAssetById(assetId)) {\n\t\t// Existing asset for this URL?\n\t\tif (shape.props.assetId !== assetId) {\n\t\t\teditor.updateShapes<TLBookmarkShape>([\n\t\t\t\t{\n\t\t\t\t\tid: shape.id,\n\t\t\t\t\ttype: shape.type,\n\t\t\t\t\tprops: { assetId },\n\t\t\t\t},\n\t\t\t])\n\t\t}\n\t} else {\n\t\t// No asset for this URL?\n\n\t\t// First, clear out the existing asset reference\n\t\teditor.updateShapes<TLBookmarkShape>([\n\t\t\t{\n\t\t\t\tid: shape.id,\n\t\t\t\ttype: shape.type,\n\t\t\t\tprops: { assetId: null },\n\t\t\t},\n\t\t])\n\n\t\t// Then try to asyncronously create a new one\n\t\tcreateBookmarkAssetOnUrlChange(editor, shape)\n\t}\n}\n\nconst createBookmarkAssetOnUrlChange = debounce(async (editor: Editor, shape: TLBookmarkShape) => {\n\tconst { url } = shape.props\n\n\t// Create the asset using the external content manager's createAssetFromUrl method.\n\t// This may be overwritten by the user (for example, we overwrite it on tldraw.com)\n\tconst asset = await editor.externalContentManager.createAssetFromUrl(editor, url)\n\n\tif (!asset) {\n\t\t// No asset? Just leave the bookmark as a null assetId.\n\t\treturn\n\t}\n\n\teditor.batch(() => {\n\t\t// Create the new asset\n\t\teditor.createAssets([asset])\n\n\t\t// And update the shape\n\t\teditor.updateShapes<TLBookmarkShape>([\n\t\t\t{\n\t\t\t\tid: shape.id,\n\t\t\t\ttype: shape.type,\n\t\t\t\tprops: { assetId: asset.id },\n\t\t\t},\n\t\t])\n\t})\n}, 500)\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}