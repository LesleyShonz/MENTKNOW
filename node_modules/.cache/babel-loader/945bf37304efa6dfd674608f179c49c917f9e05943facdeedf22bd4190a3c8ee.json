{"ast":null,"code":"import _createForOfIteratorHelper from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _objectSpread from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport { jsx } from \"react/jsx-runtime\";\nimport { ANIMATION_MEDIUM_MS, BookmarkShapeUtil, EmbedShapeUtil, GroupShapeUtil, TextShapeUtil, createShapeId, getEmbedInfo, openWindow, useEditor } from \"@tldraw/editor\";\nimport { Box2d, TAU, Vec2d, approximately } from \"@tldraw/primitives\";\nimport { compact } from \"@tldraw/utils\";\nimport * as React from \"react\";\nimport { EditLinkDialog } from \"../components/EditLinkDialog.mjs\";\nimport { EmbedDialog } from \"../components/EmbedDialog.mjs\";\nimport { useMenuClipboardEvents } from \"./useClipboardEvents.mjs\";\nimport { useCopyAs } from \"./useCopyAs.mjs\";\nimport { useDialogs } from \"./useDialogsProvider.mjs\";\nimport { useEvents } from \"./useEventsProvider.mjs\";\nimport { useExportAs } from \"./useExportAs.mjs\";\nimport { useInsertMedia } from \"./useInsertMedia.mjs\";\nimport { usePrint } from \"./usePrint.mjs\";\nimport { useToasts } from \"./useToastsProvider.mjs\";\nvar ActionsContext = React.createContext({});\nfunction makeActions(actions) {\n  return Object.fromEntries(actions.map(function (action) {\n    return [action.id, action];\n  }));\n}\nfunction ActionsProvider(_ref) {\n  var overrides = _ref.overrides,\n    children = _ref.children;\n  var editor = useEditor();\n  var _useDialogs = useDialogs(),\n    addDialog = _useDialogs.addDialog,\n    clearDialogs = _useDialogs.clearDialogs;\n  var _useToasts = useToasts(),\n    clearToasts = _useToasts.clearToasts;\n  var insertMedia = useInsertMedia();\n  var printSelectionOrPages = usePrint();\n  var _useMenuClipboardEven = useMenuClipboardEvents(),\n    cut = _useMenuClipboardEven.cut,\n    copy = _useMenuClipboardEven.copy,\n    paste = _useMenuClipboardEven.paste;\n  var copyAs = useCopyAs();\n  var exportAs = useExportAs();\n  var trackEvent = useEvents();\n  var actions = React.useMemo(function () {\n    var actions2 = makeActions([{\n      id: \"edit-link\",\n      label: \"action.edit-link\",\n      icon: \"link\",\n      readonlyOk: false,\n      onSelect: function onSelect(source) {\n        trackEvent(\"edit-link\", {\n          source: source\n        });\n        editor.mark(\"edit-link\");\n        addDialog({\n          component: EditLinkDialog\n        });\n      }\n    }, {\n      id: \"insert-embed\",\n      label: \"action.insert-embed\",\n      readonlyOk: false,\n      kbd: \"$i\",\n      onSelect: function onSelect(source) {\n        trackEvent(\"insert-embed\", {\n          source: source\n        });\n        addDialog({\n          component: EmbedDialog\n        });\n      }\n    }, {\n      id: \"insert-media\",\n      label: \"action.insert-media\",\n      kbd: \"$u\",\n      readonlyOk: false,\n      onSelect: function onSelect(source) {\n        trackEvent(\"insert-media\", {\n          source: source\n        });\n        insertMedia();\n      }\n    }, {\n      id: \"undo\",\n      label: \"action.undo\",\n      icon: \"undo\",\n      kbd: \"$z\",\n      readonlyOk: false,\n      onSelect: function onSelect(source) {\n        trackEvent(\"undo\", {\n          source: source\n        });\n        editor.undo();\n      }\n    }, {\n      id: \"redo\",\n      label: \"action.redo\",\n      icon: \"redo\",\n      kbd: \"$!z\",\n      readonlyOk: false,\n      onSelect: function onSelect(source) {\n        trackEvent(\"redo\", {\n          source: source\n        });\n        editor.redo();\n      }\n    }, {\n      id: \"export-as-svg\",\n      label: \"action.export-as-svg\",\n      menuLabel: \"action.export-as-svg.short\",\n      contextMenuLabel: \"action.export-as-svg.short\",\n      readonlyOk: true,\n      onSelect: function onSelect(source) {\n        trackEvent(\"export-as\", {\n          format: \"svg\",\n          source: source\n        });\n        exportAs(editor.selectedIds, \"svg\");\n      }\n    }, {\n      id: \"export-as-png\",\n      label: \"action.export-as-png\",\n      menuLabel: \"action.export-as-png.short\",\n      contextMenuLabel: \"action.export-as-png.short\",\n      readonlyOk: true,\n      onSelect: function onSelect(source) {\n        trackEvent(\"export-as\", {\n          format: \"png\",\n          source: source\n        });\n        exportAs(editor.selectedIds, \"png\");\n      }\n    }, {\n      id: \"export-as-json\",\n      label: \"action.export-as-json\",\n      menuLabel: \"action.export-as-json.short\",\n      contextMenuLabel: \"action.export-as-json.short\",\n      readonlyOk: true,\n      onSelect: function onSelect(source) {\n        trackEvent(\"export-as\", {\n          format: \"json\",\n          source: source\n        });\n        exportAs(editor.selectedIds, \"json\");\n      }\n    }, {\n      id: \"copy-as-svg\",\n      label: \"action.copy-as-svg\",\n      menuLabel: \"action.copy-as-svg.short\",\n      contextMenuLabel: \"action.copy-as-svg.short\",\n      kbd: \"$!c\",\n      readonlyOk: true,\n      onSelect: function onSelect(source) {\n        trackEvent(\"copy-as\", {\n          format: \"svg\",\n          source: source\n        });\n        copyAs(editor.selectedIds, \"svg\");\n      }\n    }, {\n      id: \"copy-as-png\",\n      label: \"action.copy-as-png\",\n      menuLabel: \"action.copy-as-png.short\",\n      contextMenuLabel: \"action.copy-as-png.short\",\n      readonlyOk: true,\n      onSelect: function onSelect(source) {\n        trackEvent(\"copy-as\", {\n          format: \"png\",\n          source: source\n        });\n        copyAs(editor.selectedIds, \"png\");\n      }\n    }, {\n      id: \"copy-as-json\",\n      label: \"action.copy-as-json\",\n      menuLabel: \"action.copy-as-json.short\",\n      contextMenuLabel: \"action.copy-as-json.short\",\n      readonlyOk: true,\n      onSelect: function onSelect(source) {\n        trackEvent(\"copy-as\", {\n          format: \"json\",\n          source: source\n        });\n        copyAs(editor.selectedIds, \"json\");\n      }\n    }, {\n      id: \"toggle-auto-size\",\n      label: \"action.toggle-auto-size\",\n      readonlyOk: false,\n      onSelect: function onSelect(source) {\n        trackEvent(\"toggle-auto-size\", {\n          source: source\n        });\n        editor.mark();\n        editor.updateShapes(editor.selectedShapes.filter(function (shape) {\n          return editor.isShapeOfType(shape, TextShapeUtil) && shape.props.autoSize === false;\n        }).map(function (shape) {\n          return {\n            id: shape.id,\n            type: shape.type,\n            props: _objectSpread(_objectSpread({}, shape.props), {}, {\n              w: 8,\n              autoSize: true\n            })\n          };\n        }));\n      }\n    }, {\n      id: \"open-embed-link\",\n      label: \"action.open-embed-link\",\n      readonlyOk: true,\n      onSelect: function onSelect(source) {\n        trackEvent(\"open-embed-link\", {\n          source: source\n        });\n        var ids = editor.selectedIds;\n        var warnMsg = \"No embed shapes selected\";\n        if (ids.length !== 1) {\n          console.error(warnMsg);\n          return;\n        }\n        var shape = editor.getShapeById(ids[0]);\n        if (!shape || !editor.isShapeOfType(shape, EmbedShapeUtil)) {\n          console.error(warnMsg);\n          return;\n        }\n        openWindow(shape.props.url, \"_blank\");\n      }\n    }, {\n      id: \"convert-to-bookmark\",\n      label: \"action.convert-to-bookmark\",\n      readonlyOk: false,\n      onSelect: function onSelect(source) {\n        trackEvent(\"convert-to-bookmark\", {\n          source: source\n        });\n        var shapes = editor.selectedShapes;\n        var createList = [];\n        var deleteList = [];\n        var _iterator = _createForOfIteratorHelper(shapes),\n          _step;\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var shape = _step.value;\n            if (!shape || !editor.isShapeOfType(shape, EmbedShapeUtil) || !shape.props.url) continue;\n            var newPos = new Vec2d(shape.x, shape.y);\n            newPos.rot(-shape.rotation);\n            newPos.add(new Vec2d(shape.props.w / 2 - 300 / 2, shape.props.h / 2 - 320 / 2));\n            newPos.rot(shape.rotation);\n            createList.push({\n              id: createShapeId(),\n              type: \"bookmark\",\n              rotation: shape.rotation,\n              x: newPos.x,\n              y: newPos.y,\n              props: {\n                url: shape.props.url,\n                opacity: \"1\"\n              }\n            });\n            deleteList.push(shape.id);\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n        editor.mark(\"convert shapes to bookmark\");\n        editor.deleteShapes(deleteList);\n        editor.createShapes(createList);\n      }\n    }, {\n      id: \"convert-to-embed\",\n      label: \"action.convert-to-embed\",\n      readonlyOk: false,\n      onSelect: function onSelect(source) {\n        trackEvent(\"convert-to-embed\", {\n          source: source\n        });\n        var ids = editor.selectedIds;\n        var shapes = compact(ids.map(function (id) {\n          return editor.getShapeById(id);\n        }));\n        var createList = [];\n        var deleteList = [];\n        var _iterator2 = _createForOfIteratorHelper(shapes),\n          _step2;\n        try {\n          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n            var shape = _step2.value;\n            if (!editor.isShapeOfType(shape, BookmarkShapeUtil)) continue;\n            var url = shape.props.url;\n            var embedInfo = getEmbedInfo(shape.props.url);\n            if (!embedInfo) continue;\n            if (!embedInfo.definition) continue;\n            var _embedInfo$definition = embedInfo.definition,\n              width = _embedInfo$definition.width,\n              height = _embedInfo$definition.height;\n            var newPos = new Vec2d(shape.x, shape.y);\n            newPos.rot(-shape.rotation);\n            newPos.add(new Vec2d(shape.props.w / 2 - width / 2, shape.props.h / 2 - height / 2));\n            newPos.rot(shape.rotation);\n            var shapeToCreate = {\n              id: createShapeId(),\n              type: \"embed\",\n              x: newPos.x,\n              y: newPos.y,\n              rotation: shape.rotation,\n              props: {\n                url: url,\n                w: width,\n                h: height\n              }\n            };\n            createList.push(shapeToCreate);\n            deleteList.push(shape.id);\n          }\n        } catch (err) {\n          _iterator2.e(err);\n        } finally {\n          _iterator2.f();\n        }\n        editor.mark(\"convert shapes to embed\");\n        editor.deleteShapes(deleteList);\n        editor.createShapes(createList);\n      }\n    }, {\n      id: \"duplicate\",\n      kbd: \"$d\",\n      label: \"action.duplicate\",\n      icon: \"duplicate\",\n      readonlyOk: false,\n      onSelect: function onSelect(source) {\n        if (editor.currentToolId !== \"select\") return;\n        trackEvent(\"duplicate-shapes\", {\n          source: source\n        });\n        var ids = editor.selectedIds;\n        var commonBounds = Box2d.Common(compact(ids.map(function (id) {\n          return editor.getPageBoundsById(id);\n        })));\n        var offset = editor.canMoveCamera ? {\n          x: commonBounds.width + 10,\n          y: 0\n        } : {\n          x: 16 / editor.zoomLevel,\n          y: 16 / editor.zoomLevel\n        };\n        editor.mark(\"duplicate shapes\");\n        editor.duplicateShapes(ids, offset);\n      }\n    }, {\n      id: \"ungroup\",\n      label: \"action.ungroup\",\n      kbd: \"$!g\",\n      icon: \"ungroup\",\n      readonlyOk: false,\n      onSelect: function onSelect(source) {\n        trackEvent(\"ungroup-shapes\", {\n          source: source\n        });\n        editor.mark(\"ungroup\");\n        editor.ungroupShapes(editor.selectedIds);\n      }\n    }, {\n      id: \"group\",\n      label: \"action.group\",\n      kbd: \"$g\",\n      icon: \"group\",\n      readonlyOk: false,\n      onSelect: function onSelect(source) {\n        trackEvent(\"group-shapes\", {\n          source: source\n        });\n        var onlySelectedShape = editor.onlySelectedShape;\n        if (onlySelectedShape && editor.isShapeOfType(onlySelectedShape, GroupShapeUtil)) {\n          editor.mark(\"ungroup\");\n          editor.ungroupShapes(editor.selectedIds);\n        } else {\n          editor.mark(\"group\");\n          editor.groupShapes(editor.selectedIds);\n        }\n      }\n    }, {\n      id: \"align-left\",\n      label: \"action.align-left\",\n      kbd: \"?A\",\n      icon: \"align-left\",\n      readonlyOk: false,\n      onSelect: function onSelect(source) {\n        trackEvent(\"align-shapes\", {\n          operation: \"left\",\n          source: source\n        });\n        editor.mark(\"align left\");\n        editor.alignShapes(\"left\", editor.selectedIds);\n      }\n    }, {\n      id: \"align-center-horizontal\",\n      label: \"action.align-center-horizontal\",\n      contextMenuLabel: \"action.align-center-horizontal.short\",\n      kbd: \"?H\",\n      icon: \"align-center-horizontal\",\n      readonlyOk: false,\n      onSelect: function onSelect(source) {\n        trackEvent(\"align-shapes\", {\n          operation: \"center-horizontal\",\n          source: source\n        });\n        editor.mark(\"align center horizontal\");\n        editor.alignShapes(\"center-horizontal\", editor.selectedIds);\n      }\n    }, {\n      id: \"align-right\",\n      label: \"action.align-right\",\n      kbd: \"?D\",\n      icon: \"align-right\",\n      readonlyOk: false,\n      onSelect: function onSelect(source) {\n        trackEvent(\"align-shapes\", {\n          operation: \"right\",\n          source: source\n        });\n        editor.mark(\"align right\");\n        editor.alignShapes(\"right\", editor.selectedIds);\n      }\n    }, {\n      id: \"align-center-vertical\",\n      label: \"action.align-center-vertical\",\n      contextMenuLabel: \"action.align-center-vertical.short\",\n      kbd: \"?V\",\n      icon: \"align-center-vertical\",\n      readonlyOk: false,\n      onSelect: function onSelect(source) {\n        trackEvent(\"align-shapes\", {\n          operation: \"center-vertical\",\n          source: source\n        });\n        editor.mark(\"align center vertical\");\n        editor.alignShapes(\"center-vertical\", editor.selectedIds);\n      }\n    }, {\n      id: \"align-top\",\n      label: \"action.align-top\",\n      icon: \"align-top\",\n      kbd: \"?W\",\n      readonlyOk: false,\n      onSelect: function onSelect(source) {\n        trackEvent(\"align-shapes\", {\n          operation: \"top\",\n          source: source\n        });\n        editor.mark(\"align top\");\n        editor.alignShapes(\"top\", editor.selectedIds);\n      }\n    }, {\n      id: \"align-bottom\",\n      label: \"action.align-bottom\",\n      icon: \"align-bottom\",\n      kbd: \"?S\",\n      readonlyOk: false,\n      onSelect: function onSelect(source) {\n        trackEvent(\"align-shapes\", {\n          operation: \"bottom\",\n          source: source\n        });\n        editor.mark(\"align bottom\");\n        editor.alignShapes(\"bottom\", editor.selectedIds);\n      }\n    }, {\n      id: \"distribute-horizontal\",\n      label: \"action.distribute-horizontal\",\n      contextMenuLabel: \"action.distribute-horizontal.short\",\n      icon: \"distribute-horizontal\",\n      kbd: \"?!h\",\n      readonlyOk: false,\n      onSelect: function onSelect(source) {\n        trackEvent(\"distribute-shapes\", {\n          operation: \"horizontal\",\n          source: source\n        });\n        editor.mark(\"distribute horizontal\");\n        editor.distributeShapes(\"horizontal\", editor.selectedIds);\n      }\n    }, {\n      id: \"distribute-vertical\",\n      label: \"action.distribute-vertical\",\n      contextMenuLabel: \"action.distribute-vertical.short\",\n      icon: \"distribute-vertical\",\n      kbd: \"?!V\",\n      readonlyOk: false,\n      onSelect: function onSelect(source) {\n        trackEvent(\"distribute-shapes\", {\n          operation: \"vertical\",\n          source: source\n        });\n        editor.mark(\"distribute vertical\");\n        editor.distributeShapes(\"vertical\", editor.selectedIds);\n      }\n    }, {\n      id: \"stretch-horizontal\",\n      label: \"action.stretch-horizontal\",\n      contextMenuLabel: \"action.stretch-horizontal.short\",\n      icon: \"stretch-horizontal\",\n      readonlyOk: false,\n      onSelect: function onSelect(source) {\n        trackEvent(\"stretch-shapes\", {\n          operation: \"horizontal\",\n          source: source\n        });\n        editor.mark(\"stretch horizontal\");\n        editor.stretchShapes(\"horizontal\", editor.selectedIds);\n      }\n    }, {\n      id: \"stretch-vertical\",\n      label: \"action.stretch-vertical\",\n      contextMenuLabel: \"action.stretch-vertical.short\",\n      icon: \"stretch-vertical\",\n      readonlyOk: false,\n      onSelect: function onSelect(source) {\n        trackEvent(\"stretch-shapes\", {\n          operation: \"vertical\",\n          source: source\n        });\n        editor.mark(\"stretch vertical\");\n        editor.stretchShapes(\"vertical\", editor.selectedIds);\n      }\n    }, {\n      id: \"flip-horizontal\",\n      label: \"action.flip-horizontal\",\n      contextMenuLabel: \"action.flip-horizontal.short\",\n      kbd: \"!h\",\n      readonlyOk: false,\n      onSelect: function onSelect(source) {\n        trackEvent(\"flip-shapes\", {\n          operation: \"horizontal\",\n          source: source\n        });\n        editor.mark(\"flip horizontal\");\n        editor.flipShapes(\"horizontal\", editor.selectedIds);\n      }\n    }, {\n      id: \"flip-vertical\",\n      label: \"action.flip-vertical\",\n      contextMenuLabel: \"action.flip-vertical.short\",\n      kbd: \"!v\",\n      readonlyOk: false,\n      onSelect: function onSelect(source) {\n        trackEvent(\"flip-shapes\", {\n          operation: \"vertical\",\n          source: source\n        });\n        editor.mark(\"flip vertical\");\n        editor.flipShapes(\"vertical\", editor.selectedIds);\n      }\n    }, {\n      id: \"pack\",\n      label: \"action.pack\",\n      icon: \"pack\",\n      readonlyOk: false,\n      onSelect: function onSelect(source) {\n        trackEvent(\"pack-shapes\", {\n          source: source\n        });\n        editor.mark(\"pack\");\n        editor.packShapes(editor.selectedIds);\n      }\n    }, {\n      id: \"stack-vertical\",\n      label: \"action.stack-vertical\",\n      contextMenuLabel: \"action.stack-vertical.short\",\n      icon: \"stack-vertical\",\n      readonlyOk: false,\n      onSelect: function onSelect(source) {\n        trackEvent(\"stack-shapes\", {\n          operation: \"vertical\",\n          source: source\n        });\n        editor.mark(\"stack-vertical\");\n        editor.stackShapes(\"vertical\", editor.selectedIds);\n      }\n    }, {\n      id: \"stack-horizontal\",\n      label: \"action.stack-horizontal\",\n      contextMenuLabel: \"action.stack-horizontal.short\",\n      icon: \"stack-horizontal\",\n      readonlyOk: false,\n      onSelect: function onSelect(source) {\n        trackEvent(\"stack-shapes\", {\n          operation: \"horizontal\",\n          source: source\n        });\n        editor.mark(\"stack-horizontal\");\n        editor.stackShapes(\"horizontal\", editor.selectedIds);\n      }\n    }, {\n      id: \"bring-to-front\",\n      label: \"action.bring-to-front\",\n      kbd: \"]\",\n      icon: \"bring-to-front\",\n      readonlyOk: false,\n      onSelect: function onSelect(source) {\n        trackEvent(\"reorder-shapes\", {\n          operation: \"toFront\",\n          source: source\n        });\n        editor.mark(\"bring to front\");\n        editor.bringToFront();\n      }\n    }, {\n      id: \"bring-forward\",\n      label: \"action.bring-forward\",\n      icon: \"bring-forward\",\n      kbd: \"?]\",\n      readonlyOk: false,\n      onSelect: function onSelect(source) {\n        trackEvent(\"reorder-shapes\", {\n          operation: \"forward\",\n          source: source\n        });\n        editor.mark(\"bring forward\");\n        editor.bringForward();\n      }\n    }, {\n      id: \"send-backward\",\n      label: \"action.send-backward\",\n      icon: \"send-backward\",\n      kbd: \"?[\",\n      readonlyOk: false,\n      onSelect: function onSelect(source) {\n        trackEvent(\"reorder-shapes\", {\n          operation: \"backward\",\n          source: source\n        });\n        editor.mark(\"send backward\");\n        editor.sendBackward();\n      }\n    }, {\n      id: \"send-to-back\",\n      label: \"action.send-to-back\",\n      icon: \"send-to-back\",\n      kbd: \"[\",\n      readonlyOk: false,\n      onSelect: function onSelect(source) {\n        trackEvent(\"reorder-shapes\", {\n          operation: \"toBack\",\n          source: source\n        });\n        editor.mark(\"send to back\");\n        editor.sendToBack();\n      }\n    }, {\n      id: \"cut\",\n      label: \"action.cut\",\n      kbd: \"$x\",\n      readonlyOk: false,\n      onSelect: function onSelect(source) {\n        editor.mark(\"cut\");\n        cut(source);\n      }\n    }, {\n      id: \"copy\",\n      label: \"action.copy\",\n      kbd: \"$c\",\n      readonlyOk: true,\n      onSelect: function onSelect(source) {\n        copy(source);\n      }\n    }, {\n      id: \"paste\",\n      label: \"action.paste\",\n      kbd: \"$v\",\n      readonlyOk: false,\n      onSelect: function onSelect(source) {\n        var _navigator$clipboard;\n        (_navigator$clipboard = navigator.clipboard) === null || _navigator$clipboard === void 0 || _navigator$clipboard.read().then(function (clipboardItems) {\n          paste(clipboardItems, source, source === \"context-menu\" ? editor.inputs.currentPagePoint : void 0);\n        });\n      }\n    }, {\n      id: \"select-all\",\n      label: \"action.select-all\",\n      kbd: \"$a\",\n      readonlyOk: true,\n      onSelect: function onSelect(source) {\n        trackEvent(\"select-all-shapes\", {\n          source: source\n        });\n        if (editor.currentToolId !== \"select\") {\n          editor.cancel();\n          editor.setSelectedTool(\"select\");\n        }\n        editor.mark(\"select all kbd\");\n        editor.selectAll();\n      }\n    }, {\n      id: \"select-none\",\n      label: \"action.select-none\",\n      readonlyOk: true,\n      onSelect: function onSelect(source) {\n        trackEvent(\"select-none-shapes\", {\n          source: source\n        });\n        editor.mark(\"select none\");\n        editor.selectNone();\n      }\n    }, {\n      id: \"delete\",\n      label: \"action.delete\",\n      kbd: \"\\u232B,del,backspace\",\n      icon: \"trash\",\n      readonlyOk: false,\n      onSelect: function onSelect(source) {\n        if (editor.currentToolId !== \"select\") return;\n        trackEvent(\"delete-shapes\", {\n          source: source\n        });\n        editor.mark(\"delete\");\n        editor.deleteShapes();\n      }\n    }, {\n      id: \"rotate-cw\",\n      label: \"action.rotate-cw\",\n      icon: \"rotate-cw\",\n      readonlyOk: false,\n      onSelect: function onSelect(source) {\n        if (editor.selectedIds.length === 0) return;\n        trackEvent(\"rotate-cw\", {\n          source: source\n        });\n        editor.mark(\"rotate-cw\");\n        var offset = editor.selectionRotation % (TAU / 2);\n        var dontUseOffset = approximately(offset, 0) || approximately(offset, TAU / 2);\n        editor.rotateShapesBy(editor.selectedIds, TAU / 2 - (dontUseOffset ? 0 : offset));\n      }\n    }, {\n      id: \"rotate-ccw\",\n      label: \"action.rotate-ccw\",\n      icon: \"rotate-ccw\",\n      readonlyOk: false,\n      onSelect: function onSelect(source) {\n        if (editor.selectedIds.length === 0) return;\n        trackEvent(\"rotate-ccw\", {\n          source: source\n        });\n        editor.mark(\"rotate-ccw\");\n        var offset = editor.selectionRotation % (TAU / 2);\n        var offsetCloseToZero = approximately(offset, 0);\n        editor.rotateShapesBy(editor.selectedIds, offsetCloseToZero ? -(TAU / 2) : -offset);\n      }\n    }, {\n      id: \"zoom-in\",\n      label: \"action.zoom-in\",\n      kbd: \"$=,=\",\n      readonlyOk: true,\n      onSelect: function onSelect(source) {\n        trackEvent(\"zoom-in\", {\n          source: source\n        });\n        editor.zoomIn(editor.viewportScreenCenter, {\n          duration: ANIMATION_MEDIUM_MS\n        });\n      }\n    }, {\n      id: \"zoom-out\",\n      label: \"action.zoom-out\",\n      kbd: \"$-,-\",\n      readonlyOk: true,\n      onSelect: function onSelect(source) {\n        trackEvent(\"zoom-out\", {\n          source: source\n        });\n        editor.zoomOut(editor.viewportScreenCenter, {\n          duration: ANIMATION_MEDIUM_MS\n        });\n      }\n    }, {\n      id: \"zoom-to-100\",\n      label: \"action.zoom-to-100\",\n      icon: \"reset-zoom\",\n      kbd: \"!0\",\n      readonlyOk: true,\n      onSelect: function onSelect(source) {\n        trackEvent(\"reset-zoom\", {\n          source: source\n        });\n        editor.resetZoom(editor.viewportScreenCenter, {\n          duration: ANIMATION_MEDIUM_MS\n        });\n      }\n    }, {\n      id: \"zoom-to-fit\",\n      label: \"action.zoom-to-fit\",\n      kbd: \"!1\",\n      readonlyOk: true,\n      onSelect: function onSelect(source) {\n        trackEvent(\"zoom-to-fit\", {\n          source: source\n        });\n        editor.zoomToFit({\n          duration: ANIMATION_MEDIUM_MS\n        });\n      }\n    }, {\n      id: \"zoom-to-selection\",\n      label: \"action.zoom-to-selection\",\n      kbd: \"!2\",\n      readonlyOk: true,\n      onSelect: function onSelect(source) {\n        trackEvent(\"zoom-to-selection\", {\n          source: source\n        });\n        editor.zoomToSelection({\n          duration: ANIMATION_MEDIUM_MS\n        });\n      }\n    }, {\n      id: \"toggle-snap-mode\",\n      label: \"action.toggle-snap-mode\",\n      menuLabel: \"action.toggle-snap-mode.menu\",\n      readonlyOk: false,\n      onSelect: function onSelect(source) {\n        trackEvent(\"toggle-snap-mode\", {\n          source: source\n        });\n        editor.setSnapMode(!editor.isSnapMode);\n      },\n      checkbox: true\n    }, {\n      id: \"toggle-dark-mode\",\n      label: \"action.toggle-dark-mode\",\n      menuLabel: \"action.toggle-dark-mode.menu\",\n      kbd: \"$/\",\n      readonlyOk: true,\n      onSelect: function onSelect(source) {\n        trackEvent(\"toggle-dark-mode\", {\n          source: source\n        });\n        editor.setDarkMode(!editor.isDarkMode);\n      },\n      checkbox: true\n    }, {\n      id: \"toggle-reduce-motion\",\n      label: \"action.toggle-reduce-motion\",\n      menuLabel: \"action.toggle-reduce-motion.menu\",\n      readonlyOk: true,\n      onSelect: function onSelect(source) {\n        trackEvent(\"toggle-reduce-motion\", {\n          source: source\n        });\n        editor.setAnimationSpeed(editor.animationSpeed === 0 ? 1 : 0);\n      },\n      checkbox: true\n    }, {\n      id: \"toggle-transparent\",\n      label: \"action.toggle-transparent\",\n      menuLabel: \"action.toggle-transparent.menu\",\n      contextMenuLabel: \"action.toggle-transparent.context-menu\",\n      readonlyOk: true,\n      onSelect: function onSelect(source) {\n        trackEvent(\"toggle-transparent\", {\n          source: source\n        });\n        editor.updateInstanceState({\n          exportBackground: !editor.instanceState.exportBackground\n        }, true);\n      },\n      checkbox: true\n    }, {\n      id: \"toggle-tool-lock\",\n      label: \"action.toggle-tool-lock\",\n      menuLabel: \"action.toggle-tool-lock.menu\",\n      readonlyOk: false,\n      kbd: \"q\",\n      onSelect: function onSelect(source) {\n        trackEvent(\"toggle-tool-lock\", {\n          source: source\n        });\n        editor.setToolLocked(!editor.isToolLocked);\n      },\n      checkbox: true\n    }, {\n      id: \"toggle-focus-mode\",\n      label: \"action.toggle-focus-mode\",\n      menuLabel: \"action.toggle-focus-mode.menu\",\n      readonlyOk: true,\n      kbd: \"$.\",\n      checkbox: true,\n      onSelect: function onSelect(source) {\n        requestAnimationFrame(function () {\n          editor.batch(function () {\n            trackEvent(\"toggle-focus-mode\", {\n              source: source\n            });\n            clearDialogs();\n            clearToasts();\n            editor.setFocusMode(!editor.isFocusMode);\n          });\n        });\n      }\n    }, {\n      id: \"toggle-grid\",\n      label: \"action.toggle-grid\",\n      menuLabel: \"action.toggle-grid.menu\",\n      readonlyOk: true,\n      kbd: \"$'\",\n      onSelect: function onSelect(source) {\n        trackEvent(\"toggle-grid-mode\", {\n          source: source\n        });\n        editor.setGridMode(!editor.isGridMode);\n      },\n      checkbox: true\n    }, {\n      id: \"toggle-debug-mode\",\n      label: \"action.toggle-debug-mode\",\n      menuLabel: \"action.toggle-debug-mode.menu\",\n      readonlyOk: true,\n      onSelect: function onSelect(source) {\n        trackEvent(\"toggle-debug-mode\", {\n          source: source\n        });\n        editor.updateInstanceState({\n          isDebugMode: !editor.instanceState.isDebugMode\n        }, true);\n      },\n      checkbox: true\n    }, {\n      id: \"print\",\n      label: \"action.print\",\n      kbd: \"$p\",\n      readonlyOk: true,\n      onSelect: function onSelect(source) {\n        trackEvent(\"print\", {\n          source: source\n        });\n        printSelectionOrPages();\n      }\n    }, {\n      id: \"exit-pen-mode\",\n      label: \"action.exit-pen-mode\",\n      icon: \"cross-2\",\n      readonlyOk: true,\n      onSelect: function onSelect(source) {\n        trackEvent(\"exit-pen-mode\", {\n          source: source\n        });\n        editor.setPenMode(false);\n      }\n    }, {\n      id: \"stop-following\",\n      label: \"action.stop-following\",\n      icon: \"cross-2\",\n      readonlyOk: true,\n      onSelect: function onSelect(source) {\n        trackEvent(\"stop-following\", {\n          source: source\n        });\n        editor.stopFollowingUser();\n      }\n    }, {\n      id: \"back-to-content\",\n      label: \"action.back-to-content\",\n      icon: \"arrow-left\",\n      readonlyOk: true,\n      onSelect: function onSelect(source) {\n        trackEvent(\"zoom-to-content\", {\n          source: source\n        });\n        editor.zoomToContent();\n      }\n    }, {\n      id: \"toggle-lock\",\n      label: \"action.toggle-lock\",\n      readonlyOk: false,\n      kbd: \"!$l\",\n      onSelect: function onSelect(source) {\n        trackEvent(\"toggle-lock\", {\n          source: source\n        });\n        editor.toggleLock();\n      }\n    }]);\n    if (overrides) {\n      return overrides(editor, actions2, void 0);\n    }\n    return actions2;\n  }, [trackEvent, overrides, editor, addDialog, insertMedia, exportAs, copyAs, cut, copy, paste, clearDialogs, clearToasts, printSelectionOrPages]);\n  return /* @__PURE__ */jsx(ActionsContext.Provider, {\n    value: asActions(actions),\n    children: children\n  });\n}\nfunction useActions() {\n  var ctx = React.useContext(ActionsContext);\n  if (!ctx) {\n    throw new Error(\"useTools must be used within a ToolProvider\");\n  }\n  return ctx;\n}\nfunction asActions(actions) {\n  return actions;\n}\nexport { ActionsContext, ActionsProvider, useActions };","map":{"version":3,"names":["jsx","ANIMATION_MEDIUM_MS","BookmarkShapeUtil","EmbedShapeUtil","GroupShapeUtil","TextShapeUtil","createShapeId","getEmbedInfo","openWindow","useEditor","Box2d","TAU","Vec2d","approximately","compact","React","EditLinkDialog","EmbedDialog","useMenuClipboardEvents","useCopyAs","useDialogs","useEvents","useExportAs","useInsertMedia","usePrint","useToasts","ActionsContext","createContext","makeActions","actions","Object","fromEntries","map","action","id","ActionsProvider","_ref","overrides","children","editor","_useDialogs","addDialog","clearDialogs","_useToasts","clearToasts","insertMedia","printSelectionOrPages","_useMenuClipboardEven","cut","copy","paste","copyAs","exportAs","trackEvent","useMemo","actions2","label","icon","readonlyOk","onSelect","source","mark","component","kbd","undo","redo","menuLabel","contextMenuLabel","format","selectedIds","updateShapes","selectedShapes","filter","shape","isShapeOfType","props","autoSize","type","_objectSpread","w","ids","warnMsg","length","console","error","getShapeById","url","shapes","createList","deleteList","_iterator","_createForOfIteratorHelper","_step","s","n","done","value","newPos","x","y","rot","rotation","add","h","push","opacity","err","e","f","deleteShapes","createShapes","_iterator2","_step2","embedInfo","definition","_embedInfo$definition","width","height","shapeToCreate","currentToolId","commonBounds","Common","getPageBoundsById","offset","canMoveCamera","zoomLevel","duplicateShapes","ungroupShapes","onlySelectedShape","groupShapes","operation","alignShapes","distributeShapes","stretchShapes","flipShapes","packShapes","stackShapes","bringToFront","bringForward","sendBackward","sendToBack","_navigator$clipboard","navigator","clipboard","read","then","clipboardItems","inputs","currentPagePoint","cancel","setSelectedTool","selectAll","selectNone","selectionRotation","dontUseOffset","rotateShapesBy","offsetCloseToZero","zoomIn","viewportScreenCenter","duration","zoomOut","resetZoom","zoomToFit","zoomToSelection","setSnapMode","isSnapMode","checkbox","setDarkMode","isDarkMode","setAnimationSpeed","animationSpeed","updateInstanceState","exportBackground","instanceState","setToolLocked","isToolLocked","requestAnimationFrame","batch","setFocusMode","isFocusMode","setGridMode","isGridMode","isDebugMode","setPenMode","stopFollowingUser","zoomToContent","toggleLock","Provider","asActions","useActions","ctx","useContext","Error"],"sources":["/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@tldraw/ui/src/lib/hooks/useActions.tsx"],"sourcesContent":["import {\n\tANIMATION_MEDIUM_MS,\n\tBookmarkShapeUtil,\n\tEditor,\n\tEmbedShapeUtil,\n\tGroupShapeUtil,\n\tTLEmbedShape,\n\tTLShapeId,\n\tTLShapePartial,\n\tTLTextShape,\n\tTextShapeUtil,\n\tcreateShapeId,\n\tgetEmbedInfo,\n\topenWindow,\n\tuseEditor,\n} from '@tldraw/editor'\nimport { Box2d, TAU, Vec2d, approximately } from '@tldraw/primitives'\nimport { compact } from '@tldraw/utils'\nimport * as React from 'react'\nimport { EditLinkDialog } from '../components/EditLinkDialog'\nimport { EmbedDialog } from '../components/EmbedDialog'\nimport { TLUiIconType } from '../icon-types'\nimport { useMenuClipboardEvents } from './useClipboardEvents'\nimport { useCopyAs } from './useCopyAs'\nimport { useDialogs } from './useDialogsProvider'\nimport { TLUiEventSource, useEvents } from './useEventsProvider'\nimport { useExportAs } from './useExportAs'\nimport { useInsertMedia } from './useInsertMedia'\nimport { usePrint } from './usePrint'\nimport { useToasts } from './useToastsProvider'\nimport { TLUiTranslationKey } from './useTranslation/TLUiTranslationKey'\n\n/** @public */\nexport interface TLUiActionItem {\n\ticon?: TLUiIconType\n\tid: string\n\tkbd?: string\n\ttitle?: string\n\tlabel?: TLUiTranslationKey\n\tmenuLabel?: TLUiTranslationKey\n\tshortcutsLabel?: TLUiTranslationKey\n\tcontextMenuLabel?: TLUiTranslationKey\n\treadonlyOk: boolean\n\tcheckbox?: boolean\n\tonSelect: (source: TLUiEventSource) => Promise<void> | void\n}\n\n/** @public */\nexport type TLUiActionsContextType = Record<string, TLUiActionItem>\n\n/** @internal */\nexport const ActionsContext = React.createContext<TLUiActionsContextType>({})\n\n/** @public */\nexport type ActionsProviderProps = {\n\toverrides?: (\n\t\teditor: Editor,\n\t\tactions: TLUiActionsContextType,\n\t\thelpers: undefined\n\t) => TLUiActionsContextType\n\tchildren: any\n}\n\nfunction makeActions(actions: TLUiActionItem[]) {\n\treturn Object.fromEntries(actions.map((action) => [action.id, action])) as TLUiActionsContextType\n}\n\n/** @internal */\nexport function ActionsProvider({ overrides, children }: ActionsProviderProps) {\n\tconst editor = useEditor()\n\n\tconst { addDialog, clearDialogs } = useDialogs()\n\tconst { clearToasts } = useToasts()\n\n\tconst insertMedia = useInsertMedia()\n\tconst printSelectionOrPages = usePrint()\n\tconst { cut, copy, paste } = useMenuClipboardEvents()\n\tconst copyAs = useCopyAs()\n\tconst exportAs = useExportAs()\n\n\tconst trackEvent = useEvents()\n\n\t// should this be a useMemo? looks like it doesn't actually deref any reactive values\n\tconst actions = React.useMemo<TLUiActionsContextType>(() => {\n\t\tconst actions = makeActions([\n\t\t\t{\n\t\t\t\tid: 'edit-link',\n\t\t\t\tlabel: 'action.edit-link',\n\t\t\t\ticon: 'link',\n\t\t\t\treadonlyOk: false,\n\t\t\t\tonSelect(source) {\n\t\t\t\t\ttrackEvent('edit-link', { source })\n\t\t\t\t\teditor.mark('edit-link')\n\t\t\t\t\taddDialog({ component: EditLinkDialog })\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'insert-embed',\n\t\t\t\tlabel: 'action.insert-embed',\n\t\t\t\treadonlyOk: false,\n\t\t\t\tkbd: '$i',\n\t\t\t\tonSelect(source) {\n\t\t\t\t\ttrackEvent('insert-embed', { source })\n\t\t\t\t\taddDialog({ component: EmbedDialog })\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'insert-media',\n\t\t\t\tlabel: 'action.insert-media',\n\t\t\t\tkbd: '$u',\n\t\t\t\treadonlyOk: false,\n\t\t\t\tonSelect(source) {\n\t\t\t\t\ttrackEvent('insert-media', { source })\n\t\t\t\t\tinsertMedia()\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'undo',\n\t\t\t\tlabel: 'action.undo',\n\t\t\t\ticon: 'undo',\n\t\t\t\tkbd: '$z',\n\t\t\t\treadonlyOk: false,\n\t\t\t\tonSelect(source) {\n\t\t\t\t\ttrackEvent('undo', { source })\n\t\t\t\t\teditor.undo()\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'redo',\n\t\t\t\tlabel: 'action.redo',\n\t\t\t\ticon: 'redo',\n\t\t\t\tkbd: '$!z',\n\t\t\t\treadonlyOk: false,\n\t\t\t\tonSelect(source) {\n\t\t\t\t\ttrackEvent('redo', { source })\n\t\t\t\t\teditor.redo()\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'export-as-svg',\n\t\t\t\tlabel: 'action.export-as-svg',\n\t\t\t\tmenuLabel: 'action.export-as-svg.short',\n\t\t\t\tcontextMenuLabel: 'action.export-as-svg.short',\n\t\t\t\treadonlyOk: true,\n\t\t\t\tonSelect(source) {\n\t\t\t\t\ttrackEvent('export-as', { format: 'svg', source })\n\t\t\t\t\texportAs(editor.selectedIds, 'svg')\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'export-as-png',\n\t\t\t\tlabel: 'action.export-as-png',\n\t\t\t\tmenuLabel: 'action.export-as-png.short',\n\t\t\t\tcontextMenuLabel: 'action.export-as-png.short',\n\t\t\t\treadonlyOk: true,\n\t\t\t\tonSelect(source) {\n\t\t\t\t\ttrackEvent('export-as', { format: 'png', source })\n\t\t\t\t\texportAs(editor.selectedIds, 'png')\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'export-as-json',\n\t\t\t\tlabel: 'action.export-as-json',\n\t\t\t\tmenuLabel: 'action.export-as-json.short',\n\t\t\t\tcontextMenuLabel: 'action.export-as-json.short',\n\t\t\t\treadonlyOk: true,\n\t\t\t\tonSelect(source) {\n\t\t\t\t\ttrackEvent('export-as', { format: 'json', source })\n\t\t\t\t\texportAs(editor.selectedIds, 'json')\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'copy-as-svg',\n\t\t\t\tlabel: 'action.copy-as-svg',\n\t\t\t\tmenuLabel: 'action.copy-as-svg.short',\n\t\t\t\tcontextMenuLabel: 'action.copy-as-svg.short',\n\t\t\t\tkbd: '$!c',\n\t\t\t\treadonlyOk: true,\n\t\t\t\tonSelect(source) {\n\t\t\t\t\ttrackEvent('copy-as', { format: 'svg', source })\n\t\t\t\t\tcopyAs(editor.selectedIds, 'svg')\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'copy-as-png',\n\t\t\t\tlabel: 'action.copy-as-png',\n\t\t\t\tmenuLabel: 'action.copy-as-png.short',\n\t\t\t\tcontextMenuLabel: 'action.copy-as-png.short',\n\t\t\t\treadonlyOk: true,\n\t\t\t\tonSelect(source) {\n\t\t\t\t\ttrackEvent('copy-as', { format: 'png', source })\n\t\t\t\t\tcopyAs(editor.selectedIds, 'png')\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'copy-as-json',\n\t\t\t\tlabel: 'action.copy-as-json',\n\t\t\t\tmenuLabel: 'action.copy-as-json.short',\n\t\t\t\tcontextMenuLabel: 'action.copy-as-json.short',\n\t\t\t\treadonlyOk: true,\n\t\t\t\tonSelect(source) {\n\t\t\t\t\ttrackEvent('copy-as', { format: 'json', source })\n\t\t\t\t\tcopyAs(editor.selectedIds, 'json')\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'toggle-auto-size',\n\t\t\t\tlabel: 'action.toggle-auto-size',\n\t\t\t\treadonlyOk: false,\n\t\t\t\tonSelect(source) {\n\t\t\t\t\ttrackEvent('toggle-auto-size', { source })\n\t\t\t\t\teditor.mark()\n\t\t\t\t\teditor.updateShapes(\n\t\t\t\t\t\teditor.selectedShapes\n\t\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t\t(shape): shape is TLTextShape =>\n\t\t\t\t\t\t\t\t\teditor.isShapeOfType(shape, TextShapeUtil) && shape.props.autoSize === false\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.map((shape) => {\n\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\tid: shape.id,\n\t\t\t\t\t\t\t\t\ttype: shape.type,\n\t\t\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\t\t\t...shape.props,\n\t\t\t\t\t\t\t\t\t\tw: 8,\n\t\t\t\t\t\t\t\t\t\tautoSize: true,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t)\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'open-embed-link',\n\t\t\t\tlabel: 'action.open-embed-link',\n\t\t\t\treadonlyOk: true,\n\t\t\t\tonSelect(source) {\n\t\t\t\t\ttrackEvent('open-embed-link', { source })\n\t\t\t\t\tconst ids = editor.selectedIds\n\t\t\t\t\tconst warnMsg = 'No embed shapes selected'\n\t\t\t\t\tif (ids.length !== 1) {\n\t\t\t\t\t\tconsole.error(warnMsg)\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t\tconst shape = editor.getShapeById(ids[0])\n\t\t\t\t\tif (!shape || !editor.isShapeOfType(shape, EmbedShapeUtil)) {\n\t\t\t\t\t\tconsole.error(warnMsg)\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\n\t\t\t\t\topenWindow(shape.props.url, '_blank')\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'convert-to-bookmark',\n\t\t\t\tlabel: 'action.convert-to-bookmark',\n\t\t\t\treadonlyOk: false,\n\t\t\t\tonSelect(source) {\n\t\t\t\t\ttrackEvent('convert-to-bookmark', { source })\n\t\t\t\t\tconst shapes = editor.selectedShapes\n\n\t\t\t\t\tconst createList: TLShapePartial[] = []\n\t\t\t\t\tconst deleteList: TLShapeId[] = []\n\t\t\t\t\tfor (const shape of shapes) {\n\t\t\t\t\t\tif (!shape || !editor.isShapeOfType(shape, EmbedShapeUtil) || !shape.props.url) continue\n\n\t\t\t\t\t\tconst newPos = new Vec2d(shape.x, shape.y)\n\t\t\t\t\t\tnewPos.rot(-shape.rotation)\n\t\t\t\t\t\tnewPos.add(new Vec2d(shape.props.w / 2 - 300 / 2, shape.props.h / 2 - 320 / 2)) // see bookmark shape util\n\t\t\t\t\t\tnewPos.rot(shape.rotation)\n\n\t\t\t\t\t\tcreateList.push({\n\t\t\t\t\t\t\tid: createShapeId(),\n\t\t\t\t\t\t\ttype: 'bookmark',\n\t\t\t\t\t\t\trotation: shape.rotation,\n\t\t\t\t\t\t\tx: newPos.x,\n\t\t\t\t\t\t\ty: newPos.y,\n\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\turl: shape.props.url,\n\t\t\t\t\t\t\t\topacity: '1',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t})\n\t\t\t\t\t\tdeleteList.push(shape.id)\n\t\t\t\t\t}\n\n\t\t\t\t\teditor.mark('convert shapes to bookmark')\n\t\t\t\t\teditor.deleteShapes(deleteList)\n\t\t\t\t\teditor.createShapes(createList)\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'convert-to-embed',\n\t\t\t\tlabel: 'action.convert-to-embed',\n\t\t\t\treadonlyOk: false,\n\t\t\t\tonSelect(source) {\n\t\t\t\t\ttrackEvent('convert-to-embed', { source })\n\t\t\t\t\tconst ids = editor.selectedIds\n\t\t\t\t\tconst shapes = compact(ids.map((id) => editor.getShapeById(id)))\n\n\t\t\t\t\tconst createList: TLShapePartial[] = []\n\t\t\t\t\tconst deleteList: TLShapeId[] = []\n\t\t\t\t\tfor (const shape of shapes) {\n\t\t\t\t\t\tif (!editor.isShapeOfType(shape, BookmarkShapeUtil)) continue\n\n\t\t\t\t\t\tconst { url } = shape.props\n\n\t\t\t\t\t\tconst embedInfo = getEmbedInfo(shape.props.url)\n\n\t\t\t\t\t\tif (!embedInfo) continue\n\t\t\t\t\t\tif (!embedInfo.definition) continue\n\n\t\t\t\t\t\tconst { width, height } = embedInfo.definition\n\n\t\t\t\t\t\tconst newPos = new Vec2d(shape.x, shape.y)\n\t\t\t\t\t\tnewPos.rot(-shape.rotation)\n\t\t\t\t\t\tnewPos.add(new Vec2d(shape.props.w / 2 - width / 2, shape.props.h / 2 - height / 2))\n\t\t\t\t\t\tnewPos.rot(shape.rotation)\n\n\t\t\t\t\t\tconst shapeToCreate: TLShapePartial<TLEmbedShape> = {\n\t\t\t\t\t\t\tid: createShapeId(),\n\t\t\t\t\t\t\ttype: 'embed',\n\t\t\t\t\t\t\tx: newPos.x,\n\t\t\t\t\t\t\ty: newPos.y,\n\t\t\t\t\t\t\trotation: shape.rotation,\n\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\turl: url,\n\t\t\t\t\t\t\t\tw: width,\n\t\t\t\t\t\t\t\th: height,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcreateList.push(shapeToCreate)\n\t\t\t\t\t\tdeleteList.push(shape.id)\n\t\t\t\t\t}\n\n\t\t\t\t\teditor.mark('convert shapes to embed')\n\t\t\t\t\teditor.deleteShapes(deleteList)\n\t\t\t\t\teditor.createShapes(createList)\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'duplicate',\n\t\t\t\tkbd: '$d',\n\t\t\t\tlabel: 'action.duplicate',\n\t\t\t\ticon: 'duplicate',\n\t\t\t\treadonlyOk: false,\n\t\t\t\tonSelect(source) {\n\t\t\t\t\tif (editor.currentToolId !== 'select') return\n\t\t\t\t\ttrackEvent('duplicate-shapes', { source })\n\t\t\t\t\tconst ids = editor.selectedIds\n\t\t\t\t\tconst commonBounds = Box2d.Common(compact(ids.map((id) => editor.getPageBoundsById(id))))\n\t\t\t\t\tconst offset = editor.canMoveCamera\n\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\tx: commonBounds.width + 10,\n\t\t\t\t\t\t\t\ty: 0,\n\t\t\t\t\t\t  }\n\t\t\t\t\t\t: {\n\t\t\t\t\t\t\t\tx: 16 / editor.zoomLevel,\n\t\t\t\t\t\t\t\ty: 16 / editor.zoomLevel,\n\t\t\t\t\t\t  }\n\t\t\t\t\teditor.mark('duplicate shapes')\n\t\t\t\t\teditor.duplicateShapes(ids, offset)\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'ungroup',\n\t\t\t\tlabel: 'action.ungroup',\n\t\t\t\tkbd: '$!g',\n\t\t\t\ticon: 'ungroup',\n\t\t\t\treadonlyOk: false,\n\t\t\t\tonSelect(source) {\n\t\t\t\t\ttrackEvent('ungroup-shapes', { source })\n\t\t\t\t\teditor.mark('ungroup')\n\t\t\t\t\teditor.ungroupShapes(editor.selectedIds)\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'group',\n\t\t\t\tlabel: 'action.group',\n\t\t\t\tkbd: '$g',\n\t\t\t\ticon: 'group',\n\t\t\t\treadonlyOk: false,\n\t\t\t\tonSelect(source) {\n\t\t\t\t\ttrackEvent('group-shapes', { source })\n\t\t\t\t\tconst { onlySelectedShape } = editor\n\t\t\t\t\tif (onlySelectedShape && editor.isShapeOfType(onlySelectedShape, GroupShapeUtil)) {\n\t\t\t\t\t\teditor.mark('ungroup')\n\t\t\t\t\t\teditor.ungroupShapes(editor.selectedIds)\n\t\t\t\t\t} else {\n\t\t\t\t\t\teditor.mark('group')\n\t\t\t\t\t\teditor.groupShapes(editor.selectedIds)\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'align-left',\n\t\t\t\tlabel: 'action.align-left',\n\t\t\t\tkbd: '?A',\n\t\t\t\ticon: 'align-left',\n\t\t\t\treadonlyOk: false,\n\t\t\t\tonSelect(source) {\n\t\t\t\t\ttrackEvent('align-shapes', { operation: 'left', source })\n\t\t\t\t\teditor.mark('align left')\n\t\t\t\t\teditor.alignShapes('left', editor.selectedIds)\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'align-center-horizontal',\n\t\t\t\tlabel: 'action.align-center-horizontal',\n\t\t\t\tcontextMenuLabel: 'action.align-center-horizontal.short',\n\t\t\t\tkbd: '?H',\n\t\t\t\ticon: 'align-center-horizontal',\n\t\t\t\treadonlyOk: false,\n\t\t\t\tonSelect(source) {\n\t\t\t\t\ttrackEvent('align-shapes', { operation: 'center-horizontal', source })\n\t\t\t\t\teditor.mark('align center horizontal')\n\t\t\t\t\teditor.alignShapes('center-horizontal', editor.selectedIds)\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'align-right',\n\t\t\t\tlabel: 'action.align-right',\n\t\t\t\tkbd: '?D',\n\t\t\t\ticon: 'align-right',\n\t\t\t\treadonlyOk: false,\n\t\t\t\tonSelect(source) {\n\t\t\t\t\ttrackEvent('align-shapes', { operation: 'right', source })\n\t\t\t\t\teditor.mark('align right')\n\t\t\t\t\teditor.alignShapes('right', editor.selectedIds)\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'align-center-vertical',\n\t\t\t\tlabel: 'action.align-center-vertical',\n\t\t\t\tcontextMenuLabel: 'action.align-center-vertical.short',\n\t\t\t\tkbd: '?V',\n\t\t\t\ticon: 'align-center-vertical',\n\t\t\t\treadonlyOk: false,\n\t\t\t\tonSelect(source) {\n\t\t\t\t\ttrackEvent('align-shapes', { operation: 'center-vertical', source })\n\t\t\t\t\teditor.mark('align center vertical')\n\t\t\t\t\teditor.alignShapes('center-vertical', editor.selectedIds)\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'align-top',\n\t\t\t\tlabel: 'action.align-top',\n\t\t\t\ticon: 'align-top',\n\t\t\t\tkbd: '?W',\n\t\t\t\treadonlyOk: false,\n\t\t\t\tonSelect(source) {\n\t\t\t\t\ttrackEvent('align-shapes', { operation: 'top', source })\n\t\t\t\t\teditor.mark('align top')\n\t\t\t\t\teditor.alignShapes('top', editor.selectedIds)\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'align-bottom',\n\t\t\t\tlabel: 'action.align-bottom',\n\t\t\t\ticon: 'align-bottom',\n\t\t\t\tkbd: '?S',\n\t\t\t\treadonlyOk: false,\n\t\t\t\tonSelect(source) {\n\t\t\t\t\ttrackEvent('align-shapes', { operation: 'bottom', source })\n\t\t\t\t\teditor.mark('align bottom')\n\t\t\t\t\teditor.alignShapes('bottom', editor.selectedIds)\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'distribute-horizontal',\n\t\t\t\tlabel: 'action.distribute-horizontal',\n\t\t\t\tcontextMenuLabel: 'action.distribute-horizontal.short',\n\t\t\t\ticon: 'distribute-horizontal',\n\t\t\t\tkbd: '?!h',\n\t\t\t\treadonlyOk: false,\n\t\t\t\tonSelect(source) {\n\t\t\t\t\ttrackEvent('distribute-shapes', { operation: 'horizontal', source })\n\t\t\t\t\teditor.mark('distribute horizontal')\n\t\t\t\t\teditor.distributeShapes('horizontal', editor.selectedIds)\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'distribute-vertical',\n\t\t\t\tlabel: 'action.distribute-vertical',\n\t\t\t\tcontextMenuLabel: 'action.distribute-vertical.short',\n\t\t\t\ticon: 'distribute-vertical',\n\t\t\t\tkbd: '?!V',\n\t\t\t\treadonlyOk: false,\n\t\t\t\tonSelect(source) {\n\t\t\t\t\ttrackEvent('distribute-shapes', { operation: 'vertical', source })\n\t\t\t\t\teditor.mark('distribute vertical')\n\t\t\t\t\teditor.distributeShapes('vertical', editor.selectedIds)\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'stretch-horizontal',\n\t\t\t\tlabel: 'action.stretch-horizontal',\n\t\t\t\tcontextMenuLabel: 'action.stretch-horizontal.short',\n\t\t\t\ticon: 'stretch-horizontal',\n\t\t\t\treadonlyOk: false,\n\t\t\t\tonSelect(source) {\n\t\t\t\t\ttrackEvent('stretch-shapes', { operation: 'horizontal', source })\n\t\t\t\t\teditor.mark('stretch horizontal')\n\t\t\t\t\teditor.stretchShapes('horizontal', editor.selectedIds)\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'stretch-vertical',\n\t\t\t\tlabel: 'action.stretch-vertical',\n\t\t\t\tcontextMenuLabel: 'action.stretch-vertical.short',\n\t\t\t\ticon: 'stretch-vertical',\n\t\t\t\treadonlyOk: false,\n\t\t\t\tonSelect(source) {\n\t\t\t\t\ttrackEvent('stretch-shapes', { operation: 'vertical', source })\n\t\t\t\t\teditor.mark('stretch vertical')\n\t\t\t\t\teditor.stretchShapes('vertical', editor.selectedIds)\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'flip-horizontal',\n\t\t\t\tlabel: 'action.flip-horizontal',\n\t\t\t\tcontextMenuLabel: 'action.flip-horizontal.short',\n\t\t\t\tkbd: '!h',\n\t\t\t\treadonlyOk: false,\n\t\t\t\tonSelect(source) {\n\t\t\t\t\ttrackEvent('flip-shapes', { operation: 'horizontal', source })\n\t\t\t\t\teditor.mark('flip horizontal')\n\t\t\t\t\teditor.flipShapes('horizontal', editor.selectedIds)\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'flip-vertical',\n\t\t\t\tlabel: 'action.flip-vertical',\n\t\t\t\tcontextMenuLabel: 'action.flip-vertical.short',\n\t\t\t\tkbd: '!v',\n\t\t\t\treadonlyOk: false,\n\t\t\t\tonSelect(source) {\n\t\t\t\t\ttrackEvent('flip-shapes', { operation: 'vertical', source })\n\t\t\t\t\teditor.mark('flip vertical')\n\t\t\t\t\teditor.flipShapes('vertical', editor.selectedIds)\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'pack',\n\t\t\t\tlabel: 'action.pack',\n\t\t\t\ticon: 'pack',\n\t\t\t\treadonlyOk: false,\n\t\t\t\tonSelect(source) {\n\t\t\t\t\ttrackEvent('pack-shapes', { source })\n\t\t\t\t\teditor.mark('pack')\n\t\t\t\t\teditor.packShapes(editor.selectedIds)\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'stack-vertical',\n\t\t\t\tlabel: 'action.stack-vertical',\n\t\t\t\tcontextMenuLabel: 'action.stack-vertical.short',\n\t\t\t\ticon: 'stack-vertical',\n\t\t\t\treadonlyOk: false,\n\t\t\t\tonSelect(source) {\n\t\t\t\t\ttrackEvent('stack-shapes', { operation: 'vertical', source })\n\t\t\t\t\teditor.mark('stack-vertical')\n\t\t\t\t\teditor.stackShapes('vertical', editor.selectedIds)\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'stack-horizontal',\n\t\t\t\tlabel: 'action.stack-horizontal',\n\t\t\t\tcontextMenuLabel: 'action.stack-horizontal.short',\n\t\t\t\ticon: 'stack-horizontal',\n\t\t\t\treadonlyOk: false,\n\t\t\t\tonSelect(source) {\n\t\t\t\t\ttrackEvent('stack-shapes', { operation: 'horizontal', source })\n\t\t\t\t\teditor.mark('stack-horizontal')\n\t\t\t\t\teditor.stackShapes('horizontal', editor.selectedIds)\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'bring-to-front',\n\t\t\t\tlabel: 'action.bring-to-front',\n\t\t\t\tkbd: ']',\n\t\t\t\ticon: 'bring-to-front',\n\t\t\t\treadonlyOk: false,\n\t\t\t\tonSelect(source) {\n\t\t\t\t\ttrackEvent('reorder-shapes', { operation: 'toFront', source })\n\t\t\t\t\teditor.mark('bring to front')\n\t\t\t\t\teditor.bringToFront()\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'bring-forward',\n\t\t\t\tlabel: 'action.bring-forward',\n\t\t\t\ticon: 'bring-forward',\n\t\t\t\tkbd: '?]',\n\t\t\t\treadonlyOk: false,\n\t\t\t\tonSelect(source) {\n\t\t\t\t\ttrackEvent('reorder-shapes', { operation: 'forward', source })\n\t\t\t\t\teditor.mark('bring forward')\n\t\t\t\t\teditor.bringForward()\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'send-backward',\n\t\t\t\tlabel: 'action.send-backward',\n\t\t\t\ticon: 'send-backward',\n\t\t\t\tkbd: '?[',\n\t\t\t\treadonlyOk: false,\n\t\t\t\tonSelect(source) {\n\t\t\t\t\ttrackEvent('reorder-shapes', { operation: 'backward', source })\n\t\t\t\t\teditor.mark('send backward')\n\t\t\t\t\teditor.sendBackward()\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'send-to-back',\n\t\t\t\tlabel: 'action.send-to-back',\n\t\t\t\ticon: 'send-to-back',\n\t\t\t\tkbd: '[',\n\t\t\t\treadonlyOk: false,\n\t\t\t\tonSelect(source) {\n\t\t\t\t\ttrackEvent('reorder-shapes', { operation: 'toBack', source })\n\t\t\t\t\teditor.mark('send to back')\n\t\t\t\t\teditor.sendToBack()\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'cut',\n\t\t\t\tlabel: 'action.cut',\n\t\t\t\tkbd: '$x',\n\t\t\t\treadonlyOk: false,\n\t\t\t\tonSelect(source) {\n\t\t\t\t\teditor.mark('cut')\n\t\t\t\t\tcut(source)\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'copy',\n\t\t\t\tlabel: 'action.copy',\n\t\t\t\tkbd: '$c',\n\t\t\t\treadonlyOk: true,\n\t\t\t\tonSelect(source) {\n\t\t\t\t\tcopy(source)\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'paste',\n\t\t\t\tlabel: 'action.paste',\n\t\t\t\tkbd: '$v',\n\t\t\t\treadonlyOk: false,\n\t\t\t\tonSelect(source) {\n\t\t\t\t\tnavigator.clipboard?.read().then((clipboardItems) => {\n\t\t\t\t\t\tpaste(\n\t\t\t\t\t\t\tclipboardItems,\n\t\t\t\t\t\t\tsource,\n\t\t\t\t\t\t\tsource === 'context-menu' ? editor.inputs.currentPagePoint : undefined\n\t\t\t\t\t\t)\n\t\t\t\t\t})\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'select-all',\n\t\t\t\tlabel: 'action.select-all',\n\t\t\t\tkbd: '$a',\n\t\t\t\treadonlyOk: true,\n\t\t\t\tonSelect(source) {\n\t\t\t\t\ttrackEvent('select-all-shapes', { source })\n\t\t\t\t\tif (editor.currentToolId !== 'select') {\n\t\t\t\t\t\teditor.cancel()\n\t\t\t\t\t\teditor.setSelectedTool('select')\n\t\t\t\t\t}\n\n\t\t\t\t\teditor.mark('select all kbd')\n\t\t\t\t\teditor.selectAll()\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'select-none',\n\t\t\t\tlabel: 'action.select-none',\n\t\t\t\treadonlyOk: true,\n\t\t\t\tonSelect(source) {\n\t\t\t\t\ttrackEvent('select-none-shapes', { source })\n\t\t\t\t\teditor.mark('select none')\n\t\t\t\t\teditor.selectNone()\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'delete',\n\t\t\t\tlabel: 'action.delete',\n\t\t\t\tkbd: '⌫,del,backspace',\n\t\t\t\ticon: 'trash',\n\t\t\t\treadonlyOk: false,\n\t\t\t\tonSelect(source) {\n\t\t\t\t\tif (editor.currentToolId !== 'select') return\n\t\t\t\t\ttrackEvent('delete-shapes', { source })\n\t\t\t\t\teditor.mark('delete')\n\t\t\t\t\teditor.deleteShapes()\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'rotate-cw',\n\t\t\t\tlabel: 'action.rotate-cw',\n\t\t\t\ticon: 'rotate-cw',\n\t\t\t\treadonlyOk: false,\n\t\t\t\tonSelect(source) {\n\t\t\t\t\tif (editor.selectedIds.length === 0) return\n\t\t\t\t\ttrackEvent('rotate-cw', { source })\n\t\t\t\t\teditor.mark('rotate-cw')\n\t\t\t\t\tconst offset = editor.selectionRotation % (TAU / 2)\n\t\t\t\t\tconst dontUseOffset = approximately(offset, 0) || approximately(offset, TAU / 2)\n\t\t\t\t\teditor.rotateShapesBy(editor.selectedIds, TAU / 2 - (dontUseOffset ? 0 : offset))\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'rotate-ccw',\n\t\t\t\tlabel: 'action.rotate-ccw',\n\t\t\t\ticon: 'rotate-ccw',\n\t\t\t\treadonlyOk: false,\n\t\t\t\tonSelect(source) {\n\t\t\t\t\tif (editor.selectedIds.length === 0) return\n\t\t\t\t\ttrackEvent('rotate-ccw', { source })\n\t\t\t\t\teditor.mark('rotate-ccw')\n\t\t\t\t\tconst offset = editor.selectionRotation % (TAU / 2)\n\t\t\t\t\tconst offsetCloseToZero = approximately(offset, 0)\n\t\t\t\t\teditor.rotateShapesBy(editor.selectedIds, offsetCloseToZero ? -(TAU / 2) : -offset)\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'zoom-in',\n\t\t\t\tlabel: 'action.zoom-in',\n\t\t\t\tkbd: '$=,=',\n\t\t\t\treadonlyOk: true,\n\t\t\t\tonSelect(source) {\n\t\t\t\t\ttrackEvent('zoom-in', { source })\n\t\t\t\t\teditor.zoomIn(editor.viewportScreenCenter, { duration: ANIMATION_MEDIUM_MS })\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'zoom-out',\n\t\t\t\tlabel: 'action.zoom-out',\n\t\t\t\tkbd: '$-,-',\n\t\t\t\treadonlyOk: true,\n\t\t\t\tonSelect(source) {\n\t\t\t\t\ttrackEvent('zoom-out', { source })\n\t\t\t\t\teditor.zoomOut(editor.viewportScreenCenter, { duration: ANIMATION_MEDIUM_MS })\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'zoom-to-100',\n\t\t\t\tlabel: 'action.zoom-to-100',\n\t\t\t\ticon: 'reset-zoom',\n\t\t\t\tkbd: '!0',\n\t\t\t\treadonlyOk: true,\n\t\t\t\tonSelect(source) {\n\t\t\t\t\ttrackEvent('reset-zoom', { source })\n\t\t\t\t\teditor.resetZoom(editor.viewportScreenCenter, { duration: ANIMATION_MEDIUM_MS })\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'zoom-to-fit',\n\t\t\t\tlabel: 'action.zoom-to-fit',\n\t\t\t\tkbd: '!1',\n\t\t\t\treadonlyOk: true,\n\t\t\t\tonSelect(source) {\n\t\t\t\t\ttrackEvent('zoom-to-fit', { source })\n\t\t\t\t\teditor.zoomToFit({ duration: ANIMATION_MEDIUM_MS })\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'zoom-to-selection',\n\t\t\t\tlabel: 'action.zoom-to-selection',\n\t\t\t\tkbd: '!2',\n\t\t\t\treadonlyOk: true,\n\t\t\t\tonSelect(source) {\n\t\t\t\t\ttrackEvent('zoom-to-selection', { source })\n\t\t\t\t\teditor.zoomToSelection({ duration: ANIMATION_MEDIUM_MS })\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'toggle-snap-mode',\n\t\t\t\tlabel: 'action.toggle-snap-mode',\n\t\t\t\tmenuLabel: 'action.toggle-snap-mode.menu',\n\t\t\t\treadonlyOk: false,\n\t\t\t\tonSelect(source) {\n\t\t\t\t\ttrackEvent('toggle-snap-mode', { source })\n\t\t\t\t\teditor.setSnapMode(!editor.isSnapMode)\n\t\t\t\t},\n\t\t\t\tcheckbox: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'toggle-dark-mode',\n\t\t\t\tlabel: 'action.toggle-dark-mode',\n\t\t\t\tmenuLabel: 'action.toggle-dark-mode.menu',\n\t\t\t\tkbd: '$/',\n\t\t\t\treadonlyOk: true,\n\t\t\t\tonSelect(source) {\n\t\t\t\t\ttrackEvent('toggle-dark-mode', { source })\n\t\t\t\t\teditor.setDarkMode(!editor.isDarkMode)\n\t\t\t\t},\n\t\t\t\tcheckbox: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'toggle-reduce-motion',\n\t\t\t\tlabel: 'action.toggle-reduce-motion',\n\t\t\t\tmenuLabel: 'action.toggle-reduce-motion.menu',\n\t\t\t\treadonlyOk: true,\n\t\t\t\tonSelect(source) {\n\t\t\t\t\ttrackEvent('toggle-reduce-motion', { source })\n\t\t\t\t\teditor.setAnimationSpeed(editor.animationSpeed === 0 ? 1 : 0)\n\t\t\t\t},\n\t\t\t\tcheckbox: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'toggle-transparent',\n\t\t\t\tlabel: 'action.toggle-transparent',\n\t\t\t\tmenuLabel: 'action.toggle-transparent.menu',\n\t\t\t\tcontextMenuLabel: 'action.toggle-transparent.context-menu',\n\t\t\t\treadonlyOk: true,\n\t\t\t\tonSelect(source) {\n\t\t\t\t\ttrackEvent('toggle-transparent', { source })\n\t\t\t\t\teditor.updateInstanceState(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\texportBackground: !editor.instanceState.exportBackground,\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttrue\n\t\t\t\t\t)\n\t\t\t\t},\n\t\t\t\tcheckbox: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'toggle-tool-lock',\n\t\t\t\tlabel: 'action.toggle-tool-lock',\n\t\t\t\tmenuLabel: 'action.toggle-tool-lock.menu',\n\t\t\t\treadonlyOk: false,\n\t\t\t\tkbd: 'q',\n\t\t\t\tonSelect(source) {\n\t\t\t\t\ttrackEvent('toggle-tool-lock', { source })\n\t\t\t\t\teditor.setToolLocked(!editor.isToolLocked)\n\t\t\t\t},\n\t\t\t\tcheckbox: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'toggle-focus-mode',\n\t\t\t\tlabel: 'action.toggle-focus-mode',\n\t\t\t\tmenuLabel: 'action.toggle-focus-mode.menu',\n\t\t\t\treadonlyOk: true,\n\t\t\t\tkbd: '$.',\n\t\t\t\tcheckbox: true,\n\t\t\t\tonSelect(source) {\n\t\t\t\t\t// this needs to be deferred because it causes the menu\n\t\t\t\t\t// UI to unmount which puts us in a dodgy state\n\t\t\t\t\trequestAnimationFrame(() => {\n\t\t\t\t\t\teditor.batch(() => {\n\t\t\t\t\t\t\ttrackEvent('toggle-focus-mode', { source })\n\t\t\t\t\t\t\tclearDialogs()\n\t\t\t\t\t\t\tclearToasts()\n\t\t\t\t\t\t\teditor.setFocusMode(!editor.isFocusMode)\n\t\t\t\t\t\t})\n\t\t\t\t\t})\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'toggle-grid',\n\t\t\t\tlabel: 'action.toggle-grid',\n\t\t\t\tmenuLabel: 'action.toggle-grid.menu',\n\t\t\t\treadonlyOk: true,\n\t\t\t\tkbd: \"$'\",\n\t\t\t\tonSelect(source) {\n\t\t\t\t\ttrackEvent('toggle-grid-mode', { source })\n\t\t\t\t\teditor.setGridMode(!editor.isGridMode)\n\t\t\t\t},\n\t\t\t\tcheckbox: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'toggle-debug-mode',\n\t\t\t\tlabel: 'action.toggle-debug-mode',\n\t\t\t\tmenuLabel: 'action.toggle-debug-mode.menu',\n\t\t\t\treadonlyOk: true,\n\t\t\t\tonSelect(source) {\n\t\t\t\t\ttrackEvent('toggle-debug-mode', { source })\n\t\t\t\t\teditor.updateInstanceState(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tisDebugMode: !editor.instanceState.isDebugMode,\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttrue\n\t\t\t\t\t)\n\t\t\t\t},\n\t\t\t\tcheckbox: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'print',\n\t\t\t\tlabel: 'action.print',\n\t\t\t\tkbd: '$p',\n\t\t\t\treadonlyOk: true,\n\t\t\t\tonSelect(source) {\n\t\t\t\t\ttrackEvent('print', { source })\n\t\t\t\t\tprintSelectionOrPages()\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'exit-pen-mode',\n\t\t\t\tlabel: 'action.exit-pen-mode',\n\t\t\t\ticon: 'cross-2',\n\t\t\t\treadonlyOk: true,\n\t\t\t\tonSelect(source) {\n\t\t\t\t\ttrackEvent('exit-pen-mode', { source })\n\t\t\t\t\teditor.setPenMode(false)\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'stop-following',\n\t\t\t\tlabel: 'action.stop-following',\n\t\t\t\ticon: 'cross-2',\n\t\t\t\treadonlyOk: true,\n\t\t\t\tonSelect(source) {\n\t\t\t\t\ttrackEvent('stop-following', { source })\n\t\t\t\t\teditor.stopFollowingUser()\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'back-to-content',\n\t\t\t\tlabel: 'action.back-to-content',\n\t\t\t\ticon: 'arrow-left',\n\t\t\t\treadonlyOk: true,\n\t\t\t\tonSelect(source) {\n\t\t\t\t\ttrackEvent('zoom-to-content', { source })\n\t\t\t\t\teditor.zoomToContent()\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'toggle-lock',\n\t\t\t\tlabel: 'action.toggle-lock',\n\t\t\t\treadonlyOk: false,\n\t\t\t\tkbd: '!$l',\n\t\t\t\tonSelect(source) {\n\t\t\t\t\ttrackEvent('toggle-lock', { source })\n\t\t\t\t\teditor.toggleLock()\n\t\t\t\t},\n\t\t\t},\n\t\t])\n\n\t\tif (overrides) {\n\t\t\treturn overrides(editor, actions, undefined)\n\t\t}\n\n\t\treturn actions\n\t}, [\n\t\ttrackEvent,\n\t\toverrides,\n\t\teditor,\n\t\taddDialog,\n\t\tinsertMedia,\n\t\texportAs,\n\t\tcopyAs,\n\t\tcut,\n\t\tcopy,\n\t\tpaste,\n\t\tclearDialogs,\n\t\tclearToasts,\n\t\tprintSelectionOrPages,\n\t])\n\n\treturn <ActionsContext.Provider value={asActions(actions)}>{children}</ActionsContext.Provider>\n}\n\n/** @public */\nexport function useActions() {\n\tconst ctx = React.useContext(ActionsContext)\n\n\tif (!ctx) {\n\t\tthrow new Error('useTools must be used within a ToolProvider')\n\t}\n\n\treturn ctx\n}\n\nfunction asActions<T extends Record<string, TLUiActionItem>>(actions: T) {\n\treturn actions as Record<keyof typeof actions, TLUiActionItem>\n}\n"],"mappings":";;AAi8BQ,SAAAA,GAAA;AAj8BR,SACCC,mBAAA,EACAC,iBAAA,EAEAC,cAAA,EACAC,cAAA,EAKAC,aAAA,EACAC,aAAA,EACAC,YAAA,EACAC,UAAA,EACAC,SAAA,QACM;AACP,SAASC,KAAA,EAAOC,GAAA,EAAKC,KAAA,EAAOC,aAAA,QAAqB;AACjD,SAASC,OAAA,QAAe;AACxB,YAAYC,KAAA,MAAW;AACvB,SAASC,cAAA,QAAsB;AAC/B,SAASC,WAAA,QAAmB;AAE5B,SAASC,sBAAA,QAA8B;AACvC,SAASC,SAAA,QAAiB;AAC1B,SAASC,UAAA,QAAkB;AAC3B,SAA0BC,SAAA,QAAiB;AAC3C,SAASC,WAAA,QAAmB;AAC5B,SAASC,cAAA,QAAsB;AAC/B,SAASC,QAAA,QAAgB;AACzB,SAASC,SAAA,QAAiB;AAsBnB,IAAMC,cAAA,GAAiBX,KAAA,CAAMY,aAAA,CAAsC,CAAC,CAAC;AAY5E,SAASC,YAAYC,OAAA,EAA2B;EAC/C,OAAOC,MAAA,CAAOC,WAAA,CAAYF,OAAA,CAAQG,GAAA,CAAI,UAACC,MAAA;IAAA,OAAW,CAACA,MAAA,CAAOC,EAAA,EAAID,MAAM,CAAC;EAAA,EAAC;AACvE;AAGO,SAASE,gBAAAC,IAAA,EAA+D;EAAA,IAA7CC,SAAA,GAAAD,IAAA,CAAAC,SAAA;IAAWC,QAAA,GAAAF,IAAA,CAAAE,QAAA;EAC5C,IAAMC,MAAA,GAAS9B,SAAA,CAAU;EAEzB,IAAA+B,WAAA,GAAoCpB,UAAA,CAAW;IAAvCqB,SAAA,GAAAD,WAAA,CAAAC,SAAA;IAAWC,YAAA,GAAAF,WAAA,CAAAE,YAAA;EACnB,IAAAC,UAAA,GAAwBlB,SAAA,CAAU;IAA1BmB,WAAA,GAAAD,UAAA,CAAAC,WAAA;EAER,IAAMC,WAAA,GAActB,cAAA,CAAe;EACnC,IAAMuB,qBAAA,GAAwBtB,QAAA,CAAS;EACvC,IAAAuB,qBAAA,GAA6B7B,sBAAA,CAAuB;IAA5C8B,GAAA,GAAAD,qBAAA,CAAAC,GAAA;IAAKC,IAAA,GAAAF,qBAAA,CAAAE,IAAA;IAAMC,KAAA,GAAAH,qBAAA,CAAAG,KAAA;EACnB,IAAMC,MAAA,GAAShC,SAAA,CAAU;EACzB,IAAMiC,QAAA,GAAW9B,WAAA,CAAY;EAE7B,IAAM+B,UAAA,GAAahC,SAAA,CAAU;EAG7B,IAAMQ,OAAA,GAAUd,KAAA,CAAMuC,OAAA,CAAgC,YAAM;IAC3D,IAAMC,QAAA,GAAU3B,WAAA,CAAY,CAC3B;MACCM,EAAA,EAAI;MACJsB,KAAA,EAAO;MACPC,IAAA,EAAM;MACNC,UAAA,EAAY;MACZC,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAChBP,UAAA,CAAW,aAAa;UAAEO,MAAA,EAAAA;QAAO,CAAC;QAClCrB,MAAA,CAAOsB,IAAA,CAAK,WAAW;QACvBpB,SAAA,CAAU;UAAEqB,SAAA,EAAW9C;QAAe,CAAC;MACxC;IACD,GACA;MACCkB,EAAA,EAAI;MACJsB,KAAA,EAAO;MACPE,UAAA,EAAY;MACZK,GAAA,EAAK;MACLJ,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAChBP,UAAA,CAAW,gBAAgB;UAAEO,MAAA,EAAAA;QAAO,CAAC;QACrCnB,SAAA,CAAU;UAAEqB,SAAA,EAAW7C;QAAY,CAAC;MACrC;IACD,GACA;MACCiB,EAAA,EAAI;MACJsB,KAAA,EAAO;MACPO,GAAA,EAAK;MACLL,UAAA,EAAY;MACZC,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAChBP,UAAA,CAAW,gBAAgB;UAAEO,MAAA,EAAAA;QAAO,CAAC;QACrCf,WAAA,CAAY;MACb;IACD,GACA;MACCX,EAAA,EAAI;MACJsB,KAAA,EAAO;MACPC,IAAA,EAAM;MACNM,GAAA,EAAK;MACLL,UAAA,EAAY;MACZC,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAChBP,UAAA,CAAW,QAAQ;UAAEO,MAAA,EAAAA;QAAO,CAAC;QAC7BrB,MAAA,CAAOyB,IAAA,CAAK;MACb;IACD,GACA;MACC9B,EAAA,EAAI;MACJsB,KAAA,EAAO;MACPC,IAAA,EAAM;MACNM,GAAA,EAAK;MACLL,UAAA,EAAY;MACZC,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAChBP,UAAA,CAAW,QAAQ;UAAEO,MAAA,EAAAA;QAAO,CAAC;QAC7BrB,MAAA,CAAO0B,IAAA,CAAK;MACb;IACD,GACA;MACC/B,EAAA,EAAI;MACJsB,KAAA,EAAO;MACPU,SAAA,EAAW;MACXC,gBAAA,EAAkB;MAClBT,UAAA,EAAY;MACZC,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAChBP,UAAA,CAAW,aAAa;UAAEe,MAAA,EAAQ;UAAOR,MAAA,EAAAA;QAAO,CAAC;QACjDR,QAAA,CAASb,MAAA,CAAO8B,WAAA,EAAa,KAAK;MACnC;IACD,GACA;MACCnC,EAAA,EAAI;MACJsB,KAAA,EAAO;MACPU,SAAA,EAAW;MACXC,gBAAA,EAAkB;MAClBT,UAAA,EAAY;MACZC,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAChBP,UAAA,CAAW,aAAa;UAAEe,MAAA,EAAQ;UAAOR,MAAA,EAAAA;QAAO,CAAC;QACjDR,QAAA,CAASb,MAAA,CAAO8B,WAAA,EAAa,KAAK;MACnC;IACD,GACA;MACCnC,EAAA,EAAI;MACJsB,KAAA,EAAO;MACPU,SAAA,EAAW;MACXC,gBAAA,EAAkB;MAClBT,UAAA,EAAY;MACZC,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAChBP,UAAA,CAAW,aAAa;UAAEe,MAAA,EAAQ;UAAQR,MAAA,EAAAA;QAAO,CAAC;QAClDR,QAAA,CAASb,MAAA,CAAO8B,WAAA,EAAa,MAAM;MACpC;IACD,GACA;MACCnC,EAAA,EAAI;MACJsB,KAAA,EAAO;MACPU,SAAA,EAAW;MACXC,gBAAA,EAAkB;MAClBJ,GAAA,EAAK;MACLL,UAAA,EAAY;MACZC,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAChBP,UAAA,CAAW,WAAW;UAAEe,MAAA,EAAQ;UAAOR,MAAA,EAAAA;QAAO,CAAC;QAC/CT,MAAA,CAAOZ,MAAA,CAAO8B,WAAA,EAAa,KAAK;MACjC;IACD,GACA;MACCnC,EAAA,EAAI;MACJsB,KAAA,EAAO;MACPU,SAAA,EAAW;MACXC,gBAAA,EAAkB;MAClBT,UAAA,EAAY;MACZC,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAChBP,UAAA,CAAW,WAAW;UAAEe,MAAA,EAAQ;UAAOR,MAAA,EAAAA;QAAO,CAAC;QAC/CT,MAAA,CAAOZ,MAAA,CAAO8B,WAAA,EAAa,KAAK;MACjC;IACD,GACA;MACCnC,EAAA,EAAI;MACJsB,KAAA,EAAO;MACPU,SAAA,EAAW;MACXC,gBAAA,EAAkB;MAClBT,UAAA,EAAY;MACZC,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAChBP,UAAA,CAAW,WAAW;UAAEe,MAAA,EAAQ;UAAQR,MAAA,EAAAA;QAAO,CAAC;QAChDT,MAAA,CAAOZ,MAAA,CAAO8B,WAAA,EAAa,MAAM;MAClC;IACD,GACA;MACCnC,EAAA,EAAI;MACJsB,KAAA,EAAO;MACPE,UAAA,EAAY;MACZC,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAChBP,UAAA,CAAW,oBAAoB;UAAEO,MAAA,EAAAA;QAAO,CAAC;QACzCrB,MAAA,CAAOsB,IAAA,CAAK;QACZtB,MAAA,CAAO+B,YAAA,CACN/B,MAAA,CAAOgC,cAAA,CACLC,MAAA,CACA,UAACC,KAAA;UAAA,OACAlC,MAAA,CAAOmC,aAAA,CAAcD,KAAA,EAAOpE,aAAa,KAAKoE,KAAA,CAAME,KAAA,CAAMC,QAAA,KAAa;QAAA,CACzE,EACC5C,GAAA,CAAI,UAACyC,KAAA,EAAU;UACf,OAAO;YACNvC,EAAA,EAAIuC,KAAA,CAAMvC,EAAA;YACV2C,IAAA,EAAMJ,KAAA,CAAMI,IAAA;YACZF,KAAA,EAAAG,aAAA,CAAAA,aAAA,KACIL,KAAA,CAAME,KAAA;cACTI,CAAA,EAAG;cACHH,QAAA,EAAU;YAAA;UAEZ;QACD,CAAC,CACH;MACD;IACD,GACA;MACC1C,EAAA,EAAI;MACJsB,KAAA,EAAO;MACPE,UAAA,EAAY;MACZC,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAChBP,UAAA,CAAW,mBAAmB;UAAEO,MAAA,EAAAA;QAAO,CAAC;QACxC,IAAMoB,GAAA,GAAMzC,MAAA,CAAO8B,WAAA;QACnB,IAAMY,OAAA,GAAU;QAChB,IAAID,GAAA,CAAIE,MAAA,KAAW,GAAG;UACrBC,OAAA,CAAQC,KAAA,CAAMH,OAAO;UACrB;QACD;QACA,IAAMR,KAAA,GAAQlC,MAAA,CAAO8C,YAAA,CAAaL,GAAA,CAAI,CAAC,CAAC;QACxC,IAAI,CAACP,KAAA,IAAS,CAAClC,MAAA,CAAOmC,aAAA,CAAcD,KAAA,EAAOtE,cAAc,GAAG;UAC3DgF,OAAA,CAAQC,KAAA,CAAMH,OAAO;UACrB;QACD;QAEAzE,UAAA,CAAWiE,KAAA,CAAME,KAAA,CAAMW,GAAA,EAAK,QAAQ;MACrC;IACD,GACA;MACCpD,EAAA,EAAI;MACJsB,KAAA,EAAO;MACPE,UAAA,EAAY;MACZC,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAChBP,UAAA,CAAW,uBAAuB;UAAEO,MAAA,EAAAA;QAAO,CAAC;QAC5C,IAAM2B,MAAA,GAAShD,MAAA,CAAOgC,cAAA;QAEtB,IAAMiB,UAAA,GAA+B,EAAC;QACtC,IAAMC,UAAA,GAA0B,EAAC;QAAA,IAAAC,SAAA,GAAAC,0BAAA,CACbJ,MAAA;UAAAK,KAAA;QAAA;UAApB,KAAAF,SAAA,CAAAG,CAAA,MAAAD,KAAA,GAAAF,SAAA,CAAAI,CAAA,IAAAC,IAAA,GAA4B;YAAA,IAAjBtB,KAAA,GAAAmB,KAAA,CAAAI,KAAA;YACV,IAAI,CAACvB,KAAA,IAAS,CAAClC,MAAA,CAAOmC,aAAA,CAAcD,KAAA,EAAOtE,cAAc,KAAK,CAACsE,KAAA,CAAME,KAAA,CAAMW,GAAA,EAAK;YAEhF,IAAMW,MAAA,GAAS,IAAIrF,KAAA,CAAM6D,KAAA,CAAMyB,CAAA,EAAGzB,KAAA,CAAM0B,CAAC;YACzCF,MAAA,CAAOG,GAAA,CAAI,CAAC3B,KAAA,CAAM4B,QAAQ;YAC1BJ,MAAA,CAAOK,GAAA,CAAI,IAAI1F,KAAA,CAAM6D,KAAA,CAAME,KAAA,CAAMI,CAAA,GAAI,IAAI,MAAM,GAAGN,KAAA,CAAME,KAAA,CAAM4B,CAAA,GAAI,IAAI,MAAM,CAAC,CAAC;YAC9EN,MAAA,CAAOG,GAAA,CAAI3B,KAAA,CAAM4B,QAAQ;YAEzBb,UAAA,CAAWgB,IAAA,CAAK;cACftE,EAAA,EAAI5B,aAAA,CAAc;cAClBuE,IAAA,EAAM;cACNwB,QAAA,EAAU5B,KAAA,CAAM4B,QAAA;cAChBH,CAAA,EAAGD,MAAA,CAAOC,CAAA;cACVC,CAAA,EAAGF,MAAA,CAAOE,CAAA;cACVxB,KAAA,EAAO;gBACNW,GAAA,EAAKb,KAAA,CAAME,KAAA,CAAMW,GAAA;gBACjBmB,OAAA,EAAS;cACV;YACD,CAAC;YACDhB,UAAA,CAAWe,IAAA,CAAK/B,KAAA,CAAMvC,EAAE;UACzB;QAAA,SAAAwE,GAAA;UAAAhB,SAAA,CAAAiB,CAAA,CAAAD,GAAA;QAAA;UAAAhB,SAAA,CAAAkB,CAAA;QAAA;QAEArE,MAAA,CAAOsB,IAAA,CAAK,4BAA4B;QACxCtB,MAAA,CAAOsE,YAAA,CAAapB,UAAU;QAC9BlD,MAAA,CAAOuE,YAAA,CAAatB,UAAU;MAC/B;IACD,GACA;MACCtD,EAAA,EAAI;MACJsB,KAAA,EAAO;MACPE,UAAA,EAAY;MACZC,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAChBP,UAAA,CAAW,oBAAoB;UAAEO,MAAA,EAAAA;QAAO,CAAC;QACzC,IAAMoB,GAAA,GAAMzC,MAAA,CAAO8B,WAAA;QACnB,IAAMkB,MAAA,GAASzE,OAAA,CAAQkE,GAAA,CAAIhD,GAAA,CAAI,UAACE,EAAA;UAAA,OAAOK,MAAA,CAAO8C,YAAA,CAAanD,EAAE,CAAC;QAAA,EAAC;QAE/D,IAAMsD,UAAA,GAA+B,EAAC;QACtC,IAAMC,UAAA,GAA0B,EAAC;QAAA,IAAAsB,UAAA,GAAApB,0BAAA,CACbJ,MAAA;UAAAyB,MAAA;QAAA;UAApB,KAAAD,UAAA,CAAAlB,CAAA,MAAAmB,MAAA,GAAAD,UAAA,CAAAjB,CAAA,IAAAC,IAAA,GAA4B;YAAA,IAAjBtB,KAAA,GAAAuC,MAAA,CAAAhB,KAAA;YACV,IAAI,CAACzD,MAAA,CAAOmC,aAAA,CAAcD,KAAA,EAAOvE,iBAAiB,GAAG;YAErD,IAAQoF,GAAA,GAAQb,KAAA,CAAME,KAAA,CAAdW,GAAA;YAER,IAAM2B,SAAA,GAAY1G,YAAA,CAAakE,KAAA,CAAME,KAAA,CAAMW,GAAG;YAE9C,IAAI,CAAC2B,SAAA,EAAW;YAChB,IAAI,CAACA,SAAA,CAAUC,UAAA,EAAY;YAE3B,IAAAC,qBAAA,GAA0BF,SAAA,CAAUC,UAAA;cAA5BE,KAAA,GAAAD,qBAAA,CAAAC,KAAA;cAAOC,MAAA,GAAAF,qBAAA,CAAAE,MAAA;YAEf,IAAMpB,MAAA,GAAS,IAAIrF,KAAA,CAAM6D,KAAA,CAAMyB,CAAA,EAAGzB,KAAA,CAAM0B,CAAC;YACzCF,MAAA,CAAOG,GAAA,CAAI,CAAC3B,KAAA,CAAM4B,QAAQ;YAC1BJ,MAAA,CAAOK,GAAA,CAAI,IAAI1F,KAAA,CAAM6D,KAAA,CAAME,KAAA,CAAMI,CAAA,GAAI,IAAIqC,KAAA,GAAQ,GAAG3C,KAAA,CAAME,KAAA,CAAM4B,CAAA,GAAI,IAAIc,MAAA,GAAS,CAAC,CAAC;YACnFpB,MAAA,CAAOG,GAAA,CAAI3B,KAAA,CAAM4B,QAAQ;YAEzB,IAAMiB,aAAA,GAA8C;cACnDpF,EAAA,EAAI5B,aAAA,CAAc;cAClBuE,IAAA,EAAM;cACNqB,CAAA,EAAGD,MAAA,CAAOC,CAAA;cACVC,CAAA,EAAGF,MAAA,CAAOE,CAAA;cACVE,QAAA,EAAU5B,KAAA,CAAM4B,QAAA;cAChB1B,KAAA,EAAO;gBACNW,GAAA,EAAAA,GAAA;gBACAP,CAAA,EAAGqC,KAAA;gBACHb,CAAA,EAAGc;cACJ;YACD;YAEA7B,UAAA,CAAWgB,IAAA,CAAKc,aAAa;YAC7B7B,UAAA,CAAWe,IAAA,CAAK/B,KAAA,CAAMvC,EAAE;UACzB;QAAA,SAAAwE,GAAA;UAAAK,UAAA,CAAAJ,CAAA,CAAAD,GAAA;QAAA;UAAAK,UAAA,CAAAH,CAAA;QAAA;QAEArE,MAAA,CAAOsB,IAAA,CAAK,yBAAyB;QACrCtB,MAAA,CAAOsE,YAAA,CAAapB,UAAU;QAC9BlD,MAAA,CAAOuE,YAAA,CAAatB,UAAU;MAC/B;IACD,GACA;MACCtD,EAAA,EAAI;MACJ6B,GAAA,EAAK;MACLP,KAAA,EAAO;MACPC,IAAA,EAAM;MACNC,UAAA,EAAY;MACZC,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAChB,IAAIrB,MAAA,CAAOgF,aAAA,KAAkB,UAAU;QACvClE,UAAA,CAAW,oBAAoB;UAAEO,MAAA,EAAAA;QAAO,CAAC;QACzC,IAAMoB,GAAA,GAAMzC,MAAA,CAAO8B,WAAA;QACnB,IAAMmD,YAAA,GAAe9G,KAAA,CAAM+G,MAAA,CAAO3G,OAAA,CAAQkE,GAAA,CAAIhD,GAAA,CAAI,UAACE,EAAA;UAAA,OAAOK,MAAA,CAAOmF,iBAAA,CAAkBxF,EAAE,CAAC;QAAA,EAAC,CAAC;QACxF,IAAMyF,MAAA,GAASpF,MAAA,CAAOqF,aAAA,GACnB;UACA1B,CAAA,EAAGsB,YAAA,CAAaJ,KAAA,GAAQ;UACxBjB,CAAA,EAAG;QACH,IACA;UACAD,CAAA,EAAG,KAAK3D,MAAA,CAAOsF,SAAA;UACf1B,CAAA,EAAG,KAAK5D,MAAA,CAAOsF;QACf;QACHtF,MAAA,CAAOsB,IAAA,CAAK,kBAAkB;QAC9BtB,MAAA,CAAOuF,eAAA,CAAgB9C,GAAA,EAAK2C,MAAM;MACnC;IACD,GACA;MACCzF,EAAA,EAAI;MACJsB,KAAA,EAAO;MACPO,GAAA,EAAK;MACLN,IAAA,EAAM;MACNC,UAAA,EAAY;MACZC,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAChBP,UAAA,CAAW,kBAAkB;UAAEO,MAAA,EAAAA;QAAO,CAAC;QACvCrB,MAAA,CAAOsB,IAAA,CAAK,SAAS;QACrBtB,MAAA,CAAOwF,aAAA,CAAcxF,MAAA,CAAO8B,WAAW;MACxC;IACD,GACA;MACCnC,EAAA,EAAI;MACJsB,KAAA,EAAO;MACPO,GAAA,EAAK;MACLN,IAAA,EAAM;MACNC,UAAA,EAAY;MACZC,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAChBP,UAAA,CAAW,gBAAgB;UAAEO,MAAA,EAAAA;QAAO,CAAC;QACrC,IAAQoE,iBAAA,GAAsBzF,MAAA,CAAtByF,iBAAA;QACR,IAAIA,iBAAA,IAAqBzF,MAAA,CAAOmC,aAAA,CAAcsD,iBAAA,EAAmB5H,cAAc,GAAG;UACjFmC,MAAA,CAAOsB,IAAA,CAAK,SAAS;UACrBtB,MAAA,CAAOwF,aAAA,CAAcxF,MAAA,CAAO8B,WAAW;QACxC,OAAO;UACN9B,MAAA,CAAOsB,IAAA,CAAK,OAAO;UACnBtB,MAAA,CAAO0F,WAAA,CAAY1F,MAAA,CAAO8B,WAAW;QACtC;MACD;IACD,GACA;MACCnC,EAAA,EAAI;MACJsB,KAAA,EAAO;MACPO,GAAA,EAAK;MACLN,IAAA,EAAM;MACNC,UAAA,EAAY;MACZC,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAChBP,UAAA,CAAW,gBAAgB;UAAE6E,SAAA,EAAW;UAAQtE,MAAA,EAAAA;QAAO,CAAC;QACxDrB,MAAA,CAAOsB,IAAA,CAAK,YAAY;QACxBtB,MAAA,CAAO4F,WAAA,CAAY,QAAQ5F,MAAA,CAAO8B,WAAW;MAC9C;IACD,GACA;MACCnC,EAAA,EAAI;MACJsB,KAAA,EAAO;MACPW,gBAAA,EAAkB;MAClBJ,GAAA,EAAK;MACLN,IAAA,EAAM;MACNC,UAAA,EAAY;MACZC,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAChBP,UAAA,CAAW,gBAAgB;UAAE6E,SAAA,EAAW;UAAqBtE,MAAA,EAAAA;QAAO,CAAC;QACrErB,MAAA,CAAOsB,IAAA,CAAK,yBAAyB;QACrCtB,MAAA,CAAO4F,WAAA,CAAY,qBAAqB5F,MAAA,CAAO8B,WAAW;MAC3D;IACD,GACA;MACCnC,EAAA,EAAI;MACJsB,KAAA,EAAO;MACPO,GAAA,EAAK;MACLN,IAAA,EAAM;MACNC,UAAA,EAAY;MACZC,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAChBP,UAAA,CAAW,gBAAgB;UAAE6E,SAAA,EAAW;UAAStE,MAAA,EAAAA;QAAO,CAAC;QACzDrB,MAAA,CAAOsB,IAAA,CAAK,aAAa;QACzBtB,MAAA,CAAO4F,WAAA,CAAY,SAAS5F,MAAA,CAAO8B,WAAW;MAC/C;IACD,GACA;MACCnC,EAAA,EAAI;MACJsB,KAAA,EAAO;MACPW,gBAAA,EAAkB;MAClBJ,GAAA,EAAK;MACLN,IAAA,EAAM;MACNC,UAAA,EAAY;MACZC,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAChBP,UAAA,CAAW,gBAAgB;UAAE6E,SAAA,EAAW;UAAmBtE,MAAA,EAAAA;QAAO,CAAC;QACnErB,MAAA,CAAOsB,IAAA,CAAK,uBAAuB;QACnCtB,MAAA,CAAO4F,WAAA,CAAY,mBAAmB5F,MAAA,CAAO8B,WAAW;MACzD;IACD,GACA;MACCnC,EAAA,EAAI;MACJsB,KAAA,EAAO;MACPC,IAAA,EAAM;MACNM,GAAA,EAAK;MACLL,UAAA,EAAY;MACZC,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAChBP,UAAA,CAAW,gBAAgB;UAAE6E,SAAA,EAAW;UAAOtE,MAAA,EAAAA;QAAO,CAAC;QACvDrB,MAAA,CAAOsB,IAAA,CAAK,WAAW;QACvBtB,MAAA,CAAO4F,WAAA,CAAY,OAAO5F,MAAA,CAAO8B,WAAW;MAC7C;IACD,GACA;MACCnC,EAAA,EAAI;MACJsB,KAAA,EAAO;MACPC,IAAA,EAAM;MACNM,GAAA,EAAK;MACLL,UAAA,EAAY;MACZC,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAChBP,UAAA,CAAW,gBAAgB;UAAE6E,SAAA,EAAW;UAAUtE,MAAA,EAAAA;QAAO,CAAC;QAC1DrB,MAAA,CAAOsB,IAAA,CAAK,cAAc;QAC1BtB,MAAA,CAAO4F,WAAA,CAAY,UAAU5F,MAAA,CAAO8B,WAAW;MAChD;IACD,GACA;MACCnC,EAAA,EAAI;MACJsB,KAAA,EAAO;MACPW,gBAAA,EAAkB;MAClBV,IAAA,EAAM;MACNM,GAAA,EAAK;MACLL,UAAA,EAAY;MACZC,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAChBP,UAAA,CAAW,qBAAqB;UAAE6E,SAAA,EAAW;UAActE,MAAA,EAAAA;QAAO,CAAC;QACnErB,MAAA,CAAOsB,IAAA,CAAK,uBAAuB;QACnCtB,MAAA,CAAO6F,gBAAA,CAAiB,cAAc7F,MAAA,CAAO8B,WAAW;MACzD;IACD,GACA;MACCnC,EAAA,EAAI;MACJsB,KAAA,EAAO;MACPW,gBAAA,EAAkB;MAClBV,IAAA,EAAM;MACNM,GAAA,EAAK;MACLL,UAAA,EAAY;MACZC,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAChBP,UAAA,CAAW,qBAAqB;UAAE6E,SAAA,EAAW;UAAYtE,MAAA,EAAAA;QAAO,CAAC;QACjErB,MAAA,CAAOsB,IAAA,CAAK,qBAAqB;QACjCtB,MAAA,CAAO6F,gBAAA,CAAiB,YAAY7F,MAAA,CAAO8B,WAAW;MACvD;IACD,GACA;MACCnC,EAAA,EAAI;MACJsB,KAAA,EAAO;MACPW,gBAAA,EAAkB;MAClBV,IAAA,EAAM;MACNC,UAAA,EAAY;MACZC,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAChBP,UAAA,CAAW,kBAAkB;UAAE6E,SAAA,EAAW;UAActE,MAAA,EAAAA;QAAO,CAAC;QAChErB,MAAA,CAAOsB,IAAA,CAAK,oBAAoB;QAChCtB,MAAA,CAAO8F,aAAA,CAAc,cAAc9F,MAAA,CAAO8B,WAAW;MACtD;IACD,GACA;MACCnC,EAAA,EAAI;MACJsB,KAAA,EAAO;MACPW,gBAAA,EAAkB;MAClBV,IAAA,EAAM;MACNC,UAAA,EAAY;MACZC,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAChBP,UAAA,CAAW,kBAAkB;UAAE6E,SAAA,EAAW;UAAYtE,MAAA,EAAAA;QAAO,CAAC;QAC9DrB,MAAA,CAAOsB,IAAA,CAAK,kBAAkB;QAC9BtB,MAAA,CAAO8F,aAAA,CAAc,YAAY9F,MAAA,CAAO8B,WAAW;MACpD;IACD,GACA;MACCnC,EAAA,EAAI;MACJsB,KAAA,EAAO;MACPW,gBAAA,EAAkB;MAClBJ,GAAA,EAAK;MACLL,UAAA,EAAY;MACZC,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAChBP,UAAA,CAAW,eAAe;UAAE6E,SAAA,EAAW;UAActE,MAAA,EAAAA;QAAO,CAAC;QAC7DrB,MAAA,CAAOsB,IAAA,CAAK,iBAAiB;QAC7BtB,MAAA,CAAO+F,UAAA,CAAW,cAAc/F,MAAA,CAAO8B,WAAW;MACnD;IACD,GACA;MACCnC,EAAA,EAAI;MACJsB,KAAA,EAAO;MACPW,gBAAA,EAAkB;MAClBJ,GAAA,EAAK;MACLL,UAAA,EAAY;MACZC,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAChBP,UAAA,CAAW,eAAe;UAAE6E,SAAA,EAAW;UAAYtE,MAAA,EAAAA;QAAO,CAAC;QAC3DrB,MAAA,CAAOsB,IAAA,CAAK,eAAe;QAC3BtB,MAAA,CAAO+F,UAAA,CAAW,YAAY/F,MAAA,CAAO8B,WAAW;MACjD;IACD,GACA;MACCnC,EAAA,EAAI;MACJsB,KAAA,EAAO;MACPC,IAAA,EAAM;MACNC,UAAA,EAAY;MACZC,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAChBP,UAAA,CAAW,eAAe;UAAEO,MAAA,EAAAA;QAAO,CAAC;QACpCrB,MAAA,CAAOsB,IAAA,CAAK,MAAM;QAClBtB,MAAA,CAAOgG,UAAA,CAAWhG,MAAA,CAAO8B,WAAW;MACrC;IACD,GACA;MACCnC,EAAA,EAAI;MACJsB,KAAA,EAAO;MACPW,gBAAA,EAAkB;MAClBV,IAAA,EAAM;MACNC,UAAA,EAAY;MACZC,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAChBP,UAAA,CAAW,gBAAgB;UAAE6E,SAAA,EAAW;UAAYtE,MAAA,EAAAA;QAAO,CAAC;QAC5DrB,MAAA,CAAOsB,IAAA,CAAK,gBAAgB;QAC5BtB,MAAA,CAAOiG,WAAA,CAAY,YAAYjG,MAAA,CAAO8B,WAAW;MAClD;IACD,GACA;MACCnC,EAAA,EAAI;MACJsB,KAAA,EAAO;MACPW,gBAAA,EAAkB;MAClBV,IAAA,EAAM;MACNC,UAAA,EAAY;MACZC,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAChBP,UAAA,CAAW,gBAAgB;UAAE6E,SAAA,EAAW;UAActE,MAAA,EAAAA;QAAO,CAAC;QAC9DrB,MAAA,CAAOsB,IAAA,CAAK,kBAAkB;QAC9BtB,MAAA,CAAOiG,WAAA,CAAY,cAAcjG,MAAA,CAAO8B,WAAW;MACpD;IACD,GACA;MACCnC,EAAA,EAAI;MACJsB,KAAA,EAAO;MACPO,GAAA,EAAK;MACLN,IAAA,EAAM;MACNC,UAAA,EAAY;MACZC,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAChBP,UAAA,CAAW,kBAAkB;UAAE6E,SAAA,EAAW;UAAWtE,MAAA,EAAAA;QAAO,CAAC;QAC7DrB,MAAA,CAAOsB,IAAA,CAAK,gBAAgB;QAC5BtB,MAAA,CAAOkG,YAAA,CAAa;MACrB;IACD,GACA;MACCvG,EAAA,EAAI;MACJsB,KAAA,EAAO;MACPC,IAAA,EAAM;MACNM,GAAA,EAAK;MACLL,UAAA,EAAY;MACZC,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAChBP,UAAA,CAAW,kBAAkB;UAAE6E,SAAA,EAAW;UAAWtE,MAAA,EAAAA;QAAO,CAAC;QAC7DrB,MAAA,CAAOsB,IAAA,CAAK,eAAe;QAC3BtB,MAAA,CAAOmG,YAAA,CAAa;MACrB;IACD,GACA;MACCxG,EAAA,EAAI;MACJsB,KAAA,EAAO;MACPC,IAAA,EAAM;MACNM,GAAA,EAAK;MACLL,UAAA,EAAY;MACZC,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAChBP,UAAA,CAAW,kBAAkB;UAAE6E,SAAA,EAAW;UAAYtE,MAAA,EAAAA;QAAO,CAAC;QAC9DrB,MAAA,CAAOsB,IAAA,CAAK,eAAe;QAC3BtB,MAAA,CAAOoG,YAAA,CAAa;MACrB;IACD,GACA;MACCzG,EAAA,EAAI;MACJsB,KAAA,EAAO;MACPC,IAAA,EAAM;MACNM,GAAA,EAAK;MACLL,UAAA,EAAY;MACZC,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAChBP,UAAA,CAAW,kBAAkB;UAAE6E,SAAA,EAAW;UAAUtE,MAAA,EAAAA;QAAO,CAAC;QAC5DrB,MAAA,CAAOsB,IAAA,CAAK,cAAc;QAC1BtB,MAAA,CAAOqG,UAAA,CAAW;MACnB;IACD,GACA;MACC1G,EAAA,EAAI;MACJsB,KAAA,EAAO;MACPO,GAAA,EAAK;MACLL,UAAA,EAAY;MACZC,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAChBrB,MAAA,CAAOsB,IAAA,CAAK,KAAK;QACjBb,GAAA,CAAIY,MAAM;MACX;IACD,GACA;MACC1B,EAAA,EAAI;MACJsB,KAAA,EAAO;MACPO,GAAA,EAAK;MACLL,UAAA,EAAY;MACZC,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAChBX,IAAA,CAAKW,MAAM;MACZ;IACD,GACA;MACC1B,EAAA,EAAI;MACJsB,KAAA,EAAO;MACPO,GAAA,EAAK;MACLL,UAAA,EAAY;MACZC,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAAA,IAAAiF,oBAAA;QAChB,CAAAA,oBAAA,GAAAC,SAAA,CAAUC,SAAA,cAAAF,oBAAA,eAAVA,oBAAA,CAAqBG,IAAA,CAAK,EAAEC,IAAA,CAAK,UAACC,cAAA,EAAmB;UACpDhG,KAAA,CACCgG,cAAA,EACAtF,MAAA,EACAA,MAAA,KAAW,iBAAiBrB,MAAA,CAAO4G,MAAA,CAAOC,gBAAA,GAAmB,MAC9D;QACD,CAAC;MACF;IACD,GACA;MACClH,EAAA,EAAI;MACJsB,KAAA,EAAO;MACPO,GAAA,EAAK;MACLL,UAAA,EAAY;MACZC,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAChBP,UAAA,CAAW,qBAAqB;UAAEO,MAAA,EAAAA;QAAO,CAAC;QAC1C,IAAIrB,MAAA,CAAOgF,aAAA,KAAkB,UAAU;UACtChF,MAAA,CAAO8G,MAAA,CAAO;UACd9G,MAAA,CAAO+G,eAAA,CAAgB,QAAQ;QAChC;QAEA/G,MAAA,CAAOsB,IAAA,CAAK,gBAAgB;QAC5BtB,MAAA,CAAOgH,SAAA,CAAU;MAClB;IACD,GACA;MACCrH,EAAA,EAAI;MACJsB,KAAA,EAAO;MACPE,UAAA,EAAY;MACZC,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAChBP,UAAA,CAAW,sBAAsB;UAAEO,MAAA,EAAAA;QAAO,CAAC;QAC3CrB,MAAA,CAAOsB,IAAA,CAAK,aAAa;QACzBtB,MAAA,CAAOiH,UAAA,CAAW;MACnB;IACD,GACA;MACCtH,EAAA,EAAI;MACJsB,KAAA,EAAO;MACPO,GAAA,EAAK;MACLN,IAAA,EAAM;MACNC,UAAA,EAAY;MACZC,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAChB,IAAIrB,MAAA,CAAOgF,aAAA,KAAkB,UAAU;QACvClE,UAAA,CAAW,iBAAiB;UAAEO,MAAA,EAAAA;QAAO,CAAC;QACtCrB,MAAA,CAAOsB,IAAA,CAAK,QAAQ;QACpBtB,MAAA,CAAOsE,YAAA,CAAa;MACrB;IACD,GACA;MACC3E,EAAA,EAAI;MACJsB,KAAA,EAAO;MACPC,IAAA,EAAM;MACNC,UAAA,EAAY;MACZC,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAChB,IAAIrB,MAAA,CAAO8B,WAAA,CAAYa,MAAA,KAAW,GAAG;QACrC7B,UAAA,CAAW,aAAa;UAAEO,MAAA,EAAAA;QAAO,CAAC;QAClCrB,MAAA,CAAOsB,IAAA,CAAK,WAAW;QACvB,IAAM8D,MAAA,GAASpF,MAAA,CAAOkH,iBAAA,IAAqB9I,GAAA,GAAM;QACjD,IAAM+I,aAAA,GAAgB7I,aAAA,CAAc8G,MAAA,EAAQ,CAAC,KAAK9G,aAAA,CAAc8G,MAAA,EAAQhH,GAAA,GAAM,CAAC;QAC/E4B,MAAA,CAAOoH,cAAA,CAAepH,MAAA,CAAO8B,WAAA,EAAa1D,GAAA,GAAM,KAAK+I,aAAA,GAAgB,IAAI/B,MAAA,CAAO;MACjF;IACD,GACA;MACCzF,EAAA,EAAI;MACJsB,KAAA,EAAO;MACPC,IAAA,EAAM;MACNC,UAAA,EAAY;MACZC,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAChB,IAAIrB,MAAA,CAAO8B,WAAA,CAAYa,MAAA,KAAW,GAAG;QACrC7B,UAAA,CAAW,cAAc;UAAEO,MAAA,EAAAA;QAAO,CAAC;QACnCrB,MAAA,CAAOsB,IAAA,CAAK,YAAY;QACxB,IAAM8D,MAAA,GAASpF,MAAA,CAAOkH,iBAAA,IAAqB9I,GAAA,GAAM;QACjD,IAAMiJ,iBAAA,GAAoB/I,aAAA,CAAc8G,MAAA,EAAQ,CAAC;QACjDpF,MAAA,CAAOoH,cAAA,CAAepH,MAAA,CAAO8B,WAAA,EAAauF,iBAAA,GAAoB,EAAEjJ,GAAA,GAAM,KAAK,CAACgH,MAAM;MACnF;IACD,GACA;MACCzF,EAAA,EAAI;MACJsB,KAAA,EAAO;MACPO,GAAA,EAAK;MACLL,UAAA,EAAY;MACZC,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAChBP,UAAA,CAAW,WAAW;UAAEO,MAAA,EAAAA;QAAO,CAAC;QAChCrB,MAAA,CAAOsH,MAAA,CAAOtH,MAAA,CAAOuH,oBAAA,EAAsB;UAAEC,QAAA,EAAU9J;QAAoB,CAAC;MAC7E;IACD,GACA;MACCiC,EAAA,EAAI;MACJsB,KAAA,EAAO;MACPO,GAAA,EAAK;MACLL,UAAA,EAAY;MACZC,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAChBP,UAAA,CAAW,YAAY;UAAEO,MAAA,EAAAA;QAAO,CAAC;QACjCrB,MAAA,CAAOyH,OAAA,CAAQzH,MAAA,CAAOuH,oBAAA,EAAsB;UAAEC,QAAA,EAAU9J;QAAoB,CAAC;MAC9E;IACD,GACA;MACCiC,EAAA,EAAI;MACJsB,KAAA,EAAO;MACPC,IAAA,EAAM;MACNM,GAAA,EAAK;MACLL,UAAA,EAAY;MACZC,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAChBP,UAAA,CAAW,cAAc;UAAEO,MAAA,EAAAA;QAAO,CAAC;QACnCrB,MAAA,CAAO0H,SAAA,CAAU1H,MAAA,CAAOuH,oBAAA,EAAsB;UAAEC,QAAA,EAAU9J;QAAoB,CAAC;MAChF;IACD,GACA;MACCiC,EAAA,EAAI;MACJsB,KAAA,EAAO;MACPO,GAAA,EAAK;MACLL,UAAA,EAAY;MACZC,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAChBP,UAAA,CAAW,eAAe;UAAEO,MAAA,EAAAA;QAAO,CAAC;QACpCrB,MAAA,CAAO2H,SAAA,CAAU;UAAEH,QAAA,EAAU9J;QAAoB,CAAC;MACnD;IACD,GACA;MACCiC,EAAA,EAAI;MACJsB,KAAA,EAAO;MACPO,GAAA,EAAK;MACLL,UAAA,EAAY;MACZC,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAChBP,UAAA,CAAW,qBAAqB;UAAEO,MAAA,EAAAA;QAAO,CAAC;QAC1CrB,MAAA,CAAO4H,eAAA,CAAgB;UAAEJ,QAAA,EAAU9J;QAAoB,CAAC;MACzD;IACD,GACA;MACCiC,EAAA,EAAI;MACJsB,KAAA,EAAO;MACPU,SAAA,EAAW;MACXR,UAAA,EAAY;MACZC,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAChBP,UAAA,CAAW,oBAAoB;UAAEO,MAAA,EAAAA;QAAO,CAAC;QACzCrB,MAAA,CAAO6H,WAAA,CAAY,CAAC7H,MAAA,CAAO8H,UAAU;MACtC;MACAC,QAAA,EAAU;IACX,GACA;MACCpI,EAAA,EAAI;MACJsB,KAAA,EAAO;MACPU,SAAA,EAAW;MACXH,GAAA,EAAK;MACLL,UAAA,EAAY;MACZC,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAChBP,UAAA,CAAW,oBAAoB;UAAEO,MAAA,EAAAA;QAAO,CAAC;QACzCrB,MAAA,CAAOgI,WAAA,CAAY,CAAChI,MAAA,CAAOiI,UAAU;MACtC;MACAF,QAAA,EAAU;IACX,GACA;MACCpI,EAAA,EAAI;MACJsB,KAAA,EAAO;MACPU,SAAA,EAAW;MACXR,UAAA,EAAY;MACZC,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAChBP,UAAA,CAAW,wBAAwB;UAAEO,MAAA,EAAAA;QAAO,CAAC;QAC7CrB,MAAA,CAAOkI,iBAAA,CAAkBlI,MAAA,CAAOmI,cAAA,KAAmB,IAAI,IAAI,CAAC;MAC7D;MACAJ,QAAA,EAAU;IACX,GACA;MACCpI,EAAA,EAAI;MACJsB,KAAA,EAAO;MACPU,SAAA,EAAW;MACXC,gBAAA,EAAkB;MAClBT,UAAA,EAAY;MACZC,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAChBP,UAAA,CAAW,sBAAsB;UAAEO,MAAA,EAAAA;QAAO,CAAC;QAC3CrB,MAAA,CAAOoI,mBAAA,CACN;UACCC,gBAAA,EAAkB,CAACrI,MAAA,CAAOsI,aAAA,CAAcD;QACzC,GACA,IACD;MACD;MACAN,QAAA,EAAU;IACX,GACA;MACCpI,EAAA,EAAI;MACJsB,KAAA,EAAO;MACPU,SAAA,EAAW;MACXR,UAAA,EAAY;MACZK,GAAA,EAAK;MACLJ,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAChBP,UAAA,CAAW,oBAAoB;UAAEO,MAAA,EAAAA;QAAO,CAAC;QACzCrB,MAAA,CAAOuI,aAAA,CAAc,CAACvI,MAAA,CAAOwI,YAAY;MAC1C;MACAT,QAAA,EAAU;IACX,GACA;MACCpI,EAAA,EAAI;MACJsB,KAAA,EAAO;MACPU,SAAA,EAAW;MACXR,UAAA,EAAY;MACZK,GAAA,EAAK;MACLuG,QAAA,EAAU;MACV3G,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAGhBoH,qBAAA,CAAsB,YAAM;UAC3BzI,MAAA,CAAO0I,KAAA,CAAM,YAAM;YAClB5H,UAAA,CAAW,qBAAqB;cAAEO,MAAA,EAAAA;YAAO,CAAC;YAC1ClB,YAAA,CAAa;YACbE,WAAA,CAAY;YACZL,MAAA,CAAO2I,YAAA,CAAa,CAAC3I,MAAA,CAAO4I,WAAW;UACxC,CAAC;QACF,CAAC;MACF;IACD,GACA;MACCjJ,EAAA,EAAI;MACJsB,KAAA,EAAO;MACPU,SAAA,EAAW;MACXR,UAAA,EAAY;MACZK,GAAA,EAAK;MACLJ,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAChBP,UAAA,CAAW,oBAAoB;UAAEO,MAAA,EAAAA;QAAO,CAAC;QACzCrB,MAAA,CAAO6I,WAAA,CAAY,CAAC7I,MAAA,CAAO8I,UAAU;MACtC;MACAf,QAAA,EAAU;IACX,GACA;MACCpI,EAAA,EAAI;MACJsB,KAAA,EAAO;MACPU,SAAA,EAAW;MACXR,UAAA,EAAY;MACZC,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAChBP,UAAA,CAAW,qBAAqB;UAAEO,MAAA,EAAAA;QAAO,CAAC;QAC1CrB,MAAA,CAAOoI,mBAAA,CACN;UACCW,WAAA,EAAa,CAAC/I,MAAA,CAAOsI,aAAA,CAAcS;QACpC,GACA,IACD;MACD;MACAhB,QAAA,EAAU;IACX,GACA;MACCpI,EAAA,EAAI;MACJsB,KAAA,EAAO;MACPO,GAAA,EAAK;MACLL,UAAA,EAAY;MACZC,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAChBP,UAAA,CAAW,SAAS;UAAEO,MAAA,EAAAA;QAAO,CAAC;QAC9Bd,qBAAA,CAAsB;MACvB;IACD,GACA;MACCZ,EAAA,EAAI;MACJsB,KAAA,EAAO;MACPC,IAAA,EAAM;MACNC,UAAA,EAAY;MACZC,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAChBP,UAAA,CAAW,iBAAiB;UAAEO,MAAA,EAAAA;QAAO,CAAC;QACtCrB,MAAA,CAAOgJ,UAAA,CAAW,KAAK;MACxB;IACD,GACA;MACCrJ,EAAA,EAAI;MACJsB,KAAA,EAAO;MACPC,IAAA,EAAM;MACNC,UAAA,EAAY;MACZC,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAChBP,UAAA,CAAW,kBAAkB;UAAEO,MAAA,EAAAA;QAAO,CAAC;QACvCrB,MAAA,CAAOiJ,iBAAA,CAAkB;MAC1B;IACD,GACA;MACCtJ,EAAA,EAAI;MACJsB,KAAA,EAAO;MACPC,IAAA,EAAM;MACNC,UAAA,EAAY;MACZC,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAChBP,UAAA,CAAW,mBAAmB;UAAEO,MAAA,EAAAA;QAAO,CAAC;QACxCrB,MAAA,CAAOkJ,aAAA,CAAc;MACtB;IACD,GACA;MACCvJ,EAAA,EAAI;MACJsB,KAAA,EAAO;MACPE,UAAA,EAAY;MACZK,GAAA,EAAK;MACLJ,QAAA,WAAAA,SAASC,MAAA,EAAQ;QAChBP,UAAA,CAAW,eAAe;UAAEO,MAAA,EAAAA;QAAO,CAAC;QACpCrB,MAAA,CAAOmJ,UAAA,CAAW;MACnB;IACD,EACA;IAED,IAAIrJ,SAAA,EAAW;MACd,OAAOA,SAAA,CAAUE,MAAA,EAAQgB,QAAA,EAAS,MAAS;IAC5C;IAEA,OAAOA,QAAA;EACR,GAAG,CACFF,UAAA,EACAhB,SAAA,EACAE,MAAA,EACAE,SAAA,EACAI,WAAA,EACAO,QAAA,EACAD,MAAA,EACAH,GAAA,EACAC,IAAA,EACAC,KAAA,EACAR,YAAA,EACAE,WAAA,EACAE,qBAAA,CACA;EAED,OAAO,eAAA9C,GAAA,CAAC0B,cAAA,CAAeiK,QAAA,EAAf;IAAwB3F,KAAA,EAAO4F,SAAA,CAAU/J,OAAO;IAAIS,QAAA,EAAAA;EAAA,CAAS;AACtE;AAGO,SAASuJ,WAAA,EAAa;EAC5B,IAAMC,GAAA,GAAM/K,KAAA,CAAMgL,UAAA,CAAWrK,cAAc;EAE3C,IAAI,CAACoK,GAAA,EAAK;IACT,MAAM,IAAIE,KAAA,CAAM,6CAA6C;EAC9D;EAEA,OAAOF,GAAA;AACR;AAEA,SAASF,UAAoD/J,OAAA,EAAY;EACxE,OAAOA,OAAA;AACR"},"metadata":{},"sourceType":"module","externalDependencies":[]}