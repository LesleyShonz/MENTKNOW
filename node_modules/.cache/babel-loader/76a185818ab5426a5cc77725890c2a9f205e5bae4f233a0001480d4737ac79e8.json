{"ast":null,"code":"import _defineProperty from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _slicedToArray from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nvar _migrators;\nimport { defineMigrations } from \"@tldraw/store\";\nvar Versions = {\n  RemoveCodeAndIconShapeTypes: 1,\n  AddInstancePresenceType: 2,\n  RemoveTLUserAndPresenceAndAddPointer: 3,\n  RemoveUserDocument: 4\n};\nvar storeMigrations = defineMigrations({\n  currentVersion: Versions.RemoveUserDocument,\n  migrators: (_migrators = {}, _defineProperty(_migrators, Versions.RemoveCodeAndIconShapeTypes, {\n    up: function up(store) {\n      return Object.fromEntries(Object.entries(store).filter(function (_ref) {\n        var _ref2 = _slicedToArray(_ref, 2),\n          _ = _ref2[0],\n          v = _ref2[1];\n        return v.typeName !== \"shape\" || v.type !== \"icon\" && v.type !== \"code\";\n      }));\n    },\n    down: function down(store) {\n      return store;\n    }\n  }), _defineProperty(_migrators, Versions.AddInstancePresenceType, {\n    up: function up(store) {\n      return store;\n    },\n    down: function down(store) {\n      return Object.fromEntries(Object.entries(store).filter(function (_ref3) {\n        var _ref4 = _slicedToArray(_ref3, 2),\n          _ = _ref4[0],\n          v = _ref4[1];\n        return v.typeName !== \"instance_presence\";\n      }));\n    }\n  }), _defineProperty(_migrators, Versions.RemoveTLUserAndPresenceAndAddPointer, {\n    up: function up(store) {\n      return Object.fromEntries(Object.entries(store).filter(function (_ref5) {\n        var _ref6 = _slicedToArray(_ref5, 2),\n          _ = _ref6[0],\n          v = _ref6[1];\n        return !v.typeName.match(/^(user|user_presence)$/);\n      }));\n    },\n    down: function down(store) {\n      return Object.fromEntries(Object.entries(store).filter(function (_ref7) {\n        var _ref8 = _slicedToArray(_ref7, 2),\n          _ = _ref8[0],\n          v = _ref8[1];\n        return v.typeName !== \"pointer\";\n      }));\n    }\n  }), _defineProperty(_migrators, Versions.RemoveUserDocument, {\n    up: function up(store) {\n      return Object.fromEntries(Object.entries(store).filter(function (_ref9) {\n        var _ref10 = _slicedToArray(_ref9, 2),\n          _ = _ref10[0],\n          v = _ref10[1];\n        return !v.typeName.match(\"user_document\");\n      }));\n    },\n    down: function down(store) {\n      return store;\n    }\n  }), _migrators)\n});\nexport { storeMigrations, Versions as storeVersions };","map":{"version":3,"names":["defineMigrations","Versions","RemoveCodeAndIconShapeTypes","AddInstancePresenceType","RemoveTLUserAndPresenceAndAddPointer","RemoveUserDocument","storeMigrations","currentVersion","migrators","_migrators","_defineProperty","up","store","Object","fromEntries","entries","filter","_ref","_ref2","_slicedToArray","_","v","typeName","type","down","_ref3","_ref4","_ref5","_ref6","match","_ref7","_ref8","_ref9","_ref10"],"sources":["/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@tldraw/tlschema/src/store-migrations.ts"],"sourcesContent":["import { defineMigrations, StoreSnapshot } from '@tldraw/store'\nimport { TLRecord } from './records/TLRecord'\n\nconst Versions = {\n\tRemoveCodeAndIconShapeTypes: 1,\n\tAddInstancePresenceType: 2,\n\tRemoveTLUserAndPresenceAndAddPointer: 3,\n\tRemoveUserDocument: 4,\n} as const\n\nexport { Versions as storeVersions }\n\n/** @public */\nexport const storeMigrations = defineMigrations({\n\tcurrentVersion: Versions.RemoveUserDocument,\n\tmigrators: {\n\t\t[Versions.RemoveCodeAndIconShapeTypes]: {\n\t\t\tup: (store: StoreSnapshot<TLRecord>) => {\n\t\t\t\treturn Object.fromEntries(\n\t\t\t\t\tObject.entries(store).filter(\n\t\t\t\t\t\t([_, v]) => v.typeName !== 'shape' || (v.type !== 'icon' && v.type !== 'code')\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t},\n\t\t\tdown: (store: StoreSnapshot<TLRecord>) => {\n\t\t\t\t// noop\n\t\t\t\treturn store\n\t\t\t},\n\t\t},\n\t\t[Versions.AddInstancePresenceType]: {\n\t\t\tup: (store: StoreSnapshot<TLRecord>) => {\n\t\t\t\treturn store\n\t\t\t},\n\t\t\tdown: (store: StoreSnapshot<TLRecord>) => {\n\t\t\t\treturn Object.fromEntries(\n\t\t\t\t\tObject.entries(store).filter(([_, v]) => v.typeName !== 'instance_presence')\n\t\t\t\t)\n\t\t\t},\n\t\t},\n\t\t[Versions.RemoveTLUserAndPresenceAndAddPointer]: {\n\t\t\tup: (store: StoreSnapshot<TLRecord>) => {\n\t\t\t\treturn Object.fromEntries(\n\t\t\t\t\tObject.entries(store).filter(([_, v]) => !v.typeName.match(/^(user|user_presence)$/))\n\t\t\t\t)\n\t\t\t},\n\t\t\tdown: (store: StoreSnapshot<TLRecord>) => {\n\t\t\t\treturn Object.fromEntries(\n\t\t\t\t\tObject.entries(store).filter(([_, v]) => v.typeName !== 'pointer')\n\t\t\t\t)\n\t\t\t},\n\t\t},\n\t\t[Versions.RemoveUserDocument]: {\n\t\t\tup: (store: StoreSnapshot<TLRecord>) => {\n\t\t\t\treturn Object.fromEntries(\n\t\t\t\t\tObject.entries(store).filter(([_, v]) => !v.typeName.match('user_document'))\n\t\t\t\t)\n\t\t\t},\n\t\t\tdown: (store: StoreSnapshot<TLRecord>) => {\n\t\t\t\treturn store\n\t\t\t},\n\t\t},\n\t},\n})\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}