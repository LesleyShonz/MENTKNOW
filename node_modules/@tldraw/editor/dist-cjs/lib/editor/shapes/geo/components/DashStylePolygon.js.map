{
  "version": 3,
  "sources": ["../../../../../../src/lib/editor/shapes/geo/components/DashStylePolygon.tsx"],
  "sourcesContent": ["import { Vec2d, VecLike } from '@tldraw/primitives'\nimport { TLGeoShape } from '@tldraw/tlschema'\nimport * as React from 'react'\nimport { ShapeFill, getShapeFillSvg, getSvgWithShapeFill } from '../../shared/ShapeFill'\nimport { TLExportColors } from '../../shared/TLExportColors'\nimport { getPerfectDashProps } from '../../shared/getPerfectDashProps'\n\nexport const DashStylePolygon = React.memo(function DashStylePolygon({\n\tdash,\n\tfill,\n\tcolor,\n\tstrokeWidth,\n\toutline,\n\tlines,\n}: Pick<TLGeoShape['props'], 'dash' | 'fill' | 'color'> & {\n\tstrokeWidth: number\n\toutline: VecLike[]\n\tlines?: VecLike[][]\n}) {\n\tconst innerPath = 'M' + outline[0] + 'L' + outline.slice(1) + 'Z'\n\n\treturn (\n\t\t<>\n\t\t\t<ShapeFill d={innerPath} fill={fill} color={color} />\n\t\t\t{lines &&\n\t\t\t\tlines.map((l, i) => (\n\t\t\t\t\t<path\n\t\t\t\t\t\tkey={`line_bg_${i}`}\n\t\t\t\t\t\tclassName={'tl-hitarea-stroke'}\n\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\td={`M${l[0].x},${l[0].y}L${l[1].x},${l[1].y}`}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t<g\n\t\t\t\tstrokeWidth={strokeWidth}\n\t\t\t\tstroke={`var(--palette-${color})`}\n\t\t\t\tfill=\"none\"\n\t\t\t\tpointerEvents=\"all\"\n\t\t\t>\n\t\t\t\t{Array.from(Array(outline.length)).map((_, i) => {\n\t\t\t\t\tconst A = outline[i]\n\t\t\t\t\tconst B = outline[(i + 1) % outline.length]\n\n\t\t\t\t\tconst dist = Vec2d.Dist(A, B)\n\n\t\t\t\t\tconst { strokeDasharray, strokeDashoffset } = getPerfectDashProps(dist, strokeWidth, {\n\t\t\t\t\t\tstyle: dash,\n\t\t\t\t\t\tstart: 'outset',\n\t\t\t\t\t\tend: 'outset',\n\t\t\t\t\t})\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<line\n\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\tx1={A.x}\n\t\t\t\t\t\t\ty1={A.y}\n\t\t\t\t\t\t\tx2={B.x}\n\t\t\t\t\t\t\ty2={B.y}\n\t\t\t\t\t\t\tstrokeDasharray={strokeDasharray}\n\t\t\t\t\t\t\tstrokeDashoffset={strokeDashoffset}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)\n\t\t\t\t})}\n\t\t\t\t{lines &&\n\t\t\t\t\tlines.map(([A, B], i) => {\n\t\t\t\t\t\tconst dist = Vec2d.Dist(A, B)\n\n\t\t\t\t\t\tconst { strokeDasharray, strokeDashoffset } = getPerfectDashProps(dist, strokeWidth, {\n\t\t\t\t\t\t\tstyle: dash,\n\t\t\t\t\t\t\tstart: 'skip',\n\t\t\t\t\t\t\tend: 'outset',\n\t\t\t\t\t\t\tsnap: dash === 'dotted' ? 4 : undefined,\n\t\t\t\t\t\t})\n\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\tkey={`line_fg_${i}`}\n\t\t\t\t\t\t\t\td={`M${A.x},${A.y}L${B.x},${B.y}`}\n\t\t\t\t\t\t\t\tstroke={`var(--palette-${color})`}\n\t\t\t\t\t\t\t\tstrokeWidth={strokeWidth}\n\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\tstrokeDasharray={strokeDasharray}\n\t\t\t\t\t\t\t\tstrokeDashoffset={strokeDashoffset}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)\n\t\t\t\t\t})}\n\t\t\t</g>\n\t\t</>\n\t)\n})\n\nexport function DashStylePolygonSvg({\n\tdash,\n\tfill,\n\tcolor,\n\tcolors,\n\tstrokeWidth,\n\toutline,\n\tlines,\n}: Pick<TLGeoShape['props'], 'dash' | 'fill' | 'color'> & {\n\toutline: VecLike[]\n\tstrokeWidth: number\n\tcolors: TLExportColors\n\tlines?: VecLike[][]\n}) {\n\tconst strokeElement = document.createElementNS('http://www.w3.org/2000/svg', 'g')\n\tstrokeElement.setAttribute('stroke-width', strokeWidth.toString())\n\tstrokeElement.setAttribute('stroke', colors.fill[color])\n\tstrokeElement.setAttribute('fill', 'none')\n\n\tArray.from(Array(outline.length)).forEach((_, i) => {\n\t\tconst A = outline[i]\n\t\tconst B = outline[(i + 1) % outline.length]\n\n\t\tconst dist = Vec2d.Dist(A, B)\n\t\tconst { strokeDasharray, strokeDashoffset } = getPerfectDashProps(dist, strokeWidth, {\n\t\t\tstyle: dash,\n\t\t})\n\n\t\tconst line = document.createElementNS('http://www.w3.org/2000/svg', 'line')\n\t\tline.setAttribute('x1', A.x.toString())\n\t\tline.setAttribute('y1', A.y.toString())\n\t\tline.setAttribute('x2', B.x.toString())\n\t\tline.setAttribute('y2', B.y.toString())\n\t\tline.setAttribute('stroke-dasharray', strokeDasharray.toString())\n\t\tline.setAttribute('stroke-dashoffset', strokeDashoffset.toString())\n\n\t\tstrokeElement.appendChild(line)\n\t})\n\n\tif (lines) {\n\t\tfor (const [A, B] of lines) {\n\t\t\tconst dist = Vec2d.Dist(A, B)\n\t\t\tconst { strokeDasharray, strokeDashoffset } = getPerfectDashProps(dist, strokeWidth, {\n\t\t\t\tstyle: dash,\n\t\t\t\tstart: 'skip',\n\t\t\t\tend: 'skip',\n\t\t\t\tsnap: dash === 'dotted' ? 4 : 2,\n\t\t\t})\n\n\t\t\tconst line = document.createElementNS('http://www.w3.org/2000/svg', 'line')\n\t\t\tline.setAttribute('x1', A.x.toString())\n\t\t\tline.setAttribute('y1', A.y.toString())\n\t\t\tline.setAttribute('x2', B.x.toString())\n\t\t\tline.setAttribute('y2', B.y.toString())\n\t\t\tline.setAttribute('stroke-dasharray', strokeDasharray.toString())\n\t\t\tline.setAttribute('stroke-dashoffset', strokeDashoffset.toString())\n\n\t\t\tstrokeElement.appendChild(line)\n\t\t}\n\t}\n\n\t// Get the fill element, if any\n\tconst fillElement = getShapeFillSvg({\n\t\td: 'M' + outline[0] + 'L' + outline.slice(1) + 'Z',\n\t\tfill,\n\t\tcolor,\n\t\tcolors,\n\t})\n\n\treturn getSvgWithShapeFill(strokeElement, fillElement)\n}\n"],
  "mappings": "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",
  "names": ["DashStylePolygon"]
}
