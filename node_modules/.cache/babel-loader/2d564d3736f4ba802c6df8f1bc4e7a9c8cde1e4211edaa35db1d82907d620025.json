{"ast":null,"code":"import _objectSpread from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _classCallCheck from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _assertThisInitialized from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _inherits from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport _defineProperty from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport { StateNode } from \"../../StateNode.mjs\";\nimport { CursorTypeMap } from \"./PointingResizeHandle.mjs\";\nvar PointingCropHandle = /*#__PURE__*/function (_StateNode) {\n  _inherits(PointingCropHandle, _StateNode);\n  var _super = _createSuper(PointingCropHandle);\n  function PointingCropHandle() {\n    var _this;\n    _classCallCheck(this, PointingCropHandle);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _super.call.apply(_super, [this].concat(args));\n    _defineProperty(_assertThisInitialized(_this), \"info\", {});\n    _defineProperty(_assertThisInitialized(_this), \"onEnter\", function (info) {\n      _this.info = info;\n      var selectedShape = _this.editor.selectedShapes[0];\n      if (!selectedShape) return;\n      _this.updateCursor(selectedShape);\n      _this.editor.setCroppingId(selectedShape.id);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onPointerMove\", function () {\n      var isDragging = _this.editor.inputs.isDragging;\n      if (isDragging) {\n        _this.parent.transition(\"cropping\", _objectSpread(_objectSpread({}, _this.info), {}, {\n          onInteractionEnd: _this.info.onInteractionEnd\n        }));\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onPointerUp\", function () {\n      if (_this.info.onInteractionEnd) {\n        _this.editor.setSelectedTool(_this.info.onInteractionEnd, _this.info);\n      } else {\n        _this.editor.setCroppingId(null);\n        _this.parent.transition(\"idle\", {});\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onCancel\", function () {\n      _this.cancel();\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onComplete\", function () {\n      _this.cancel();\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onInterrupt\", function () {\n      _this.cancel();\n    });\n    return _this;\n  }\n  _createClass(PointingCropHandle, [{\n    key: \"updateCursor\",\n    value: function updateCursor(shape) {\n      var cursorType = CursorTypeMap[this.info.handle];\n      this.editor.setCursor({\n        type: cursorType,\n        rotation: shape.rotation\n      });\n    }\n  }, {\n    key: \"cancel\",\n    value: function cancel() {\n      if (this.info.onInteractionEnd) {\n        this.editor.setSelectedTool(this.info.onInteractionEnd, this.info);\n      } else {\n        this.editor.setCroppingId(null);\n        this.parent.transition(\"idle\", {});\n      }\n    }\n  }]);\n  return PointingCropHandle;\n}(StateNode);\n_defineProperty(PointingCropHandle, \"id\", \"pointing_crop_handle\");\nexport { PointingCropHandle };","map":{"version":3,"names":["StateNode","CursorTypeMap","PointingCropHandle","_StateNode","_inherits","_super","_createSuper","_this","_classCallCheck","_len","arguments","length","args","Array","_key","call","apply","concat","_defineProperty","_assertThisInitialized","info","selectedShape","editor","selectedShapes","updateCursor","setCroppingId","id","isDragging","inputs","parent","transition","_objectSpread","onInteractionEnd","setSelectedTool","cancel","_createClass","key","value","shape","cursorType","handle","setCursor","type","rotation"],"sources":["/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@tldraw/editor/src/lib/editor/tools/SelectTool/children/PointingCropHandle.ts"],"sourcesContent":["import { TLShape } from '@tldraw/tlschema'\nimport { TLEventHandlers, TLPointerEventInfo } from '../../../types/event-types'\nimport { StateNode } from '../../StateNode'\nimport { CursorTypeMap } from './PointingResizeHandle'\n\ntype TLPointingCropHandleInfo = Extract<\n\tTLPointerEventInfo,\n\t{\n\t\ttarget: 'selection'\n\t}\n> & {\n\tonInteractionEnd?: string\n}\n\nexport class PointingCropHandle extends StateNode {\n\tstatic override id = 'pointing_crop_handle'\n\n\tprivate info = {} as TLPointingCropHandleInfo\n\n\tprivate updateCursor(shape: TLShape) {\n\t\tconst cursorType = CursorTypeMap[this.info.handle!]\n\t\tthis.editor.setCursor({\n\t\t\ttype: cursorType,\n\t\t\trotation: shape.rotation,\n\t\t})\n\t}\n\n\toverride onEnter = (info: TLPointingCropHandleInfo) => {\n\t\tthis.info = info\n\t\tconst selectedShape = this.editor.selectedShapes[0]\n\t\tif (!selectedShape) return\n\n\t\tthis.updateCursor(selectedShape)\n\t\tthis.editor.setCroppingId(selectedShape.id)\n\t}\n\n\toverride onPointerMove: TLEventHandlers['onPointerMove'] = () => {\n\t\tconst isDragging = this.editor.inputs.isDragging\n\n\t\tif (isDragging) {\n\t\t\tthis.parent.transition('cropping', {\n\t\t\t\t...this.info,\n\t\t\t\tonInteractionEnd: this.info.onInteractionEnd,\n\t\t\t})\n\t\t}\n\t}\n\n\toverride onPointerUp: TLEventHandlers['onPointerUp'] = () => {\n\t\tif (this.info.onInteractionEnd) {\n\t\t\tthis.editor.setSelectedTool(this.info.onInteractionEnd, this.info)\n\t\t} else {\n\t\t\tthis.editor.setCroppingId(null)\n\t\t\tthis.parent.transition('idle', {})\n\t\t}\n\t}\n\n\toverride onCancel: TLEventHandlers['onCancel'] = () => {\n\t\tthis.cancel()\n\t}\n\n\toverride onComplete: TLEventHandlers['onComplete'] = () => {\n\t\tthis.cancel()\n\t}\n\n\toverride onInterrupt = () => {\n\t\tthis.cancel()\n\t}\n\n\tprivate cancel() {\n\t\tif (this.info.onInteractionEnd) {\n\t\t\tthis.editor.setSelectedTool(this.info.onInteractionEnd, this.info)\n\t\t} else {\n\t\t\tthis.editor.setCroppingId(null)\n\t\t\tthis.parent.transition('idle', {})\n\t\t}\n\t}\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}