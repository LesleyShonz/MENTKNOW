{"ast":null,"code":"import { Fragment, jsx, jsxs } from \"react/jsx-runtime\";\nimport { useEditor } from \"@tldraw/editor\";\nimport * as React from \"react\";\nimport { useBreakpoint } from \"../hooks/useBreakpoint.mjs\";\nimport { useMenuSchema } from \"../hooks/useMenuSchema.mjs\";\nimport { useReadonly } from \"../hooks/useReadonly.mjs\";\nimport { useTranslation } from \"../hooks/useTranslation/useTranslation.mjs\";\nimport { LanguageMenu } from \"./LanguageMenu.mjs\";\nimport { Button } from \"./primitives/Button.mjs\";\nimport * as M from \"./primitives/DropdownMenu.mjs\";\nimport { Kbd } from \"./primitives/Kbd.mjs\";\nvar Menu = React.memo(function Menu2() {\n  var msg = useTranslation();\n  return /* @__PURE__ */jsxs(M.Root, {\n    id: \"main menu\",\n    children: [/* @__PURE__ */jsx(M.Trigger, {\n      children: /* @__PURE__ */jsx(Button, {\n        className: \"tlui-menu__trigger\",\n        \"data-testid\": \"main.menu\",\n        title: msg(\"menu.title\"),\n        icon: \"menu\"\n      })\n    }), /* @__PURE__ */jsx(M.Content, {\n      alignOffset: 0,\n      sideOffset: 6,\n      children: /* @__PURE__ */jsx(MenuContent, {})\n    })]\n  });\n});\nfunction MenuContent() {\n  var editor = useEditor();\n  var msg = useTranslation();\n  var menuSchema = useMenuSchema();\n  var breakpoint = useBreakpoint();\n  var isReadonly = useReadonly();\n  function getMenuItem(editor2, item, parent, depth) {\n    switch (item.type) {\n      case \"custom\":\n        {\n          if (isReadonly && !item.readonlyOk) return null;\n          if (item.id === \"LANGUAGE_MENU\") {\n            return /* @__PURE__ */jsx(LanguageMenu, {}, \"item\");\n          }\n          return null;\n        }\n      case \"group\":\n        {\n          if (isReadonly && !item.readonlyOk) return null;\n          return /* @__PURE__ */jsx(M.Group, {\n            size: depth <= 1 ? \"medium\" : breakpoint < 3 || (parent === null || parent === void 0 ? void 0 : parent.type) === \"submenu\" && depth > 2 ? \"tiny\" : \"medium\",\n            children: item.children.map(function (child) {\n              return getMenuItem(editor2, child, item, depth + 1);\n            })\n          }, item.id);\n        }\n      case \"submenu\":\n        {\n          if (isReadonly && !item.readonlyOk) return null;\n          return /* @__PURE__ */jsxs(M.Sub, {\n            id: \"main menu \".concat(parent ? parent.id + \" \" : \"\").concat(item.id),\n            children: [/* @__PURE__ */jsx(M.SubTrigger, {\n              label: item.label,\n              \"data-testid\": \"menu-item.\".concat(item.id)\n            }), /* @__PURE__ */jsx(M.SubContent, {\n              sideOffset: -4,\n              alignOffset: -1,\n              children: item.children.map(function (child) {\n                return getMenuItem(editor2, child, item, depth + 1);\n              })\n            })]\n          }, item.id);\n        }\n      case \"item\":\n        {\n          if (isReadonly && !item.readonlyOk) return null;\n          var _item$actionItem = item.actionItem,\n            id = _item$actionItem.id,\n            checkbox = _item$actionItem.checkbox,\n            menuLabel = _item$actionItem.menuLabel,\n            label = _item$actionItem.label,\n            _onSelect = _item$actionItem.onSelect,\n            kbd = _item$actionItem.kbd;\n          var labelToUse = menuLabel !== null && menuLabel !== void 0 ? menuLabel : label;\n          var labelStr = labelToUse ? msg(labelToUse) : void 0;\n          if (checkbox) {\n            return /* @__PURE__ */jsxs(M.CheckboxItem, {\n              onSelect: function onSelect() {\n                return _onSelect(\"menu\");\n              },\n              title: labelStr ? labelStr : \"\",\n              checked: item.checked,\n              disabled: item.disabled,\n              children: [labelStr && /* @__PURE__ */jsx(\"span\", {\n                children: labelStr\n              }), kbd && /* @__PURE__ */jsx(Kbd, {\n                children: kbd\n              })]\n            }, id);\n          }\n          return /* @__PURE__ */jsx(M.Item, {\n            \"data-testid\": \"menu-item.\".concat(item.id),\n            kbd: kbd,\n            label: labelToUse,\n            onClick: function onClick() {\n              return _onSelect(\"menu\");\n            },\n            disabled: item.disabled\n          }, id);\n        }\n    }\n  }\n  return /* @__PURE__ */jsx(Fragment, {\n    children: menuSchema.map(function (item) {\n      return getMenuItem(editor, item, null, 0);\n    })\n  });\n}\nexport { Menu };","map":{"version":3,"names":["Fragment","jsx","jsxs","useEditor","React","useBreakpoint","useMenuSchema","useReadonly","useTranslation","LanguageMenu","Button","M","Kbd","Menu","memo","Menu2","msg","Root","id","children","Trigger","className","title","icon","Content","alignOffset","sideOffset","MenuContent","editor","menuSchema","breakpoint","isReadonly","getMenuItem","editor2","item","parent","depth","type","readonlyOk","Group","size","map","child","Sub","concat","SubTrigger","label","SubContent","_item$actionItem","actionItem","checkbox","menuLabel","onSelect","kbd","labelToUse","labelStr","CheckboxItem","checked","disabled","Item","onClick"],"sources":["/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@tldraw/ui/src/lib/components/Menu.tsx"],"sourcesContent":["import { Editor, useEditor } from '@tldraw/editor'\nimport * as React from 'react'\nimport { TLUiMenuChild } from '../hooks/menuHelpers'\nimport { useBreakpoint } from '../hooks/useBreakpoint'\nimport { useMenuSchema } from '../hooks/useMenuSchema'\nimport { useReadonly } from '../hooks/useReadonly'\nimport { useTranslation } from '../hooks/useTranslation/useTranslation'\nimport { LanguageMenu } from './LanguageMenu'\nimport { Button } from './primitives/Button'\nimport * as M from './primitives/DropdownMenu'\nimport { Kbd } from './primitives/Kbd'\n\nexport const Menu = React.memo(function Menu() {\n\tconst msg = useTranslation()\n\n\treturn (\n\t\t<M.Root id=\"main menu\">\n\t\t\t<M.Trigger>\n\t\t\t\t<Button\n\t\t\t\t\tclassName=\"tlui-menu__trigger\"\n\t\t\t\t\tdata-testid=\"main.menu\"\n\t\t\t\t\ttitle={msg('menu.title')}\n\t\t\t\t\ticon=\"menu\"\n\t\t\t\t/>\n\t\t\t</M.Trigger>\n\t\t\t<M.Content alignOffset={0} sideOffset={6}>\n\t\t\t\t<MenuContent />\n\t\t\t</M.Content>\n\t\t</M.Root>\n\t)\n})\n\nfunction MenuContent() {\n\tconst editor = useEditor()\n\tconst msg = useTranslation()\n\tconst menuSchema = useMenuSchema()\n\tconst breakpoint = useBreakpoint()\n\tconst isReadonly = useReadonly()\n\n\tfunction getMenuItem(\n\t\teditor: Editor,\n\t\titem: TLUiMenuChild,\n\t\tparent: TLUiMenuChild | null,\n\t\tdepth: number\n\t) {\n\t\tswitch (item.type) {\n\t\t\tcase 'custom': {\n\t\t\t\tif (isReadonly && !item.readonlyOk) return null\n\n\t\t\t\tif (item.id === 'LANGUAGE_MENU') {\n\t\t\t\t\treturn <LanguageMenu key=\"item\" />\n\t\t\t\t}\n\n\t\t\t\treturn null\n\t\t\t}\n\t\t\tcase 'group': {\n\t\t\t\tif (isReadonly && !item.readonlyOk) return null\n\n\t\t\t\treturn (\n\t\t\t\t\t<M.Group\n\t\t\t\t\t\tsize={\n\t\t\t\t\t\t\tdepth <= 1\n\t\t\t\t\t\t\t\t? 'medium'\n\t\t\t\t\t\t\t\t: breakpoint < 3 || (parent?.type === 'submenu' && depth > 2)\n\t\t\t\t\t\t\t\t? 'tiny'\n\t\t\t\t\t\t\t\t: 'medium'\n\t\t\t\t\t\t}\n\t\t\t\t\t\tkey={item.id}\n\t\t\t\t\t>\n\t\t\t\t\t\t{item.children.map((child) => getMenuItem(editor, child, item, depth + 1))}\n\t\t\t\t\t</M.Group>\n\t\t\t\t)\n\t\t\t}\n\t\t\tcase 'submenu': {\n\t\t\t\tif (isReadonly && !item.readonlyOk) return null\n\n\t\t\t\treturn (\n\t\t\t\t\t<M.Sub id={`main menu ${parent ? parent.id + ' ' : ''}${item.id}`} key={item.id}>\n\t\t\t\t\t\t<M.SubTrigger label={item.label} data-testid={`menu-item.${item.id}`} />\n\t\t\t\t\t\t<M.SubContent sideOffset={-4} alignOffset={-1}>\n\t\t\t\t\t\t\t{item.children.map((child) => getMenuItem(editor, child, item, depth + 1))}\n\t\t\t\t\t\t</M.SubContent>\n\t\t\t\t\t</M.Sub>\n\t\t\t\t)\n\t\t\t}\n\t\t\tcase 'item': {\n\t\t\t\tif (isReadonly && !item.readonlyOk) return null\n\n\t\t\t\tconst { id, checkbox, menuLabel, label, onSelect, kbd } = item.actionItem\n\t\t\t\tconst labelToUse = menuLabel ?? label\n\t\t\t\tconst labelStr = labelToUse ? msg(labelToUse) : undefined\n\n\t\t\t\tif (checkbox) {\n\t\t\t\t\t// Item is in a checkbox group\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<M.CheckboxItem\n\t\t\t\t\t\t\tkey={id}\n\t\t\t\t\t\t\tonSelect={() => onSelect('menu')}\n\t\t\t\t\t\t\ttitle={labelStr ? labelStr : ''}\n\t\t\t\t\t\t\tchecked={item.checked}\n\t\t\t\t\t\t\tdisabled={item.disabled}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{labelStr && <span>{labelStr}</span>}\n\t\t\t\t\t\t\t{kbd && <Kbd>{kbd}</Kbd>}\n\t\t\t\t\t\t</M.CheckboxItem>\n\t\t\t\t\t)\n\t\t\t\t}\n\n\t\t\t\t// Item is a button\n\t\t\t\treturn (\n\t\t\t\t\t<M.Item\n\t\t\t\t\t\tkey={id}\n\t\t\t\t\t\tdata-testid={`menu-item.${item.id}`}\n\t\t\t\t\t\tkbd={kbd}\n\t\t\t\t\t\tlabel={labelToUse}\n\t\t\t\t\t\tonClick={() => onSelect('menu')}\n\t\t\t\t\t\tdisabled={item.disabled}\n\t\t\t\t\t/>\n\t\t\t\t)\n\t\t\t}\n\t\t}\n\t}\n\n\treturn <>{menuSchema.map((item) => getMenuItem(editor, item, null, 0))}</>\n}\n"],"mappings":"AAgBE,SA2GMA,QAAA,EAzGJC,GAAA,EAFFC,IAAA;AAhBF,SAAiBC,SAAA,QAAiB;AAClC,YAAYC,KAAA,MAAW;AAEvB,SAASC,aAAA,QAAqB;AAC9B,SAASC,aAAA,QAAqB;AAC9B,SAASC,WAAA,QAAmB;AAC5B,SAASC,cAAA,QAAsB;AAC/B,SAASC,YAAA,QAAoB;AAC7B,SAASC,MAAA,QAAc;AACvB,YAAYC,CAAA,MAAO;AACnB,SAASC,GAAA,QAAW;AAEb,IAAMC,IAAA,GAAOT,KAAA,CAAMU,IAAA,CAAK,SAASC,MAAA,EAAO;EAC9C,IAAMC,GAAA,GAAMR,cAAA,CAAe;EAE3B,OACC,eAAAN,IAAA,CAACS,CAAA,CAAEM,IAAA,EAAF;IAAOC,EAAA,EAAG;IACVC,QAAA,kBAAAlB,GAAA,CAACU,CAAA,CAAES,OAAA,EAAF;MACAD,QAAA,iBAAAlB,GAAA,CAACS,MAAA;QACAW,SAAA,EAAU;QACV,eAAY;QACZC,KAAA,EAAON,GAAA,CAAI,YAAY;QACvBO,IAAA,EAAK;MAAA,CACN;IAAA,CACD,GACA,eAAAtB,GAAA,CAACU,CAAA,CAAEa,OAAA,EAAF;MAAUC,WAAA,EAAa;MAAGC,UAAA,EAAY;MACtCP,QAAA,iBAAAlB,GAAA,CAAC0B,WAAA,IAAY;IAAA,CACd;EAAA,CACD;AAEF,CAAC;AAED,SAASA,YAAA,EAAc;EACtB,IAAMC,MAAA,GAASzB,SAAA,CAAU;EACzB,IAAMa,GAAA,GAAMR,cAAA,CAAe;EAC3B,IAAMqB,UAAA,GAAavB,aAAA,CAAc;EACjC,IAAMwB,UAAA,GAAazB,aAAA,CAAc;EACjC,IAAM0B,UAAA,GAAaxB,WAAA,CAAY;EAE/B,SAASyB,YACRC,OAAA,EACAC,IAAA,EACAC,MAAA,EACAC,KAAA,EACC;IACD,QAAQF,IAAA,CAAKG,IAAA;MACZ,KAAK;QAAU;UACd,IAAIN,UAAA,IAAc,CAACG,IAAA,CAAKI,UAAA,EAAY,OAAO;UAE3C,IAAIJ,IAAA,CAAKhB,EAAA,KAAO,iBAAiB;YAChC,OAAO,eAAAjB,GAAA,CAACQ,YAAA,MAAiB,MAAO;UACjC;UAEA,OAAO;QACR;MACA,KAAK;QAAS;UACb,IAAIsB,UAAA,IAAc,CAACG,IAAA,CAAKI,UAAA,EAAY,OAAO;UAE3C,OACC,eAAArC,GAAA,CAACU,CAAA,CAAE4B,KAAA,EAAF;YACAC,IAAA,EACCJ,KAAA,IAAS,IACN,WACAN,UAAA,GAAa,KAAM,CAAAK,MAAA,aAAAA,MAAA,uBAAAA,MAAA,CAAQE,IAAA,MAAS,aAAaD,KAAA,GAAQ,IACzD,SACA;YAIHjB,QAAA,EAAAe,IAAA,CAAKf,QAAA,CAASsB,GAAA,CAAI,UAACC,KAAA;cAAA,OAAUV,WAAA,CAAYC,OAAA,EAAQS,KAAA,EAAOR,IAAA,EAAME,KAAA,GAAQ,CAAC,CAAC;YAAA;UAAA,GAFpEF,IAAA,CAAKhB,EAGX;QAEF;MACA,KAAK;QAAW;UACf,IAAIa,UAAA,IAAc,CAACG,IAAA,CAAKI,UAAA,EAAY,OAAO;UAE3C,OACC,eAAApC,IAAA,CAACS,CAAA,CAAEgC,GAAA,EAAF;YAAMzB,EAAA,eAAA0B,MAAA,CAAiBT,MAAA,GAASA,MAAA,CAAOjB,EAAA,GAAK,MAAM,IAAA0B,MAAA,CAAKV,IAAA,CAAKhB,EAAA;YAC5DC,QAAA,kBAAAlB,GAAA,CAACU,CAAA,CAAEkC,UAAA,EAAF;cAAaC,KAAA,EAAOZ,IAAA,CAAKY,KAAA;cAAO,4BAAAF,MAAA,CAA0BV,IAAA,CAAKhB,EAAA;YAAA,CAAM,GACtE,eAAAjB,GAAA,CAACU,CAAA,CAAEoC,UAAA,EAAF;cAAarB,UAAA,EAAY;cAAID,WAAA,EAAa;cACzCN,QAAA,EAAAe,IAAA,CAAKf,QAAA,CAASsB,GAAA,CAAI,UAACC,KAAA;gBAAA,OAAUV,WAAA,CAAYC,OAAA,EAAQS,KAAA,EAAOR,IAAA,EAAME,KAAA,GAAQ,CAAC,CAAC;cAAA;YAAA,CAC1E;UAAA,GAJuEF,IAAA,CAAKhB,EAK7E;QAEF;MACA,KAAK;QAAQ;UACZ,IAAIa,UAAA,IAAc,CAACG,IAAA,CAAKI,UAAA,EAAY,OAAO;UAE3C,IAAAU,gBAAA,GAA0Dd,IAAA,CAAKe,UAAA;YAAvD/B,EAAA,GAAA8B,gBAAA,CAAA9B,EAAA;YAAIgC,QAAA,GAAAF,gBAAA,CAAAE,QAAA;YAAUC,SAAA,GAAAH,gBAAA,CAAAG,SAAA;YAAWL,KAAA,GAAAE,gBAAA,CAAAF,KAAA;YAAOM,SAAA,GAAAJ,gBAAA,CAAAI,QAAA;YAAUC,GAAA,GAAAL,gBAAA,CAAAK,GAAA;UAClD,IAAMC,UAAA,GAAaH,SAAA,aAAAA,SAAA,cAAAA,SAAA,GAAaL,KAAA;UAChC,IAAMS,QAAA,GAAWD,UAAA,GAAatC,GAAA,CAAIsC,UAAU,IAAI;UAEhD,IAAIJ,QAAA,EAAU;YAEb,OACC,eAAAhD,IAAA,CAACS,CAAA,CAAE6C,YAAA,EAAF;cAEAJ,QAAA,EAAU,SAAAA,SAAA;gBAAA,OAAMA,SAAA,CAAS,MAAM;cAAA;cAC/B9B,KAAA,EAAOiC,QAAA,GAAWA,QAAA,GAAW;cAC7BE,OAAA,EAASvB,IAAA,CAAKuB,OAAA;cACdC,QAAA,EAAUxB,IAAA,CAAKwB,QAAA;cAEdvC,QAAA,GAAAoC,QAAA,IAAY,eAAAtD,GAAA,CAAC;gBAAMkB,QAAA,EAAAoC;cAAA,CAAS,GAC5BF,GAAA,IAAO,eAAApD,GAAA,CAACW,GAAA;gBAAKO,QAAA,EAAAkC;cAAA,CAAI;YAAA,GAPbnC,EAQN;UAEF;UAGA,OACC,eAAAjB,GAAA,CAACU,CAAA,CAAEgD,IAAA,EAAF;YAEA,4BAAAf,MAAA,CAA0BV,IAAA,CAAKhB,EAAA;YAC/BmC,GAAA,EAAAA,GAAA;YACAP,KAAA,EAAOQ,UAAA;YACPM,OAAA,EAAS,SAAAA,QAAA;cAAA,OAAMR,SAAA,CAAS,MAAM;YAAA;YAC9BM,QAAA,EAAUxB,IAAA,CAAKwB;UAAA,GALVxC,EAMN;QAEF;IACD;EACD;EAEA,OAAO,eAAAjB,GAAA,CAAAD,QAAA;IAAGmB,QAAA,EAAAU,UAAA,CAAWY,GAAA,CAAI,UAACP,IAAA;MAAA,OAASF,WAAA,CAAYJ,MAAA,EAAQM,IAAA,EAAM,MAAM,CAAC,CAAC;IAAA;EAAA,CAAE;AACxE"},"metadata":{},"sourceType":"module","externalDependencies":[]}