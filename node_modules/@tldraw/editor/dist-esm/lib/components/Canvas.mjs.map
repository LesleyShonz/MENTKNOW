{
  "version": 3,
  "sources": ["../../../src/lib/components/Canvas.tsx"],
  "sourcesContent": ["import { Matrix2d, toDomPrecision } from '@tldraw/primitives'\nimport { TLHandle, TLShapeId } from '@tldraw/tlschema'\nimport { dedupe, modulate } from '@tldraw/utils'\nimport React from 'react'\nimport { react } from 'signia'\nimport { track, useValue } from 'signia-react'\nimport { useCanvasEvents } from '../hooks/useCanvasEvents'\nimport { useCoarsePointer } from '../hooks/useCoarsePointer'\nimport { useDocumentEvents } from '../hooks/useDocumentEvents'\nimport { useEditor } from '../hooks/useEditor'\nimport { useEditorComponents } from '../hooks/useEditorComponents'\nimport { useFixSafariDoubleTapZoomPencilEvents } from '../hooks/useFixSafariDoubleTapZoomPencilEvents'\nimport { useGestureEvents } from '../hooks/useGestureEvents'\nimport { useHandleEvents } from '../hooks/useHandleEvents'\nimport { usePattern } from '../hooks/usePattern'\nimport { useQuickReactor } from '../hooks/useQuickReactor'\nimport { useScreenBounds } from '../hooks/useScreenBounds'\nimport { debugFlags } from '../utils/debug-flags'\nimport { LiveCollaborators } from './LiveCollaborators'\nimport { SelectionBg } from './SelectionBg'\nimport { SelectionFg } from './SelectionFg'\nimport { Shape } from './Shape'\nimport { ShapeIndicator } from './ShapeIndicator'\n\n/** @public */\nexport const Canvas = track(function Canvas() {\n\tconst editor = useEditor()\n\n\tconst { Background, SvgDefs } = useEditorComponents()\n\n\tconst rCanvas = React.useRef<HTMLDivElement>(null)\n\tconst rHtmlLayer = React.useRef<HTMLDivElement>(null)\n\n\tuseScreenBounds()\n\tuseDocumentEvents()\n\tuseCoarsePointer()\n\n\tuseGestureEvents(rCanvas)\n\tuseFixSafariDoubleTapZoomPencilEvents(rCanvas)\n\n\tuseQuickReactor(\n\t\t'position layers',\n\t\t() => {\n\t\t\tconst htmlElm = rHtmlLayer.current\n\t\t\tif (!htmlElm) return\n\n\t\t\tconst { x, y, z } = editor.camera\n\n\t\t\t// Because the html container has a width/height of 1px, we\n\t\t\t// need to create a small offset when zoomed to ensure that\n\t\t\t// the html container and svg container are lined up exactly.\n\t\t\tconst offset =\n\t\t\t\tz >= 1 ? modulate(z, [1, 8], [0.125, 0.5], true) : modulate(z, [0.1, 1], [-2, 0.125], true)\n\n\t\t\thtmlElm.style.setProperty(\n\t\t\t\t'transform',\n\t\t\t\t`scale(${toDomPrecision(z)}) translate(${toDomPrecision(x + offset)}px,${toDomPrecision(\n\t\t\t\t\ty + offset\n\t\t\t\t)}px)`\n\t\t\t)\n\t\t},\n\t\t[editor]\n\t)\n\n\tconst { context: patternContext, isReady: patternIsReady } = usePattern()\n\n\tconst events = useCanvasEvents()\n\n\tReact.useEffect(() => {\n\t\tif (patternIsReady && editor.isSafari) {\n\t\t\tconst htmlElm = rHtmlLayer.current\n\n\t\t\tif (htmlElm) {\n\t\t\t\t// Wait for `patternContext` to be picked up\n\t\t\t\trequestAnimationFrame(() => {\n\t\t\t\t\thtmlElm.style.display = 'none'\n\n\t\t\t\t\t// Wait for 'display = \"none\"' to take effect\n\t\t\t\t\trequestAnimationFrame(() => {\n\t\t\t\t\t\thtmlElm.style.display = ''\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}, [editor, patternIsReady])\n\n\tReact.useEffect(() => {\n\t\trCanvas.current?.focus()\n\t}, [])\n\n\treturn (\n\t\t<div ref={rCanvas} draggable={false} className=\"tl-canvas\" data-testid=\"canvas\" {...events}>\n\t\t\t{Background && <Background />}\n\t\t\t<GridWrapper />\n\t\t\t<UiLogger />\n\t\t\t<div ref={rHtmlLayer} className=\"tl-html-layer\" draggable={false}>\n\t\t\t\t<svg className=\"tl-svg-context\">\n\t\t\t\t\t<defs>\n\t\t\t\t\t\t{patternContext}\n\t\t\t\t\t\t{Cursor && <Cursor />}\n\t\t\t\t\t\t<CollaboratorHint />\n\t\t\t\t\t\t<ArrowheadDot />\n\t\t\t\t\t\t<ArrowheadCross />\n\t\t\t\t\t\t{SvgDefs && <SvgDefs />}\n\t\t\t\t\t</defs>\n\t\t\t\t</svg>\n\t\t\t\t<SelectionBg />\n\t\t\t\t<div className=\"tl-shapes\">\n\t\t\t\t\t<ShapesToDisplay />\n\t\t\t\t</div>\n\t\t\t\t<div className=\"tl-overlays\">\n\t\t\t\t\t<HandlesWrapper />\n\t\t\t\t\t<BrushWrapper />\n\t\t\t\t\t<ScribbleWrapper />\n\t\t\t\t\t<ZoomBrushWrapper />\n\t\t\t\t\t<SelectedIdIndicators />\n\t\t\t\t\t<HoveredShapeIndicator />\n\t\t\t\t\t<HintedShapeIndicator />\n\t\t\t\t\t<SnapLinesWrapper />\n\t\t\t\t\t<SelectionFg />\n\t\t\t\t\t<LiveCollaborators />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t)\n})\n\nconst GridWrapper = track(function GridWrapper() {\n\tconst editor = useEditor()\n\tconst { Grid } = useEditorComponents()\n\n\t// get grid from context\n\n\tconst { x, y, z } = editor.camera\n\tconst isGridMode = editor.isGridMode\n\n\tif (!(Grid && isGridMode)) return null\n\n\treturn <Grid x={x} y={y} z={z} size={editor.gridSize} />\n})\n\nconst ScribbleWrapper = track(function ScribbleWrapper() {\n\tconst editor = useEditor()\n\tconst scribble = editor.scribble\n\tconst zoom = editor.zoomLevel\n\n\tconst { Scribble } = useEditorComponents()\n\n\tif (!(Scribble && scribble)) return null\n\n\treturn <Scribble className=\"tl-user-scribble\" scribble={scribble} zoom={zoom} />\n})\n\nconst BrushWrapper = track(function BrushWrapper() {\n\tconst editor = useEditor()\n\tconst { brush } = editor\n\tconst { Brush } = useEditorComponents()\n\n\tif (!(Brush && brush && editor.isIn('select.brushing'))) return null\n\n\treturn <Brush className=\"tl-user-brush\" brush={brush} />\n})\n\nexport const ZoomBrushWrapper = track(function Zoom() {\n\tconst editor = useEditor()\n\tconst { zoomBrush } = editor\n\tconst { ZoomBrush } = useEditorComponents()\n\n\tif (!(ZoomBrush && zoomBrush && editor.isIn('zoom'))) return null\n\n\treturn <ZoomBrush className=\"tl-user-brush\" brush={zoomBrush} />\n})\n\nexport const SnapLinesWrapper = track(function SnapLines() {\n\tconst editor = useEditor()\n\tconst {\n\t\tsnaps: { lines },\n\t\tzoomLevel,\n\t} = editor\n\tconst { SnapLine } = useEditorComponents()\n\n\tif (!(SnapLine && lines.length > 0)) return null\n\n\treturn (\n\t\t<>\n\t\t\t{lines.map((line) => (\n\t\t\t\t<SnapLine key={line.id} className=\"tl-user-snapline\" line={line} zoom={zoomLevel} />\n\t\t\t))}\n\t\t</>\n\t)\n})\n\nconst MIN_HANDLE_DISTANCE = 48\n\nconst HandlesWrapper = track(function HandlesWrapper() {\n\tconst editor = useEditor()\n\n\tconst zoom = editor.zoomLevel\n\tconst isChangingStyle = editor.isChangingStyle\n\n\tconst onlySelectedShape = editor.onlySelectedShape\n\n\tconst shouldDisplayHandles =\n\t\teditor.isInAny('select.idle', 'select.pointing_handle') &&\n\t\t!isChangingStyle &&\n\t\t!editor.isReadOnly\n\n\tif (!(onlySelectedShape && shouldDisplayHandles)) return null\n\n\tconst util = editor.getShapeUtil(onlySelectedShape)\n\tconst handles = util.handles?.(onlySelectedShape)\n\n\tif (!handles) return null\n\n\tconst transform = editor.getPageTransform(onlySelectedShape)\n\n\tif (!transform) return null\n\n\t// Don't display a temporary handle if the distance between it and its neighbors is too small.\n\tconst handlesToDisplay: TLHandle[] = []\n\n\tfor (let i = 0, handle = handles[i]; i < handles.length; i++, handle = handles[i]) {\n\t\tif (handle.type !== 'vertex') {\n\t\t\tconst prev = handles[i - 1]\n\t\t\tconst next = handles[i + 1]\n\t\t\tif (prev && next) {\n\t\t\t\tif (Math.hypot(prev.y - next.y, prev.x - next.x) < MIN_HANDLE_DISTANCE / zoom) {\n\t\t\t\t\tcontinue\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\thandlesToDisplay.push(handle)\n\t}\n\n\thandlesToDisplay.sort((a) => (a.type === 'vertex' ? 1 : -1))\n\n\treturn (\n\t\t<svg className=\"tl-user-handles tl-overlays__item\">\n\t\t\t<g transform={Matrix2d.toCssString(transform)}>\n\t\t\t\t{handlesToDisplay.map((handle) => {\n\t\t\t\t\treturn <HandleWrapper key={handle.id} shapeId={onlySelectedShape.id} handle={handle} />\n\t\t\t\t})}\n\t\t\t</g>\n\t\t</svg>\n\t)\n})\n\nconst HandleWrapper = ({ shapeId, handle }: { shapeId: TLShapeId; handle: TLHandle }) => {\n\tconst events = useHandleEvents(shapeId, handle.id)\n\tconst { Handle } = useEditorComponents()\n\n\tif (!Handle) return null\n\n\treturn (\n\t\t<g aria-label=\"handle\" transform={`translate(${handle.x}, ${handle.y})`} {...events}>\n\t\t\t<Handle shapeId={shapeId} handle={handle} />\n\t\t</g>\n\t)\n}\n\nconst ShapesToDisplay = track(function ShapesToDisplay() {\n\tconst editor = useEditor()\n\n\tconst { renderingShapes } = editor\n\n\tconst debugSvg = debugFlags.debugSvg.value\n\tif (debugSvg) {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t{renderingShapes.map((result) => (\n\t\t\t\t\t<React.Fragment key={result.id + '_fragment'}>\n\t\t\t\t\t\t<Shape {...result} />\n\t\t\t\t\t\t<DebugSvgCopy id={result.id} />\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t))}\n\t\t\t</>\n\t\t)\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t{renderingShapes.map((result) => (\n\t\t\t\t<Shape key={result.id + '_shape'} {...result} />\n\t\t\t))}\n\t\t</>\n\t)\n})\n\nconst SelectedIdIndicators = track(function SelectedIdIndicators() {\n\tconst editor = useEditor()\n\n\tconst shouldDisplay =\n\t\teditor.isInAny(\n\t\t\t'select.idle',\n\t\t\t'select.brushing',\n\t\t\t'select.scribble_brushing',\n\t\t\t'select.pointing_shape',\n\t\t\t'select.pointing_selection',\n\t\t\t'select.pointing_handle'\n\t\t) && !editor.isChangingStyle\n\n\tif (!shouldDisplay) return null\n\n\treturn (\n\t\t<>\n\t\t\t{editor.selectedIds.map((id) => (\n\t\t\t\t<ShapeIndicator key={id + '_indicator'} className=\"tl-user-indicator__selected\" id={id} />\n\t\t\t))}\n\t\t</>\n\t)\n})\n\nconst HoveredShapeIndicator = function HoveredShapeIndicator() {\n\tconst editor = useEditor()\n\n\tconst displayingHoveredId = useValue(\n\t\t'hovered id and should display',\n\t\t() =>\n\t\t\teditor.isInAny('select.idle', 'select.editing_shape') ? editor.pageState.hoveredId : null,\n\t\t[editor]\n\t)\n\n\tif (!displayingHoveredId) return null\n\n\treturn <ShapeIndicator className=\"tl-user-indicator__hovered\" id={displayingHoveredId} />\n}\n\nconst HintedShapeIndicator = track(function HintedShapeIndicator() {\n\tconst editor = useEditor()\n\n\tconst ids = dedupe(editor.hintingIds)\n\n\tif (!ids.length) return null\n\n\treturn (\n\t\t<>\n\t\t\t{ids.map((id) => (\n\t\t\t\t<ShapeIndicator className=\"tl-user-indicator__hint\" id={id} key={id + '_hinting'} />\n\t\t\t))}\n\t\t</>\n\t)\n})\n\nfunction Cursor() {\n\treturn (\n\t\t<g id=\"cursor\">\n\t\t\t<g fill=\"rgba(0,0,0,.2)\" transform=\"translate(-11,-11)\">\n\t\t\t\t<path d=\"m12 24.4219v-16.015l11.591 11.619h-6.781l-.411.124z\" />\n\t\t\t\t<path d=\"m21.0845 25.0962-3.605 1.535-4.682-11.089 3.686-1.553z\" />\n\t\t\t</g>\n\t\t\t<g fill=\"white\" transform=\"translate(-12,-12)\">\n\t\t\t\t<path d=\"m12 24.4219v-16.015l11.591 11.619h-6.781l-.411.124z\" />\n\t\t\t\t<path d=\"m21.0845 25.0962-3.605 1.535-4.682-11.089 3.686-1.553z\" />\n\t\t\t</g>\n\t\t\t<g fill=\"currentColor\" transform=\"translate(-12,-12)\">\n\t\t\t\t<path d=\"m19.751 24.4155-1.844.774-3.1-7.374 1.841-.775z\" />\n\t\t\t\t<path d=\"m13 10.814v11.188l2.969-2.866.428-.139h4.768z\" />\n\t\t\t</g>\n\t\t</g>\n\t)\n}\n\nfunction CollaboratorHint() {\n\treturn <path id=\"cursor_hint\" fill=\"currentColor\" d=\"M -2,-5 2,0 -2,5 Z\" />\n}\n\nfunction ArrowheadDot() {\n\treturn (\n\t\t<marker id=\"arrowhead-dot\" className=\"tl-arrow-hint\" refX=\"3.0\" refY=\"3.0\" orient=\"0\">\n\t\t\t<circle cx=\"3\" cy=\"3\" r=\"2\" strokeDasharray=\"100%\" />\n\t\t</marker>\n\t)\n}\n\nfunction ArrowheadCross() {\n\treturn (\n\t\t<marker id=\"arrowhead-cross\" className=\"tl-arrow-hint\" refX=\"3.0\" refY=\"3.0\" orient=\"auto\">\n\t\t\t<line x1=\"1.5\" y1=\"1.5\" x2=\"4.5\" y2=\"4.5\" strokeDasharray=\"100%\" />\n\t\t\t<line x1=\"1.5\" y1=\"4.5\" x2=\"4.5\" y2=\"1.5\" strokeDasharray=\"100%\" />\n\t\t</marker>\n\t)\n}\n\nconst DebugSvgCopy = track(function DupSvg({ id }: { id: TLShapeId }) {\n\tconst editor = useEditor()\n\tconst shape = editor.getShapeById(id)\n\n\tconst [html, setHtml] = React.useState('')\n\n\tconst isInRoot = shape?.parentId === editor.currentPageId\n\n\tReact.useEffect(() => {\n\t\tif (!isInRoot) return\n\n\t\tlet latest = null\n\t\tconst unsubscribe = react('shape to svg', async () => {\n\t\t\tconst renderId = Math.random()\n\t\t\tlatest = renderId\n\t\t\tconst bb = editor.getPageBoundsById(id)\n\t\t\tconst el = await editor.getSvg([id], { padding: 0 })\n\t\t\tif (el && bb && latest === renderId) {\n\t\t\t\tel.style.setProperty('overflow', 'visible')\n\t\t\t\tel.setAttribute('preserveAspectRatio', 'xMidYMin slice')\n\t\t\t\tel.style.setProperty('transform', `translate(${bb.x}px, ${bb.y + bb.h + 12}px)`)\n\t\t\t\tel.style.setProperty('border', '1px solid black')\n\t\t\t\tsetHtml(el?.outerHTML)\n\t\t\t}\n\t\t})\n\n\t\treturn () => {\n\t\t\tlatest = null\n\t\t\tunsubscribe()\n\t\t}\n\t}, [editor, id, isInRoot])\n\n\tif (!isInRoot) return null\n\n\treturn (\n\t\t<div style={{ paddingTop: 12, position: 'absolute' }}>\n\t\t\t<div style={{ display: 'flex' }} dangerouslySetInnerHTML={{ __html: html }} />\n\t\t</div>\n\t)\n})\n\nconst UiLogger = track(() => {\n\tconst logMessages = debugFlags.logMessages.value\n\n\treturn (\n\t\t<div className=\"debug__ui-logger\">\n\t\t\t{logMessages.map((message, messageIndex) => {\n\t\t\t\tconst text = typeof message === 'string' ? message : JSON.stringify(message)\n\n\t\t\t\treturn (\n\t\t\t\t\t<div className=\"debug__ui-logger__line\" key={messageIndex}>\n\t\t\t\t\t\t{text}\n\t\t\t\t\t</div>\n\t\t\t\t)\n\t\t\t})}\n\t\t</div>\n\t)\n})\n"],
  "mappings": "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",
  "names": ["Canvas", "GridWrapper", "ScribbleWrapper", "BrushWrapper", "HandlesWrapper", "ShapesToDisplay", "SelectedIdIndicators", "HoveredShapeIndicator", "HintedShapeIndicator"]
}
