{"ast":null,"code":"import uniq from \"lodash.uniq\";\nimport { useMemo } from \"react\";\nimport { useComputed, useValue } from \"signia-react\";\nimport { useEditor } from \"./useEditor.mjs\";\nfunction usePeerIds() {\n  var editor = useEditor();\n  var $presences = useMemo(function () {\n    return editor.store.query.records(\"instance_presence\", function () {\n      return {\n        userId: {\n          neq: editor.user.id\n        }\n      };\n    });\n  }, [editor]);\n  var $userIds = useComputed(\"userIds\", function () {\n    return uniq($presences.value.map(function (p) {\n      return p.userId;\n    })).sort();\n  }, {\n    isEqual: function isEqual(a, b) {\n      var _b$join;\n      return a.join(\",\") === ((_b$join = b.join) === null || _b$join === void 0 ? void 0 : _b$join.call(b, \",\"));\n    }\n  }, [$presences]);\n  return useValue($userIds);\n}\nexport { usePeerIds };","map":{"version":3,"names":["uniq","useMemo","useComputed","useValue","useEditor","usePeerIds","editor","$presences","store","query","records","userId","neq","user","id","$userIds","value","map","p","sort","isEqual","a","b","_b$join","join","call"],"sources":["/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@tldraw/editor/src/lib/hooks/usePeerIds.ts"],"sourcesContent":["import uniq from 'lodash.uniq'\nimport { useMemo } from 'react'\nimport { useComputed, useValue } from 'signia-react'\nimport { useEditor } from './useEditor'\n\n// TODO: maybe move this to a computed property on the App class?\n/**\n * @returns The list of peer UserIDs\n * @internal\n */\nexport function usePeerIds() {\n\tconst editor = useEditor()\n\tconst $presences = useMemo(() => {\n\t\treturn editor.store.query.records('instance_presence', () => ({\n\t\t\tuserId: { neq: editor.user.id },\n\t\t}))\n\t}, [editor])\n\n\tconst $userIds = useComputed(\n\t\t'userIds',\n\t\t() => uniq($presences.value.map((p) => p.userId)).sort(),\n\t\t{ isEqual: (a, b) => a.join(',') === b.join?.(',') },\n\t\t[$presences]\n\t)\n\n\treturn useValue($userIds)\n}\n"],"mappings":"AAAA,OAAOA,IAAA,MAAU;AACjB,SAASC,OAAA,QAAe;AACxB,SAASC,WAAA,EAAaC,QAAA,QAAgB;AACtC,SAASC,SAAA,QAAiB;AAOnB,SAASC,WAAA,EAAa;EAC5B,IAAMC,MAAA,GAASF,SAAA,CAAU;EACzB,IAAMG,UAAA,GAAaN,OAAA,CAAQ,YAAM;IAChC,OAAOK,MAAA,CAAOE,KAAA,CAAMC,KAAA,CAAMC,OAAA,CAAQ,qBAAqB;MAAA,OAAO;QAC7DC,MAAA,EAAQ;UAAEC,GAAA,EAAKN,MAAA,CAAOO,IAAA,CAAKC;QAAG;MAC/B;IAAA,CAAE;EACH,GAAG,CAACR,MAAM,CAAC;EAEX,IAAMS,QAAA,GAAWb,WAAA,CAChB,WACA;IAAA,OAAMF,IAAA,CAAKO,UAAA,CAAWS,KAAA,CAAMC,GAAA,CAAI,UAACC,CAAA;MAAA,OAAMA,CAAA,CAAEP,MAAM;IAAA,EAAC,EAAEQ,IAAA,CAAK;EAAA,GACvD;IAAEC,OAAA,EAAS,SAAAA,QAACC,CAAA,EAAGC,CAAA;MAAA,IAAAC,OAAA;MAAA,OAAMF,CAAA,CAAEG,IAAA,CAAK,GAAG,QAAAD,OAAA,GAAMD,CAAA,CAAEE,IAAA,cAAAD,OAAA,uBAAFA,OAAA,CAAAE,IAAA,CAAAH,CAAA,EAAS,GAAG;IAAA;EAAE,GACnD,CAACf,UAAU,CACZ;EAEA,OAAOJ,QAAA,CAASY,QAAQ;AACzB"},"metadata":{},"sourceType":"module","externalDependencies":[]}