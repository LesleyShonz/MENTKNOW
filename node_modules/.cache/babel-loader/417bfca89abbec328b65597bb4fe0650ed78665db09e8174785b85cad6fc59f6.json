{"ast":null,"code":"import { jsx } from \"react/jsx-runtime\";\nimport { canolicalizeRotation, toDomPrecision } from \"@tldraw/primitives\";\nimport { useEffect, useRef } from \"react\";\nimport { useEditor } from \"../../../../hooks/useEditor.mjs\";\nimport { useIsEditing } from \"../../../../hooks/useIsEditing.mjs\";\nimport { FrameLabelInput } from \"./FrameLabelInput.mjs\";\nvar FrameHeading = function FrameHeading2(_ref) {\n  var id = _ref.id,\n    name = _ref.name,\n    width = _ref.width,\n    height = _ref.height;\n  var editor = useEditor();\n  var pageRotation = canolicalizeRotation(editor.getPageRotationById(id));\n  var isEditing = useIsEditing(id);\n  var rInput = useRef(null);\n  useEffect(function () {\n    var el = rInput.current;\n    if (el && isEditing) {\n      el.focus();\n      el.select();\n      requestAnimationFrame(function () {\n        if (document.activeElement !== el) {\n          el.focus();\n          el.select();\n        }\n      });\n    }\n  }, [rInput, isEditing]);\n  var offsetRotation = pageRotation + Math.PI / 4;\n  var scaledRotation = (offsetRotation * (2 / Math.PI) + 4) % 4;\n  var labelSide = [\"top\", \"left\", \"bottom\", \"right\"][Math.floor(scaledRotation)];\n  var labelTranslate;\n  switch (labelSide) {\n    case \"top\":\n      labelTranslate = \"\";\n      break;\n    case \"right\":\n      labelTranslate = \"translate(\".concat(toDomPrecision(width), \"px, 0px) rotate(90deg)\");\n      break;\n    case \"bottom\":\n      labelTranslate = \"translate(\".concat(toDomPrecision(width), \"px, \").concat(toDomPrecision(height), \"px) rotate(180deg)\");\n      break;\n    case \"left\":\n      labelTranslate = \"translate(0px, \".concat(toDomPrecision(height), \"px) rotate(270deg)\");\n      break;\n  }\n  return /* @__PURE__ */jsx(\"div\", {\n    className: \"tl-frame-heading\",\n    style: {\n      overflow: isEditing ? \"visible\" : \"hidden\",\n      maxWidth: \"calc(var(--tl-zoom) * \".concat(labelSide === \"top\" || labelSide === \"bottom\" ? Math.ceil(width) : Math.ceil(height), \"px + var(--space-5))\"),\n      bottom: Math.ceil(height),\n      transform: \"\".concat(labelTranslate, \" scale(var(--tl-scale)) translateX(calc(-1 * var(--space-3))\")\n    },\n    children: /* @__PURE__ */jsx(\"div\", {\n      className: \"tl-frame-heading-hit-area\",\n      children: /* @__PURE__ */jsx(FrameLabelInput, {\n        ref: rInput,\n        id: id,\n        name: name,\n        isEditing: isEditing\n      })\n    })\n  });\n};\nexport { FrameHeading };","map":{"version":3,"names":["jsx","canolicalizeRotation","toDomPrecision","useEffect","useRef","useEditor","useIsEditing","FrameLabelInput","FrameHeading","FrameHeading2","_ref","id","name","width","height","editor","pageRotation","getPageRotationById","isEditing","rInput","el","current","focus","select","requestAnimationFrame","document","activeElement","offsetRotation","Math","PI","scaledRotation","labelSide","floor","labelTranslate","concat","className","style","overflow","maxWidth","ceil","bottom","transform","children","ref"],"sources":["/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@tldraw/editor/src/lib/editor/shapes/frame/components/FrameHeading.tsx"],"sourcesContent":["import { canolicalizeRotation, SelectionEdge, toDomPrecision } from '@tldraw/primitives'\nimport { TLShapeId } from '@tldraw/tlschema'\nimport { useEffect, useRef } from 'react'\nimport { useEditor } from '../../../../hooks/useEditor'\nimport { useIsEditing } from '../../../../hooks/useIsEditing'\nimport { FrameLabelInput } from './FrameLabelInput'\n\nexport const FrameHeading = function FrameHeading({\n\tid,\n\tname,\n\twidth,\n\theight,\n}: {\n\tid: TLShapeId\n\tname: string\n\twidth: number\n\theight: number\n}) {\n\tconst editor = useEditor()\n\n\tconst pageRotation = canolicalizeRotation(editor.getPageRotationById(id))\n\tconst isEditing = useIsEditing(id)\n\n\tconst rInput = useRef<HTMLInputElement>(null)\n\n\tuseEffect(() => {\n\t\tconst el = rInput.current\n\t\tif (el && isEditing) {\n\t\t\t// On iOS, we must focus here\n\t\t\tel.focus()\n\t\t\tel.select()\n\n\t\t\trequestAnimationFrame(() => {\n\t\t\t\t// On desktop, the input may have lost focus, so try try try again!\n\t\t\t\tif (document.activeElement !== el) {\n\t\t\t\t\tel.focus()\n\t\t\t\t\tel.select()\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t}, [rInput, isEditing])\n\n\t// rotate right 45 deg\n\tconst offsetRotation = pageRotation + Math.PI / 4\n\tconst scaledRotation = (offsetRotation * (2 / Math.PI) + 4) % 4\n\tconst labelSide: SelectionEdge = (['top', 'left', 'bottom', 'right'] as const)[\n\t\tMath.floor(scaledRotation)\n\t]\n\n\tlet labelTranslate: string\n\tswitch (labelSide) {\n\t\tcase 'top':\n\t\t\tlabelTranslate = ``\n\t\t\tbreak\n\t\tcase 'right':\n\t\t\tlabelTranslate = `translate(${toDomPrecision(width)}px, 0px) rotate(90deg)`\n\t\t\tbreak\n\t\tcase 'bottom':\n\t\t\tlabelTranslate = `translate(${toDomPrecision(width)}px, ${toDomPrecision(\n\t\t\t\theight\n\t\t\t)}px) rotate(180deg)`\n\t\t\tbreak\n\t\tcase 'left':\n\t\t\tlabelTranslate = `translate(0px, ${toDomPrecision(height)}px) rotate(270deg)`\n\t\t\tbreak\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tclassName=\"tl-frame-heading\"\n\t\t\tstyle={{\n\t\t\t\toverflow: isEditing ? 'visible' : 'hidden',\n\t\t\t\tmaxWidth: `calc(var(--tl-zoom) * ${\n\t\t\t\t\tlabelSide === 'top' || labelSide === 'bottom' ? Math.ceil(width) : Math.ceil(height)\n\t\t\t\t}px + var(--space-5))`,\n\t\t\t\tbottom: Math.ceil(height),\n\t\t\t\ttransform: `${labelTranslate} scale(var(--tl-scale)) translateX(calc(-1 * var(--space-3))`,\n\t\t\t}}\n\t\t>\n\t\t\t<div className=\"tl-frame-heading-hit-area\">\n\t\t\t\t<FrameLabelInput ref={rInput} id={id} name={name} isEditing={isEditing} />\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n"],"mappings":"AAgFI,SAAAA,GAAA;AAhFJ,SAASC,oBAAA,EAAqCC,cAAA,QAAsB;AAEpE,SAASC,SAAA,EAAWC,MAAA,QAAc;AAClC,SAASC,SAAA,QAAiB;AAC1B,SAASC,YAAA,QAAoB;AAC7B,SAASC,eAAA,QAAuB;AAEzB,IAAMC,YAAA,GAAe,SAASC,cAAAC,IAAA,EAUlC;EAAA,IATFC,EAAA,GAAAD,IAAA,CAAAC,EAAA;IACAC,IAAA,GAAAF,IAAA,CAAAE,IAAA;IACAC,KAAA,GAAAH,IAAA,CAAAG,KAAA;IACAC,MAAA,GAAAJ,IAAA,CAAAI,MAAA;EAOA,IAAMC,MAAA,GAASV,SAAA,CAAU;EAEzB,IAAMW,YAAA,GAAef,oBAAA,CAAqBc,MAAA,CAAOE,mBAAA,CAAoBN,EAAE,CAAC;EACxE,IAAMO,SAAA,GAAYZ,YAAA,CAAaK,EAAE;EAEjC,IAAMQ,MAAA,GAASf,MAAA,CAAyB,IAAI;EAE5CD,SAAA,CAAU,YAAM;IACf,IAAMiB,EAAA,GAAKD,MAAA,CAAOE,OAAA;IAClB,IAAID,EAAA,IAAMF,SAAA,EAAW;MAEpBE,EAAA,CAAGE,KAAA,CAAM;MACTF,EAAA,CAAGG,MAAA,CAAO;MAEVC,qBAAA,CAAsB,YAAM;QAE3B,IAAIC,QAAA,CAASC,aAAA,KAAkBN,EAAA,EAAI;UAClCA,EAAA,CAAGE,KAAA,CAAM;UACTF,EAAA,CAAGG,MAAA,CAAO;QACX;MACD,CAAC;IACF;EACD,GAAG,CAACJ,MAAA,EAAQD,SAAS,CAAC;EAGtB,IAAMS,cAAA,GAAiBX,YAAA,GAAeY,IAAA,CAAKC,EAAA,GAAK;EAChD,IAAMC,cAAA,IAAkBH,cAAA,IAAkB,IAAIC,IAAA,CAAKC,EAAA,IAAM,KAAK;EAC9D,IAAME,SAAA,GAA4B,CAAC,OAAO,QAAQ,UAAU,OAAO,EAClEH,IAAA,CAAKI,KAAA,CAAMF,cAAc,CAC1B;EAEA,IAAIG,cAAA;EACJ,QAAQF,SAAA;IACP,KAAK;MACJE,cAAA,KAAiB;MACjB;IACD,KAAK;MACJA,cAAA,gBAAAC,MAAA,CAA8BhC,cAAA,CAAeW,KAAK;MAClD;IACD,KAAK;MACJoB,cAAA,gBAAAC,MAAA,CAA8BhC,cAAA,CAAeW,KAAK,WAAAqB,MAAA,CAAQhC,cAAA,CACzDY,MACD;MACA;IACD,KAAK;MACJmB,cAAA,qBAAAC,MAAA,CAAmChC,cAAA,CAAeY,MAAM;MACxD;EACF;EAEA,OACC,eAAAd,GAAA,CAAC;IACAmC,SAAA,EAAU;IACVC,KAAA,EAAO;MACNC,QAAA,EAAUnB,SAAA,GAAY,YAAY;MAClCoB,QAAA,2BAAAJ,MAAA,CACCH,SAAA,KAAc,SAASA,SAAA,KAAc,WAAWH,IAAA,CAAKW,IAAA,CAAK1B,KAAK,IAAIe,IAAA,CAAKW,IAAA,CAAKzB,MAAM;MAEpF0B,MAAA,EAAQZ,IAAA,CAAKW,IAAA,CAAKzB,MAAM;MACxB2B,SAAA,KAAAP,MAAA,CAAcD,cAAA;IACf;IAEAS,QAAA,iBAAA1C,GAAA,CAAC;MAAImC,SAAA,EAAU;MACdO,QAAA,iBAAA1C,GAAA,CAACO,eAAA;QAAgBoC,GAAA,EAAKxB,MAAA;QAAQR,EAAA,EAAAA,EAAA;QAAQC,IAAA,EAAAA,IAAA;QAAYM,SAAA,EAAAA;MAAA,CAAsB;IAAA,CACzE;EAAA,CACD;AAEF"},"metadata":{},"sourceType":"module","externalDependencies":[]}