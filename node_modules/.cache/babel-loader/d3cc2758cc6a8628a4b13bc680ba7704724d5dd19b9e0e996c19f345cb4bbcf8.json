{"ast":null,"code":"import _slicedToArray from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _toConsumableArray from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport { jsx, jsxs } from \"react/jsx-runtime\";\nimport * as _ContextMenu from \"@radix-ui/react-context-menu\";\nimport { preventDefault, useContainer, useEditor } from \"@tldraw/editor\";\nimport classNames from \"classnames\";\nimport { useCallback, useState } from \"react\";\nimport { useValue } from \"signia-react\";\nimport { useBreakpoint } from \"../hooks/useBreakpoint.mjs\";\nimport { useContextMenuSchema } from \"../hooks/useContextMenuSchema.mjs\";\nimport { useMenuIsOpen } from \"../hooks/useMenuIsOpen.mjs\";\nimport { useReadonly } from \"../hooks/useReadonly.mjs\";\nimport { useTranslation } from \"../hooks/useTranslation/useTranslation.mjs\";\nimport { MoveToPageMenu } from \"./MoveToPageMenu.mjs\";\nimport { Button } from \"./primitives/Button.mjs\";\nimport { Icon } from \"./primitives/Icon.mjs\";\nimport { Kbd } from \"./primitives/Kbd.mjs\";\nvar ContextMenu = function ContextMenu2(_ref) {\n  var children = _ref.children;\n  var editor = useEditor();\n  var contextTLUiMenuSchema = useContextMenuSchema();\n  var cb = useCallback(function (isOpen) {\n    if (!isOpen) {\n      var onlySelectedShape = editor.onlySelectedShape;\n      if (onlySelectedShape && editor.isShapeOrAncestorLocked(onlySelectedShape)) {\n        editor.setSelectedIds([]);\n      }\n    } else {\n      if (editor.isCoarsePointer) {\n        var selectedShapes = editor.selectedShapes,\n          currentPagePoint = editor.inputs.currentPagePoint;\n        var shapesAtPoint = editor.getShapesAtPoint(currentPagePoint);\n        if (\n        // if there are no selected shapes\n        !editor.selectedShapes.length ||\n        // OR if none of the shapes at the point include the selected shape\n        !shapesAtPoint.some(function (s) {\n          return selectedShapes.includes(s);\n        })) {\n          var lockedShapes = shapesAtPoint.filter(function (s) {\n            return editor.isShapeOrAncestorLocked(s);\n          });\n          if (lockedShapes.length) {\n            editor.select.apply(editor, _toConsumableArray(lockedShapes.map(function (s) {\n              return s.id;\n            })));\n          }\n        }\n      }\n    }\n  }, [editor]);\n  var _useMenuIsOpen = useMenuIsOpen(\"context menu\", cb),\n    _useMenuIsOpen2 = _slicedToArray(_useMenuIsOpen, 2),\n    _ = _useMenuIsOpen2[0],\n    handleOpenChange = _useMenuIsOpen2[1];\n  var isReadonly = useReadonly();\n  var noItemsToShow = contextTLUiMenuSchema.length === 0 || isReadonly && contextTLUiMenuSchema.every(function (item) {\n    return !item.readonlyOk;\n  });\n  var selectToolActive = useValue(\"isSelectToolActive\", function () {\n    return editor.currentToolId === \"select\";\n  }, [editor]);\n  var disabled = !selectToolActive || noItemsToShow;\n  return /* @__PURE__ */jsxs(_ContextMenu.Root, {\n    dir: \"ltr\",\n    onOpenChange: handleOpenChange,\n    children: [/* @__PURE__ */jsx(_ContextMenu.Trigger, {\n      onContextMenu: disabled ? preventDefault : void 0,\n      dir: \"ltr\",\n      disabled: disabled,\n      children: children\n    }), /* @__PURE__ */jsx(ContextMenuContent, {})]\n  });\n};\nfunction ContextMenuContent() {\n  var editor = useEditor();\n  var msg = useTranslation();\n  var menuSchema = useContextMenuSchema();\n  var _useMenuIsOpen3 = useMenuIsOpen(\"context menu sub\"),\n    _useMenuIsOpen4 = _slicedToArray(_useMenuIsOpen3, 2),\n    _ = _useMenuIsOpen4[0],\n    handleSubOpenChange = _useMenuIsOpen4[1];\n  var isReadonly = useReadonly();\n  var breakpoint = useBreakpoint();\n  var container = useContainer();\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    disableClicks = _useState2[0],\n    setDisableClicks = _useState2[1];\n  function getContextMenuItem(editor2, item, parent, depth) {\n    if (isReadonly && !item.readonlyOk) return null;\n    switch (item.type) {\n      case \"custom\":\n        {\n          switch (item.id) {\n            case \"MOVE_TO_PAGE_MENU\":\n              {\n                return /* @__PURE__ */jsx(MoveToPageMenu, {}, item.id);\n              }\n          }\n          break;\n        }\n      case \"group\":\n        {\n          return /* @__PURE__ */jsx(_ContextMenu.Group, {\n            dir: \"ltr\",\n            className: classNames(\"tlui-menu__group\", {\n              \"tlui-menu__group__small\": (parent === null || parent === void 0 ? void 0 : parent.type) === \"submenu\"\n            }),\n            \"data-testid\": \"menu-item.\".concat(item.id),\n            children: item.children.map(function (child) {\n              return getContextMenuItem(editor2, child, item, depth + 1);\n            })\n          }, item.id);\n        }\n      case \"submenu\":\n        {\n          return /* @__PURE__ */jsxs(_ContextMenu.Sub, {\n            onOpenChange: handleSubOpenChange,\n            children: [/* @__PURE__ */jsx(_ContextMenu.SubTrigger, {\n              dir: \"ltr\",\n              disabled: item.disabled,\n              asChild: true,\n              children: /* @__PURE__ */jsx(Button, {\n                className: \"tlui-menu__button\",\n                label: item.label,\n                \"data-testid\": \"menu-item.\".concat(item.id),\n                icon: \"chevron-right\"\n              })\n            }), /* @__PURE__ */jsx(_ContextMenu.Portal, {\n              container: container,\n              dir: \"ltr\",\n              children: /* @__PURE__ */jsx(_ContextMenu.SubContent, {\n                className: \"tlui-menu\",\n                sideOffset: -4,\n                collisionPadding: 4,\n                children: item.children.map(function (child) {\n                  return getContextMenuItem(editor2, child, item, depth + 1);\n                })\n              })\n            })]\n          }, item.id);\n        }\n      case \"item\":\n        {\n          if (isReadonly && !item.readonlyOk) return null;\n          var _item$actionItem = item.actionItem,\n            id = _item$actionItem.id,\n            checkbox = _item$actionItem.checkbox,\n            contextMenuLabel = _item$actionItem.contextMenuLabel,\n            label = _item$actionItem.label,\n            _onSelect = _item$actionItem.onSelect,\n            kbd = _item$actionItem.kbd,\n            icon = _item$actionItem.icon;\n          var labelToUse = contextMenuLabel !== null && contextMenuLabel !== void 0 ? contextMenuLabel : label;\n          var labelStr = labelToUse ? msg(labelToUse) : void 0;\n          if (checkbox) {\n            return /* @__PURE__ */jsxs(_ContextMenu.CheckboxItem, {\n              className: \"tlui-button tlui-menu__button tlui-menu__checkbox-item\",\n              dir: \"ltr\",\n              disabled: item.disabled,\n              onSelect: function onSelect(e) {\n                _onSelect(\"context-menu\");\n                preventDefault(e);\n              },\n              title: labelStr ? labelStr : void 0,\n              checked: item.checked,\n              children: [/* @__PURE__ */jsx(\"div\", {\n                className: \"tlui-menu__checkbox-item__check\",\n                style: {\n                  transformOrigin: \"75% center\",\n                  transform: \"scale(\".concat(item.checked ? 1 : 0.5, \")\"),\n                  opacity: item.checked ? 1 : 0.5\n                },\n                children: /* @__PURE__ */jsx(Icon, {\n                  small: true,\n                  icon: item.checked ? \"check\" : \"checkbox-empty\"\n                })\n              }), labelStr && /* @__PURE__ */jsx(\"span\", {\n                children: labelStr\n              }), kbd && /* @__PURE__ */jsx(Kbd, {\n                children: kbd\n              })]\n            }, id);\n          }\n          return /* @__PURE__ */jsx(_ContextMenu.Item, {\n            dir: \"ltr\",\n            asChild: true,\n            children: /* @__PURE__ */jsx(Button, {\n              className: \"tlui-menu__button\",\n              \"data-testid\": \"menu-item.\".concat(id),\n              kbd: kbd,\n              label: labelToUse,\n              disabled: item.disabled,\n              iconLeft: breakpoint < 3 && depth > 2 ? icon : void 0,\n              onClick: function onClick() {\n                if (disableClicks) {\n                  setDisableClicks(false);\n                } else {\n                  _onSelect(\"context-menu\");\n                }\n              }\n            })\n          }, id);\n        }\n    }\n  }\n  return /* @__PURE__ */jsx(_ContextMenu.Portal, {\n    dir: \"ltr\",\n    container: container,\n    children: /* @__PURE__ */jsx(_ContextMenu.Content, {\n      className: \"tlui-menu scrollable\",\n      alignOffset: -4,\n      collisionPadding: 4,\n      onContextMenu: preventDefault,\n      children: menuSchema.map(function (item) {\n        return getContextMenuItem(editor, item, null, 0);\n      })\n    })\n  });\n}\nexport { ContextMenu };","map":{"version":3,"names":["jsx","jsxs","_ContextMenu","preventDefault","useContainer","useEditor","classNames","useCallback","useState","useValue","useBreakpoint","useContextMenuSchema","useMenuIsOpen","useReadonly","useTranslation","MoveToPageMenu","Button","Icon","Kbd","ContextMenu","ContextMenu2","_ref","children","editor","contextTLUiMenuSchema","cb","isOpen","onlySelectedShape","isShapeOrAncestorLocked","setSelectedIds","isCoarsePointer","selectedShapes","currentPagePoint","inputs","shapesAtPoint","getShapesAtPoint","length","some","s","includes","lockedShapes","filter","select","apply","_toConsumableArray","map","id","_useMenuIsOpen","_useMenuIsOpen2","_slicedToArray","_","handleOpenChange","isReadonly","noItemsToShow","every","item","readonlyOk","selectToolActive","currentToolId","disabled","Root","dir","onOpenChange","Trigger","onContextMenu","ContextMenuContent","msg","menuSchema","_useMenuIsOpen3","_useMenuIsOpen4","handleSubOpenChange","breakpoint","container","_useState","_useState2","disableClicks","setDisableClicks","getContextMenuItem","editor2","parent","depth","type","Group","className","concat","child","Sub","SubTrigger","asChild","label","icon","Portal","SubContent","sideOffset","collisionPadding","_item$actionItem","actionItem","checkbox","contextMenuLabel","onSelect","kbd","labelToUse","labelStr","CheckboxItem","e","title","checked","style","transformOrigin","transform","opacity","small","Item","iconLeft","onClick","Content","alignOffset"],"sources":["/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@tldraw/ui/src/lib/components/ContextMenu.tsx"],"sourcesContent":["import * as _ContextMenu from '@radix-ui/react-context-menu'\nimport { Editor, preventDefault, useContainer, useEditor } from '@tldraw/editor'\nimport classNames from 'classnames'\nimport { useCallback, useState } from 'react'\nimport { useValue } from 'signia-react'\nimport { TLUiMenuChild } from '../hooks/menuHelpers'\nimport { useBreakpoint } from '../hooks/useBreakpoint'\nimport { useContextMenuSchema } from '../hooks/useContextMenuSchema'\nimport { useMenuIsOpen } from '../hooks/useMenuIsOpen'\nimport { useReadonly } from '../hooks/useReadonly'\nimport { useTranslation } from '../hooks/useTranslation/useTranslation'\nimport { MoveToPageMenu } from './MoveToPageMenu'\nimport { Button } from './primitives/Button'\nimport { Icon } from './primitives/Icon'\nimport { Kbd } from './primitives/Kbd'\n\n/** @public */\nexport interface TLUiContextMenuProps {\n\tchildren: any\n}\n\n/** @public */\nexport const ContextMenu = function ContextMenu({ children }: { children: any }) {\n\tconst editor = useEditor()\n\n\tconst contextTLUiMenuSchema = useContextMenuSchema()\n\n\tconst cb = useCallback(\n\t\t(isOpen: boolean) => {\n\t\t\tif (!isOpen) {\n\t\t\t\tconst { onlySelectedShape } = editor\n\n\t\t\t\tif (onlySelectedShape && editor.isShapeOrAncestorLocked(onlySelectedShape)) {\n\t\t\t\t\teditor.setSelectedIds([])\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Weird route: selecting locked shapes on long press\n\t\t\t\tif (editor.isCoarsePointer) {\n\t\t\t\t\tconst {\n\t\t\t\t\t\tselectedShapes,\n\t\t\t\t\t\tinputs: { currentPagePoint },\n\t\t\t\t\t} = editor\n\n\t\t\t\t\t// get all of the shapes under the current pointer\n\t\t\t\t\tconst shapesAtPoint = editor.getShapesAtPoint(currentPagePoint)\n\n\t\t\t\t\tif (\n\t\t\t\t\t\t// if there are no selected shapes\n\t\t\t\t\t\t!editor.selectedShapes.length ||\n\t\t\t\t\t\t// OR if none of the shapes at the point include the selected shape\n\t\t\t\t\t\t!shapesAtPoint.some((s) => selectedShapes.includes(s))\n\t\t\t\t\t) {\n\t\t\t\t\t\t// then are there any locked shapes under the current pointer?\n\t\t\t\t\t\tconst lockedShapes = shapesAtPoint.filter((s) => editor.isShapeOrAncestorLocked(s))\n\n\t\t\t\t\t\tif (lockedShapes.length) {\n\t\t\t\t\t\t\t// nice, let's select them\n\t\t\t\t\t\t\teditor.select(...lockedShapes.map((s) => s.id))\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t[editor]\n\t)\n\n\tconst [_, handleOpenChange] = useMenuIsOpen('context menu', cb)\n\n\t// If every item in the menu is readonly, then we don't want to show the menu\n\tconst isReadonly = useReadonly()\n\n\tconst noItemsToShow =\n\t\tcontextTLUiMenuSchema.length === 0 ||\n\t\t(isReadonly && contextTLUiMenuSchema.every((item) => !item.readonlyOk))\n\n\tconst selectToolActive = useValue('isSelectToolActive', () => editor.currentToolId === 'select', [\n\t\teditor,\n\t])\n\n\tconst disabled = !selectToolActive || noItemsToShow\n\n\treturn (\n\t\t<_ContextMenu.Root dir=\"ltr\" onOpenChange={handleOpenChange}>\n\t\t\t<_ContextMenu.Trigger\n\t\t\t\tonContextMenu={disabled ? preventDefault : undefined}\n\t\t\t\tdir=\"ltr\"\n\t\t\t\tdisabled={disabled}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</_ContextMenu.Trigger>\n\t\t\t<ContextMenuContent />\n\t\t</_ContextMenu.Root>\n\t)\n}\n\nfunction ContextMenuContent() {\n\tconst editor = useEditor()\n\tconst msg = useTranslation()\n\tconst menuSchema = useContextMenuSchema()\n\tconst [_, handleSubOpenChange] = useMenuIsOpen('context menu sub')\n\n\tconst isReadonly = useReadonly()\n\tconst breakpoint = useBreakpoint()\n\tconst container = useContainer()\n\n\tconst [disableClicks, setDisableClicks] = useState(false)\n\n\tfunction getContextMenuItem(\n\t\teditor: Editor,\n\t\titem: TLUiMenuChild,\n\t\tparent: TLUiMenuChild | null,\n\t\tdepth: number\n\t) {\n\t\tif (isReadonly && !item.readonlyOk) return null\n\n\t\tswitch (item.type) {\n\t\t\tcase 'custom': {\n\t\t\t\tswitch (item.id) {\n\t\t\t\t\tcase 'MOVE_TO_PAGE_MENU': {\n\t\t\t\t\t\treturn <MoveToPageMenu key={item.id} />\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak\n\t\t\t}\n\t\t\tcase 'group': {\n\t\t\t\treturn (\n\t\t\t\t\t<_ContextMenu.Group\n\t\t\t\t\t\tdir=\"ltr\"\n\t\t\t\t\t\tclassName={classNames('tlui-menu__group', {\n\t\t\t\t\t\t\t'tlui-menu__group__small': parent?.type === 'submenu',\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tdata-testid={`menu-item.${item.id}`}\n\t\t\t\t\t\tkey={item.id}\n\t\t\t\t\t>\n\t\t\t\t\t\t{item.children.map((child) => getContextMenuItem(editor, child, item, depth + 1))}\n\t\t\t\t\t</_ContextMenu.Group>\n\t\t\t\t)\n\t\t\t}\n\t\t\tcase 'submenu': {\n\t\t\t\treturn (\n\t\t\t\t\t<_ContextMenu.Sub key={item.id} onOpenChange={handleSubOpenChange}>\n\t\t\t\t\t\t<_ContextMenu.SubTrigger dir=\"ltr\" disabled={item.disabled} asChild>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tclassName=\"tlui-menu__button\"\n\t\t\t\t\t\t\t\tlabel={item.label}\n\t\t\t\t\t\t\t\tdata-testid={`menu-item.${item.id}`}\n\t\t\t\t\t\t\t\ticon=\"chevron-right\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</_ContextMenu.SubTrigger>\n\t\t\t\t\t\t<_ContextMenu.Portal container={container} dir=\"ltr\">\n\t\t\t\t\t\t\t<_ContextMenu.SubContent className=\"tlui-menu\" sideOffset={-4} collisionPadding={4}>\n\t\t\t\t\t\t\t\t{item.children.map((child) => getContextMenuItem(editor, child, item, depth + 1))}\n\t\t\t\t\t\t\t</_ContextMenu.SubContent>\n\t\t\t\t\t\t</_ContextMenu.Portal>\n\t\t\t\t\t</_ContextMenu.Sub>\n\t\t\t\t)\n\t\t\t}\n\t\t\tcase 'item': {\n\t\t\t\tif (isReadonly && !item.readonlyOk) return null\n\n\t\t\t\tconst { id, checkbox, contextMenuLabel, label, onSelect, kbd, icon } = item.actionItem\n\t\t\t\tconst labelToUse = contextMenuLabel ?? label\n\t\t\t\tconst labelStr = labelToUse ? msg(labelToUse) : undefined\n\n\t\t\t\tif (checkbox) {\n\t\t\t\t\t// Item is in a checkbox group\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<_ContextMenu.CheckboxItem\n\t\t\t\t\t\t\tkey={id}\n\t\t\t\t\t\t\tclassName=\"tlui-button tlui-menu__button tlui-menu__checkbox-item\"\n\t\t\t\t\t\t\tdir=\"ltr\"\n\t\t\t\t\t\t\tdisabled={item.disabled}\n\t\t\t\t\t\t\tonSelect={(e) => {\n\t\t\t\t\t\t\t\tonSelect('context-menu')\n\t\t\t\t\t\t\t\tpreventDefault(e)\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\ttitle={labelStr ? labelStr : undefined}\n\t\t\t\t\t\t\tchecked={item.checked}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName=\"tlui-menu__checkbox-item__check\"\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\ttransformOrigin: '75% center',\n\t\t\t\t\t\t\t\t\ttransform: `scale(${item.checked ? 1 : 0.5})`,\n\t\t\t\t\t\t\t\t\topacity: item.checked ? 1 : 0.5,\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Icon small icon={item.checked ? 'check' : 'checkbox-empty'} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{labelStr && <span>{labelStr}</span>}\n\t\t\t\t\t\t\t{kbd && <Kbd>{kbd}</Kbd>}\n\t\t\t\t\t\t</_ContextMenu.CheckboxItem>\n\t\t\t\t\t)\n\t\t\t\t}\n\n\t\t\t\treturn (\n\t\t\t\t\t<_ContextMenu.Item key={id} dir=\"ltr\" asChild>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tclassName=\"tlui-menu__button\"\n\t\t\t\t\t\t\tdata-testid={`menu-item.${id}`}\n\t\t\t\t\t\t\tkbd={kbd}\n\t\t\t\t\t\t\tlabel={labelToUse}\n\t\t\t\t\t\t\tdisabled={item.disabled}\n\t\t\t\t\t\t\ticonLeft={breakpoint < 3 && depth > 2 ? icon : undefined}\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tif (disableClicks) {\n\t\t\t\t\t\t\t\t\tsetDisableClicks(false)\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tonSelect('context-menu')\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</_ContextMenu.Item>\n\t\t\t\t)\n\t\t\t}\n\t\t}\n\t}\n\n\treturn (\n\t\t<_ContextMenu.Portal dir=\"ltr\" container={container}>\n\t\t\t<_ContextMenu.Content\n\t\t\t\tclassName=\"tlui-menu scrollable\"\n\t\t\t\talignOffset={-4}\n\t\t\t\tcollisionPadding={4}\n\t\t\t\tonContextMenu={preventDefault}\n\t\t\t>\n\t\t\t\t{menuSchema.map((item) => getContextMenuItem(editor, item, null, 0))}\n\t\t\t</_ContextMenu.Content>\n\t\t</_ContextMenu.Portal>\n\t)\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}