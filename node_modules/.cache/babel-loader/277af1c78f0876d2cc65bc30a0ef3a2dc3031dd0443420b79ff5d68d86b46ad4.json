{"ast":null,"code":"import _objectSpread from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport { jsx } from \"react/jsx-runtime\";\nimport { Matrix2d, toDomPrecision } from \"@tldraw/primitives\";\nimport * as React from \"react\";\nimport { track } from \"signia-react\";\nimport { useEditor } from \"../hooks/useEditor.mjs\";\nimport { releasePointerCapture, setPointerCapture } from \"../utils/dom.mjs\";\nimport { getPointerInfo } from \"../utils/svg.mjs\";\nvar SelectionBg = track(function SelectionBg2() {\n  var editor = useEditor();\n  var events = React.useMemo(function () {\n    var onPointerDown = function onPointerDown(e) {\n      if (e.isKilled) return;\n      setPointerCapture(e.currentTarget, e);\n      var info = _objectSpread({\n        type: \"pointer\",\n        target: \"selection\",\n        name: \"pointer_down\"\n      }, getPointerInfo(e, editor.getContainer()));\n      editor.dispatch(info);\n    };\n    var onPointerMove = function onPointerMove(e) {\n      if (e.isKilled) return;\n      var info = _objectSpread({\n        type: \"pointer\",\n        target: \"selection\",\n        name: \"pointer_move\"\n      }, getPointerInfo(e, editor.getContainer()));\n      editor.dispatch(info);\n    };\n    var onPointerUp = function onPointerUp(e) {\n      if (e.isKilled) return;\n      releasePointerCapture(e.currentTarget, e);\n      var info = _objectSpread({\n        type: \"pointer\",\n        target: \"selection\",\n        name: \"pointer_up\"\n      }, getPointerInfo(e, editor.getContainer()));\n      editor.dispatch(info);\n    };\n    var onPointerEnter = function onPointerEnter(e) {\n      if (e.isKilled) return;\n      var info = _objectSpread({\n        type: \"pointer\",\n        target: \"selection\",\n        name: \"pointer_enter\"\n      }, getPointerInfo(e, editor.getContainer()));\n      editor.dispatch(info);\n    };\n    var onPointerLeave = function onPointerLeave(e) {\n      if (e.isKilled) return;\n      var info = _objectSpread({\n        type: \"pointer\",\n        target: \"selection\",\n        name: \"pointer_leave\"\n      }, getPointerInfo(e, editor.getContainer()));\n      editor.dispatch(info);\n    };\n    return {\n      onPointerDown: onPointerDown,\n      onPointerMove: onPointerMove,\n      onPointerUp: onPointerUp,\n      onPointerEnter: onPointerEnter,\n      onPointerLeave: onPointerLeave\n    };\n  }, [editor]);\n  var bounds = editor.selectionBounds,\n    selectedIds = editor.selectedIds;\n  if (!bounds) return null;\n  var shouldDisplay = editor.isInAny(\"select.idle\", \"select.brushing\", \"select.scribble_brushing\", \"select.pointing_shape\", \"select.pointing_selection\", \"text.resizing\");\n  if (selectedIds.length === 1) {\n    var shape = editor.getShapeById(selectedIds[0]);\n    if (!shape) {\n      return null;\n    }\n    var util = editor.getShapeUtil(shape);\n    if (util.hideSelectionBoundsBg(shape)) {\n      return null;\n    }\n  }\n  var transform = Matrix2d.toCssString(Matrix2d.Compose(Matrix2d.Translate(bounds.minX, bounds.minY), Matrix2d.Rotate(editor.selectionRotation)));\n  return /* @__PURE__ */jsx(\"div\", _objectSpread({\n    className: \"tl-selection__bg\",\n    draggable: false,\n    style: {\n      transform: transform,\n      width: toDomPrecision(Math.max(1, bounds.width)),\n      height: toDomPrecision(Math.max(1, bounds.height)),\n      pointerEvents: shouldDisplay ? \"all\" : \"none\",\n      opacity: shouldDisplay ? 1 : 0\n    }\n  }, events));\n});\nexport { SelectionBg };","map":{"version":3,"names":["jsx","Matrix2d","toDomPrecision","React","track","useEditor","releasePointerCapture","setPointerCapture","getPointerInfo","SelectionBg","SelectionBg2","editor","events","useMemo","onPointerDown","e","isKilled","currentTarget","info","_objectSpread","type","target","name","getContainer","dispatch","onPointerMove","onPointerUp","onPointerEnter","onPointerLeave","bounds","selectionBounds","selectedIds","shouldDisplay","isInAny","length","shape","getShapeById","util","getShapeUtil","hideSelectionBoundsBg","transform","toCssString","Compose","Translate","minX","minY","Rotate","selectionRotation","className","draggable","style","width","Math","max","height","pointerEvents","opacity"],"sources":["/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@tldraw/editor/src/lib/components/SelectionBg.tsx"],"sourcesContent":["import { Matrix2d, toDomPrecision } from '@tldraw/primitives'\nimport * as React from 'react'\nimport { track } from 'signia-react'\nimport { TLPointerEventInfo } from '../editor/types/event-types'\nimport { useEditor } from '../hooks/useEditor'\nimport { releasePointerCapture, setPointerCapture } from '../utils/dom'\nimport { getPointerInfo } from '../utils/svg'\n\nexport const SelectionBg = track(function SelectionBg() {\n\tconst editor = useEditor()\n\n\tconst events = React.useMemo(() => {\n\t\tconst onPointerDown = (e: React.PointerEvent) => {\n\t\t\tif ((e as any).isKilled) return\n\n\t\t\tsetPointerCapture(e.currentTarget, e)\n\n\t\t\tconst info: TLPointerEventInfo = {\n\t\t\t\ttype: 'pointer',\n\t\t\t\ttarget: 'selection',\n\t\t\t\tname: 'pointer_down',\n\t\t\t\t...getPointerInfo(e, editor.getContainer()),\n\t\t\t}\n\n\t\t\teditor.dispatch(info)\n\t\t}\n\n\t\tconst onPointerMove = (e: React.PointerEvent) => {\n\t\t\tif ((e as any).isKilled) return\n\n\t\t\tconst info: TLPointerEventInfo = {\n\t\t\t\ttype: 'pointer',\n\t\t\t\ttarget: 'selection',\n\t\t\t\tname: 'pointer_move',\n\t\t\t\t...getPointerInfo(e, editor.getContainer()),\n\t\t\t}\n\n\t\t\teditor.dispatch(info)\n\t\t}\n\n\t\tconst onPointerUp = (e: React.PointerEvent) => {\n\t\t\tif ((e as any).isKilled) return\n\n\t\t\treleasePointerCapture(e.currentTarget, e)\n\n\t\t\tconst info: TLPointerEventInfo = {\n\t\t\t\ttype: 'pointer',\n\t\t\t\ttarget: 'selection',\n\t\t\t\tname: 'pointer_up',\n\t\t\t\t...getPointerInfo(e, editor.getContainer()),\n\t\t\t}\n\n\t\t\teditor.dispatch(info)\n\t\t}\n\n\t\tconst onPointerEnter = (e: React.PointerEvent) => {\n\t\t\tif ((e as any).isKilled) return\n\n\t\t\tconst info: TLPointerEventInfo = {\n\t\t\t\ttype: 'pointer',\n\t\t\t\ttarget: 'selection',\n\t\t\t\tname: 'pointer_enter',\n\t\t\t\t...getPointerInfo(e, editor.getContainer()),\n\t\t\t}\n\n\t\t\teditor.dispatch(info)\n\t\t}\n\n\t\tconst onPointerLeave = (e: React.PointerEvent) => {\n\t\t\tif ((e as any).isKilled) return\n\n\t\t\tconst info: TLPointerEventInfo = {\n\t\t\t\ttype: 'pointer',\n\t\t\t\ttarget: 'selection',\n\t\t\t\tname: 'pointer_leave',\n\t\t\t\t...getPointerInfo(e, editor.getContainer()),\n\t\t\t}\n\n\t\t\teditor.dispatch(info)\n\t\t}\n\n\t\treturn {\n\t\t\tonPointerDown,\n\t\t\tonPointerMove,\n\t\t\tonPointerUp,\n\t\t\tonPointerEnter,\n\t\t\tonPointerLeave,\n\t\t}\n\t}, [editor])\n\n\tconst { selectionBounds: bounds, selectedIds } = editor\n\tif (!bounds) return null\n\n\tconst shouldDisplay = editor.isInAny(\n\t\t'select.idle',\n\t\t'select.brushing',\n\t\t'select.scribble_brushing',\n\t\t'select.pointing_shape',\n\t\t'select.pointing_selection',\n\t\t'text.resizing'\n\t)\n\n\tif (selectedIds.length === 1) {\n\t\tconst shape = editor.getShapeById(selectedIds[0])\n\t\tif (!shape) {\n\t\t\treturn null\n\t\t}\n\t\tconst util = editor.getShapeUtil(shape)\n\t\tif (util.hideSelectionBoundsBg(shape)) {\n\t\t\treturn null\n\t\t}\n\t}\n\n\tconst transform = Matrix2d.toCssString(\n\t\tMatrix2d.Compose(\n\t\t\tMatrix2d.Translate(bounds.minX, bounds.minY),\n\t\t\tMatrix2d.Rotate(editor.selectionRotation)\n\t\t)\n\t)\n\n\treturn (\n\t\t<div\n\t\t\tclassName=\"tl-selection__bg\"\n\t\t\tdraggable={false}\n\t\t\tstyle={{\n\t\t\t\ttransform,\n\t\t\t\twidth: toDomPrecision(Math.max(1, bounds.width)),\n\t\t\t\theight: toDomPrecision(Math.max(1, bounds.height)),\n\t\t\t\tpointerEvents: shouldDisplay ? 'all' : 'none',\n\t\t\t\topacity: shouldDisplay ? 1 : 0,\n\t\t\t}}\n\t\t\t{...events}\n\t\t/>\n\t)\n})\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}