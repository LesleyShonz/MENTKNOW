{"ast":null,"code":"import _objectSpread from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _classCallCheck from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _assertThisInitialized from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _inherits from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport _defineProperty from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport { Box2d, getStarBounds } from \"@tldraw/primitives\";\nimport { GeoShapeGeoStyle, createShapeId } from \"@tldraw/tlschema\";\nimport { StateNode } from \"../../../tools/StateNode.mjs\";\nvar Pointing = /*#__PURE__*/function (_StateNode) {\n  _inherits(Pointing, _StateNode);\n  var _super = _createSuper(Pointing);\n  function Pointing() {\n    var _this;\n    _classCallCheck(this, Pointing);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _super.call.apply(_super, [this].concat(args));\n    _defineProperty(_assertThisInitialized(_this), \"onPointerMove\", function (info) {\n      if (_this.editor.inputs.isDragging) {\n        var originPagePoint = _this.editor.inputs.originPagePoint;\n        var id = createShapeId();\n        _this.editor.mark(\"creating\");\n        _this.editor.createShapes([{\n          id: id,\n          type: \"geo\",\n          x: originPagePoint.x,\n          y: originPagePoint.y,\n          props: {\n            w: 1,\n            h: 1,\n            geo: _this.editor.getStyleForNextShape(GeoShapeGeoStyle)\n          }\n        }]);\n        _this.editor.select(id);\n        _this.editor.setSelectedTool(\"select.resizing\", _objectSpread(_objectSpread({}, info), {}, {\n          target: \"selection\",\n          handle: \"bottom_right\",\n          isCreating: true,\n          creationCursorOffset: {\n            x: 1,\n            y: 1\n          },\n          onInteractionEnd: \"geo\"\n        }));\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onPointerUp\", function () {\n      _this.complete();\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onCancel\", function () {\n      _this.cancel();\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onComplete\", function () {\n      _this.complete();\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onInterrupt\", function () {\n      _this.cancel();\n    });\n    return _this;\n  }\n  _createClass(Pointing, [{\n    key: \"complete\",\n    value: function complete() {\n      var originPagePoint = this.editor.inputs.originPagePoint;\n      var id = createShapeId();\n      this.editor.mark(\"creating\");\n      this.editor.createShapes([{\n        id: id,\n        type: \"geo\",\n        x: originPagePoint.x,\n        y: originPagePoint.y,\n        props: {\n          geo: this.editor.getStyleForNextShape(GeoShapeGeoStyle),\n          w: 1,\n          h: 1\n        }\n      }]);\n      var shape = this.editor.getShapeById(id);\n      if (!shape) return;\n      var bounds = shape.props.geo === \"star\" ? getStarBounds(5, 200, 200) : new Box2d(0, 0, 200, 200);\n      var delta = this.editor.getDeltaInParentSpace(shape, bounds.center);\n      this.editor.select(id);\n      this.editor.updateShapes([{\n        id: shape.id,\n        type: \"geo\",\n        x: shape.x - delta.x,\n        y: shape.y - delta.y,\n        props: {\n          geo: this.editor.getStyleForNextShape(GeoShapeGeoStyle),\n          w: bounds.width,\n          h: bounds.height\n        }\n      }]);\n      if (this.editor.instanceState.isToolLocked) {\n        this.parent.transition(\"idle\", {});\n      } else {\n        this.editor.setSelectedTool(\"select\", {});\n      }\n    }\n  }, {\n    key: \"cancel\",\n    value: function cancel() {\n      this.parent.transition(\"idle\", {});\n    }\n  }]);\n  return Pointing;\n}(StateNode);\n_defineProperty(Pointing, \"id\", \"pointing\");\nexport { Pointing };","map":{"version":3,"names":["Box2d","getStarBounds","GeoShapeGeoStyle","createShapeId","StateNode","Pointing","_StateNode","_inherits","_super","_createSuper","_this","_classCallCheck","_len","arguments","length","args","Array","_key","call","apply","concat","_defineProperty","_assertThisInitialized","info","editor","inputs","isDragging","originPagePoint","id","mark","createShapes","type","x","y","props","w","h","geo","getStyleForNextShape","select","setSelectedTool","_objectSpread","target","handle","isCreating","creationCursorOffset","onInteractionEnd","complete","cancel","_createClass","key","value","shape","getShapeById","bounds","delta","getDeltaInParentSpace","center","updateShapes","width","height","instanceState","isToolLocked","parent","transition"],"sources":["/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@tldraw/editor/src/lib/editor/shapes/geo/toolStates/Pointing.ts"],"sourcesContent":["import { Box2d, getStarBounds } from '@tldraw/primitives'\nimport { GeoShapeGeoStyle, TLGeoShape, createShapeId } from '@tldraw/tlschema'\nimport { StateNode } from '../../../tools/StateNode'\nimport { TLEventHandlers } from '../../../types/event-types'\n\nexport class Pointing extends StateNode {\n\tstatic override id = 'pointing'\n\n\tonPointerMove: TLEventHandlers['onPointerMove'] = (info) => {\n\t\tif (this.editor.inputs.isDragging) {\n\t\t\tconst { originPagePoint } = this.editor.inputs\n\n\t\t\tconst id = createShapeId()\n\n\t\t\tthis.editor.mark('creating')\n\n\t\t\tthis.editor.createShapes<TLGeoShape>([\n\t\t\t\t{\n\t\t\t\t\tid,\n\t\t\t\t\ttype: 'geo',\n\t\t\t\t\tx: originPagePoint.x,\n\t\t\t\t\ty: originPagePoint.y,\n\t\t\t\t\tprops: {\n\t\t\t\t\t\tw: 1,\n\t\t\t\t\t\th: 1,\n\t\t\t\t\t\tgeo: this.editor.getStyleForNextShape(GeoShapeGeoStyle),\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t])\n\n\t\t\tthis.editor.select(id)\n\t\t\tthis.editor.setSelectedTool('select.resizing', {\n\t\t\t\t...info,\n\t\t\t\ttarget: 'selection',\n\t\t\t\thandle: 'bottom_right',\n\t\t\t\tisCreating: true,\n\t\t\t\tcreationCursorOffset: { x: 1, y: 1 },\n\t\t\t\tonInteractionEnd: 'geo',\n\t\t\t})\n\t\t}\n\t}\n\n\toverride onPointerUp: TLEventHandlers['onPointerUp'] = () => {\n\t\tthis.complete()\n\t}\n\n\toverride onCancel: TLEventHandlers['onCancel'] = () => {\n\t\tthis.cancel()\n\t}\n\n\toverride onComplete: TLEventHandlers['onComplete'] = () => {\n\t\tthis.complete()\n\t}\n\n\toverride onInterrupt: TLEventHandlers['onInterrupt'] = () => {\n\t\tthis.cancel()\n\t}\n\n\tcomplete() {\n\t\tconst { originPagePoint } = this.editor.inputs\n\n\t\tconst id = createShapeId()\n\n\t\tthis.editor.mark('creating')\n\n\t\tthis.editor.createShapes<TLGeoShape>([\n\t\t\t{\n\t\t\t\tid,\n\t\t\t\ttype: 'geo',\n\t\t\t\tx: originPagePoint.x,\n\t\t\t\ty: originPagePoint.y,\n\t\t\t\tprops: {\n\t\t\t\t\tgeo: this.editor.getStyleForNextShape(GeoShapeGeoStyle),\n\t\t\t\t\tw: 1,\n\t\t\t\t\th: 1,\n\t\t\t\t},\n\t\t\t},\n\t\t])\n\n\t\tconst shape = this.editor.getShapeById<TLGeoShape>(id)!\n\t\tif (!shape) return\n\n\t\tconst bounds =\n\t\t\tshape.props.geo === 'star' ? getStarBounds(5, 200, 200) : new Box2d(0, 0, 200, 200)\n\t\tconst delta = this.editor.getDeltaInParentSpace(shape, bounds.center)\n\n\t\tthis.editor.select(id)\n\t\tthis.editor.updateShapes<TLGeoShape>([\n\t\t\t{\n\t\t\t\tid: shape.id,\n\t\t\t\ttype: 'geo',\n\t\t\t\tx: shape.x - delta.x,\n\t\t\t\ty: shape.y - delta.y,\n\t\t\t\tprops: {\n\t\t\t\t\tgeo: this.editor.getStyleForNextShape(GeoShapeGeoStyle),\n\t\t\t\t\tw: bounds.width,\n\t\t\t\t\th: bounds.height,\n\t\t\t\t},\n\t\t\t},\n\t\t])\n\n\t\tif (this.editor.instanceState.isToolLocked) {\n\t\t\tthis.parent.transition('idle', {})\n\t\t} else {\n\t\t\tthis.editor.setSelectedTool('select', {})\n\t\t}\n\t}\n\n\tcancel() {\n\t\tthis.parent.transition('idle', {})\n\t}\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}