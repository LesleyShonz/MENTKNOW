{"ast":null,"code":"import _classCallCheck from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _assertThisInitialized from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _inherits from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport _defineProperty from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport { Box2d } from \"@tldraw/primitives\";\nimport { StateNode } from \"../../StateNode.mjs\";\nvar ZoomBrushing = /*#__PURE__*/function (_StateNode) {\n  _inherits(ZoomBrushing, _StateNode);\n  var _super = _createSuper(ZoomBrushing);\n  function ZoomBrushing() {\n    var _this;\n    _classCallCheck(this, ZoomBrushing);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _super.call.apply(_super, [this].concat(args));\n    _defineProperty(_assertThisInitialized(_this), \"info\", {});\n    _defineProperty(_assertThisInitialized(_this), \"zoomBrush\", new Box2d());\n    _defineProperty(_assertThisInitialized(_this), \"onEnter\", function (info) {\n      _this.info = info;\n      _this.update();\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onExit\", function () {\n      _this.editor.setZoomBrush(null);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onPointerMove\", function () {\n      _this.update();\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onPointerUp\", function () {\n      _this.complete();\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onCancel\", function () {\n      _this.cancel();\n    });\n    return _this;\n  }\n  _createClass(ZoomBrushing, [{\n    key: \"update\",\n    value: function update() {\n      var _this$editor$inputs = this.editor.inputs,\n        originPagePoint = _this$editor$inputs.originPagePoint,\n        currentPagePoint = _this$editor$inputs.currentPagePoint;\n      this.zoomBrush.setTo(Box2d.FromPoints([originPagePoint, currentPagePoint]));\n      this.editor.setZoomBrush(this.zoomBrush.toJson());\n    }\n  }, {\n    key: \"cancel\",\n    value: function cancel() {\n      this.parent.transition(\"idle\", this.info);\n    }\n  }, {\n    key: \"complete\",\n    value: function complete() {\n      var zoomBrush = this.zoomBrush;\n      var threshold = 8 / this.editor.zoomLevel;\n      if (zoomBrush.width < threshold && zoomBrush.height < threshold) {\n        var point = this.editor.inputs.currentScreenPoint;\n        if (this.editor.inputs.altKey) {\n          this.editor.zoomOut(point, {\n            duration: 220\n          });\n        } else {\n          this.editor.zoomIn(point, {\n            duration: 220\n          });\n        }\n      } else {\n        var zoomLevel = this.editor.inputs.altKey ? this.editor.zoomLevel / 2 : void 0;\n        this.editor.zoomToBounds(zoomBrush.x, zoomBrush.y, zoomBrush.width, zoomBrush.height, zoomLevel, {\n          duration: 220\n        });\n      }\n      this.parent.transition(\"idle\", this.info);\n    }\n  }]);\n  return ZoomBrushing;\n}(StateNode);\n_defineProperty(ZoomBrushing, \"id\", \"zoom_brushing\");\nexport { ZoomBrushing };","map":{"version":3,"names":["Box2d","StateNode","ZoomBrushing","_StateNode","_inherits","_super","_createSuper","_this","_classCallCheck","_len","arguments","length","args","Array","_key","call","apply","concat","_defineProperty","_assertThisInitialized","info","update","editor","setZoomBrush","complete","cancel","_createClass","key","value","_this$editor$inputs","inputs","originPagePoint","currentPagePoint","zoomBrush","setTo","FromPoints","toJson","parent","transition","threshold","zoomLevel","width","height","point","currentScreenPoint","altKey","zoomOut","duration","zoomIn","zoomToBounds","x","y"],"sources":["/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@tldraw/editor/src/lib/editor/tools/ZoomTool/children/ZoomBrushing.ts"],"sourcesContent":["import { Box2d } from '@tldraw/primitives'\nimport { TLEventHandlers, TLPointerEventInfo } from '../../../types/event-types'\nimport { StateNode } from '../../StateNode'\n\nexport class ZoomBrushing extends StateNode {\n\tstatic override id = 'zoom_brushing'\n\n\tinfo = {} as TLPointerEventInfo & { onInteractionEnd?: string }\n\n\tzoomBrush = new Box2d()\n\n\tonEnter = (info: TLPointerEventInfo & { onInteractionEnd: string }) => {\n\t\tthis.info = info\n\t\tthis.update()\n\t}\n\n\tonExit = () => {\n\t\tthis.editor.setZoomBrush(null)\n\t}\n\n\tonPointerMove = () => {\n\t\tthis.update()\n\t}\n\n\tonPointerUp: TLEventHandlers['onPointerUp'] = () => {\n\t\tthis.complete()\n\t}\n\n\tonCancel: TLEventHandlers['onCancel'] = () => {\n\t\tthis.cancel()\n\t}\n\n\tprivate update() {\n\t\tconst {\n\t\t\tinputs: { originPagePoint, currentPagePoint },\n\t\t} = this.editor\n\n\t\tthis.zoomBrush.setTo(Box2d.FromPoints([originPagePoint, currentPagePoint]))\n\t\tthis.editor.setZoomBrush(this.zoomBrush.toJson())\n\t}\n\n\tprivate cancel() {\n\t\tthis.parent.transition('idle', this.info)\n\t}\n\n\tprivate complete() {\n\t\tconst { zoomBrush } = this\n\t\tconst threshold = 8 / this.editor.zoomLevel\n\t\t// If the selected area is small then treat it as a click\n\t\tif (zoomBrush.width < threshold && zoomBrush.height < threshold) {\n\t\t\tconst point = this.editor.inputs.currentScreenPoint\n\t\t\tif (this.editor.inputs.altKey) {\n\t\t\t\tthis.editor.zoomOut(point, { duration: 220 })\n\t\t\t} else {\n\t\t\t\tthis.editor.zoomIn(point, { duration: 220 })\n\t\t\t}\n\t\t} else {\n\t\t\tconst zoomLevel = this.editor.inputs.altKey ? this.editor.zoomLevel / 2 : undefined\n\t\t\tthis.editor.zoomToBounds(\n\t\t\t\tzoomBrush.x,\n\t\t\t\tzoomBrush.y,\n\t\t\t\tzoomBrush.width,\n\t\t\t\tzoomBrush.height,\n\t\t\t\tzoomLevel,\n\t\t\t\t{ duration: 220 }\n\t\t\t)\n\t\t}\n\n\t\tthis.parent.transition('idle', this.info)\n\t}\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}