{"ast":null,"code":"import _createClass from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _classCallCheck from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _assertThisInitialized from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _inherits from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport _defineProperty from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport { StateNode } from \"../../StateNode.mjs\";\nvar EditingShape = /*#__PURE__*/function (_StateNode) {\n  _inherits(EditingShape, _StateNode);\n  var _super = _createSuper(EditingShape);\n  function EditingShape() {\n    var _this;\n    _classCallCheck(this, EditingShape);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _super.call.apply(_super, [this].concat(args));\n    _defineProperty(_assertThisInitialized(_this), \"onPointerEnter\", function (info) {\n      switch (info.target) {\n        case \"shape\":\n          {\n            var _this$editor = _this.editor,\n              selectedIds = _this$editor.selectedIds,\n              focusLayerId = _this$editor.focusLayerId;\n            var hoveringShape = _this.editor.getOutermostSelectableShape(info.shape, function (parent) {\n              return !selectedIds.includes(parent.id);\n            });\n            if (hoveringShape.id !== focusLayerId) {\n              _this.editor.setHoveredId(hoveringShape.id);\n            }\n            break;\n          }\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onPointerLeave\", function (info) {\n      switch (info.target) {\n        case \"shape\":\n          {\n            _this.editor.setHoveredId(null);\n            break;\n          }\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onExit\", function () {\n      var _util$onEditEnd;\n      if (!_this.editor.pageState.editingId) return;\n      var editingId = _this.editor.pageState.editingId;\n      if (!editingId) return;\n      _this.editor.setEditingId(null);\n      var shape = _this.editor.getShapeById(editingId);\n      var util = _this.editor.getShapeUtil(shape);\n      (_util$onEditEnd = util.onEditEnd) === null || _util$onEditEnd === void 0 || _util$onEditEnd.call(util, shape);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onPointerDown\", function (info) {\n      var _this$parent$current$, _this$parent$current$2;\n      switch (info.target) {\n        case \"shape\":\n          {\n            var shape = info.shape;\n            var editingId = _this.editor.pageState.editingId;\n            if (editingId) {\n              if (shape.id === editingId) {\n                return;\n              }\n              var editingShape = _this.editor.getShapeById(editingId);\n              if (editingShape) {\n                var _editingShapeUtil$onE, _util$canEdit;\n                var editingShapeUtil = _this.editor.getShapeUtil(editingShape);\n                (_editingShapeUtil$onE = editingShapeUtil.onEditEnd) === null || _editingShapeUtil$onE === void 0 || _editingShapeUtil$onE.call(editingShapeUtil, editingShape);\n                var util = _this.editor.getShapeUtil(shape);\n                if (shape.type === editingShape.type && (_util$canEdit = util.canEdit) !== null && _util$canEdit !== void 0 && _util$canEdit.call(util, shape) && !_this.editor.isShapeOrAncestorLocked(shape)) {\n                  _this.editor.setEditingId(shape.id);\n                  _this.editor.setHoveredId(shape.id);\n                  _this.editor.setSelectedIds([shape.id]);\n                  return;\n                }\n              }\n            }\n          }\n      }\n      _this.parent.transition(\"idle\", info);\n      (_this$parent$current$ = _this.parent.current.value) === null || _this$parent$current$ === void 0 || (_this$parent$current$2 = _this$parent$current$.onPointerDown) === null || _this$parent$current$2 === void 0 || _this$parent$current$2.call(_this$parent$current$, info);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onComplete\", function (info) {\n      _this.parent.transition(\"idle\", info);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onCancel\", function (info) {\n      _this.parent.transition(\"idle\", info);\n    });\n    return _this;\n  }\n  return _createClass(EditingShape);\n}(StateNode);\n_defineProperty(EditingShape, \"id\", \"editing_shape\");\nexport { EditingShape };","map":{"version":3,"names":["StateNode","EditingShape","_StateNode","_inherits","_super","_createSuper","_this","_classCallCheck","_len","arguments","length","args","Array","_key","call","apply","concat","_defineProperty","_assertThisInitialized","info","target","_this$editor","editor","selectedIds","focusLayerId","hoveringShape","getOutermostSelectableShape","shape","parent","includes","id","setHoveredId","_util$onEditEnd","pageState","editingId","setEditingId","getShapeById","util","getShapeUtil","onEditEnd","_this$parent$current$","_this$parent$current$2","editingShape","_editingShapeUtil$onE","_util$canEdit","editingShapeUtil","type","canEdit","isShapeOrAncestorLocked","setSelectedIds","transition","current","value","onPointerDown","_createClass"],"sources":["/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@tldraw/editor/src/lib/editor/tools/SelectTool/children/EditingShape.ts"],"sourcesContent":["import { TLEventHandlers } from '../../../types/event-types'\nimport { StateNode } from '../../StateNode'\n\nexport class EditingShape extends StateNode {\n\tstatic override id = 'editing_shape'\n\n\tonPointerEnter: TLEventHandlers['onPointerEnter'] = (info) => {\n\t\tswitch (info.target) {\n\t\t\tcase 'shape': {\n\t\t\t\tconst { selectedIds, focusLayerId } = this.editor\n\t\t\t\tconst hoveringShape = this.editor.getOutermostSelectableShape(\n\t\t\t\t\tinfo.shape,\n\t\t\t\t\t(parent) => !selectedIds.includes(parent.id)\n\t\t\t\t)\n\t\t\t\tif (hoveringShape.id !== focusLayerId) {\n\t\t\t\t\tthis.editor.setHoveredId(hoveringShape.id)\n\t\t\t\t}\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t}\n\n\tonPointerLeave: TLEventHandlers['onPointerLeave'] = (info) => {\n\t\tswitch (info.target) {\n\t\t\tcase 'shape': {\n\t\t\t\tthis.editor.setHoveredId(null)\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t}\n\n\tonExit = () => {\n\t\tif (!this.editor.pageState.editingId) return\n\t\tconst { editingId } = this.editor.pageState\n\t\tif (!editingId) return\n\n\t\t// Clear the editing shape\n\t\tthis.editor.setEditingId(null)\n\n\t\tconst shape = this.editor.getShapeById(editingId)!\n\t\tconst util = this.editor.getShapeUtil(shape)\n\n\t\t// Check for changes on editing end\n\t\tutil.onEditEnd?.(shape)\n\t}\n\n\tonPointerDown: TLEventHandlers['onPointerDown'] = (info) => {\n\t\tswitch (info.target) {\n\t\t\tcase 'shape': {\n\t\t\t\tconst { shape } = info\n\n\t\t\t\tconst { editingId } = this.editor.pageState\n\n\t\t\t\tif (editingId) {\n\t\t\t\t\tif (shape.id === editingId) {\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\n\t\t\t\t\tconst editingShape = this.editor.getShapeById(editingId)\n\n\t\t\t\t\tif (editingShape) {\n\t\t\t\t\t\tconst editingShapeUtil = this.editor.getShapeUtil(editingShape)\n\t\t\t\t\t\teditingShapeUtil.onEditEnd?.(editingShape)\n\n\t\t\t\t\t\tconst util = this.editor.getShapeUtil(shape)\n\n\t\t\t\t\t\t// If the user has clicked onto a different shape of the same type\n\t\t\t\t\t\t// which is available to edit, select it and begin editing it.\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tshape.type === editingShape.type &&\n\t\t\t\t\t\t\tutil.canEdit?.(shape) &&\n\t\t\t\t\t\t\t!this.editor.isShapeOrAncestorLocked(shape)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tthis.editor.setEditingId(shape.id)\n\t\t\t\t\t\t\tthis.editor.setHoveredId(shape.id)\n\t\t\t\t\t\t\tthis.editor.setSelectedIds([shape.id])\n\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.parent.transition('idle', info)\n\t\tthis.parent.current.value?.onPointerDown?.(info)\n\t}\n\n\tonComplete: TLEventHandlers['onComplete'] = (info) => {\n\t\tthis.parent.transition('idle', info)\n\t}\n\n\tonCancel: TLEventHandlers['onCancel'] = (info) => {\n\t\tthis.parent.transition('idle', info)\n\t}\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}