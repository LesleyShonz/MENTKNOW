{
  "version": 3,
  "sources": ["../../../../src/lib/editor/managers/ActiveAreaManager.ts"],
  "sourcesContent": ["import { atom } from 'signia'\nimport { Editor } from '../Editor'\n\ntype Offsets = {\n\ttop: number\n\tleft: number\n\tbottom: number\n\tright: number\n}\nconst DEFAULT_OFFSETS = {\n\ttop: 10,\n\tleft: 10,\n\tbottom: 10,\n\tright: 10,\n}\n\nexport function getActiveAreaScreenSpace(editor: Editor) {\n\tconst containerEl = editor.getContainer()\n\tconst el = containerEl.querySelector('*[data-tldraw-area=\"active-drawing\"]')\n\tconst out = {\n\t\t...DEFAULT_OFFSETS,\n\t\twidth: 0,\n\t\theight: 0,\n\t}\n\tif (el && containerEl) {\n\t\tconst cBbbox = containerEl.getBoundingClientRect()\n\t\tconst bbox = el.getBoundingClientRect()\n\t\tout.top = bbox.top\n\t\tout.left = bbox.left\n\t\tout.bottom = cBbbox.height - bbox.bottom\n\t\tout.right = cBbbox.width - bbox.right\n\t}\n\n\tout.width = editor.viewportScreenBounds.width - out.left - out.right\n\tout.height = editor.viewportScreenBounds.height - out.top - out.bottom\n\treturn out\n}\n\nexport function getActiveAreaPageSpace(editor: Editor) {\n\tconst out = getActiveAreaScreenSpace(editor)\n\tconst z = editor.zoomLevel\n\tout.left /= z\n\tout.right /= z\n\tout.top /= z\n\tout.bottom /= z\n\tout.width /= z\n\tout.height /= z\n\treturn out\n}\n\nexport class ActiveAreaManager {\n\tconstructor(public editor: Editor) {\n\t\twindow.addEventListener('resize', this.updateOffsets)\n\t\tthis.editor.disposables.add(this.dispose)\n\t}\n\n\toffsets = atom<Offsets>('activeAreaOffsets', DEFAULT_OFFSETS)\n\n\tupdateOffsets = () => {\n\t\tconst offsets = getActiveAreaPageSpace(this.editor)\n\t\tthis.offsets.set(offsets)\n\t}\n\n\t// Clear the listener\n\tdispose = () => {\n\t\twindow.addEventListener('resize', this.updateOffsets)\n\t}\n}\n"],
  "mappings": "AAAA,SAAS,YAAY;AASrB,MAAM,kBAAkB;AAAA,EACvB,KAAK;AAAA,EACL,MAAM;AAAA,EACN,QAAQ;AAAA,EACR,OAAO;AACR;AAEO,SAAS,yBAAyB,QAAgB;AACxD,QAAM,cAAc,OAAO,aAAa;AACxC,QAAM,KAAK,YAAY,cAAc,sCAAsC;AAC3E,QAAM,MAAM;AAAA,IACX,GAAG;AAAA,IACH,OAAO;AAAA,IACP,QAAQ;AAAA,EACT;AACA,MAAI,MAAM,aAAa;AACtB,UAAM,SAAS,YAAY,sBAAsB;AACjD,UAAM,OAAO,GAAG,sBAAsB;AACtC,QAAI,MAAM,KAAK;AACf,QAAI,OAAO,KAAK;AAChB,QAAI,SAAS,OAAO,SAAS,KAAK;AAClC,QAAI,QAAQ,OAAO,QAAQ,KAAK;AAAA,EACjC;AAEA,MAAI,QAAQ,OAAO,qBAAqB,QAAQ,IAAI,OAAO,IAAI;AAC/D,MAAI,SAAS,OAAO,qBAAqB,SAAS,IAAI,MAAM,IAAI;AAChE,SAAO;AACR;AAEO,SAAS,uBAAuB,QAAgB;AACtD,QAAM,MAAM,yBAAyB,MAAM;AAC3C,QAAM,IAAI,OAAO;AACjB,MAAI,QAAQ;AACZ,MAAI,SAAS;AACb,MAAI,OAAO;AACX,MAAI,UAAU;AACd,MAAI,SAAS;AACb,MAAI,UAAU;AACd,SAAO;AACR;AAEO,MAAM,kBAAkB;AAAA,EAC9B,YAAmB,QAAgB;AAAhB;AAClB,WAAO,iBAAiB,UAAU,KAAK,aAAa;AACpD,SAAK,OAAO,YAAY,IAAI,KAAK,OAAO;AAAA,EACzC;AAAA,EAEA,UAAU,KAAc,qBAAqB,eAAe;AAAA,EAE5D,gBAAgB,MAAM;AACrB,UAAM,UAAU,uBAAuB,KAAK,MAAM;AAClD,SAAK,QAAQ,IAAI,OAAO;AAAA,EACzB;AAAA;AAAA,EAGA,UAAU,MAAM;AACf,WAAO,iBAAiB,UAAU,KAAK,aAAa;AAAA,EACrD;AACD;",
  "names": []
}
