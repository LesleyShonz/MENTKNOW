{"ast":null,"code":"// src/wrapJsx.ts\nimport { Component } from \"react\";\nimport { track } from \"./track.mjs\";\nvar ReactMemoType = Symbol.for(\"react.memo\");\nvar ReactForwardRefType = Symbol.for(\"react.forward_ref\");\nvar ProxyInstance = /* @__PURE__ */new WeakMap();\nfunction proxyFunctionalComponent(Component2) {\n  var existing = ProxyInstance.get(Component2);\n  if (existing) return existing;\n  var tracked = track(Component2);\n  ProxyInstance.set(Component2, tracked);\n  return tracked;\n}\nfunction wrapJsx(jsx) {\n  if (typeof jsx !== \"function\") return jsx;\n  return function (type, props) {\n    if (typeof type === \"function\" && !(type instanceof Component)) {\n      type = proxyFunctionalComponent(type);\n    } else if (type && typeof type === \"object\") {\n      if (type.$$typeof === ReactMemoType) {\n        type = proxyFunctionalComponent(type.type);\n      } else if (type.$$typeof === ReactForwardRefType) {\n        type = proxyFunctionalComponent(type);\n      }\n    }\n    for (var _len = arguments.length, rest = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n      rest[_key - 2] = arguments[_key];\n    }\n    return jsx.call.apply(jsx, [jsx, type, props].concat(rest));\n  };\n}\nexport { wrapJsx };","map":{"version":3,"names":["Component","track","ReactMemoType","Symbol","for","ReactForwardRefType","ProxyInstance","WeakMap","proxyFunctionalComponent","Component2","existing","get","tracked","set","wrapJsx","jsx","type","props","$$typeof","_len","arguments","length","rest","Array","_key","call","apply","concat"],"sources":["/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/signia-react/src/wrapJsx.ts"],"sourcesContent":["// This file was copied and adapted with thanks from the preactjs/preact repo.\n// https://github.com/preactjs/signals/blob/main/packages/react/src/index.ts\n\n// The MIT License (MIT)\n\n// Copyright (c) 2022-present Preact Team\n\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n\n// The above copyright notice and this permission notice shall be included in all\n// copies or substantial portions of the Software.\n\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n// SOFTWARE.\n\nimport { Component, type FunctionComponent } from 'react'\nimport { track } from './track.js'\n\nconst ReactMemoType = Symbol.for('react.memo') // https://github.com/facebook/react/blob/346c7d4c43a0717302d446da9e7423a8e28d8996/packages/shared/ReactSymbols.js#L30\nconst ReactForwardRefType = Symbol.for('react.forward_ref')\nconst ProxyInstance = new WeakMap<FunctionComponent<any>, FunctionComponent<any>>()\n\nfunction proxyFunctionalComponent(Component: FunctionComponent<any>) {\n\tconst existing = ProxyInstance.get(Component)\n\tif (existing) return existing\n\tconst tracked = track(Component)\n\tProxyInstance.set(Component, tracked)\n\treturn tracked\n}\n\n/** @internal */\nexport function wrapJsx<T>(jsx: T): T {\n\tif (typeof jsx !== 'function') return jsx\n\n\treturn function (type: any, props: any, ...rest: any[]) {\n\t\tif (typeof type === 'function' && !(type instanceof Component)) {\n\t\t\ttype = proxyFunctionalComponent(type)\n\t\t} else if (type && typeof type === 'object') {\n\t\t\tif (type.$$typeof === ReactMemoType) {\n\t\t\t\ttype = proxyFunctionalComponent(type.type)\n\t\t\t} else if (type.$$typeof === ReactForwardRefType) {\n\t\t\t\ttype = proxyFunctionalComponent(type)\n\t\t\t}\n\t\t}\n\n\t\treturn jsx.call(jsx, type, props, ...rest)\n\t} as any as T\n}\n"],"mappings":";AAyBA,SAASA,SAAA,QAAyC;AAClD,SAASC,KAAA,QAAa;AAEtB,IAAMC,aAAA,GAAgBC,MAAA,CAAOC,GAAA,CAAI,YAAY;AAC7C,IAAMC,mBAAA,GAAsBF,MAAA,CAAOC,GAAA,CAAI,mBAAmB;AAC1D,IAAME,aAAA,GAAgB,mBAAIC,OAAA,CAAwD;AAElF,SAASC,yBAAyBC,UAAA,EAAmC;EACpE,IAAMC,QAAA,GAAWJ,aAAA,CAAcK,GAAA,CAAIF,UAAS;EAC5C,IAAIC,QAAA,EAAU,OAAOA,QAAA;EACrB,IAAME,OAAA,GAAUX,KAAA,CAAMQ,UAAS;EAC/BH,aAAA,CAAcO,GAAA,CAAIJ,UAAA,EAAWG,OAAO;EACpC,OAAOA,OAAA;AACR;AAGO,SAASE,QAAWC,GAAA,EAAW;EACrC,IAAI,OAAOA,GAAA,KAAQ,YAAY,OAAOA,GAAA;EAEtC,OAAO,UAAUC,IAAA,EAAWC,KAAA,EAA4B;IACvD,IAAI,OAAOD,IAAA,KAAS,cAAc,EAAEA,IAAA,YAAgBhB,SAAA,GAAY;MAC/DgB,IAAA,GAAOR,wBAAA,CAAyBQ,IAAI;IACrC,WAAWA,IAAA,IAAQ,OAAOA,IAAA,KAAS,UAAU;MAC5C,IAAIA,IAAA,CAAKE,QAAA,KAAahB,aAAA,EAAe;QACpCc,IAAA,GAAOR,wBAAA,CAAyBQ,IAAA,CAAKA,IAAI;MAC1C,WAAWA,IAAA,CAAKE,QAAA,KAAab,mBAAA,EAAqB;QACjDW,IAAA,GAAOR,wBAAA,CAAyBQ,IAAI;MACrC;IACD;IAAA,SAAAG,IAAA,GAAAC,SAAA,CAAAC,MAAA,EAT0CC,IAAA,OAAAC,KAAA,CAAAJ,IAAA,OAAAA,IAAA,WAAAK,IAAA,MAAAA,IAAA,GAAAL,IAAA,EAAAK,IAAA;MAAAF,IAAA,CAAAE,IAAA,QAAAJ,SAAA,CAAAI,IAAA;IAAA;IAW1C,OAAOT,GAAA,CAAIU,IAAA,CAAAC,KAAA,CAAJX,GAAA,GAASA,GAAA,EAAKC,IAAA,EAAMC,KAAA,EAAAU,MAAA,CAAUL,IAAI;EAC1C;AACD"},"metadata":{},"sourceType":"module","externalDependencies":[]}