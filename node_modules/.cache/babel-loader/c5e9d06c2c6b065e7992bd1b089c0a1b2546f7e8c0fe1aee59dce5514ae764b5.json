{"ast":null,"code":"import _objectSpread from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport { useMemo } from \"react\";\nimport { loopToHtmlElement, releasePointerCapture, setPointerCapture } from \"../utils/dom.mjs\";\nimport { getPointerInfo } from \"../utils/svg.mjs\";\nimport { useEditor } from \"./useEditor.mjs\";\nfunction useSelectionEvents(handle) {\n  var editor = useEditor();\n  var events = useMemo(function selectionEvents() {\n    var onPointerDown = function onPointerDown(e) {\n      if (e.isKilled) return;\n      if (e.button !== 0) return;\n      var elm = loopToHtmlElement(e.currentTarget);\n      function releaseCapture() {\n        elm.removeEventListener(\"pointerup\", releaseCapture);\n        releasePointerCapture(elm, e);\n      }\n      setPointerCapture(elm, e);\n      elm.addEventListener(\"pointerup\", releaseCapture);\n      editor.dispatch(_objectSpread({\n        name: \"pointer_down\",\n        type: \"pointer\",\n        target: \"selection\",\n        handle: handle\n      }, getPointerInfo(e, editor.getContainer())));\n      e.stopPropagation();\n    };\n    var lastX, lastY;\n    function onPointerMove(e) {\n      if (e.isKilled) return;\n      if (e.button !== 0) return;\n      if (e.clientX === lastX && e.clientY === lastY) return;\n      lastX = e.clientX;\n      lastY = e.clientY;\n      editor.dispatch(_objectSpread({\n        name: \"pointer_move\",\n        type: \"pointer\",\n        target: \"selection\",\n        handle: handle\n      }, getPointerInfo(e, editor.getContainer())));\n    }\n    var onPointerUp = function onPointerUp(e) {\n      if (e.isKilled) return;\n      if (e.button !== 0) return;\n      editor.dispatch(_objectSpread({\n        name: \"pointer_up\",\n        type: \"pointer\",\n        target: \"selection\",\n        handle: handle\n      }, getPointerInfo(e, editor.getContainer())));\n    };\n    return {\n      onPointerDown: onPointerDown,\n      onPointerMove: onPointerMove,\n      onPointerUp: onPointerUp\n    };\n  }, [editor, handle]);\n  return events;\n}\nexport { useSelectionEvents };","map":{"version":3,"names":["useMemo","loopToHtmlElement","releasePointerCapture","setPointerCapture","getPointerInfo","useEditor","useSelectionEvents","handle","editor","events","selectionEvents","onPointerDown","e","isKilled","button","elm","currentTarget","releaseCapture","removeEventListener","addEventListener","dispatch","_objectSpread","name","type","target","getContainer","stopPropagation","lastX","lastY","onPointerMove","clientX","clientY","onPointerUp"],"sources":["/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@tldraw/editor/src/lib/hooks/useSelectionEvents.ts"],"sourcesContent":["import { useMemo } from 'react'\nimport { TLSelectionHandle } from '../editor/types/selection-types'\nimport { loopToHtmlElement, releasePointerCapture, setPointerCapture } from '../utils/dom'\nimport { getPointerInfo } from '../utils/svg'\nimport { useEditor } from './useEditor'\n\nexport function useSelectionEvents(handle: TLSelectionHandle) {\n\tconst editor = useEditor()\n\n\tconst events = useMemo(\n\t\tfunction selectionEvents() {\n\t\t\tconst onPointerDown: React.PointerEventHandler = (e) => {\n\t\t\t\tif ((e as any).isKilled) return\n\t\t\t\tif (e.button !== 0) return\n\n\t\t\t\t// Because the events are probably set on SVG elements,\n\t\t\t\t// we need to instead place pointer capture on the first HTML\n\t\t\t\t// element above the event's target; and set a listener to\n\t\t\t\t// remove pointer capture when the pointer is released.\n\n\t\t\t\tconst elm = loopToHtmlElement(e.currentTarget)\n\n\t\t\t\tfunction releaseCapture() {\n\t\t\t\t\telm.removeEventListener('pointerup', releaseCapture)\n\t\t\t\t\treleasePointerCapture(elm, e)\n\t\t\t\t}\n\n\t\t\t\tsetPointerCapture(elm, e)\n\t\t\t\telm.addEventListener('pointerup', releaseCapture)\n\n\t\t\t\teditor.dispatch({\n\t\t\t\t\tname: 'pointer_down',\n\t\t\t\t\ttype: 'pointer',\n\t\t\t\t\ttarget: 'selection',\n\t\t\t\t\thandle,\n\t\t\t\t\t...getPointerInfo(e, editor.getContainer()),\n\t\t\t\t})\n\t\t\t\te.stopPropagation()\n\t\t\t}\n\n\t\t\t// Track the last screen point\n\t\t\tlet lastX: number, lastY: number\n\n\t\t\tfunction onPointerMove(e: React.PointerEvent) {\n\t\t\t\tif ((e as any).isKilled) return\n\t\t\t\tif (e.button !== 0) return\n\t\t\t\tif (e.clientX === lastX && e.clientY === lastY) return\n\t\t\t\tlastX = e.clientX\n\t\t\t\tlastY = e.clientY\n\n\t\t\t\teditor.dispatch({\n\t\t\t\t\tname: 'pointer_move',\n\t\t\t\t\ttype: 'pointer',\n\t\t\t\t\ttarget: 'selection',\n\t\t\t\t\thandle,\n\t\t\t\t\t...getPointerInfo(e, editor.getContainer()),\n\t\t\t\t})\n\t\t\t}\n\n\t\t\tconst onPointerUp: React.PointerEventHandler = (e) => {\n\t\t\t\tif ((e as any).isKilled) return\n\t\t\t\tif (e.button !== 0) return\n\n\t\t\t\teditor.dispatch({\n\t\t\t\t\tname: 'pointer_up',\n\t\t\t\t\ttype: 'pointer',\n\t\t\t\t\ttarget: 'selection',\n\t\t\t\t\thandle,\n\t\t\t\t\t...getPointerInfo(e, editor.getContainer()),\n\t\t\t\t})\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tonPointerDown,\n\t\t\t\tonPointerMove,\n\t\t\t\tonPointerUp,\n\t\t\t}\n\t\t},\n\t\t[editor, handle]\n\t)\n\n\treturn events\n}\n"],"mappings":";AAAA,SAASA,OAAA,QAAe;AAExB,SAASC,iBAAA,EAAmBC,qBAAA,EAAuBC,iBAAA,QAAyB;AAC5E,SAASC,cAAA,QAAsB;AAC/B,SAASC,SAAA,QAAiB;AAEnB,SAASC,mBAAmBC,MAAA,EAA2B;EAC7D,IAAMC,MAAA,GAASH,SAAA,CAAU;EAEzB,IAAMI,MAAA,GAAST,OAAA,CACd,SAASU,gBAAA,EAAkB;IAC1B,IAAMC,aAAA,GAA2C,SAA3CA,cAA4CC,CAAA,EAAM;MACvD,IAAKA,CAAA,CAAUC,QAAA,EAAU;MACzB,IAAID,CAAA,CAAEE,MAAA,KAAW,GAAG;MAOpB,IAAMC,GAAA,GAAMd,iBAAA,CAAkBW,CAAA,CAAEI,aAAa;MAE7C,SAASC,eAAA,EAAiB;QACzBF,GAAA,CAAIG,mBAAA,CAAoB,aAAaD,cAAc;QACnDf,qBAAA,CAAsBa,GAAA,EAAKH,CAAC;MAC7B;MAEAT,iBAAA,CAAkBY,GAAA,EAAKH,CAAC;MACxBG,GAAA,CAAII,gBAAA,CAAiB,aAAaF,cAAc;MAEhDT,MAAA,CAAOY,QAAA,CAAAC,aAAA;QACNC,IAAA,EAAM;QACNC,IAAA,EAAM;QACNC,MAAA,EAAQ;QACRjB,MAAA,EAAAA;MAAA,GACGH,cAAA,CAAeQ,CAAA,EAAGJ,MAAA,CAAOiB,YAAA,CAAa,CAAC,EAC1C;MACDb,CAAA,CAAEc,eAAA,CAAgB;IACnB;IAGA,IAAIC,KAAA,EAAeC,KAAA;IAEnB,SAASC,cAAcjB,CAAA,EAAuB;MAC7C,IAAKA,CAAA,CAAUC,QAAA,EAAU;MACzB,IAAID,CAAA,CAAEE,MAAA,KAAW,GAAG;MACpB,IAAIF,CAAA,CAAEkB,OAAA,KAAYH,KAAA,IAASf,CAAA,CAAEmB,OAAA,KAAYH,KAAA,EAAO;MAChDD,KAAA,GAAQf,CAAA,CAAEkB,OAAA;MACVF,KAAA,GAAQhB,CAAA,CAAEmB,OAAA;MAEVvB,MAAA,CAAOY,QAAA,CAAAC,aAAA;QACNC,IAAA,EAAM;QACNC,IAAA,EAAM;QACNC,MAAA,EAAQ;QACRjB,MAAA,EAAAA;MAAA,GACGH,cAAA,CAAeQ,CAAA,EAAGJ,MAAA,CAAOiB,YAAA,CAAa,CAAC,EAC1C;IACF;IAEA,IAAMO,WAAA,GAAyC,SAAzCA,YAA0CpB,CAAA,EAAM;MACrD,IAAKA,CAAA,CAAUC,QAAA,EAAU;MACzB,IAAID,CAAA,CAAEE,MAAA,KAAW,GAAG;MAEpBN,MAAA,CAAOY,QAAA,CAAAC,aAAA;QACNC,IAAA,EAAM;QACNC,IAAA,EAAM;QACNC,MAAA,EAAQ;QACRjB,MAAA,EAAAA;MAAA,GACGH,cAAA,CAAeQ,CAAA,EAAGJ,MAAA,CAAOiB,YAAA,CAAa,CAAC,EAC1C;IACF;IAEA,OAAO;MACNd,aAAA,EAAAA,aAAA;MACAkB,aAAA,EAAAA,aAAA;MACAG,WAAA,EAAAA;IACD;EACD,GACA,CAACxB,MAAA,EAAQD,MAAM,CAChB;EAEA,OAAOE,MAAA;AACR"},"metadata":{},"sourceType":"module","externalDependencies":[]}