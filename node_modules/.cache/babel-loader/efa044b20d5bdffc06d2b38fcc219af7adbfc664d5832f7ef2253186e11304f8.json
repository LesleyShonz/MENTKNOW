{"ast":null,"code":"import _classCallCheck from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _assertThisInitialized from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _inherits from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport _defineProperty from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport { ScribbleManager } from \"../../../managers/ScribbleManager.mjs\";\nimport { StateNode } from \"../../StateNode.mjs\";\nvar Lasering = /*#__PURE__*/function (_StateNode) {\n  _inherits(Lasering, _StateNode);\n  var _super = _createSuper(Lasering);\n  function Lasering() {\n    var _this;\n    _classCallCheck(this, Lasering);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _super.call.apply(_super, [this].concat(args));\n    _defineProperty(_assertThisInitialized(_this), \"scribble\", {});\n    _defineProperty(_assertThisInitialized(_this), \"onEnter\", function () {\n      _this.startScribble();\n      _this.pushPointToScribble();\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onExit\", function () {\n      _this.editor.setErasingIds([]);\n      _this.scribble.stop();\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onPointerMove\", function () {\n      _this.pushPointToScribble();\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onPointerUp\", function () {\n      _this.complete();\n    });\n    _defineProperty(_assertThisInitialized(_this), \"startScribble\", function () {\n      if (_this.scribble.tick) {\n        var _this$scribble;\n        _this.editor.off(\"tick\", (_this$scribble = _this.scribble) === null || _this$scribble === void 0 ? void 0 : _this$scribble.tick);\n      }\n      _this.scribble = new ScribbleManager({\n        onUpdate: _this.onScribbleUpdate,\n        onComplete: _this.onScribbleComplete,\n        color: \"laser\",\n        opacity: 0.7,\n        size: 4,\n        delay: 1200\n      });\n      _this.editor.on(\"tick\", _this.scribble.tick);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"pushPointToScribble\", function () {\n      var _this$editor$inputs$c = _this.editor.inputs.currentPagePoint,\n        x = _this$editor$inputs$c.x,\n        y = _this$editor$inputs$c.y;\n      _this.scribble.addPoint(x, y);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onScribbleUpdate\", function (scribble) {\n      _this.editor.setScribble(scribble);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onScribbleComplete\", function () {\n      _this.editor.off(\"tick\", _this.scribble.tick);\n      _this.editor.setScribble(null);\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onCancel\", function () {\n      _this.cancel();\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onComplete\", function () {\n      _this.complete();\n    });\n    return _this;\n  }\n  _createClass(Lasering, [{\n    key: \"complete\",\n    value: function complete() {\n      this.parent.transition(\"idle\", {});\n    }\n  }, {\n    key: \"cancel\",\n    value: function cancel() {\n      this.parent.transition(\"idle\", {});\n    }\n  }]);\n  return Lasering;\n}(StateNode);\n_defineProperty(Lasering, \"id\", \"lasering\");\nexport { Lasering };","map":{"version":3,"names":["ScribbleManager","StateNode","Lasering","_StateNode","_inherits","_super","_createSuper","_this","_classCallCheck","_len","arguments","length","args","Array","_key","call","apply","concat","_defineProperty","_assertThisInitialized","startScribble","pushPointToScribble","editor","setErasingIds","scribble","stop","complete","tick","_this$scribble","off","onUpdate","onScribbleUpdate","onComplete","onScribbleComplete","color","opacity","size","delay","on","_this$editor$inputs$c","inputs","currentPagePoint","x","y","addPoint","setScribble","cancel","_createClass","key","value","parent","transition"],"sources":["/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@tldraw/editor/src/lib/editor/tools/LaserTool/children/Lasering.ts"],"sourcesContent":["import { TLScribble } from '@tldraw/tlschema'\nimport { ScribbleManager } from '../../../managers/ScribbleManager'\nimport { TLEventHandlers } from '../../../types/event-types'\nimport { StateNode } from '../../StateNode'\n\nexport class Lasering extends StateNode {\n\tstatic override id = 'lasering'\n\n\tscribble = {} as ScribbleManager\n\n\toverride onEnter = () => {\n\t\tthis.startScribble()\n\t\tthis.pushPointToScribble()\n\t}\n\n\toverride onExit = () => {\n\t\tthis.editor.setErasingIds([])\n\t\tthis.scribble.stop()\n\t}\n\n\toverride onPointerMove = () => {\n\t\tthis.pushPointToScribble()\n\t}\n\n\toverride onPointerUp = () => {\n\t\tthis.complete()\n\t}\n\n\tprivate startScribble = () => {\n\t\tif (this.scribble.tick) {\n\t\t\tthis.editor.off('tick', this.scribble?.tick)\n\t\t}\n\n\t\tthis.scribble = new ScribbleManager({\n\t\t\tonUpdate: this.onScribbleUpdate,\n\t\t\tonComplete: this.onScribbleComplete,\n\t\t\tcolor: 'laser',\n\t\t\topacity: 0.7,\n\t\t\tsize: 4,\n\t\t\tdelay: 1200,\n\t\t})\n\n\t\tthis.editor.on('tick', this.scribble.tick)\n\t}\n\n\tprivate pushPointToScribble = () => {\n\t\tconst { x, y } = this.editor.inputs.currentPagePoint\n\t\tthis.scribble.addPoint(x, y)\n\t}\n\n\tprivate onScribbleUpdate = (scribble: TLScribble) => {\n\t\tthis.editor.setScribble(scribble)\n\t}\n\n\tprivate onScribbleComplete = () => {\n\t\tthis.editor.off('tick', this.scribble.tick)\n\t\tthis.editor.setScribble(null)\n\t}\n\n\toverride onCancel: TLEventHandlers['onCancel'] = () => {\n\t\tthis.cancel()\n\t}\n\n\toverride onComplete: TLEventHandlers['onComplete'] = () => {\n\t\tthis.complete()\n\t}\n\n\tprivate complete() {\n\t\tthis.parent.transition('idle', {})\n\t}\n\n\tprivate cancel() {\n\t\tthis.parent.transition('idle', {})\n\t}\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}