{"ast":null,"code":"import _objectSpread from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _classCallCheck from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _assertThisInitialized from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _inherits from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport _defineProperty from \"/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport { Vec2d } from \"@tldraw/primitives\";\nimport { createShapeId } from \"@tldraw/tlschema\";\nimport { StateNode } from \"../../StateNode.mjs\";\nvar Pointing = /*#__PURE__*/function (_StateNode) {\n  _inherits(Pointing, _StateNode);\n  var _super = _createSuper(Pointing);\n  function Pointing() {\n    var _this;\n    _classCallCheck(this, Pointing);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _super.call.apply(_super, [this].concat(args));\n    _defineProperty(_assertThisInitialized(_this), \"markId\", \"creating\");\n    _defineProperty(_assertThisInitialized(_this), \"wasFocusedOnEnter\", false);\n    _defineProperty(_assertThisInitialized(_this), \"onEnter\", function () {\n      var isMenuOpen = _this.editor.isMenuOpen;\n      _this.wasFocusedOnEnter = !isMenuOpen;\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onPointerMove\", function (info) {\n      if (_this.editor.inputs.isDragging) {\n        var originPagePoint = _this.editor.inputs.originPagePoint;\n        var shapeType = _this.parent.shapeType.type;\n        var id = createShapeId();\n        _this.editor.mark(_this.markId);\n        _this.editor.createShapes([{\n          id: id,\n          type: shapeType,\n          x: originPagePoint.x,\n          y: originPagePoint.y,\n          props: {\n            w: 1,\n            h: 1\n          }\n        }], true);\n        _this.editor.setSelectedTool(\"select.resizing\", _objectSpread(_objectSpread({}, info), {}, {\n          target: \"selection\",\n          handle: \"bottom_right\",\n          isCreating: true,\n          creationCursorOffset: {\n            x: 1,\n            y: 1\n          },\n          onInteractionEnd: _this.parent.id\n        }));\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onPointerUp\", function () {\n      _this.complete();\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onCancel\", function () {\n      _this.cancel();\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onComplete\", function () {\n      _this.complete();\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onInterrupt\", function () {\n      _this.cancel();\n    });\n    return _this;\n  }\n  _createClass(Pointing, [{\n    key: \"complete\",\n    value: function complete() {\n      var originPagePoint = this.editor.inputs.originPagePoint;\n      if (!this.wasFocusedOnEnter) {\n        return;\n      }\n      this.editor.mark(this.markId);\n      var shapeType = this.parent.shapeType.type;\n      var id = createShapeId();\n      this.editor.mark(this.markId);\n      this.editor.createShapes([{\n        id: id,\n        type: shapeType,\n        x: originPagePoint.x,\n        y: originPagePoint.y\n      }]);\n      var shape = this.editor.getShapeById(id);\n      var _this$editor$getShape = this.editor.getShapeUtil(shape).defaultProps(),\n        w = _this$editor$getShape.w,\n        h = _this$editor$getShape.h;\n      var delta = this.editor.getDeltaInParentSpace(shape, new Vec2d(w / 2, h / 2));\n      this.editor.updateShapes([{\n        id: id,\n        type: shapeType,\n        x: shape.x - delta.x,\n        y: shape.y - delta.y\n      }]);\n      this.editor.setSelectedIds([id]);\n      if (this.editor.instanceState.isToolLocked) {\n        this.parent.transition(\"idle\", {});\n      } else {\n        this.editor.setSelectedTool(\"select.idle\");\n      }\n    }\n  }, {\n    key: \"cancel\",\n    value: function cancel() {\n      this.parent.transition(\"idle\", {});\n    }\n  }]);\n  return Pointing;\n}(StateNode);\n_defineProperty(Pointing, \"id\", \"pointing\");\nexport { Pointing };","map":{"version":3,"names":["Vec2d","createShapeId","StateNode","Pointing","_StateNode","_inherits","_super","_createSuper","_this","_classCallCheck","_len","arguments","length","args","Array","_key","call","apply","concat","_defineProperty","_assertThisInitialized","isMenuOpen","editor","wasFocusedOnEnter","info","inputs","isDragging","originPagePoint","shapeType","parent","type","id","mark","markId","createShapes","x","y","props","w","h","setSelectedTool","_objectSpread","target","handle","isCreating","creationCursorOffset","onInteractionEnd","complete","cancel","_createClass","key","value","shape","getShapeById","_this$editor$getShape","getShapeUtil","defaultProps","delta","getDeltaInParentSpace","updateShapes","setSelectedIds","instanceState","isToolLocked","transition"],"sources":["/Users/lesleyshinhiwa/Downloads/tldraw-partykit-example-2/Co/node_modules/@tldraw/editor/src/lib/editor/tools/BaseBoxShapeTool/children/Pointing.ts"],"sourcesContent":["import { Vec2d } from '@tldraw/primitives'\nimport { createShapeId } from '@tldraw/tlschema'\nimport { TLBaseBoxShape } from '../../../shapes/BaseBoxShapeUtil'\nimport { TLEventHandlers } from '../../../types/event-types'\nimport { StateNode } from '../../StateNode'\nimport { BaseBoxShapeTool } from '../BaseBoxShapeTool'\n\nexport class Pointing extends StateNode {\n\tstatic override id = 'pointing'\n\n\tmarkId = 'creating'\n\n\twasFocusedOnEnter = false\n\n\tonEnter = () => {\n\t\tconst { isMenuOpen } = this.editor\n\t\tthis.wasFocusedOnEnter = !isMenuOpen\n\t}\n\n\tonPointerMove: TLEventHandlers['onPointerMove'] = (info) => {\n\t\tif (this.editor.inputs.isDragging) {\n\t\t\tconst { originPagePoint } = this.editor.inputs\n\n\t\t\tconst shapeType = (this.parent as BaseBoxShapeTool)!.shapeType.type as TLBaseBoxShape['type']\n\n\t\t\tconst id = createShapeId()\n\n\t\t\tthis.editor.mark(this.markId)\n\n\t\t\tthis.editor.createShapes<TLBaseBoxShape>(\n\t\t\t\t[\n\t\t\t\t\t{\n\t\t\t\t\t\tid,\n\t\t\t\t\t\ttype: shapeType,\n\t\t\t\t\t\tx: originPagePoint.x,\n\t\t\t\t\t\ty: originPagePoint.y,\n\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\tw: 1,\n\t\t\t\t\t\t\th: 1,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\ttrue\n\t\t\t)\n\t\t\tthis.editor.setSelectedTool('select.resizing', {\n\t\t\t\t...info,\n\t\t\t\ttarget: 'selection',\n\t\t\t\thandle: 'bottom_right',\n\t\t\t\tisCreating: true,\n\t\t\t\tcreationCursorOffset: { x: 1, y: 1 },\n\t\t\t\tonInteractionEnd: this.parent.id,\n\t\t\t})\n\t\t}\n\t}\n\n\toverride onPointerUp: TLEventHandlers['onPointerUp'] = () => {\n\t\tthis.complete()\n\t}\n\n\toverride onCancel: TLEventHandlers['onCancel'] = () => {\n\t\tthis.cancel()\n\t}\n\n\toverride onComplete: TLEventHandlers['onComplete'] = () => {\n\t\tthis.complete()\n\t}\n\n\toverride onInterrupt: TLEventHandlers['onInterrupt'] = () => {\n\t\tthis.cancel()\n\t}\n\n\tcomplete() {\n\t\tconst { originPagePoint } = this.editor.inputs\n\n\t\tif (!this.wasFocusedOnEnter) {\n\t\t\treturn\n\t\t}\n\n\t\tthis.editor.mark(this.markId)\n\n\t\tconst shapeType = (this.parent as BaseBoxShapeTool)!.shapeType.type as TLBaseBoxShape['type']\n\n\t\tconst id = createShapeId()\n\n\t\tthis.editor.mark(this.markId)\n\n\t\tthis.editor.createShapes<TLBaseBoxShape>([\n\t\t\t{\n\t\t\t\tid,\n\t\t\t\ttype: shapeType,\n\t\t\t\tx: originPagePoint.x,\n\t\t\t\ty: originPagePoint.y,\n\t\t\t},\n\t\t])\n\n\t\tconst shape = this.editor.getShapeById<TLBaseBoxShape>(id)!\n\t\tconst { w, h } = this.editor.getShapeUtil(shape).defaultProps() as TLBaseBoxShape['props']\n\t\tconst delta = this.editor.getDeltaInParentSpace(shape, new Vec2d(w / 2, h / 2))\n\n\t\tthis.editor.updateShapes<TLBaseBoxShape>([\n\t\t\t{\n\t\t\t\tid,\n\t\t\t\ttype: shapeType,\n\t\t\t\tx: shape.x - delta.x,\n\t\t\t\ty: shape.y - delta.y,\n\t\t\t},\n\t\t])\n\n\t\tthis.editor.setSelectedIds([id])\n\n\t\tif (this.editor.instanceState.isToolLocked) {\n\t\t\tthis.parent.transition('idle', {})\n\t\t} else {\n\t\t\tthis.editor.setSelectedTool('select.idle')\n\t\t}\n\t}\n\n\tcancel() {\n\t\tthis.parent.transition('idle', {})\n\t}\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}